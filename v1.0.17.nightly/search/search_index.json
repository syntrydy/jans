{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Janssen Project Documentation # Introduction # Janssen enables organizations to build a scalable centralized authentication and authorization service using free open source software. The components of the project include client and server implementations of the OAuth, OpenID Connect, SCIM and FIDO standards. Administration Guide # The Janssen Server is highly extensible and customizable. Resources for deployment, operation, and maintenance of the Janssen environment are available in the Administration guide . We recommend a holistic approach to identity, planning the environment thoroughly using the Deployment Guide . For a quick start for testing, you can jump right into Installation . Contribution Guide # There are many ways the community can contribute to the Janssen Project. Of course, you can contribute code. But we also need people to write documentation and guides, to help us with testing, to answer questions on the forums and chat, to review PRs, to help us with devops and CI/CD, to provide feedback on usability, and to promote the project through outreach. Also, by sharing metrics with us, we can gain valuable insights into how the software performs in the wild. Resources to get started are available here . Governance Guide # The Janssen Project is an open source member of the Linux Foundation. Information about the project's governance can be found here . Script Catalog # Interception scripts (or custom scripts) allow you to define custom business logic for various features offered by the OpenID Provider (Jans-auth server). Some examples of features which can be customized are - implementing a 2FA authentication method, consent gathering, client registration, adding business specific claims to ID token or Access token etc. Scripts can easily be upgraded and doesn't require forking the Jans Server code or re-building it. The definitive location for scripts and their documentation is the Script Catalog . Agama # Agama is a component of the Janssen authentication server that offers an alternative way to build web-based authentication flows. Typically, person authentication flows are defined in the server by means of jython scripts that adhere to a predefined API. With Agama, flows are coded using a DSL (domain specific language) designed for the sole purpose of writing web flows. Support # We prefer to have all our discussions through GitHub Discussions to better facilitate faster responses. However, other means are available such as the community chat on Gitter . You can register for free there with your Github identity. If you find a bug in a Janssen project, or you would like to suggest a new feature, try the GitHub Discussions first. If you have a \"howto\" or \"usage\" question, raise the question or usage ! License # The Janssen Project is licensed under the Apache License 2.0 . The Janssen Server is highly extensible and can be used with a variety of other products and projects, which may fall under other licenses. Looking for older documentation versions? # The Janssen Project posts the last five versions of the documentation. If you are looking for older versions, you can find them unprocessed in the docs folder. Select the version of choice from the tag dropdown in GitHub. If you want to process them you may do so following the steps here .","title":"Janssen Project Documentation"},{"location":"#janssen-project-documentation","text":"","title":"Janssen Project Documentation"},{"location":"#introduction","text":"Janssen enables organizations to build a scalable centralized authentication and authorization service using free open source software. The components of the project include client and server implementations of the OAuth, OpenID Connect, SCIM and FIDO standards.","title":"Introduction"},{"location":"#administration-guide","text":"The Janssen Server is highly extensible and customizable. Resources for deployment, operation, and maintenance of the Janssen environment are available in the Administration guide . We recommend a holistic approach to identity, planning the environment thoroughly using the Deployment Guide . For a quick start for testing, you can jump right into Installation .","title":"Administration Guide"},{"location":"#contribution-guide","text":"There are many ways the community can contribute to the Janssen Project. Of course, you can contribute code. But we also need people to write documentation and guides, to help us with testing, to answer questions on the forums and chat, to review PRs, to help us with devops and CI/CD, to provide feedback on usability, and to promote the project through outreach. Also, by sharing metrics with us, we can gain valuable insights into how the software performs in the wild. Resources to get started are available here .","title":"Contribution Guide"},{"location":"#governance-guide","text":"The Janssen Project is an open source member of the Linux Foundation. Information about the project's governance can be found here .","title":"Governance Guide"},{"location":"#script-catalog","text":"Interception scripts (or custom scripts) allow you to define custom business logic for various features offered by the OpenID Provider (Jans-auth server). Some examples of features which can be customized are - implementing a 2FA authentication method, consent gathering, client registration, adding business specific claims to ID token or Access token etc. Scripts can easily be upgraded and doesn't require forking the Jans Server code or re-building it. The definitive location for scripts and their documentation is the Script Catalog .","title":"Script Catalog"},{"location":"#agama","text":"Agama is a component of the Janssen authentication server that offers an alternative way to build web-based authentication flows. Typically, person authentication flows are defined in the server by means of jython scripts that adhere to a predefined API. With Agama, flows are coded using a DSL (domain specific language) designed for the sole purpose of writing web flows.","title":"Agama"},{"location":"#support","text":"We prefer to have all our discussions through GitHub Discussions to better facilitate faster responses. However, other means are available such as the community chat on Gitter . You can register for free there with your Github identity. If you find a bug in a Janssen project, or you would like to suggest a new feature, try the GitHub Discussions first. If you have a \"howto\" or \"usage\" question, raise the question or usage !","title":"Support"},{"location":"#license","text":"The Janssen Project is licensed under the Apache License 2.0 . The Janssen Server is highly extensible and can be used with a variety of other products and projects, which may fall under other licenses.","title":"License"},{"location":"#looking-for-older-documentation-versions","text":"The Janssen Project posts the last five versions of the documentation. If you are looking for older versions, you can find them unprocessed in the docs folder. Select the version of choice from the tag dropdown in GitHub. If you want to process them you may do so following the steps here .","title":"Looking for older documentation versions?"},{"location":"CHANGELOG/","text":"Changelog # 1.0.16 (2023-08-02) # Features # add dcr load test ( #5566 ) ( 0cfd4dd ) add new methnod to fido2 extension to allow modify json ( #5683 ) ( 256675b ), closes #5680 add new methnod to fido2 extension to allow modify json ( #5686 ) ( 6f56e51 ), closes #5680 jans-auth-server: automatically provision scopes if they are present in the SSA for trusted issuer #5164 ( #5553 ) ( abaa10f ) jans-linux-setup: gluu/flex casa installer ( #5590 ) ( 2ce1152 ) Bug Fixes # docker-jans: add test client with all scopes to CN-based setup ( #5682 ) ( a81d301 ) docs: autogenerate docs ( #5515 ) ( 25f9566 ) docs: autogenerate docs ( #5749 ) ( 9a29ec1 ) enlarge column adsPrjDeplDetails ( #5644 ) ( ae059fe ) jans-linux-setup: casa install option --with-casa ( #5598 ) ( 4758bf5 ) prepare for 1.0.16 release ( 042ce79 ) prepare for 1.0.16 release ( b2649c3 ) 1.0.15 (2023-07-12) # Features # add a prefix to Log statements #5201 ( #5475 ) ( ccb3f05 ) docs: added documentation for apple certificates and new fido configuration fields ( #5246 ) ( 7599071 ) Bug Fixes # doc: disable-selinux optin in vm-setup ( #5408 ) ( c29834d ) prepare for 1.0.15 release ( 0e3cc2f ) 1.0.14 (2023-06-12) # Features # add authorization headers needed to access scan API from SG ( #5093 ) ( 631abf2 ), closes #5092 Add DCR flow ( #5096 ) ( 4bdea42 ), closes #5092 agama: allow flows to supply the identity of the user to authenticate with a parameterizable attribute ( #5010 ) ( ca941ce ) agama: update deployer to account project's metadata noDirectLaunch ( #5182 ) ( cb4ae38 ) jans-auth-server: added ability to set client expiration via DCR #5057 ( #5185 ) ( a15054b ) jans-auth-server: made not found exceptions logging level configurable #4973 ( #4982 ) ( 98be22b ) jans-auth-server: Support of Select Account interception script #3452 ( #5149 ) ( b062148 ) move notify-client2 library to fido2 project #5030 ( #5031 ) ( ed5e09e ) update SG script and notify client to conform scan API #5061 ( #5062 ) ( 7afc42b ) update SG script to conform prod server ( #5103 ) ( 0ec3ca8 ) Bug Fixes # #5084 ( #5086 ) ( a0336a8 ) docker-jans-loadtesting-jmeter: errors running flow executor ( #5001 ) ( 79c1948 ) docs: #3675 ( #5068 ) ( 2aa76b2 ) docs: #4707 ( #5090 ) ( f93c750 ) docs: #4881 improvised ( #5035 ) ( 065edad ) docs: autogenerate docs ( #5225 ) ( 9c8e510 ) docs: Mention of Update Token script #3465 ( #5069 ) ( a3efe9b ) docs: minor addition #4881 ( #5083 ) ( 948b9aa ) docs: renamed SampleScript.py to PersistenceExtension.py ( #5087 ) ( 9ed9c2e ) jans-auth-server: Illegal op_policy_uri parameter: - exclude entries with blank values from discovery response (oxauth counterpart) #4888 ( #4934 ) ( 8603290 ) prepare for 1.0.14 release ( 25ccadf ) 1.0.13 (2023-05-10) # Features # jans-auth-server: add \"introspection\" scope check on introspection endpoint access #4557 ( #4716 ) ( ce2d75c ) jans-auth-server: log httpresponse body configurated by httpLoggingResponseBodyContent #349 ( #4417 ) ( 08d92b3 ) jans-fido2: interception scripts issue 1485, swagger updates ( #4543 ) ( 80274ff ) Bug Fixes # docker-jans-loadtesting-jmeter: rename incorrect reference to OCI image ( #4908 ) ( 7db2c11 ) docs: autogenerate docs ( #4933 ) ( 337239b ) docs: Jans cli tui update tui navigation docs ( #4767 ) ( a8b055c ) jans-cli-tui: f4 to close dialog ( #4736 ) ( 2f2d094 ) jans-fido2: interception script documentation ( #4751 ) ( 3b25801 ) prepare for 1.0.13 release ( 493478e ) 1.0.12 (2023-04-18) # Features # jans-auth-server: redirect back to RP when session is expired or if not possible show error page #4449 ( #4505 ) ( 0983e73 ) Bug Fixes # adjust bleeding edge images ( 4bb0b09 ) docs: #2487 ( #4624 ) ( ba7c347 ) docs: #3340 mention push notification server ( #4622 ) ( 7539857 ) docs: autogenerate docs ( #4652 ) ( e353874 ) docs: Paraphrasing #4369 ( #4512 ) ( 57e027e ) docs: session persistence #3235 ( #4616 ) ( 0575c9f ) jans-auth: #3340 incorrect folder location ( #4623 ) ( ef0dbb4 ) jans-config-api: agama deployment detail endpoint not including all flows IDs ( #4565 ) ( 358c494 ) prepare for 1.0.12 release ( 6f83197 ) 1.0.11 (2023-04-05) # Features # agama: add a \"default agama flow\" to bridge ( #4309 ) ( 3b2248f ) agama: add means to selectively prevent flow crash when a subflow crashes ( #4436 ) ( 5d8f0ad ) jans-auth-server: added configurable acr to Device Flow #4305 ( #4424 ) ( fbd4ede ) jans-auth-server: align JWT Response for OAuth Token Introspection with spec #3240 ( #4151 ) ( 02e1595 ) jans-auth-server: increase sessionIdUnauthenticatedUnusedLifetime value in setup #4445 ( #4446 ) ( ecf9395 ) Bug Fixes # docs: autogenerate docs ( #4486 ) ( a9b3eab ) docs: jans TUI configuration -- update user password ( #4435 ) ( c34b156 ) docs: minor ( #4245 ) ( 65f5944 ) docs: post-install setup #3340 ( #4327 ) ( c214681 ) docs: temporary record incase of one_step #3340 ( #4326 ) ( 921fd20 ) prepare for release ( 60775c0 ) SG endpoint moved inside the fido2 server ( #4321 ) ( dacb0fa ) update push part in SG script to conform Jans config and API ( #4345 ) ( e1cb416 ) 1.0.10 (2023-03-16) # Features # jans-auth-server: added online_access scope to issue session bound refresh token #3012 ( #4106 ) ( 635f611 ) jans-linux-setup: enable agama engine by default ( #4131 ) ( 7e432dc ) Bug Fixes # docs: autogenerate docs ( #4200 ) ( e20f399 ) formating issues ( #4119 ) ( c5b89ce ) prepare release for 1.0.10 ( e996926 ) 1.0.9 (2023-03-09) # Features # agama: update gama deployment endpoint to support configuration properties ( #4049 ) ( 392525c ) Bug Fixes # docs: autogenerate docs ( #4050 ) ( dcbb645 ) docs: autogenerate docs ( #4105 ) ( da87cef ) prepare 1.0.9 release ( 55f7e0c ) update next SNAPSHOT and dev ( 0df0e7a ) 1.0.8 (2023-03-01) # Features # add to AS session the data passed in Finish ( #3978 ) ( 12bedb7 ) Include additional attributes on SSA Get endpoint ( #3983 ) ( 4fded3e ) 1.0.7 (2023-02-22) # Features # add benchmark demo ( #3325 ) ( 26bbb0c ) add custom Github External Authenticator script for ADS #3625 ( #3626 ) ( f922a7a ) added custom resource owner password script fro two-factor twilio authentication ( #3208 ) ( eae0ca1 ) Change org_id to String type and Add status in get SSA ( #3763 ) ( d01269a ) docs: jans TUI SCIM configuration -- screenshot ( #3318 ) ( 7b463b0 ) docs: jans TUI SCIM configuration feature - screenshot1 ( #3306 ) ( d1adc98 ) docs: jans TUI SCIM configuration feature ( #3305 ) ( 70e358e ) jans-auth-server: added flexible date formatter handler to AS (required by certification tools) #3600 ( #3601 ) ( f646d73 ) jans-auth-server: renamed \"key_ops\" -> \"key_ops_type\" #3790 ( #3792 ) ( 7a6bcba ) process lib directory in .gama files for ADS projects deployment ( #3644 ) ( 40268ad ) Support Super Gluu one step authentication to Fido2 server #3593 ( #3599 ) ( c013b16 ) Bug Fixes # #2201 ( #3365 ) ( ebca16b ) #2201 ( #3451 ) ( 0417c2a ) add link to api reference ( #3394 ) ( f091045 ) docs/requirements.txt to reduce vulnerabilities ( #3523 ) ( 82efd8f ) docs: jans logging configuration - VM Operation Guide - 1 ( #3348 ) ( e0f8c71 ) docs: jans TUI administration -- Config Guide - TUI -- Auth server ( #3227 ) ( 16ab709 ) docs: jans TUI configuration -- Auth Server - TUI - image ( #3237 ) ( 3fbc9e7 ) docs: jans TUI configuration -- Config Guide - Auth Server - Client configuration - TUI ( #3233 ) ( ee8e056 ) docs: jans TUI configuration -- Fido - TUI ( #3251 ) ( cd6eef1 ) docs: jans TUI configuration -- Fido Administration - TUI ( #3252 ) ( a371cda ) docs: jans TUI installation -- Config Guide - TUI ( #3224 ) ( cc00a71 ) docs: missing single quotes ( #3239 ) ( 9f38c6a ) hash ( cdb5204 ) hash ( 156fb2f ) jans-auth-server: jansApp attribute only relevant for SG ( #3782 ) ( 6153a13 ) minor ( #3334 ) ( 3225455 ) prepare 1.0.7 release ( ce02fd9 ) prepare for 1.0.6 release ( 9e4c8fb ) rename role_based_client as tui_client ( #3657 ) ( c393cb2 ) 1.0.6 (2023-01-09) # Features # add benchmark demo ( #3325 ) ( 26bbb0c ) add custom annotation for configuration property and feature flag documentation ( #2852 ) ( 9991d1c ) add feature to include custom-claims in user-info endpoint of admin-ui plugin #2969 ( #2970 ) ( 0549879 ) added custom resource owner password script fro two-factor twilio authentication ( #3208 ) ( eae0ca1 ) docs: jans TUI SCIM configuration -- screenshot ( #3318 ) ( 7b463b0 ) docs: jans TUI SCIM configuration feature - screenshot1 ( #3306 ) ( d1adc98 ) docs: jans TUI SCIM configuration feature ( #3305 ) ( 70e358e ) documentation for ssa and remove softwareRoles query param of get ssa ( #3031 ) ( d8e14eb ) jans-auth-server: draft for - improve dcr / ssa validation for dynamic registration #2980 ( #3109 ) ( 233a78c ) jans-auth-server: specify minimum acr for clients #343 ( #3083 ) ( b0034ec ) jans-linux-setup include permission of all user roles ( #3009 ) ( 62a421d ) Bug Fixes # #2201 ( #3365 ) ( ebca16b ) #2201 ( #3451 ) ( 0417c2a ) #2487 - irrelevant folder, agama script is in agama-bridge ( #2993 ) ( d19b13a ) #2487 - SIWA and SIWG (Sign in with Apple-Google), moved to script-catalog ( #2983 ) ( 402e7ae ) #2487 removing duplicated files ( #3007 ) ( 9f3d051 ) #2487 scripts-catalog folder restructuring ( #2999 ) ( 7b66f2b ) #2666 ( #3011 ) ( f98cbc5 ) #2825 ( #2828 ) ( 5ce21aa ) add link to api reference ( #3394 ) ( f091045 ) docs/requirements.txt to reduce vulnerabilities ( #3523 ) ( 82efd8f ) docs: jans logging configuration - VM Operation Guide - 1 ( #3348 ) ( e0f8c71 ) docs: jans TUI administration -- Config Guide - TUI -- Auth server ( #3227 ) ( 16ab709 ) docs: jans TUI configuration -- Auth Server - TUI - image ( #3237 ) ( 3fbc9e7 ) docs: jans TUI configuration -- Config Guide - Auth Server - Client configuration - TUI ( #3233 ) ( ee8e056 ) docs: jans TUI configuration -- Fido - TUI ( #3251 ) ( cd6eef1 ) docs: jans TUI configuration -- Fido Administration - TUI ( #3252 ) ( a371cda ) docs: jans TUI installation -- Config Guide - TUI ( #3224 ) ( cc00a71 ) docs: missing single quotes ( #3239 ) ( 9f38c6a ) getting ready for a release ( 0bda832 ) hash ( cdb5204 ) hash ( 156fb2f ) jans-fido2: #2840 ( #2974 ) ( d3351e1 ) minor ( #2786 ) ( 3f67763 ) minor ( #3334 ) ( 3225455 ) prepare for 1.0.6 release ( 9e4c8fb ) typo ( #2950 ) ( 6df810b ) 1.0.5 (2022-12-01) # Features # add custom annotation for configuration property and feature flag documentation ( #2852 ) ( 9991d1c ) add feature to include custom-claims in user-info endpoint of admin-ui plugin #2969 ( #2970 ) ( 0549879 ) documentation for ssa and remove softwareRoles query param of get ssa ( #3031 ) ( d8e14eb ) jans-auth-server: specify minimum acr for clients #343 ( #3083 ) ( b0034ec ) jans-linux-setup include permission of all user roles ( #3009 ) ( 62a421d ) Bug Fixes # #2487 - irrelevant folder, agama script is in agama-bridge ( #2993 ) ( d19b13a ) #2487 - SIWA and SIWG (Sign in with Apple-Google), moved to script-catalog ( #2983 ) ( 402e7ae ) #2487 removing duplicated files ( #3007 ) ( 9f3d051 ) #2487 scripts-catalog folder restructuring ( #2999 ) ( 7b66f2b ) #2666 ( #3011 ) ( f98cbc5 ) getting ready for a release ( 0bda832 ) jans-fido2: #2840 ( #2974 ) ( d3351e1 ) typo ( #2950 ) ( 6df810b ) 1.0.4 (2022-11-08) # Bug Fixes # #2825 ( #2828 ) ( 5ce21aa ) 1.0.3 (2022-11-01) # Features # agama: add utility classes for inbound identity ( #2204 ) ( 29f58ee ) agama: add utility classes for inbound identity ( #2231 ) ( 96e32a4 ) agama: add utility classes for inbound identity ( #2280 ) ( ca6fdc9 ) agama: add utility classes for inbound identity ( #2417 ) ( 2878bdd ) jans-linux-setup: added token exchange grant type ( #2768 ) ( b3abcfe ) jans-scim: make max no. of operations and payload size of bulks operations parameterizable ( #1872 ) ( c27a45b ) Bug Fixes # #2143 ( #2144 ) ( ff7f9f4 ) #2157 ( #2159 ) ( dc8cb60 ) #776 ( #2503 ) ( a564431 ) #817 - script for DUO should have the universal prompt, other APIs are deprecated + documentation minor fixes ( #2363 ) ( ccc13af ) #817 ( #2364 ) ( bbcd87a ) docs: fix MarkupSafe hash ( #2699 ) ( adf2a6d ) docs: revert MarkupSafe hash ( #2701 ) ( e722aed ) incorrect contents #817 ( #2365 ) ( 746b33f ) jans-config-api/plugins/sample/helloworld/pom.xml to reduce vulnerabilities ( #972 ) ( e2ae05e ) jans-eleven/pom.xml to reduce vulnerabilities ( #2676 ) ( d27a7f9 ) jans-linux-setup: review columns size for Agama tables ( #2324 ) ( 55d7a7e ) jans-scim: improper handling response of get user operation ( #2420 ) ( b9e00af ) jans-scim: X509 cert not set after successful POST request ( #2407 ) ( fd616c4 ) minor ( #2470 ) ( 657b9f7 ) minor ( #2786 ) ( 3f67763 ) moved contents under scripts-catalog ( #2370 ) ( fa2273a ) update error pages ( #1957 ) ( 3d63f4d ) Miscellaneous Chores # release 1.0.2 ( 43dead6 ) 1.0.2 (2022-08-30) # Features # agama: add utility classes for inbound identity ( #2204 ) ( 29f58ee ) agama: add utility classes for inbound identity ( #2231 ) ( 96e32a4 ) jans-scim: make max no. of operations and payload size of bulks operations parameterizable ( #1872 ) ( c27a45b ) Bug Fixes # #2143 ( #2144 ) ( ff7f9f4 ) #2157 ( #2159 ) ( dc8cb60 ) agama: template overriding not working with more than one level of nesting ( #1841 ) ( 723922a ) correct the link to image ( #1660 ) ( 0943d81 ) update error pages ( #1957 ) ( 3d63f4d ) Miscellaneous Chores # release 1.0.1 ( 828bfe8 ) release 1.0.2 ( 43dead6 ) 1.0.1 (2022-07-06) # Bug Fixes # correct the link to image ( #1660 ) ( 0943d81 ) Miscellaneous Chores # release 1.0.1 ( 828bfe8 ) 1.0.0 (2022-05-20) # Features # add script for Google login ( #1141 ) ( bac9144 ) jans-core: remove UPDATE_USER and USER_REGISTRATION scripts #1289 ( c34e75d ) Bug Fixes # add issue guidelines to TOC ( #1188 ) ( 192165b ) broken links ( 86d0232 ) hyperlinks ( #1209 ) ( d1e1ed6 ) typo in jans-cli interactive mode ( 25f5971 ) Miscellaneous Chores # release 1.0.0 ( b2895f2 ) release 1.0.0-beta.16 ( a083ad6 ) release 1.0.0-beta.16 ( 90e4bb2 ) release 1.0.0-beta.16 ( eec2073 ) release 1.0.0-beta.16 ( cd92ead ) release 1.0.0-beta.16 ( 7f0a91b ) release 1.0.0-beta.16 ( c2ad604 ) release 1.0.0-beta.16 ( a641486 ) release 1.0.0-beta.16 ( 94d5791 ) release 1.0.0-beta.16 ( 16de429 ) release 1.0.0-beta.16 ( 72915c0 ) release 1.0.0-beta.16 ( 3ea2b37 ) release 1.0.0-beta.16 ( 78a6d39 ) release 1.0.0-beta.16 ( 11bfa93 ) release 1.0.0-beta.16 ( 22b180b ) release 1.0.0-beta.16 ( b9acd0b ) release 1.0.0-beta.16 ( 328cd30 ) release 1.0.0-beta.16 ( 5a84602 ) release 1.0.0-beta.16 ( 4923277 ) release 1.0.0-beta.16 ( 258ba96 ) release 1.0.0-beta.16 ( 77c4423 ) 1.0.0-beta.16 (2022-03-14) # Features # add support to import custom ldif ( #1002 ) ( 0b6334a ) Miscellaneous Chores # release 1.0.0-beta.16 ( a083ad6 ) release 1.0.0-beta.16 ( 90e4bb2 ) release 1.0.0-beta.16 ( eec2073 ) release 1.0.0-beta.16 ( cd92ead ) release 1.0.0-beta.16 ( 7f0a91b ) release 1.0.0-beta.16 ( c2ad604 ) release 1.0.0-beta.16 ( a641486 ) release 1.0.0-beta.16 ( 94d5791 ) release 1.0.0-beta.16 ( 16de429 ) release 1.0.0-beta.16 ( 72915c0 ) release 1.0.0-beta.16 ( 3ea2b37 ) release 1.0.0-beta.16 ( 78a6d39 ) release 1.0.0-beta.16 ( 11bfa93 ) release 1.0.0-beta.16 ( 22b180b ) release 1.0.0-beta.16 ( b9acd0b ) release 1.0.0-beta.16 ( 328cd30 ) release 1.0.0-beta.16 ( 5a84602 ) release 1.0.0-beta.16 ( 4923277 ) release 1.0.0-beta.16 ( 258ba96 ) release 1.0.0-beta.16 ( 77c4423 ) release 1.0.0-beta.16 ( 688b324 ) release 1.0.0-beta.16 ( 4e86f15 ) release 1.0.0-beta.16 ( 8d514ee ) release 1.0.0-beta.16 ( 0899898 ) 1.0.0-beta.15 (2022-03-02) # Features # add POST /rolePermissionsMapping for adding new rolePermissionsMapping entry #144 ( 7bcad3b ) add POST /rolePermissionsMapping for adding new rolePermissionsMapping entry #144 ( 932a45b ) protecting Admin-UI Plugin Apis #142 ( 52e8846 ) protecting Admin-UI Plugin Apis #142 ( a1a0d54 ) Miscellaneous Chores # release 1.0.0-beta.15 ( ee5b719 ) release 1.0.0-beta.15 ( ca6d1c9 ) release 1.0.0-beta.15 ( b65bab2 )","title":"Changelog"},{"location":"CHANGELOG/#changelog","text":"","title":"Changelog"},{"location":"CHANGELOG/#1016-2023-08-02","text":"","title":"1.0.16 (2023-08-02)"},{"location":"CHANGELOG/#features","text":"add dcr load test ( #5566 ) ( 0cfd4dd ) add new methnod to fido2 extension to allow modify json ( #5683 ) ( 256675b ), closes #5680 add new methnod to fido2 extension to allow modify json ( #5686 ) ( 6f56e51 ), closes #5680 jans-auth-server: automatically provision scopes if they are present in the SSA for trusted issuer #5164 ( #5553 ) ( abaa10f ) jans-linux-setup: gluu/flex casa installer ( #5590 ) ( 2ce1152 )","title":"Features"},{"location":"CHANGELOG/#bug-fixes","text":"docker-jans: add test client with all scopes to CN-based setup ( #5682 ) ( a81d301 ) docs: autogenerate docs ( #5515 ) ( 25f9566 ) docs: autogenerate docs ( #5749 ) ( 9a29ec1 ) enlarge column adsPrjDeplDetails ( #5644 ) ( ae059fe ) jans-linux-setup: casa install option --with-casa ( #5598 ) ( 4758bf5 ) prepare for 1.0.16 release ( 042ce79 ) prepare for 1.0.16 release ( b2649c3 )","title":"Bug Fixes"},{"location":"CHANGELOG/#1015-2023-07-12","text":"","title":"1.0.15 (2023-07-12)"},{"location":"CHANGELOG/#features_1","text":"add a prefix to Log statements #5201 ( #5475 ) ( ccb3f05 ) docs: added documentation for apple certificates and new fido configuration fields ( #5246 ) ( 7599071 )","title":"Features"},{"location":"CHANGELOG/#bug-fixes_1","text":"doc: disable-selinux optin in vm-setup ( #5408 ) ( c29834d ) prepare for 1.0.15 release ( 0e3cc2f )","title":"Bug Fixes"},{"location":"CHANGELOG/#1014-2023-06-12","text":"","title":"1.0.14 (2023-06-12)"},{"location":"CHANGELOG/#features_2","text":"add authorization headers needed to access scan API from SG ( #5093 ) ( 631abf2 ), closes #5092 Add DCR flow ( #5096 ) ( 4bdea42 ), closes #5092 agama: allow flows to supply the identity of the user to authenticate with a parameterizable attribute ( #5010 ) ( ca941ce ) agama: update deployer to account project's metadata noDirectLaunch ( #5182 ) ( cb4ae38 ) jans-auth-server: added ability to set client expiration via DCR #5057 ( #5185 ) ( a15054b ) jans-auth-server: made not found exceptions logging level configurable #4973 ( #4982 ) ( 98be22b ) jans-auth-server: Support of Select Account interception script #3452 ( #5149 ) ( b062148 ) move notify-client2 library to fido2 project #5030 ( #5031 ) ( ed5e09e ) update SG script and notify client to conform scan API #5061 ( #5062 ) ( 7afc42b ) update SG script to conform prod server ( #5103 ) ( 0ec3ca8 )","title":"Features"},{"location":"CHANGELOG/#bug-fixes_2","text":"#5084 ( #5086 ) ( a0336a8 ) docker-jans-loadtesting-jmeter: errors running flow executor ( #5001 ) ( 79c1948 ) docs: #3675 ( #5068 ) ( 2aa76b2 ) docs: #4707 ( #5090 ) ( f93c750 ) docs: #4881 improvised ( #5035 ) ( 065edad ) docs: autogenerate docs ( #5225 ) ( 9c8e510 ) docs: Mention of Update Token script #3465 ( #5069 ) ( a3efe9b ) docs: minor addition #4881 ( #5083 ) ( 948b9aa ) docs: renamed SampleScript.py to PersistenceExtension.py ( #5087 ) ( 9ed9c2e ) jans-auth-server: Illegal op_policy_uri parameter: - exclude entries with blank values from discovery response (oxauth counterpart) #4888 ( #4934 ) ( 8603290 ) prepare for 1.0.14 release ( 25ccadf )","title":"Bug Fixes"},{"location":"CHANGELOG/#1013-2023-05-10","text":"","title":"1.0.13 (2023-05-10)"},{"location":"CHANGELOG/#features_3","text":"jans-auth-server: add \"introspection\" scope check on introspection endpoint access #4557 ( #4716 ) ( ce2d75c ) jans-auth-server: log httpresponse body configurated by httpLoggingResponseBodyContent #349 ( #4417 ) ( 08d92b3 ) jans-fido2: interception scripts issue 1485, swagger updates ( #4543 ) ( 80274ff )","title":"Features"},{"location":"CHANGELOG/#bug-fixes_3","text":"docker-jans-loadtesting-jmeter: rename incorrect reference to OCI image ( #4908 ) ( 7db2c11 ) docs: autogenerate docs ( #4933 ) ( 337239b ) docs: Jans cli tui update tui navigation docs ( #4767 ) ( a8b055c ) jans-cli-tui: f4 to close dialog ( #4736 ) ( 2f2d094 ) jans-fido2: interception script documentation ( #4751 ) ( 3b25801 ) prepare for 1.0.13 release ( 493478e )","title":"Bug Fixes"},{"location":"CHANGELOG/#1012-2023-04-18","text":"","title":"1.0.12 (2023-04-18)"},{"location":"CHANGELOG/#features_4","text":"jans-auth-server: redirect back to RP when session is expired or if not possible show error page #4449 ( #4505 ) ( 0983e73 )","title":"Features"},{"location":"CHANGELOG/#bug-fixes_4","text":"adjust bleeding edge images ( 4bb0b09 ) docs: #2487 ( #4624 ) ( ba7c347 ) docs: #3340 mention push notification server ( #4622 ) ( 7539857 ) docs: autogenerate docs ( #4652 ) ( e353874 ) docs: Paraphrasing #4369 ( #4512 ) ( 57e027e ) docs: session persistence #3235 ( #4616 ) ( 0575c9f ) jans-auth: #3340 incorrect folder location ( #4623 ) ( ef0dbb4 ) jans-config-api: agama deployment detail endpoint not including all flows IDs ( #4565 ) ( 358c494 ) prepare for 1.0.12 release ( 6f83197 )","title":"Bug Fixes"},{"location":"CHANGELOG/#1011-2023-04-05","text":"","title":"1.0.11 (2023-04-05)"},{"location":"CHANGELOG/#features_5","text":"agama: add a \"default agama flow\" to bridge ( #4309 ) ( 3b2248f ) agama: add means to selectively prevent flow crash when a subflow crashes ( #4436 ) ( 5d8f0ad ) jans-auth-server: added configurable acr to Device Flow #4305 ( #4424 ) ( fbd4ede ) jans-auth-server: align JWT Response for OAuth Token Introspection with spec #3240 ( #4151 ) ( 02e1595 ) jans-auth-server: increase sessionIdUnauthenticatedUnusedLifetime value in setup #4445 ( #4446 ) ( ecf9395 )","title":"Features"},{"location":"CHANGELOG/#bug-fixes_5","text":"docs: autogenerate docs ( #4486 ) ( a9b3eab ) docs: jans TUI configuration -- update user password ( #4435 ) ( c34b156 ) docs: minor ( #4245 ) ( 65f5944 ) docs: post-install setup #3340 ( #4327 ) ( c214681 ) docs: temporary record incase of one_step #3340 ( #4326 ) ( 921fd20 ) prepare for release ( 60775c0 ) SG endpoint moved inside the fido2 server ( #4321 ) ( dacb0fa ) update push part in SG script to conform Jans config and API ( #4345 ) ( e1cb416 )","title":"Bug Fixes"},{"location":"CHANGELOG/#1010-2023-03-16","text":"","title":"1.0.10 (2023-03-16)"},{"location":"CHANGELOG/#features_6","text":"jans-auth-server: added online_access scope to issue session bound refresh token #3012 ( #4106 ) ( 635f611 ) jans-linux-setup: enable agama engine by default ( #4131 ) ( 7e432dc )","title":"Features"},{"location":"CHANGELOG/#bug-fixes_6","text":"docs: autogenerate docs ( #4200 ) ( e20f399 ) formating issues ( #4119 ) ( c5b89ce ) prepare release for 1.0.10 ( e996926 )","title":"Bug Fixes"},{"location":"CHANGELOG/#109-2023-03-09","text":"","title":"1.0.9 (2023-03-09)"},{"location":"CHANGELOG/#features_7","text":"agama: update gama deployment endpoint to support configuration properties ( #4049 ) ( 392525c )","title":"Features"},{"location":"CHANGELOG/#bug-fixes_7","text":"docs: autogenerate docs ( #4050 ) ( dcbb645 ) docs: autogenerate docs ( #4105 ) ( da87cef ) prepare 1.0.9 release ( 55f7e0c ) update next SNAPSHOT and dev ( 0df0e7a )","title":"Bug Fixes"},{"location":"CHANGELOG/#108-2023-03-01","text":"","title":"1.0.8 (2023-03-01)"},{"location":"CHANGELOG/#features_8","text":"add to AS session the data passed in Finish ( #3978 ) ( 12bedb7 ) Include additional attributes on SSA Get endpoint ( #3983 ) ( 4fded3e )","title":"Features"},{"location":"CHANGELOG/#107-2023-02-22","text":"","title":"1.0.7 (2023-02-22)"},{"location":"CHANGELOG/#features_9","text":"add benchmark demo ( #3325 ) ( 26bbb0c ) add custom Github External Authenticator script for ADS #3625 ( #3626 ) ( f922a7a ) added custom resource owner password script fro two-factor twilio authentication ( #3208 ) ( eae0ca1 ) Change org_id to String type and Add status in get SSA ( #3763 ) ( d01269a ) docs: jans TUI SCIM configuration -- screenshot ( #3318 ) ( 7b463b0 ) docs: jans TUI SCIM configuration feature - screenshot1 ( #3306 ) ( d1adc98 ) docs: jans TUI SCIM configuration feature ( #3305 ) ( 70e358e ) jans-auth-server: added flexible date formatter handler to AS (required by certification tools) #3600 ( #3601 ) ( f646d73 ) jans-auth-server: renamed \"key_ops\" -> \"key_ops_type\" #3790 ( #3792 ) ( 7a6bcba ) process lib directory in .gama files for ADS projects deployment ( #3644 ) ( 40268ad ) Support Super Gluu one step authentication to Fido2 server #3593 ( #3599 ) ( c013b16 )","title":"Features"},{"location":"CHANGELOG/#bug-fixes_8","text":"#2201 ( #3365 ) ( ebca16b ) #2201 ( #3451 ) ( 0417c2a ) add link to api reference ( #3394 ) ( f091045 ) docs/requirements.txt to reduce vulnerabilities ( #3523 ) ( 82efd8f ) docs: jans logging configuration - VM Operation Guide - 1 ( #3348 ) ( e0f8c71 ) docs: jans TUI administration -- Config Guide - TUI -- Auth server ( #3227 ) ( 16ab709 ) docs: jans TUI configuration -- Auth Server - TUI - image ( #3237 ) ( 3fbc9e7 ) docs: jans TUI configuration -- Config Guide - Auth Server - Client configuration - TUI ( #3233 ) ( ee8e056 ) docs: jans TUI configuration -- Fido - TUI ( #3251 ) ( cd6eef1 ) docs: jans TUI configuration -- Fido Administration - TUI ( #3252 ) ( a371cda ) docs: jans TUI installation -- Config Guide - TUI ( #3224 ) ( cc00a71 ) docs: missing single quotes ( #3239 ) ( 9f38c6a ) hash ( cdb5204 ) hash ( 156fb2f ) jans-auth-server: jansApp attribute only relevant for SG ( #3782 ) ( 6153a13 ) minor ( #3334 ) ( 3225455 ) prepare 1.0.7 release ( ce02fd9 ) prepare for 1.0.6 release ( 9e4c8fb ) rename role_based_client as tui_client ( #3657 ) ( c393cb2 )","title":"Bug Fixes"},{"location":"CHANGELOG/#106-2023-01-09","text":"","title":"1.0.6 (2023-01-09)"},{"location":"CHANGELOG/#features_10","text":"add benchmark demo ( #3325 ) ( 26bbb0c ) add custom annotation for configuration property and feature flag documentation ( #2852 ) ( 9991d1c ) add feature to include custom-claims in user-info endpoint of admin-ui plugin #2969 ( #2970 ) ( 0549879 ) added custom resource owner password script fro two-factor twilio authentication ( #3208 ) ( eae0ca1 ) docs: jans TUI SCIM configuration -- screenshot ( #3318 ) ( 7b463b0 ) docs: jans TUI SCIM configuration feature - screenshot1 ( #3306 ) ( d1adc98 ) docs: jans TUI SCIM configuration feature ( #3305 ) ( 70e358e ) documentation for ssa and remove softwareRoles query param of get ssa ( #3031 ) ( d8e14eb ) jans-auth-server: draft for - improve dcr / ssa validation for dynamic registration #2980 ( #3109 ) ( 233a78c ) jans-auth-server: specify minimum acr for clients #343 ( #3083 ) ( b0034ec ) jans-linux-setup include permission of all user roles ( #3009 ) ( 62a421d )","title":"Features"},{"location":"CHANGELOG/#bug-fixes_9","text":"#2201 ( #3365 ) ( ebca16b ) #2201 ( #3451 ) ( 0417c2a ) #2487 - irrelevant folder, agama script is in agama-bridge ( #2993 ) ( d19b13a ) #2487 - SIWA and SIWG (Sign in with Apple-Google), moved to script-catalog ( #2983 ) ( 402e7ae ) #2487 removing duplicated files ( #3007 ) ( 9f3d051 ) #2487 scripts-catalog folder restructuring ( #2999 ) ( 7b66f2b ) #2666 ( #3011 ) ( f98cbc5 ) #2825 ( #2828 ) ( 5ce21aa ) add link to api reference ( #3394 ) ( f091045 ) docs/requirements.txt to reduce vulnerabilities ( #3523 ) ( 82efd8f ) docs: jans logging configuration - VM Operation Guide - 1 ( #3348 ) ( e0f8c71 ) docs: jans TUI administration -- Config Guide - TUI -- Auth server ( #3227 ) ( 16ab709 ) docs: jans TUI configuration -- Auth Server - TUI - image ( #3237 ) ( 3fbc9e7 ) docs: jans TUI configuration -- Config Guide - Auth Server - Client configuration - TUI ( #3233 ) ( ee8e056 ) docs: jans TUI configuration -- Fido - TUI ( #3251 ) ( cd6eef1 ) docs: jans TUI configuration -- Fido Administration - TUI ( #3252 ) ( a371cda ) docs: jans TUI installation -- Config Guide - TUI ( #3224 ) ( cc00a71 ) docs: missing single quotes ( #3239 ) ( 9f38c6a ) getting ready for a release ( 0bda832 ) hash ( cdb5204 ) hash ( 156fb2f ) jans-fido2: #2840 ( #2974 ) ( d3351e1 ) minor ( #2786 ) ( 3f67763 ) minor ( #3334 ) ( 3225455 ) prepare for 1.0.6 release ( 9e4c8fb ) typo ( #2950 ) ( 6df810b )","title":"Bug Fixes"},{"location":"CHANGELOG/#105-2022-12-01","text":"","title":"1.0.5 (2022-12-01)"},{"location":"CHANGELOG/#features_11","text":"add custom annotation for configuration property and feature flag documentation ( #2852 ) ( 9991d1c ) add feature to include custom-claims in user-info endpoint of admin-ui plugin #2969 ( #2970 ) ( 0549879 ) documentation for ssa and remove softwareRoles query param of get ssa ( #3031 ) ( d8e14eb ) jans-auth-server: specify minimum acr for clients #343 ( #3083 ) ( b0034ec ) jans-linux-setup include permission of all user roles ( #3009 ) ( 62a421d )","title":"Features"},{"location":"CHANGELOG/#bug-fixes_10","text":"#2487 - irrelevant folder, agama script is in agama-bridge ( #2993 ) ( d19b13a ) #2487 - SIWA and SIWG (Sign in with Apple-Google), moved to script-catalog ( #2983 ) ( 402e7ae ) #2487 removing duplicated files ( #3007 ) ( 9f3d051 ) #2487 scripts-catalog folder restructuring ( #2999 ) ( 7b66f2b ) #2666 ( #3011 ) ( f98cbc5 ) getting ready for a release ( 0bda832 ) jans-fido2: #2840 ( #2974 ) ( d3351e1 ) typo ( #2950 ) ( 6df810b )","title":"Bug Fixes"},{"location":"CHANGELOG/#104-2022-11-08","text":"","title":"1.0.4 (2022-11-08)"},{"location":"CHANGELOG/#bug-fixes_11","text":"#2825 ( #2828 ) ( 5ce21aa )","title":"Bug Fixes"},{"location":"CHANGELOG/#103-2022-11-01","text":"","title":"1.0.3 (2022-11-01)"},{"location":"CHANGELOG/#features_12","text":"agama: add utility classes for inbound identity ( #2204 ) ( 29f58ee ) agama: add utility classes for inbound identity ( #2231 ) ( 96e32a4 ) agama: add utility classes for inbound identity ( #2280 ) ( ca6fdc9 ) agama: add utility classes for inbound identity ( #2417 ) ( 2878bdd ) jans-linux-setup: added token exchange grant type ( #2768 ) ( b3abcfe ) jans-scim: make max no. of operations and payload size of bulks operations parameterizable ( #1872 ) ( c27a45b )","title":"Features"},{"location":"CHANGELOG/#bug-fixes_12","text":"#2143 ( #2144 ) ( ff7f9f4 ) #2157 ( #2159 ) ( dc8cb60 ) #776 ( #2503 ) ( a564431 ) #817 - script for DUO should have the universal prompt, other APIs are deprecated + documentation minor fixes ( #2363 ) ( ccc13af ) #817 ( #2364 ) ( bbcd87a ) docs: fix MarkupSafe hash ( #2699 ) ( adf2a6d ) docs: revert MarkupSafe hash ( #2701 ) ( e722aed ) incorrect contents #817 ( #2365 ) ( 746b33f ) jans-config-api/plugins/sample/helloworld/pom.xml to reduce vulnerabilities ( #972 ) ( e2ae05e ) jans-eleven/pom.xml to reduce vulnerabilities ( #2676 ) ( d27a7f9 ) jans-linux-setup: review columns size for Agama tables ( #2324 ) ( 55d7a7e ) jans-scim: improper handling response of get user operation ( #2420 ) ( b9e00af ) jans-scim: X509 cert not set after successful POST request ( #2407 ) ( fd616c4 ) minor ( #2470 ) ( 657b9f7 ) minor ( #2786 ) ( 3f67763 ) moved contents under scripts-catalog ( #2370 ) ( fa2273a ) update error pages ( #1957 ) ( 3d63f4d )","title":"Bug Fixes"},{"location":"CHANGELOG/#miscellaneous-chores","text":"release 1.0.2 ( 43dead6 )","title":"Miscellaneous Chores"},{"location":"CHANGELOG/#102-2022-08-30","text":"","title":"1.0.2 (2022-08-30)"},{"location":"CHANGELOG/#features_13","text":"agama: add utility classes for inbound identity ( #2204 ) ( 29f58ee ) agama: add utility classes for inbound identity ( #2231 ) ( 96e32a4 ) jans-scim: make max no. of operations and payload size of bulks operations parameterizable ( #1872 ) ( c27a45b )","title":"Features"},{"location":"CHANGELOG/#bug-fixes_13","text":"#2143 ( #2144 ) ( ff7f9f4 ) #2157 ( #2159 ) ( dc8cb60 ) agama: template overriding not working with more than one level of nesting ( #1841 ) ( 723922a ) correct the link to image ( #1660 ) ( 0943d81 ) update error pages ( #1957 ) ( 3d63f4d )","title":"Bug Fixes"},{"location":"CHANGELOG/#miscellaneous-chores_1","text":"release 1.0.1 ( 828bfe8 ) release 1.0.2 ( 43dead6 )","title":"Miscellaneous Chores"},{"location":"CHANGELOG/#101-2022-07-06","text":"","title":"1.0.1 (2022-07-06)"},{"location":"CHANGELOG/#bug-fixes_14","text":"correct the link to image ( #1660 ) ( 0943d81 )","title":"Bug Fixes"},{"location":"CHANGELOG/#miscellaneous-chores_2","text":"release 1.0.1 ( 828bfe8 )","title":"Miscellaneous Chores"},{"location":"CHANGELOG/#100-2022-05-20","text":"","title":"1.0.0 (2022-05-20)"},{"location":"CHANGELOG/#features_14","text":"add script for Google login ( #1141 ) ( bac9144 ) jans-core: remove UPDATE_USER and USER_REGISTRATION scripts #1289 ( c34e75d )","title":"Features"},{"location":"CHANGELOG/#bug-fixes_15","text":"add issue guidelines to TOC ( #1188 ) ( 192165b ) broken links ( 86d0232 ) hyperlinks ( #1209 ) ( d1e1ed6 ) typo in jans-cli interactive mode ( 25f5971 )","title":"Bug Fixes"},{"location":"CHANGELOG/#miscellaneous-chores_3","text":"release 1.0.0 ( b2895f2 ) release 1.0.0-beta.16 ( a083ad6 ) release 1.0.0-beta.16 ( 90e4bb2 ) release 1.0.0-beta.16 ( eec2073 ) release 1.0.0-beta.16 ( cd92ead ) release 1.0.0-beta.16 ( 7f0a91b ) release 1.0.0-beta.16 ( c2ad604 ) release 1.0.0-beta.16 ( a641486 ) release 1.0.0-beta.16 ( 94d5791 ) release 1.0.0-beta.16 ( 16de429 ) release 1.0.0-beta.16 ( 72915c0 ) release 1.0.0-beta.16 ( 3ea2b37 ) release 1.0.0-beta.16 ( 78a6d39 ) release 1.0.0-beta.16 ( 11bfa93 ) release 1.0.0-beta.16 ( 22b180b ) release 1.0.0-beta.16 ( b9acd0b ) release 1.0.0-beta.16 ( 328cd30 ) release 1.0.0-beta.16 ( 5a84602 ) release 1.0.0-beta.16 ( 4923277 ) release 1.0.0-beta.16 ( 258ba96 ) release 1.0.0-beta.16 ( 77c4423 )","title":"Miscellaneous Chores"},{"location":"CHANGELOG/#100-beta16-2022-03-14","text":"","title":"1.0.0-beta.16 (2022-03-14)"},{"location":"CHANGELOG/#features_15","text":"add support to import custom ldif ( #1002 ) ( 0b6334a )","title":"Features"},{"location":"CHANGELOG/#miscellaneous-chores_4","text":"release 1.0.0-beta.16 ( a083ad6 ) release 1.0.0-beta.16 ( 90e4bb2 ) release 1.0.0-beta.16 ( eec2073 ) release 1.0.0-beta.16 ( cd92ead ) release 1.0.0-beta.16 ( 7f0a91b ) release 1.0.0-beta.16 ( c2ad604 ) release 1.0.0-beta.16 ( a641486 ) release 1.0.0-beta.16 ( 94d5791 ) release 1.0.0-beta.16 ( 16de429 ) release 1.0.0-beta.16 ( 72915c0 ) release 1.0.0-beta.16 ( 3ea2b37 ) release 1.0.0-beta.16 ( 78a6d39 ) release 1.0.0-beta.16 ( 11bfa93 ) release 1.0.0-beta.16 ( 22b180b ) release 1.0.0-beta.16 ( b9acd0b ) release 1.0.0-beta.16 ( 328cd30 ) release 1.0.0-beta.16 ( 5a84602 ) release 1.0.0-beta.16 ( 4923277 ) release 1.0.0-beta.16 ( 258ba96 ) release 1.0.0-beta.16 ( 77c4423 ) release 1.0.0-beta.16 ( 688b324 ) release 1.0.0-beta.16 ( 4e86f15 ) release 1.0.0-beta.16 ( 8d514ee ) release 1.0.0-beta.16 ( 0899898 )","title":"Miscellaneous Chores"},{"location":"CHANGELOG/#100-beta15-2022-03-02","text":"","title":"1.0.0-beta.15 (2022-03-02)"},{"location":"CHANGELOG/#features_16","text":"add POST /rolePermissionsMapping for adding new rolePermissionsMapping entry #144 ( 7bcad3b ) add POST /rolePermissionsMapping for adding new rolePermissionsMapping entry #144 ( 932a45b ) protecting Admin-UI Plugin Apis #142 ( 52e8846 ) protecting Admin-UI Plugin Apis #142 ( a1a0d54 )","title":"Features"},{"location":"CHANGELOG/#miscellaneous-chores_5","text":"release 1.0.0-beta.15 ( ee5b719 ) release 1.0.0-beta.15 ( ca6d1c9 ) release 1.0.0-beta.15 ( b65bab2 )","title":"Miscellaneous Chores"},{"location":"CODE_OF_CONDUCT/","text":"Janssen Code of Conduct v1.0 # Our Pledge # In the interest of fostering an open and welcoming environment, we as contributors and maintainers pledge to making participation in our project and our community a harassment-free experience for everyone, regardless of age, body size, disability, ethnicity, sex characteristics, gender identity and expression, level of experience, education, socio-economic status, nationality, personal appearance, race, religion, or sexual identity and orientation. Our Standards # Examples of behavior that contributes to creating a positive environment include: Using welcoming and inclusive language Being respectful of differing viewpoints and experiences Gracefully accepting constructive criticism Focusing on what is best for the community Showing empathy towards other community members Examples of unacceptable behavior by participants include: The use of sexualized language or imagery and unwelcome sexual attention or advances Trolling, insulting/derogatory comments, and personal or political attacks Public or private harassment Publishing others\u2019 private information, such as a physical or electronic address, without explicit permission Other conduct which could reasonably be considered inappropriate in a professional setting Our Responsibilities # Janssen Project members, project participants and contributors (collectively, \"participants\") are responsible for clarifying the standards of acceptable behavior and are expected to take appropriate and fair corrective action in response to any instances of unacceptable behavior. The Technical Steering Committee (\"TSC\") of the Janssen Project has the right and responsibility to remove, edit, or reject comments, commits, code, wiki edits, issues, and other contributions that are not aligned to this Code of Conduct, or to ban temporarily or permanently any participant for other behaviors that they deem inappropriate, threatening, offensive, or harmful. All participants have determined that The Linux Foundation is the most optimal organization to shepherd the development of this project. Participants acknowledge and agree to The Linux Foundation's exclusive right to use \"Janssen Project\" and any other names and trademarks associated with the open source project and Janssen Project and to authorize others\u2019 use of the marks, establish guidelines for such use, and to delegate these responsibilities. Participants agree not to take any action inconsistent with such rights and to cooperate in any action which The Linux Foundation deems necessary or desirable to prevent confusion or establish or preserve these rights. Participants will not independently adopt, use, or attempt to register any trademarks or trade names that are confusingly similar to these names. Scope # This Code of Conduct applies both within project spaces and in public spaces when an individual is representing the project or its community. Examples of representing a project or community include using an official project e-mail address, posting via an official social media account, or acting as an appointed representative at an online or offline event. Representation of a project may be further defined and clarified by project maintainers. Enforcement # Instances of abusive, harassing, or otherwise unacceptable behavior may be reported by contacting the Executive Director, or, if the complaint involves the Executive Director, a member of the steering committee. All complaints will be reviewed and investigated and will result in a response that is deemed necessary and appropriate to the circumstances. The project team is obligated to maintain confidentiality with regard to the reporter of an incident. Further details of specific enforcement policies may be posted separately. Participants who do not follow or enforce the Code of Conduct in good faith may face temporary or permanent repercussions as determined by the steering committee. Attribution # This Code of Conduct is adapted from the Contributor Covenant, version 1.4, available at https://www.contributor-covenant.org/version/1/4/code-of-conduct.html . For answers to common questions about this code of conduct, see https://www.contributor-covenant.org/faq","title":"Code of Conduct"},{"location":"CODE_OF_CONDUCT/#janssen-code-of-conduct-v10","text":"","title":"Janssen Code of Conduct v1.0"},{"location":"CODE_OF_CONDUCT/#our-pledge","text":"In the interest of fostering an open and welcoming environment, we as contributors and maintainers pledge to making participation in our project and our community a harassment-free experience for everyone, regardless of age, body size, disability, ethnicity, sex characteristics, gender identity and expression, level of experience, education, socio-economic status, nationality, personal appearance, race, religion, or sexual identity and orientation.","title":"Our Pledge"},{"location":"CODE_OF_CONDUCT/#our-standards","text":"Examples of behavior that contributes to creating a positive environment include: Using welcoming and inclusive language Being respectful of differing viewpoints and experiences Gracefully accepting constructive criticism Focusing on what is best for the community Showing empathy towards other community members Examples of unacceptable behavior by participants include: The use of sexualized language or imagery and unwelcome sexual attention or advances Trolling, insulting/derogatory comments, and personal or political attacks Public or private harassment Publishing others\u2019 private information, such as a physical or electronic address, without explicit permission Other conduct which could reasonably be considered inappropriate in a professional setting","title":"Our Standards"},{"location":"CODE_OF_CONDUCT/#our-responsibilities","text":"Janssen Project members, project participants and contributors (collectively, \"participants\") are responsible for clarifying the standards of acceptable behavior and are expected to take appropriate and fair corrective action in response to any instances of unacceptable behavior. The Technical Steering Committee (\"TSC\") of the Janssen Project has the right and responsibility to remove, edit, or reject comments, commits, code, wiki edits, issues, and other contributions that are not aligned to this Code of Conduct, or to ban temporarily or permanently any participant for other behaviors that they deem inappropriate, threatening, offensive, or harmful. All participants have determined that The Linux Foundation is the most optimal organization to shepherd the development of this project. Participants acknowledge and agree to The Linux Foundation's exclusive right to use \"Janssen Project\" and any other names and trademarks associated with the open source project and Janssen Project and to authorize others\u2019 use of the marks, establish guidelines for such use, and to delegate these responsibilities. Participants agree not to take any action inconsistent with such rights and to cooperate in any action which The Linux Foundation deems necessary or desirable to prevent confusion or establish or preserve these rights. Participants will not independently adopt, use, or attempt to register any trademarks or trade names that are confusingly similar to these names.","title":"Our Responsibilities"},{"location":"CODE_OF_CONDUCT/#scope","text":"This Code of Conduct applies both within project spaces and in public spaces when an individual is representing the project or its community. Examples of representing a project or community include using an official project e-mail address, posting via an official social media account, or acting as an appointed representative at an online or offline event. Representation of a project may be further defined and clarified by project maintainers.","title":"Scope"},{"location":"CODE_OF_CONDUCT/#enforcement","text":"Instances of abusive, harassing, or otherwise unacceptable behavior may be reported by contacting the Executive Director, or, if the complaint involves the Executive Director, a member of the steering committee. All complaints will be reviewed and investigated and will result in a response that is deemed necessary and appropriate to the circumstances. The project team is obligated to maintain confidentiality with regard to the reporter of an incident. Further details of specific enforcement policies may be posted separately. Participants who do not follow or enforce the Code of Conduct in good faith may face temporary or permanent repercussions as determined by the steering committee.","title":"Enforcement"},{"location":"CODE_OF_CONDUCT/#attribution","text":"This Code of Conduct is adapted from the Contributor Covenant, version 1.4, available at https://www.contributor-covenant.org/version/1/4/code-of-conduct.html . For answers to common questions about this code of conduct, see https://www.contributor-covenant.org/faq","title":"Attribution"},{"location":"CONTRIBUTING/","text":"Contributing to Janssen Project # Purpose of this guide is to provide necessary information and resources to community in order to make successful contribution to the Janssen Project. There are many ways you can contribute. Of course you can contribute code. But we also need people to write documentation and guides, to help us with testing, to answer questions on the forums and chat, to review PR's, to help us with devops and CI/CD, to provide feedback on usability, and to promote the project through outreach. Also, by sharing metrics with us, we can gain valuable insights into how the software performs in the wild. Join the Community First Time Contributors Contribution Guidelines Code of Conduct About Issues Triaging Code Conventions and Guidelines Commits Branches PRs Issues Contributing to the documentation Contribution Workflow Find Something To Work On Start a Discussion Implement the Change Document Raise a PR Follow Through Join the Community # Repo : Watch and Star Janssen repository on Github Discussions : Join interesting discussions at Github Discussions Chat : We have an active community chat on Gitter . You can register for free their with your Github identity. Tweet : Janssen is on Twitter too. Follow us there to stay up to date on release announcements and news around Janssen. First Time Contributors # In case you are first-time contributor, then you can start with our good first issues list These are issues where you can easily contribute and community members will guide and support your contribution as always. If you need Janssen installation to test out your fix, here are the steps . Contribution Guidelines # We are really glad you are reading this, because we need volunteer developers to help this project come to fruition. Code of Conduct Issues Triaging Coding Conventions Code of Conduct # Janssen project has a Code of Conduct to which all contributors must adhere, please read it before interacting with the repository or the community in any way. About Issues # There are four kinds of issues you can open: Bug report : you believe you found a problem in a project and you want to discuss and get it fixed, creating an issue with the bug report template is the best way to do so. Feature Request : any kind of new feature need to be discussed in this kind of issue, do you want a new rule or a new feature? This is the kind of issue you want to open. Be very good at explaining your intent, it's always important that others can understand what you mean in order to discuss, be open and collaborative in letting others help you getting this done! Security Vulnerability : If you identify a security problem, please report it immediately, providing details about the nature, and if applicable, how to reproduce it. If you want to report an issue privately, you can email security@gluu.org Failing tests : you noticed a flaky test or a problem with a build? This is the kind of issue to triage that! The best way to get involved in the project is through issues, you can help in many ways: Issues triaging: participating in the discussion and adding details to open issues is always a good thing, sometimes issues need to be verified, you could be the one writing a test case to fix a bug! Fix an issue: you can help in getting issue fixed in many ways. More often by opening a pull request. In case you are first-time contributor, then you can start with our good first issues list These are issues where you can easily contribute and community members will guide and support your contribution as always. Triaging # Triage is a process of evaluating issues and PRs in order to determine their characteristics and take quick actions if possible. When you triage an issue, you: assess whether it has merit or not quickly close it by correctly answering a question point the reporter to a resource or documentation answering the issue tag it via labels, projects, or milestones take ownership submitting a PR for it, in case you want \ud83d\ude07 Here is how we continously triage new issues and PRs so that contributors can contribute faster and better. Code Conventions and Guidelines # Commits # Janssen Project mandates all commits to follow guidelines as below. Commit messages As commit convention, we adopt Conventional Commits v1.0.0 , we have an history of commits that do not adopt the convention but any new commit must follow it to be eligible for merge. Add GPG signature to your commit To ensure that contribution is coming for a trusted source, all commits should be signed using GPG key and verified by Github. If you have GPG key setup already then just use -S switch with you commit to sign it. If you need to setup your GPG key and verification, then you can find detailed instructions here Add DCO sign-off The Developer Certificate of Origin (DCO) is a lightweight way for contributors to certify that they wrote or otherwise have the right to submit the code they are contributing to the project. Contributors to the Janssen project sign-off that they adhere to these requirements by adding a Signed-off-by line to commit messages. This is a commit message Signed-off-by: Foo Bar <foobar@spam.org> Git even has a -s command line option to append this automatically to your commit message: $ git commit -s -m 'This is my commit message' In all, if you have your GPG verification setup, your commit command should look like git commit -S -s -m 'message that follows conventional commit style' Branches # Branch name should have component name as prefix, eg jans-core-mybranch PRs # PR titles should also follow Conventional Commits v1.0.0 . This will help in keeping merge commit messages inline with commit message standards Squash commits into small number of cohesive commits before raising a PR PR should be rebased on main branch so that there are minimal or no conflicts at the time of merge PR should only have changes related to target feature or issue. Create a separate PR for formatting or other quick bug fixes PR should include relevent documentaton changes PR should include unit and integration tests Issues # Issue titles should follow Conventional Commits v1.0.0 Backport changes to a different version # Backport changes are now supported through a workflow through labels prefixed with backport/ . For-example to backport changes in a certain PR to version v1.0.0 a label to that PR matching the version must be added i.e backport/v1.0.0 . The flow consists of creating a new branch, cherry-picking the changes of the original PR and creating a new PR to merge them. Contributing to the documentation # Great documentation is a reflection of software's maturity and the great community that stands behind it. Contributing to the Janssen Project documentation is the easiest way to learn about the Janssen Project and to get involved in the community process. In order to ensure consistency of style, language, format, and terminology across all documents, please follow the guidelines below: Glossary of terms # This glossary helps to keep terms and their meanings consistent across documentation. Janssen Project or Jans : Refers to the official project name under Linux Foundation that seeks to build the world\u2019s fastest and most comprehensive cloud native identity and access management software platform Janssen Server : Refers to a set of software components developed under the Janssen Project . Components of the Janssen Server include client and server implementations of the OAuth, OpenID Connect, SCIM and FIDO standards. The term Janssen Server is used to refer to these components as a group. jans-auth-server : Refers to a module within the Janssen Server named jans-auth-server . This is one of the significant modules of the Janssen Server that has an implementation for OAuth and OpenId Connect. Janssen Server module names: For correct naming of other modules of the Janssen Server, please refer to README Documentation Style Guide # Janssen Project documentation uses Markdown. Guidelines below are intended to bring consistency in writing and formatting documents. Testing Janssen Project documentation site is published using MkDocs. Markdown parsers used by Github and the one used by MkDocs may have slight variations in how they generate HTML. So, for a small number of cases, document may look different between Github and Janssen Project documentation site . Hence it is critical to test documentation changes locally before pushing to repository. This will ensure that final HTML rendering of documents by MkDocs is as desired. Document Title # The document title summarises what the document aims to achieve and at the same time, it plays a critical role in making the document easy to find via search. Below are a few guidelines to write good titles for documents. Every document must start with a title. Meaning, #<space><title text> Title should summarise what the document is trying to achieve. For examples: Integrating with the Apache mod_auth_openidc module , Integrating DUO's Universal Prompt as an authentication method , Install using Ubuntu Linux Package Title should include its context. For example, the document under Installation > VM Installation > Ubuntu should not be titled as just Ubuntu but it should have a more detailed title similar to Install using Ubuntu Linux Package . When required, to keep the title from becoming too long, assume that Janssen Server is already understood as context. Titles should be written using title case Document Tags # Janssen Project documentation uses tags to make the search more accurate and add context to search results. Following are guidelines and examples to follow while adding tags to a document. Maximum 6 tags First three should establish the context of the section hierarchy under which the document belongs. See the example below. Remaining tags can be based on the content of the document. Each tag should be a single word (no spaces, hyphens or commas, etc) All tags should be in lowercase Example: Let's look at how to add tags to a document that is located on documentation site at path Administration -> Installation -> VM installation . Also, assume that the document describes the steps to install Janssen Project on the Ubuntu platform. Tags below would be recommended: --- ta gs : - admi n is trat io n - i nstallat io n - vm - ubu ntu --- Referencing Janssen Project Release in Documents # We often need to reference release numbers in the documentation. For example, Ubuntu package installation guide . In this guide, the following command is documented: wget https://github.com/JanssenProject/jans/releases/download/v1.0.5/jans_1.0.5.ubuntu20.04_amd64.deb -P /tmp Above command contains references to the release number at two places. v1.0.5 in the URL and 1.0.5 as part of the file name. There are many such places throughout the documentation when release numbers need to be mentioned. Whenever we make a new release, these numbers need to change as they point to the latest release number. This becomes a manual task. To avoid this manual, error-prone approach the Janssen Project uses a release marker, 1.0.17.nightly instead of writing actual release numbers in the head (latest) documentation branch. So, when there is a need to mention the release number, instead of writing the actual release number, use the release marker. Let's see how to document the above command (at the head version) so that it stays up-to-date release after release. wget https://github.com/JanssenProject/jans/releases/download/v1.0.17.nightly/jans_1.0.17.nightly.ubuntu20.04_amd64.deb -P /tmp Warning head version of documentation may contain the release marker at various places. URLs, commands etc. So, URLs, and commands might not work as it is. Users will have to manually replace the marker or use the most recent stable release documentation. Release marker should be used only when contributing to the latest documentation. Not when updating documentation for previous releases. General Text # Allow long lines to wrap, rather than manually breaking them. For example, the Introduction paragraph is a single line Keep explanations short and clear Use complete sentences when possible To make text italicised , put an _ on each side, like this: _word_ To bold text, put a double * on each end, like this: **word** Leave a blank line between paragraphs. Count a header as a paragraph for this purpose Avoid passive voice as much as possible. It's clearer to say that a subject does something than to say a result was done Avoid using you in statements as much as possible. For example, instead of saying You can navigate to... simply say Navigate to... Page Setup # Start your page with a title on the first line Follow with a concise overview of the document / product's purpose Organize the information in the document from least technical to most technical if possible. Start conceptual, then get detailed Lists # Leave a blank line between text and first item in the list Only use a numbered list if the order of the list matters A line of a list should not end with a period. If it's multiple sentences, like this one, drop the last period Start each item in the list with a capital letter End each item in the list with at least three spaces. This makes sure the line breaks properly To make a bulleted list, start each line with - To make a numbered list, start each line with 1. For example: 1. This is the first item 1. This is the second item 1. This is the third item It will look like this: 1. This is the first item 2. This is the second item 3. This is the third item To include additional lines in a list item, start the sub-line with four spaces. For example: 1. This is the first item in a list There are four spaces to start this line Another four spaces here This keeps all text inside the numbered list item, before starting... 1. The following list item It will look like this: This is the first item in a list There are four spaces to start this line Another four spaces here This keeps all text inside the list, before starting... The following list item Other formatting considerations # Admonitions cannot be nested inside a list. They must be aligned all the way left. Inserting them within a list will break the list sequence (starting back over from 1). Nesting a fenced block of code in a numbered list is more challenging, as the list and code block syntaxes clash. To nest a code block into a list, insert four spaces to the left of all lines of the formatting. For example: 1. This is the first item ``` This is code This is also code. ``` 1. This is the second item It will look like this: This is the first item This is code This is also code. This is the second item Headings # Headings should be in title format. All important words should be capitalized The main title of the page should start with a single # , then each level of subheading should add one. For example, the first subheading should start with ## , a subheading of that should use ### , and so on Code Formatting # To format text as code within a line of normal text, surround the code with a single backtick (`). If the code is to be on its own line, it should be a fenced code block. To make a fenced code block, make a line before and after the code with three backticks: ``` This is code ``` We use the SuperFences plugin to enhance this functionality. Examples & Navigation # When possible, provide an example in the form of code output or a screenshot To instruct a user to click a button, or navigate to a certain page or through a menu, use the following style: Navigate to `Configuration` > `Authentication` and click the `Passport` tab It will look like this: Navigate to Configuration > Authentication and click the Passport tab Linking # We recommend using relative linking syntax when linking to other artifacts in repository. Linking to a page within the same repo use this format: [text for the link](../where/the/link/goes.md) - You must link to the .md file on GitHub for it to work properly - As an example, to make text this link link to a Markdown document named example.md in the same directory, you'd type it as [this link](./example.md) Service Commands # The Janssen Server supports many different Operating Systems (e.g. Ubuntu, SUSE etc.). Service commands can vary. Rather than \"hard coding\" service commands into documentation, please instead reference the dedicated documentation page for Service Commands . In documenting a process that involves a service restart, the Service Command documentation is linked: ## Add the attribute to LDAP - Add custom attribute - [Restart](https://jans.io/docs/vm-ops/restarting-services/) the `jans-auth.service` service. The word Restart is simply linked to the dedicated doc for Service Commands. Tables # Try to make tables visually readable by spacing to make distinct columns The header for each column must be separated by at least three dashes Use outer pipes for consistency If an entry is too long to fit in the neat boxes, that's fine, just try to keep it legible An example table follows: |This |Is |A |Table | |--------|-------|------|---------| |1 |2 |3 |4 | |Word |Code |Text |Table | It looks like this: This Is A Table 1 2 3 4 Word Code Text Table Help On Technical Writing # It is essential for everyone in the community to actively participate in the documentation. At the same time, not everyone is formally trained or experienced in writing technical documents. To help everyone understand the basics of good technical writing, we have listed a few resources below. Going through these resources will not take a lot of time and will help in writing better technical documents. Introduction to Technical Writing (part-1) Introduction to Technical Writing (part-2) Contribution Workflow # Find something to work on # Best place to find something to work on is to look at currently open issues . If you are a first time contributor then starting with list of good first issues is best. Start a discussion # Start a Github Discussion about what you are planning to contribute. Explain the feature or issue that you are planning to contribute and what your solution or implementation approach. Janssen is a community driven project and it'll be helpful to get community's view about it. Create an issue # Take your time to write a proper issue including a good summary and description. Outcome of Github discussion about your contribution can help you create good content for the issue. As a first step when creating a new issue, an issue template has to be selected. Select appropriate issue template and it'll help you create an issue with right content. Remember that issue may be the first thing a reviewer of your PR will look at to get an idea of what you are proposing. It will also be used by the community in the future to find about what new features and enhancements are included in new releases. Implement the change # All contributions to Janssen Project should be made via Github pull requests(PR). New to PR workflow?? Learn and practice it at first-contributions Create a Fork # Fork Janssen repository . And create a clone. Implement the Change # Start working on changes as required. Make sure the code conventions are being followed. Use static code analysis and linting tools to make sure the code is high-quality. Write tests first and then code. Ensure that integration tests that cover your code are appropriately updated and reviewed. Create PR early and push often. Janssen uses Github actions to run automated checks on PR changes. Ensure that these checks are passing with every push. Engage PR reviewers at the start so that they can continue to reivew code as it is developed and in small chunks. For a change that is non-trivial(an enhancement or a new feature), design should be reviewed. This should be done via PR by adding appropriate code owners. Document # PR should include changes in relevant documentation along with code changes. PR is checked by bot to have either one of the following : A commit that follows commit guidelines with docs: message Changes in artifacts under jans/docs If PR does not need any documentation changes, then the developer needs to acknowledge that in one of two ways: Add an empty commit to the PR (using --allow-empty git flag) with docs: message (i.e docs: no doc changes required ) Add footer to the commit message of one of the code commits with docs: message e.g fix: typo on class name More details here. docs: no docs modification Raise a PR # Make sure that PR title follows these guidelines Janssen uses Github PR template. Template provides helpful instructions to ensure new PRs are complete in details and easy to review. Github will populate new PR's description with these instructions. You can edit PR description as per your requirements. When PR is raised, Github will automatically assign reviewer to the PR based changed files and CODEOWNERS list. Once PR is raised, ensure that PR passes all the mandatory Github actions checks available on Github PR page. Github will not allow PR to be merged if any of the mandatory check is failing. Follow Through # Once the PR is raised, wait for reviewers to start review. Reviewers will start review at the first opportunity available. If you want to draw attention, give a gentle reminder in PR comments. But please be patient. Follow activities on your PR closely till the time PR is merged. PR reviewer may want to suggest a change or may need to ask a question to get more clarity. Make sure you are actively collaborating. Once Reviewer has completed the review and approved the changes, the PR will be merged. Thats it!! Congratulations on successful contribution. \ud83e\udd73 \ud83e\udd1f","title":"Contribution Guidelines"},{"location":"CONTRIBUTING/#contributing-to-janssen-project","text":"Purpose of this guide is to provide necessary information and resources to community in order to make successful contribution to the Janssen Project. There are many ways you can contribute. Of course you can contribute code. But we also need people to write documentation and guides, to help us with testing, to answer questions on the forums and chat, to review PR's, to help us with devops and CI/CD, to provide feedback on usability, and to promote the project through outreach. Also, by sharing metrics with us, we can gain valuable insights into how the software performs in the wild. Join the Community First Time Contributors Contribution Guidelines Code of Conduct About Issues Triaging Code Conventions and Guidelines Commits Branches PRs Issues Contributing to the documentation Contribution Workflow Find Something To Work On Start a Discussion Implement the Change Document Raise a PR Follow Through","title":"Contributing to Janssen Project"},{"location":"CONTRIBUTING/#join-the-community","text":"Repo : Watch and Star Janssen repository on Github Discussions : Join interesting discussions at Github Discussions Chat : We have an active community chat on Gitter . You can register for free their with your Github identity. Tweet : Janssen is on Twitter too. Follow us there to stay up to date on release announcements and news around Janssen.","title":"Join the Community"},{"location":"CONTRIBUTING/#first-time-contributors","text":"In case you are first-time contributor, then you can start with our good first issues list These are issues where you can easily contribute and community members will guide and support your contribution as always. If you need Janssen installation to test out your fix, here are the steps .","title":"First Time Contributors"},{"location":"CONTRIBUTING/#contribution-guidelines","text":"We are really glad you are reading this, because we need volunteer developers to help this project come to fruition. Code of Conduct Issues Triaging Coding Conventions","title":"Contribution Guidelines"},{"location":"CONTRIBUTING/#code-of-conduct","text":"Janssen project has a Code of Conduct to which all contributors must adhere, please read it before interacting with the repository or the community in any way.","title":"Code of Conduct"},{"location":"CONTRIBUTING/#about-issues","text":"There are four kinds of issues you can open: Bug report : you believe you found a problem in a project and you want to discuss and get it fixed, creating an issue with the bug report template is the best way to do so. Feature Request : any kind of new feature need to be discussed in this kind of issue, do you want a new rule or a new feature? This is the kind of issue you want to open. Be very good at explaining your intent, it's always important that others can understand what you mean in order to discuss, be open and collaborative in letting others help you getting this done! Security Vulnerability : If you identify a security problem, please report it immediately, providing details about the nature, and if applicable, how to reproduce it. If you want to report an issue privately, you can email security@gluu.org Failing tests : you noticed a flaky test or a problem with a build? This is the kind of issue to triage that! The best way to get involved in the project is through issues, you can help in many ways: Issues triaging: participating in the discussion and adding details to open issues is always a good thing, sometimes issues need to be verified, you could be the one writing a test case to fix a bug! Fix an issue: you can help in getting issue fixed in many ways. More often by opening a pull request. In case you are first-time contributor, then you can start with our good first issues list These are issues where you can easily contribute and community members will guide and support your contribution as always.","title":"About Issues"},{"location":"CONTRIBUTING/#triaging","text":"Triage is a process of evaluating issues and PRs in order to determine their characteristics and take quick actions if possible. When you triage an issue, you: assess whether it has merit or not quickly close it by correctly answering a question point the reporter to a resource or documentation answering the issue tag it via labels, projects, or milestones take ownership submitting a PR for it, in case you want \ud83d\ude07 Here is how we continously triage new issues and PRs so that contributors can contribute faster and better.","title":"Triaging"},{"location":"CONTRIBUTING/#code-conventions-and-guidelines","text":"","title":"Code Conventions and Guidelines"},{"location":"CONTRIBUTING/#commits","text":"Janssen Project mandates all commits to follow guidelines as below. Commit messages As commit convention, we adopt Conventional Commits v1.0.0 , we have an history of commits that do not adopt the convention but any new commit must follow it to be eligible for merge. Add GPG signature to your commit To ensure that contribution is coming for a trusted source, all commits should be signed using GPG key and verified by Github. If you have GPG key setup already then just use -S switch with you commit to sign it. If you need to setup your GPG key and verification, then you can find detailed instructions here Add DCO sign-off The Developer Certificate of Origin (DCO) is a lightweight way for contributors to certify that they wrote or otherwise have the right to submit the code they are contributing to the project. Contributors to the Janssen project sign-off that they adhere to these requirements by adding a Signed-off-by line to commit messages. This is a commit message Signed-off-by: Foo Bar <foobar@spam.org> Git even has a -s command line option to append this automatically to your commit message: $ git commit -s -m 'This is my commit message' In all, if you have your GPG verification setup, your commit command should look like git commit -S -s -m 'message that follows conventional commit style'","title":"Commits"},{"location":"CONTRIBUTING/#branches","text":"Branch name should have component name as prefix, eg jans-core-mybranch","title":"Branches"},{"location":"CONTRIBUTING/#prs","text":"PR titles should also follow Conventional Commits v1.0.0 . This will help in keeping merge commit messages inline with commit message standards Squash commits into small number of cohesive commits before raising a PR PR should be rebased on main branch so that there are minimal or no conflicts at the time of merge PR should only have changes related to target feature or issue. Create a separate PR for formatting or other quick bug fixes PR should include relevent documentaton changes PR should include unit and integration tests","title":"PRs"},{"location":"CONTRIBUTING/#issues","text":"Issue titles should follow Conventional Commits v1.0.0","title":"Issues"},{"location":"CONTRIBUTING/#backport-changes-to-a-different-version","text":"Backport changes are now supported through a workflow through labels prefixed with backport/ . For-example to backport changes in a certain PR to version v1.0.0 a label to that PR matching the version must be added i.e backport/v1.0.0 . The flow consists of creating a new branch, cherry-picking the changes of the original PR and creating a new PR to merge them.","title":"Backport changes to a different version"},{"location":"CONTRIBUTING/#contributing-to-the-documentation","text":"Great documentation is a reflection of software's maturity and the great community that stands behind it. Contributing to the Janssen Project documentation is the easiest way to learn about the Janssen Project and to get involved in the community process. In order to ensure consistency of style, language, format, and terminology across all documents, please follow the guidelines below:","title":"Contributing to the documentation"},{"location":"CONTRIBUTING/#glossary-of-terms","text":"This glossary helps to keep terms and their meanings consistent across documentation. Janssen Project or Jans : Refers to the official project name under Linux Foundation that seeks to build the world\u2019s fastest and most comprehensive cloud native identity and access management software platform Janssen Server : Refers to a set of software components developed under the Janssen Project . Components of the Janssen Server include client and server implementations of the OAuth, OpenID Connect, SCIM and FIDO standards. The term Janssen Server is used to refer to these components as a group. jans-auth-server : Refers to a module within the Janssen Server named jans-auth-server . This is one of the significant modules of the Janssen Server that has an implementation for OAuth and OpenId Connect. Janssen Server module names: For correct naming of other modules of the Janssen Server, please refer to README","title":"Glossary of terms"},{"location":"CONTRIBUTING/#documentation-style-guide","text":"Janssen Project documentation uses Markdown. Guidelines below are intended to bring consistency in writing and formatting documents. Testing Janssen Project documentation site is published using MkDocs. Markdown parsers used by Github and the one used by MkDocs may have slight variations in how they generate HTML. So, for a small number of cases, document may look different between Github and Janssen Project documentation site . Hence it is critical to test documentation changes locally before pushing to repository. This will ensure that final HTML rendering of documents by MkDocs is as desired.","title":"Documentation Style Guide"},{"location":"CONTRIBUTING/#document-title","text":"The document title summarises what the document aims to achieve and at the same time, it plays a critical role in making the document easy to find via search. Below are a few guidelines to write good titles for documents. Every document must start with a title. Meaning, #<space><title text> Title should summarise what the document is trying to achieve. For examples: Integrating with the Apache mod_auth_openidc module , Integrating DUO's Universal Prompt as an authentication method , Install using Ubuntu Linux Package Title should include its context. For example, the document under Installation > VM Installation > Ubuntu should not be titled as just Ubuntu but it should have a more detailed title similar to Install using Ubuntu Linux Package . When required, to keep the title from becoming too long, assume that Janssen Server is already understood as context. Titles should be written using title case","title":"Document Title"},{"location":"CONTRIBUTING/#document-tags","text":"Janssen Project documentation uses tags to make the search more accurate and add context to search results. Following are guidelines and examples to follow while adding tags to a document. Maximum 6 tags First three should establish the context of the section hierarchy under which the document belongs. See the example below. Remaining tags can be based on the content of the document. Each tag should be a single word (no spaces, hyphens or commas, etc) All tags should be in lowercase Example: Let's look at how to add tags to a document that is located on documentation site at path Administration -> Installation -> VM installation . Also, assume that the document describes the steps to install Janssen Project on the Ubuntu platform. Tags below would be recommended: --- ta gs : - admi n is trat io n - i nstallat io n - vm - ubu ntu ---","title":"Document Tags"},{"location":"CONTRIBUTING/#referencing-janssen-project-release-in-documents","text":"We often need to reference release numbers in the documentation. For example, Ubuntu package installation guide . In this guide, the following command is documented: wget https://github.com/JanssenProject/jans/releases/download/v1.0.5/jans_1.0.5.ubuntu20.04_amd64.deb -P /tmp Above command contains references to the release number at two places. v1.0.5 in the URL and 1.0.5 as part of the file name. There are many such places throughout the documentation when release numbers need to be mentioned. Whenever we make a new release, these numbers need to change as they point to the latest release number. This becomes a manual task. To avoid this manual, error-prone approach the Janssen Project uses a release marker, 1.0.17.nightly instead of writing actual release numbers in the head (latest) documentation branch. So, when there is a need to mention the release number, instead of writing the actual release number, use the release marker. Let's see how to document the above command (at the head version) so that it stays up-to-date release after release. wget https://github.com/JanssenProject/jans/releases/download/v1.0.17.nightly/jans_1.0.17.nightly.ubuntu20.04_amd64.deb -P /tmp Warning head version of documentation may contain the release marker at various places. URLs, commands etc. So, URLs, and commands might not work as it is. Users will have to manually replace the marker or use the most recent stable release documentation. Release marker should be used only when contributing to the latest documentation. Not when updating documentation for previous releases.","title":"Referencing Janssen Project Release in Documents"},{"location":"CONTRIBUTING/#general-text","text":"Allow long lines to wrap, rather than manually breaking them. For example, the Introduction paragraph is a single line Keep explanations short and clear Use complete sentences when possible To make text italicised , put an _ on each side, like this: _word_ To bold text, put a double * on each end, like this: **word** Leave a blank line between paragraphs. Count a header as a paragraph for this purpose Avoid passive voice as much as possible. It's clearer to say that a subject does something than to say a result was done Avoid using you in statements as much as possible. For example, instead of saying You can navigate to... simply say Navigate to...","title":"General Text"},{"location":"CONTRIBUTING/#page-setup","text":"Start your page with a title on the first line Follow with a concise overview of the document / product's purpose Organize the information in the document from least technical to most technical if possible. Start conceptual, then get detailed","title":"Page Setup"},{"location":"CONTRIBUTING/#lists","text":"Leave a blank line between text and first item in the list Only use a numbered list if the order of the list matters A line of a list should not end with a period. If it's multiple sentences, like this one, drop the last period Start each item in the list with a capital letter End each item in the list with at least three spaces. This makes sure the line breaks properly To make a bulleted list, start each line with - To make a numbered list, start each line with 1. For example: 1. This is the first item 1. This is the second item 1. This is the third item It will look like this: 1. This is the first item 2. This is the second item 3. This is the third item To include additional lines in a list item, start the sub-line with four spaces. For example: 1. This is the first item in a list There are four spaces to start this line Another four spaces here This keeps all text inside the numbered list item, before starting... 1. The following list item It will look like this: This is the first item in a list There are four spaces to start this line Another four spaces here This keeps all text inside the list, before starting... The following list item","title":"Lists"},{"location":"CONTRIBUTING/#other-formatting-considerations","text":"Admonitions cannot be nested inside a list. They must be aligned all the way left. Inserting them within a list will break the list sequence (starting back over from 1). Nesting a fenced block of code in a numbered list is more challenging, as the list and code block syntaxes clash. To nest a code block into a list, insert four spaces to the left of all lines of the formatting. For example: 1. This is the first item ``` This is code This is also code. ``` 1. This is the second item It will look like this: This is the first item This is code This is also code. This is the second item","title":"Other formatting considerations"},{"location":"CONTRIBUTING/#headings","text":"Headings should be in title format. All important words should be capitalized The main title of the page should start with a single # , then each level of subheading should add one. For example, the first subheading should start with ## , a subheading of that should use ### , and so on","title":"Headings"},{"location":"CONTRIBUTING/#code-formatting","text":"To format text as code within a line of normal text, surround the code with a single backtick (`). If the code is to be on its own line, it should be a fenced code block. To make a fenced code block, make a line before and after the code with three backticks: ``` This is code ``` We use the SuperFences plugin to enhance this functionality.","title":"Code Formatting"},{"location":"CONTRIBUTING/#examples-navigation","text":"When possible, provide an example in the form of code output or a screenshot To instruct a user to click a button, or navigate to a certain page or through a menu, use the following style: Navigate to `Configuration` > `Authentication` and click the `Passport` tab It will look like this: Navigate to Configuration > Authentication and click the Passport tab","title":"Examples &amp; Navigation"},{"location":"CONTRIBUTING/#linking","text":"We recommend using relative linking syntax when linking to other artifacts in repository. Linking to a page within the same repo use this format: [text for the link](../where/the/link/goes.md) - You must link to the .md file on GitHub for it to work properly - As an example, to make text this link link to a Markdown document named example.md in the same directory, you'd type it as [this link](./example.md)","title":"Linking"},{"location":"CONTRIBUTING/#service-commands","text":"The Janssen Server supports many different Operating Systems (e.g. Ubuntu, SUSE etc.). Service commands can vary. Rather than \"hard coding\" service commands into documentation, please instead reference the dedicated documentation page for Service Commands . In documenting a process that involves a service restart, the Service Command documentation is linked: ## Add the attribute to LDAP - Add custom attribute - [Restart](https://jans.io/docs/vm-ops/restarting-services/) the `jans-auth.service` service. The word Restart is simply linked to the dedicated doc for Service Commands.","title":"Service Commands"},{"location":"CONTRIBUTING/#tables","text":"Try to make tables visually readable by spacing to make distinct columns The header for each column must be separated by at least three dashes Use outer pipes for consistency If an entry is too long to fit in the neat boxes, that's fine, just try to keep it legible An example table follows: |This |Is |A |Table | |--------|-------|------|---------| |1 |2 |3 |4 | |Word |Code |Text |Table | It looks like this: This Is A Table 1 2 3 4 Word Code Text Table","title":"Tables"},{"location":"CONTRIBUTING/#help-on-technical-writing","text":"It is essential for everyone in the community to actively participate in the documentation. At the same time, not everyone is formally trained or experienced in writing technical documents. To help everyone understand the basics of good technical writing, we have listed a few resources below. Going through these resources will not take a lot of time and will help in writing better technical documents. Introduction to Technical Writing (part-1) Introduction to Technical Writing (part-2)","title":"Help On Technical Writing"},{"location":"CONTRIBUTING/#contribution-workflow","text":"","title":"Contribution Workflow"},{"location":"CONTRIBUTING/#find-something-to-work-on","text":"Best place to find something to work on is to look at currently open issues . If you are a first time contributor then starting with list of good first issues is best.","title":"Find something to work on"},{"location":"CONTRIBUTING/#start-a-discussion","text":"Start a Github Discussion about what you are planning to contribute. Explain the feature or issue that you are planning to contribute and what your solution or implementation approach. Janssen is a community driven project and it'll be helpful to get community's view about it.","title":"Start a discussion"},{"location":"CONTRIBUTING/#create-an-issue","text":"Take your time to write a proper issue including a good summary and description. Outcome of Github discussion about your contribution can help you create good content for the issue. As a first step when creating a new issue, an issue template has to be selected. Select appropriate issue template and it'll help you create an issue with right content. Remember that issue may be the first thing a reviewer of your PR will look at to get an idea of what you are proposing. It will also be used by the community in the future to find about what new features and enhancements are included in new releases.","title":"Create an issue"},{"location":"CONTRIBUTING/#implement-the-change","text":"All contributions to Janssen Project should be made via Github pull requests(PR). New to PR workflow?? Learn and practice it at first-contributions","title":"Implement the change"},{"location":"CONTRIBUTING/#create-a-fork","text":"Fork Janssen repository . And create a clone.","title":"Create a Fork"},{"location":"CONTRIBUTING/#implement-the-change_1","text":"Start working on changes as required. Make sure the code conventions are being followed. Use static code analysis and linting tools to make sure the code is high-quality. Write tests first and then code. Ensure that integration tests that cover your code are appropriately updated and reviewed. Create PR early and push often. Janssen uses Github actions to run automated checks on PR changes. Ensure that these checks are passing with every push. Engage PR reviewers at the start so that they can continue to reivew code as it is developed and in small chunks. For a change that is non-trivial(an enhancement or a new feature), design should be reviewed. This should be done via PR by adding appropriate code owners.","title":"Implement the Change"},{"location":"CONTRIBUTING/#document","text":"PR should include changes in relevant documentation along with code changes. PR is checked by bot to have either one of the following : A commit that follows commit guidelines with docs: message Changes in artifacts under jans/docs If PR does not need any documentation changes, then the developer needs to acknowledge that in one of two ways: Add an empty commit to the PR (using --allow-empty git flag) with docs: message (i.e docs: no doc changes required ) Add footer to the commit message of one of the code commits with docs: message e.g fix: typo on class name More details here. docs: no docs modification","title":"Document"},{"location":"CONTRIBUTING/#raise-a-pr","text":"Make sure that PR title follows these guidelines Janssen uses Github PR template. Template provides helpful instructions to ensure new PRs are complete in details and easy to review. Github will populate new PR's description with these instructions. You can edit PR description as per your requirements. When PR is raised, Github will automatically assign reviewer to the PR based changed files and CODEOWNERS list. Once PR is raised, ensure that PR passes all the mandatory Github actions checks available on Github PR page. Github will not allow PR to be merged if any of the mandatory check is failing.","title":"Raise a PR"},{"location":"CONTRIBUTING/#follow-through","text":"Once the PR is raised, wait for reviewers to start review. Reviewers will start review at the first opportunity available. If you want to draw attention, give a gentle reminder in PR comments. But please be patient. Follow activities on your PR closely till the time PR is merged. PR reviewer may want to suggest a change or may need to ask a question to get more clarity. Make sure you are actively collaborating. Once Reviewer has completed the review and approved the changes, the PR will be merged. Thats it!! Congratulations on successful contribution. \ud83e\udd73 \ud83e\udd1f","title":"Follow Through"},{"location":"admin/","tags":["administration"],"text":"Overview # Administration # Welcome Admins! This collection of guides will help you deploy, configure and operate Janssen software. Use the left navigation to dig deeper into each specific area. Deployment and Planning Guide High level design concepts and architecture. Installation Howto's for VM and cloud native deployment Kubernetes Operation Guide Day-to-day administration for cloud native VM Operation Guide Day-to-day administration if you installed a SUSE, Red Hat, or Ubuntu linux package. Configuration Guide How to use the various configuration tools: command line, curl , or the text user interface (\"TUI\"). Auth Server Admin Guide How to configure OpenID, OAuth, authentication workflows, and other core functional digital identity features. Developer Guide How to write code to customize the Janssen, and introducing Agama, a programming language for web authentication flows. Reference Guide Autogenerated content like JSON properties, OpenAPI docs, database schemas, javadocs. Jans Eleven Admin Guide Only needed if you use an HSM to store the private keys of the OpenID Provider. FIDO Admin Guide Operational and functional info for the FIDO service. SCIM Admin Guide Operational and functional info for the SCIM service. Integration Guide A collection of docs about configuring third party software and SaaS providers. Config API Admin Guide This required component is used by all configuration tools to write Janssen software configuration to the database. Janssen Recipes Howto's about various frequently asked topics Upgrade Guide Getting to the latest version of Janssen. Script Catalog Examples of doing useful stuff with the various Janssen interception scripts. User Management How to use jans-link and other available tools for user management Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Introduction"},{"location":"admin/#overview","text":"","title":"Overview"},{"location":"admin/#administration","text":"Welcome Admins! This collection of guides will help you deploy, configure and operate Janssen software. Use the left navigation to dig deeper into each specific area. Deployment and Planning Guide High level design concepts and architecture. Installation Howto's for VM and cloud native deployment Kubernetes Operation Guide Day-to-day administration for cloud native VM Operation Guide Day-to-day administration if you installed a SUSE, Red Hat, or Ubuntu linux package. Configuration Guide How to use the various configuration tools: command line, curl , or the text user interface (\"TUI\"). Auth Server Admin Guide How to configure OpenID, OAuth, authentication workflows, and other core functional digital identity features. Developer Guide How to write code to customize the Janssen, and introducing Agama, a programming language for web authentication flows. Reference Guide Autogenerated content like JSON properties, OpenAPI docs, database schemas, javadocs. Jans Eleven Admin Guide Only needed if you use an HSM to store the private keys of the OpenID Provider. FIDO Admin Guide Operational and functional info for the FIDO service. SCIM Admin Guide Operational and functional info for the SCIM service. Integration Guide A collection of docs about configuring third party software and SaaS providers. Config API Admin Guide This required component is used by all configuration tools to write Janssen software configuration to the database. Janssen Recipes Howto's about various frequently asked topics Upgrade Guide Getting to the latest version of Janssen. Script Catalog Examples of doing useful stuff with the various Janssen interception scripts. User Management How to use jans-link and other available tools for user management Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Administration"},{"location":"admin/auth-server/","tags":["administration","auth-server"],"text":"Overview # Auth Server provides the federated identity functionality of the Janssen Platform. The server is a fork of oxAuth , the engine of Gluu Server 4. The design goal of Auth Server was speed, scalability and flexibility for large scale enterprise deployments. It is based on the Java Weld framework, a stable platform that provides many features out of the box. Auth Server is a fairly comprehensive implementation of OpenID Connect, which itself is built on top of OAuth 2.0. See the latest OpenID certifications for OpenID Providers, FAPI OpenID Providers, and FAPI-CIBA OpenID Providers for the latest results. Supported Standards # OpenID OpenID Connect Core 1.0 OpenID Connect Discovery 1.0 OpenID Connect Dynamic Registration OpenID Connect Client-Initiated Backchannel Authentication Flow - Core 1.0 Financial-grade API Security Profile 1.0 - Part 1: Baseline Financial-grade API Security Profile 1.0 - Part 2: Advanced OpenIDConnect Front-Channel Logout 1.0 OpenID Connect Back-Channel Logout 1.0 OpenID Connect Session Management Draft - JWT Secured Authorization Response Mode for OAuth 2.0 (JARM) Draft - Financial-grade API: Client Initiated Backchannel Authentication Profile Draft - OpenID Connect Native SSO for Mobile Apps 1.0 OAuth RFC 6749 The OAuth 2.0 Authorization Framework OAuth 2.0 Multiple Response Type Encoding Practices OAuth 2.0 Form Post Response Mode RFC 6750 The OAuth 2.0 Authorization Framework: Bearer Token Usage RFC 7009 OAuth 2.0 Token Revocation RFC 7519 JSON Web Token (JWT) RFC 7591 OAuth 2.0 Dynamic Client Registration Protocol RFC 7592 OAuth 2.0 Dynamic Client Registration Management Protocol RFC 7636 Proof Key for Code Exchange by OAuth Public Clients RFC 7662 OAuth 2.0 Token Introspection RFC 8252 OAuth 2.0 for Native Apps RFC 8414 OAuth 2.0 Authorization Server Metadata RFC 8628 OAuth 2.0 Device Authorization Grant RFC 8693 OAuth 2.0 Token Exchange RFC 8705 OAuth 2.0 Mutual-TLS Client Authentication and Certificate-Bound Access Tokens RFC 9068 JSON Web Token (JWT) Profile for OAuth 2.0 Access Tokens RFC 9126 OAuth 2.0 Pushed Authorization Requests Draft - OAuth 2.0 Demonstrating Proof-of-Possession at the Application Layer (DPoP) Draft - JWT Response for OAuth Token Introspection User Managed Access (UMA) Federated Authorization for User-Managed Access (UMA) 2.0 User-Managed Access (UMA) 2.0 Grant for OAuth 2.0 Authorization For the above specifications, Auth Server implements many features--all of the MUST's, but also many of the SHOULD's and MAY's. If you find any discrepancies, please raise an issue .","title":"Overview"},{"location":"admin/auth-server/#overview","text":"Auth Server provides the federated identity functionality of the Janssen Platform. The server is a fork of oxAuth , the engine of Gluu Server 4. The design goal of Auth Server was speed, scalability and flexibility for large scale enterprise deployments. It is based on the Java Weld framework, a stable platform that provides many features out of the box. Auth Server is a fairly comprehensive implementation of OpenID Connect, which itself is built on top of OAuth 2.0. See the latest OpenID certifications for OpenID Providers, FAPI OpenID Providers, and FAPI-CIBA OpenID Providers for the latest results.","title":"Overview"},{"location":"admin/auth-server/#supported-standards","text":"OpenID OpenID Connect Core 1.0 OpenID Connect Discovery 1.0 OpenID Connect Dynamic Registration OpenID Connect Client-Initiated Backchannel Authentication Flow - Core 1.0 Financial-grade API Security Profile 1.0 - Part 1: Baseline Financial-grade API Security Profile 1.0 - Part 2: Advanced OpenIDConnect Front-Channel Logout 1.0 OpenID Connect Back-Channel Logout 1.0 OpenID Connect Session Management Draft - JWT Secured Authorization Response Mode for OAuth 2.0 (JARM) Draft - Financial-grade API: Client Initiated Backchannel Authentication Profile Draft - OpenID Connect Native SSO for Mobile Apps 1.0 OAuth RFC 6749 The OAuth 2.0 Authorization Framework OAuth 2.0 Multiple Response Type Encoding Practices OAuth 2.0 Form Post Response Mode RFC 6750 The OAuth 2.0 Authorization Framework: Bearer Token Usage RFC 7009 OAuth 2.0 Token Revocation RFC 7519 JSON Web Token (JWT) RFC 7591 OAuth 2.0 Dynamic Client Registration Protocol RFC 7592 OAuth 2.0 Dynamic Client Registration Management Protocol RFC 7636 Proof Key for Code Exchange by OAuth Public Clients RFC 7662 OAuth 2.0 Token Introspection RFC 8252 OAuth 2.0 for Native Apps RFC 8414 OAuth 2.0 Authorization Server Metadata RFC 8628 OAuth 2.0 Device Authorization Grant RFC 8693 OAuth 2.0 Token Exchange RFC 8705 OAuth 2.0 Mutual-TLS Client Authentication and Certificate-Bound Access Tokens RFC 9068 JSON Web Token (JWT) Profile for OAuth 2.0 Access Tokens RFC 9126 OAuth 2.0 Pushed Authorization Requests Draft - OAuth 2.0 Demonstrating Proof-of-Possession at the Application Layer (DPoP) Draft - JWT Response for OAuth Token Introspection User Managed Access (UMA) Federated Authorization for User-Managed Access (UMA) 2.0 User-Managed Access (UMA) 2.0 Grant for OAuth 2.0 Authorization For the above specifications, Auth Server implements many features--all of the MUST's, but also many of the SHOULD's and MAY's. If you find any discrepancies, please raise an issue .","title":"Supported Standards"},{"location":"admin/auth-server/config/","tags":["administration","auth-server","configuration"],"text":"Configuration Overview # In some ways, this whole Auth Server admin guide is about configuration. But you have to start somewhere! This page provides a quick overview before you dive in! Config Server # The Configuration Server is a JSON/REST API that writes to the database, generates the keys, and does much of the other work you need to make your Janssen Project infrastructure solve your digital identity challenges. See the [Config API Guide](../config-api/README.md for more information. Tools # API - you can call the configuration endpoints with the API tool of your choice, like curl . With this mechanism, you can use client credential grant to obtain an OAuth token--just make sure it has the required scope to call the method / endpoint. See the Curl Guide for more info. CLI - The CLI, or Command Line Interface, calls the API for you. It uses the device flow to authenticate the person who is behind the config changes. See the Configuration CLI Guide for more info. TUI - The TUI, or Text User Interface, is a menu-based interactive tool that provides a more intuitive experience. When you make changes via the TUI, it also creates a log of the equivalent CLI command, in case you want a shortcut next time around. See the TUI Guide for more info. Client versus Server Configuration # Some behaviors are controlled at the server level. For example, should your Auth Server allow dynamic client registration? Other features you can configure either at the server or client level. For example, do you want user claims in an id_token ? Maybe you always want them (server), or maybe only sometimes (client). See the JSON Configuration/Properties for an overview of the server level configuration options. For client configuration options, see the Client Schema page. Interception Scripts # Janssen is a very flexible platform, that lets you customize many of the flows to meet your exact requirements. The black magic behind this flexibility is interception scripts--these are standard programming interfaces that enable you to add or change the behavior of Jans endpoints. Just to give one example, perhaps you need to add data from an external API into an OAuth access token? In this case, you could use the Update Token interception script. There are around 20 of these scripts. For a full list, see the Scripts Documentation . Customization # You don't want out of the box look and feel provided by Janssen. We know we are UX-challenged, backend developer geeks. Check out the Customization Guide for info about how to add adapt the user facing content to achieve your UX dreams. Operations # Janssen Project software has to run somewhere, right now... either on VM's or in containers. There are specifics instructions about each contained in these docs. Database and Cache # One of the biggest challenges in running the Janssen Platform is persistence. Make sure you understand how Janssen Project stores your data, or in some cases, caches it.","title":"Auth Server Config"},{"location":"admin/auth-server/config/#configuration-overview","text":"In some ways, this whole Auth Server admin guide is about configuration. But you have to start somewhere! This page provides a quick overview before you dive in!","title":"Configuration Overview"},{"location":"admin/auth-server/config/#config-server","text":"The Configuration Server is a JSON/REST API that writes to the database, generates the keys, and does much of the other work you need to make your Janssen Project infrastructure solve your digital identity challenges. See the [Config API Guide](../config-api/README.md for more information.","title":"Config Server"},{"location":"admin/auth-server/config/#tools","text":"API - you can call the configuration endpoints with the API tool of your choice, like curl . With this mechanism, you can use client credential grant to obtain an OAuth token--just make sure it has the required scope to call the method / endpoint. See the Curl Guide for more info. CLI - The CLI, or Command Line Interface, calls the API for you. It uses the device flow to authenticate the person who is behind the config changes. See the Configuration CLI Guide for more info. TUI - The TUI, or Text User Interface, is a menu-based interactive tool that provides a more intuitive experience. When you make changes via the TUI, it also creates a log of the equivalent CLI command, in case you want a shortcut next time around. See the TUI Guide for more info.","title":"Tools"},{"location":"admin/auth-server/config/#client-versus-server-configuration","text":"Some behaviors are controlled at the server level. For example, should your Auth Server allow dynamic client registration? Other features you can configure either at the server or client level. For example, do you want user claims in an id_token ? Maybe you always want them (server), or maybe only sometimes (client). See the JSON Configuration/Properties for an overview of the server level configuration options. For client configuration options, see the Client Schema page.","title":"Client versus Server Configuration"},{"location":"admin/auth-server/config/#interception-scripts","text":"Janssen is a very flexible platform, that lets you customize many of the flows to meet your exact requirements. The black magic behind this flexibility is interception scripts--these are standard programming interfaces that enable you to add or change the behavior of Jans endpoints. Just to give one example, perhaps you need to add data from an external API into an OAuth access token? In this case, you could use the Update Token interception script. There are around 20 of these scripts. For a full list, see the Scripts Documentation .","title":"Interception Scripts"},{"location":"admin/auth-server/config/#customization","text":"You don't want out of the box look and feel provided by Janssen. We know we are UX-challenged, backend developer geeks. Check out the Customization Guide for info about how to add adapt the user facing content to achieve your UX dreams.","title":"Customization"},{"location":"admin/auth-server/config/#operations","text":"Janssen Project software has to run somewhere, right now... either on VM's or in containers. There are specifics instructions about each contained in these docs.","title":"Operations"},{"location":"admin/auth-server/config/#database-and-cache","text":"One of the biggest challenges in running the Janssen Platform is persistence. Make sure you understand how Janssen Project stores your data, or in some cases, caches it.","title":"Database and Cache"},{"location":"admin/auth-server/client-management/","tags":["administration","client","management"],"text":"Client Management # Background # A \"client\" is a piece of software either acting autonomously or on behalf of a person. The OAuth framework defines the term client here . OpenId Connect clarifies that: OAuth 2.0 Clients using OpenID Connect are also referred to as Relying Parties (RPs) Don't confuse a Client with either the Person or the Browser! Client Security # OpenID allows you to use as much security as you need. To a large extent, the security of your implementation depends on what client features you select. For example, let's just consider how the client authenticates itself to Jans Auth Server, which is defined by the token_endpoint_auth_method in OpenID Connect Client Metadata . Obviously, using asynchronous secrets for authentication is more secure. The client configuration also determines what crypto is used for signing and encryption of tokens, what scopes are available to the client (which determines the extent of access to APIs), what grants are available, what is a valid redirect_uri , timeouts, whether to use a value or reference token, whether to expire the client, and several other options that impact security. Client Management Tools # A client can be created (and managed) by using one of the following tools offered by the Jans Auth server: Jans Config API Command Line Tool (CLI) Jans Text UI (TUI) OpenID Connect Dynamic Client Registration The choice of tool should be made based on your business requirement. - For ad hoc creation, the TUI is great. - If you need to quickly script client creation (e.g. in a bash script) use the CLI - Use curl to call the Jans Config API. - To allow apps to register as OIDC clients, without a manual process, the OpenID Connect Dynamic Client Registration (DCR) can be used. A. OpenID Dynamic Client Registration # Jans Auth server publishes the registration_endpoint in the OpenID configuration JSON response, which you can find at .well-known/openid-configuration in your specific deployment. Typically, it is https://{hostname}/jans-auth/restv1/register The OpenApi specification for /registration documents Jans Auth Server's specific implementation, which aligns with the requirements of OpenID Connect dynamic client registration. Also, check the Registration Endpoint documentation for more details on the steps involved in dynamic client registration. B. Jans-CLI # Below is a one liner to add a client. ./config-cli-tui.pyz --host $FQDN --client-id $MY_CLIENT_ID \\ --client-secret $MY_CLIENT_SECRET --no-tui \\ --operation-id=post-oauth-openid-client --data=my_client.json For more information about how to use the Jans-CLI, see the docs C. TUI # To start registering a new client, navigate to Auth Server -> Clients -> Add Client . This brings up a screen as shown below with various sections to input client details. Refer to complete documentation here D. Using curl commands # To add a client via curl , see the information on the curl documentation page .","title":"Client Management"},{"location":"admin/auth-server/client-management/#client-management","text":"","title":"Client Management"},{"location":"admin/auth-server/client-management/#background","text":"A \"client\" is a piece of software either acting autonomously or on behalf of a person. The OAuth framework defines the term client here . OpenId Connect clarifies that: OAuth 2.0 Clients using OpenID Connect are also referred to as Relying Parties (RPs) Don't confuse a Client with either the Person or the Browser!","title":"Background"},{"location":"admin/auth-server/client-management/#client-security","text":"OpenID allows you to use as much security as you need. To a large extent, the security of your implementation depends on what client features you select. For example, let's just consider how the client authenticates itself to Jans Auth Server, which is defined by the token_endpoint_auth_method in OpenID Connect Client Metadata . Obviously, using asynchronous secrets for authentication is more secure. The client configuration also determines what crypto is used for signing and encryption of tokens, what scopes are available to the client (which determines the extent of access to APIs), what grants are available, what is a valid redirect_uri , timeouts, whether to use a value or reference token, whether to expire the client, and several other options that impact security.","title":"Client Security"},{"location":"admin/auth-server/client-management/#client-management-tools","text":"A client can be created (and managed) by using one of the following tools offered by the Jans Auth server: Jans Config API Command Line Tool (CLI) Jans Text UI (TUI) OpenID Connect Dynamic Client Registration The choice of tool should be made based on your business requirement. - For ad hoc creation, the TUI is great. - If you need to quickly script client creation (e.g. in a bash script) use the CLI - Use curl to call the Jans Config API. - To allow apps to register as OIDC clients, without a manual process, the OpenID Connect Dynamic Client Registration (DCR) can be used.","title":"Client Management Tools"},{"location":"admin/auth-server/client-management/#a-openid-dynamic-client-registration","text":"Jans Auth server publishes the registration_endpoint in the OpenID configuration JSON response, which you can find at .well-known/openid-configuration in your specific deployment. Typically, it is https://{hostname}/jans-auth/restv1/register The OpenApi specification for /registration documents Jans Auth Server's specific implementation, which aligns with the requirements of OpenID Connect dynamic client registration. Also, check the Registration Endpoint documentation for more details on the steps involved in dynamic client registration.","title":"A. OpenID Dynamic Client Registration"},{"location":"admin/auth-server/client-management/#b-jans-cli","text":"Below is a one liner to add a client. ./config-cli-tui.pyz --host $FQDN --client-id $MY_CLIENT_ID \\ --client-secret $MY_CLIENT_SECRET --no-tui \\ --operation-id=post-oauth-openid-client --data=my_client.json For more information about how to use the Jans-CLI, see the docs","title":"B. Jans-CLI"},{"location":"admin/auth-server/client-management/#c-tui","text":"To start registering a new client, navigate to Auth Server -> Clients -> Add Client . This brings up a screen as shown below with various sections to input client details. Refer to complete documentation here","title":"C. TUI"},{"location":"admin/auth-server/client-management/#d-using-curl-commands","text":"To add a client via curl , see the information on the curl documentation page .","title":"D. Using curl commands"},{"location":"admin/auth-server/client-management/client-authn/","tags":["administration","client","authentication"],"text":"Client Authentication # Janssen Server supports authentication at the token endpoint for confidential clients. Confidential clients have to specify a preferred method of authentication during the client registration process. Client authentication is defined by OAuth and OpenID Connect client authentication section and in Metadata section property token_endpoint_auth_method Supported Authentication Methods # List of supported authentication methods are listed in the response of Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration The token_endpoint_auth_methods_supported claim in the response specifies the list of all the supported methods. Authentication Methods # Authentication methods can be broadly categorised in two categories: Shared key based Private( or asymmetric) key based While shared key based authentication is simpler to implement, it is less secure than a private key based authentication. This is primarily because when using shared key based authentication, the client secret is transmitted between the client and the authorization server. This makes the authentication vulnerable to theft attacks. There are more reasons to prefer private key over shared secret as listed in this section Characteristics table below shows side-by-side comparison of various supported authentication methods. Method Secret Not Sent in Clear Signed Only client has secret Expiry Token Binding client_secret_basic client_secret_post client_secret_jwt private_key_jwt tls_client_auth self_signed_tls_client_auth client_secret_basic # Default authentication method for Janssen Server. It authenticates clients using method described in client authentication section of OAuth framework. client_secret_post # client_secret_post method authenticates clients using method described in client authentication section of OAuth framework by adding client credentials in request body. client_secret_jwt # Like client_secret_basic and client_secret_post methods, this method is also based on a shared secret that client receives from Janssen Server. But instead of sending secret back to authorization server everytime, the client creates a JWT using an HMAC SHA algorithm where the shared secret is used as the key. This method is more secure than the client_secret_basic and client_secret_post due to following reasons: Secret which is shared once will never be transmitted again JWT can have expiration time, beyond which the same JWT can not be used. This reduces the time window for replay of the same token in case it is compromised. This method is further described in OpenId Connect specification, section 9 . Client Configuration For Using client_secret_jwt # Janssen Server clients should specify the preferred algorithm for use with this method during client configuration. Algorithms supported by Janssen Server are listed in the response of Janssen Server's well-known configuration endpoint . From the response, the claim token_endpoint_auth_signing_alg_values_supported lists the supported algorithms. To specify preferred algorithm for a client, using Janssen Text-based UI(TUI) , navigate via Auth Server -> Get or add clients -> encryption/signing -> TODO: which exact properties. private_key_jwt # private_key_jwt is private key based method where secret is not shared between client and authorization server. Instead, the client generates an JSON Web Token(JWT) which is shared with the Janssen Server. Upon receiving JWT singned by client's private key, the Janssen Server can validate this JWT using public keys supplied by client at the time of registration. The client can supply public keys in form of JSON Web Key Set(JWKS) or provide a URI where the client publishes its JWKS. Providing JWKS URI is preferred method as it enable easy key rotations without client having to update JWKS manualy. Check jwks and jwks_uri elements in OIDC client metadata section for more details. This authentication method is further described in OpenId Connect specification, section 9 . Janssen server implements signing and encryption mechanism following the guidelines in section 10 of OpenId Connect specification. Clients should choose the algorithm to sign and encrypt JWT as per their security requirements. Security Features Of Private Key Authentication # This method of authentication is more secure than the methods relying on shared key due to following features. Secure Storage : Hardware Security Module(HSM) or Trusted Platform Module(TPM) can be used to securely store private key and sign using it at client side. These modules make it impossible to access private key from outside. Smaller footprint : Unlike shared secret, where client secret resides on authorization server as well as client, the private key only exists on client. This reduced footprint reduces potential risks. Limited Time Validity : JWT can be set to expire after a certain duration. Similarly, client certificates can be made to expire. This makes it harder to execute replay attacks using a compromised token or certificate. Implementation Steps # Below are the high-level steps involved in using private_key_jwt authentication method: Create JWK private key Derive JWK public key for the private key. Public key JWK should be provided to Janssen Server at the time of registration Create JWT header and payload as described in section 9 of specification Sign JWT with a signing algorithm Client code that implements above steps should leverage any of the secure and trusted library that implements these functions. A non-exhaustive list of such libraries can be found at jwt.io . Psudocode implementation for Java based client using nimbus-jose-jwt library can be found here Client Configuration For Using private_key_jwt # Janssen Server clients can specify signing and encryption keys using client configuration. Clients can either specify JWKS as value or as reference URI. To specify JWKS values or reference URI, using Janssen Text-based UI(TUI) , navigate via Auth Server -> Get or add clients -> encryption/signing -> set value for Client JWKS URI or Client JWKS . tls_client_auth # During TLS handshake, the client authenticates with Janssen Server using X.509 certificate that is issued by a Certificate Authority(CA). This is mutual TLS based authentication method. Benefit of using mutual TLS based authentication is that the authorization server binds the token with the certificate. This provides enhanced security where it is possible to check that the token belongs to the intended client. This authentication mechanism is defined in mTLS specification for OAuth2 self_signed_tls_client_auth # Client authenticates with Janssen Server using self signed X.509 certificate during TLS handshake. Use of self-signed certificate removes the dependency of public key infrastructure(PKIX). This is mutual TLS based authentication method. Benefit of using mutual TLS based authentication is that the authorization server binds the token with the certificate. This provides enhanced security where it is possible to check that the token belongs to the intended client. This authentication mechanism is defined in mTLS specification for OAuth2 none # The Client does not authenticate itself at the Token Endpoint, either because it uses only the Implicit Flow (and so does not use the Token Endpoint) or because it is a Public Client with no Client Secret or other authentication mechanism. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Client Authentication"},{"location":"admin/auth-server/client-management/client-authn/#client-authentication","text":"Janssen Server supports authentication at the token endpoint for confidential clients. Confidential clients have to specify a preferred method of authentication during the client registration process. Client authentication is defined by OAuth and OpenID Connect client authentication section and in Metadata section property token_endpoint_auth_method","title":"Client Authentication"},{"location":"admin/auth-server/client-management/client-authn/#supported-authentication-methods","text":"List of supported authentication methods are listed in the response of Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration The token_endpoint_auth_methods_supported claim in the response specifies the list of all the supported methods.","title":"Supported Authentication Methods"},{"location":"admin/auth-server/client-management/client-authn/#authentication-methods","text":"Authentication methods can be broadly categorised in two categories: Shared key based Private( or asymmetric) key based While shared key based authentication is simpler to implement, it is less secure than a private key based authentication. This is primarily because when using shared key based authentication, the client secret is transmitted between the client and the authorization server. This makes the authentication vulnerable to theft attacks. There are more reasons to prefer private key over shared secret as listed in this section Characteristics table below shows side-by-side comparison of various supported authentication methods. Method Secret Not Sent in Clear Signed Only client has secret Expiry Token Binding client_secret_basic client_secret_post client_secret_jwt private_key_jwt tls_client_auth self_signed_tls_client_auth","title":"Authentication Methods"},{"location":"admin/auth-server/client-management/client-authn/#client_secret_basic","text":"Default authentication method for Janssen Server. It authenticates clients using method described in client authentication section of OAuth framework.","title":"client_secret_basic"},{"location":"admin/auth-server/client-management/client-authn/#client_secret_post","text":"client_secret_post method authenticates clients using method described in client authentication section of OAuth framework by adding client credentials in request body.","title":"client_secret_post"},{"location":"admin/auth-server/client-management/client-authn/#client_secret_jwt","text":"Like client_secret_basic and client_secret_post methods, this method is also based on a shared secret that client receives from Janssen Server. But instead of sending secret back to authorization server everytime, the client creates a JWT using an HMAC SHA algorithm where the shared secret is used as the key. This method is more secure than the client_secret_basic and client_secret_post due to following reasons: Secret which is shared once will never be transmitted again JWT can have expiration time, beyond which the same JWT can not be used. This reduces the time window for replay of the same token in case it is compromised. This method is further described in OpenId Connect specification, section 9 .","title":"client_secret_jwt"},{"location":"admin/auth-server/client-management/client-authn/#client-configuration-for-using-client_secret_jwt","text":"Janssen Server clients should specify the preferred algorithm for use with this method during client configuration. Algorithms supported by Janssen Server are listed in the response of Janssen Server's well-known configuration endpoint . From the response, the claim token_endpoint_auth_signing_alg_values_supported lists the supported algorithms. To specify preferred algorithm for a client, using Janssen Text-based UI(TUI) , navigate via Auth Server -> Get or add clients -> encryption/signing -> TODO: which exact properties.","title":"Client Configuration For Using client_secret_jwt"},{"location":"admin/auth-server/client-management/client-authn/#private_key_jwt","text":"private_key_jwt is private key based method where secret is not shared between client and authorization server. Instead, the client generates an JSON Web Token(JWT) which is shared with the Janssen Server. Upon receiving JWT singned by client's private key, the Janssen Server can validate this JWT using public keys supplied by client at the time of registration. The client can supply public keys in form of JSON Web Key Set(JWKS) or provide a URI where the client publishes its JWKS. Providing JWKS URI is preferred method as it enable easy key rotations without client having to update JWKS manualy. Check jwks and jwks_uri elements in OIDC client metadata section for more details. This authentication method is further described in OpenId Connect specification, section 9 . Janssen server implements signing and encryption mechanism following the guidelines in section 10 of OpenId Connect specification. Clients should choose the algorithm to sign and encrypt JWT as per their security requirements.","title":"private_key_jwt"},{"location":"admin/auth-server/client-management/client-authn/#security-features-of-private-key-authentication","text":"This method of authentication is more secure than the methods relying on shared key due to following features. Secure Storage : Hardware Security Module(HSM) or Trusted Platform Module(TPM) can be used to securely store private key and sign using it at client side. These modules make it impossible to access private key from outside. Smaller footprint : Unlike shared secret, where client secret resides on authorization server as well as client, the private key only exists on client. This reduced footprint reduces potential risks. Limited Time Validity : JWT can be set to expire after a certain duration. Similarly, client certificates can be made to expire. This makes it harder to execute replay attacks using a compromised token or certificate.","title":"Security Features Of Private Key Authentication"},{"location":"admin/auth-server/client-management/client-authn/#implementation-steps","text":"Below are the high-level steps involved in using private_key_jwt authentication method: Create JWK private key Derive JWK public key for the private key. Public key JWK should be provided to Janssen Server at the time of registration Create JWT header and payload as described in section 9 of specification Sign JWT with a signing algorithm Client code that implements above steps should leverage any of the secure and trusted library that implements these functions. A non-exhaustive list of such libraries can be found at jwt.io . Psudocode implementation for Java based client using nimbus-jose-jwt library can be found here","title":"Implementation Steps"},{"location":"admin/auth-server/client-management/client-authn/#client-configuration-for-using-private_key_jwt","text":"Janssen Server clients can specify signing and encryption keys using client configuration. Clients can either specify JWKS as value or as reference URI. To specify JWKS values or reference URI, using Janssen Text-based UI(TUI) , navigate via Auth Server -> Get or add clients -> encryption/signing -> set value for Client JWKS URI or Client JWKS .","title":"Client Configuration For Using private_key_jwt"},{"location":"admin/auth-server/client-management/client-authn/#tls_client_auth","text":"During TLS handshake, the client authenticates with Janssen Server using X.509 certificate that is issued by a Certificate Authority(CA). This is mutual TLS based authentication method. Benefit of using mutual TLS based authentication is that the authorization server binds the token with the certificate. This provides enhanced security where it is possible to check that the token belongs to the intended client. This authentication mechanism is defined in mTLS specification for OAuth2","title":"tls_client_auth"},{"location":"admin/auth-server/client-management/client-authn/#self_signed_tls_client_auth","text":"Client authenticates with Janssen Server using self signed X.509 certificate during TLS handshake. Use of self-signed certificate removes the dependency of public key infrastructure(PKIX). This is mutual TLS based authentication method. Benefit of using mutual TLS based authentication is that the authorization server binds the token with the certificate. This provides enhanced security where it is possible to check that the token belongs to the intended client. This authentication mechanism is defined in mTLS specification for OAuth2","title":"self_signed_tls_client_auth"},{"location":"admin/auth-server/client-management/client-authn/#none","text":"The Client does not authenticate itself at the Token Endpoint, either because it uses only the Implicit Flow (and so does not use the Token Endpoint) or because it is a Public Client with no Client Secret or other authentication mechanism.","title":"none"},{"location":"admin/auth-server/client-management/client-authn/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/client-management/client-configuration/","tags":["administration","client","configuration"],"text":"Client Configuration # This document covers some important configuration elements of client configuration. How these elements are configured for a client has an impact on aspects like client security. Redirect URI # Redirect URI is the most basic and at times the only parameter needed for registering a client. It is defined in OAuth framework and OpenId Connect specification . The client can register a list of URIs as a value for redirect URI parameter. Redirect URI can be any valid URI . Redirect URI should be an absolute URI . For instance, URI should not have wildcard characters. As recommended here Redirect Regex : Janssen Server enables clients to allow redirect URIs that conform to a regular expression(regex) pattern. While validating redirect URIs received in an incoming request, the Janssen Server first looks at the list of statically registered URI as part of Redirect URIs and then checks if any of the redirect URI from the request matches with the regex provided by the client. Great care should be exercised when using regex to ensure that it accurately matches with the intended patterns only. This feature can be turned on or off via feature flag When using client type as web , the redirect URI generally takes the form of <schema>://<host-name>:<port>/<path> . It must use https schema. The exception to schema rule is made when localhost or loopback ip 127.0.0.1 is used as the hostname. Prefer to use the loopback IP instead of localhost as hostname to facilitate local testing as recommended in OAuth 2.0 native app specification section 8.3 Janssen Server supports all methods of redirection used by native apps . Use of Private-Use URI (or custom URL) is supported by allowing redirect URI to take the form of reverse DNS name, for example, com.example.app . URLs for loopback interface redirection are also supported. When the client registers multiple redirect URIs (Janssen Server accepts a list of URIs separated by space), be aware that Janssen Server will use these, one by one for validation purposes and the validation stops at the first match. If there are multiple registered redirect_uris, and the client is using pairwise subject identifiers, the Client MUST also register a sector_identifier_uri . This is required to keep the pairwise subject identifiers consistent across various domains under the same administrative control. Refer to pairwise algorithm section of OpenId Connect specification for more details. Cryptography # Janssen Server allows clients to configure static set of keys using JWKS or specify a URI as JWKS URI where client is exposing its key set. For client who can host keys and expose a URI, it is recommended to use JWKS URI instead of static JWKS key set. Using JWKS URI enables client to rotate its cryptographic keys without having to change the client configuration on Janssen Server. Available Algorithms for Encryption and Signing # The client can select algorithms for cryptographic and encryption during client configuration. Janssen Server supports a list of algorithms as listed in response of Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration Claims that list supported algorithms: id_token_encryption_alg_values_supported id_token_signing_alg_values_supported userinfo_encryption_enc_values_supported userinfo_signing_alg_values_supported userinfo_encryption_alg_values_supported access_token_signing_alg_values_supported request_object_signing_alg_values_supported request_object_encryption_alg_values_supported request_object_encryption_alg_values_supported Recommendations # RSA keys with a minimum 2048 bits if using RSA cryptography Elliptic Curve keys with a minimum of 160 bits if using Elliptic Curve cryptography Client secret should have a minimum of 128 bits if using symmetric key cryptography Sign with PS256 (RSASSA-PSS using SHA-256 and MGF1 with SHA-256) or ES256 (ECDSA using P-256 and SHA-256) Grants # Supported Grant Types # Grant defines how a client interacts with the token endpoint to get the tokens. Janssen Server supports grant types defined by OAuth 2.0, OAuth 2.1, and extension grants defined by other RFCs. A complete list of supported grant types can be found in the response of the Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration Claim grant_types_supported lists all the supported grant types in the response. Configuring Grant Type For Client # Janssen Server will allow requests from a client with grant types that the client is configured to use. Client can be configured to use or not use certain grant types using CLI or TUI tools. Recommendations For Using Grant Types and Flows # Developers should use the grant types based on the ability of the client to protect the client credentials as well as the security profile of the deployment. If the client software is a server-side component that can securely store the client credentials, such a client is called a confidential client. As opposed to that, if the application requesting access token is entirely running on a browser, where it is not possible to store client credentials securely, such a client is called a public client. Along with the grant type to be used, developers also need to choose which flow should be used to get the required tokens. The table below shows grant types and flows that should be used for various use-cases. Client Type Recommended Grant Type Flow Backend App (Example: batch processes) that need to access its own resources client_credentials Client Credentials Server backend of a web-application needs access token authorization_code Authorization Code Web-application that needs user information via id_token on browser and access token on backend authorization_code Hybrid Flow Browser based single page applications or Mobile applications authorization_code Authorization Code with PKCE Browser based single page applications or Mobile applications that only intend to get id_token - Implicit Flow with Form Post Input constrained devices (Example: TV) urn:ietf:params:oauth:grant-type:device_code Device Flow Highly trusted applications where redirect based flows are not feasible to implement password Resource Owner Password Flow Note Certain grant types should not be used together. For example, implicit flow with hybrid flow. Or using authorization code flow with hybrid flow. This allows a downgrade attack from more secure flow to less secure flow. Pre-authorization # If the OAuth authorization prompt should not be displayed to end users, set this field to True. This is useful for SSO to internal clients (not a third party) where there is no need to prompt the person to approve the release of information. Response Types # Client sends response_type request parameter when sending request to authorization endpoint. Using this parameter, the client informs the authorization server of the desired grant. Response type parameter is defined in the OAuth 2.0 framework. Janssen Server supports response types defined by OAuth 2.0, OAuth 2.1.The complete list of supported response types can be found in the response of the Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration Claim response_types_supported lists all the supported grant types in the response. When registering client using dynamic client registration, if the response_type parameter is not specified, it'll default to code . Response Type Recommendations # Avoid using response type token . This response type is deprecated by OAuth 2.1. Grant types allowed for a client determines which response types are permitted in authorization requests. Make sure appropriate grant types are configured in Janssen Server client configuration. Janssen Server will reject authorization requests containing response types not permitted for respective client. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Configuration"},{"location":"admin/auth-server/client-management/client-configuration/#client-configuration","text":"This document covers some important configuration elements of client configuration. How these elements are configured for a client has an impact on aspects like client security.","title":"Client Configuration"},{"location":"admin/auth-server/client-management/client-configuration/#redirect-uri","text":"Redirect URI is the most basic and at times the only parameter needed for registering a client. It is defined in OAuth framework and OpenId Connect specification . The client can register a list of URIs as a value for redirect URI parameter. Redirect URI can be any valid URI . Redirect URI should be an absolute URI . For instance, URI should not have wildcard characters. As recommended here Redirect Regex : Janssen Server enables clients to allow redirect URIs that conform to a regular expression(regex) pattern. While validating redirect URIs received in an incoming request, the Janssen Server first looks at the list of statically registered URI as part of Redirect URIs and then checks if any of the redirect URI from the request matches with the regex provided by the client. Great care should be exercised when using regex to ensure that it accurately matches with the intended patterns only. This feature can be turned on or off via feature flag When using client type as web , the redirect URI generally takes the form of <schema>://<host-name>:<port>/<path> . It must use https schema. The exception to schema rule is made when localhost or loopback ip 127.0.0.1 is used as the hostname. Prefer to use the loopback IP instead of localhost as hostname to facilitate local testing as recommended in OAuth 2.0 native app specification section 8.3 Janssen Server supports all methods of redirection used by native apps . Use of Private-Use URI (or custom URL) is supported by allowing redirect URI to take the form of reverse DNS name, for example, com.example.app . URLs for loopback interface redirection are also supported. When the client registers multiple redirect URIs (Janssen Server accepts a list of URIs separated by space), be aware that Janssen Server will use these, one by one for validation purposes and the validation stops at the first match. If there are multiple registered redirect_uris, and the client is using pairwise subject identifiers, the Client MUST also register a sector_identifier_uri . This is required to keep the pairwise subject identifiers consistent across various domains under the same administrative control. Refer to pairwise algorithm section of OpenId Connect specification for more details.","title":"Redirect URI"},{"location":"admin/auth-server/client-management/client-configuration/#cryptography","text":"Janssen Server allows clients to configure static set of keys using JWKS or specify a URI as JWKS URI where client is exposing its key set. For client who can host keys and expose a URI, it is recommended to use JWKS URI instead of static JWKS key set. Using JWKS URI enables client to rotate its cryptographic keys without having to change the client configuration on Janssen Server.","title":"Cryptography"},{"location":"admin/auth-server/client-management/client-configuration/#available-algorithms-for-encryption-and-signing","text":"The client can select algorithms for cryptographic and encryption during client configuration. Janssen Server supports a list of algorithms as listed in response of Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration Claims that list supported algorithms: id_token_encryption_alg_values_supported id_token_signing_alg_values_supported userinfo_encryption_enc_values_supported userinfo_signing_alg_values_supported userinfo_encryption_alg_values_supported access_token_signing_alg_values_supported request_object_signing_alg_values_supported request_object_encryption_alg_values_supported request_object_encryption_alg_values_supported","title":"Available Algorithms for Encryption and Signing"},{"location":"admin/auth-server/client-management/client-configuration/#recommendations","text":"RSA keys with a minimum 2048 bits if using RSA cryptography Elliptic Curve keys with a minimum of 160 bits if using Elliptic Curve cryptography Client secret should have a minimum of 128 bits if using symmetric key cryptography Sign with PS256 (RSASSA-PSS using SHA-256 and MGF1 with SHA-256) or ES256 (ECDSA using P-256 and SHA-256)","title":"Recommendations"},{"location":"admin/auth-server/client-management/client-configuration/#grants","text":"","title":"Grants"},{"location":"admin/auth-server/client-management/client-configuration/#supported-grant-types","text":"Grant defines how a client interacts with the token endpoint to get the tokens. Janssen Server supports grant types defined by OAuth 2.0, OAuth 2.1, and extension grants defined by other RFCs. A complete list of supported grant types can be found in the response of the Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration Claim grant_types_supported lists all the supported grant types in the response.","title":"Supported Grant Types"},{"location":"admin/auth-server/client-management/client-configuration/#configuring-grant-type-for-client","text":"Janssen Server will allow requests from a client with grant types that the client is configured to use. Client can be configured to use or not use certain grant types using CLI or TUI tools.","title":"Configuring Grant Type For Client"},{"location":"admin/auth-server/client-management/client-configuration/#recommendations-for-using-grant-types-and-flows","text":"Developers should use the grant types based on the ability of the client to protect the client credentials as well as the security profile of the deployment. If the client software is a server-side component that can securely store the client credentials, such a client is called a confidential client. As opposed to that, if the application requesting access token is entirely running on a browser, where it is not possible to store client credentials securely, such a client is called a public client. Along with the grant type to be used, developers also need to choose which flow should be used to get the required tokens. The table below shows grant types and flows that should be used for various use-cases. Client Type Recommended Grant Type Flow Backend App (Example: batch processes) that need to access its own resources client_credentials Client Credentials Server backend of a web-application needs access token authorization_code Authorization Code Web-application that needs user information via id_token on browser and access token on backend authorization_code Hybrid Flow Browser based single page applications or Mobile applications authorization_code Authorization Code with PKCE Browser based single page applications or Mobile applications that only intend to get id_token - Implicit Flow with Form Post Input constrained devices (Example: TV) urn:ietf:params:oauth:grant-type:device_code Device Flow Highly trusted applications where redirect based flows are not feasible to implement password Resource Owner Password Flow Note Certain grant types should not be used together. For example, implicit flow with hybrid flow. Or using authorization code flow with hybrid flow. This allows a downgrade attack from more secure flow to less secure flow.","title":"Recommendations For Using Grant Types and Flows"},{"location":"admin/auth-server/client-management/client-configuration/#pre-authorization","text":"If the OAuth authorization prompt should not be displayed to end users, set this field to True. This is useful for SSO to internal clients (not a third party) where there is no need to prompt the person to approve the release of information.","title":"Pre-authorization"},{"location":"admin/auth-server/client-management/client-configuration/#response-types","text":"Client sends response_type request parameter when sending request to authorization endpoint. Using this parameter, the client informs the authorization server of the desired grant. Response type parameter is defined in the OAuth 2.0 framework. Janssen Server supports response types defined by OAuth 2.0, OAuth 2.1.The complete list of supported response types can be found in the response of the Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration Claim response_types_supported lists all the supported grant types in the response. When registering client using dynamic client registration, if the response_type parameter is not specified, it'll default to code .","title":"Response Types"},{"location":"admin/auth-server/client-management/client-configuration/#response-type-recommendations","text":"Avoid using response type token . This response type is deprecated by OAuth 2.1. Grant types allowed for a client determines which response types are permitted in authorization requests. Make sure appropriate grant types are configured in Janssen Server client configuration. Janssen Server will reject authorization requests containing response types not permitted for respective client. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Response Type Recommendations"},{"location":"admin/auth-server/client-management/client-schema/","tags":["administration","client","schema"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Client Schema"},{"location":"admin/auth-server/client-management/client-schema/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/auth-server/client-management/client-schema/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/client-management/client-schema/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/client-management/client-scripts/","tags":["administration","client","scripts"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Client Scripts"},{"location":"admin/auth-server/client-management/client-scripts/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/auth-server/client-management/client-scripts/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/client-management/client-scripts/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/client-management/sector-identifiers/","tags":["administration","client","sector-identifier"],"text":"Sector Identifier # Janssen Server supports sector identifier URI and pairwise subject IDs for OpenId Connect relying party. As defined in OpenId Connect core specification , the sector identifiers value is used to derive pairwise subject IDs. Janssen Server also supports Sector Identifier URI as part of client configuration. Sector Identifier URI when used with pairwise subject type, enables a group of websites under the same administrative control to receive the same subject identifiers. Sector Identifier URI also allows clients to change the host component of the redirect URI and still keep the subject identifiers unchanged. Configuring Sector Identifier # Janssen Server runs below mentioned checks on value configured for Sector Identifier URI : URI should have a https schema URI should be accessible to Janssen Server and the response should be a valid JSON array of redirect URIs All redirect URI received in response must exist in the list of the redirect URI provided by the client at the registration time Note If the client can not host an endpoint that will be reachable by Sector Identifier URI , then in order to use the pairwise subject IDs, the client must supply a Redirect URI list where URIs have the same host component. The host component value will be used as the sector identifier. Configuration With Pairwise Subject Type # How sector identifier value is used to derive value for the pairwise subject identifier is detailed in the OIDC core specification . Janssen Server allows clients/RPs to set subject type. The public subject type is the default and the client/RP can choose to use the pairwise type. When using TUI, this can be configured from the client configuration screen below: When the pairwise subject type is selected, the value for Sector Identifier URI can be left blank if all redirect URIs have the same host component. If the list of redirect URIs contains multiple host names, providing a Sector Identifier URI is a must. When Sector Identifier URI is provided, the host component of the URI is used as a sector identifier. Configuration Properties # Janssen Server allows customization concerning sector identifiers using the properties below: sectorIdentifierCacheLifetimeInMinutes shareSubjectIdBetweenClientsWithSameSectorId Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Sector Identifiers"},{"location":"admin/auth-server/client-management/sector-identifiers/#sector-identifier","text":"Janssen Server supports sector identifier URI and pairwise subject IDs for OpenId Connect relying party. As defined in OpenId Connect core specification , the sector identifiers value is used to derive pairwise subject IDs. Janssen Server also supports Sector Identifier URI as part of client configuration. Sector Identifier URI when used with pairwise subject type, enables a group of websites under the same administrative control to receive the same subject identifiers. Sector Identifier URI also allows clients to change the host component of the redirect URI and still keep the subject identifiers unchanged.","title":"Sector Identifier"},{"location":"admin/auth-server/client-management/sector-identifiers/#configuring-sector-identifier","text":"Janssen Server runs below mentioned checks on value configured for Sector Identifier URI : URI should have a https schema URI should be accessible to Janssen Server and the response should be a valid JSON array of redirect URIs All redirect URI received in response must exist in the list of the redirect URI provided by the client at the registration time Note If the client can not host an endpoint that will be reachable by Sector Identifier URI , then in order to use the pairwise subject IDs, the client must supply a Redirect URI list where URIs have the same host component. The host component value will be used as the sector identifier.","title":"Configuring Sector Identifier"},{"location":"admin/auth-server/client-management/sector-identifiers/#configuration-with-pairwise-subject-type","text":"How sector identifier value is used to derive value for the pairwise subject identifier is detailed in the OIDC core specification . Janssen Server allows clients/RPs to set subject type. The public subject type is the default and the client/RP can choose to use the pairwise type. When using TUI, this can be configured from the client configuration screen below: When the pairwise subject type is selected, the value for Sector Identifier URI can be left blank if all redirect URIs have the same host component. If the list of redirect URIs contains multiple host names, providing a Sector Identifier URI is a must. When Sector Identifier URI is provided, the host component of the URI is used as a sector identifier.","title":"Configuration With Pairwise Subject Type"},{"location":"admin/auth-server/client-management/sector-identifiers/#configuration-properties","text":"Janssen Server allows customization concerning sector identifiers using the properties below: sectorIdentifierCacheLifetimeInMinutes shareSubjectIdBetweenClientsWithSameSectorId","title":"Configuration Properties"},{"location":"admin/auth-server/client-management/sector-identifiers/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/client-management/software-statements/","tags":["administration","client","software statements"],"text":"Software Statements # Software Statement is defined by OAuth dynamic client registration RFC 7591 as A digitally signed or MACed JSON Web Token (JWT) that asserts metadata values about the client software. Janssen Server supports usage of software statements during dynamic client registration. Use During Dynamic Client Registration # Janssen Server supports dynamic client registration using software statements. It can be used as software statements or as software statement assertions (SSA) to register client dynamically. Janssen Server also provides SSA endpoint to create and manage SSAs on the server. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Software Statements"},{"location":"admin/auth-server/client-management/software-statements/#software-statements","text":"Software Statement is defined by OAuth dynamic client registration RFC 7591 as A digitally signed or MACed JSON Web Token (JWT) that asserts metadata values about the client software. Janssen Server supports usage of software statements during dynamic client registration.","title":"Software Statements"},{"location":"admin/auth-server/client-management/software-statements/#use-during-dynamic-client-registration","text":"Janssen Server supports dynamic client registration using software statements. It can be used as software statements or as software statement assertions (SSA) to register client dynamically. Janssen Server also provides SSA endpoint to create and manage SSAs on the server.","title":"Use During Dynamic Client Registration"},{"location":"admin/auth-server/client-management/software-statements/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/crypto/","tags":["administration","auth-server","cryptography"],"text":"Overview # Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/auth-server/crypto/#overview","text":"Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/auth-server/crypto/key-generation/","tags":["administration","auth-server","cryptography","key generation"],"text":"Key Generation # Generating Cryptographic Keys # The Jans Server is compatible with the Java KeyGenerator to create new cryptographic keys if needed. Backup # Backup jansConfWebKeys attribute data of jansAppConf entity from persistence. Location of this attribute is: o=jans > ou=configuration > ou=jans-auth Backup jans-auth-keys.p12 from /etc/certs/ [N.B] Below if Keystore location is anywhere except /etc/certs/ no need to backup. Key Generate # To get KeyGenerator, run the following command inside the terminal. You can put expiration according to your own policy. For testing purpose we are keeping it 2 days. /opt/jre/bin/java -Dlog4j.defaultInitOverride=true -cp /opt/dist/jans/jans-auth-client-jar-with-dependencies.jar io.jans.as.client.util.KeyGenerator -keystore /etc/certs/jans-auth-keys.p12 -keypasswd <Password> -sig_keys RS256 RS384 -enc_keys RSA1_5 RSA-OAEP -key_ops_type ALL -dnname \"CN=jansAuth CA Certificates\" -expiration 2 > /etc/certs/jans-auth-keys.json Note -key_ops_type ALL parameter which sets purpose of the keys generated by key generator. Possible values are: \"connect\" - connect keys (that is what we already have) \"ssa\" - ssa keys which has expiration set to 50 years (it ignores \"expiration\" parameters) \"all\" - generate both \"connect\" and \"ssa\" keys. Usually should be done during initial setup. Lets see our newly generated crypto keys keytool -list -v -keystore /etc/certs/jans-auth-keys.p12 -storetype pkcs12 -storepass <password> The jans implementation of KeyGenerator accepts the following arguments: Argument Description -dnname DN of certificate issuer -key_length Length of hash key -enc_keys Encryption keys to generate (For example: RSA_OAEP, RSA1_5) -expiration Expiration in days -expiration_hours Expiration in hours -h Show help -key_ops_type Purpose of the key, possible values: connect, ssa, all -keypasswd Key Store password -keystore Key Store file (such as /etc/certs/jans-auth-keys.p12) -sig_keys Signature keys to generate. (For example: RS256 RS384 RS512 ES256 ES384 ES512 PS256 PS384 PS512) _keyId Key name suffix -test_prop_file Test property file used for test purpose only -ox11 oxEleven Generate Key Endpoint. -at oxEleven Access Token","title":"Key Rotation and Generation"},{"location":"admin/auth-server/crypto/key-generation/#key-generation","text":"","title":"Key Generation"},{"location":"admin/auth-server/crypto/key-generation/#generating-cryptographic-keys","text":"The Jans Server is compatible with the Java KeyGenerator to create new cryptographic keys if needed.","title":"Generating Cryptographic Keys"},{"location":"admin/auth-server/crypto/key-generation/#backup","text":"Backup jansConfWebKeys attribute data of jansAppConf entity from persistence. Location of this attribute is: o=jans > ou=configuration > ou=jans-auth Backup jans-auth-keys.p12 from /etc/certs/ [N.B] Below if Keystore location is anywhere except /etc/certs/ no need to backup.","title":"Backup"},{"location":"admin/auth-server/crypto/key-generation/#key-generate","text":"To get KeyGenerator, run the following command inside the terminal. You can put expiration according to your own policy. For testing purpose we are keeping it 2 days. /opt/jre/bin/java -Dlog4j.defaultInitOverride=true -cp /opt/dist/jans/jans-auth-client-jar-with-dependencies.jar io.jans.as.client.util.KeyGenerator -keystore /etc/certs/jans-auth-keys.p12 -keypasswd <Password> -sig_keys RS256 RS384 -enc_keys RSA1_5 RSA-OAEP -key_ops_type ALL -dnname \"CN=jansAuth CA Certificates\" -expiration 2 > /etc/certs/jans-auth-keys.json Note -key_ops_type ALL parameter which sets purpose of the keys generated by key generator. Possible values are: \"connect\" - connect keys (that is what we already have) \"ssa\" - ssa keys which has expiration set to 50 years (it ignores \"expiration\" parameters) \"all\" - generate both \"connect\" and \"ssa\" keys. Usually should be done during initial setup. Lets see our newly generated crypto keys keytool -list -v -keystore /etc/certs/jans-auth-keys.p12 -storetype pkcs12 -storepass <password> The jans implementation of KeyGenerator accepts the following arguments: Argument Description -dnname DN of certificate issuer -key_length Length of hash key -enc_keys Encryption keys to generate (For example: RSA_OAEP, RSA1_5) -expiration Expiration in days -expiration_hours Expiration in hours -h Show help -key_ops_type Purpose of the key, possible values: connect, ssa, all -keypasswd Key Store password -keystore Key Store file (such as /etc/certs/jans-auth-keys.p12) -sig_keys Signature keys to generate. (For example: RS256 RS384 RS512 ES256 ES384 ES512 PS256 PS384 PS512) _keyId Key name suffix -test_prop_file Test property file used for test purpose only -ox11 oxEleven Generate Key Endpoint. -at oxEleven Access Token","title":"Key Generate"},{"location":"admin/auth-server/crypto/key-storage/","tags":["administration","auth-server","cryptography","key-storage"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Key Storage"},{"location":"admin/auth-server/crypto/key-storage/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/auth-server/crypto/key-storage/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/crypto/key-storage/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/crypto/keys/","tags":["administration","auth-server","cryptography","keys"],"text":"Overview # Janssen uses keys for signing and encryption, primarily concerning JSON documents. Janssen supports several signing and encryption algorithms in salted and unsalted, to fit a variety of business needs. If other algorithms are necessary, Janssen supports them via interception scripts. Keys # A key is a piece of information, usually a string of numbers or letters that are stored in a file, which, when processed through a cryptographic algorithm, can encode or decode cryptographic data. In Janssen we use keys for creating token like id_token , access_token . access_token : Access tokens are what the OAuth client uses to make requests to an API. The access token is meant to be read and validated by the API. id_token : An ID token is an artifact that proves that the user has been authenticated. It was introduced by OpenID Connect (OIDC) , an open standard for authentication used by Janssen. It contains information about what happened when a user authenticated, and is intended to be read by the OAuth client. The ID token may also contain information about the user such as their name or email address, although that is not a requirement of an ID token. Jans server JSON objects of public key # Gets list of JSON Web Key (JWK) used by server. JWK is a JSON data structure that represents a set of public keys as a JSON object. Browse below endpoint to know more about public keys used by server. https://<your_server>/jans-auth/restv1/jwks Let's see some example of JWT public keys used in janssen. Example-1 # The \"kty\" (Key Type) of this key is RSA. This key is \"use\" (Public Key Use) for \"sig\" (Signature) on data. The \"alg\" (Algorithm) intended with this key is \"RS256\". { \"name\" : \"Connect RS256 Sign Key\" \"descr\" : \"Signature Key: RSA RSASSA-PKCS1-v1_5 using SHA-256\", ... } Example-2 # The \"kty\" (Key Type) of this key is RSA. This key is \"use\" (Public Key Use) for \"sig\" (Signature) on data. The \"alg\" (Algorithm) intended with this key is \"RS384\". { \"name\" : \"Connect RS384 Sign Key\", \"descr\" : \"Signature Key: RSA RSASSA-PKCS1-v1_5 using SHA-384\", ... } Example-3 # The \"kty\" (Key Type) of this key is RSA. This key is \"use\" (Public Key Use) for signature (\"sig\") on data. The \"alg\" (Algorithm) intended with this key is \"RS512\". { \"name\" : \"Connect RS512 Sign Key\", \"descr\" : \"Signature Key: RSA RSASSA-PKCS1-v1_5 using SHA-512\", ... } Example-4 # The \"kty\" (Key Type) of this key is \"EC\" (Ellliptic Curve). This key is \"use\" (Public Key Use) for signature (\"sig\") on data. The \"alg\" (Algorithm) intended with this key is \"ES256\". { \"name\" : \"Connect ES256 Sign Key\", \"descr\" : \"Signature Key: ECDSA using P-256 (secp256r1) and SHA-256\", ... } Example-5 # The \"kty\" (Key Type) of this key is \"EC\" (Ellliptic Curve). This key is \"use\" (Public Key Use) for signature (\"sig\") on data. The \"alg\" (Algorithm) intended with this key is \"ES256K\". { \"name\" : \"Connect ES256 Sign Key\", \"descr\" : \"Signature Key: ECDSA using P-256 (secp256r1) and SHA-256\", ... } Example-6 # The \"kty\" (Key Type) of this key is \"EC\" (Ellliptic Curve). This key is \"use\" (Public Key Use) for signature (\"sig\") on data. The \"alg\" (Algorithm) intended with this key is \"ES256K\". { \"name\" : \"Connect ES384 Sign Key\", \"descr\" : \"Signature Key: ECDSA using P-384 (secp384r1) and SHA-384\", ... } Example-7 # The \"kty\" (Key Type) of this key is \"EC\" (Ellliptic Curve). This key is \"use\" (Public Key Use) for signature (\"sig\") on data. The \"alg\" (Algorithm) intended with this key is \"ES512\". { \"name\" : \"Connect ES512 Sign Key\", \"descr\" : \"Signature Key: ECDSA using P-521 (secp521r1) and SHA-512\", ... } Example-8 # The \"kty\" (Key Type) of this key is \"RSA\". This key is \"use\" (Public Key Use) for signature (\"sig\") on data. The \"alg\" (Algorithm) intended with this key is \"PS256\". { \"name\" : \"Connect PS256 Sign Key\", \"descr\" : \"Signature Key: RSASSA-PSS using SHA-256 and MGF1 with SHA-256\", ... } Example-9 # The \"kty\" (Key Type) of this key is \"RSA\". This key is \"use\" (Public Key Use) for signature (\"sig\") on data. The \"alg\" (Algorithm) intended with this key is \"PS384\". { \"name\" : \"Connect PS384 Sign Key\", \"descr\" : \"Signature Key: RSASSA-PSS using SHA-384 and MGF1 with SHA-384\", ... } Example-10 # The \"kty\" (Key Type) of this key is \"RSA\". This key is \"use\" (Public Key Use) for signature (\"sig\") on data. The \"alg\" (Algorithm) intended with this key is \"PS512\". { \"name\" : \"Connect PS512 Sign Key\", \"descr\" : \"Signature Key: RSASSA-PSS using SHA-512 and MGF1 with SHA-512\", ... } Example-11 # The \"kty\" (Key Type) of this key is \"RSA\". This key is \"use\" (Public Key Use) for \"enc\" (encryption) on data. The \"alg\" (Algorithm) intended with this key is \"RSA1_5\". ``commandLine { \"name\" : \"Connect RSA1_5 Encryption Key\", \"descr\" : \"Encryption Key: RSAES-PKCS1-v1_5\", ... } ### Example-12 The \"kty\" (Key Type) of this key is \"RSA\". This key is \"use\" (Public Key Use) for \"enc\" (encryption) on data. The \"alg\" (Algorithm) intended with this key is \"RSA-OAEP\". ```commandLine { \"name\" : \"Connect RSA-OAEP Encryption Key\", \"descr\" : \"Encryption Key: RSAES OAEP using default parameters\", ... } Crypto Supported # Depending on the transport through which the messages are sent, the integrity of the message might not be guaranteed and the originator of the message might not be authenticated. To mitigate these risks, ID Token, UserInfo Response, Request Object, and Client Authentication JWT values can utilize JSON Web Signature (JWS) [JWS] to sign their contents. To achieve message confidentiality, these values can also use JSON Web Encryption (JWE) [JWE] to encrypt their contents. Signing algorithms # Signing or Signature algorithm is a cryptographic mechanism used to verify the authenticity and integrity of digital data. We may consider it as a digital version of the ordinary handwritten signatures, but with higher levels of complexity and security. Let's see some signing key algorithms Name Kty Use Alg RS256 Sign Key RSA sig RS256 RS384 Sign Key RSA sig RS384 RS512 Sign Key RSA sig RS512 ES256 Sign Key EC sig ES256 ES256 Sign Key EC sig ES256K ES384 Sign Key EC sig ES384 ES512 Sign Key EC sig ES384 PS256 Sign Key RSA sig PS256 PS384 sign Key RSA sig PS384 PS512 sign Key RSA sig PS512 Encryption algorithms # In cryptography, encryption is the process of encoding information. This process converts the original representation of the information, known as plaintext, into an alternative form known as ciphertext. Ideally, only authorized parties can decipher a ciphertext back to plaintext and access the original information. Let's see some encryption keys. Name Kty Use Alg RSA1_5 Encryption key RSA enc RSA1_5 RSA-OAEP Encryption Key RSA enc RSA-OAEP ECDH-ES Encryption Key CE enc ECDH-ES RSA Key Formats # PKCS#8 encrypted private key \"EncryptedPrivateKeyInfo\" (default for private keys) PKCS#1 \"RSAPublicKey\" (default for public keys) PKCS#8 unencrypted \"PrivateKeyInfo\" PKCS#1 unencrypted \"RSAPrivateKey\" (OpenSSL private key file format) X.509 \"SubjectPublicKeyInfo\" (OpenSSL public key file format) The above key values can be passed as (a) a binary DER-encoded ASN.1 file, (b) a text file in PEM format, (c) a string containing the key in PEM format . Also supported are RSA private and public keys represented in XML format to XKMS 2.0 [XKMS] and JSON Web Key (JWK) format [JWK] . For more details, see Key Storage Format . To know more about RSA keyformat browse here Janssen Keystore Formats # In Janssen we use keystore formats PKCS12 . Which is Encrypted private key formats. In Janssen currently using an extension of p12 . We also have pkcs12 , pfx . We can store private keys, secret keys and certificates on this type. You can find jans-auth-keys.p12 in /etc/certs/ To see the private key you can use bellow command keytool -list -v -keystore /etc/certs/jans-auth-keys.p12 -storetype pkcs12 -storepass <password>","title":"Keys"},{"location":"admin/auth-server/crypto/keys/#overview","text":"Janssen uses keys for signing and encryption, primarily concerning JSON documents. Janssen supports several signing and encryption algorithms in salted and unsalted, to fit a variety of business needs. If other algorithms are necessary, Janssen supports them via interception scripts.","title":"Overview"},{"location":"admin/auth-server/crypto/keys/#keys","text":"A key is a piece of information, usually a string of numbers or letters that are stored in a file, which, when processed through a cryptographic algorithm, can encode or decode cryptographic data. In Janssen we use keys for creating token like id_token , access_token . access_token : Access tokens are what the OAuth client uses to make requests to an API. The access token is meant to be read and validated by the API. id_token : An ID token is an artifact that proves that the user has been authenticated. It was introduced by OpenID Connect (OIDC) , an open standard for authentication used by Janssen. It contains information about what happened when a user authenticated, and is intended to be read by the OAuth client. The ID token may also contain information about the user such as their name or email address, although that is not a requirement of an ID token.","title":"Keys"},{"location":"admin/auth-server/crypto/keys/#jans-server-json-objects-of-public-key","text":"Gets list of JSON Web Key (JWK) used by server. JWK is a JSON data structure that represents a set of public keys as a JSON object. Browse below endpoint to know more about public keys used by server. https://<your_server>/jans-auth/restv1/jwks Let's see some example of JWT public keys used in janssen.","title":"Jans server JSON objects of public key"},{"location":"admin/auth-server/crypto/keys/#example-1","text":"The \"kty\" (Key Type) of this key is RSA. This key is \"use\" (Public Key Use) for \"sig\" (Signature) on data. The \"alg\" (Algorithm) intended with this key is \"RS256\". { \"name\" : \"Connect RS256 Sign Key\" \"descr\" : \"Signature Key: RSA RSASSA-PKCS1-v1_5 using SHA-256\", ... }","title":"Example-1"},{"location":"admin/auth-server/crypto/keys/#example-2","text":"The \"kty\" (Key Type) of this key is RSA. This key is \"use\" (Public Key Use) for \"sig\" (Signature) on data. The \"alg\" (Algorithm) intended with this key is \"RS384\". { \"name\" : \"Connect RS384 Sign Key\", \"descr\" : \"Signature Key: RSA RSASSA-PKCS1-v1_5 using SHA-384\", ... }","title":"Example-2"},{"location":"admin/auth-server/crypto/keys/#example-3","text":"The \"kty\" (Key Type) of this key is RSA. This key is \"use\" (Public Key Use) for signature (\"sig\") on data. The \"alg\" (Algorithm) intended with this key is \"RS512\". { \"name\" : \"Connect RS512 Sign Key\", \"descr\" : \"Signature Key: RSA RSASSA-PKCS1-v1_5 using SHA-512\", ... }","title":"Example-3"},{"location":"admin/auth-server/crypto/keys/#example-4","text":"The \"kty\" (Key Type) of this key is \"EC\" (Ellliptic Curve). This key is \"use\" (Public Key Use) for signature (\"sig\") on data. The \"alg\" (Algorithm) intended with this key is \"ES256\". { \"name\" : \"Connect ES256 Sign Key\", \"descr\" : \"Signature Key: ECDSA using P-256 (secp256r1) and SHA-256\", ... }","title":"Example-4"},{"location":"admin/auth-server/crypto/keys/#example-5","text":"The \"kty\" (Key Type) of this key is \"EC\" (Ellliptic Curve). This key is \"use\" (Public Key Use) for signature (\"sig\") on data. The \"alg\" (Algorithm) intended with this key is \"ES256K\". { \"name\" : \"Connect ES256 Sign Key\", \"descr\" : \"Signature Key: ECDSA using P-256 (secp256r1) and SHA-256\", ... }","title":"Example-5"},{"location":"admin/auth-server/crypto/keys/#example-6","text":"The \"kty\" (Key Type) of this key is \"EC\" (Ellliptic Curve). This key is \"use\" (Public Key Use) for signature (\"sig\") on data. The \"alg\" (Algorithm) intended with this key is \"ES256K\". { \"name\" : \"Connect ES384 Sign Key\", \"descr\" : \"Signature Key: ECDSA using P-384 (secp384r1) and SHA-384\", ... }","title":"Example-6"},{"location":"admin/auth-server/crypto/keys/#example-7","text":"The \"kty\" (Key Type) of this key is \"EC\" (Ellliptic Curve). This key is \"use\" (Public Key Use) for signature (\"sig\") on data. The \"alg\" (Algorithm) intended with this key is \"ES512\". { \"name\" : \"Connect ES512 Sign Key\", \"descr\" : \"Signature Key: ECDSA using P-521 (secp521r1) and SHA-512\", ... }","title":"Example-7"},{"location":"admin/auth-server/crypto/keys/#example-8","text":"The \"kty\" (Key Type) of this key is \"RSA\". This key is \"use\" (Public Key Use) for signature (\"sig\") on data. The \"alg\" (Algorithm) intended with this key is \"PS256\". { \"name\" : \"Connect PS256 Sign Key\", \"descr\" : \"Signature Key: RSASSA-PSS using SHA-256 and MGF1 with SHA-256\", ... }","title":"Example-8"},{"location":"admin/auth-server/crypto/keys/#example-9","text":"The \"kty\" (Key Type) of this key is \"RSA\". This key is \"use\" (Public Key Use) for signature (\"sig\") on data. The \"alg\" (Algorithm) intended with this key is \"PS384\". { \"name\" : \"Connect PS384 Sign Key\", \"descr\" : \"Signature Key: RSASSA-PSS using SHA-384 and MGF1 with SHA-384\", ... }","title":"Example-9"},{"location":"admin/auth-server/crypto/keys/#example-10","text":"The \"kty\" (Key Type) of this key is \"RSA\". This key is \"use\" (Public Key Use) for signature (\"sig\") on data. The \"alg\" (Algorithm) intended with this key is \"PS512\". { \"name\" : \"Connect PS512 Sign Key\", \"descr\" : \"Signature Key: RSASSA-PSS using SHA-512 and MGF1 with SHA-512\", ... }","title":"Example-10"},{"location":"admin/auth-server/crypto/keys/#example-11","text":"The \"kty\" (Key Type) of this key is \"RSA\". This key is \"use\" (Public Key Use) for \"enc\" (encryption) on data. The \"alg\" (Algorithm) intended with this key is \"RSA1_5\". ``commandLine { \"name\" : \"Connect RSA1_5 Encryption Key\", \"descr\" : \"Encryption Key: RSAES-PKCS1-v1_5\", ... } ### Example-12 The \"kty\" (Key Type) of this key is \"RSA\". This key is \"use\" (Public Key Use) for \"enc\" (encryption) on data. The \"alg\" (Algorithm) intended with this key is \"RSA-OAEP\". ```commandLine { \"name\" : \"Connect RSA-OAEP Encryption Key\", \"descr\" : \"Encryption Key: RSAES OAEP using default parameters\", ... }","title":"Example-11"},{"location":"admin/auth-server/crypto/keys/#crypto-supported","text":"Depending on the transport through which the messages are sent, the integrity of the message might not be guaranteed and the originator of the message might not be authenticated. To mitigate these risks, ID Token, UserInfo Response, Request Object, and Client Authentication JWT values can utilize JSON Web Signature (JWS) [JWS] to sign their contents. To achieve message confidentiality, these values can also use JSON Web Encryption (JWE) [JWE] to encrypt their contents.","title":"Crypto Supported"},{"location":"admin/auth-server/crypto/keys/#signing-algorithms","text":"Signing or Signature algorithm is a cryptographic mechanism used to verify the authenticity and integrity of digital data. We may consider it as a digital version of the ordinary handwritten signatures, but with higher levels of complexity and security. Let's see some signing key algorithms Name Kty Use Alg RS256 Sign Key RSA sig RS256 RS384 Sign Key RSA sig RS384 RS512 Sign Key RSA sig RS512 ES256 Sign Key EC sig ES256 ES256 Sign Key EC sig ES256K ES384 Sign Key EC sig ES384 ES512 Sign Key EC sig ES384 PS256 Sign Key RSA sig PS256 PS384 sign Key RSA sig PS384 PS512 sign Key RSA sig PS512","title":"Signing algorithms"},{"location":"admin/auth-server/crypto/keys/#encryption-algorithms","text":"In cryptography, encryption is the process of encoding information. This process converts the original representation of the information, known as plaintext, into an alternative form known as ciphertext. Ideally, only authorized parties can decipher a ciphertext back to plaintext and access the original information. Let's see some encryption keys. Name Kty Use Alg RSA1_5 Encryption key RSA enc RSA1_5 RSA-OAEP Encryption Key RSA enc RSA-OAEP ECDH-ES Encryption Key CE enc ECDH-ES","title":"Encryption algorithms"},{"location":"admin/auth-server/crypto/keys/#rsa-key-formats","text":"PKCS#8 encrypted private key \"EncryptedPrivateKeyInfo\" (default for private keys) PKCS#1 \"RSAPublicKey\" (default for public keys) PKCS#8 unencrypted \"PrivateKeyInfo\" PKCS#1 unencrypted \"RSAPrivateKey\" (OpenSSL private key file format) X.509 \"SubjectPublicKeyInfo\" (OpenSSL public key file format) The above key values can be passed as (a) a binary DER-encoded ASN.1 file, (b) a text file in PEM format, (c) a string containing the key in PEM format . Also supported are RSA private and public keys represented in XML format to XKMS 2.0 [XKMS] and JSON Web Key (JWK) format [JWK] . For more details, see Key Storage Format . To know more about RSA keyformat browse here","title":"RSA Key Formats"},{"location":"admin/auth-server/crypto/keys/#janssen-keystore-formats","text":"In Janssen we use keystore formats PKCS12 . Which is Encrypted private key formats. In Janssen currently using an extension of p12 . We also have pkcs12 , pfx . We can store private keys, secret keys and certificates on this type. You can find jans-auth-keys.p12 in /etc/certs/ To see the private key you can use bellow command keytool -list -v -keystore /etc/certs/jans-auth-keys.p12 -storetype pkcs12 -storepass <password>","title":"Janssen Keystore Formats"},{"location":"admin/auth-server/endpoints/","tags":["administration","auth-server","endpoint"],"text":"Janssen Server Endpoints # Authentication and Authorization features of Janssen Server are exposed to the clients using endpoints. Janssen Server supports all the standard endpoints defined by supported standards . This section covers each endpoint in detail in its separate document. Please navigate through the left navigation panel to see all the supported endpoint documentation.","title":"Janssen Server Endpoints"},{"location":"admin/auth-server/endpoints/#janssen-server-endpoints","text":"Authentication and Authorization features of Janssen Server are exposed to the clients using endpoints. Janssen Server supports all the standard endpoints defined by supported standards . This section covers each endpoint in detail in its separate document. Please navigate through the left navigation panel to see all the supported endpoint documentation.","title":"Janssen Server Endpoints"},{"location":"admin/auth-server/endpoints/authorization/","tags":["administration","auth-server","authorization","endpoint"],"text":"Overview # Janssen Server exposes authorization endpoint compliant with OAuth2 framework . A client uses authorization endpoint to obtain an authorization grant. Based on response type requested by the client, the authorization endpoint issues an authorization code or an access token. Authorization endpoint is a protected endpoint which will require end-user authentication before issuing authorization code or access token. URL to access authorization endpoint on Janssen Server is listed in the response of Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration authorization_endpoint claim in the response specifies the URL for authorization endpoint. By default, authorization endpoint looks like below: https://janssen.server.host/jans-auth/restv1/authorize More information about request and response of the authorization endpoint can be found in the OpenAPI specification of jans-auth-server module . Disabling The Endpoint Using Feature Flag # TODO: It seems this endpoint can't be disabled using featureflags. Confirm this. Configuration Properties # Authorization endpoint can be further configured using Janssen Server configuration properties listed below. When using Janssen Text-based UI(TUI) to configure the properties, navigate via Auth Server -> Properties . issuer requirePkce fapiCompatibility forceSignedRequestObject authorizationCodeLifetime returnDeviceSecretFromAuthzEndpoint requestUriBlockList requireRequestObjectEncryption staticDecryptionKid requestUriHashVerificationEnabled legacyIdTokenClaims customHeadersWithAuthorizationResponse includeSidInResponse sessionIdRequestParameterEnabled returnDeviceSecretFromAuthzEndpoint requirePar cibaMaxExpirationTimeAllowedSec Required Client Configuration # Clients must be registered with Janssen Server as using code and/or implicit grant types in order to use authorization endpoint. Using Janssen Text-based UI(TUI) , client can be registered for appropriate grant type by navigating to Auth-Server -> Clients -> Add Client Using PKCE # Janssen Server supports PKCE , which recommended and more secure method for using code grant. PKCE can be enabled/disable by setting requirePkce property. Janssen server supports plain as well as s256 code challenge methods. Using PAR # As a separate endpoint, Janssen Server supports PAR (Pushed Authorization Requests) to enable authorization using more complex authorization requests and making it more secure at the same time. Use Janssen Server configuration property requirePar to accept only PAR requests. Using JARM # Authorization endpoint supports JWT Secured Authorization Response Mode, or JARM . Using JARM makes authorization responses more secure and compliant to be used in FAPI deployments. Janssen Server supports all response modes as defined in JARM specification Using Prompt Parameter # prompt request parameter is an ASCII string value that specifies whether the Authorization Server prompts the End-User for re-authentication and consent. Janssen Server supports none , login , consent and select_account values for prompt parameter. Multiple values can be specified by separating them with single space. Based on value/s of this request parameter Authorization Server prompts the End-User for re-authentication and consent. none # none value will instruct Janssen Server NOT to display any authentication or consent user interface pages. An error is returned if the End-User is not already authenticated or the Client does not have pre-configured consent for the requested scopes. This can be used as a method to check for existing authentication and/or consent. login # login value will instruct Janssen Server to prompt the End-User for re-authentication. consent # consent value will instruct Janssen Server to prompt the End-User for consent before returning information to the Client. select_account # select_account value will instruct Janssen Server to prompt the End-User to select a user account. This allows a user who has multiple accounts at the Authorization Server to select amongst the multiple accounts that they may have current sessions for. Configuring Authentication Methods # acr_values request parameter is used to specify authentication methods to be used by Janssen Server to authenticate the end user. Multiple acr values can be specified by separating them with a space. In order to use a particular acr value, the client needs to be authorized to use all the acr values in the list. If no the request doesn't specify any acr value then the default acr value configured for respective client is used by Janssen server for end user authentication. Customizing using Interception Scripts # Interception scripts allows flexibility to configure and customize multiple aspects in Janssen Server. For example, see this documentation to learn how person authentication and consent gathering can be customized using interception scripts. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Authorization"},{"location":"admin/auth-server/endpoints/authorization/#overview","text":"Janssen Server exposes authorization endpoint compliant with OAuth2 framework . A client uses authorization endpoint to obtain an authorization grant. Based on response type requested by the client, the authorization endpoint issues an authorization code or an access token. Authorization endpoint is a protected endpoint which will require end-user authentication before issuing authorization code or access token. URL to access authorization endpoint on Janssen Server is listed in the response of Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration authorization_endpoint claim in the response specifies the URL for authorization endpoint. By default, authorization endpoint looks like below: https://janssen.server.host/jans-auth/restv1/authorize More information about request and response of the authorization endpoint can be found in the OpenAPI specification of jans-auth-server module .","title":"Overview"},{"location":"admin/auth-server/endpoints/authorization/#disabling-the-endpoint-using-feature-flag","text":"TODO: It seems this endpoint can't be disabled using featureflags. Confirm this.","title":"Disabling The Endpoint Using Feature Flag"},{"location":"admin/auth-server/endpoints/authorization/#configuration-properties","text":"Authorization endpoint can be further configured using Janssen Server configuration properties listed below. When using Janssen Text-based UI(TUI) to configure the properties, navigate via Auth Server -> Properties . issuer requirePkce fapiCompatibility forceSignedRequestObject authorizationCodeLifetime returnDeviceSecretFromAuthzEndpoint requestUriBlockList requireRequestObjectEncryption staticDecryptionKid requestUriHashVerificationEnabled legacyIdTokenClaims customHeadersWithAuthorizationResponse includeSidInResponse sessionIdRequestParameterEnabled returnDeviceSecretFromAuthzEndpoint requirePar cibaMaxExpirationTimeAllowedSec","title":"Configuration Properties"},{"location":"admin/auth-server/endpoints/authorization/#required-client-configuration","text":"Clients must be registered with Janssen Server as using code and/or implicit grant types in order to use authorization endpoint. Using Janssen Text-based UI(TUI) , client can be registered for appropriate grant type by navigating to Auth-Server -> Clients -> Add Client","title":"Required Client Configuration"},{"location":"admin/auth-server/endpoints/authorization/#using-pkce","text":"Janssen Server supports PKCE , which recommended and more secure method for using code grant. PKCE can be enabled/disable by setting requirePkce property. Janssen server supports plain as well as s256 code challenge methods.","title":"Using PKCE"},{"location":"admin/auth-server/endpoints/authorization/#using-par","text":"As a separate endpoint, Janssen Server supports PAR (Pushed Authorization Requests) to enable authorization using more complex authorization requests and making it more secure at the same time. Use Janssen Server configuration property requirePar to accept only PAR requests.","title":"Using PAR"},{"location":"admin/auth-server/endpoints/authorization/#using-jarm","text":"Authorization endpoint supports JWT Secured Authorization Response Mode, or JARM . Using JARM makes authorization responses more secure and compliant to be used in FAPI deployments. Janssen Server supports all response modes as defined in JARM specification","title":"Using JARM"},{"location":"admin/auth-server/endpoints/authorization/#using-prompt-parameter","text":"prompt request parameter is an ASCII string value that specifies whether the Authorization Server prompts the End-User for re-authentication and consent. Janssen Server supports none , login , consent and select_account values for prompt parameter. Multiple values can be specified by separating them with single space. Based on value/s of this request parameter Authorization Server prompts the End-User for re-authentication and consent.","title":"Using Prompt Parameter"},{"location":"admin/auth-server/endpoints/authorization/#none","text":"none value will instruct Janssen Server NOT to display any authentication or consent user interface pages. An error is returned if the End-User is not already authenticated or the Client does not have pre-configured consent for the requested scopes. This can be used as a method to check for existing authentication and/or consent.","title":"none"},{"location":"admin/auth-server/endpoints/authorization/#login","text":"login value will instruct Janssen Server to prompt the End-User for re-authentication.","title":"login"},{"location":"admin/auth-server/endpoints/authorization/#consent","text":"consent value will instruct Janssen Server to prompt the End-User for consent before returning information to the Client.","title":"consent"},{"location":"admin/auth-server/endpoints/authorization/#select_account","text":"select_account value will instruct Janssen Server to prompt the End-User to select a user account. This allows a user who has multiple accounts at the Authorization Server to select amongst the multiple accounts that they may have current sessions for.","title":"select_account"},{"location":"admin/auth-server/endpoints/authorization/#configuring-authentication-methods","text":"acr_values request parameter is used to specify authentication methods to be used by Janssen Server to authenticate the end user. Multiple acr values can be specified by separating them with a space. In order to use a particular acr value, the client needs to be authorized to use all the acr values in the list. If no the request doesn't specify any acr value then the default acr value configured for respective client is used by Janssen server for end user authentication.","title":"Configuring Authentication Methods"},{"location":"admin/auth-server/endpoints/authorization/#customizing-using-interception-scripts","text":"Interception scripts allows flexibility to configure and customize multiple aspects in Janssen Server. For example, see this documentation to learn how person authentication and consent gathering can be customized using interception scripts.","title":"Customizing using Interception Scripts"},{"location":"admin/auth-server/endpoints/authorization/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/endpoints/backchannel-authentication/","tags":["administration","auth-server","endpoint"],"text":"Backchannel authentication scripts # Janssen server enables domains to render the username/pw login form, avoiding the redirect to the IDP-hosted login page. Many SSO solutions offer a proprietary endpoint to accomplish this. However, in Janssen server, this is accomplished with the OAuth/OpenID framework by using a combination of calling the /token endpoint using the OAuth password flow, and then redirecting to browser to the /authorization endpoint, but auto-submitting the form. This article describes how to process login via backchannel and when browser is processing authorization, AS will recognize automatically the authenticated user, write cookies and then establish the session. Design # Source-code for sequence diagram Title password Grant with State Person->Browser: Navigate to website Browser->Website: Website->Browser:Display login page Person->Browser: Enter Username / PW Browser->Website: (creds) Website->IDP: /token?uid=_&pw=&browser_ip=_ IDP->Website: {\"redirect\": \"/authz/state=1F2D41A\", ...} Website->Browser: Browser->IDP: /authz?state=1F2D41A IDP->IDP: check IP address is\\n same as state IDP->Browser: write cookie / send redirect_uri Browser->Website: redirect_uri Solution # In order to process the whole authorization, idea is to use resource owner password credentials grant type in the first stage, over there process the authentication as we do today, but also write in cache a short-lived token to recognize such authenticated user, then return to the client such short-lived token. During authorization, browser should send that token as part of the custom params and in the AS we should verify if that user is already authenticated using the short-lived param in the cache, then AS will write cookies, create the session and return to the client information required for this. Jans App Configurations # Above the jans-auth record of the jansAppConf table, enable a new attribute on the jansConfDyn field Example: \"authorizationRequestCustomAllowedParameters\": [ { \"paramName\": \"bcAuthnToken\", \"returnInResponse\": true } ] Sample CURL 1. Obtain access token curl -u \"put_client_id_here:put_config_api_client_secret_here\" https://<your.jans.server>/jans-auth/restv1/token \\ -d \"grant_type=client_credentials&scope=https://jans.io/oauth/jans-auth-server/config/properties.write\" 2. Apply patch curl -X PATCH -k -H 'Content-Type: application/json-patch+json' \\ -i 'jans-config-api/api/v1/jans-auth-server/config' \\ -H \"Authorization: Bearer put_access_token_here\" --data '[ { \"op\": \"add\", \"path\": \"authorizationRequestCustomAllowedParameters\", \"value\": [ { \"paramName\": \"bcAuthnToken\", \"returnInResponse\": true } ] } ]' Custom Script Registration # In the table jansCustomScr enable 2 new scripts: 1. Script type resource_owner_password_credentials displayName ropc-backchannel [ropc-backchannel-script.py] See script below. 2. Script type person_autentication displayName backchannel-authentication [backchannel-authentication-script.py] See script below. Client Configuration # Associate script person_authentication on table jansClnt . Modify the jansAttrs field which contains a json and the ropcScripts field and add the dn from the ropc script record in the previous step Example: \"ropcScripts\": [ \"inum={SCRIPT_ID},ou=scripts,o=jans\", ], Flow # BcAuthToken request: # Firstly, the /token service is called to generate the bcAuthnToken (get it from the response header with the key Bc-Authn-Token ) In this request example, the client's basic credential is being used in order to authenticate the client, however you could use your preferred authn mode. Request curl --location --request POST 'https://jans.localhost/jans-auth/restv1/token' \\ --header 'Authorization: Basic MzE3MGNiYzUtMDAxOC00OWVmLThiYTYtMjY4MGI2NjhiZjBjOmFmNzk1ZjI1LWQ1MjktNDVlYi1iMTJlLWNjM2ExNTY5OTU1Ng==' \\ --header 'Content-Type: application/x-www-form-urlencoded' \\ --data-urlencode 'grant_type=password' \\ --data-urlencode 'username=test_user' \\ --data-urlencode 'password=test_user_password' \\ --data-urlencode 'custom1=your custom param 1' \\ --data-urlencode 'custom2=your custom param 2' \\ --data-urlencode 'scope=openid' Response HTTP/1.1 200 OK Date: Wed, 29 Jun 2022 14:03:25 GMT Server: Apache/2.4.52 (Ubuntu) X-Xss-Protection: 1; mode=block X-Content-Type-Options: nosniff Strict-Transport-Security: max-age=31536000; includeSubDomains Bc-Authn-Token: dacfe4fc-d0ce-4673-9370-e66f652c4b7f Cache-Control: no-store Content-Type: application/json Pragma: no-cache Content-Length: 1109 Keep-Alive: timeout=5, max=100 Connection: Keep-Alive {\"access_token\":\"7a024a59-e132-4c05-9126-f4f36b3d3677\",\"refresh_token\":\"184c2b60-b5c7-4250-9850-97b0f531743c\",\"scope\":\"openid\",\"id_token\":\"eyJraWQiOiJmZGJhY2Q2Yi05YTY0LTQ2MWQtOWJlYy1jOTAyMjc5ZGI2ODZfc2lnX3JzMjU2IiwidHlwIjoiand0IiwiYWxnIjoiUlMyNTYifQ.eyJhdWQiOiIzMTcwY2JjNS0wMDE4LTQ5ZWYtOGJhNi0yNjgwYjY2OGJmMGMiLCJhY3IiOiJzaW1wbGVfcGFzc3dvcmRfYXV0aCIsInN1YiI6Il9Fa3p5aXlRdVBzUm1mYjh3WHlmTTB4U0xDckxwTDJGNnA3RWhEeWRBUHciLCJjb2RlIjoiNDY4MzQ2NjktOGQ1Yy00NmQxLTkwNWEtNmMzNDg3YzZlMDg3IiwiYW1yIjpbXSwiaXNzIjoiaHR0cHM6Ly9qYW5zLmxvY2FsaG9zdCIsImV4cCI6MTY1NjUxNTAwNiwiZ3JhbnQiOiJwYXNzd29yZCIsImlhdCI6MTY1NjUxMTQwNiwic2lkIjoiMTg0ZTllOTktNjFmNi00ZWNhLWE0ZmUtMTMwZmFmZDk1MjE1Iiwib3hPcGVuSURDb25uZWN0VmVyc2lvbiI6Im9wZW5pZGNvbm5lY3QtMS4wIn0.hW0vReGYLzC2RyBHztSFbDYoaYHcCYxatX1lpzWqyW5U2S9eNp58mKKmvdZmMc229Sz5VxqfYflpWuI_6aXsLFR_KT9FY3exSRIRtPiD_fUETdhsVuKWavumVnjvwdAM6ytu5ORJx06DCxEgaG1uXmRiE9GoT8F1uqeo4NxURhVNXmMd2fiiUmgm1lt3-kNhlSg6vMDJS1Aq1idm-XhiSVy895BY-JdpLEGJEycPKr1lpsBTcmasbFNBJv6_orKWlvvgFCVxo7XmbH7Xnmqi6UUo30L6sULqmCsTLa6DaWYfGokHz_0xRflw_Ihv9wlVq8gSdOZGoMaVGzDdKlddZw\",\"token_type\":\"Bearer\",\"expires_in\":299} Authorize request: # Once you have gotten the bcAuthnToken from the previous /token call, you must call authorize attaching the bcAuthnToken as a parameter and in the acr_values param send the name of the backchannel-authentication registered in previous steps. This script will generate cookies and session associated with the browser if the BcAuthToken is valid. Example: https://jans.localhost/jans-auth/restv1/authorize?response_type=code&client_id=3170cbc5-0018-49ef-8ba6-2680b668bf0c&scope=openid+profile+address+email&redirect_uri=https://jans.localhost/jans-auth-rp/home.htm&state=2f78eaf1-d73e-49f2-8f50-e5faef80808a&nonce=92c3a631-db54-4ae9-bd53-caf92a4adbcf&prompt=&ui_locales=&claims_locales=&acr_values=backchannel-authentication&request_session_id=false&bcAuthnToken={your bcAuthnToken} This call will redirect to the redirect_uri that you sent as a parameter in the call and will receive a code as well, after that the process is more or less the same than the regular flow. Request /token: # With the code obtained previously, you must call /token again, adding the parameter code Request: curl --location --request POST 'https://jans.localhost/jans-auth/restv1/token' \\ --header 'Authorization: Basic MzlhNjlmYzAtNzNmYy00MWJhLWFiMGYtNDJhNWFmYWI2MjllOmJmMDRlZTM4LTM0MTktNGEzNS05YTI5LTcyODlmY2JkNzc2Zg==' \\ --header 'Content-Type: application/x-www-form-urlencoded' \\ --data-urlencode 'grant_type=authorization_code' \\ --data-urlencode 'code=d449a7b9-10f6-4320-b257-05fee91d3c16' \\ --data-urlencode 'redirect_uri=https://jans.localhost/jans-auth-rp/home.htm' Response: HTTP/1.1 200 OK Date: Wed, 29 Jun 2022 15:20:50 GMT Server: Apache/2.4.52 (Ubuntu) X-Xss-Protection: 1; mode=block X-Content-Type-Options: nosniff Strict-Transport-Security: max-age=31536000; includeSubDomains Cache-Control: no-store Content-Type: application/json Pragma: no-cache Content-Length: 1291 Keep-Alive: timeout=5, max=100 Connection: Keep-Alive {\"access_token\":\"896b04a2-fcbe-4466-89b9-184930b8675b\",\"refresh_token\":\"843995ef-cd0e-4b2c-9b91-7c68081325ab\",\"id_token\":\"eyJraWQiOiJmZGJhY2Q2Yi05YTY0LTQ2MWQtOWJlYy1jOTAyMjc5ZGI2ODZfc2lnX3JzMjU2IiwidHlwIjoiand0IiwiYWxnIjoiUlMyNTYifQ.eyJhdF9oYXNoIjoiMmx5OXh5emthMmc2T09HcVRPTmhqdyIsInN1YiI6Il9Fa3p5aXlRdVBzUm1mYjh3WHlmTTB4U0xDckxwTDJGNnA3RWhEeWRBUHciLCJjb2RlIjoiMjdiNjM0NTItMTE1My00ZDk5LTlkYzQtYzMyNGRmNjIwYWE0IiwiYW1yIjpbIjEwIl0sImlzcyI6Imh0dHBzOi8vamFucy5sb2NhbGhvc3QiLCJub25jZSI6IjkyYzNhNjMxLWRiNTQtNGFlOS1iZDUzLWNhZjkyYTRhZGJjZiIsInNpZCI6ImQzZDFlOWY2LWE1NTMtNDI2ZC04MWQ1LTE0YTFiZjg0MDJhNCIsIm94T3BlbklEQ29ubmVjdFZlcnNpb24iOiJvcGVuaWRjb25uZWN0LTEuMCIsImF1ZCI6IjMxNzBjYmM1LTAwMTgtNDllZi04YmE2LTI2ODBiNjY4YmYwYyIsImFjciI6InJvcGMtYmFja2NoYW5uZWwiLCJjX2hhc2giOiJzZVkxTldwNmN6ZGppUEdTWktqQlZRIiwiYXV0aF90aW1lIjoxNjU2NTE2MDM4LCJleHAiOjE2NTY1MTk2NTAsImdyYW50IjoiYXV0aG9yaXphdGlvbl9jb2RlIiwiaWF0IjoxNjU2NTE2MDUwfQ.giFYGuN-VUNSVMMT4bBkoGsZ-rKlByqe6qv24jzp7pk2eCY4FawiaLHJqH9MzBN7uEauRXYNR2pa_0oGoYnNNg4zbFiSARSKVsajcrPeDUgNs71MjMOYCH5dukXB7X5SEP3Drz5njxuXswI_EjM2Cd0OtJMoHQ0_IP_C3rzwmaQQsgWk81yAXl-eM4zABYV1e9OObGFqPtVjoHmpbFbg-teoRTr_LxYgKPwB1XnRqD4G9No7oV-9q1Bv1ED9AU6zxLWf9aGE2gQIC-jgkr7LZ5pB4zYgU_DwgmpaAuW_AT8ApfnQPqgNy7YouIPWZ8pyoncLjF0SdStVPEoreRx7GA\",\"token_type\":\"Bearer\",\"expires_in\":299} With info, you could do whatever you want using browser session. NOTE: I added some custom params in case you need to validate something else, for instance browser IP. Script templates # These scripts are examples of how it worked, but you could customize them based on your needs, for instance browser validations. Backchannel authentication script # from io.jans.service.cdi.util import CdiUtil from io.jans.as.server.security import Identity from io.jans.model.custom.script.type.auth import PersonAuthenticationType from io.jans.as.server.service import AuthenticationService from io.jans.util import StringHelper from io.jans.as.server.util import ServerUtil from io.jans.service.cache import CacheProvider from io.jans.as.server.service import SessionIdService from io.jans.as.server.service import CookieService from io.jans.as.server.security import Identity from io.jans.service.cache import CacheProvider import java class PersonAuthentication(PersonAuthenticationType): def __init__(self, currentTimeMillis): self.currentTimeMillis = currentTimeMillis def init(self, customScript, configurationAttributes): print \"Backchannel Authentication. Initialization\" print \"Backchannel Authentication. Initialized successfully\" return True def destroy(self, configurationAttributes): print \"Backchannel Authentication. Destroy\" print \"Backchannel Authentication. Destroyed successfully\" return True def getAuthenticationMethodClaims(self, requestParameters): return None def getApiVersion(self): return 11 def isValidAuthenticationMethod(self, usageType, configurationAttributes): return True def getAlternativeAuthenticationMethod(self, usageType, configurationAttributes): return None def authenticate(self, configurationAttributes, requestParameters, step): print \"Backchannel Authentication. Authenticate\" # Get bcAuthnToken from params bcAuthnToken = ServerUtil.getFirstValue(requestParameters, \"bcAuthnToken\") print \"Backchannel Authentication. Get bcAuthnToken from params: '%s'\" % (bcAuthnToken) if (bcAuthnToken == None): return False # Get sessionDn from cacheProvider cacheProvider = CdiUtil.bean(CacheProvider) sessionCacheDn = cacheProvider.get(bcAuthnToken) print \"Backchannel Authentication. Get sessionCacheDn from cacheProvider: '%s'\" % (sessionCacheDn) if (sessionCacheDn == None): return False # Get sessionId by sessionDn sessionId = CdiUtil.bean(SessionIdService).getSessionByDn(sessionCacheDn) print \"Backchannel Authentication. Get sessionId from sessionIdService: '%s'\" % ('None' if sessionId == None else sessionId.getId()) if (sessionId == None): return False # Write sessionId in cookies CdiUtil.bean(CookieService).createSessionIdCookie(sessionId, False) print \"Backchannel Authentication. Set session in Cookie\" # Set sessionId in Identity identity = CdiUtil.bean(Identity) identity.setSessionId(sessionId) print \"Backchannel Authentication. Set session in Identity\" # Remove bcAuthnToken from cacheProvider cacheProvider.remove(bcAuthnToken) print \"Backchannel Authentication. Removed cacheProvider bcAuthnToken: '%s'\" % bcAuthnToken return True def prepareForStep(self, configurationAttributes, requestParameters, step): if (step == 1): return True else: return False def getExtraParametersForStep(self, configurationAttributes, step): return None def getCountAuthenticationSteps(self, configurationAttributes): return 1 def getPageForStep(self, configurationAttributes, step): return \"postlogin.xhtml\" def getNextStep(self, configurationAttributes, requestParameters, step): return -1 def getLogoutExternalUrl(self, configurationAttributes, requestParameters): return None def logout(self, configurationAttributes, requestParameters): return True ROPC backchannel script # from io.jans.model.custom.script.type.owner import ResourceOwnerPasswordCredentialsType from io.jans.as.server.service import AuthenticationService, SessionIdService from io.jans.as.server.security import Identity from io.jans.service.cdi.util import CdiUtil from io.jans.as.model.authorize import AuthorizeRequestParam from io.jans.as.server.model.config import Constants from io.jans.util import StringHelper from java.lang import String from java.util import Date, HashMap from io.jans.service.cache import CacheProvider import uuid class ResourceOwnerPasswordCredentials(ResourceOwnerPasswordCredentialsType): def __init__(self, currentTimeMillis): self.currentTimeMillis = currentTimeMillis def init(self, customScript, configurationAttributes): print \"ROPC Backchannel. Initializing ...\" print \"ROPC Backchannel. Initialized successfully\" return True def destroy(self, configurationAttributes): print \"ROPC Backchannel. Destroying ...\" print \"ROPC Backchannel. Destroyed successfully\" return True def getApiVersion(self): return 11 def authenticate(self, context): print \"ROPC Backchannel. Authenticate\" # Do generic authentication authenticationService = CdiUtil.bean(AuthenticationService) username = context.getHttpRequest().getParameter(\"username\") password = context.getHttpRequest().getParameter(\"password\") # Add credential validation result = authenticationService.authenticate(username, password) if not result: print \"ROPC Backchannel. Authenticate. Could not authenticate user '%s' \" % username return False context.setUser(authenticationService.getAuthenticatedUser()) print \"ROPC Backchannel. Authenticate. User '%s' authenticated successfully\" % username # Get custom parameters from request customParam1Value = context.getHttpRequest().getParameter(\"custom1\") customParam2Value = context.getHttpRequest().getParameter(\"custom2\") customParameters = {} customParameters[\"custom1\"] = customParam1Value customParameters[\"custom2\"] = customParam2Value print \"ROPC Backchannel. Authenticate. User '%s'. Creating authenticated session with custom attributes: '%s'\" % (username, customParameters) session = self.createNewAuthenticatedSession(context, customParameters) # This is needed to allow store in token entry sessionId authenticationService.configureEventUser(session) print \"ROPC Backchannel. Authenticate. User '%s'. Created authenticated session: '%s'\" % (username, customParameters) return True def createNewAuthenticatedSession(self, context, customParameters={}): sessionIdService = CdiUtil.bean(SessionIdService) user = context.getUser() client = CdiUtil.bean(Identity).getSessionClient().getClient() # Add mandatory session parameters sessionAttributes = HashMap() sessionAttributes.put(Constants.AUTHENTICATED_USER, user.getUserId()) sessionAttributes.put(AuthorizeRequestParam.CLIENT_ID, client.getClientId()) # Add custom session parameters for key, value in customParameters.iteritems(): if StringHelper.isNotEmpty(value): sessionAttributes.put(key, value) # Generate authenticated session sessionId = sessionIdService.generateAuthenticatedSessionId(context.getHttpRequest(), user.getDn(), sessionAttributes) print \"ROPC Backchannel. Generated session id. DN: '%s'\" % sessionId.getDn() # Add state uuid in cache manager and response header bcAuthnToken = str(uuid.uuid4()) cacheProvider = CdiUtil.bean(CacheProvider) cacheProvider.put(300, bcAuthnToken, sessionId.getDn()) print \"ROPC Backchannel. Added cacheProvider id: '%s'\" % bcAuthnToken # Add response header Bc-Authn-Token context.getHttpResponse().setHeader(\"Bc-Authn-Token\", bcAuthnToken) print \"ROPC Backchannel. Added header Bc-Authn-Token\" return sessionId","title":"Backchannel Authentication"},{"location":"admin/auth-server/endpoints/backchannel-authentication/#backchannel-authentication-scripts","text":"Janssen server enables domains to render the username/pw login form, avoiding the redirect to the IDP-hosted login page. Many SSO solutions offer a proprietary endpoint to accomplish this. However, in Janssen server, this is accomplished with the OAuth/OpenID framework by using a combination of calling the /token endpoint using the OAuth password flow, and then redirecting to browser to the /authorization endpoint, but auto-submitting the form. This article describes how to process login via backchannel and when browser is processing authorization, AS will recognize automatically the authenticated user, write cookies and then establish the session.","title":"Backchannel authentication scripts"},{"location":"admin/auth-server/endpoints/backchannel-authentication/#design","text":"Source-code for sequence diagram Title password Grant with State Person->Browser: Navigate to website Browser->Website: Website->Browser:Display login page Person->Browser: Enter Username / PW Browser->Website: (creds) Website->IDP: /token?uid=_&pw=&browser_ip=_ IDP->Website: {\"redirect\": \"/authz/state=1F2D41A\", ...} Website->Browser: Browser->IDP: /authz?state=1F2D41A IDP->IDP: check IP address is\\n same as state IDP->Browser: write cookie / send redirect_uri Browser->Website: redirect_uri","title":"Design"},{"location":"admin/auth-server/endpoints/backchannel-authentication/#solution","text":"In order to process the whole authorization, idea is to use resource owner password credentials grant type in the first stage, over there process the authentication as we do today, but also write in cache a short-lived token to recognize such authenticated user, then return to the client such short-lived token. During authorization, browser should send that token as part of the custom params and in the AS we should verify if that user is already authenticated using the short-lived param in the cache, then AS will write cookies, create the session and return to the client information required for this.","title":"Solution"},{"location":"admin/auth-server/endpoints/backchannel-authentication/#jans-app-configurations","text":"Above the jans-auth record of the jansAppConf table, enable a new attribute on the jansConfDyn field Example: \"authorizationRequestCustomAllowedParameters\": [ { \"paramName\": \"bcAuthnToken\", \"returnInResponse\": true } ] Sample CURL 1. Obtain access token curl -u \"put_client_id_here:put_config_api_client_secret_here\" https://<your.jans.server>/jans-auth/restv1/token \\ -d \"grant_type=client_credentials&scope=https://jans.io/oauth/jans-auth-server/config/properties.write\" 2. Apply patch curl -X PATCH -k -H 'Content-Type: application/json-patch+json' \\ -i 'jans-config-api/api/v1/jans-auth-server/config' \\ -H \"Authorization: Bearer put_access_token_here\" --data '[ { \"op\": \"add\", \"path\": \"authorizationRequestCustomAllowedParameters\", \"value\": [ { \"paramName\": \"bcAuthnToken\", \"returnInResponse\": true } ] } ]'","title":"Jans App Configurations"},{"location":"admin/auth-server/endpoints/backchannel-authentication/#custom-script-registration","text":"In the table jansCustomScr enable 2 new scripts: 1. Script type resource_owner_password_credentials displayName ropc-backchannel [ropc-backchannel-script.py] See script below. 2. Script type person_autentication displayName backchannel-authentication [backchannel-authentication-script.py] See script below.","title":"Custom Script Registration"},{"location":"admin/auth-server/endpoints/backchannel-authentication/#client-configuration","text":"Associate script person_authentication on table jansClnt . Modify the jansAttrs field which contains a json and the ropcScripts field and add the dn from the ropc script record in the previous step Example: \"ropcScripts\": [ \"inum={SCRIPT_ID},ou=scripts,o=jans\", ],","title":"Client Configuration"},{"location":"admin/auth-server/endpoints/backchannel-authentication/#flow","text":"","title":"Flow"},{"location":"admin/auth-server/endpoints/backchannel-authentication/#bcauthtoken-request","text":"Firstly, the /token service is called to generate the bcAuthnToken (get it from the response header with the key Bc-Authn-Token ) In this request example, the client's basic credential is being used in order to authenticate the client, however you could use your preferred authn mode. Request curl --location --request POST 'https://jans.localhost/jans-auth/restv1/token' \\ --header 'Authorization: Basic MzE3MGNiYzUtMDAxOC00OWVmLThiYTYtMjY4MGI2NjhiZjBjOmFmNzk1ZjI1LWQ1MjktNDVlYi1iMTJlLWNjM2ExNTY5OTU1Ng==' \\ --header 'Content-Type: application/x-www-form-urlencoded' \\ --data-urlencode 'grant_type=password' \\ --data-urlencode 'username=test_user' \\ --data-urlencode 'password=test_user_password' \\ --data-urlencode 'custom1=your custom param 1' \\ --data-urlencode 'custom2=your custom param 2' \\ --data-urlencode 'scope=openid' Response HTTP/1.1 200 OK Date: Wed, 29 Jun 2022 14:03:25 GMT Server: Apache/2.4.52 (Ubuntu) X-Xss-Protection: 1; mode=block X-Content-Type-Options: nosniff Strict-Transport-Security: max-age=31536000; includeSubDomains Bc-Authn-Token: dacfe4fc-d0ce-4673-9370-e66f652c4b7f Cache-Control: no-store Content-Type: application/json Pragma: no-cache Content-Length: 1109 Keep-Alive: timeout=5, max=100 Connection: Keep-Alive {\"access_token\":\"7a024a59-e132-4c05-9126-f4f36b3d3677\",\"refresh_token\":\"184c2b60-b5c7-4250-9850-97b0f531743c\",\"scope\":\"openid\",\"id_token\":\"eyJraWQiOiJmZGJhY2Q2Yi05YTY0LTQ2MWQtOWJlYy1jOTAyMjc5ZGI2ODZfc2lnX3JzMjU2IiwidHlwIjoiand0IiwiYWxnIjoiUlMyNTYifQ.eyJhdWQiOiIzMTcwY2JjNS0wMDE4LTQ5ZWYtOGJhNi0yNjgwYjY2OGJmMGMiLCJhY3IiOiJzaW1wbGVfcGFzc3dvcmRfYXV0aCIsInN1YiI6Il9Fa3p5aXlRdVBzUm1mYjh3WHlmTTB4U0xDckxwTDJGNnA3RWhEeWRBUHciLCJjb2RlIjoiNDY4MzQ2NjktOGQ1Yy00NmQxLTkwNWEtNmMzNDg3YzZlMDg3IiwiYW1yIjpbXSwiaXNzIjoiaHR0cHM6Ly9qYW5zLmxvY2FsaG9zdCIsImV4cCI6MTY1NjUxNTAwNiwiZ3JhbnQiOiJwYXNzd29yZCIsImlhdCI6MTY1NjUxMTQwNiwic2lkIjoiMTg0ZTllOTktNjFmNi00ZWNhLWE0ZmUtMTMwZmFmZDk1MjE1Iiwib3hPcGVuSURDb25uZWN0VmVyc2lvbiI6Im9wZW5pZGNvbm5lY3QtMS4wIn0.hW0vReGYLzC2RyBHztSFbDYoaYHcCYxatX1lpzWqyW5U2S9eNp58mKKmvdZmMc229Sz5VxqfYflpWuI_6aXsLFR_KT9FY3exSRIRtPiD_fUETdhsVuKWavumVnjvwdAM6ytu5ORJx06DCxEgaG1uXmRiE9GoT8F1uqeo4NxURhVNXmMd2fiiUmgm1lt3-kNhlSg6vMDJS1Aq1idm-XhiSVy895BY-JdpLEGJEycPKr1lpsBTcmasbFNBJv6_orKWlvvgFCVxo7XmbH7Xnmqi6UUo30L6sULqmCsTLa6DaWYfGokHz_0xRflw_Ihv9wlVq8gSdOZGoMaVGzDdKlddZw\",\"token_type\":\"Bearer\",\"expires_in\":299}","title":"BcAuthToken request:"},{"location":"admin/auth-server/endpoints/backchannel-authentication/#authorize-request","text":"Once you have gotten the bcAuthnToken from the previous /token call, you must call authorize attaching the bcAuthnToken as a parameter and in the acr_values param send the name of the backchannel-authentication registered in previous steps. This script will generate cookies and session associated with the browser if the BcAuthToken is valid. Example: https://jans.localhost/jans-auth/restv1/authorize?response_type=code&client_id=3170cbc5-0018-49ef-8ba6-2680b668bf0c&scope=openid+profile+address+email&redirect_uri=https://jans.localhost/jans-auth-rp/home.htm&state=2f78eaf1-d73e-49f2-8f50-e5faef80808a&nonce=92c3a631-db54-4ae9-bd53-caf92a4adbcf&prompt=&ui_locales=&claims_locales=&acr_values=backchannel-authentication&request_session_id=false&bcAuthnToken={your bcAuthnToken} This call will redirect to the redirect_uri that you sent as a parameter in the call and will receive a code as well, after that the process is more or less the same than the regular flow.","title":"Authorize request:"},{"location":"admin/auth-server/endpoints/backchannel-authentication/#request-token","text":"With the code obtained previously, you must call /token again, adding the parameter code Request: curl --location --request POST 'https://jans.localhost/jans-auth/restv1/token' \\ --header 'Authorization: Basic MzlhNjlmYzAtNzNmYy00MWJhLWFiMGYtNDJhNWFmYWI2MjllOmJmMDRlZTM4LTM0MTktNGEzNS05YTI5LTcyODlmY2JkNzc2Zg==' \\ --header 'Content-Type: application/x-www-form-urlencoded' \\ --data-urlencode 'grant_type=authorization_code' \\ --data-urlencode 'code=d449a7b9-10f6-4320-b257-05fee91d3c16' \\ --data-urlencode 'redirect_uri=https://jans.localhost/jans-auth-rp/home.htm' Response: HTTP/1.1 200 OK Date: Wed, 29 Jun 2022 15:20:50 GMT Server: Apache/2.4.52 (Ubuntu) X-Xss-Protection: 1; mode=block X-Content-Type-Options: nosniff Strict-Transport-Security: max-age=31536000; includeSubDomains Cache-Control: no-store Content-Type: application/json Pragma: no-cache Content-Length: 1291 Keep-Alive: timeout=5, max=100 Connection: Keep-Alive {\"access_token\":\"896b04a2-fcbe-4466-89b9-184930b8675b\",\"refresh_token\":\"843995ef-cd0e-4b2c-9b91-7c68081325ab\",\"id_token\":\"eyJraWQiOiJmZGJhY2Q2Yi05YTY0LTQ2MWQtOWJlYy1jOTAyMjc5ZGI2ODZfc2lnX3JzMjU2IiwidHlwIjoiand0IiwiYWxnIjoiUlMyNTYifQ.eyJhdF9oYXNoIjoiMmx5OXh5emthMmc2T09HcVRPTmhqdyIsInN1YiI6Il9Fa3p5aXlRdVBzUm1mYjh3WHlmTTB4U0xDckxwTDJGNnA3RWhEeWRBUHciLCJjb2RlIjoiMjdiNjM0NTItMTE1My00ZDk5LTlkYzQtYzMyNGRmNjIwYWE0IiwiYW1yIjpbIjEwIl0sImlzcyI6Imh0dHBzOi8vamFucy5sb2NhbGhvc3QiLCJub25jZSI6IjkyYzNhNjMxLWRiNTQtNGFlOS1iZDUzLWNhZjkyYTRhZGJjZiIsInNpZCI6ImQzZDFlOWY2LWE1NTMtNDI2ZC04MWQ1LTE0YTFiZjg0MDJhNCIsIm94T3BlbklEQ29ubmVjdFZlcnNpb24iOiJvcGVuaWRjb25uZWN0LTEuMCIsImF1ZCI6IjMxNzBjYmM1LTAwMTgtNDllZi04YmE2LTI2ODBiNjY4YmYwYyIsImFjciI6InJvcGMtYmFja2NoYW5uZWwiLCJjX2hhc2giOiJzZVkxTldwNmN6ZGppUEdTWktqQlZRIiwiYXV0aF90aW1lIjoxNjU2NTE2MDM4LCJleHAiOjE2NTY1MTk2NTAsImdyYW50IjoiYXV0aG9yaXphdGlvbl9jb2RlIiwiaWF0IjoxNjU2NTE2MDUwfQ.giFYGuN-VUNSVMMT4bBkoGsZ-rKlByqe6qv24jzp7pk2eCY4FawiaLHJqH9MzBN7uEauRXYNR2pa_0oGoYnNNg4zbFiSARSKVsajcrPeDUgNs71MjMOYCH5dukXB7X5SEP3Drz5njxuXswI_EjM2Cd0OtJMoHQ0_IP_C3rzwmaQQsgWk81yAXl-eM4zABYV1e9OObGFqPtVjoHmpbFbg-teoRTr_LxYgKPwB1XnRqD4G9No7oV-9q1Bv1ED9AU6zxLWf9aGE2gQIC-jgkr7LZ5pB4zYgU_DwgmpaAuW_AT8ApfnQPqgNy7YouIPWZ8pyoncLjF0SdStVPEoreRx7GA\",\"token_type\":\"Bearer\",\"expires_in\":299} With info, you could do whatever you want using browser session. NOTE: I added some custom params in case you need to validate something else, for instance browser IP.","title":"Request /token:"},{"location":"admin/auth-server/endpoints/backchannel-authentication/#script-templates","text":"These scripts are examples of how it worked, but you could customize them based on your needs, for instance browser validations.","title":"Script templates"},{"location":"admin/auth-server/endpoints/backchannel-authentication/#backchannel-authentication-script","text":"from io.jans.service.cdi.util import CdiUtil from io.jans.as.server.security import Identity from io.jans.model.custom.script.type.auth import PersonAuthenticationType from io.jans.as.server.service import AuthenticationService from io.jans.util import StringHelper from io.jans.as.server.util import ServerUtil from io.jans.service.cache import CacheProvider from io.jans.as.server.service import SessionIdService from io.jans.as.server.service import CookieService from io.jans.as.server.security import Identity from io.jans.service.cache import CacheProvider import java class PersonAuthentication(PersonAuthenticationType): def __init__(self, currentTimeMillis): self.currentTimeMillis = currentTimeMillis def init(self, customScript, configurationAttributes): print \"Backchannel Authentication. Initialization\" print \"Backchannel Authentication. Initialized successfully\" return True def destroy(self, configurationAttributes): print \"Backchannel Authentication. Destroy\" print \"Backchannel Authentication. Destroyed successfully\" return True def getAuthenticationMethodClaims(self, requestParameters): return None def getApiVersion(self): return 11 def isValidAuthenticationMethod(self, usageType, configurationAttributes): return True def getAlternativeAuthenticationMethod(self, usageType, configurationAttributes): return None def authenticate(self, configurationAttributes, requestParameters, step): print \"Backchannel Authentication. Authenticate\" # Get bcAuthnToken from params bcAuthnToken = ServerUtil.getFirstValue(requestParameters, \"bcAuthnToken\") print \"Backchannel Authentication. Get bcAuthnToken from params: '%s'\" % (bcAuthnToken) if (bcAuthnToken == None): return False # Get sessionDn from cacheProvider cacheProvider = CdiUtil.bean(CacheProvider) sessionCacheDn = cacheProvider.get(bcAuthnToken) print \"Backchannel Authentication. Get sessionCacheDn from cacheProvider: '%s'\" % (sessionCacheDn) if (sessionCacheDn == None): return False # Get sessionId by sessionDn sessionId = CdiUtil.bean(SessionIdService).getSessionByDn(sessionCacheDn) print \"Backchannel Authentication. Get sessionId from sessionIdService: '%s'\" % ('None' if sessionId == None else sessionId.getId()) if (sessionId == None): return False # Write sessionId in cookies CdiUtil.bean(CookieService).createSessionIdCookie(sessionId, False) print \"Backchannel Authentication. Set session in Cookie\" # Set sessionId in Identity identity = CdiUtil.bean(Identity) identity.setSessionId(sessionId) print \"Backchannel Authentication. Set session in Identity\" # Remove bcAuthnToken from cacheProvider cacheProvider.remove(bcAuthnToken) print \"Backchannel Authentication. Removed cacheProvider bcAuthnToken: '%s'\" % bcAuthnToken return True def prepareForStep(self, configurationAttributes, requestParameters, step): if (step == 1): return True else: return False def getExtraParametersForStep(self, configurationAttributes, step): return None def getCountAuthenticationSteps(self, configurationAttributes): return 1 def getPageForStep(self, configurationAttributes, step): return \"postlogin.xhtml\" def getNextStep(self, configurationAttributes, requestParameters, step): return -1 def getLogoutExternalUrl(self, configurationAttributes, requestParameters): return None def logout(self, configurationAttributes, requestParameters): return True","title":"Backchannel authentication script"},{"location":"admin/auth-server/endpoints/backchannel-authentication/#ropc-backchannel-script","text":"from io.jans.model.custom.script.type.owner import ResourceOwnerPasswordCredentialsType from io.jans.as.server.service import AuthenticationService, SessionIdService from io.jans.as.server.security import Identity from io.jans.service.cdi.util import CdiUtil from io.jans.as.model.authorize import AuthorizeRequestParam from io.jans.as.server.model.config import Constants from io.jans.util import StringHelper from java.lang import String from java.util import Date, HashMap from io.jans.service.cache import CacheProvider import uuid class ResourceOwnerPasswordCredentials(ResourceOwnerPasswordCredentialsType): def __init__(self, currentTimeMillis): self.currentTimeMillis = currentTimeMillis def init(self, customScript, configurationAttributes): print \"ROPC Backchannel. Initializing ...\" print \"ROPC Backchannel. Initialized successfully\" return True def destroy(self, configurationAttributes): print \"ROPC Backchannel. Destroying ...\" print \"ROPC Backchannel. Destroyed successfully\" return True def getApiVersion(self): return 11 def authenticate(self, context): print \"ROPC Backchannel. Authenticate\" # Do generic authentication authenticationService = CdiUtil.bean(AuthenticationService) username = context.getHttpRequest().getParameter(\"username\") password = context.getHttpRequest().getParameter(\"password\") # Add credential validation result = authenticationService.authenticate(username, password) if not result: print \"ROPC Backchannel. Authenticate. Could not authenticate user '%s' \" % username return False context.setUser(authenticationService.getAuthenticatedUser()) print \"ROPC Backchannel. Authenticate. User '%s' authenticated successfully\" % username # Get custom parameters from request customParam1Value = context.getHttpRequest().getParameter(\"custom1\") customParam2Value = context.getHttpRequest().getParameter(\"custom2\") customParameters = {} customParameters[\"custom1\"] = customParam1Value customParameters[\"custom2\"] = customParam2Value print \"ROPC Backchannel. Authenticate. User '%s'. Creating authenticated session with custom attributes: '%s'\" % (username, customParameters) session = self.createNewAuthenticatedSession(context, customParameters) # This is needed to allow store in token entry sessionId authenticationService.configureEventUser(session) print \"ROPC Backchannel. Authenticate. User '%s'. Created authenticated session: '%s'\" % (username, customParameters) return True def createNewAuthenticatedSession(self, context, customParameters={}): sessionIdService = CdiUtil.bean(SessionIdService) user = context.getUser() client = CdiUtil.bean(Identity).getSessionClient().getClient() # Add mandatory session parameters sessionAttributes = HashMap() sessionAttributes.put(Constants.AUTHENTICATED_USER, user.getUserId()) sessionAttributes.put(AuthorizeRequestParam.CLIENT_ID, client.getClientId()) # Add custom session parameters for key, value in customParameters.iteritems(): if StringHelper.isNotEmpty(value): sessionAttributes.put(key, value) # Generate authenticated session sessionId = sessionIdService.generateAuthenticatedSessionId(context.getHttpRequest(), user.getDn(), sessionAttributes) print \"ROPC Backchannel. Generated session id. DN: '%s'\" % sessionId.getDn() # Add state uuid in cache manager and response header bcAuthnToken = str(uuid.uuid4()) cacheProvider = CdiUtil.bean(CacheProvider) cacheProvider.put(300, bcAuthnToken, sessionId.getDn()) print \"ROPC Backchannel. Added cacheProvider id: '%s'\" % bcAuthnToken # Add response header Bc-Authn-Token context.getHttpResponse().setHeader(\"Bc-Authn-Token\", bcAuthnToken) print \"ROPC Backchannel. Added header Bc-Authn-Token\" return sessionId","title":"ROPC backchannel script"},{"location":"admin/auth-server/endpoints/client-registration/","tags":["administration","auth-server","endpoint","DCR","dynamic client registration"],"text":"Dynamic Client Registration (DCR) # Dynamic client registration refers to the process by which a client submits a registration request to the Authorization server and how that request is served by the Authorization server. It is explained in the following specifications: For OpenID Connect relying parties For OAuth 2.0 client (without OpenID Connect features) Client management (CRUD) operations OpenBanking OpenID Dynamic Client Registration Client Registration endpoint # The URI to dynamically register a client to a Janssen Auth Server can be found by checking the registration_endpoint claim of the OpenID Connect configuration reponse, typically deployed at https://<my.jans.server>/.well-known/openid-configuration Configuring Janssen AS to allow clients to dynamically register # The Janssen Authorization server will serve a DCR request if the following configuration parameters are set: dynamicRegistrationEnabled : true or false dynamicRegistrationExpirationTime : Expiration time in seconds for clients created with dynamic registration, 0 or -1 means never expire dcrForbidExpirationTimeInRequest : Boolean value specifying whether to allow to set client's expiration time in seconds during dynamic registration.. Default value is false . Client expiration Client expiration is set based on dynamicRegistrationExpirationTime AS configuration property or otherwise if dcrForbidExpirationTimeInRequest is false then it can be requested in Dynamic Client Registration Request via lifetime parameter which expected value in seconds. Configure the Janssen AS using steps explained in the link Client registration Requests # Client registration request primarily does two things: Communicate client metadata to the authorization server, and optionally authenticate. There are different ways in which the client metadata is communicated to the authorization server using dynamic client registration requests. Using request body Using signed request object (JWT) Using software statement Using request body # A minimal DCR request with only mandatory parameters, looks like the one below. curl -X POST -k -H 'Content-Type: application/json' -i 'https://my.jans.server/jans-auth/restv1/register' \\ --data '{\"redirect_uris\": [\"https://my.jans.client/page\"]}' If the registration is successful, Janssen Server will respond with http response code 201 with JSON body as shown in example below: { \"allow_spontaneous_scopes\" : false , \"application_type\" : \"web\" , \"rpt_as_jwt\" : false , \"registration_client_uri\" : \"https://my.jans.server/jans-auth/restv1/register?client_id=85192707-a38c-496c-806c-ef01a6a3ae4a\" , \"tls_client_auth_subject_dn\" : \"\" , \"run_introspection_script_before_jwt_creation\" : false , \"registration_access_token\" : \"eaee20de-54ce-4217-b960-6b72b55e6cab\" , \"client_id\" : \"85192707-a38c-496c-806c-ef01a6a3ae4a\" , \"token_endpoint_auth_method\" : \"client_secret_basic\" , \"scope\" : \"profile work_phone phone user_name device_sso openid permission uma_protection address email clientinfo org_name offline_access https://jans.io/auth/ssa.portal test https://jans.io/auth/ssa.admin https://jans.io/auth/ssa.developer\" , \"client_secret\" : \"4148f812-92d6-4245-80e0-243524b3b6a4\" , \"client_id_issued_at\" : 1678700818 , \"backchannel_logout_uri\" : [], \"backchannel_logout_session_required\" : false , \"client_name\" : \"my.jans.client\" , \"par_lifetime\" : 600 , \"lifetime\" : 3600 , \"spontaneous_scopes\" : [], \"id_token_signed_response_alg\" : \"RS256\" , \"access_token_as_jwt\" : false , \"grant_types\" : [ \"authorization_code\" , \"refresh_token\" ], \"subject_type\" : \"pairwise\" , \"keep_client_authorization_after_expiration\" : false , \"require_par\" : false , \"redirect_uris\" : [ \"https://my.jans.client/page\" ], \"redirect_uris_regex\" : \"\" , \"additional_audience\" : [], \"frontchannel_logout_session_required\" : false , \"client_secret_expires_at\" : 1678787218 , \"access_token_signing_alg\" : \"RS256\" , \"response_types\" : [ \"code\" ] } In a typical DCR request the client or developer calls the client registration endpoint with a set of client metadata as specified in RFC7591 curl -X POST -k -i 'https://my.jans.server/jans-auth/restv1/register' \\ --data '{ \\ \"redirect_uris\": [\"https://client.example.org/cb\"] \\ \"client_id\": \"c3BhdRkqfX\", \\ \"client_secret\": \"bd136123eeffeef234235805d\", \\ \"grant_types\": [\"authorization_code\", \"refresh_token\"], \\ \"token_endpoint_auth_method\": \"client_secret_basic\", \\ \"jwks_uri\": \"https://client.example.org/my_public_keys.jwks\", \\ \"client_name\": \"My Example\", \\ \"client_name#fr\": \"Mon Exemple\" \\ }' Using signed request object (JWT) # In some use-cases like FAPI implementation, DCR request payload is a JWT. Example: curl -X POST -k -H 'Content-Type: application/jwt' \\ -H 'Accept: application/json' \\ -i 'https://my-jans-server/jans-auth/restv1/register' \\ --data 'eyJraWQiOiJrWTIyZXBUT......ueOg2HkjpggwAEP84jq9Q' When such will be the nature of client registration requests, the following configuration properties should be set in the authorization server: dcrSignatureValidationEnabled - enables DCR signature validation dcrSignatureValidationJwksUri - specifies JWKS URI for all DCR's validations. dcrSignatureValidationJwks - specifies JWKS for all DCR's validations. Configure the Janssen AS using steps explained in the link Using software statement # A signed assertion from a trusted party, a Software statement or Software Statement Assertion (SSA), is used to dynamically register clients to an Authorization server. Example: curl -X POST https://my.jans.server/jans-auth/restv1/register \\ -H \"Content-Type: application/json\" \\ --data-binary @- <<DATA \\ { \"redirect_uris\": [ \"https://client.example.org/cab1\" ], \\ \"software_statement\":\"eyJ0eXAi........j3ouyeYOv8\", \\ \"jwks_uri\":\"https://my.portal/portal/jwks\" \\ } DATA To enable client registrations using Software statements, the AS should be configured using the following configuration parameters: softwareStatementValidationType - The value of this variable is one of the following: NONE - validation is skipped for software statement SCRIPT - (default), invokes getSoftwareStatementJwks of dynamic registration script which has to return jwks. JWKS - claim name within software statement that has inlined JWKS JWKS_URI - claim name within software statement that points to JWKS URI that should lead to keys. dcrSignatureValidationSoftwareStatementJwksURIClaim - specifies claim name inside software statement that should point to JWKS URI. dcrSignatureValidationSoftwareStatementJwksClaim - specifies claim name inside software statement. Value of claim should point to inlined JWKS. trustedSsaIssuers - map of trusted SSA issuers with configuration (e.g. automatically granted scopes). When empty - no issuers validation is performed. When not empty - AS forces validation and each SSA must match at least one entry from list. automaticallyGrantedScopes - automatically granted scopes for trusted issuer { \"https://trusted.as.com\" : { \"automaticallyGrantedScopes\" : [ \"a\" , \"b\" ] }, \"https://another-trusted.as.com\" : { \"automaticallyGrantedScopes\" : [ \"d\" ] } } Configure the AS using steps explained in the link Special mention about FAPI: # In case of a typical client registration request in FAPI implementation , the request object which is a signed JWT (as seen in point 3) is also called an SSA (Software statement Assertion) or DCR payload. This SSA can contain the software_statement inside it which is also a signed JWT. Each of the JWTs, the outer JWT called the SSA and the inner JWT called the software_statement are signed by different entities - the TPP and OBIE respectively. Security Pointers # If dynamicRegistrationEnabled is enabled in the Authorization Server, assess the following points to minimize potential exposure of sensitive personal data: trustedClientEnabled and dynamicRegistrationPersistClientAuthorizations properties determine whether clients are trusted and if consent should be sought from the user before releasing their personal data to the RP dynamicRegistrationScopesParamEnabled controls whether default scopes are globally enabled. If dynamicRegistrationScopesParamEnabled is true then scopes defined as default will be automatically added to any dynamically registered client entry without consent of OP's administrator. Therefore, make an informed decision before setting this field to true . CURL commands to configure Jans-auth server # Jans-auth server is configured using Jans Config Api : Obtain the access token # curl -u \"put_client_id_here:put_config_api_client_secret_here\" https://<your.jans.server>/jans-auth/restv1/token \\ -d \"grant_type=client_credentials&scope=https://jans.io/oauth/jans-auth-server/config/properties.write\" Patch jans-auth server configurations # Patch jans-auth server configurations to reflect anExampleConfigField with the value anExampleConfigField_value curl -X PATCH -k -H 'Content-Type: application/json-patch+json' \\ -i 'https://<your.jans.server>/jans-config-api/api/v1/jans-auth-server/config' \\ -H \"Authorization: Bearer put_access_token_here\" --data '[ { \"op\": \"add\", \"path\": \"anExampleConfigField\", \"value\": \"anExampleConfigField_value\" } ]' For example, to patch the jans-auth server configurations to reflect dynamicRegistrationEnabled with value as true curl -X PATCH -k -H 'Content-Type: application/json-patch+json' \\ -i 'https://<your.jans.server>/jans-config-api/api/v1/jans-auth-server/config' \\ -H \"Authorization: Bearer put_access_token_here\" --data '[ { \"op\": \"add\", \"path\": \"dynamicRegistrationEnabled\", \"value\": \"true\" } ]' Client metadata # Command to obtain metadata schema /opt/jans/jans-cli/config-cli.py --schema /components/schemas/Client Output: { \"dn\" : \"string\" , \"inum\" : \"string\" , \"displayName\" : \"string\" , \"clientSecret\" : \"string\" , \"frontChannelLogoutUri\" : \"string\" , \"frontChannelLogoutSessionRequired\" : true , \"registrationAccessToken\" : \"string\" , \"clientIdIssuedAt\" : \"2022-08-31T10:39:31.385Z\" , \"clientSecretExpiresAt\" : \"2022-08-31T10:39:31.385Z\" , \"redirectUris\" : [ \"https://client.example.org/cb\" ], \"claimRedirectUris\" : [ \"string\" ], \"responseTypes\" : [ \"code\" ], \"grantTypes\" : [ \"authorization_code\" ], \"applicationType\" : \"web\" , \"contacts\" : [ \"string\" ], \"idTokenTokenBindingCnf\" : \"string\" , \"logoUri\" : \"string\" , \"clientUri\" : \"string\" , \"policyUri\" : \"string\" , \"tosUri\" : \"string\" , \"jwksUri\" : \"string\" , \"jwks\" : \"{ \\\"keys\\\" : [ { \\\"e\\\" : \\\"AQAB\\\", \\\"n\\\" : \\\"gmlDX_mgMcHX..\\\" ] }\" , \"sectorIdentifierUri\" : \"string\" , \"subjectType\" : \"pairwise\" , \"idTokenSignedResponseAlg\" : \"HS256\" , \"idTokenEncryptedResponseAlg\" : \"RSA1_5\" , \"idTokenEncryptedResponseEnc\" : \"A128CBC+HS256\" , \"userInfoSignedResponseAlg\" : \"HS256\" , \"userInfoEncryptedResponseAlg\" : \"RSA1_5\" , \"userInfoEncryptedResponseEnc\" : \"A128CBC+HS256\" , \"requestObjectSigningAlg\" : \"HS256\" , \"requestObjectEncryptionAlg\" : \"RSA1_5\" , \"requestObjectEncryptionEnc\" : \"A128CBC+HS256\" , \"tokenEndpointAuthMethod\" : \"client_secret_basic\" , \"tokenEndpointAuthSigningAlg\" : \"HS256\" , \"defaultMaxAge\" : 1000000 , \"requireAuthTime\" : true , \"defaultAcrValues\" : [ \"string\" ], \"initiateLoginUri\" : \"string\" , \"postLogoutRedirectUris\" : [ \"https://client.example.org/logout/page1\" , \"https://client.example.org/logout/page2\" , \"https://client.example.org/logout/page3\" ], \"requestUris\" : [ \"string\" ], \"scopes\" : [ \"read write dolphin\" ], \"claims\" : [ \"string\" ], \"trustedClient\" : false , \"lastAccessTime\" : \"2022-08-31T10:39:31.385Z\" , \"lastLogonTime\" : \"2022-08-31T10:39:31.385Z\" , \"persistClientAuthorizations\" : true , \"includeClaimsInIdToken\" : false , \"refreshTokenLifetime\" : 100000000 , \"accessTokenLifetime\" : 100000000 , \"customAttributes\" : [ { \"name\" : \"name, displayName, birthdate, email\" , \"multiValued\" : true , \"values\" : [ \"string\" ] } ], \"customObjectClasses\" : [ \"string\" ], \"rptAsJwt\" : true , \"accessTokenAsJwt\" : true , \"accessTokenSigningAlg\" : \"HS256\" , \"disabled\" : false , \"authorizedOrigins\" : [ \"string\" ], \"softwareId\" : \"4NRB1-0XZABZI9E6-5SM3R\" , \"softwareVersion\" : \"2.1\" , \"softwareStatement\" : \"string\" , \"attributes\" : { \"tlsClientAuthSubjectDn\" : \"string\" , \"runIntrospectionScriptBeforeAccessTokenAsJwtCreationAndIncludeClaims\" : true , \"keepClientAuthorizationAfterExpiration\" : true , \"allowSpontaneousScopes\" : true , \"spontaneousScopes\" : [ \"string\" ], \"spontaneousScopeScriptDns\" : [ \"string\" ], \"updateTokenScriptDns\" : [ \"string\" ], \"backchannelLogoutUri\" : [ \"string\" ], \"backchannelLogoutSessionRequired\" : true , \"additionalAudience\" : [ \"string\" ], \"postAuthnScripts\" : [ \"string\" ], \"consentGatheringScripts\" : [ \"string\" ], \"introspectionScripts\" : [ \"string\" ], \"rptClaimsScripts\" : [ \"string\" ], \"ropcScripts\" : [ \"string\" ], \"parLifetime\" : 0 , \"requirePar\" : true , \"jansAuthSignedRespAlg\" : \"string\" , \"jansAuthEncRespAlg\" : \"string\" , \"jansAuthEncRespEnc\" : \"string\" , \"jansSubAttr\" : \"string\" , \"redirectUrisRegex\" : \"string\" , \"jansAuthorizedAcr\" : [ \"string\" ], \"jansDefaultPromptLogin\" : true }, \"backchannelTokenDeliveryMode\" : \"poll\" , \"backchannelClientNotificationEndpoint\" : \"string\" , \"backchannelAuthenticationRequestSigningAlg\" : \"RS256\" , \"backchannelUserCodeParameter\" : true , \"expirationDate\" : \"2022-08-31T10:39:31.385Z\" , \"deletable\" : false , \"jansId\" : \"string\" , \"description\" : \"string\" } Signed DCR and SSA validation # In OpenBanking case DCR (Dynamic Client Request) is signed and must contain SSA (Software Statement Assertion) inside it. Non-Normative Example: POST /register HTTP/1.1 Content-Type: application/jwt Accept: application/json Host: auth.bankone.com eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJJREFtYX... Decoded DCR Example: { \"typ\" : \"JWT\" , \"alg\" : \"ES256\" , \"kid\" : \"ABCD1234\" } { \"iss\" : \"Amazon TPPID\" , \"iat\" : 1492760444 , \"exp\" : 1524296444 , \"aud\" : \"https://authn.gluu.org\" , \"scope\" : \"openid makepayment\" , \"token_endpoint_auth_method\" : \"private_key_jwt\" , \"grant_types\" : [ \"authorization_code\" , \"refresh_token\" , \"client_credentials\" ], \"response_types\" : [ \"code\" ], \"id_token_signed_response_alg\" : \"ES256\" , \"request_object_signing_alg\" : \"ES256\" , \"software_id\" : \"65d1f27c-4aea-4549-9c21-60e495a7a86f\" , \"software_statement\" : \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJlbXB0eSIsInN1YiI6IjEyMzQ1Njc4OTAiLCJuYW1lIjoiSm9obiBEb2UiLCJhZG1pbiI6dHJ1ZSwic2NvcGUiOiJzY29wZTEgc2NvcGUyIiwiY2xhaW1zIjoiY2xhaW0xIGNsYWltMiIsImlhdCI6MTY2OTgwNjc2MywiZXhwIjoxNjY5ODEwMzYzfQ.db0WQh2lmHkNYCWT8tSW684hqWTPJDTElppy42XM_lc\" } { Sig nature } AS has dcrSsaValidationConfigs configuration value which holds json array. It can be used to validated both DCR and SSA. Single item of this array has following properties: id - REQUIRED primary key for the entity type - REQUIRED either ssa or dcr displayName - Human friendly name in case we build an admin GUI for this description - Human friendly details scope - For SSA only -- list of allowed scopes the issuer can enable the client to request automatically. If not present, all scopes are allowed. allowed_claims - Any claims not listed in this list will be dropped. If not present, all claims are allowed. jwks - Public key jwks_uri - URI of public key issuers - For MTLS, list of issuers trusted configuration_endpoint - points to discovery page, e.g. https://examle.com/.well-known/openid-configuration configuration_endpoint_claim - e.g. ssa_jwks_endpoint shared_secret - for MTLS HMAC One of jwks , jwks_uri or issuers or configuration_endpoint is required. Non-normative example of dcrSsaValidationConfigs [ { \"id\" : \"735ee1c0-895d-4398-9c1b-9ad852257cc0\" , \"type\" : \"DCR\" , \"scopes\" : [ \"read\" , \"write\" ], \"allowedClaims\" : [ \"exp\" , \"iat\" ], \"jwks\" : \"{jwks here}\" , \"issuers\" : [ \"Acme\" ], \"sharedSecret\" : \"secret\" }, { \"id\" : \"7907cd0b-0f9f-4b4f-aaa2-0d0614546246\" , \"type\" : \"SSA\" , \"scopes\" : [ \"my_read\" , \"my_write\" ], \"allowedClaims\" : [ \"test_exp\" , \"test_iat\" ], \"jwks\" : \"{jwks here}\" , \"issuers\" : [ \"jans-auth\" ], \"sharedSecret\" : \"secret\" }, { \"id\" : \"1e95c9b1-04d0-4440-9362-88f4e1e62d76\" , \"type\" : \"SSA\" , \"jwks\" : \"{jwks here}\" , \"issuers\" : [ \"empty\" ], \"sharedSecret\" : \"secret\" } ] Signed DCR validation # DCR can be validated with two approaches. Via dcrSsaValidationConfigs configuration property - RECOMMENDED When create entry in dcrSsaValidationConfigs configuration property : - type MUST be equal to DCR value - issuers MUST have value which equals to iss claim in DCR. Via other configuration properties trustedSsaIssuers - map of trusted SSA issuers with configuration (e.g. automatically granted scopes). When empty - no issuers validation is performed. When not empty - AS forces validation and each SSA must match at least one entry from list. automaticallyGrantedScopes - automatically granted scopes for trusted issuer { \"https://trusted.as.com\" : { \"automaticallyGrantedScopes\" : [ \"a\" , \"b\" ] }, \"https://another-trusted.as.com\" : { \"automaticallyGrantedScopes\" : [ \"d\" ] } } dcrSignatureValidationJwks - specifies JWKS for DCR's validations dcrSignatureValidationJwksUri - specifies JWKS URI for DCR's validations dcrSignatureValidationSharedSecret - if HMAC is used, this is the shared secret dcrSignatureValidationEnabled - boolean value enables DCR signature validation. Default is false dcrSignatureValidationSoftwareStatementJwksURIClaim - specifies claim name inside software statement. Value of claim should point to JWKS URI dcrSignatureValidationSoftwareStatementJwksClaim - specifies claim name inside software statement. Value of claim should point to inlined JWKS dcrAuthorizationWithClientCredentials - boolean value indicating if DCR authorization to be performed using client credentials SSA Validation # SSA is validated based on softwareStatementValidationType which is enum. softwareStatementValidationType = builtin - validation is performed against dcrSsaValidationConfigs configuration property, where type MUST be equal to SSA value issuers MUST have value which equals to iss claim in DCR. softwareStatementValidationType = script - jwks and hmac secret are returned by dynamic client registration script softwareStatementValidationType = jwks_uri , allows to specify jwks_uri claim name from software_statement. Claim name specified by softwareStatementValidationClaimName configuration property. softwareStatementValidationType = jwks , allows to specify jwks claim name from software_statement. Claim name specified by softwareStatementValidationClaimName configuration property. softwareStatementValidationType = none , no validation. Customizing the behavior of the AS using Interception script # Janssen's allows developers to register a client with the Authorization Server (AS) without any intervention by the administrator. By default, all clients are given the same default scopes and attributes. Through the use of an interception script, this behavior can be modified. These scripts can be used to analyze the registration request and apply customizations to the registered client. For example, a client can be given specific scopes by analyzing the Software Statement that is sent with the registration request. Further reading here Dynamic registration custom attributes # CRUD Operations # Janssen Server allows client management through client configuration endpoint (RFC 7592) . JSON response to client registration request contains registration_client_uri and registration_access_token data elements. The URI mentioned using registration_client_uri provides functionality to read, update and delete the client. This endpoint is a protected endpoint where request has to be authenticated using access token registration_access_token . Read client metadata # A read request to the same client that got created in earlier section should be as shown in the example below. HTTP method GET is used to send the request which signifies that it is a request to read client metadata. curl -k -H 'Authorization: Bearer eaee20de-54ce-4217-b960-6b72b55e6cab' \\ -i 'https://my.jans.server/jans-auth/restv1/register?client_id=85192707-a38c-496c-806c-ef01a6a3ae4a' JSON response from Janssen Server will contain the current state of client metadata. Update client metadata # Client metadata can be updated by sending request with PUT HTTP method to registration_client_uri . Janssen Server replaces current metadata with the one sent with update request as outlined in the specification Delete Client # Client can be deleted by sending a request using DELETE method to registration_client_uri . A successful delete action will invalidate the \"client_id\", \"client_secret\", and \"registration_access_token\" for this client, thereby preventing the \"client_id\" from being used at either the authorization endpoint or token endpoint of the authorization server. Internationalization for Client metadata #","title":"Client Registration"},{"location":"admin/auth-server/endpoints/client-registration/#dynamic-client-registration-dcr","text":"Dynamic client registration refers to the process by which a client submits a registration request to the Authorization server and how that request is served by the Authorization server. It is explained in the following specifications: For OpenID Connect relying parties For OAuth 2.0 client (without OpenID Connect features) Client management (CRUD) operations OpenBanking OpenID Dynamic Client Registration","title":"Dynamic Client Registration (DCR)"},{"location":"admin/auth-server/endpoints/client-registration/#client-registration-endpoint","text":"The URI to dynamically register a client to a Janssen Auth Server can be found by checking the registration_endpoint claim of the OpenID Connect configuration reponse, typically deployed at https://<my.jans.server>/.well-known/openid-configuration","title":"Client Registration endpoint"},{"location":"admin/auth-server/endpoints/client-registration/#configuring-janssen-as-to-allow-clients-to-dynamically-register","text":"The Janssen Authorization server will serve a DCR request if the following configuration parameters are set: dynamicRegistrationEnabled : true or false dynamicRegistrationExpirationTime : Expiration time in seconds for clients created with dynamic registration, 0 or -1 means never expire dcrForbidExpirationTimeInRequest : Boolean value specifying whether to allow to set client's expiration time in seconds during dynamic registration.. Default value is false . Client expiration Client expiration is set based on dynamicRegistrationExpirationTime AS configuration property or otherwise if dcrForbidExpirationTimeInRequest is false then it can be requested in Dynamic Client Registration Request via lifetime parameter which expected value in seconds. Configure the Janssen AS using steps explained in the link","title":"Configuring Janssen AS to allow clients to dynamically register"},{"location":"admin/auth-server/endpoints/client-registration/#client-registration-requests","text":"Client registration request primarily does two things: Communicate client metadata to the authorization server, and optionally authenticate. There are different ways in which the client metadata is communicated to the authorization server using dynamic client registration requests. Using request body Using signed request object (JWT) Using software statement","title":"Client registration Requests"},{"location":"admin/auth-server/endpoints/client-registration/#using-request-body","text":"A minimal DCR request with only mandatory parameters, looks like the one below. curl -X POST -k -H 'Content-Type: application/json' -i 'https://my.jans.server/jans-auth/restv1/register' \\ --data '{\"redirect_uris\": [\"https://my.jans.client/page\"]}' If the registration is successful, Janssen Server will respond with http response code 201 with JSON body as shown in example below: { \"allow_spontaneous_scopes\" : false , \"application_type\" : \"web\" , \"rpt_as_jwt\" : false , \"registration_client_uri\" : \"https://my.jans.server/jans-auth/restv1/register?client_id=85192707-a38c-496c-806c-ef01a6a3ae4a\" , \"tls_client_auth_subject_dn\" : \"\" , \"run_introspection_script_before_jwt_creation\" : false , \"registration_access_token\" : \"eaee20de-54ce-4217-b960-6b72b55e6cab\" , \"client_id\" : \"85192707-a38c-496c-806c-ef01a6a3ae4a\" , \"token_endpoint_auth_method\" : \"client_secret_basic\" , \"scope\" : \"profile work_phone phone user_name device_sso openid permission uma_protection address email clientinfo org_name offline_access https://jans.io/auth/ssa.portal test https://jans.io/auth/ssa.admin https://jans.io/auth/ssa.developer\" , \"client_secret\" : \"4148f812-92d6-4245-80e0-243524b3b6a4\" , \"client_id_issued_at\" : 1678700818 , \"backchannel_logout_uri\" : [], \"backchannel_logout_session_required\" : false , \"client_name\" : \"my.jans.client\" , \"par_lifetime\" : 600 , \"lifetime\" : 3600 , \"spontaneous_scopes\" : [], \"id_token_signed_response_alg\" : \"RS256\" , \"access_token_as_jwt\" : false , \"grant_types\" : [ \"authorization_code\" , \"refresh_token\" ], \"subject_type\" : \"pairwise\" , \"keep_client_authorization_after_expiration\" : false , \"require_par\" : false , \"redirect_uris\" : [ \"https://my.jans.client/page\" ], \"redirect_uris_regex\" : \"\" , \"additional_audience\" : [], \"frontchannel_logout_session_required\" : false , \"client_secret_expires_at\" : 1678787218 , \"access_token_signing_alg\" : \"RS256\" , \"response_types\" : [ \"code\" ] } In a typical DCR request the client or developer calls the client registration endpoint with a set of client metadata as specified in RFC7591 curl -X POST -k -i 'https://my.jans.server/jans-auth/restv1/register' \\ --data '{ \\ \"redirect_uris\": [\"https://client.example.org/cb\"] \\ \"client_id\": \"c3BhdRkqfX\", \\ \"client_secret\": \"bd136123eeffeef234235805d\", \\ \"grant_types\": [\"authorization_code\", \"refresh_token\"], \\ \"token_endpoint_auth_method\": \"client_secret_basic\", \\ \"jwks_uri\": \"https://client.example.org/my_public_keys.jwks\", \\ \"client_name\": \"My Example\", \\ \"client_name#fr\": \"Mon Exemple\" \\ }'","title":"Using request body"},{"location":"admin/auth-server/endpoints/client-registration/#using-signed-request-object-jwt","text":"In some use-cases like FAPI implementation, DCR request payload is a JWT. Example: curl -X POST -k -H 'Content-Type: application/jwt' \\ -H 'Accept: application/json' \\ -i 'https://my-jans-server/jans-auth/restv1/register' \\ --data 'eyJraWQiOiJrWTIyZXBUT......ueOg2HkjpggwAEP84jq9Q' When such will be the nature of client registration requests, the following configuration properties should be set in the authorization server: dcrSignatureValidationEnabled - enables DCR signature validation dcrSignatureValidationJwksUri - specifies JWKS URI for all DCR's validations. dcrSignatureValidationJwks - specifies JWKS for all DCR's validations. Configure the Janssen AS using steps explained in the link","title":"Using signed request object (JWT)"},{"location":"admin/auth-server/endpoints/client-registration/#using-software-statement","text":"A signed assertion from a trusted party, a Software statement or Software Statement Assertion (SSA), is used to dynamically register clients to an Authorization server. Example: curl -X POST https://my.jans.server/jans-auth/restv1/register \\ -H \"Content-Type: application/json\" \\ --data-binary @- <<DATA \\ { \"redirect_uris\": [ \"https://client.example.org/cab1\" ], \\ \"software_statement\":\"eyJ0eXAi........j3ouyeYOv8\", \\ \"jwks_uri\":\"https://my.portal/portal/jwks\" \\ } DATA To enable client registrations using Software statements, the AS should be configured using the following configuration parameters: softwareStatementValidationType - The value of this variable is one of the following: NONE - validation is skipped for software statement SCRIPT - (default), invokes getSoftwareStatementJwks of dynamic registration script which has to return jwks. JWKS - claim name within software statement that has inlined JWKS JWKS_URI - claim name within software statement that points to JWKS URI that should lead to keys. dcrSignatureValidationSoftwareStatementJwksURIClaim - specifies claim name inside software statement that should point to JWKS URI. dcrSignatureValidationSoftwareStatementJwksClaim - specifies claim name inside software statement. Value of claim should point to inlined JWKS. trustedSsaIssuers - map of trusted SSA issuers with configuration (e.g. automatically granted scopes). When empty - no issuers validation is performed. When not empty - AS forces validation and each SSA must match at least one entry from list. automaticallyGrantedScopes - automatically granted scopes for trusted issuer { \"https://trusted.as.com\" : { \"automaticallyGrantedScopes\" : [ \"a\" , \"b\" ] }, \"https://another-trusted.as.com\" : { \"automaticallyGrantedScopes\" : [ \"d\" ] } } Configure the AS using steps explained in the link","title":"Using software statement"},{"location":"admin/auth-server/endpoints/client-registration/#special-mention-about-fapi","text":"In case of a typical client registration request in FAPI implementation , the request object which is a signed JWT (as seen in point 3) is also called an SSA (Software statement Assertion) or DCR payload. This SSA can contain the software_statement inside it which is also a signed JWT. Each of the JWTs, the outer JWT called the SSA and the inner JWT called the software_statement are signed by different entities - the TPP and OBIE respectively.","title":"Special mention about FAPI:"},{"location":"admin/auth-server/endpoints/client-registration/#security-pointers","text":"If dynamicRegistrationEnabled is enabled in the Authorization Server, assess the following points to minimize potential exposure of sensitive personal data: trustedClientEnabled and dynamicRegistrationPersistClientAuthorizations properties determine whether clients are trusted and if consent should be sought from the user before releasing their personal data to the RP dynamicRegistrationScopesParamEnabled controls whether default scopes are globally enabled. If dynamicRegistrationScopesParamEnabled is true then scopes defined as default will be automatically added to any dynamically registered client entry without consent of OP's administrator. Therefore, make an informed decision before setting this field to true .","title":"Security Pointers"},{"location":"admin/auth-server/endpoints/client-registration/#curl-commands-to-configure-jans-auth-server","text":"Jans-auth server is configured using Jans Config Api :","title":"CURL commands to configure Jans-auth server"},{"location":"admin/auth-server/endpoints/client-registration/#obtain-the-access-token","text":"curl -u \"put_client_id_here:put_config_api_client_secret_here\" https://<your.jans.server>/jans-auth/restv1/token \\ -d \"grant_type=client_credentials&scope=https://jans.io/oauth/jans-auth-server/config/properties.write\"","title":"Obtain the access token"},{"location":"admin/auth-server/endpoints/client-registration/#patch-jans-auth-server-configurations","text":"Patch jans-auth server configurations to reflect anExampleConfigField with the value anExampleConfigField_value curl -X PATCH -k -H 'Content-Type: application/json-patch+json' \\ -i 'https://<your.jans.server>/jans-config-api/api/v1/jans-auth-server/config' \\ -H \"Authorization: Bearer put_access_token_here\" --data '[ { \"op\": \"add\", \"path\": \"anExampleConfigField\", \"value\": \"anExampleConfigField_value\" } ]' For example, to patch the jans-auth server configurations to reflect dynamicRegistrationEnabled with value as true curl -X PATCH -k -H 'Content-Type: application/json-patch+json' \\ -i 'https://<your.jans.server>/jans-config-api/api/v1/jans-auth-server/config' \\ -H \"Authorization: Bearer put_access_token_here\" --data '[ { \"op\": \"add\", \"path\": \"dynamicRegistrationEnabled\", \"value\": \"true\" } ]'","title":"Patch jans-auth server configurations"},{"location":"admin/auth-server/endpoints/client-registration/#client-metadata","text":"Command to obtain metadata schema /opt/jans/jans-cli/config-cli.py --schema /components/schemas/Client Output: { \"dn\" : \"string\" , \"inum\" : \"string\" , \"displayName\" : \"string\" , \"clientSecret\" : \"string\" , \"frontChannelLogoutUri\" : \"string\" , \"frontChannelLogoutSessionRequired\" : true , \"registrationAccessToken\" : \"string\" , \"clientIdIssuedAt\" : \"2022-08-31T10:39:31.385Z\" , \"clientSecretExpiresAt\" : \"2022-08-31T10:39:31.385Z\" , \"redirectUris\" : [ \"https://client.example.org/cb\" ], \"claimRedirectUris\" : [ \"string\" ], \"responseTypes\" : [ \"code\" ], \"grantTypes\" : [ \"authorization_code\" ], \"applicationType\" : \"web\" , \"contacts\" : [ \"string\" ], \"idTokenTokenBindingCnf\" : \"string\" , \"logoUri\" : \"string\" , \"clientUri\" : \"string\" , \"policyUri\" : \"string\" , \"tosUri\" : \"string\" , \"jwksUri\" : \"string\" , \"jwks\" : \"{ \\\"keys\\\" : [ { \\\"e\\\" : \\\"AQAB\\\", \\\"n\\\" : \\\"gmlDX_mgMcHX..\\\" ] }\" , \"sectorIdentifierUri\" : \"string\" , \"subjectType\" : \"pairwise\" , \"idTokenSignedResponseAlg\" : \"HS256\" , \"idTokenEncryptedResponseAlg\" : \"RSA1_5\" , \"idTokenEncryptedResponseEnc\" : \"A128CBC+HS256\" , \"userInfoSignedResponseAlg\" : \"HS256\" , \"userInfoEncryptedResponseAlg\" : \"RSA1_5\" , \"userInfoEncryptedResponseEnc\" : \"A128CBC+HS256\" , \"requestObjectSigningAlg\" : \"HS256\" , \"requestObjectEncryptionAlg\" : \"RSA1_5\" , \"requestObjectEncryptionEnc\" : \"A128CBC+HS256\" , \"tokenEndpointAuthMethod\" : \"client_secret_basic\" , \"tokenEndpointAuthSigningAlg\" : \"HS256\" , \"defaultMaxAge\" : 1000000 , \"requireAuthTime\" : true , \"defaultAcrValues\" : [ \"string\" ], \"initiateLoginUri\" : \"string\" , \"postLogoutRedirectUris\" : [ \"https://client.example.org/logout/page1\" , \"https://client.example.org/logout/page2\" , \"https://client.example.org/logout/page3\" ], \"requestUris\" : [ \"string\" ], \"scopes\" : [ \"read write dolphin\" ], \"claims\" : [ \"string\" ], \"trustedClient\" : false , \"lastAccessTime\" : \"2022-08-31T10:39:31.385Z\" , \"lastLogonTime\" : \"2022-08-31T10:39:31.385Z\" , \"persistClientAuthorizations\" : true , \"includeClaimsInIdToken\" : false , \"refreshTokenLifetime\" : 100000000 , \"accessTokenLifetime\" : 100000000 , \"customAttributes\" : [ { \"name\" : \"name, displayName, birthdate, email\" , \"multiValued\" : true , \"values\" : [ \"string\" ] } ], \"customObjectClasses\" : [ \"string\" ], \"rptAsJwt\" : true , \"accessTokenAsJwt\" : true , \"accessTokenSigningAlg\" : \"HS256\" , \"disabled\" : false , \"authorizedOrigins\" : [ \"string\" ], \"softwareId\" : \"4NRB1-0XZABZI9E6-5SM3R\" , \"softwareVersion\" : \"2.1\" , \"softwareStatement\" : \"string\" , \"attributes\" : { \"tlsClientAuthSubjectDn\" : \"string\" , \"runIntrospectionScriptBeforeAccessTokenAsJwtCreationAndIncludeClaims\" : true , \"keepClientAuthorizationAfterExpiration\" : true , \"allowSpontaneousScopes\" : true , \"spontaneousScopes\" : [ \"string\" ], \"spontaneousScopeScriptDns\" : [ \"string\" ], \"updateTokenScriptDns\" : [ \"string\" ], \"backchannelLogoutUri\" : [ \"string\" ], \"backchannelLogoutSessionRequired\" : true , \"additionalAudience\" : [ \"string\" ], \"postAuthnScripts\" : [ \"string\" ], \"consentGatheringScripts\" : [ \"string\" ], \"introspectionScripts\" : [ \"string\" ], \"rptClaimsScripts\" : [ \"string\" ], \"ropcScripts\" : [ \"string\" ], \"parLifetime\" : 0 , \"requirePar\" : true , \"jansAuthSignedRespAlg\" : \"string\" , \"jansAuthEncRespAlg\" : \"string\" , \"jansAuthEncRespEnc\" : \"string\" , \"jansSubAttr\" : \"string\" , \"redirectUrisRegex\" : \"string\" , \"jansAuthorizedAcr\" : [ \"string\" ], \"jansDefaultPromptLogin\" : true }, \"backchannelTokenDeliveryMode\" : \"poll\" , \"backchannelClientNotificationEndpoint\" : \"string\" , \"backchannelAuthenticationRequestSigningAlg\" : \"RS256\" , \"backchannelUserCodeParameter\" : true , \"expirationDate\" : \"2022-08-31T10:39:31.385Z\" , \"deletable\" : false , \"jansId\" : \"string\" , \"description\" : \"string\" }","title":"Client metadata"},{"location":"admin/auth-server/endpoints/client-registration/#signed-dcr-and-ssa-validation","text":"In OpenBanking case DCR (Dynamic Client Request) is signed and must contain SSA (Software Statement Assertion) inside it. Non-Normative Example: POST /register HTTP/1.1 Content-Type: application/jwt Accept: application/json Host: auth.bankone.com eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJJREFtYX... Decoded DCR Example: { \"typ\" : \"JWT\" , \"alg\" : \"ES256\" , \"kid\" : \"ABCD1234\" } { \"iss\" : \"Amazon TPPID\" , \"iat\" : 1492760444 , \"exp\" : 1524296444 , \"aud\" : \"https://authn.gluu.org\" , \"scope\" : \"openid makepayment\" , \"token_endpoint_auth_method\" : \"private_key_jwt\" , \"grant_types\" : [ \"authorization_code\" , \"refresh_token\" , \"client_credentials\" ], \"response_types\" : [ \"code\" ], \"id_token_signed_response_alg\" : \"ES256\" , \"request_object_signing_alg\" : \"ES256\" , \"software_id\" : \"65d1f27c-4aea-4549-9c21-60e495a7a86f\" , \"software_statement\" : \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJlbXB0eSIsInN1YiI6IjEyMzQ1Njc4OTAiLCJuYW1lIjoiSm9obiBEb2UiLCJhZG1pbiI6dHJ1ZSwic2NvcGUiOiJzY29wZTEgc2NvcGUyIiwiY2xhaW1zIjoiY2xhaW0xIGNsYWltMiIsImlhdCI6MTY2OTgwNjc2MywiZXhwIjoxNjY5ODEwMzYzfQ.db0WQh2lmHkNYCWT8tSW684hqWTPJDTElppy42XM_lc\" } { Sig nature } AS has dcrSsaValidationConfigs configuration value which holds json array. It can be used to validated both DCR and SSA. Single item of this array has following properties: id - REQUIRED primary key for the entity type - REQUIRED either ssa or dcr displayName - Human friendly name in case we build an admin GUI for this description - Human friendly details scope - For SSA only -- list of allowed scopes the issuer can enable the client to request automatically. If not present, all scopes are allowed. allowed_claims - Any claims not listed in this list will be dropped. If not present, all claims are allowed. jwks - Public key jwks_uri - URI of public key issuers - For MTLS, list of issuers trusted configuration_endpoint - points to discovery page, e.g. https://examle.com/.well-known/openid-configuration configuration_endpoint_claim - e.g. ssa_jwks_endpoint shared_secret - for MTLS HMAC One of jwks , jwks_uri or issuers or configuration_endpoint is required. Non-normative example of dcrSsaValidationConfigs [ { \"id\" : \"735ee1c0-895d-4398-9c1b-9ad852257cc0\" , \"type\" : \"DCR\" , \"scopes\" : [ \"read\" , \"write\" ], \"allowedClaims\" : [ \"exp\" , \"iat\" ], \"jwks\" : \"{jwks here}\" , \"issuers\" : [ \"Acme\" ], \"sharedSecret\" : \"secret\" }, { \"id\" : \"7907cd0b-0f9f-4b4f-aaa2-0d0614546246\" , \"type\" : \"SSA\" , \"scopes\" : [ \"my_read\" , \"my_write\" ], \"allowedClaims\" : [ \"test_exp\" , \"test_iat\" ], \"jwks\" : \"{jwks here}\" , \"issuers\" : [ \"jans-auth\" ], \"sharedSecret\" : \"secret\" }, { \"id\" : \"1e95c9b1-04d0-4440-9362-88f4e1e62d76\" , \"type\" : \"SSA\" , \"jwks\" : \"{jwks here}\" , \"issuers\" : [ \"empty\" ], \"sharedSecret\" : \"secret\" } ]","title":"Signed DCR and SSA validation"},{"location":"admin/auth-server/endpoints/client-registration/#signed-dcr-validation","text":"DCR can be validated with two approaches. Via dcrSsaValidationConfigs configuration property - RECOMMENDED When create entry in dcrSsaValidationConfigs configuration property : - type MUST be equal to DCR value - issuers MUST have value which equals to iss claim in DCR. Via other configuration properties trustedSsaIssuers - map of trusted SSA issuers with configuration (e.g. automatically granted scopes). When empty - no issuers validation is performed. When not empty - AS forces validation and each SSA must match at least one entry from list. automaticallyGrantedScopes - automatically granted scopes for trusted issuer { \"https://trusted.as.com\" : { \"automaticallyGrantedScopes\" : [ \"a\" , \"b\" ] }, \"https://another-trusted.as.com\" : { \"automaticallyGrantedScopes\" : [ \"d\" ] } } dcrSignatureValidationJwks - specifies JWKS for DCR's validations dcrSignatureValidationJwksUri - specifies JWKS URI for DCR's validations dcrSignatureValidationSharedSecret - if HMAC is used, this is the shared secret dcrSignatureValidationEnabled - boolean value enables DCR signature validation. Default is false dcrSignatureValidationSoftwareStatementJwksURIClaim - specifies claim name inside software statement. Value of claim should point to JWKS URI dcrSignatureValidationSoftwareStatementJwksClaim - specifies claim name inside software statement. Value of claim should point to inlined JWKS dcrAuthorizationWithClientCredentials - boolean value indicating if DCR authorization to be performed using client credentials","title":"Signed DCR validation"},{"location":"admin/auth-server/endpoints/client-registration/#ssa-validation","text":"SSA is validated based on softwareStatementValidationType which is enum. softwareStatementValidationType = builtin - validation is performed against dcrSsaValidationConfigs configuration property, where type MUST be equal to SSA value issuers MUST have value which equals to iss claim in DCR. softwareStatementValidationType = script - jwks and hmac secret are returned by dynamic client registration script softwareStatementValidationType = jwks_uri , allows to specify jwks_uri claim name from software_statement. Claim name specified by softwareStatementValidationClaimName configuration property. softwareStatementValidationType = jwks , allows to specify jwks claim name from software_statement. Claim name specified by softwareStatementValidationClaimName configuration property. softwareStatementValidationType = none , no validation.","title":"SSA Validation"},{"location":"admin/auth-server/endpoints/client-registration/#customizing-the-behavior-of-the-as-using-interception-script","text":"Janssen's allows developers to register a client with the Authorization Server (AS) without any intervention by the administrator. By default, all clients are given the same default scopes and attributes. Through the use of an interception script, this behavior can be modified. These scripts can be used to analyze the registration request and apply customizations to the registered client. For example, a client can be given specific scopes by analyzing the Software Statement that is sent with the registration request. Further reading here","title":"Customizing the behavior of the AS using Interception script"},{"location":"admin/auth-server/endpoints/client-registration/#dynamic-registration-custom-attributes","text":"","title":"Dynamic registration custom attributes"},{"location":"admin/auth-server/endpoints/client-registration/#crud-operations","text":"Janssen Server allows client management through client configuration endpoint (RFC 7592) . JSON response to client registration request contains registration_client_uri and registration_access_token data elements. The URI mentioned using registration_client_uri provides functionality to read, update and delete the client. This endpoint is a protected endpoint where request has to be authenticated using access token registration_access_token .","title":"CRUD Operations"},{"location":"admin/auth-server/endpoints/client-registration/#read-client-metadata","text":"A read request to the same client that got created in earlier section should be as shown in the example below. HTTP method GET is used to send the request which signifies that it is a request to read client metadata. curl -k -H 'Authorization: Bearer eaee20de-54ce-4217-b960-6b72b55e6cab' \\ -i 'https://my.jans.server/jans-auth/restv1/register?client_id=85192707-a38c-496c-806c-ef01a6a3ae4a' JSON response from Janssen Server will contain the current state of client metadata.","title":"Read client metadata"},{"location":"admin/auth-server/endpoints/client-registration/#update-client-metadata","text":"Client metadata can be updated by sending request with PUT HTTP method to registration_client_uri . Janssen Server replaces current metadata with the one sent with update request as outlined in the specification","title":"Update client metadata"},{"location":"admin/auth-server/endpoints/client-registration/#delete-client","text":"Client can be deleted by sending a request using DELETE method to registration_client_uri . A successful delete action will invalidate the \"client_id\", \"client_secret\", and \"registration_access_token\" for this client, thereby preventing the \"client_id\" from being used at either the authorization endpoint or token endpoint of the authorization server.","title":"Delete Client"},{"location":"admin/auth-server/endpoints/client-registration/#internationalization-for-client-metadata","text":"","title":"Internationalization for Client metadata"},{"location":"admin/auth-server/endpoints/clientinfo/","tags":["administration","auth-server","clientinfo","endpoint"],"text":"Overview # /clientinfo endpoint is an OAuth2 protected endpoint that is used to retrieve claims about registered client. URL to access clientinfo endpoint on Janssen Server is listed in the response of Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration clientinfo_endpoint claim in the response specifies the URL for clientinfo endpoint. By default, clientinfo endpoint looks like below: https://janssen.server.host/jans-auth/restv1/clientinfo Since clientinfo endpoint is an OAuth2 protected resource, a valid access token with appropriate scope is required to access the endpoint. More information about request and response of the clientinfo endpoint can be found in the OpenAPI specification of jans-auth-server module . Disabling The Endpoint Using Feature Flag # /clientinfo endpoint can be enabled or disable using clientinfo feature flag . Use Janssen Text-based UI(TUI) or Janssen command-line interface to perform this task. When using TUI, navigate via Auth Server -> Properties -> enabledFeatureFlags to screen below. From here, enable or disable clientinfo flag as required. Configuration Properties # Clientinfo endpoint can be further configured using Janssen Server configuration properties listed below. When using Janssen Text-based UI(TUI) to configure the properties, navigate via Auth Server -> Properties . clientInfoEndpoint mtlsClientInfoEndpoint Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Clientinfo"},{"location":"admin/auth-server/endpoints/clientinfo/#overview","text":"/clientinfo endpoint is an OAuth2 protected endpoint that is used to retrieve claims about registered client. URL to access clientinfo endpoint on Janssen Server is listed in the response of Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration clientinfo_endpoint claim in the response specifies the URL for clientinfo endpoint. By default, clientinfo endpoint looks like below: https://janssen.server.host/jans-auth/restv1/clientinfo Since clientinfo endpoint is an OAuth2 protected resource, a valid access token with appropriate scope is required to access the endpoint. More information about request and response of the clientinfo endpoint can be found in the OpenAPI specification of jans-auth-server module .","title":"Overview"},{"location":"admin/auth-server/endpoints/clientinfo/#disabling-the-endpoint-using-feature-flag","text":"/clientinfo endpoint can be enabled or disable using clientinfo feature flag . Use Janssen Text-based UI(TUI) or Janssen command-line interface to perform this task. When using TUI, navigate via Auth Server -> Properties -> enabledFeatureFlags to screen below. From here, enable or disable clientinfo flag as required.","title":"Disabling The Endpoint Using Feature Flag"},{"location":"admin/auth-server/endpoints/clientinfo/#configuration-properties","text":"Clientinfo endpoint can be further configured using Janssen Server configuration properties listed below. When using Janssen Text-based UI(TUI) to configure the properties, navigate via Auth Server -> Properties . clientInfoEndpoint mtlsClientInfoEndpoint","title":"Configuration Properties"},{"location":"admin/auth-server/endpoints/clientinfo/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/endpoints/configuration/","tags":["administration","auth-server","well-known","configuration","endpoint"],"text":"OpenID Configuration Endpoint aka .well-known/openid-configuration # The Configuration Endpoint returns both the OP server metadata, and OAuth AS metdata, most of which is defined in the OpenID Discovery Spec , although other configuration metadata is defined in other OpenID specifications, or in OAuth specifications. If you want to customize the configuration response, you can use the OpenID Config Interception Script , which enables you to filter the results, modify claim values, or add claims. If you want to explicitly allow only certain OpenID Metadata claims, you can supply a list of the claims in the opConfigMetadataAllowList Auth Server Property. Below is a list of all the current available claims, and where they are specified. Claim Origin access_token_signing_alg_values_supported ? acr_values_supported OpenID authorization_encryption_alg_values_supported ? authorization_encryption_enc_values_supported ? authorization_endpoint OpenID authorization_signing_alg_values_supported ? backchannel_authentication_endpoint ? backchannel_logout_session_supported ? backchannel_logout_supported ? backchannel_token_delivery_modes_supported ? backchannel_user_code_parameter_supported ? check_session_iframe ? claim_types_supported ? claims_locales_supported ? claims_parameter_supported ? claims_supported OpenID clientinfo_endpoint ? device_authorization_endpoint ? display_values_supported ? dpop_signing_alg_values_supported ? end_session_endpoint ? frontchannel_logout_session_supported ? frontchannel_logout_supported ? grant_types_supported ? id_token_encryption_alg_values_supported ? id_token_encryption_enc_values_supported ? id_token_signing_alg_values_supported ? id_token_token_binding_cnf_values_supported ? introspection_endpoint ? issuer OpenID jwks_uri OpenID op_tos_uri OpenID pushed_authorization_request_endpoint ? registration_endpoint OpenID request_object_encryption_alg_values_supported OpenID request_object_encryption_enc_values_supported OpenID request_object_signing_alg_values_supported OpenID request_parameter_supported OpenID request_uri_parameter_supported OpenID require_pushed_authorization_requests ? require_request_uri_registration ? response_modes_supported OpenID response_types_supported OpenID revocation_endpoint ? scopes_supported ? service_documentation ? session_revocation_endpoint ? ssa_endpoint Janssen subject_types_supported OpenID tls_client_certificate_bound_access_tokens ? token_endpoint OpenID token_endpoint_auth_methods_supported OpenID token_endpoint_auth_signing_alg_values_supported OpenID ui_locales_supported OpenID userinfo_encryption_alg_values_supported OpenID userinfo_encryption_enc_values_supported OpenID userinfo_endpoint OpenID userinfo_signing_alg_values_supported OpenID Notes on specific OP Server Metadata claims # claims_supported Each user claim (in Jans jargon, \"Attribute\") has a property called jansHideOnDiscovery --if you don't want a claim to appear in .well-known/openid-configuration , set this to true for the Attribute entity. ssa_endpoint This is the endpoint which issues Software Statement Assertions JWT's. It is an OAuth protected endpoint.","title":"OpenID Configuration"},{"location":"admin/auth-server/endpoints/configuration/#openid-configuration-endpoint-aka-well-knownopenid-configuration","text":"The Configuration Endpoint returns both the OP server metadata, and OAuth AS metdata, most of which is defined in the OpenID Discovery Spec , although other configuration metadata is defined in other OpenID specifications, or in OAuth specifications. If you want to customize the configuration response, you can use the OpenID Config Interception Script , which enables you to filter the results, modify claim values, or add claims. If you want to explicitly allow only certain OpenID Metadata claims, you can supply a list of the claims in the opConfigMetadataAllowList Auth Server Property. Below is a list of all the current available claims, and where they are specified. Claim Origin access_token_signing_alg_values_supported ? acr_values_supported OpenID authorization_encryption_alg_values_supported ? authorization_encryption_enc_values_supported ? authorization_endpoint OpenID authorization_signing_alg_values_supported ? backchannel_authentication_endpoint ? backchannel_logout_session_supported ? backchannel_logout_supported ? backchannel_token_delivery_modes_supported ? backchannel_user_code_parameter_supported ? check_session_iframe ? claim_types_supported ? claims_locales_supported ? claims_parameter_supported ? claims_supported OpenID clientinfo_endpoint ? device_authorization_endpoint ? display_values_supported ? dpop_signing_alg_values_supported ? end_session_endpoint ? frontchannel_logout_session_supported ? frontchannel_logout_supported ? grant_types_supported ? id_token_encryption_alg_values_supported ? id_token_encryption_enc_values_supported ? id_token_signing_alg_values_supported ? id_token_token_binding_cnf_values_supported ? introspection_endpoint ? issuer OpenID jwks_uri OpenID op_tos_uri OpenID pushed_authorization_request_endpoint ? registration_endpoint OpenID request_object_encryption_alg_values_supported OpenID request_object_encryption_enc_values_supported OpenID request_object_signing_alg_values_supported OpenID request_parameter_supported OpenID request_uri_parameter_supported OpenID require_pushed_authorization_requests ? require_request_uri_registration ? response_modes_supported OpenID response_types_supported OpenID revocation_endpoint ? scopes_supported ? service_documentation ? session_revocation_endpoint ? ssa_endpoint Janssen subject_types_supported OpenID tls_client_certificate_bound_access_tokens ? token_endpoint OpenID token_endpoint_auth_methods_supported OpenID token_endpoint_auth_signing_alg_values_supported OpenID ui_locales_supported OpenID userinfo_encryption_alg_values_supported OpenID userinfo_encryption_enc_values_supported OpenID userinfo_endpoint OpenID userinfo_signing_alg_values_supported OpenID","title":"OpenID Configuration Endpoint aka .well-known/openid-configuration"},{"location":"admin/auth-server/endpoints/configuration/#notes-on-specific-op-server-metadata-claims","text":"claims_supported Each user claim (in Jans jargon, \"Attribute\") has a property called jansHideOnDiscovery --if you don't want a claim to appear in .well-known/openid-configuration , set this to true for the Attribute entity. ssa_endpoint This is the endpoint which issues Software Statement Assertions JWT's. It is an OAuth protected endpoint.","title":"Notes on specific OP Server Metadata claims"},{"location":"admin/auth-server/endpoints/device-authorization/","tags":["administration","auth-server","endpoint","device authorization","RFC 8628"],"text":"Device Authorization endpoint # The URI to invoke the Device Authorization Endpoint in Janssen Auth Server can be found by checking the introspection_endpoint claim of the OpenID Connect configuration response, typically deployed at https://<my.jans.server>/.well-known/openid-configuration \"device_authorization_endpoint\" : \"https://<my.jans.server>/jans-auth/restv1/device_authorization\" Invoking the endpoint in Device Authorization Flow # The Device Authorization Grant defined by RFC 8628 contains a call to the Device Authorization endpoint in Step 2 of the diagram below. The details of the entire flow can be found in this article sequenceDiagram autonumber 1 title Oauth2.0 Device Authorization flow participant User participant Browser on Computer / Smartphone participant Device App participant Jans AS participant Third Party App User->>Device App:Opens an app on device Device App->>Jans AS:Sends authorization request \\n\"jans-server.com/jans-auth/restv1/device_authorization\" Jans AS->>Device App:Response - \\nuser_code, device_code, verification_url, interval, expiration Device App ->>User: Instructs the user to access Verification URL \\nand enter user_code note over Device App:Device App will keep polling AS for Access Token \\nuntil device authorization is completed loop till Device App recieves Access Token: Device App->>Jans AS:request Access Token Jans AS->>Device App:Response - \\naccess_denied \\nOR expired_token \\nOR authorization_pending \\nOR Access token end User->>Browser on Computer / Smartphone:Opens a browser \\nand access verification URL Browser on Computer / Smartphone->>Jans AS:send user_code to verification URL Jans AS -->> Browser on Computer / Smartphone :Login and authorization prompt Browser on Computer / Smartphone->>Jans AS:Authentication and consent Jans AS->>Jans AS: Mark device as Authorized note over Jans AS:Subsequent polling by the Device App \\nwill return an Access Token as indicated \\nby the loop above Device App->>Third Party App:Invoke API with Access Token Third Party App->>Device App: return Response Request: POST /restv1/device_authorization HTTP/1.1 Content-Type: application/x-www-form-urlencoded Host: test.jans.org Authorization: Basic MTIzLTEyMy0xMjM6WkE1aWxpTFFDYUR4 client_id=123-123-123&scope=openid+profile+address+email+phone Response: HTTP/1.1 200 Content-Length: 307 Content-Type: application/json Server: Jetty(9.4.19.v20190610) { \"user_code\": \"SJFP-DTPL\", \"device_code\": \"aeb28bdc90d806ac58d4b0f832f06c3ac9c4bd03292f0c09\", \"interval\": 5, \"verification_uri_complete\": \"https://test.jans.io:8443/device-code?user_code=SJFP-DTPL\", \"verification_uri\": \"https://test.jans.io:8443/device-code\", \"expires_in\": 1800 }","title":"Device Authorization"},{"location":"admin/auth-server/endpoints/device-authorization/#device-authorization-endpoint","text":"The URI to invoke the Device Authorization Endpoint in Janssen Auth Server can be found by checking the introspection_endpoint claim of the OpenID Connect configuration response, typically deployed at https://<my.jans.server>/.well-known/openid-configuration \"device_authorization_endpoint\" : \"https://<my.jans.server>/jans-auth/restv1/device_authorization\"","title":"Device Authorization endpoint"},{"location":"admin/auth-server/endpoints/device-authorization/#invoking-the-endpoint-in-device-authorization-flow","text":"The Device Authorization Grant defined by RFC 8628 contains a call to the Device Authorization endpoint in Step 2 of the diagram below. The details of the entire flow can be found in this article sequenceDiagram autonumber 1 title Oauth2.0 Device Authorization flow participant User participant Browser on Computer / Smartphone participant Device App participant Jans AS participant Third Party App User->>Device App:Opens an app on device Device App->>Jans AS:Sends authorization request \\n\"jans-server.com/jans-auth/restv1/device_authorization\" Jans AS->>Device App:Response - \\nuser_code, device_code, verification_url, interval, expiration Device App ->>User: Instructs the user to access Verification URL \\nand enter user_code note over Device App:Device App will keep polling AS for Access Token \\nuntil device authorization is completed loop till Device App recieves Access Token: Device App->>Jans AS:request Access Token Jans AS->>Device App:Response - \\naccess_denied \\nOR expired_token \\nOR authorization_pending \\nOR Access token end User->>Browser on Computer / Smartphone:Opens a browser \\nand access verification URL Browser on Computer / Smartphone->>Jans AS:send user_code to verification URL Jans AS -->> Browser on Computer / Smartphone :Login and authorization prompt Browser on Computer / Smartphone->>Jans AS:Authentication and consent Jans AS->>Jans AS: Mark device as Authorized note over Jans AS:Subsequent polling by the Device App \\nwill return an Access Token as indicated \\nby the loop above Device App->>Third Party App:Invoke API with Access Token Third Party App->>Device App: return Response Request: POST /restv1/device_authorization HTTP/1.1 Content-Type: application/x-www-form-urlencoded Host: test.jans.org Authorization: Basic MTIzLTEyMy0xMjM6WkE1aWxpTFFDYUR4 client_id=123-123-123&scope=openid+profile+address+email+phone Response: HTTP/1.1 200 Content-Length: 307 Content-Type: application/json Server: Jetty(9.4.19.v20190610) { \"user_code\": \"SJFP-DTPL\", \"device_code\": \"aeb28bdc90d806ac58d4b0f832f06c3ac9c4bd03292f0c09\", \"interval\": 5, \"verification_uri_complete\": \"https://test.jans.io:8443/device-code?user_code=SJFP-DTPL\", \"verification_uri\": \"https://test.jans.io:8443/device-code\", \"expires_in\": 1800 }","title":"Invoking the endpoint in Device Authorization Flow"},{"location":"admin/auth-server/endpoints/end-session/","tags":["administration","auth-server","end-session","endpoint"],"text":"Overview # Janssen Server's /end_session endpoint supports logout using OpenId Connect RP-initiated Logout mechanism. When using OpenID Connect Logout, it is recommended to use Front-Channel Logout. In Front-Channel Logout the browser receives a page with a list of application logout urls within an iframe. This prompts the browser to call each application logout individually and the OpenID Connect end-session endpoint via Javascript. URL to access end session endpoint on Janssen Server is listed in the response of Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration end_session_endpoint claim in the response specifies the URL for end session endpoint. By default, end session ndpoint looks like below: https://janssen.server.host/jans-auth/restv1/end_session Refer to this article from Gluu Server documentation to understand how end session endpoint works in Janssen Server. Disabling The Endpoint Using Feature Flag # /end_session endpoint can be enabled or disable using END_SESSION feature flag . Use Janssen Text-based UI(TUI) or Janssen command-line interface to perform this task. When using TUI, navigate via Auth Server -> Properties -> enabledFeatureFlags to screen below. From here, enable or disable END_SESSION flag as required. Configuration Properties # End session endpoint can be further configured using Janssen Server configuration properties listed below. When using Janssen Text-based UI(TUI) to configure the properties, navigate via Auth Server -> Properties . allowEndSessionWithUnmatchedSid endSessionEndpoint endSessionWithAccessToken mtlsEndSessionEndpoint rejectEndSessionIfIdTokenExpired allowPostLogoutRedirectWithoutValidation forceIdTokenHintPrecense Apart from the above-mentioned server properties, the properties relevant to individual clients can be configured during client registration or can be edited later. When using Janssen Text-based UI(TUI) to configure the properties, navigate via Auth Server -> Clients -> logout as show in image below: Interception Scripts # Response from end session endpoint can be further customized using end session interception script. This script can be used to customize the HTML response generated from end session endpoint. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"End Session"},{"location":"admin/auth-server/endpoints/end-session/#overview","text":"Janssen Server's /end_session endpoint supports logout using OpenId Connect RP-initiated Logout mechanism. When using OpenID Connect Logout, it is recommended to use Front-Channel Logout. In Front-Channel Logout the browser receives a page with a list of application logout urls within an iframe. This prompts the browser to call each application logout individually and the OpenID Connect end-session endpoint via Javascript. URL to access end session endpoint on Janssen Server is listed in the response of Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration end_session_endpoint claim in the response specifies the URL for end session endpoint. By default, end session ndpoint looks like below: https://janssen.server.host/jans-auth/restv1/end_session Refer to this article from Gluu Server documentation to understand how end session endpoint works in Janssen Server.","title":"Overview"},{"location":"admin/auth-server/endpoints/end-session/#disabling-the-endpoint-using-feature-flag","text":"/end_session endpoint can be enabled or disable using END_SESSION feature flag . Use Janssen Text-based UI(TUI) or Janssen command-line interface to perform this task. When using TUI, navigate via Auth Server -> Properties -> enabledFeatureFlags to screen below. From here, enable or disable END_SESSION flag as required.","title":"Disabling The Endpoint Using Feature Flag"},{"location":"admin/auth-server/endpoints/end-session/#configuration-properties","text":"End session endpoint can be further configured using Janssen Server configuration properties listed below. When using Janssen Text-based UI(TUI) to configure the properties, navigate via Auth Server -> Properties . allowEndSessionWithUnmatchedSid endSessionEndpoint endSessionWithAccessToken mtlsEndSessionEndpoint rejectEndSessionIfIdTokenExpired allowPostLogoutRedirectWithoutValidation forceIdTokenHintPrecense Apart from the above-mentioned server properties, the properties relevant to individual clients can be configured during client registration or can be edited later. When using Janssen Text-based UI(TUI) to configure the properties, navigate via Auth Server -> Clients -> logout as show in image below:","title":"Configuration Properties"},{"location":"admin/auth-server/endpoints/end-session/#interception-scripts","text":"Response from end session endpoint can be further customized using end session interception script. This script can be used to customize the HTML response generated from end session endpoint.","title":"Interception Scripts"},{"location":"admin/auth-server/endpoints/end-session/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/endpoints/introspection/","tags":["administration","auth-server","endpoint","introspection","accessTokenAsJwt","introspectionScriptBackwardCompatibility"],"text":"Overview # Introspection endpoint allows a protected resource to determine the active state of an OAuth 2.0 token and to determine meta-information about this token. This endpoint can be used to introspect both opaque token (i.e. reference tokens) and structured tokens(i.e. value tokens). This endpoint conforms to OAuth2 token introspection specifications. The URI to invoke the introspection endpoint in Janssen Server can be found by checking the introspection_endpoint claim of the OpenID Connect configuration response, typically deployed at https://janssen.server.host/.well-known/openid-configuration \"introspection_endpoint\" : \"https://janssen.server.host/jans-auth/restv1/introspection\" ` More information about request and response of the Introspection endpoint can be found in the OpenAPI specification of jans-auth-server module . Request parameters - token - REQUIRED. The string value of the token. For access tokens, this is the \"access_token\" value returned from the token endpoint - token_type_hint - OPTIONAL. A hint about the type of the token submitted for introspection. Not used in current implementation of the AS. - response_as_jwt - OPTIONAL. Boolean value with default value false. If true, returns introspection response as JWT (signed based on client configuration used for authentication to Introspection Endpoint). Sample GET Request # Request # curl -X 'GET' 'https://janssen.server.host/jans-auth/restv1/introspection?token=368fea2b-be14-4d30-bd57-bcc4cde2033c&response_as_jwt=false' -H 'accept: application/json' -H \"Authorization: Bearer 111d51a4-2828-4b47-abce-77034cddcfb5\" Response # { \"sub\": \"\", \"iss\": \"https://janssen.server.host\", \"active\": true, \"token_type\": \"Bearer\", \"client_id\": \"1800.df1bb233-10b8-40ed-bbb9-07da50892a35\", \"aud\": \"1800.df1bb233-10b8-40ed-bbb9-07da50892a35\", \"nbf\": null, \"scope\": \"https://jans.io/oauth/config/scripts.write\", \"acr_values\": null, \"cnf\": null, \"exp\": 1668705523, \"iat\": 1668705223, \"jti\": null, \"username\": null } Sample POST Request # Request # curl -X 'POST' \\ 'https://janssen.server.host/jans-auth/restv1/introspection' \\ -H 'accept: application/json' \\ -H 'Content-Type: application/x-www-form-urlencoded' \\ -d 'token=eyJra....3ZkB-Ajwg' -H \"Authorization: Bearer eyJra...BpKo7g\" Response # { \"sub\": \"\", \"iss\": \"https://janssen.server.host\", \"active\": true, \"token_type\": \"Bearer\", \"client_id\": \"3000.5829c1f8-7554-41ab-a7d6-3513a5e9c4ad\", \"aud\": \"3000.5829c1f8-7554-41ab-a7d6-3513a5e9c4ad\", \"nbf\": null, \"scope\": \"\", \"acr_values\": null, \"cnf\": null, \"exp\": 1668941216, \"iat\": 1668781885, \"jti\": null, \"username\": null } Response as JWT # Response is returned as JWT if Accept header has value application/token-introspection+jwt or otherwise if explicit endpoint parameter response_as_jwt is set to true . POST /introspect HTTP/1.1 Host: as.example.com Accept: application/token-introspection+jwt Sample decoded JWT payload { \"iss\" : \"https://as.example.com/\" , \"aud\" : \"https://rs.example.com/resource\" , \"iat\" : 1514797892 , \"token_introspection\" : { \"active\" : true , \"iss\" : \"https://as.example.com/\" , \"aud\" : \"https://rs.example.com/resource\" , \"iat\" : 1514797822 , \"exp\" : 1514797942 , \"client_id\" : \"paiB2goo0a\" , \"scope\" : \"read write dolphin\" , \"sub\" : \"Z5O3upPC88QrAjx00dis\" , \"birthdate\" : \"1982-02-01\" , \"given_name\" : \"John\" , \"family_name\" : \"Doe\" , \"jti\" : \"t1FoCCaZd4Xv4ORJUWVUeTZfsKhW30CQCrWDDjwXy6w\" } } Sample response (line breaks in payload is for convenience) HTTP/1.1 200 OK Content-Type: application/token-introspection+jwt eyJraWQiOiJ3RzZEIiwidHlwIjoidG9rZW4taW50cm9zcGVjdGlvbitqd3QiLCJhbGc iOiJSUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FzLmV4YW1wbGUuY29tLyIsImF1ZCI6I mh0dHBzOi8vcnMuZXhhbXBsZS5jb20vcmVzb3VyY2UiLCJpYXQiOjE1MTQ3OTc4OTIs InRva2VuX2ludHJvc3BlY3Rpb24iOnsiYWN0aXZlIjp0cnVlLCJpc3MiOiJodHRwczo vL2FzLmV4YW1wbGUuY29tLyIsImF1ZCI6Imh0dHBzOi8vcnMuZXhhbXBsZS5jb20vcm Vzb3VyY2UiLCJpYXQiOjE1MTQ3OTc4MjIsImV4cCI6MTUxNDc5Nzk0MiwiY2xpZW50X 2lkIjoicGFpQjJnb28wYSIsInNjb3BlIjoicmVhZCB3cml0ZSBkb2xwaGluIiwic3Vi IjoiWjVPM3VwUEM4OFFyQWp4MDBkaXMiLCJiaXJ0aGRhdGUiOiIxOTgyLTAyLTAxIiw iZ2l2ZW5fbmFtZSI6IkpvaG4iLCJmYW1pbHlfbmFtZSI6IkRvZSIsImp0aSI6InQxRm 9DQ2FaZDRYdjRPUkpVV1ZVZVRaZnNLaFczMENRQ3JXRERqd1h5NncifX0.przJMU5Gh mNzvwtt1Sr-xa9xTkpiAg5IshbQsRiRVP_7eGR1GHYrNwQh84kxOkHCyje2g5WSRcYo sGEVIiC-eoPJJ-qBwqwSlgx9JEeCDw2W5DjrblOI_N0Jvsq_dUeOyoWVMqlOydOBhKN Y0smBrI4NZvEExucOm9WUJXMuJtvq1gBes-0go5j4TEv9sOP9uu81gqWTr_LOo6pgT0 tFFyZfWC4kbXPXiQ2YT6mxCiQRRNM-l9cBdF6Jx6IOrsfFhBuYdYQ_mlL19HgDDOFal eyqmru6lKlASOsaE8dmLSeKcX91FbG79FKN8un24iwIDCbKT9xlUFl54xWVShNDFA Disabling The Endpoint Using Feature Flag # /introspection endpoint can be enabled or disable using END_SESSION feature flag . Use Janssen Text-based UI(TUI) or Janssen command-line interface to perform this task. When using TUI, navigate via Auth Server -> Properties -> enabledFeatureFlags to screen below. From here, enable or disable INTROSPECTION flag as required. Configuration Properties # Introspection endpoint can be further configured using Janssen Server configuration properties listed below. When using Janssen Text-based UI(TUI) to configure the properties, navigate via Auth Server -> Properties . introspectionEndpoint mtlsIntrospectionEndpoint introspectionSkipAuthorization introspectionScriptBackwardCompatibility introspectionAccessTokenMustHaveUmaProtectionScope introspectionAccessTokenMustHaveIntrospectionScope introspectionResponseScopesBackwardCompatibility There difference between introspectionAccessTokenMustHaveUmaProtectionScope and introspectionAccessTokenMustHaveIntrospectionScope is that uma_protection scope is enabled for Dynamic Client Registration while introspection scope is not. Thus if set introspectionAccessTokenMustHaveIntrospectionScope to true value allows disable access to Introspection Endpoint to all clients which does not have explicitly granted introspection scope. Customising Introspection Endpoint Behaviour using Custom script: # Customizing certain aspects of endpoint behaviour, for example, one can modify claims of an access token as JWT, using introspection scripts . Use update token introspection script for transformation of claims and values in id-token and access-token. Configure below-mentioned client properties to enable usage of introspection scripts. When using Janssen Text-based UI(TUI) to configure these client properties, navigate to accessTokenAsJwt : Auth Server -> Clients ->select the client-> Tokens -> Access Token Type ->Select JWT runIntrospectionScriptBeforeJwtCreation : Auth Server -> Clients ->select the client-> Tokens ->enable Run Introspection Script before JWT access token creation References for custom scripts # Interface - IntrospectionType Introspection scripts Introspection script vs Update Token Script","title":"Introspection"},{"location":"admin/auth-server/endpoints/introspection/#overview","text":"Introspection endpoint allows a protected resource to determine the active state of an OAuth 2.0 token and to determine meta-information about this token. This endpoint can be used to introspect both opaque token (i.e. reference tokens) and structured tokens(i.e. value tokens). This endpoint conforms to OAuth2 token introspection specifications. The URI to invoke the introspection endpoint in Janssen Server can be found by checking the introspection_endpoint claim of the OpenID Connect configuration response, typically deployed at https://janssen.server.host/.well-known/openid-configuration \"introspection_endpoint\" : \"https://janssen.server.host/jans-auth/restv1/introspection\" ` More information about request and response of the Introspection endpoint can be found in the OpenAPI specification of jans-auth-server module . Request parameters - token - REQUIRED. The string value of the token. For access tokens, this is the \"access_token\" value returned from the token endpoint - token_type_hint - OPTIONAL. A hint about the type of the token submitted for introspection. Not used in current implementation of the AS. - response_as_jwt - OPTIONAL. Boolean value with default value false. If true, returns introspection response as JWT (signed based on client configuration used for authentication to Introspection Endpoint).","title":"Overview"},{"location":"admin/auth-server/endpoints/introspection/#sample-get-request","text":"","title":"Sample GET Request"},{"location":"admin/auth-server/endpoints/introspection/#request","text":"curl -X 'GET' 'https://janssen.server.host/jans-auth/restv1/introspection?token=368fea2b-be14-4d30-bd57-bcc4cde2033c&response_as_jwt=false' -H 'accept: application/json' -H \"Authorization: Bearer 111d51a4-2828-4b47-abce-77034cddcfb5\"","title":"Request"},{"location":"admin/auth-server/endpoints/introspection/#response","text":"{ \"sub\": \"\", \"iss\": \"https://janssen.server.host\", \"active\": true, \"token_type\": \"Bearer\", \"client_id\": \"1800.df1bb233-10b8-40ed-bbb9-07da50892a35\", \"aud\": \"1800.df1bb233-10b8-40ed-bbb9-07da50892a35\", \"nbf\": null, \"scope\": \"https://jans.io/oauth/config/scripts.write\", \"acr_values\": null, \"cnf\": null, \"exp\": 1668705523, \"iat\": 1668705223, \"jti\": null, \"username\": null }","title":"Response"},{"location":"admin/auth-server/endpoints/introspection/#sample-post-request","text":"","title":"Sample POST Request"},{"location":"admin/auth-server/endpoints/introspection/#request_1","text":"curl -X 'POST' \\ 'https://janssen.server.host/jans-auth/restv1/introspection' \\ -H 'accept: application/json' \\ -H 'Content-Type: application/x-www-form-urlencoded' \\ -d 'token=eyJra....3ZkB-Ajwg' -H \"Authorization: Bearer eyJra...BpKo7g\"","title":"Request"},{"location":"admin/auth-server/endpoints/introspection/#response_1","text":"{ \"sub\": \"\", \"iss\": \"https://janssen.server.host\", \"active\": true, \"token_type\": \"Bearer\", \"client_id\": \"3000.5829c1f8-7554-41ab-a7d6-3513a5e9c4ad\", \"aud\": \"3000.5829c1f8-7554-41ab-a7d6-3513a5e9c4ad\", \"nbf\": null, \"scope\": \"\", \"acr_values\": null, \"cnf\": null, \"exp\": 1668941216, \"iat\": 1668781885, \"jti\": null, \"username\": null }","title":"Response"},{"location":"admin/auth-server/endpoints/introspection/#response-as-jwt","text":"Response is returned as JWT if Accept header has value application/token-introspection+jwt or otherwise if explicit endpoint parameter response_as_jwt is set to true . POST /introspect HTTP/1.1 Host: as.example.com Accept: application/token-introspection+jwt Sample decoded JWT payload { \"iss\" : \"https://as.example.com/\" , \"aud\" : \"https://rs.example.com/resource\" , \"iat\" : 1514797892 , \"token_introspection\" : { \"active\" : true , \"iss\" : \"https://as.example.com/\" , \"aud\" : \"https://rs.example.com/resource\" , \"iat\" : 1514797822 , \"exp\" : 1514797942 , \"client_id\" : \"paiB2goo0a\" , \"scope\" : \"read write dolphin\" , \"sub\" : \"Z5O3upPC88QrAjx00dis\" , \"birthdate\" : \"1982-02-01\" , \"given_name\" : \"John\" , \"family_name\" : \"Doe\" , \"jti\" : \"t1FoCCaZd4Xv4ORJUWVUeTZfsKhW30CQCrWDDjwXy6w\" } } Sample response (line breaks in payload is for convenience) HTTP/1.1 200 OK Content-Type: application/token-introspection+jwt eyJraWQiOiJ3RzZEIiwidHlwIjoidG9rZW4taW50cm9zcGVjdGlvbitqd3QiLCJhbGc iOiJSUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FzLmV4YW1wbGUuY29tLyIsImF1ZCI6I mh0dHBzOi8vcnMuZXhhbXBsZS5jb20vcmVzb3VyY2UiLCJpYXQiOjE1MTQ3OTc4OTIs InRva2VuX2ludHJvc3BlY3Rpb24iOnsiYWN0aXZlIjp0cnVlLCJpc3MiOiJodHRwczo vL2FzLmV4YW1wbGUuY29tLyIsImF1ZCI6Imh0dHBzOi8vcnMuZXhhbXBsZS5jb20vcm Vzb3VyY2UiLCJpYXQiOjE1MTQ3OTc4MjIsImV4cCI6MTUxNDc5Nzk0MiwiY2xpZW50X 2lkIjoicGFpQjJnb28wYSIsInNjb3BlIjoicmVhZCB3cml0ZSBkb2xwaGluIiwic3Vi IjoiWjVPM3VwUEM4OFFyQWp4MDBkaXMiLCJiaXJ0aGRhdGUiOiIxOTgyLTAyLTAxIiw iZ2l2ZW5fbmFtZSI6IkpvaG4iLCJmYW1pbHlfbmFtZSI6IkRvZSIsImp0aSI6InQxRm 9DQ2FaZDRYdjRPUkpVV1ZVZVRaZnNLaFczMENRQ3JXRERqd1h5NncifX0.przJMU5Gh mNzvwtt1Sr-xa9xTkpiAg5IshbQsRiRVP_7eGR1GHYrNwQh84kxOkHCyje2g5WSRcYo sGEVIiC-eoPJJ-qBwqwSlgx9JEeCDw2W5DjrblOI_N0Jvsq_dUeOyoWVMqlOydOBhKN Y0smBrI4NZvEExucOm9WUJXMuJtvq1gBes-0go5j4TEv9sOP9uu81gqWTr_LOo6pgT0 tFFyZfWC4kbXPXiQ2YT6mxCiQRRNM-l9cBdF6Jx6IOrsfFhBuYdYQ_mlL19HgDDOFal eyqmru6lKlASOsaE8dmLSeKcX91FbG79FKN8un24iwIDCbKT9xlUFl54xWVShNDFA","title":"Response as JWT"},{"location":"admin/auth-server/endpoints/introspection/#disabling-the-endpoint-using-feature-flag","text":"/introspection endpoint can be enabled or disable using END_SESSION feature flag . Use Janssen Text-based UI(TUI) or Janssen command-line interface to perform this task. When using TUI, navigate via Auth Server -> Properties -> enabledFeatureFlags to screen below. From here, enable or disable INTROSPECTION flag as required.","title":"Disabling The Endpoint Using Feature Flag"},{"location":"admin/auth-server/endpoints/introspection/#configuration-properties","text":"Introspection endpoint can be further configured using Janssen Server configuration properties listed below. When using Janssen Text-based UI(TUI) to configure the properties, navigate via Auth Server -> Properties . introspectionEndpoint mtlsIntrospectionEndpoint introspectionSkipAuthorization introspectionScriptBackwardCompatibility introspectionAccessTokenMustHaveUmaProtectionScope introspectionAccessTokenMustHaveIntrospectionScope introspectionResponseScopesBackwardCompatibility There difference between introspectionAccessTokenMustHaveUmaProtectionScope and introspectionAccessTokenMustHaveIntrospectionScope is that uma_protection scope is enabled for Dynamic Client Registration while introspection scope is not. Thus if set introspectionAccessTokenMustHaveIntrospectionScope to true value allows disable access to Introspection Endpoint to all clients which does not have explicitly granted introspection scope.","title":"Configuration Properties"},{"location":"admin/auth-server/endpoints/introspection/#customising-introspection-endpoint-behaviour-using-custom-script","text":"Customizing certain aspects of endpoint behaviour, for example, one can modify claims of an access token as JWT, using introspection scripts . Use update token introspection script for transformation of claims and values in id-token and access-token. Configure below-mentioned client properties to enable usage of introspection scripts. When using Janssen Text-based UI(TUI) to configure these client properties, navigate to accessTokenAsJwt : Auth Server -> Clients ->select the client-> Tokens -> Access Token Type ->Select JWT runIntrospectionScriptBeforeJwtCreation : Auth Server -> Clients ->select the client-> Tokens ->enable Run Introspection Script before JWT access token creation","title":"Customising Introspection Endpoint Behaviour using Custom script:"},{"location":"admin/auth-server/endpoints/introspection/#references-for-custom-scripts","text":"Interface - IntrospectionType Introspection scripts Introspection script vs Update Token Script","title":"References for custom scripts"},{"location":"admin/auth-server/endpoints/jwks-uri/","tags":["administration","auth-server","jwks","json-web-key-set","endpoint"],"text":"Overview # Janssen Server supports /jwks metadata endpoint and publishes its JSON Web Key Set (JWKS) at this endpoint. This endpoint publishes signing keys as well as encryption keys used by Janssen Server. RP can use these keys to validate signatures from Janssen Server, and also to perform encryption and decryption. Like other metadata endpoints, this is not a secure endpoint. Further details on this endpoint and JWKs can be found in OpenID Connect Discovery specification. URL to access jwks endpoint on Janssen Server is listed in the response of Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration jwks_uri claim in the response specifies the URL for jwks endpoint. By default, the jwks endpoint looks like below: https://janssen.server.host/jans-auth/restv1/jwks This endpoint is always enabled and can not be disabled using feature flags. Configuration Properties # End session endpoint can be further configured using Janssen Server configuration properties listed below. When using Janssen Text-based UI(TUI) to configure the properties, navigate via Auth Server -> Properties . jwksUri jwksAlgorithmsSupported mtlsJwksUri Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Overview"},{"location":"admin/auth-server/endpoints/jwks-uri/#overview","text":"Janssen Server supports /jwks metadata endpoint and publishes its JSON Web Key Set (JWKS) at this endpoint. This endpoint publishes signing keys as well as encryption keys used by Janssen Server. RP can use these keys to validate signatures from Janssen Server, and also to perform encryption and decryption. Like other metadata endpoints, this is not a secure endpoint. Further details on this endpoint and JWKs can be found in OpenID Connect Discovery specification. URL to access jwks endpoint on Janssen Server is listed in the response of Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration jwks_uri claim in the response specifies the URL for jwks endpoint. By default, the jwks endpoint looks like below: https://janssen.server.host/jans-auth/restv1/jwks This endpoint is always enabled and can not be disabled using feature flags.","title":"Overview"},{"location":"admin/auth-server/endpoints/jwks-uri/#configuration-properties","text":"End session endpoint can be further configured using Janssen Server configuration properties listed below. When using Janssen Text-based UI(TUI) to configure the properties, navigate via Auth Server -> Properties . jwksUri jwksAlgorithmsSupported mtlsJwksUri","title":"Configuration Properties"},{"location":"admin/auth-server/endpoints/jwks-uri/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/endpoints/par/","tags":["administration","auth-server","par","pushed authorization requests","endpoint"],"text":"Pushed Authorization Request (PAR) Endpoint # PAR endpoint is used by client to send authorization request directly to the Janssen Server without using the usual redirection mechanism via user agent. When PAR endpoint receives a valid request, it responds with a request URI. The request URI is a reference created and stored by Janssen Server. It is a reference to authorization request and the metadata sent with it by the client. Client can send this request uri to the Janssen Server in a authorization request using user agent redirect mechanism. There are multiple benefits of using this flow which are described along with other details in PAR specification . Janssen Server PAR implementation conforms to PAR specification. URL to access PAR endpoint on Janssen Server is listed in the response of Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration pushed_authorization_request_endpoint claim in the response specifies the URL for the PAR endpoint. By default, PAR endpoint looks like below: https://jans-dynamic-ldap/jans-auth/restv1/par In response to a valid request, the PAR endpoint returns request_uri in response similar to below: HTTP/1.1 201 Created Content-Type: application/json Cache-Control: no-cache, no-store { \"request_uri\": \"urn:ietf:params:oauth:request_uri:6esc_11ACC5bwc014ltc14eY22c\", \"expires_in\": 60 } Since PAR endpoint is a protected resource. The client has to authenticate itself to the endpoint. Authentication methods used are same as the once used for client authentication at token endpoint . More information about request and response of the PAR endpoint can be found in the OpenAPI specification of jans-auth-server module . Disabling The Endpoint Using Feature Flag # PAR endpoint can be enabled or disabled using PAR feature flag . Use Janssen Text-based UI(TUI) or Janssen command-line interface to perform this task. When using TUI, navigate via Auth Server -> Properties -> enabledFeatureFlags to screen below. From here, enable or disable PAR flag as required. Configuration Properties # Global Janssen Server configuration properties # PAR endpoint can be further configured using Janssen Server configuration properties listed below. It can be configured via Janssen Text-based UI(TUI) (navigate to Auth Server -> Properties ), admin UI or directly in persistence layer. mtlsParEndpoint - Mutual TLS (mTLS) Pushed Authorization Requests (PAR) endpoint URL parEndpoint - Pushed Authorization Requests (PAR) Endpoint location requirePar - Boolean value to indicate whether Pushed Authorisation Request (PAR) endpoint is required requestUriParameterSupported - Boolean value specifying whether the OP supports use of the request_uri parameter Client specific PAR related configuration properties # Some configuration properties are configured on client level to allow more granular configuration which depends on client. par_lifetime - PAR object lifetime in seconds. If value is not specified then defaults to 600 value. require_par - specified whether all authorization requests made by this client to Authorization Endpoint must be PAR. If true and authorization request is not PAR then error is returned back by Authorization Server. Have questions in the meantime? # You can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"PAR"},{"location":"admin/auth-server/endpoints/par/#pushed-authorization-request-par-endpoint","text":"PAR endpoint is used by client to send authorization request directly to the Janssen Server without using the usual redirection mechanism via user agent. When PAR endpoint receives a valid request, it responds with a request URI. The request URI is a reference created and stored by Janssen Server. It is a reference to authorization request and the metadata sent with it by the client. Client can send this request uri to the Janssen Server in a authorization request using user agent redirect mechanism. There are multiple benefits of using this flow which are described along with other details in PAR specification . Janssen Server PAR implementation conforms to PAR specification. URL to access PAR endpoint on Janssen Server is listed in the response of Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration pushed_authorization_request_endpoint claim in the response specifies the URL for the PAR endpoint. By default, PAR endpoint looks like below: https://jans-dynamic-ldap/jans-auth/restv1/par In response to a valid request, the PAR endpoint returns request_uri in response similar to below: HTTP/1.1 201 Created Content-Type: application/json Cache-Control: no-cache, no-store { \"request_uri\": \"urn:ietf:params:oauth:request_uri:6esc_11ACC5bwc014ltc14eY22c\", \"expires_in\": 60 } Since PAR endpoint is a protected resource. The client has to authenticate itself to the endpoint. Authentication methods used are same as the once used for client authentication at token endpoint . More information about request and response of the PAR endpoint can be found in the OpenAPI specification of jans-auth-server module .","title":"Pushed Authorization Request (PAR) Endpoint"},{"location":"admin/auth-server/endpoints/par/#disabling-the-endpoint-using-feature-flag","text":"PAR endpoint can be enabled or disabled using PAR feature flag . Use Janssen Text-based UI(TUI) or Janssen command-line interface to perform this task. When using TUI, navigate via Auth Server -> Properties -> enabledFeatureFlags to screen below. From here, enable or disable PAR flag as required.","title":"Disabling The Endpoint Using Feature Flag"},{"location":"admin/auth-server/endpoints/par/#configuration-properties","text":"","title":"Configuration Properties"},{"location":"admin/auth-server/endpoints/par/#global-janssen-server-configuration-properties","text":"PAR endpoint can be further configured using Janssen Server configuration properties listed below. It can be configured via Janssen Text-based UI(TUI) (navigate to Auth Server -> Properties ), admin UI or directly in persistence layer. mtlsParEndpoint - Mutual TLS (mTLS) Pushed Authorization Requests (PAR) endpoint URL parEndpoint - Pushed Authorization Requests (PAR) Endpoint location requirePar - Boolean value to indicate whether Pushed Authorisation Request (PAR) endpoint is required requestUriParameterSupported - Boolean value specifying whether the OP supports use of the request_uri parameter","title":"Global Janssen Server configuration properties"},{"location":"admin/auth-server/endpoints/par/#client-specific-par-related-configuration-properties","text":"Some configuration properties are configured on client level to allow more granular configuration which depends on client. par_lifetime - PAR object lifetime in seconds. If value is not specified then defaults to 600 value. require_par - specified whether all authorization requests made by this client to Authorization Endpoint must be PAR. If true and authorization request is not PAR then error is returned back by Authorization Server.","title":"Client specific PAR related configuration properties"},{"location":"admin/auth-server/endpoints/par/#have-questions-in-the-meantime","text":"You can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/endpoints/par/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/endpoints/session-revocation/","tags":["administration","auth-server","session-revocation","endpoint"],"text":"Overview # Janssen Server provides session revocation endpoint to enable the client to revoke all sessions of a users. Though not being part of any industry standard/specification, Janssen Server provides this endpoint to allow greater control and better management of sessions on OP. URL to access revocation endpoint on Janssen Server is listed in the response of Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration session_revocation_endpoint claim in the response specifies the URL for revocation endpoint. By default, revocation endpoint looks like below: https://janssen.server.host/jans-auth/restv1/revoke_session More information about request and response of the revocation endpoint can be found in the OpenAPI specification of jans-auth-server module . Usage # A request to this endpoint can revoke all sessions of one particular user. Use the request parameters to specify criteria to select the user. If there are multiple users matching the given criteria, the first found user will be affected. Disabling The Endpoint Using Feature Flag # Session revocation endpoint can be enabled or disable using REVOKE_SESSION feature flag . Use Janssen Text-based UI(TUI) or Janssen command-line interface to perform this task. When using TUI, navigate via Auth Server -> Properties -> enabledFeatureFlags to screen below. From here, enable or disable REVOKE_SESSION flag as required. Required Scopes # A client must have the following scope in order to use this endpoint: revoke_session","title":"Session Revocation"},{"location":"admin/auth-server/endpoints/session-revocation/#overview","text":"Janssen Server provides session revocation endpoint to enable the client to revoke all sessions of a users. Though not being part of any industry standard/specification, Janssen Server provides this endpoint to allow greater control and better management of sessions on OP. URL to access revocation endpoint on Janssen Server is listed in the response of Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration session_revocation_endpoint claim in the response specifies the URL for revocation endpoint. By default, revocation endpoint looks like below: https://janssen.server.host/jans-auth/restv1/revoke_session More information about request and response of the revocation endpoint can be found in the OpenAPI specification of jans-auth-server module .","title":"Overview"},{"location":"admin/auth-server/endpoints/session-revocation/#usage","text":"A request to this endpoint can revoke all sessions of one particular user. Use the request parameters to specify criteria to select the user. If there are multiple users matching the given criteria, the first found user will be affected.","title":"Usage"},{"location":"admin/auth-server/endpoints/session-revocation/#disabling-the-endpoint-using-feature-flag","text":"Session revocation endpoint can be enabled or disable using REVOKE_SESSION feature flag . Use Janssen Text-based UI(TUI) or Janssen command-line interface to perform this task. When using TUI, navigate via Auth Server -> Properties -> enabledFeatureFlags to screen below. From here, enable or disable REVOKE_SESSION flag as required.","title":"Disabling The Endpoint Using Feature Flag"},{"location":"admin/auth-server/endpoints/session-revocation/#required-scopes","text":"A client must have the following scope in order to use this endpoint: revoke_session","title":"Required Scopes"},{"location":"admin/auth-server/endpoints/ssa/","tags":["administration","auth-server","SSA","endpoint"],"text":"Software Statement Assertion (SSA) # Janssen Server provides SSA endpoint that enables management of SSAs. The SSA is a JSON Web Token (JWT) containing client metadata and some custom attributes. Specification for SSAs has been outlined as part of Dynamic Client Registration Protocol . URL to access revocation endpoint on Janssen Server is listed in the response of Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration ssa_endpoint claim in the response specifies the URL for revocation endpoint. By default, revocation endpoint looks like below: https://janssen.server.host/jans-auth/restv1/ssa More information about request and response of the revocation endpoint can be found in the OpenAPI specification of jans-auth-server module . Disabling The Endpoint Using Feature Flag # /ssa endpoint can be enabled or disable using SSA feature flag . Use Janssen Text-based UI(TUI) or Janssen command-line interface to perform this task. When using TUI, navigate via Auth Server -> Properties -> enabledFeatureFlags to screen below. From here, enable or disable SSA flag as required. Configuration Properties # SSA endpoint can be further configured using Janssen Server configuration property ssaConfiguration . When using Janssen Text-based UI(TUI) to configure the properties, navigate via Auth Server -> Properties to update value for this property. This property take JSON configuration with parameters as described below: \"ssaConfiguration\": { \"ssaEndpoint\": \"{{your-url}}/ssa\", \"ssaCustomAttributes\": [ \"myCustomAttr1\", \"myCustomAttr2\", ... ], \"ssaSigningAlg\": \"RS512\", \"ssaExpirationInDays\": 30 } ssaEndpoint \u2014 Base endpoint for SSA. ssaCustomAttributes \u2014 List of custom attributes, which are received in the request when creating an SSA. ssaSigningAlg \u2014 Algorithm to sign the JWT that is returned after creating an SSA. ssaExpirationInDays \u2014 Expiration expressed in days, when an SSA is created and the expiration is not sent. SSA Security # To call SSA services, a token of type client_credentials must be generated with the following scopes enabled: https://jans.io/auth/ssa.admin \u2014 Allows calling all SSA services. https://jans.io/auth/ssa.portal \u2014 Allows only call Get SSA service. https://jans.io/auth/ssa.developer \u2014 Allows only call Get SSA , but you can only filter ssa that have been created by the same client. Create a new SSA # Create SSA for the organization with expiration (optional). Request body description # Field Detail Optional org_id The \"org_id\" is used for organization identification. false description Describe SSA false software_id The \"software_id\" is used for software identification. false software_roles List of string values, fixed value [\"password\", \"notify\"] . false grant_types Fixed value Fixed value [\"client_credentials\"] . false expiration Expiration date. (Default value: calculated based on global SSA settings) true one_time_use Defined whether the SSA will be used only once or can be used multiple times. (Default value: true) true rotate_ssa TODO - Will be used to rotate expiration of the SSA, currently is only saved as part of the SSA. (Default value: true) true Note: You can add more custom attributes in the request, (you must have previously configured in the SSA global configuration). It should be clarified that these values are persisted in the database and are not returned in the SSA JWT. Example: { \"org_id\": \"your-org-id\", \"description\": \"your description\" ... org_id: \"Your org_id\", \"myCustomAttr1\": \"Your value custom attr 1\", \"myCustomAttr2\": \"Your value custom attr 2\", ... } Response description # Returned SSA is a JWT, containing the following structure: { \"ssa\": \"eyJraWQiOiI1NTk3MGFkZS00M2MwLTQ4YWMtODEyZi0yZTY1MzhjMTEyN2Zfc2lnX3JzNTEyIiwidHlwIjoiand0IiwiYWxnIjoiUlM1MTIifQ.eyJzb2Z0d2FyZV9pZCI6ImdsdXUtc2Nhbi1hcGkiLCJncmFudF90eXBlcyI6WyJjbGllbnRfY3JlZGVudGlhbHMiXSwib3JnX2lkIjoxLCJpc3MiOiJodHRwczovL2phbnMubG9jYWxob3N0Iiwic29mdHdhcmVfcm9sZXMiOlsicGFzc3d1cmQiXSwiZXhwIjoxNjY4NjA5MDA1LCJpYXQiOjE2Njg2NDE5NjcsImp0aSI6ImU4OWVjYTQxLTM0ODUtNDUxNi1hMTYyLWZiODYyNjJhYmFjMyJ9.jRgh8_aiwMTJxeT9cwfup9QP9LBc6gQstvabCzUOJvELnzosxiNJHeU2mrvavaNK6BGvs_lbNjODVDeetGCD48_F2ay9r8qmo-f3GPzdzcJozKgfzonSkAE5Ran9LKcQQJpVc1rDYcV2xYiJLJ6FSuvnoClkDEE1tXysxshLPs-GXOZE7rD8XUXzezuxZWUE1jXwA-EFajoat8CP6QulHGxlcn_sKIhawhGODxJPz4Pf3jgeZVLG_7HfRJgxNiKcdzQIxnkbdpuS-0Q4-oc5yntsXhFhn31Pa3vGsiPPH9f3ndL2ZZKk3xCgyImLDJuGaxXg-qEVoIG4zNWNHMUNUQ\" } Header alg \u2014 The signature algorithm which used RS256 . typ \u2014 The type which used. kid \u2014 The key identification gluu-scan-api-rs256-ssa-signature-key . Payload iat \u2014 The time the JWT was created. iss \u2014 The \"iss\" (issuer) claim identifies the principal that issued the JWT. jti \u2014 The \"jti\" (JWT ID) claim provides a unique identifier for the JWT. software_id \u2014 The \"software_id\" is used for software identification. org_id \u2014 The \"org_id\" is used for organization identification. software_roles \u2014 List of string values, fixed value [\"password\", \"notify\"] . grant_types \u2014 Fixed value [\"client_credentials\"] . exp \u2014 Expiration Time. myCustom1, myCustom2, ... : if you have custom attributes, they will be displayed here. Example: # Request: POST {{your-url}}/ssa Content-Type: application/json Authorization: Bearer {{your-token}} { \"description\": \"test\", \"software_id\": \"gluu-scan-api\", \"software_roles\": [ \"password\" ], \"grant_types\": [ \"client_credentials\" ], \"expiration\": 1668609005, \"one_time_use\": true, \"rotate_ssa\": true } Response: HTTP/1.1 201 Created Date: Wed, 16 Nov 2022 23:39:27 GMT Server: Apache/2.4.52 (Ubuntu) X-Xss-Protection: 1; mode=block X-Content-Type-Options: nosniff Strict-Transport-Security: max-age=31536000; includeSubDomains Cache-Control: no-store Content-Type: application/json Pragma: no-cache Content-Length: 757 Keep-Alive: timeout=5, max=100 Connection: Keep-Alive { \"ssa\": \"eyJraWQiOiI1NTk3MGFkZS00M2MwLTQ4YWMtODEyZi0yZTY1MzhjMTEyN2Zfc2lnX3JzNTEyIiwidHlwIjoiand0IiwiYWxnIjoiUlM1MTIifQ.eyJzb2Z0d2FyZV9pZCI6ImdsdXUtc2Nhbi1hcGkiLCJncmFudF90eXBlcyI6WyJjbGllbnRfY3JlZGVudGlhbHMiXSwib3JnX2lkIjoxLCJpc3MiOiJodHRwczovL2phbnMubG9jYWxob3N0Iiwic29mdHdhcmVfcm9sZXMiOlsicGFzc3d1cmQiXSwiZXhwIjoxNjY4NjA5MDA1LCJpYXQiOjE2Njg2NDE5NjcsImp0aSI6ImU4OWVjYTQxLTM0ODUtNDUxNi1hMTYyLWZiODYyNjJhYmFjMyJ9.jRgh8_aiwMTJxeT9cwfup9QP9LBc6gQstvabCzUOJvELnzosxiNJHeU2mrvavaNK6BGvs_lbNjODVDeetGCD48_F2ay9r8qmo-f3GPzdzcJozKgfzonSkAE5Ran9LKcQQJpVc1rDYcV2xYiJLJ6FSuvnoClkDEE1tXysxshLPs-GXOZE7rD8XUXzezuxZWUE1jXwA-EFajoat8CP6QulHGxlcn_sKIhawhGODxJPz4Pf3jgeZVLG_7HfRJgxNiKcdzQIxnkbdpuS-0Q4-oc5yntsXhFhn31Pa3vGsiPPH9f3ndL2ZZKk3xCgyImLDJuGaxXg-qEVoIG4zNWNHMUNUQ\" } Get SSA # Get existing active SSA based on jti or org_id . Query Parameters # jti \u2014 Unique identifier org_id \u2014 Organization ID Response description # [ { \"ssa\": { \"jti\": \"c3eb1c16-be9b-4e96-974e-aea5e3cf95b0\" \"org_id\": 1, \"software_id\": \"gluu-scan-api\", \"software_roles\": [ \"password\" ], \"grant_types\": [ \"client_credentials\" ], \"iss\": \"https://jans.localhost\", \"exp\": 1668608852, \"iat\": 1668608851, \"description: \"test description\", \"one_time_use\": true, \"rotate_ssa\": false }, \"iss\": \"ed4d5f74-ce41-4180-aed4-54cffa974630\", \"created_at\": 1668608851, \"expiration\": 1668608852, \"status\": \"ACTIVE\" } ] SSA jti \u2014 The \"jti\" (JWT ID) claim provides a unique identifier for the JWT. org_id \u2014 The \"org_id\" is used for organization identification. software_id \u2014 The \"software_id\" is used for software identification. software_roles \u2014 List of string values, fixed value [\"password\", \"notify\"] . grant_types \u2014 Fixed value [\"client_credentials\"] . iss \u2014 The \"iss\" (issuer) claim identifies the principal that issued the JWT. exp \u2014 Expiration time. iat \u2014 Creation time. description \u2014 Describe SSA. one_time_use \u2014 Defined whether the SSA will be used only once or can be used multiple times. rotate_ssa \u2014 TODO - Will be used to rotate expiration of the SSA, currently is only saved as part of the SSA. myCustom1, myCustom2, ... \u2014 if you have custom attributes, they will be displayed here. iss \u2014 The \"iss\" is related to the client that created this SSA. created_at \u2014 Creation time. expiration \u2014 Expiration time. status \u2014 SSA status ( ACTIVE , USED , EXPIRED or REVOKED ). Example: # Request: Get SSA using jti . GET {{your-url}}/ssa?jti={{your-jti}} Content-Type: application/json Authorization: Bearer {{your-token}} Get SSA using org_id . GET {{your-url}}/ssa?org_id={{your-org_id}} Content-Type: application/json Authorization: Bearer {{your-token}} Response: HTTP/1.1 200 OK Date: Wed, 16 Nov 2022 15:27:35 GMT Server: Apache/2.4.52 (Ubuntu) X-Xss-Protection: 1; mode=block X-Content-Type-Options: nosniff Strict-Transport-Security: max-age=31536000; includeSubDomains Cache-Control: no-store Content-Type: application/json Pragma: no-cache Content-Length: 432 Keep-Alive: timeout=5, max=100 Connection: Keep-Alive [ { \"ssa\": { \"software_id\": \"gluu-scan-api\", \"grant_types\": [ \"client_credentials\" ], \"org_id\": 1, \"iss\": \"https://jans.localhost\", \"software_roles\": [ \"passwurd\" ], \"exp\": 1668608852, \"iat\": 1668608851, \"jti\": \"c3eb1c16-be9b-4e96-974e-aea5e3cf95b0\", \"description: \"test description\", \"one_time_use\": true, \"rotate_ssa\": false }, \"iss\": \"ed4d5f74-ce41-4180-aed4-54cffa974630\", \"created_at\": 1668608851, \"expiration\": 1668608852, \"status\": \"ACTIVE\" } ] Get JWT SSA # Get existing active SSA based on jti . Query Parameters # jti \u2014 Unique identifier Response description # Returned SSA is a JWT, containing the following structure: { \"ssa\": \"eyJraWQiOiI1NTk3MGFkZS00M2MwLTQ4YWMtODEyZi0yZTY1MzhjMTEyN2Zfc2lnX3JzNTEyIiwidHlwIjoiand0IiwiYWxnIjoiUlM1MTIifQ.eyJzb2Z0d2FyZV9pZCI6ImdsdXUtc2Nhbi1hcGkiLCJncmFudF90eXBlcyI6WyJjbGllbnRfY3JlZGVudGlhbHMiXSwib3JnX2lkIjoxLCJpc3MiOiJodHRwczovL2phbnMubG9jYWxob3N0Iiwic29mdHdhcmVfcm9sZXMiOlsicGFzc3d1cmQiXSwiZXhwIjoxNjY4NjA5MDA1LCJpYXQiOjE2Njg2NDE5NjcsImp0aSI6ImU4OWVjYTQxLTM0ODUtNDUxNi1hMTYyLWZiODYyNjJhYmFjMyJ9.jRgh8_aiwMTJxeT9cwfup9QP9LBc6gQstvabCzUOJvELnzosxiNJHeU2mrvavaNK6BGvs_lbNjODVDeetGCD48_F2ay9r8qmo-f3GPzdzcJozKgfzonSkAE5Ran9LKcQQJpVc1rDYcV2xYiJLJ6FSuvnoClkDEE1tXysxshLPs-GXOZE7rD8XUXzezuxZWUE1jXwA-EFajoat8CP6QulHGxlcn_sKIhawhGODxJPz4Pf3jgeZVLG_7HfRJgxNiKcdzQIxnkbdpuS-0Q4-oc5yntsXhFhn31Pa3vGsiPPH9f3ndL2ZZKk3xCgyImLDJuGaxXg-qEVoIG4zNWNHMUNUQ\" } Header alg \u2014 The signature algorithm which used RS256 . typ \u2014 The type which used. kid \u2014 The key identification gluu-scan-api-rs256-ssa-signature-key . Payload iat \u2014 The time the JWT was created. iss \u2014 The \"iss\" (issuer) claim identifies the principal that issued the JWT. jti \u2014 The \"jti\" (JWT ID) claim provides a unique identifier for the JWT. software_id \u2014 The \"software_id\" is used for software identification. org_id \u2014 The \"org_id\" is used for organization identification. software_roles \u2014 List of string values, fixed value [\"password\", \"notify\"] . grant_types \u2014 Fixed value [\"client_credentials\"] . exp \u2014 Expiration Time. myCustom1, myCustom2, ... : if you have custom attributes, they will be displayed here. Example: # Request: GET {{your-url}}/ssa/jwt?jti={{your-jti}} Content-Type: application/json Authorization: Bearer {{your-token}} Response: HTTP/1.1 201 Created Date: Wed, 16 Nov 2022 23:39:27 GMT Server: Apache/2.4.52 (Ubuntu) X-Xss-Protection: 1; mode=block X-Content-Type-Options: nosniff Strict-Transport-Security: max-age=31536000; includeSubDomains Cache-Control: no-store Content-Type: application/json Pragma: no-cache Content-Length: 757 Keep-Alive: timeout=5, max=100 Connection: Keep-Alive { \"ssa\": \"eyJraWQiOiI1NTk3MGFkZS00M2MwLTQ4YWMtODEyZi0yZTY1MzhjMTEyN2Zfc2lnX3JzNTEyIiwidHlwIjoiand0IiwiYWxnIjoiUlM1MTIifQ.eyJzb2Z0d2FyZV9pZCI6ImdsdXUtc2Nhbi1hcGkiLCJncmFudF90eXBlcyI6WyJjbGllbnRfY3JlZGVudGlhbHMiXSwib3JnX2lkIjoxLCJpc3MiOiJodHRwczovL2phbnMubG9jYWxob3N0Iiwic29mdHdhcmVfcm9sZXMiOlsicGFzc3d1cmQiXSwiZXhwIjoxNjY4NjA5MDA1LCJpYXQiOjE2Njg2NDE5NjcsImp0aSI6ImU4OWVjYTQxLTM0ODUtNDUxNi1hMTYyLWZiODYyNjJhYmFjMyJ9.jRgh8_aiwMTJxeT9cwfup9QP9LBc6gQstvabCzUOJvELnzosxiNJHeU2mrvavaNK6BGvs_lbNjODVDeetGCD48_F2ay9r8qmo-f3GPzdzcJozKgfzonSkAE5Ran9LKcQQJpVc1rDYcV2xYiJLJ6FSuvnoClkDEE1tXysxshLPs-GXOZE7rD8XUXzezuxZWUE1jXwA-EFajoat8CP6QulHGxlcn_sKIhawhGODxJPz4Pf3jgeZVLG_7HfRJgxNiKcdzQIxnkbdpuS-0Q4-oc5yntsXhFhn31Pa3vGsiPPH9f3ndL2ZZKk3xCgyImLDJuGaxXg-qEVoIG4zNWNHMUNUQ\" } Validate SSA # Validate existing active SSA based on jti Header Parameters # jti \u2014 Unique identifier Response description # Method returns status 200 with an empty body if the corresponding SSA exists and is active. Example: # HEAD {{your-url}}/ssa jti: {{your-jti}} HTTP/1.1 200 OK Date: Wed, 16 Nov 2022 21:49:11 GMT Server: Apache/2.4.52 (Ubuntu) X-Xss-Protection: 1; mode=block X-Content-Type-Options: nosniff Strict-Transport-Security: max-age=31536000; includeSubDomains Cache-Control: no-store Content-Type: application/json Pragma: no-cache Keep-Alive: timeout=5, max=100 Connection: Keep-Alive <Response body is empty> Revoke SSA # Revoke existing active SSA based on jti or org_id . Query Parameters # jti \u2014 for revoke only one SSA, the specified by jti org_id \u2014 for revoke all SSA of the specified organization. Response description # Method returns status 200 with an empty body if all required SSAs were revoked correctly. Example: # Request: Revoke using jti . DELETE {{your-url}}/ssa?jti={{your-jti}} Authorization: Bearer {{your-token}} Revoke using org_id . DELETE {{your-url}}/ssa?org_id={{your-org_id}} Authorization: Bearer {{your-token}} Response: HTTP/1.1 200 OK Date: Wed, 16 Nov 2022 23:15:56 GMT Server: Apache/2.4.52 (Ubuntu) X-Xss-Protection: 1; mode=block X-Content-Type-Options: nosniff Strict-Transport-Security: max-age=31536000; includeSubDomains Cache-Control: no-store Content-Type: application/json Pragma: no-cache Content-Length: 0 Keep-Alive: timeout=5, max=100 Connection: Keep-Alive <Response body is empty> SSA Custom Script # The custom script will allow us to modify the SSA process. SSA Custom Script Modify the JWT returned by the creation SSA web service. Modify the list returned by the get SSA web service. Run a process after revoking an SSA. Create method # This method is executed after having generated the jwt that the service will return. In the following example, new fields is added to the header and payload of the JWT. def create(self, jsonWebResponse, context): print \"Modify ssa response script. Modify idToken: %s\" % jsonWebResponse jsonWebResponse.getHeader().setClaim(\"custom_header_name\", \"custom_header_value\") jsonWebResponse.getClaims().setClaim(\"custom_claim_name\", \"custom_claim_value\") print \"Modify ssa response script. After modify idToken: %s\" % jsonWebResponse return True Parameters # jsonWebResponse \u2014 JWT with SSA structure using io.jans.as.model.jwt.Jwt class context \u2014 Contains, SSA global configuration class, client, execution context, etc. Get method # This method is executed after having generated the SSA list that will be returned by the service. def get(self, jsonArray, context): print \"Modify ssa response script. Modify get ssa list: %s\" % jsonArray return True Parameters # jsonArray \u2014 Contains SSA list using org.json.JSONArray class context \u2014 Contains, SSA global configuration class, client, execution context, etc. Revoke method # This method is executed after the SSA list has been revoked. def revoke(self, ssaList, context): print \"Modify ssa response script. Modify revoke ssaList: %s\" % ssaList return True Parameters # ssaList \u2014 SSA revoked list. context \u2014 Contains, SSA global configuration class, client, execution context, etc. SSA Class structure # The SSA entity contains the following fields: id type String \u2014 Unique class identifier, and is used as the jti identifier for the JWT . orgId type String \u2014 Organization ID. description type String \u2014 SSA Description. state type enum SsaState \u2014 Contains the following SSA status values ( ACTIVE , EXPIRED , REVOKED , USED ). creationDate type Date \u2014 SSA Creation date. creatorId type String \u2014 Client that created SSA. creatorType type enum CreatorType \u2014 Contains the following CreatorType values ( NONE , CLIENT , USER , AUTO ). ttl type Integer \u2014 SSA lifetime in milliseconds. atributes type class SsaAtributes oneTimeUse type Boolean \u2014 Whether the SSA will be single use. rotateSsa type Boolean \u2014 TODO - Will be used to rotate expiration of the SSA, currently is only saved as part of the SSA. clientDn type String \u2014 Client's DN. customAttributes type Map<String, String> \u2014 Contain additional fields, previously configured in the SSA global configuration. softwareId type String \u2014 Is used for software identification. softwareRoles type List<String> \u2014 List of string values, fixed value [\"password\", \"notify\"] . grantTypes type List<String> \u2014 Fixed value [\"client_credentials\"] .","title":"SSA"},{"location":"admin/auth-server/endpoints/ssa/#software-statement-assertion-ssa","text":"Janssen Server provides SSA endpoint that enables management of SSAs. The SSA is a JSON Web Token (JWT) containing client metadata and some custom attributes. Specification for SSAs has been outlined as part of Dynamic Client Registration Protocol . URL to access revocation endpoint on Janssen Server is listed in the response of Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration ssa_endpoint claim in the response specifies the URL for revocation endpoint. By default, revocation endpoint looks like below: https://janssen.server.host/jans-auth/restv1/ssa More information about request and response of the revocation endpoint can be found in the OpenAPI specification of jans-auth-server module .","title":"Software Statement Assertion (SSA)"},{"location":"admin/auth-server/endpoints/ssa/#disabling-the-endpoint-using-feature-flag","text":"/ssa endpoint can be enabled or disable using SSA feature flag . Use Janssen Text-based UI(TUI) or Janssen command-line interface to perform this task. When using TUI, navigate via Auth Server -> Properties -> enabledFeatureFlags to screen below. From here, enable or disable SSA flag as required.","title":"Disabling The Endpoint Using Feature Flag"},{"location":"admin/auth-server/endpoints/ssa/#configuration-properties","text":"SSA endpoint can be further configured using Janssen Server configuration property ssaConfiguration . When using Janssen Text-based UI(TUI) to configure the properties, navigate via Auth Server -> Properties to update value for this property. This property take JSON configuration with parameters as described below: \"ssaConfiguration\": { \"ssaEndpoint\": \"{{your-url}}/ssa\", \"ssaCustomAttributes\": [ \"myCustomAttr1\", \"myCustomAttr2\", ... ], \"ssaSigningAlg\": \"RS512\", \"ssaExpirationInDays\": 30 } ssaEndpoint \u2014 Base endpoint for SSA. ssaCustomAttributes \u2014 List of custom attributes, which are received in the request when creating an SSA. ssaSigningAlg \u2014 Algorithm to sign the JWT that is returned after creating an SSA. ssaExpirationInDays \u2014 Expiration expressed in days, when an SSA is created and the expiration is not sent.","title":"Configuration Properties"},{"location":"admin/auth-server/endpoints/ssa/#ssa-security","text":"To call SSA services, a token of type client_credentials must be generated with the following scopes enabled: https://jans.io/auth/ssa.admin \u2014 Allows calling all SSA services. https://jans.io/auth/ssa.portal \u2014 Allows only call Get SSA service. https://jans.io/auth/ssa.developer \u2014 Allows only call Get SSA , but you can only filter ssa that have been created by the same client.","title":"SSA Security"},{"location":"admin/auth-server/endpoints/ssa/#create-a-new-ssa","text":"Create SSA for the organization with expiration (optional).","title":"Create a new SSA"},{"location":"admin/auth-server/endpoints/ssa/#request-body-description","text":"Field Detail Optional org_id The \"org_id\" is used for organization identification. false description Describe SSA false software_id The \"software_id\" is used for software identification. false software_roles List of string values, fixed value [\"password\", \"notify\"] . false grant_types Fixed value Fixed value [\"client_credentials\"] . false expiration Expiration date. (Default value: calculated based on global SSA settings) true one_time_use Defined whether the SSA will be used only once or can be used multiple times. (Default value: true) true rotate_ssa TODO - Will be used to rotate expiration of the SSA, currently is only saved as part of the SSA. (Default value: true) true Note: You can add more custom attributes in the request, (you must have previously configured in the SSA global configuration). It should be clarified that these values are persisted in the database and are not returned in the SSA JWT. Example: { \"org_id\": \"your-org-id\", \"description\": \"your description\" ... org_id: \"Your org_id\", \"myCustomAttr1\": \"Your value custom attr 1\", \"myCustomAttr2\": \"Your value custom attr 2\", ... }","title":"Request body description"},{"location":"admin/auth-server/endpoints/ssa/#response-description","text":"Returned SSA is a JWT, containing the following structure: { \"ssa\": \"eyJraWQiOiI1NTk3MGFkZS00M2MwLTQ4YWMtODEyZi0yZTY1MzhjMTEyN2Zfc2lnX3JzNTEyIiwidHlwIjoiand0IiwiYWxnIjoiUlM1MTIifQ.eyJzb2Z0d2FyZV9pZCI6ImdsdXUtc2Nhbi1hcGkiLCJncmFudF90eXBlcyI6WyJjbGllbnRfY3JlZGVudGlhbHMiXSwib3JnX2lkIjoxLCJpc3MiOiJodHRwczovL2phbnMubG9jYWxob3N0Iiwic29mdHdhcmVfcm9sZXMiOlsicGFzc3d1cmQiXSwiZXhwIjoxNjY4NjA5MDA1LCJpYXQiOjE2Njg2NDE5NjcsImp0aSI6ImU4OWVjYTQxLTM0ODUtNDUxNi1hMTYyLWZiODYyNjJhYmFjMyJ9.jRgh8_aiwMTJxeT9cwfup9QP9LBc6gQstvabCzUOJvELnzosxiNJHeU2mrvavaNK6BGvs_lbNjODVDeetGCD48_F2ay9r8qmo-f3GPzdzcJozKgfzonSkAE5Ran9LKcQQJpVc1rDYcV2xYiJLJ6FSuvnoClkDEE1tXysxshLPs-GXOZE7rD8XUXzezuxZWUE1jXwA-EFajoat8CP6QulHGxlcn_sKIhawhGODxJPz4Pf3jgeZVLG_7HfRJgxNiKcdzQIxnkbdpuS-0Q4-oc5yntsXhFhn31Pa3vGsiPPH9f3ndL2ZZKk3xCgyImLDJuGaxXg-qEVoIG4zNWNHMUNUQ\" } Header alg \u2014 The signature algorithm which used RS256 . typ \u2014 The type which used. kid \u2014 The key identification gluu-scan-api-rs256-ssa-signature-key . Payload iat \u2014 The time the JWT was created. iss \u2014 The \"iss\" (issuer) claim identifies the principal that issued the JWT. jti \u2014 The \"jti\" (JWT ID) claim provides a unique identifier for the JWT. software_id \u2014 The \"software_id\" is used for software identification. org_id \u2014 The \"org_id\" is used for organization identification. software_roles \u2014 List of string values, fixed value [\"password\", \"notify\"] . grant_types \u2014 Fixed value [\"client_credentials\"] . exp \u2014 Expiration Time. myCustom1, myCustom2, ... : if you have custom attributes, they will be displayed here.","title":"Response description"},{"location":"admin/auth-server/endpoints/ssa/#example","text":"Request: POST {{your-url}}/ssa Content-Type: application/json Authorization: Bearer {{your-token}} { \"description\": \"test\", \"software_id\": \"gluu-scan-api\", \"software_roles\": [ \"password\" ], \"grant_types\": [ \"client_credentials\" ], \"expiration\": 1668609005, \"one_time_use\": true, \"rotate_ssa\": true } Response: HTTP/1.1 201 Created Date: Wed, 16 Nov 2022 23:39:27 GMT Server: Apache/2.4.52 (Ubuntu) X-Xss-Protection: 1; mode=block X-Content-Type-Options: nosniff Strict-Transport-Security: max-age=31536000; includeSubDomains Cache-Control: no-store Content-Type: application/json Pragma: no-cache Content-Length: 757 Keep-Alive: timeout=5, max=100 Connection: Keep-Alive { \"ssa\": \"eyJraWQiOiI1NTk3MGFkZS00M2MwLTQ4YWMtODEyZi0yZTY1MzhjMTEyN2Zfc2lnX3JzNTEyIiwidHlwIjoiand0IiwiYWxnIjoiUlM1MTIifQ.eyJzb2Z0d2FyZV9pZCI6ImdsdXUtc2Nhbi1hcGkiLCJncmFudF90eXBlcyI6WyJjbGllbnRfY3JlZGVudGlhbHMiXSwib3JnX2lkIjoxLCJpc3MiOiJodHRwczovL2phbnMubG9jYWxob3N0Iiwic29mdHdhcmVfcm9sZXMiOlsicGFzc3d1cmQiXSwiZXhwIjoxNjY4NjA5MDA1LCJpYXQiOjE2Njg2NDE5NjcsImp0aSI6ImU4OWVjYTQxLTM0ODUtNDUxNi1hMTYyLWZiODYyNjJhYmFjMyJ9.jRgh8_aiwMTJxeT9cwfup9QP9LBc6gQstvabCzUOJvELnzosxiNJHeU2mrvavaNK6BGvs_lbNjODVDeetGCD48_F2ay9r8qmo-f3GPzdzcJozKgfzonSkAE5Ran9LKcQQJpVc1rDYcV2xYiJLJ6FSuvnoClkDEE1tXysxshLPs-GXOZE7rD8XUXzezuxZWUE1jXwA-EFajoat8CP6QulHGxlcn_sKIhawhGODxJPz4Pf3jgeZVLG_7HfRJgxNiKcdzQIxnkbdpuS-0Q4-oc5yntsXhFhn31Pa3vGsiPPH9f3ndL2ZZKk3xCgyImLDJuGaxXg-qEVoIG4zNWNHMUNUQ\" }","title":"Example:"},{"location":"admin/auth-server/endpoints/ssa/#get-ssa","text":"Get existing active SSA based on jti or org_id .","title":"Get SSA"},{"location":"admin/auth-server/endpoints/ssa/#query-parameters","text":"jti \u2014 Unique identifier org_id \u2014 Organization ID","title":"Query Parameters"},{"location":"admin/auth-server/endpoints/ssa/#response-description_1","text":"[ { \"ssa\": { \"jti\": \"c3eb1c16-be9b-4e96-974e-aea5e3cf95b0\" \"org_id\": 1, \"software_id\": \"gluu-scan-api\", \"software_roles\": [ \"password\" ], \"grant_types\": [ \"client_credentials\" ], \"iss\": \"https://jans.localhost\", \"exp\": 1668608852, \"iat\": 1668608851, \"description: \"test description\", \"one_time_use\": true, \"rotate_ssa\": false }, \"iss\": \"ed4d5f74-ce41-4180-aed4-54cffa974630\", \"created_at\": 1668608851, \"expiration\": 1668608852, \"status\": \"ACTIVE\" } ] SSA jti \u2014 The \"jti\" (JWT ID) claim provides a unique identifier for the JWT. org_id \u2014 The \"org_id\" is used for organization identification. software_id \u2014 The \"software_id\" is used for software identification. software_roles \u2014 List of string values, fixed value [\"password\", \"notify\"] . grant_types \u2014 Fixed value [\"client_credentials\"] . iss \u2014 The \"iss\" (issuer) claim identifies the principal that issued the JWT. exp \u2014 Expiration time. iat \u2014 Creation time. description \u2014 Describe SSA. one_time_use \u2014 Defined whether the SSA will be used only once or can be used multiple times. rotate_ssa \u2014 TODO - Will be used to rotate expiration of the SSA, currently is only saved as part of the SSA. myCustom1, myCustom2, ... \u2014 if you have custom attributes, they will be displayed here. iss \u2014 The \"iss\" is related to the client that created this SSA. created_at \u2014 Creation time. expiration \u2014 Expiration time. status \u2014 SSA status ( ACTIVE , USED , EXPIRED or REVOKED ).","title":"Response description"},{"location":"admin/auth-server/endpoints/ssa/#example_1","text":"Request: Get SSA using jti . GET {{your-url}}/ssa?jti={{your-jti}} Content-Type: application/json Authorization: Bearer {{your-token}} Get SSA using org_id . GET {{your-url}}/ssa?org_id={{your-org_id}} Content-Type: application/json Authorization: Bearer {{your-token}} Response: HTTP/1.1 200 OK Date: Wed, 16 Nov 2022 15:27:35 GMT Server: Apache/2.4.52 (Ubuntu) X-Xss-Protection: 1; mode=block X-Content-Type-Options: nosniff Strict-Transport-Security: max-age=31536000; includeSubDomains Cache-Control: no-store Content-Type: application/json Pragma: no-cache Content-Length: 432 Keep-Alive: timeout=5, max=100 Connection: Keep-Alive [ { \"ssa\": { \"software_id\": \"gluu-scan-api\", \"grant_types\": [ \"client_credentials\" ], \"org_id\": 1, \"iss\": \"https://jans.localhost\", \"software_roles\": [ \"passwurd\" ], \"exp\": 1668608852, \"iat\": 1668608851, \"jti\": \"c3eb1c16-be9b-4e96-974e-aea5e3cf95b0\", \"description: \"test description\", \"one_time_use\": true, \"rotate_ssa\": false }, \"iss\": \"ed4d5f74-ce41-4180-aed4-54cffa974630\", \"created_at\": 1668608851, \"expiration\": 1668608852, \"status\": \"ACTIVE\" } ]","title":"Example:"},{"location":"admin/auth-server/endpoints/ssa/#get-jwt-ssa","text":"Get existing active SSA based on jti .","title":"Get JWT SSA"},{"location":"admin/auth-server/endpoints/ssa/#query-parameters_1","text":"jti \u2014 Unique identifier","title":"Query Parameters"},{"location":"admin/auth-server/endpoints/ssa/#response-description_2","text":"Returned SSA is a JWT, containing the following structure: { \"ssa\": \"eyJraWQiOiI1NTk3MGFkZS00M2MwLTQ4YWMtODEyZi0yZTY1MzhjMTEyN2Zfc2lnX3JzNTEyIiwidHlwIjoiand0IiwiYWxnIjoiUlM1MTIifQ.eyJzb2Z0d2FyZV9pZCI6ImdsdXUtc2Nhbi1hcGkiLCJncmFudF90eXBlcyI6WyJjbGllbnRfY3JlZGVudGlhbHMiXSwib3JnX2lkIjoxLCJpc3MiOiJodHRwczovL2phbnMubG9jYWxob3N0Iiwic29mdHdhcmVfcm9sZXMiOlsicGFzc3d1cmQiXSwiZXhwIjoxNjY4NjA5MDA1LCJpYXQiOjE2Njg2NDE5NjcsImp0aSI6ImU4OWVjYTQxLTM0ODUtNDUxNi1hMTYyLWZiODYyNjJhYmFjMyJ9.jRgh8_aiwMTJxeT9cwfup9QP9LBc6gQstvabCzUOJvELnzosxiNJHeU2mrvavaNK6BGvs_lbNjODVDeetGCD48_F2ay9r8qmo-f3GPzdzcJozKgfzonSkAE5Ran9LKcQQJpVc1rDYcV2xYiJLJ6FSuvnoClkDEE1tXysxshLPs-GXOZE7rD8XUXzezuxZWUE1jXwA-EFajoat8CP6QulHGxlcn_sKIhawhGODxJPz4Pf3jgeZVLG_7HfRJgxNiKcdzQIxnkbdpuS-0Q4-oc5yntsXhFhn31Pa3vGsiPPH9f3ndL2ZZKk3xCgyImLDJuGaxXg-qEVoIG4zNWNHMUNUQ\" } Header alg \u2014 The signature algorithm which used RS256 . typ \u2014 The type which used. kid \u2014 The key identification gluu-scan-api-rs256-ssa-signature-key . Payload iat \u2014 The time the JWT was created. iss \u2014 The \"iss\" (issuer) claim identifies the principal that issued the JWT. jti \u2014 The \"jti\" (JWT ID) claim provides a unique identifier for the JWT. software_id \u2014 The \"software_id\" is used for software identification. org_id \u2014 The \"org_id\" is used for organization identification. software_roles \u2014 List of string values, fixed value [\"password\", \"notify\"] . grant_types \u2014 Fixed value [\"client_credentials\"] . exp \u2014 Expiration Time. myCustom1, myCustom2, ... : if you have custom attributes, they will be displayed here.","title":"Response description"},{"location":"admin/auth-server/endpoints/ssa/#example_2","text":"Request: GET {{your-url}}/ssa/jwt?jti={{your-jti}} Content-Type: application/json Authorization: Bearer {{your-token}} Response: HTTP/1.1 201 Created Date: Wed, 16 Nov 2022 23:39:27 GMT Server: Apache/2.4.52 (Ubuntu) X-Xss-Protection: 1; mode=block X-Content-Type-Options: nosniff Strict-Transport-Security: max-age=31536000; includeSubDomains Cache-Control: no-store Content-Type: application/json Pragma: no-cache Content-Length: 757 Keep-Alive: timeout=5, max=100 Connection: Keep-Alive { \"ssa\": \"eyJraWQiOiI1NTk3MGFkZS00M2MwLTQ4YWMtODEyZi0yZTY1MzhjMTEyN2Zfc2lnX3JzNTEyIiwidHlwIjoiand0IiwiYWxnIjoiUlM1MTIifQ.eyJzb2Z0d2FyZV9pZCI6ImdsdXUtc2Nhbi1hcGkiLCJncmFudF90eXBlcyI6WyJjbGllbnRfY3JlZGVudGlhbHMiXSwib3JnX2lkIjoxLCJpc3MiOiJodHRwczovL2phbnMubG9jYWxob3N0Iiwic29mdHdhcmVfcm9sZXMiOlsicGFzc3d1cmQiXSwiZXhwIjoxNjY4NjA5MDA1LCJpYXQiOjE2Njg2NDE5NjcsImp0aSI6ImU4OWVjYTQxLTM0ODUtNDUxNi1hMTYyLWZiODYyNjJhYmFjMyJ9.jRgh8_aiwMTJxeT9cwfup9QP9LBc6gQstvabCzUOJvELnzosxiNJHeU2mrvavaNK6BGvs_lbNjODVDeetGCD48_F2ay9r8qmo-f3GPzdzcJozKgfzonSkAE5Ran9LKcQQJpVc1rDYcV2xYiJLJ6FSuvnoClkDEE1tXysxshLPs-GXOZE7rD8XUXzezuxZWUE1jXwA-EFajoat8CP6QulHGxlcn_sKIhawhGODxJPz4Pf3jgeZVLG_7HfRJgxNiKcdzQIxnkbdpuS-0Q4-oc5yntsXhFhn31Pa3vGsiPPH9f3ndL2ZZKk3xCgyImLDJuGaxXg-qEVoIG4zNWNHMUNUQ\" }","title":"Example:"},{"location":"admin/auth-server/endpoints/ssa/#validate-ssa","text":"Validate existing active SSA based on jti","title":"Validate SSA"},{"location":"admin/auth-server/endpoints/ssa/#header-parameters","text":"jti \u2014 Unique identifier","title":"Header Parameters"},{"location":"admin/auth-server/endpoints/ssa/#response-description_3","text":"Method returns status 200 with an empty body if the corresponding SSA exists and is active.","title":"Response description"},{"location":"admin/auth-server/endpoints/ssa/#example_3","text":"HEAD {{your-url}}/ssa jti: {{your-jti}} HTTP/1.1 200 OK Date: Wed, 16 Nov 2022 21:49:11 GMT Server: Apache/2.4.52 (Ubuntu) X-Xss-Protection: 1; mode=block X-Content-Type-Options: nosniff Strict-Transport-Security: max-age=31536000; includeSubDomains Cache-Control: no-store Content-Type: application/json Pragma: no-cache Keep-Alive: timeout=5, max=100 Connection: Keep-Alive <Response body is empty>","title":"Example:"},{"location":"admin/auth-server/endpoints/ssa/#revoke-ssa","text":"Revoke existing active SSA based on jti or org_id .","title":"Revoke SSA"},{"location":"admin/auth-server/endpoints/ssa/#query-parameters_2","text":"jti \u2014 for revoke only one SSA, the specified by jti org_id \u2014 for revoke all SSA of the specified organization.","title":"Query Parameters"},{"location":"admin/auth-server/endpoints/ssa/#response-description_4","text":"Method returns status 200 with an empty body if all required SSAs were revoked correctly.","title":"Response description"},{"location":"admin/auth-server/endpoints/ssa/#example_4","text":"Request: Revoke using jti . DELETE {{your-url}}/ssa?jti={{your-jti}} Authorization: Bearer {{your-token}} Revoke using org_id . DELETE {{your-url}}/ssa?org_id={{your-org_id}} Authorization: Bearer {{your-token}} Response: HTTP/1.1 200 OK Date: Wed, 16 Nov 2022 23:15:56 GMT Server: Apache/2.4.52 (Ubuntu) X-Xss-Protection: 1; mode=block X-Content-Type-Options: nosniff Strict-Transport-Security: max-age=31536000; includeSubDomains Cache-Control: no-store Content-Type: application/json Pragma: no-cache Content-Length: 0 Keep-Alive: timeout=5, max=100 Connection: Keep-Alive <Response body is empty>","title":"Example:"},{"location":"admin/auth-server/endpoints/ssa/#ssa-custom-script","text":"The custom script will allow us to modify the SSA process. SSA Custom Script Modify the JWT returned by the creation SSA web service. Modify the list returned by the get SSA web service. Run a process after revoking an SSA.","title":"SSA Custom Script"},{"location":"admin/auth-server/endpoints/ssa/#create-method","text":"This method is executed after having generated the jwt that the service will return. In the following example, new fields is added to the header and payload of the JWT. def create(self, jsonWebResponse, context): print \"Modify ssa response script. Modify idToken: %s\" % jsonWebResponse jsonWebResponse.getHeader().setClaim(\"custom_header_name\", \"custom_header_value\") jsonWebResponse.getClaims().setClaim(\"custom_claim_name\", \"custom_claim_value\") print \"Modify ssa response script. After modify idToken: %s\" % jsonWebResponse return True","title":"Create method"},{"location":"admin/auth-server/endpoints/ssa/#parameters","text":"jsonWebResponse \u2014 JWT with SSA structure using io.jans.as.model.jwt.Jwt class context \u2014 Contains, SSA global configuration class, client, execution context, etc.","title":"Parameters"},{"location":"admin/auth-server/endpoints/ssa/#get-method","text":"This method is executed after having generated the SSA list that will be returned by the service. def get(self, jsonArray, context): print \"Modify ssa response script. Modify get ssa list: %s\" % jsonArray return True","title":"Get method"},{"location":"admin/auth-server/endpoints/ssa/#parameters_1","text":"jsonArray \u2014 Contains SSA list using org.json.JSONArray class context \u2014 Contains, SSA global configuration class, client, execution context, etc.","title":"Parameters"},{"location":"admin/auth-server/endpoints/ssa/#revoke-method","text":"This method is executed after the SSA list has been revoked. def revoke(self, ssaList, context): print \"Modify ssa response script. Modify revoke ssaList: %s\" % ssaList return True","title":"Revoke method"},{"location":"admin/auth-server/endpoints/ssa/#parameters_2","text":"ssaList \u2014 SSA revoked list. context \u2014 Contains, SSA global configuration class, client, execution context, etc.","title":"Parameters"},{"location":"admin/auth-server/endpoints/ssa/#ssa-class-structure","text":"The SSA entity contains the following fields: id type String \u2014 Unique class identifier, and is used as the jti identifier for the JWT . orgId type String \u2014 Organization ID. description type String \u2014 SSA Description. state type enum SsaState \u2014 Contains the following SSA status values ( ACTIVE , EXPIRED , REVOKED , USED ). creationDate type Date \u2014 SSA Creation date. creatorId type String \u2014 Client that created SSA. creatorType type enum CreatorType \u2014 Contains the following CreatorType values ( NONE , CLIENT , USER , AUTO ). ttl type Integer \u2014 SSA lifetime in milliseconds. atributes type class SsaAtributes oneTimeUse type Boolean \u2014 Whether the SSA will be single use. rotateSsa type Boolean \u2014 TODO - Will be used to rotate expiration of the SSA, currently is only saved as part of the SSA. clientDn type String \u2014 Client's DN. customAttributes type Map<String, String> \u2014 Contain additional fields, previously configured in the SSA global configuration. softwareId type String \u2014 Is used for software identification. softwareRoles type List<String> \u2014 List of string values, fixed value [\"password\", \"notify\"] . grantTypes type List<String> \u2014 Fixed value [\"client_credentials\"] .","title":"SSA Class structure"},{"location":"admin/auth-server/endpoints/token-revocation/","tags":["administration","auth-server","token-revocation","endpoint"],"text":"Overview # Janssen Server supports token revocation endpoint enables a client to notify the server that previously obtained refresh or access token is no longer needed, allowing the server to clean up security credentials. Implementation conforms with token revocation specification . Since a token is part of a grant, when the token is invalidated, all other token within the same grant are also revoked. i.e when a refresh token related to a grant is invalidated, all access tokens from the same grant are also invalidated and vice-versa. URL to access revocation endpoint on Janssen Server is listed in the response of Janssen Server's well-known configuration endpoint given below. https://<jans-server-host>/jans-auth/.well-known/openid-configuration revocation_endpoint claim in the response specifies the URL for revocation endpoint. By default, revocation endpoint looks like below: https://jans-dynamic-ldap/jans-auth/restv1/revoke More information about request and response of the revocation endpoint can be found in the OpenAPI specification of jans-auth-server module . Disabling The Endpoint Using Feature Flag # Token revocation endpoint can be enabled or disable using REVOKE_TOKEN feature flag . Use Janssen Text-based UI(TUI) or Janssen command-line interface to perform this task. When using TUI, navigate via Auth Server -> Properties -> enabledFeatureFlags to screen below. From here, enable or disable REVOKE_TOKEN flag as required. Configuration Properties # Token revocation endpoint can be further configured using Janssen Server configuration properties listed below. When using Janssen Text-based UI(TUI) to configure the properties, navigate via Auth Server -> Properties . mtlstokenrevocationendpoint tokenRevocationEndpoint Revoke all tokens by client_id # To remove all tokens for given client_id it's required: - set allowAllValueForRevokeEndpoint AS configuration property to true - pass in request parameter token_type_hint=all client is identified by Client Authentication performed by AS to grant access to /revoke endpoint. Revoke Interception Script # Endpoint can provide custom behavior via implementing Revoke Token interception script .","title":"Token Revocation"},{"location":"admin/auth-server/endpoints/token-revocation/#overview","text":"Janssen Server supports token revocation endpoint enables a client to notify the server that previously obtained refresh or access token is no longer needed, allowing the server to clean up security credentials. Implementation conforms with token revocation specification . Since a token is part of a grant, when the token is invalidated, all other token within the same grant are also revoked. i.e when a refresh token related to a grant is invalidated, all access tokens from the same grant are also invalidated and vice-versa. URL to access revocation endpoint on Janssen Server is listed in the response of Janssen Server's well-known configuration endpoint given below. https://<jans-server-host>/jans-auth/.well-known/openid-configuration revocation_endpoint claim in the response specifies the URL for revocation endpoint. By default, revocation endpoint looks like below: https://jans-dynamic-ldap/jans-auth/restv1/revoke More information about request and response of the revocation endpoint can be found in the OpenAPI specification of jans-auth-server module .","title":"Overview"},{"location":"admin/auth-server/endpoints/token-revocation/#disabling-the-endpoint-using-feature-flag","text":"Token revocation endpoint can be enabled or disable using REVOKE_TOKEN feature flag . Use Janssen Text-based UI(TUI) or Janssen command-line interface to perform this task. When using TUI, navigate via Auth Server -> Properties -> enabledFeatureFlags to screen below. From here, enable or disable REVOKE_TOKEN flag as required.","title":"Disabling The Endpoint Using Feature Flag"},{"location":"admin/auth-server/endpoints/token-revocation/#configuration-properties","text":"Token revocation endpoint can be further configured using Janssen Server configuration properties listed below. When using Janssen Text-based UI(TUI) to configure the properties, navigate via Auth Server -> Properties . mtlstokenrevocationendpoint tokenRevocationEndpoint","title":"Configuration Properties"},{"location":"admin/auth-server/endpoints/token-revocation/#revoke-all-tokens-by-client_id","text":"To remove all tokens for given client_id it's required: - set allowAllValueForRevokeEndpoint AS configuration property to true - pass in request parameter token_type_hint=all client is identified by Client Authentication performed by AS to grant access to /revoke endpoint.","title":"Revoke all tokens by client_id"},{"location":"admin/auth-server/endpoints/token-revocation/#revoke-interception-script","text":"Endpoint can provide custom behavior via implementing Revoke Token interception script .","title":"Revoke Interception Script"},{"location":"admin/auth-server/endpoints/token/","tags":["administration","auth-server","token","endpoint"],"text":"Overview # Token endpoint is an OAuth2 protected endpoint that is used to grant tokens to client in response to valid request. Token endpoint is defined in the OAuth 2.0 framework , OpenID Connect specification and other specifications relevant to them. Tokens granted by this endpoint depends on grant type and scopes that are specified in the token request. The token endpoint is used with every authorization grant type except for the implicit grant type (since an access token is issued directly). Based on request, this endpoint can grant following types of tokens: Access Token Refresh Token ID Token URL to access token endpoint on Janssen Server is listed in the response of Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration token_endpoint claim in the response specifies the URL for userinfo endpoint. By default, userinfo endpoint looks like below: https://janssen.server.host/jans-auth/restv1/token In response to a valid request, the token endpoint returns token/s in JSON format similar to below. This is just a sample response. Actual response can greatly vary in its contents based on request: HTTP/1.1 200 OK Content-Type: application/json Cache-Control: no-store Pragma: no-cache { \"access_token\": \"SlAV32hkKG\", \"token_type\": \"Bearer\", \"refresh_token\": \"8xLOxBtZp8\", \"expires_in\": 3600, \"id_token\": \"eyJhbGciOiJSUzI1NiIsImtpZCI6IjFlOWdkazcifQ.ewogImlzc yI6ICJodHRwOi8vc2VydmVyLmV4YW1wbGUuY29tIiwKICJzdWIiOiAiMjQ4Mjg5 NzYxMDAxIiwKICJhdWQiOiAiczZCaGRSa3F0MyIsCiAibm9uY2UiOiAibi0wUzZ fV3pBMk1qIiwKICJleHAiOiAxMzExMjgxOTcwLAogImlhdCI6IDEzMTEyODA5Nz AKfQ.ggW8hZ1EuVLuxNuuIJKX_V8a_OMXzR0EHR9R6jgdqrOOF4daGU96Sr_P6q Jp6IcmD3HP99Obi1PRs-cwh3LO-p146waJ8IhehcwL7F09JdijmBqkvPeB2T9CJ NqeGpe-gccMg4vfKjkM8FcGvnzZUN4_KSP0aAp1tOJ1zZwgjxqGByKHiOtX7Tpd QyHE5lcMiKPXfEIQILVq0pc_E2DzL7emopWoaoZTF_m0_N0YzFC6g6EJbOEoRoS K5hoDalrcvRYLSrQAZZKflyuVCyixEoV9GfNQC3_osjzw2PAithfubEEBLuVVk4 XUVrWOLrLl0nx7RkKU8NXNHq-rvKMzqg\" } More information about request and response of the token endpoint can be found in the OpenAPI specification of jans-auth-server module . Configuration Properties # Token endpoint and tokens issued by token endpoint can be further configured using Janssen Server configuration properties listed below. When using Janssen Text-based UI(TUI) to configure the properties, navigate via Auth Server -> Properties . tokenEndpoint tokenEndpointAuthMethodsSupported tokenEndpointAuthSigningAlgValuesSupported accessTokenLifetime checkUserPresenceOnRefreshToken defaultSignatureAlgorithm forceOfflineAccessScopeToEnableRefreshToken grantTypesSupported accessTokenSigningAlgValuesSupported idTokenEncryptionAlgValuesSupported idTokenEncryptionEncValuesSupported idTokenFilterClaimsBasedOnAccessToken idTokenLifetime idTokenSigningAlgValuesSupported accessTokenSigningAlgValuesSupported legacyIdTokenClaims mtlsTokenEndpoint openidScopeBackwardCompatibility persistIdToken persistRefreshToken refreshTokenExtendLifetimeOnRotation refreshTokenLifetime responseTypesSupported skipRefreshTokenDuringRefreshing refreshTokenLifetime Client Authentication # Janssen Server Token Endpoint requires confidential clients to authenticate using one of the supported client authentication method listed below: client_secret_basic client_secret_post client_secret_jwt private_key_jwt Refer to Client Authentication section of OpenID Connect core specification for more details on these authentication methods. Client can specify the default authentication method. To set default authentication method using Janssen Text-based UI(TUI) , navigate via Auth Server -> Clients -> Add Client -> Basic -> Authn Method Token Endpoint . Supported Grant Types # Token endpoint supports below mentioned grant types. Authorization Code Refresh Token Client Credentials Password Client can configure all the possible grant types it can request from token endpoint during client configuration. To select the available grant types using Janssen Text-based UI(TUI) , navigate via Auth Server -> Clients -> Add Client / search client -> Basic -> Grant . Interception Scripts # Token endpoint response can be further customized using interception scripts . Following interception scripts are relevant to token endpoint: Update Token Client can configure a particular script to be executed using client configuration. To update configuration using Janssen Text-based UI(TUI) navigate via Auth Server -> Clients -> Add Client / search -> Client Scripts","title":"Token"},{"location":"admin/auth-server/endpoints/token/#overview","text":"Token endpoint is an OAuth2 protected endpoint that is used to grant tokens to client in response to valid request. Token endpoint is defined in the OAuth 2.0 framework , OpenID Connect specification and other specifications relevant to them. Tokens granted by this endpoint depends on grant type and scopes that are specified in the token request. The token endpoint is used with every authorization grant type except for the implicit grant type (since an access token is issued directly). Based on request, this endpoint can grant following types of tokens: Access Token Refresh Token ID Token URL to access token endpoint on Janssen Server is listed in the response of Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration token_endpoint claim in the response specifies the URL for userinfo endpoint. By default, userinfo endpoint looks like below: https://janssen.server.host/jans-auth/restv1/token In response to a valid request, the token endpoint returns token/s in JSON format similar to below. This is just a sample response. Actual response can greatly vary in its contents based on request: HTTP/1.1 200 OK Content-Type: application/json Cache-Control: no-store Pragma: no-cache { \"access_token\": \"SlAV32hkKG\", \"token_type\": \"Bearer\", \"refresh_token\": \"8xLOxBtZp8\", \"expires_in\": 3600, \"id_token\": \"eyJhbGciOiJSUzI1NiIsImtpZCI6IjFlOWdkazcifQ.ewogImlzc yI6ICJodHRwOi8vc2VydmVyLmV4YW1wbGUuY29tIiwKICJzdWIiOiAiMjQ4Mjg5 NzYxMDAxIiwKICJhdWQiOiAiczZCaGRSa3F0MyIsCiAibm9uY2UiOiAibi0wUzZ fV3pBMk1qIiwKICJleHAiOiAxMzExMjgxOTcwLAogImlhdCI6IDEzMTEyODA5Nz AKfQ.ggW8hZ1EuVLuxNuuIJKX_V8a_OMXzR0EHR9R6jgdqrOOF4daGU96Sr_P6q Jp6IcmD3HP99Obi1PRs-cwh3LO-p146waJ8IhehcwL7F09JdijmBqkvPeB2T9CJ NqeGpe-gccMg4vfKjkM8FcGvnzZUN4_KSP0aAp1tOJ1zZwgjxqGByKHiOtX7Tpd QyHE5lcMiKPXfEIQILVq0pc_E2DzL7emopWoaoZTF_m0_N0YzFC6g6EJbOEoRoS K5hoDalrcvRYLSrQAZZKflyuVCyixEoV9GfNQC3_osjzw2PAithfubEEBLuVVk4 XUVrWOLrLl0nx7RkKU8NXNHq-rvKMzqg\" } More information about request and response of the token endpoint can be found in the OpenAPI specification of jans-auth-server module .","title":"Overview"},{"location":"admin/auth-server/endpoints/token/#configuration-properties","text":"Token endpoint and tokens issued by token endpoint can be further configured using Janssen Server configuration properties listed below. When using Janssen Text-based UI(TUI) to configure the properties, navigate via Auth Server -> Properties . tokenEndpoint tokenEndpointAuthMethodsSupported tokenEndpointAuthSigningAlgValuesSupported accessTokenLifetime checkUserPresenceOnRefreshToken defaultSignatureAlgorithm forceOfflineAccessScopeToEnableRefreshToken grantTypesSupported accessTokenSigningAlgValuesSupported idTokenEncryptionAlgValuesSupported idTokenEncryptionEncValuesSupported idTokenFilterClaimsBasedOnAccessToken idTokenLifetime idTokenSigningAlgValuesSupported accessTokenSigningAlgValuesSupported legacyIdTokenClaims mtlsTokenEndpoint openidScopeBackwardCompatibility persistIdToken persistRefreshToken refreshTokenExtendLifetimeOnRotation refreshTokenLifetime responseTypesSupported skipRefreshTokenDuringRefreshing refreshTokenLifetime","title":"Configuration Properties"},{"location":"admin/auth-server/endpoints/token/#client-authentication","text":"Janssen Server Token Endpoint requires confidential clients to authenticate using one of the supported client authentication method listed below: client_secret_basic client_secret_post client_secret_jwt private_key_jwt Refer to Client Authentication section of OpenID Connect core specification for more details on these authentication methods. Client can specify the default authentication method. To set default authentication method using Janssen Text-based UI(TUI) , navigate via Auth Server -> Clients -> Add Client -> Basic -> Authn Method Token Endpoint .","title":"Client Authentication"},{"location":"admin/auth-server/endpoints/token/#supported-grant-types","text":"Token endpoint supports below mentioned grant types. Authorization Code Refresh Token Client Credentials Password Client can configure all the possible grant types it can request from token endpoint during client configuration. To select the available grant types using Janssen Text-based UI(TUI) , navigate via Auth Server -> Clients -> Add Client / search client -> Basic -> Grant .","title":"Supported Grant Types"},{"location":"admin/auth-server/endpoints/token/#interception-scripts","text":"Token endpoint response can be further customized using interception scripts . Following interception scripts are relevant to token endpoint: Update Token Client can configure a particular script to be executed using client configuration. To update configuration using Janssen Text-based UI(TUI) navigate via Auth Server -> Clients -> Add Client / search -> Client Scripts","title":"Interception Scripts"},{"location":"admin/auth-server/endpoints/userinfo/","tags":["administration","auth-server","userinfo","endpoint"],"text":"Overview # Userinfo endpoint is an OAuth2 protected endpoint that is used to retrieve claims about an authenticated end-user. Userinfo endpoint is defined in the OpenID Connect specification . URL to access userinfo endpoint on Janssen Server is listed in the response of Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration userinfo_endpoint claim in the response specifies the URL for userinfo endpoint. By default, userinfo endpoint looks like below: https://janssen.server.host/jans-auth/restv1/userinfo In response to a valid request, the userinfo endpoint returns user information in JSON format similar to below: HTTP/1.1 200 OK Content-Type: application/json { \"sub\": \"3482897610054\", \"name\": \"Chad Wick\", \"given_name\": \"Chad\", \"family_name\": \"Wick\", \"preferred_username\": \"c.wick\", \"email\": \"cwick@jans.com\", \"picture\": \"http://mysite.com/mypic.jpg\" } Since userinfo endpoint is an OAuth2 protected resource, a valid access token with appropriate scope is required to access the endpoint. More information about request and response of the userinfo endpoint can be found in the OpenAPI specification of jans-auth-server module . Disabling The Endpoint Using Feature Flag # userinfo endpoint can be enabled or disable using USERINFO feature flag . Use Janssen Text-based UI(TUI) or Janssen command-line interface to perform this task. When using TUI, navigate via Auth Server -> Properties -> enabledFeatureFlags to screen below. From here, enable or disable USERINFO flag as required. Configuration Properties # Userinfo endpoint can be further configured using Janssen Server configuration properties listed below. When using Janssen Text-based UI(TUI) to configure the properties, navigate via Auth Server -> Properties . mtlsUserInfoEndpoint userInfoEncryptionAlgValuesSupported userInfoEncryptionEncValuesSupported userInfoEndpoint userInfoSigningAlgValuesSupported Using Scopes To Control Claim Release # Standard Scopes # In context of OpenID Connect specification, claim information released by userinfo endpoint can be controlled using scopes. Janssen Server supports all standard scopes and releases corresponding claims as per OpenID Connect specification. Administrator can customise standard scopes and define claims to be linked to each standard scope. When using Janssen Text-based UI(TUI) to configure the scopes, navigate via Auth Server -> Scopes -> Add Scopes -> Scope Type as OpenID ->search for a standard scope like address Dynamic Scopes # In addition to standard scopes, Janssen server allows defining custom scopes which can be associated to user-defined list of claims. This allows administrators to create custom groupings of claims. When using Janssen Text-based UI(TUI) , navigate via Auth Server -> Scopes -> Add Scopes -> Scope Type as Dynamic Interception Scripts # Response from userinfo can be further customized using dynamic scope interception script. Administrator can attach a dynamic scope script to a dynamic scope using Janssen Text-based UI(TUI) . Navigate to Auth Server -> Scopes -> Add Scopes -> Scope Type as Dynamic -> Dynamic Scope Script Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Userinfo"},{"location":"admin/auth-server/endpoints/userinfo/#overview","text":"Userinfo endpoint is an OAuth2 protected endpoint that is used to retrieve claims about an authenticated end-user. Userinfo endpoint is defined in the OpenID Connect specification . URL to access userinfo endpoint on Janssen Server is listed in the response of Janssen Server's well-known configuration endpoint given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration userinfo_endpoint claim in the response specifies the URL for userinfo endpoint. By default, userinfo endpoint looks like below: https://janssen.server.host/jans-auth/restv1/userinfo In response to a valid request, the userinfo endpoint returns user information in JSON format similar to below: HTTP/1.1 200 OK Content-Type: application/json { \"sub\": \"3482897610054\", \"name\": \"Chad Wick\", \"given_name\": \"Chad\", \"family_name\": \"Wick\", \"preferred_username\": \"c.wick\", \"email\": \"cwick@jans.com\", \"picture\": \"http://mysite.com/mypic.jpg\" } Since userinfo endpoint is an OAuth2 protected resource, a valid access token with appropriate scope is required to access the endpoint. More information about request and response of the userinfo endpoint can be found in the OpenAPI specification of jans-auth-server module .","title":"Overview"},{"location":"admin/auth-server/endpoints/userinfo/#disabling-the-endpoint-using-feature-flag","text":"userinfo endpoint can be enabled or disable using USERINFO feature flag . Use Janssen Text-based UI(TUI) or Janssen command-line interface to perform this task. When using TUI, navigate via Auth Server -> Properties -> enabledFeatureFlags to screen below. From here, enable or disable USERINFO flag as required.","title":"Disabling The Endpoint Using Feature Flag"},{"location":"admin/auth-server/endpoints/userinfo/#configuration-properties","text":"Userinfo endpoint can be further configured using Janssen Server configuration properties listed below. When using Janssen Text-based UI(TUI) to configure the properties, navigate via Auth Server -> Properties . mtlsUserInfoEndpoint userInfoEncryptionAlgValuesSupported userInfoEncryptionEncValuesSupported userInfoEndpoint userInfoSigningAlgValuesSupported","title":"Configuration Properties"},{"location":"admin/auth-server/endpoints/userinfo/#using-scopes-to-control-claim-release","text":"","title":"Using Scopes To Control Claim Release"},{"location":"admin/auth-server/endpoints/userinfo/#standard-scopes","text":"In context of OpenID Connect specification, claim information released by userinfo endpoint can be controlled using scopes. Janssen Server supports all standard scopes and releases corresponding claims as per OpenID Connect specification. Administrator can customise standard scopes and define claims to be linked to each standard scope. When using Janssen Text-based UI(TUI) to configure the scopes, navigate via Auth Server -> Scopes -> Add Scopes -> Scope Type as OpenID ->search for a standard scope like address","title":"Standard Scopes"},{"location":"admin/auth-server/endpoints/userinfo/#dynamic-scopes","text":"In addition to standard scopes, Janssen server allows defining custom scopes which can be associated to user-defined list of claims. This allows administrators to create custom groupings of claims. When using Janssen Text-based UI(TUI) , navigate via Auth Server -> Scopes -> Add Scopes -> Scope Type as Dynamic","title":"Dynamic Scopes"},{"location":"admin/auth-server/endpoints/userinfo/#interception-scripts","text":"Response from userinfo can be further customized using dynamic scope interception script. Administrator can attach a dynamic scope script to a dynamic scope using Janssen Text-based UI(TUI) . Navigate to Auth Server -> Scopes -> Add Scopes -> Scope Type as Dynamic -> Dynamic Scope Script","title":"Interception Scripts"},{"location":"admin/auth-server/endpoints/userinfo/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/international/","tags":["administration","auth-server","i18n"],"text":"Overview # Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/auth-server/international/#overview","text":"Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/auth-server/international/client-config/","tags":["administration","auth-server","i18n"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Client Configuration"},{"location":"admin/auth-server/international/client-config/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/auth-server/international/client-config/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/international/client-config/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/international/scope-descriptions/","tags":["administration","auth-server","i18n"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Scope Descriptions"},{"location":"admin/auth-server/international/scope-descriptions/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/auth-server/international/scope-descriptions/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/international/scope-descriptions/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/international/web-pages/","tags":["administration","auth-server","i18n"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Web Pages"},{"location":"admin/auth-server/international/web-pages/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/auth-server/international/web-pages/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/international/web-pages/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/logging/","tags":["administration","auth-server","logging"],"text":"Logging Overview # All jans-auth-server log files are located in /opt/jans/jetty/jans-auth/logs/ . Use log levels to control noise of logs in standard logs . Following AS configuration properties can be used to customize AS logging: loggingLevel - Specify the log levels of loggers loggingLayout - Logging layout used for Jans Authorization Server loggers httpLoggingEnabled - Enable/disable request/response logging filter. Disabled by default. disableJdkLogger - Choose whether to disable JDK loggers enabledOAuthAuditLogging - enable OAuth Audit Logging externalLoggerConfiguration - The path to the external log4j2 logging configuration httpLoggingExcludePaths - This list details the base URIs for which the request/response logging filter will not record activity AS has pre-defined set of standard logs which can be overwritten by own log4j2 xml . AS under the hood is using log4j2 and slf4j thus please reference log4j configuration for available logging options. AS support audit logs . Have questions in the meantime? # You can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Logging Overview"},{"location":"admin/auth-server/logging/#logging-overview","text":"All jans-auth-server log files are located in /opt/jans/jetty/jans-auth/logs/ . Use log levels to control noise of logs in standard logs . Following AS configuration properties can be used to customize AS logging: loggingLevel - Specify the log levels of loggers loggingLayout - Logging layout used for Jans Authorization Server loggers httpLoggingEnabled - Enable/disable request/response logging filter. Disabled by default. disableJdkLogger - Choose whether to disable JDK loggers enabledOAuthAuditLogging - enable OAuth Audit Logging externalLoggerConfiguration - The path to the external log4j2 logging configuration httpLoggingExcludePaths - This list details the base URIs for which the request/response logging filter will not record activity AS has pre-defined set of standard logs which can be overwritten by own log4j2 xml . AS under the hood is using log4j2 and slf4j thus please reference log4j configuration for available logging options. AS support audit logs .","title":"Logging Overview"},{"location":"admin/auth-server/logging/#have-questions-in-the-meantime","text":"You can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/logging/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/logging/audit-logs/","tags":["administration","auth-server","logging"],"text":"Audit Logs # Audit logs are located in jans-auth_audit.log log file. All jans-auth-server log files are located in /opt/jans/jetty/jans-auth/logs/ . Audit is disabled by default on AS and can be enabled via enabledOAuthAuditLogging AS configuration property. Audit logs are logged to file when enabled, however if JMS configuration is specified it will be logged to JMS as well. JMS Configuration must be set inside AS global configuration Name Description jmsBrokerURISet JMS Broker URI Set jmsUserName JMS UserName jmsPassword JMS Password. Audit events: - CLIENT_REGISTRATION - CLIENT_UPDATE - CLIENT_READ - CLIENT_DELETE - USER_AUTHORIZATION - BACKCHANNEL_AUTHENTICATION - BACKCHANNEL_DEVICE_REGISTRATION - USER_INFO - TOKEN_REQUEST - TOKEN_VALIDATE - TOKEN_REVOCATION - SESSION_UNAUTHENTICATED - SESSION_AUTHENTICATED - SESSION_DESTROYED - DEVICE_CODE_AUTHORIZATION - SSA_CREATE - SSA_READ Enable/Disable Audit Logs on Jans TUI # Using Jans TUI we can easily Enable or Disable Audit Logs. Go to /opt/jans/jans-cli/config-cli-tui.py select Auth Server tab then Properties tab. Now set the value of enabledOAuthAuditLogging pressing Enter button on your keyboard. Save it and let's see below image Have questions in the meantime? # You can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Audit Logs"},{"location":"admin/auth-server/logging/audit-logs/#audit-logs","text":"Audit logs are located in jans-auth_audit.log log file. All jans-auth-server log files are located in /opt/jans/jetty/jans-auth/logs/ . Audit is disabled by default on AS and can be enabled via enabledOAuthAuditLogging AS configuration property. Audit logs are logged to file when enabled, however if JMS configuration is specified it will be logged to JMS as well. JMS Configuration must be set inside AS global configuration Name Description jmsBrokerURISet JMS Broker URI Set jmsUserName JMS UserName jmsPassword JMS Password. Audit events: - CLIENT_REGISTRATION - CLIENT_UPDATE - CLIENT_READ - CLIENT_DELETE - USER_AUTHORIZATION - BACKCHANNEL_AUTHENTICATION - BACKCHANNEL_DEVICE_REGISTRATION - USER_INFO - TOKEN_REQUEST - TOKEN_VALIDATE - TOKEN_REVOCATION - SESSION_UNAUTHENTICATED - SESSION_AUTHENTICATED - SESSION_DESTROYED - DEVICE_CODE_AUTHORIZATION - SSA_CREATE - SSA_READ","title":"Audit Logs"},{"location":"admin/auth-server/logging/audit-logs/#enabledisable-audit-logs-on-jans-tui","text":"Using Jans TUI we can easily Enable or Disable Audit Logs. Go to /opt/jans/jans-cli/config-cli-tui.py select Auth Server tab then Properties tab. Now set the value of enabledOAuthAuditLogging pressing Enter button on your keyboard. Save it and let's see below image","title":"Enable/Disable Audit Logs on Jans TUI"},{"location":"admin/auth-server/logging/audit-logs/#have-questions-in-the-meantime","text":"You can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/logging/audit-logs/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/logging/custom-logs/","tags":["administration","auth-server","logging","custom-logs"],"text":"Customize logs # Sometimes it can be useful to customize logging behavior or override AS loggers. It is possible to fully override AS logging configuration by specifying own log4j2.xml file in externalLoggerConfiguration AS configuration property. It must point to valid log4j2.xml file. Note: invalid external log4j2.xml can lead to AS start up issues and no logs in standard log files or otherwise in other log files if such are defined by log4j2.xml . Have questions in the meantime? # You can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Custom Logs"},{"location":"admin/auth-server/logging/custom-logs/#customize-logs","text":"Sometimes it can be useful to customize logging behavior or override AS loggers. It is possible to fully override AS logging configuration by specifying own log4j2.xml file in externalLoggerConfiguration AS configuration property. It must point to valid log4j2.xml file. Note: invalid external log4j2.xml can lead to AS start up issues and no logs in standard log files or otherwise in other log files if such are defined by log4j2.xml .","title":"Customize logs"},{"location":"admin/auth-server/logging/custom-logs/#have-questions-in-the-meantime","text":"You can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/logging/custom-logs/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/logging/log-levels/","tags":["administration","auth-server","logging-levels"],"text":"Log Levels # Log level for AS can be set in loggingLevel AS configuration property. AS under the hood is using log4j2 and slf4j . Thus logging levels in loggingLevel stick to log4j2 and are following: Log Level Description OFF No events will be logged. FATAL A fatal event that will prevent the application from continuing. ERROR An error in the application, possibly recoverable. WARN An event that might possible lead to an error. INFO An event for informational purposes. DEBUG A general debugging event. TRACE A fine-grained debug message, typically capturing the flow through the application. ALL All events should be logged. Select Log Levels on TUI # Go to Jans TUI /opt/jans/jans-cli/config-cli-tui.py . Select Auth Server tab then select Logging tab after that select Auth Server Log Level finally save logging and exit from TUI. Have questions in the meantime? # You can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Log Levels"},{"location":"admin/auth-server/logging/log-levels/#log-levels","text":"Log level for AS can be set in loggingLevel AS configuration property. AS under the hood is using log4j2 and slf4j . Thus logging levels in loggingLevel stick to log4j2 and are following: Log Level Description OFF No events will be logged. FATAL A fatal event that will prevent the application from continuing. ERROR An error in the application, possibly recoverable. WARN An event that might possible lead to an error. INFO An event for informational purposes. DEBUG A general debugging event. TRACE A fine-grained debug message, typically capturing the flow through the application. ALL All events should be logged.","title":"Log Levels"},{"location":"admin/auth-server/logging/log-levels/#select-log-levels-on-tui","text":"Go to Jans TUI /opt/jans/jans-cli/config-cli-tui.py . Select Auth Server tab then select Logging tab after that select Auth Server Log Level finally save logging and exit from TUI.","title":"Select Log Levels on TUI"},{"location":"admin/auth-server/logging/log-levels/#have-questions-in-the-meantime","text":"You can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/logging/log-levels/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/logging/log4j2/","tags":["administration","auth-server","logging"],"text":"log4j2 # AS under the hood is using log4j2 and slf4j . AS is configured by log4j2.xml Main structure of which defines standard logs and which can be overwritten by specifying own custom log4j2.xml . Please reference log4j configuration for available logging options. Sample <?xml version=\"1.0\" encoding=\"UTF-8\"?> <Configuration packages= \"io.jans.log\" > <Appenders> <Console name= \"STDOUT\" target= \"SYSTEM_OUT\" > <PatternLayout pattern= \"%d %-5p [%t] [%C{6}] (%F:%L) - %m%n\" /> </Console> <RollingFile name= \"JANS_AUTH_HTTP_REQUEST_RESPONSE_FILE\" fileName= \"${sys:log.base}/logs/http_request_response.log\" filePattern= \"${sys:log.base}/logs/http_request_response-%d{yyyy-MM-dd}-%i.log\" > <PatternLayout pattern= \"%d %-5p [%t] [%C{6}] (%F:%L) - %m%n\" /> <Policies> <TimeBasedTriggeringPolicy interval= \"1\" modulate= \"true\" /> <SizeBasedTriggeringPolicy size= \"250 MB\" /> </Policies> <DefaultRolloverStrategy max= \"30\" /> </RollingFile> <RollingFile name= \"FILE\" fileName= \"${sys:log.base}/logs/jans-auth.log\" filePattern= \"${sys:log.base}/logs/jans-auth-%d{yyyy-MM-dd}-%i.log\" > <PatternLayout pattern= \"%d %-5p [%t] %X{X-Correlation-Id} [%C{6}] (%F:%L) - %m%n\" /> <Policies> <TimeBasedTriggeringPolicy interval= \"1\" modulate= \"true\" /> <SizeBasedTriggeringPolicy size= \"250 MB\" /> </Policies> <DefaultRolloverStrategy max= \"30\" /> </RollingFile> <RollingFile name= \"JANS_AUTH_PERSISTENCE_FILE\" fileName= \"${sys:log.base}/logs/jans-auth_persistence.log\" filePattern= \"${sys:log.base}/logs/jans-auth_persistence-%d{yyyy-MM-dd}-%i.log\" > <PatternLayout pattern= \"%d %-5p [%t] %X{X-Correlation-Id} [%C{6}] (%F:%L) - %m%n\" /> <Policies> <TimeBasedTriggeringPolicy interval= \"1\" modulate= \"true\" /> <SizeBasedTriggeringPolicy size= \"250 MB\" /> </Policies> <DefaultRolloverStrategy max= \"30\" /> </RollingFile> <RollingFile name= \"JANS_AUTH_PERSISTENCE_DURATION_FILE\" fileName= \"${sys:log.base}/logs/jans-auth_persistence_duration.log\" filePattern= \"${sys:log.base}/logs/jans-auth_persistence_duration-%d{yyyy-MM-dd}-%i.log\" > <PatternLayout pattern= \"%d %-5p [%t] %X{X-Correlation-Id} [%C{6}] (%F:%L) - %m%n\" /> <Policies> <TimeBasedTriggeringPolicy interval= \"1\" modulate= \"true\" /> <SizeBasedTriggeringPolicy size= \"250 MB\" /> </Policies> <DefaultRolloverStrategy max= \"30\" /> </RollingFile> <RollingFile name= \"JANS_AUTH_PERSISTENCE_LDAP_STATISTICS_FILE\" fileName= \"${sys:log.base}/logs/jans-auth_persistence_ldap_statistics.log\" filePattern= \"${sys:log.base}/logs/jans-auth_persistence_ldap_statistics-%d{yyyy-MM-dd}-%i.log\" > <PatternLayout pattern= \"%d %-5p [%t] %X{X-Correlation-Id} [%C{6}] (%F:%L) - %m%n\" /> <Policies> <TimeBasedTriggeringPolicy interval= \"1\" modulate= \"true\" /> <SizeBasedTriggeringPolicy size= \"250 MB\" /> </Policies> <DefaultRolloverStrategy max= \"30\" /> </RollingFile> <RollingFile name= \"JANS_AUTH_SCRIPT_LOG_FILE\" fileName= \"${sys:log.base}/logs/jans-auth_script.log\" filePattern= \"${sys:log.base}/logs/jans-auth_script-%d{yyyy-MM-dd}-%i.log\" > <PatternLayout pattern= \"%d %-5p [%t] %X{X-Correlation-Id} [%C{6}] (%F:%L) - %m%n\" /> <Policies> <TimeBasedTriggeringPolicy interval= \"1\" modulate= \"true\" /> <SizeBasedTriggeringPolicy size= \"250 MB\" /> </Policies> <DefaultRolloverStrategy max= \"30\" /> </RollingFile> <RollingFile name= \"JANS_AUTH_AUDIT_LOG_FILE\" fileName= \"${sys:log.base}/logs/jans-auth_audit.log\" filePattern= \"${sys:log.base}/logs/jans-auth_audit-%d{yyyy-MM-dd}-%i.log\" > <PatternLayout pattern= \"%d %-5p [%macAddr] [%t] %X{X-Correlation-Id} [%C{6}] (%F:%L) - %m%n\" /> <Policies> <TimeBasedTriggeringPolicy interval= \"1\" modulate= \"true\" /> <SizeBasedTriggeringPolicy size= \"250 MB\" /> </Policies> <DefaultRolloverStrategy max= \"30\" /> </RollingFile> </Appenders> <Loggers> <!-- ############### Gluu ################# --> <Logger name= \"io.jans\" level= \"${log4j.default.log.level}\" /> <!-- EMB-6, JMS activation throws an error due to deployment ordering, but as there is a timeout and retry the tests pass. Hide the error message --> <Logger name= \"jboss.resource.adapter.jms.inflow.JmsActivation\" level= \"error\" /> <Logger name= \"com.ocpsoft\" level= \"info\" /> <!-- ############### Hibernate logging ################# --> <Logger name= \"org.hibernate\" level= \"error\" /> <Logger name= \"io.jans.as.server.audit.debug\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_HTTP_REQUEST_RESPONSE_FILE\" /> </Logger> <Logger name= \"io.jans.orm\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_PERSISTENCE_FILE\" /> </Logger> <Logger name= \"com.unboundid.ldap.sdk.LDAPConnection\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_PERSISTENCE_FILE\" /> </Logger> <logger name= \"com.couchbase.client\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_PERSISTENCE_FILE\" /> </logger> <Logger name= \"io.jans.orm.ldap.operation.watch\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_PERSISTENCE_DURATION_FILE\" /> </Logger> <Logger name= \"io.jans.orm.couchbase.operation.watch\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_PERSISTENCE_DURATION_FILE\" /> </Logger> <Logger name= \"io.jans.orm.watch\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_PERSISTENCE_DURATION_FILE\" /> </Logger> <Logger name= \"io.jans.as.server.service.status.ldap\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_PERSISTENCE_LDAP_STATISTICS_FILE\" /> </Logger> <Logger name= \"io.jans.service.PythonService\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_SCRIPT_LOG_FILE\" /> </Logger> <Logger name= \"io.jans.service.custom.script\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_SCRIPT_LOG_FILE\" /> </Logger> <Logger name= \"io.jans.as.server.service.custom\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_SCRIPT_LOG_FILE\" /> </Logger> <Logger name= \"io.jans.agama.engine.script.LogUtils\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_SCRIPT_LOG_FILE\" /> </Logger> <Logger name= \"io.jans.as.server.audit.ApplicationAuditLogger\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_AUDIT_LOG_FILE\" /> </Logger> <Root level= \"info\" > <AppenderRef ref= \"FILE\" /> <AppenderRef ref= \"STDOUT\" /> </Root> </Loggers> </Configuration> Have questions in the meantime? # You can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"log4j2 Configuration"},{"location":"admin/auth-server/logging/log4j2/#log4j2","text":"AS under the hood is using log4j2 and slf4j . AS is configured by log4j2.xml Main structure of which defines standard logs and which can be overwritten by specifying own custom log4j2.xml . Please reference log4j configuration for available logging options. Sample <?xml version=\"1.0\" encoding=\"UTF-8\"?> <Configuration packages= \"io.jans.log\" > <Appenders> <Console name= \"STDOUT\" target= \"SYSTEM_OUT\" > <PatternLayout pattern= \"%d %-5p [%t] [%C{6}] (%F:%L) - %m%n\" /> </Console> <RollingFile name= \"JANS_AUTH_HTTP_REQUEST_RESPONSE_FILE\" fileName= \"${sys:log.base}/logs/http_request_response.log\" filePattern= \"${sys:log.base}/logs/http_request_response-%d{yyyy-MM-dd}-%i.log\" > <PatternLayout pattern= \"%d %-5p [%t] [%C{6}] (%F:%L) - %m%n\" /> <Policies> <TimeBasedTriggeringPolicy interval= \"1\" modulate= \"true\" /> <SizeBasedTriggeringPolicy size= \"250 MB\" /> </Policies> <DefaultRolloverStrategy max= \"30\" /> </RollingFile> <RollingFile name= \"FILE\" fileName= \"${sys:log.base}/logs/jans-auth.log\" filePattern= \"${sys:log.base}/logs/jans-auth-%d{yyyy-MM-dd}-%i.log\" > <PatternLayout pattern= \"%d %-5p [%t] %X{X-Correlation-Id} [%C{6}] (%F:%L) - %m%n\" /> <Policies> <TimeBasedTriggeringPolicy interval= \"1\" modulate= \"true\" /> <SizeBasedTriggeringPolicy size= \"250 MB\" /> </Policies> <DefaultRolloverStrategy max= \"30\" /> </RollingFile> <RollingFile name= \"JANS_AUTH_PERSISTENCE_FILE\" fileName= \"${sys:log.base}/logs/jans-auth_persistence.log\" filePattern= \"${sys:log.base}/logs/jans-auth_persistence-%d{yyyy-MM-dd}-%i.log\" > <PatternLayout pattern= \"%d %-5p [%t] %X{X-Correlation-Id} [%C{6}] (%F:%L) - %m%n\" /> <Policies> <TimeBasedTriggeringPolicy interval= \"1\" modulate= \"true\" /> <SizeBasedTriggeringPolicy size= \"250 MB\" /> </Policies> <DefaultRolloverStrategy max= \"30\" /> </RollingFile> <RollingFile name= \"JANS_AUTH_PERSISTENCE_DURATION_FILE\" fileName= \"${sys:log.base}/logs/jans-auth_persistence_duration.log\" filePattern= \"${sys:log.base}/logs/jans-auth_persistence_duration-%d{yyyy-MM-dd}-%i.log\" > <PatternLayout pattern= \"%d %-5p [%t] %X{X-Correlation-Id} [%C{6}] (%F:%L) - %m%n\" /> <Policies> <TimeBasedTriggeringPolicy interval= \"1\" modulate= \"true\" /> <SizeBasedTriggeringPolicy size= \"250 MB\" /> </Policies> <DefaultRolloverStrategy max= \"30\" /> </RollingFile> <RollingFile name= \"JANS_AUTH_PERSISTENCE_LDAP_STATISTICS_FILE\" fileName= \"${sys:log.base}/logs/jans-auth_persistence_ldap_statistics.log\" filePattern= \"${sys:log.base}/logs/jans-auth_persistence_ldap_statistics-%d{yyyy-MM-dd}-%i.log\" > <PatternLayout pattern= \"%d %-5p [%t] %X{X-Correlation-Id} [%C{6}] (%F:%L) - %m%n\" /> <Policies> <TimeBasedTriggeringPolicy interval= \"1\" modulate= \"true\" /> <SizeBasedTriggeringPolicy size= \"250 MB\" /> </Policies> <DefaultRolloverStrategy max= \"30\" /> </RollingFile> <RollingFile name= \"JANS_AUTH_SCRIPT_LOG_FILE\" fileName= \"${sys:log.base}/logs/jans-auth_script.log\" filePattern= \"${sys:log.base}/logs/jans-auth_script-%d{yyyy-MM-dd}-%i.log\" > <PatternLayout pattern= \"%d %-5p [%t] %X{X-Correlation-Id} [%C{6}] (%F:%L) - %m%n\" /> <Policies> <TimeBasedTriggeringPolicy interval= \"1\" modulate= \"true\" /> <SizeBasedTriggeringPolicy size= \"250 MB\" /> </Policies> <DefaultRolloverStrategy max= \"30\" /> </RollingFile> <RollingFile name= \"JANS_AUTH_AUDIT_LOG_FILE\" fileName= \"${sys:log.base}/logs/jans-auth_audit.log\" filePattern= \"${sys:log.base}/logs/jans-auth_audit-%d{yyyy-MM-dd}-%i.log\" > <PatternLayout pattern= \"%d %-5p [%macAddr] [%t] %X{X-Correlation-Id} [%C{6}] (%F:%L) - %m%n\" /> <Policies> <TimeBasedTriggeringPolicy interval= \"1\" modulate= \"true\" /> <SizeBasedTriggeringPolicy size= \"250 MB\" /> </Policies> <DefaultRolloverStrategy max= \"30\" /> </RollingFile> </Appenders> <Loggers> <!-- ############### Gluu ################# --> <Logger name= \"io.jans\" level= \"${log4j.default.log.level}\" /> <!-- EMB-6, JMS activation throws an error due to deployment ordering, but as there is a timeout and retry the tests pass. Hide the error message --> <Logger name= \"jboss.resource.adapter.jms.inflow.JmsActivation\" level= \"error\" /> <Logger name= \"com.ocpsoft\" level= \"info\" /> <!-- ############### Hibernate logging ################# --> <Logger name= \"org.hibernate\" level= \"error\" /> <Logger name= \"io.jans.as.server.audit.debug\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_HTTP_REQUEST_RESPONSE_FILE\" /> </Logger> <Logger name= \"io.jans.orm\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_PERSISTENCE_FILE\" /> </Logger> <Logger name= \"com.unboundid.ldap.sdk.LDAPConnection\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_PERSISTENCE_FILE\" /> </Logger> <logger name= \"com.couchbase.client\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_PERSISTENCE_FILE\" /> </logger> <Logger name= \"io.jans.orm.ldap.operation.watch\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_PERSISTENCE_DURATION_FILE\" /> </Logger> <Logger name= \"io.jans.orm.couchbase.operation.watch\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_PERSISTENCE_DURATION_FILE\" /> </Logger> <Logger name= \"io.jans.orm.watch\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_PERSISTENCE_DURATION_FILE\" /> </Logger> <Logger name= \"io.jans.as.server.service.status.ldap\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_PERSISTENCE_LDAP_STATISTICS_FILE\" /> </Logger> <Logger name= \"io.jans.service.PythonService\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_SCRIPT_LOG_FILE\" /> </Logger> <Logger name= \"io.jans.service.custom.script\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_SCRIPT_LOG_FILE\" /> </Logger> <Logger name= \"io.jans.as.server.service.custom\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_SCRIPT_LOG_FILE\" /> </Logger> <Logger name= \"io.jans.agama.engine.script.LogUtils\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_SCRIPT_LOG_FILE\" /> </Logger> <Logger name= \"io.jans.as.server.audit.ApplicationAuditLogger\" level= \"${log4j.default.log.level}\" additivity= \"false\" > <AppenderRef ref= \"JANS_AUTH_AUDIT_LOG_FILE\" /> </Logger> <Root level= \"info\" > <AppenderRef ref= \"FILE\" /> <AppenderRef ref= \"STDOUT\" /> </Root> </Loggers> </Configuration>","title":"log4j2"},{"location":"admin/auth-server/logging/log4j2/#have-questions-in-the-meantime","text":"You can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/logging/log4j2/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/logging/standard-logs/","tags":["administration","auth-server","logging"],"text":"Standard Logs # All jans-auth-server log files are located in /opt/jans/jetty/jans-auth/logs/ . jans-auth.log - main AS log file. All logs during execution goes here. jans-auth_script.log : - contains custom interception scripts related log messages. Use scriptLogger inside custom script to log messages to this log file. jans-auth_persistence.log - log which contains entries from AS persistance layer jans-auth_persistence_duration.log - log which contains duration of query execution. It can be useful during performance issues investigation jans-auth_persistence_ldap_statistics.log - contains LDAP statistic information jans-auth_audit.log - contains audit log information (audit is disabled by default and can be enabled via enabledOAuthAuditLogging AS configuration property) http_request_response.log - contains http request/response data. It can be enabled via httpLoggingEnabled AS configuration property. Have questions in the meantime? # You can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Standard Logs"},{"location":"admin/auth-server/logging/standard-logs/#standard-logs","text":"All jans-auth-server log files are located in /opt/jans/jetty/jans-auth/logs/ . jans-auth.log - main AS log file. All logs during execution goes here. jans-auth_script.log : - contains custom interception scripts related log messages. Use scriptLogger inside custom script to log messages to this log file. jans-auth_persistence.log - log which contains entries from AS persistance layer jans-auth_persistence_duration.log - log which contains duration of query execution. It can be useful during performance issues investigation jans-auth_persistence_ldap_statistics.log - contains LDAP statistic information jans-auth_audit.log - contains audit log information (audit is disabled by default and can be enabled via enabledOAuthAuditLogging AS configuration property) http_request_response.log - contains http request/response data. It can be enabled via httpLoggingEnabled AS configuration property.","title":"Standard Logs"},{"location":"admin/auth-server/logging/standard-logs/#have-questions-in-the-meantime","text":"You can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/logging/standard-logs/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/oauth-features/","tags":["administration","auth-server","oauth","feature"],"text":"OpenID Connect Provider (OP) # The Janssen Authentication Server has core OAuth 2.0 support as well as many other related specs: The OAuth 2.0 Authorization Framework (spec) The OAuth 2.0 Authorization Framework: Bearer Token Usage (spec) JSON Web Token (JWT) Profile for OAuth 2.0 Access Tokens (spec) JSON Web Token (JWT) (spec) OAuth 2.0 Token Introspection (spec) OAuth 2.0 Device Authorization Grant (spec) OAuth 2.0 Token Revocation (spec) Proof Key for Code Exchange by OAuth Public Clients (PKCE) (spec) OAuth 2.0 for Native Apps (spec) OAuth 2.0 Token Exchange (spec) OAuth 2.0 Authorization Server Metadata (spec) OAuth 2.0 Dynamic Client Registration Protocol (spec) OAuth 2.0 Pushed Authorization Requests (spec) OAuth 2.0 Demonstrating Proof-of-Possession at the Application Layer (DPoP) (spec) OAuth 2.0 Mutual-TLS Client Authentication and Certificate-Bound Access Tokens (spec) Assertion Framework for OAuth 2.0 Client Authentication and Authorization Grants (spec) JWT Secured Authorization Response Mode for OAuth 2.0 (JARM) (spec) Protocol Overview # OAuth 2.0 is the industry-standard protocol for authorization. OAuth 2.0 focuses on client developer simplicity providing specific authorization flows for different applications (e.g. web applications, desktop applications, mobile phones, and other devices). It's handy to know some OAuth 2.0 terminology: resource owner - An entity capable of granting access to a protected resource. When the resource owner is a person, it is referred to as an end-user. resource server - The server hosting the protected resources, capable of accepting and responding to protected resource requests using access tokens. client - An application making protected resource requests on behalf of the resource owner and with its authorization. The term \"client\" does not imply any particular implementation characteristics (e.g., whether the application executes on a server, a desktop, or other devices). authorization server - The server issuing access tokens to the client after successfully authenticating the resource owner and obtaining authorization. Have questions in the meantime? # You can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"OpenID Connect Provider (OP)"},{"location":"admin/auth-server/oauth-features/#openid-connect-provider-op","text":"The Janssen Authentication Server has core OAuth 2.0 support as well as many other related specs: The OAuth 2.0 Authorization Framework (spec) The OAuth 2.0 Authorization Framework: Bearer Token Usage (spec) JSON Web Token (JWT) Profile for OAuth 2.0 Access Tokens (spec) JSON Web Token (JWT) (spec) OAuth 2.0 Token Introspection (spec) OAuth 2.0 Device Authorization Grant (spec) OAuth 2.0 Token Revocation (spec) Proof Key for Code Exchange by OAuth Public Clients (PKCE) (spec) OAuth 2.0 for Native Apps (spec) OAuth 2.0 Token Exchange (spec) OAuth 2.0 Authorization Server Metadata (spec) OAuth 2.0 Dynamic Client Registration Protocol (spec) OAuth 2.0 Pushed Authorization Requests (spec) OAuth 2.0 Demonstrating Proof-of-Possession at the Application Layer (DPoP) (spec) OAuth 2.0 Mutual-TLS Client Authentication and Certificate-Bound Access Tokens (spec) Assertion Framework for OAuth 2.0 Client Authentication and Authorization Grants (spec) JWT Secured Authorization Response Mode for OAuth 2.0 (JARM) (spec)","title":"OpenID Connect Provider (OP)"},{"location":"admin/auth-server/oauth-features/#protocol-overview","text":"OAuth 2.0 is the industry-standard protocol for authorization. OAuth 2.0 focuses on client developer simplicity providing specific authorization flows for different applications (e.g. web applications, desktop applications, mobile phones, and other devices). It's handy to know some OAuth 2.0 terminology: resource owner - An entity capable of granting access to a protected resource. When the resource owner is a person, it is referred to as an end-user. resource server - The server hosting the protected resources, capable of accepting and responding to protected resource requests using access tokens. client - An application making protected resource requests on behalf of the resource owner and with its authorization. The term \"client\" does not imply any particular implementation characteristics (e.g., whether the application executes on a server, a desktop, or other devices). authorization server - The server issuing access tokens to the client after successfully authenticating the resource owner and obtaining authorization.","title":"Protocol Overview"},{"location":"admin/auth-server/oauth-features/#have-questions-in-the-meantime","text":"You can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/oauth-features/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/oauth-features/auth-code-grant/","tags":["administration","auth-server","oauth","feature","grant","code"],"text":"OAuth 2.0 Authorization Code Grant # The Authorization Code grant type is used by confidential and public clients to exchange an authorization code for an access token. After the user returns to the client via the redirect URL, the application will get the authorization code from the URL and use it to request an access token. Sequence Diagram # sequenceDiagram title Authorization code flow autonumber 1 participant Resource owner User activate Resource owner User Client->>Jans AS:Authorization Request activate Client activate Jans AS Resource owner User ->>Jans AS:User login and consent Jans AS-->>Client:Authorization code response deactivate Client deactivate Jans AS Client->>Jans AS: Exchange code for Access Token activate Client activate Jans AS Jans AS-->>Client: Access Token with optional Refresh Token deactivate Client deactivate Jans AS loop Client->>Resource Server: Call API with Access Token activate Client activate Resource Server Resource Server-->>Client: Protected Resource deactivate Client deactivate Resource Server end Client->>Resource Server: Call API with expired Access Token activate Client activate Resource Server Resource Server-->>Client: Invalid token error deactivate Client deactivate Resource Server Client->>Jans AS: Resource Token activate Client activate Jans AS Jans AS-->>Client: Access Token with optional Refresh Token deactivate Client deactivate Jans AS deactivate Resource owner User Testing # https://github.com/JanssenProject/jans/blob/main/jans-auth-server/client/src/test/java/io/jans/as/client/ws/rs/AuthorizationCodeFlowHttpTest.java On a browser access https://my.jans.server/jans-auth/restv1/authorize?redirect_uri=https://my-redirect-app:8080&client_id=Put_client_id_here&scope=username+openid&response_type=code Based on the default authentication method set (acr), the user will be presented with credentials for login. The OpenID Provider (Gluu Server) verifies the user\u2019s identity and authenticates the user. In the back channel the following steps take place : The OpenID Provider (Gluu Server) sends the user back to the application with an authorization code. The application sends the code to the Token Endpoint to receive an Access Token and ID Token in the response. The application uses the ID Token to authorize the user. At this point the application/RP can access the UserInfo endpoint for claims.","title":"Authorization Code Grant"},{"location":"admin/auth-server/oauth-features/auth-code-grant/#oauth-20-authorization-code-grant","text":"The Authorization Code grant type is used by confidential and public clients to exchange an authorization code for an access token. After the user returns to the client via the redirect URL, the application will get the authorization code from the URL and use it to request an access token.","title":"OAuth 2.0 Authorization Code Grant"},{"location":"admin/auth-server/oauth-features/auth-code-grant/#sequence-diagram","text":"sequenceDiagram title Authorization code flow autonumber 1 participant Resource owner User activate Resource owner User Client->>Jans AS:Authorization Request activate Client activate Jans AS Resource owner User ->>Jans AS:User login and consent Jans AS-->>Client:Authorization code response deactivate Client deactivate Jans AS Client->>Jans AS: Exchange code for Access Token activate Client activate Jans AS Jans AS-->>Client: Access Token with optional Refresh Token deactivate Client deactivate Jans AS loop Client->>Resource Server: Call API with Access Token activate Client activate Resource Server Resource Server-->>Client: Protected Resource deactivate Client deactivate Resource Server end Client->>Resource Server: Call API with expired Access Token activate Client activate Resource Server Resource Server-->>Client: Invalid token error deactivate Client deactivate Resource Server Client->>Jans AS: Resource Token activate Client activate Jans AS Jans AS-->>Client: Access Token with optional Refresh Token deactivate Client deactivate Jans AS deactivate Resource owner User","title":"Sequence Diagram"},{"location":"admin/auth-server/oauth-features/auth-code-grant/#testing","text":"https://github.com/JanssenProject/jans/blob/main/jans-auth-server/client/src/test/java/io/jans/as/client/ws/rs/AuthorizationCodeFlowHttpTest.java On a browser access https://my.jans.server/jans-auth/restv1/authorize?redirect_uri=https://my-redirect-app:8080&client_id=Put_client_id_here&scope=username+openid&response_type=code Based on the default authentication method set (acr), the user will be presented with credentials for login. The OpenID Provider (Gluu Server) verifies the user\u2019s identity and authenticates the user. In the back channel the following steps take place : The OpenID Provider (Gluu Server) sends the user back to the application with an authorization code. The application sends the code to the Token Endpoint to receive an Access Token and ID Token in the response. The application uses the ID Token to authorize the user. At this point the application/RP can access the UserInfo endpoint for claims.","title":"Testing"},{"location":"admin/auth-server/oauth-features/client-credential-grant/","tags":["administration","auth-server","oauth","feature","grant","client-credentials"],"text":"OAuth 2.0 client credentials Grant # Sequence Diagram # sequenceDiagram title Client credentials flow autonumber 1 activate Resource owner Client Resource owner Client->>Jans AS:Client Authentication activate Jans AS Jans AS-->>Resource owner Client:Access Token deactivate Jans AS Testing # https://github.com/JanssenProject/jans/blob/main/jans-auth-server/client/src/test/java/io/jans/as/client/ws/rs/ClientCredentialsGrantHttpTest.java CURL Command: curl -k -u \"put_client_id:put_client_secret\" https://jans-ui.jans.io/jans-auth/restv1/token \\ -d \"grant_type=client_credentials&scope=put_scope_name_here\"","title":"Client Credential Grant"},{"location":"admin/auth-server/oauth-features/client-credential-grant/#oauth-20-client-credentials-grant","text":"","title":"OAuth 2.0 client credentials Grant"},{"location":"admin/auth-server/oauth-features/client-credential-grant/#sequence-diagram","text":"sequenceDiagram title Client credentials flow autonumber 1 activate Resource owner Client Resource owner Client->>Jans AS:Client Authentication activate Jans AS Jans AS-->>Resource owner Client:Access Token deactivate Jans AS","title":"Sequence Diagram"},{"location":"admin/auth-server/oauth-features/client-credential-grant/#testing","text":"https://github.com/JanssenProject/jans/blob/main/jans-auth-server/client/src/test/java/io/jans/as/client/ws/rs/ClientCredentialsGrantHttpTest.java CURL Command: curl -k -u \"put_client_id:put_client_secret\" https://jans-ui.jans.io/jans-auth/restv1/token \\ -d \"grant_type=client_credentials&scope=put_scope_name_here\"","title":"Testing"},{"location":"admin/auth-server/oauth-features/device-grant/","tags":["administration","auth-server","oauth","feature","device","grant"],"text":"OAuth 2.0 Device Authorization Grant # This OAuth 2.0 protocol extension enables OAuth clients to request user authorization from applications on devices (e.g. smart TVs, media consoles, printers) that are input-constrained or browser-less . The authorization flow defined by this RFC 8628 , sometimes referred to as the \"device flow\", instructs the user to review the authorization request on a secondary device, such as a smartphone or a personal computer, which has the requisite input and browser capabilities to complete the user interaction. Sequence Diagram # Paste the following source text of the sequence diagram on sequencediagram.org title Oauth2.0 Device Authorization flow participant User participant Browser on Computer / Smartphone participant Device App participant Jans AS participant Third Party App User->Device App:Opens an app on device Device App->Jans AS:Sends authorization request \\n\"jans-server.com/jans-auth/restv1/device_authorization\" Jans AS->Device App:Response - \\nuser_code, device_code, verification_url, interval, expiration Device App ->User: Instructs the user to access Verification URL \\nand enter user_code note over Device App:Device App will keep polling AS for Access Token \\nuntil device authorization is completed loop till Device App recieves Access Token: Device App->Jans AS:request Access Token Jans AS->Device App:Response - \\naccess_denied \\nOR expired_token \\nOR authorization_pending \\nOR Access token end User->Browser on Computer / Smartphone:Opens a browser \\nand access verification URL Browser on Computer / Smartphone->Jans AS:send user_code to verification URL Browser on Computer / Smartphone <-Jans AS:Login and authorization prompt Browser on Computer / Smartphone->Jans AS:Authentication and consent Jans AS->Jans AS: Mark device as Authorized note over Jans AS:Subsequent polling by the Device App \\nwill return an Access Token as indicated \\nby the loop above Device App->Third Party App:Invoke API with Access Token Third Party App->Device App: return Response User Experience # First, the user requests authorization from the device: At the URL displayed on the screen, the user can input the displayed code in the device. After that, user could need to authenticate, then decide whether permissions will be granted. acr value can be specified in deviceAuthzAcr AS configuration property. Finally, the confirmation screen will be shown. ACR value during Device Authorization # User is required to authenticate if not authenticated yet. By default acr_values is not set in authorization request, which means it relies on default AS handling. However it's possible explicitly set acr value during Device Authorization by setting deviceAuthzAcr AS configuration property. Request user and device codes # This first step, device sends an HTTP POST request to Jans authorization server, at /jans-auth/restv1/device_authorization which is also presented in the Discovery url published by Jans Server, this endpoint could process a common authentication method or it could also not do any authentication, depending on the configuration for the client in Jans Server. Parameters # Parameter Description client_id Required The client ID for your application. scope Required A space separated list of scopes that identify the resources that the device could access on the user's behalf. These values inform the consent screen that Jans server displays to the user. Example # POST /restv1/device_authorization HTTP/1.1 Content-Type: application/x-www-form-urlencoded Host: test.jans.org Authorization: Basic MTIzLTEyMy0xMjM6WkE1aWxpTFFDYUR4 client_id=123-123-123&scope=openid+profile+address+email+phone Device Request response # In response, the Jans authorization server generates a unique device verification code and an end-user code that are valid for a limited time and includes them in the HTTP response body using the \"application/json\" format with a 200 (OK) status code. The response contains the following parameters: Parameter Description user_code Required The end-user verification code device_code Required The device verification code verification_uri Required The end-user verification URI on the authorization server. This should be shown to the end-user because he should open this url in the rich user-agent. verification_uri_complete Optional This is similar than verification_uri , however it also includes user_code as a query param in the url. It's issued if the device wants to use QR mode for example. expires_in Required The lifetime in seconds of the device_code and user_code . interval Required The minimum amount of time in seconds that the client should wait between polling requests to the token endpoint. Example: # HTTP/1.1 200 Content-Length: 307 Content-Type: application/json Server: Jetty(9.4.19.v20190610) { \"user_code\": \"SJFP-DTPL\", \"device_code\": \"aeb28bdc90d806ac58d4b0f832f06c3ac9c4bd03292f0c09\", \"interval\": 5, \"verification_uri_complete\": \"https://test.jans.io:8443/device-code?user_code=SJFP-DTPL\", \"verification_uri\": \"https://test.jans.io:8443/device-code\", \"expires_in\": 1800 } Device Display # Common flow, the device should display verification_url and user_code received from Jans server. The content that the device displays to the user should instruct the user to navigate to the verification_url on a separate device and enter the user_code . Design device interface following these rules: user_code has the following format: XXXX-XXXX where Xs represent to any ASCII character, for example: RTXD-HTLK . The length of the user_code will be always the same, therefore it's highly recommended to show it as clear and big that the user can read it easly. verification_url should be displayed also in a way that the user can read it easily. The normal length should be around 40 characters, however it could depends also on the domain used for the server. Remember that the user will need to write the whole URL manually in the web browser, therefore it's recommended to use a short URL. verification_url_complete will be used for those cases where device can show QR (Quick Response) codes or NFC (Near Field Communication) to save the user from typing the whole URI. Interaction between device and Jans server will be the same, however user can process the authorization faster. For example: User Login & Authorization # The user will need to put user_code value in the browser and after that, he will be redirected to the common authorization flow, it requires login whether there is no session between the user-agent and the Jans server and grant the permissions based on the device request. Poll Token # Since the user will be using a separate device to navigate to the verification_url and grant or deny access, the requesting device is not automatically notified when the user responds to the access request. For that reason, the requesting device needs to poll the Jans Server to determine when the user has responded to the request. The requesting device should continue sending polling requests until it receives a response indicating that the user has responded to the access request or until the device_code expires. The parameter interval returned in step 2 specifies the amount of time, in seconds, to wait between requests. The URL of the endpoint to poll is /jans-auth/restv1/token . The polling request contains the following parameters: Parameters # Parameter Description client_id Required The client ID for your application. grant_type Required Must be urn:ietf:params:oauth:grant-type:device_code . device_code Required The device verification code which is returned by Jans server in Step 2. Authentication can be done using any of those authentication methods for this token endpoint. Example: # POST /restv1/token HTTP/1.1 Content-Type: application/x-www-form-urlencoded Host: test.jans.io Authorization: Basic MTIzLTEyMy0xMjM6WkE1aWxpTFFDYUR4 grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Adevice_code&device_code=0bd7068e7fdab4bb91b313296a96462256a7370d12f073f0 Token Response # The Jans authorization server responds to each polling request with one of the following responses: Access granted If the user granted access to the device (by clicking Allow on the consent screen), then the response contains an access token and a refresh token. The tokens enable the device to access to the resource server on the user's behalf. In this case, the server responds with all tokens required and allowed to be issued depending on the configuration in the server. Example: HTTP/1.1 200 Content-Length: 858 Content-Type: application/json Server: Jetty(9.4.19.v20190610) <<<<<<< Updated upstream {\"access_token\":\"c31fc092-453b-4275-a36f-b2740c3eb1a6\",\"id_token\":\"eyJraWQiOiJlY4.2Tc4NDgxYy05OTJkLTRmN2UtYTkzMS03NjM2NTYyMzgwZjVfc2lnX3JzMjU2IiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYifQ.eyJhdF9oYXNoIjoidWdMSnAzMkxXdnI4QUdlbmdNTlF3QSIsImF1ZCI6IjEyMy0xMjMtMTIzIiwic3ViIjoiM2M2M25HdWZnWFNkMWFwNU81NFZkVjlUUDdmdjJHc0YtLWl0eVBHeFJBTSIsImlzcyI6Imh0dHBzOi8vdGVzdC5nbHV1Lm9yZzo4NDQzIiwiZXhwIjoxNTk1NjQzOTg0LCJpYXQiOjE1OTU2NDAzODQsIm94T3BlbklEQ29ubmVjdFZlcnNpb24iOiJvcGVuaWRjb25uZWN0LTEuMCJ9.fElZtuUslhSSuqTOuvGeafG4QuQoHKLpya25RHWkC5V9Xf9ODYa6tD_Tdav2D9Gff2Zz7pt8WKso-WYOqmJ3NrgMoVU7d1SMj6pYGilTL1JokjB18Yw1TI6oR6Z4wegy8_ajftLLhqosI5-ZE36TzPwoAKzjPl-iZEpV2U1OPHWZrdwc9N3YOyO0I_IJGQmFnXC_oacitMV2VZaTxfuCew5cPwNp5durooFNvv3DPzc9JYEctmaLsiRtfqN7pCaV30B3hnYTYZ4p2HNsUbOewBI8_Brm1v1CByitQPUFqETgmPGbf4HCTEoaH-7DfaXnAsePt73blNwJrlTlUBieew\",\"token_type\":\"bearer\",\"expires_in\":299} Access denied If the user refuses to grant access to the device, then the server response has a 400 HTTP response status code. The response contains the following error: HTTP/1.1 400 Cache-Control: no-store Content-Length: 74 Content-Type: application/json Pragma: no-cache Server: Jetty(9.4.19.v20190610) { \"error_description\": \"access_denied\", \"error\": \"access_denied\" } Authorization pending It means that the request hasn't been processed by the end-user yet, therefore the request is still in process. Example: HTTP/1.1 400 Cache-Control: no-store Content-Length: 90 Content-Type: application/json Pragma: no-cache Server: Jetty(9.4.19.v20190610) { \"error_description\": \"authorization_pending\", \"error\": \"authorization_pending\" } Polling too frequently If the device sends polling requests too frequently, then the server returns a 400 HTTP response status code. Then the device should increase the time interval between requests. Example: HTTP/1.1 400 Cache-Control: no-store Content-Length: 66 Content-Type: application/json Pragma: no-cache Server: Jetty(9.4.19.v20190610) { \"error_description\": \"slow_down\", \"error\": \"slow_down\" } Other errors This token endpoint can return any error code already defined, for example whether client can't be authenticated or the grant type sent is invalid. Some of them could be: invalid_client , invalid_grant , invalid_request and others. Customizing Device Grant page # More about customising this page to include your organization's stylesheets, images and content in this article","title":"Device Grant"},{"location":"admin/auth-server/oauth-features/device-grant/#oauth-20-device-authorization-grant","text":"This OAuth 2.0 protocol extension enables OAuth clients to request user authorization from applications on devices (e.g. smart TVs, media consoles, printers) that are input-constrained or browser-less . The authorization flow defined by this RFC 8628 , sometimes referred to as the \"device flow\", instructs the user to review the authorization request on a secondary device, such as a smartphone or a personal computer, which has the requisite input and browser capabilities to complete the user interaction.","title":"OAuth 2.0 Device Authorization Grant"},{"location":"admin/auth-server/oauth-features/device-grant/#sequence-diagram","text":"Paste the following source text of the sequence diagram on sequencediagram.org title Oauth2.0 Device Authorization flow participant User participant Browser on Computer / Smartphone participant Device App participant Jans AS participant Third Party App User->Device App:Opens an app on device Device App->Jans AS:Sends authorization request \\n\"jans-server.com/jans-auth/restv1/device_authorization\" Jans AS->Device App:Response - \\nuser_code, device_code, verification_url, interval, expiration Device App ->User: Instructs the user to access Verification URL \\nand enter user_code note over Device App:Device App will keep polling AS for Access Token \\nuntil device authorization is completed loop till Device App recieves Access Token: Device App->Jans AS:request Access Token Jans AS->Device App:Response - \\naccess_denied \\nOR expired_token \\nOR authorization_pending \\nOR Access token end User->Browser on Computer / Smartphone:Opens a browser \\nand access verification URL Browser on Computer / Smartphone->Jans AS:send user_code to verification URL Browser on Computer / Smartphone <-Jans AS:Login and authorization prompt Browser on Computer / Smartphone->Jans AS:Authentication and consent Jans AS->Jans AS: Mark device as Authorized note over Jans AS:Subsequent polling by the Device App \\nwill return an Access Token as indicated \\nby the loop above Device App->Third Party App:Invoke API with Access Token Third Party App->Device App: return Response","title":"Sequence Diagram"},{"location":"admin/auth-server/oauth-features/device-grant/#user-experience","text":"First, the user requests authorization from the device: At the URL displayed on the screen, the user can input the displayed code in the device. After that, user could need to authenticate, then decide whether permissions will be granted. acr value can be specified in deviceAuthzAcr AS configuration property. Finally, the confirmation screen will be shown.","title":"User Experience"},{"location":"admin/auth-server/oauth-features/device-grant/#acr-value-during-device-authorization","text":"User is required to authenticate if not authenticated yet. By default acr_values is not set in authorization request, which means it relies on default AS handling. However it's possible explicitly set acr value during Device Authorization by setting deviceAuthzAcr AS configuration property.","title":"ACR value during Device Authorization"},{"location":"admin/auth-server/oauth-features/device-grant/#request-user-and-device-codes","text":"This first step, device sends an HTTP POST request to Jans authorization server, at /jans-auth/restv1/device_authorization which is also presented in the Discovery url published by Jans Server, this endpoint could process a common authentication method or it could also not do any authentication, depending on the configuration for the client in Jans Server.","title":"Request user and device codes"},{"location":"admin/auth-server/oauth-features/device-grant/#parameters","text":"Parameter Description client_id Required The client ID for your application. scope Required A space separated list of scopes that identify the resources that the device could access on the user's behalf. These values inform the consent screen that Jans server displays to the user.","title":"Parameters"},{"location":"admin/auth-server/oauth-features/device-grant/#example","text":"POST /restv1/device_authorization HTTP/1.1 Content-Type: application/x-www-form-urlencoded Host: test.jans.org Authorization: Basic MTIzLTEyMy0xMjM6WkE1aWxpTFFDYUR4 client_id=123-123-123&scope=openid+profile+address+email+phone","title":"Example"},{"location":"admin/auth-server/oauth-features/device-grant/#device-request-response","text":"In response, the Jans authorization server generates a unique device verification code and an end-user code that are valid for a limited time and includes them in the HTTP response body using the \"application/json\" format with a 200 (OK) status code. The response contains the following parameters: Parameter Description user_code Required The end-user verification code device_code Required The device verification code verification_uri Required The end-user verification URI on the authorization server. This should be shown to the end-user because he should open this url in the rich user-agent. verification_uri_complete Optional This is similar than verification_uri , however it also includes user_code as a query param in the url. It's issued if the device wants to use QR mode for example. expires_in Required The lifetime in seconds of the device_code and user_code . interval Required The minimum amount of time in seconds that the client should wait between polling requests to the token endpoint.","title":"Device Request response"},{"location":"admin/auth-server/oauth-features/device-grant/#example_1","text":"HTTP/1.1 200 Content-Length: 307 Content-Type: application/json Server: Jetty(9.4.19.v20190610) { \"user_code\": \"SJFP-DTPL\", \"device_code\": \"aeb28bdc90d806ac58d4b0f832f06c3ac9c4bd03292f0c09\", \"interval\": 5, \"verification_uri_complete\": \"https://test.jans.io:8443/device-code?user_code=SJFP-DTPL\", \"verification_uri\": \"https://test.jans.io:8443/device-code\", \"expires_in\": 1800 }","title":"Example:"},{"location":"admin/auth-server/oauth-features/device-grant/#device-display","text":"Common flow, the device should display verification_url and user_code received from Jans server. The content that the device displays to the user should instruct the user to navigate to the verification_url on a separate device and enter the user_code . Design device interface following these rules: user_code has the following format: XXXX-XXXX where Xs represent to any ASCII character, for example: RTXD-HTLK . The length of the user_code will be always the same, therefore it's highly recommended to show it as clear and big that the user can read it easly. verification_url should be displayed also in a way that the user can read it easily. The normal length should be around 40 characters, however it could depends also on the domain used for the server. Remember that the user will need to write the whole URL manually in the web browser, therefore it's recommended to use a short URL. verification_url_complete will be used for those cases where device can show QR (Quick Response) codes or NFC (Near Field Communication) to save the user from typing the whole URI. Interaction between device and Jans server will be the same, however user can process the authorization faster. For example:","title":"Device Display"},{"location":"admin/auth-server/oauth-features/device-grant/#user-login-authorization","text":"The user will need to put user_code value in the browser and after that, he will be redirected to the common authorization flow, it requires login whether there is no session between the user-agent and the Jans server and grant the permissions based on the device request.","title":"User Login &amp; Authorization"},{"location":"admin/auth-server/oauth-features/device-grant/#poll-token","text":"Since the user will be using a separate device to navigate to the verification_url and grant or deny access, the requesting device is not automatically notified when the user responds to the access request. For that reason, the requesting device needs to poll the Jans Server to determine when the user has responded to the request. The requesting device should continue sending polling requests until it receives a response indicating that the user has responded to the access request or until the device_code expires. The parameter interval returned in step 2 specifies the amount of time, in seconds, to wait between requests. The URL of the endpoint to poll is /jans-auth/restv1/token . The polling request contains the following parameters:","title":"Poll Token"},{"location":"admin/auth-server/oauth-features/device-grant/#parameters_1","text":"Parameter Description client_id Required The client ID for your application. grant_type Required Must be urn:ietf:params:oauth:grant-type:device_code . device_code Required The device verification code which is returned by Jans server in Step 2. Authentication can be done using any of those authentication methods for this token endpoint.","title":"Parameters"},{"location":"admin/auth-server/oauth-features/device-grant/#example_2","text":"POST /restv1/token HTTP/1.1 Content-Type: application/x-www-form-urlencoded Host: test.jans.io Authorization: Basic MTIzLTEyMy0xMjM6WkE1aWxpTFFDYUR4 grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Adevice_code&device_code=0bd7068e7fdab4bb91b313296a96462256a7370d12f073f0","title":"Example:"},{"location":"admin/auth-server/oauth-features/device-grant/#token-response","text":"The Jans authorization server responds to each polling request with one of the following responses: Access granted If the user granted access to the device (by clicking Allow on the consent screen), then the response contains an access token and a refresh token. The tokens enable the device to access to the resource server on the user's behalf. In this case, the server responds with all tokens required and allowed to be issued depending on the configuration in the server. Example: HTTP/1.1 200 Content-Length: 858 Content-Type: application/json Server: Jetty(9.4.19.v20190610) <<<<<<< Updated upstream {\"access_token\":\"c31fc092-453b-4275-a36f-b2740c3eb1a6\",\"id_token\":\"eyJraWQiOiJlY4.2Tc4NDgxYy05OTJkLTRmN2UtYTkzMS03NjM2NTYyMzgwZjVfc2lnX3JzMjU2IiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYifQ.eyJhdF9oYXNoIjoidWdMSnAzMkxXdnI4QUdlbmdNTlF3QSIsImF1ZCI6IjEyMy0xMjMtMTIzIiwic3ViIjoiM2M2M25HdWZnWFNkMWFwNU81NFZkVjlUUDdmdjJHc0YtLWl0eVBHeFJBTSIsImlzcyI6Imh0dHBzOi8vdGVzdC5nbHV1Lm9yZzo4NDQzIiwiZXhwIjoxNTk1NjQzOTg0LCJpYXQiOjE1OTU2NDAzODQsIm94T3BlbklEQ29ubmVjdFZlcnNpb24iOiJvcGVuaWRjb25uZWN0LTEuMCJ9.fElZtuUslhSSuqTOuvGeafG4QuQoHKLpya25RHWkC5V9Xf9ODYa6tD_Tdav2D9Gff2Zz7pt8WKso-WYOqmJ3NrgMoVU7d1SMj6pYGilTL1JokjB18Yw1TI6oR6Z4wegy8_ajftLLhqosI5-ZE36TzPwoAKzjPl-iZEpV2U1OPHWZrdwc9N3YOyO0I_IJGQmFnXC_oacitMV2VZaTxfuCew5cPwNp5durooFNvv3DPzc9JYEctmaLsiRtfqN7pCaV30B3hnYTYZ4p2HNsUbOewBI8_Brm1v1CByitQPUFqETgmPGbf4HCTEoaH-7DfaXnAsePt73blNwJrlTlUBieew\",\"token_type\":\"bearer\",\"expires_in\":299} Access denied If the user refuses to grant access to the device, then the server response has a 400 HTTP response status code. The response contains the following error: HTTP/1.1 400 Cache-Control: no-store Content-Length: 74 Content-Type: application/json Pragma: no-cache Server: Jetty(9.4.19.v20190610) { \"error_description\": \"access_denied\", \"error\": \"access_denied\" } Authorization pending It means that the request hasn't been processed by the end-user yet, therefore the request is still in process. Example: HTTP/1.1 400 Cache-Control: no-store Content-Length: 90 Content-Type: application/json Pragma: no-cache Server: Jetty(9.4.19.v20190610) { \"error_description\": \"authorization_pending\", \"error\": \"authorization_pending\" } Polling too frequently If the device sends polling requests too frequently, then the server returns a 400 HTTP response status code. Then the device should increase the time interval between requests. Example: HTTP/1.1 400 Cache-Control: no-store Content-Length: 66 Content-Type: application/json Pragma: no-cache Server: Jetty(9.4.19.v20190610) { \"error_description\": \"slow_down\", \"error\": \"slow_down\" } Other errors This token endpoint can return any error code already defined, for example whether client can't be authenticated or the grant type sent is invalid. Some of them could be: invalid_client , invalid_grant , invalid_request and others.","title":"Token Response"},{"location":"admin/auth-server/oauth-features/device-grant/#customizing-device-grant-page","text":"More about customising this page to include your organization's stylesheets, images and content in this article","title":"Customizing Device Grant page"},{"location":"admin/auth-server/oauth-features/dpop/","tags":["administration","auth-server","oauth","feature","dpop"],"text":"DPoP (Demonstrating Proof-of-Possession at the Application Layer) # Janssen Server supports DPoP (Demonstrating Proof-of-Possession) at the Application Layer, which is OAuth 2.0 feature to enhance the security of resources protected by access tokens. When DPoP is being used, the Janssen Server checks whether the presenter of the access token is the one to whom the access token was issued. Hence, making sure that a stolen access token is not being used by someone else to access the protected resource. OAuth 2.0 DPoP specification is available here Janssen Server also supports OAuth MTLS(Mutual TLS) as a mechanism to ensure that the token presenting party is legitimate. While MTLS should be preferred whenever it is possible to use it, for other cases like single page application(SPA), DPoP can be used. Using DPoP # Using DPoP Proof JWT # To use DPoP protection, the client needs to create DPoP Proof JWT (or DPoP Proof) and send it using DPoP request header to Janssen Server when: Requesting for a new access token Accessing a protected resource using the access token DPoP proofs are created differently for the cases listed above. DPoP specification describes how . When an access token is requested with the DPoP header (1 above), the Janssen Server returns an access token (or refresh token) that is bound(mapped) to the public key attached with the DPoP proof. Subsequently, when the client uses the access token to access the protected resource (2 above), it again creates and attaches the DPoP Proof with the request. The resource server checks the validity of the request by ensuring that the access token used is bound to the same public key which is presented in the DPoP proof in the request. The resource server uses steps laid out in the specification to acertain this. Using Introspection Endpoint # Janssen Server introspection endpoint supports the JWK thumbprint confirmation method. Using this, the resource server can introspect an access token and obtain the hash of the public key associated with the access token. Response from the introspection endpoint will share this information in the format recommended in the specificaiton Janssen Server Configuration for DPoP # Following properties of the Janssen Server can be used to tailor the behavior concerning DPoP. dpopJtiCacheTime dpopSigningAlgValuesSupported dpopTimeframe Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"DPoP"},{"location":"admin/auth-server/oauth-features/dpop/#dpop-demonstrating-proof-of-possession-at-the-application-layer","text":"Janssen Server supports DPoP (Demonstrating Proof-of-Possession) at the Application Layer, which is OAuth 2.0 feature to enhance the security of resources protected by access tokens. When DPoP is being used, the Janssen Server checks whether the presenter of the access token is the one to whom the access token was issued. Hence, making sure that a stolen access token is not being used by someone else to access the protected resource. OAuth 2.0 DPoP specification is available here Janssen Server also supports OAuth MTLS(Mutual TLS) as a mechanism to ensure that the token presenting party is legitimate. While MTLS should be preferred whenever it is possible to use it, for other cases like single page application(SPA), DPoP can be used.","title":"DPoP (Demonstrating Proof-of-Possession at the Application Layer)"},{"location":"admin/auth-server/oauth-features/dpop/#using-dpop","text":"","title":"Using DPoP"},{"location":"admin/auth-server/oauth-features/dpop/#using-dpop-proof-jwt","text":"To use DPoP protection, the client needs to create DPoP Proof JWT (or DPoP Proof) and send it using DPoP request header to Janssen Server when: Requesting for a new access token Accessing a protected resource using the access token DPoP proofs are created differently for the cases listed above. DPoP specification describes how . When an access token is requested with the DPoP header (1 above), the Janssen Server returns an access token (or refresh token) that is bound(mapped) to the public key attached with the DPoP proof. Subsequently, when the client uses the access token to access the protected resource (2 above), it again creates and attaches the DPoP Proof with the request. The resource server checks the validity of the request by ensuring that the access token used is bound to the same public key which is presented in the DPoP proof in the request. The resource server uses steps laid out in the specification to acertain this.","title":"Using DPoP Proof JWT"},{"location":"admin/auth-server/oauth-features/dpop/#using-introspection-endpoint","text":"Janssen Server introspection endpoint supports the JWK thumbprint confirmation method. Using this, the resource server can introspect an access token and obtain the hash of the public key associated with the access token. Response from the introspection endpoint will share this information in the format recommended in the specificaiton","title":"Using Introspection Endpoint"},{"location":"admin/auth-server/oauth-features/dpop/#janssen-server-configuration-for-dpop","text":"Following properties of the Janssen Server can be used to tailor the behavior concerning DPoP. dpopJtiCacheTime dpopSigningAlgValuesSupported dpopTimeframe","title":"Janssen Server Configuration for DPoP"},{"location":"admin/auth-server/oauth-features/dpop/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/oauth-features/dpop/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/oauth-features/implicit-grant/","tags":["administration","auth-server","oauth","feature","grant","implicit"],"text":"OAuth 2.0 Implicit Grant # The Implicit Grant : !!! OAuth 2.0 Security Best Current Practice absolutely discourages the use of Implicit flow. Instead, use Authorization code flow with PKCE - OAuth 2.0 for Browser-Based Apps . Further reading Sequence Diagram # sequenceDiagram title Implicit flow autonumber 1 participant Resource owner User Client->>Jans AS:Authorization Request activate Client activate Jans AS Resource owner User ->>Jans AS:User login and consent Jans AS-->>Client:Access Token in the URI fragment deactivate Client deactivate Jans AS Client ->>Jans AS:Validate Access Token activate Client activate Jans AS Jans AS-->>Client:Validate response deactivate Client deactivate Jans AS Client ->>Web - Hosted client resource:Call API with Access Token activate Client activate Jans AS Jans AS-->>Client:Protected resource deactivate Client deactivate Jans AS","title":"Implicit Grant"},{"location":"admin/auth-server/oauth-features/implicit-grant/#oauth-20-implicit-grant","text":"The Implicit Grant : !!! OAuth 2.0 Security Best Current Practice absolutely discourages the use of Implicit flow. Instead, use Authorization code flow with PKCE - OAuth 2.0 for Browser-Based Apps . Further reading","title":"OAuth 2.0 Implicit Grant"},{"location":"admin/auth-server/oauth-features/implicit-grant/#sequence-diagram","text":"sequenceDiagram title Implicit flow autonumber 1 participant Resource owner User Client->>Jans AS:Authorization Request activate Client activate Jans AS Resource owner User ->>Jans AS:User login and consent Jans AS-->>Client:Access Token in the URI fragment deactivate Client deactivate Jans AS Client ->>Jans AS:Validate Access Token activate Client activate Jans AS Jans AS-->>Client:Validate response deactivate Client deactivate Jans AS Client ->>Web - Hosted client resource:Call API with Access Token activate Client activate Jans AS Jans AS-->>Client:Protected resource deactivate Client deactivate Jans AS","title":"Sequence Diagram"},{"location":"admin/auth-server/oauth-features/mtls/","tags":["administration","auth-server","oauth","feature","mtls","mutual TLS"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"MTLS"},{"location":"admin/auth-server/oauth-features/mtls/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/auth-server/oauth-features/mtls/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/oauth-features/mtls/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/oauth-features/par/","tags":["administration","auth-server","oauth","feature","par"],"text":"Pushed Authorization Request (PAR) # Pushed Authorization Request (PAR) allows to push the payload of an OAuth 2.0 authorization request to the authorization server via a direct request and provides back with a request URI that is used as reference to the data in a subsequent call to the authorization endpoint. For more information and implementation details please check PAR Endpoint documentation PAR specification Have questions in the meantime? # You can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"PAR"},{"location":"admin/auth-server/oauth-features/par/#pushed-authorization-request-par","text":"Pushed Authorization Request (PAR) allows to push the payload of an OAuth 2.0 authorization request to the authorization server via a direct request and provides back with a request URI that is used as reference to the data in a subsequent call to the authorization endpoint. For more information and implementation details please check PAR Endpoint documentation PAR specification","title":"Pushed Authorization Request (PAR)"},{"location":"admin/auth-server/oauth-features/par/#have-questions-in-the-meantime","text":"You can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/oauth-features/par/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/oauth-features/password-grant/","tags":["administration","auth-server","oauth","feature","grant","password"],"text":"Password Grant # Janssen Server supports the password grant. At the same time, inline with OAuth 2.0 security best practices , this password grant should never be used in practice. OAuth 2.1 has removed this grant type. Configuration # A client can use the password grant if it is enabled in the configuration. An administrator can use TUI to enable password grant for a client. Usage # Using the password grant involves sharing user credentials with a third-party application. This third-party app which has registered with Janssen Server as a client, will then use user-id/password credentials from the user to obtain an access token from Janssen Server. Janssen Server also requires the client to authenticate itself based on the client configuration. Since sharing user credentials with a third-party app is a security risk and against the basic purpose of OAuth, this grant type shall not be used. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Password Grant"},{"location":"admin/auth-server/oauth-features/password-grant/#password-grant","text":"Janssen Server supports the password grant. At the same time, inline with OAuth 2.0 security best practices , this password grant should never be used in practice. OAuth 2.1 has removed this grant type.","title":"Password Grant"},{"location":"admin/auth-server/oauth-features/password-grant/#configuration","text":"A client can use the password grant if it is enabled in the configuration. An administrator can use TUI to enable password grant for a client.","title":"Configuration"},{"location":"admin/auth-server/oauth-features/password-grant/#usage","text":"Using the password grant involves sharing user credentials with a third-party application. This third-party app which has registered with Janssen Server as a client, will then use user-id/password credentials from the user to obtain an access token from Janssen Server. Janssen Server also requires the client to authenticate itself based on the client configuration. Since sharing user credentials with a third-party app is a security risk and against the basic purpose of OAuth, this grant type shall not be used.","title":"Usage"},{"location":"admin/auth-server/oauth-features/password-grant/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/oauth-features/pkce/","tags":["administration","auth-server","oauth","feature","pkce"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"PKCE"},{"location":"admin/auth-server/oauth-features/pkce/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/auth-server/oauth-features/pkce/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/oauth-features/pkce/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/openid-features/","tags":["administration","auth-server","openidc","feature"],"text":"OpenID Connect Provider (OP) # The Janssen Authentication Server is a fully certified OpenID Provider (OP) that supports the following OpenID Connect specifications: Core (spec) Dynamic Client Registration (spec) Discovery (spec) Form Post Response Mode (spec) Session Management (spec) Front Channel Logout (draft) Protocol Overview # OpenID Connect is an identity layer that profiles OAuth 2.0 to define a sign-in flow for applications (clients) to authenticate a person and obtain authorization to gather information (or \"claims\") about that person. For more information, see OpenID Connect It's handy to know some OpenID Connect terminology: The end user or subject is the person being authenticated. The OpenID Provider (OP) is the equivalent of a SAML Identity Provider (IDP). It holds end user credentials (like a username/ password) and personally identifiable information. During a single sign-on (SSO) login flow, end users are redirected to the OP for authentication. The Relying Party or RP or client is software, like a mobile application or website, which needs to authenticate the subject. The RP is an OAuth client.","title":"OpenID Connect Provider (OP)"},{"location":"admin/auth-server/openid-features/#openid-connect-provider-op","text":"The Janssen Authentication Server is a fully certified OpenID Provider (OP) that supports the following OpenID Connect specifications: Core (spec) Dynamic Client Registration (spec) Discovery (spec) Form Post Response Mode (spec) Session Management (spec) Front Channel Logout (draft)","title":"OpenID Connect Provider (OP)"},{"location":"admin/auth-server/openid-features/#protocol-overview","text":"OpenID Connect is an identity layer that profiles OAuth 2.0 to define a sign-in flow for applications (clients) to authenticate a person and obtain authorization to gather information (or \"claims\") about that person. For more information, see OpenID Connect It's handy to know some OpenID Connect terminology: The end user or subject is the person being authenticated. The OpenID Provider (OP) is the equivalent of a SAML Identity Provider (IDP). It holds end user credentials (like a username/ password) and personally identifiable information. During a single sign-on (SSO) login flow, end users are redirected to the OP for authentication. The Relying Party or RP or client is software, like a mobile application or website, which needs to authenticate the subject. The RP is an OAuth client.","title":"Protocol Overview"},{"location":"admin/auth-server/openid-features/acrs/","tags":["administration","auth-server","openidc","feature","acr"],"text":"ACR # ACR(Authentication Context Class Reference) is defined by OpenId Connect Specification . Using ACRs and ACR configuration, the client application can define end-user authentication experience while ensuring required level of security for the application. Supported ACRs # Janssen Server lists supported ACRs in the response from Janssen Server's well-known configuration endpoint given below. Only ACRs that are supported and enabled by configuration will be part of the list. https://janssen.server.host/jans-auth/.well-known/openid-configuration The acr_values_supported claim in the response shows the list of supported and enabled ACRs for particular Janssen Server deployment. ACR categories: # ACRs available in Janssen Server can be broadly put into three categories. These categories are just for ease of understanding. 1. Internal Janssen Server ACR # Janssen server will use internal ACR only if no other authentication method is set or could be invoked. This internal ACR, default_password_auth , is set to level -1. This means that it has lower priority than any other script. This ACR is always available and enabled on any Janssen Server deployment. This ACR is a simple user-id and password-based authentication mechanism. It authenticates the end-user against the backend datastore. 2. Pre-packaged ACR for authenticating using external LDAP or Active Directory # All Janssen Server deployments have default_ldap_server ACR which can be enabled to perform authentication against a remote LDAP-based IDP (e.g. ActiveDirectory). By default, this ACR is disabled. This ACR can only authenticate against LDAP-based IDP or a local LDAP. Use the instructions provided in jans-cli LDAP configuration options documentation to learn how to enable and configure ACRs that use external LDAP as IDP. 3. Script-based ACRs # To offer highly flexible and pluggable authentication flows, Janssen Server uses script-based ACRs. These ACRs are associated with a corresponding person authentication script . To use these ACRs in the authentication flow, the associated script should be enabled . Configuring ACRs in the JANS AS: # ACRs can be configured on two levels: 1. Client Level ACR : # The client can configure a specific ACR that should be used if the authentication request is missing acr_values parameter. This can be configured using Default ACR attribute of the client configuration. Also, the client can restrict ACR values that authentication requests can have as part of acr_values parameter. This can be configured using Allowed ACRs . Using the Janssen Text base UI (TUI) configuration tool, these values can be configured by navigating to Auth Server -> clients -> get clients -> choose a client and press enter -> Advanced Client Prop . On this screen populate ACR values in Default ACR and Allowed ACRs : 2. Server Level ACR # Janssen Server administrator can configure an ACR that should be invoked if ACR for incoming requests can not be determined using client-level configuration. This is the default authentication mechanism exposed to all the clients that send end-users to the Janssen Server for sign-in. To configure this parameter using Janssen Text base UI (TUI) configuration tool, navigate to Auth Server -> Defaults as shown below: ACR Precedence Levels # Each authentication mechanism (script) has a \"Level\" assigned to it which describes how secure and reliable it is. The higher the \"Level\" represents higher reliability. Though several mechanisms(ACRs) can be enabled for the same Janssen server deployment at the same time, for any specific user's session only one of them can be set as the current ACR (and will be returned as acr claim of id_token). After the creation of the initial session, if RP sends a new request with a different ACR, then ACR's \"Level\" will be compared to that of the method associated with the current session. If the requested method's \"Level\" is lower or equal to current ACR's level, nothing is changed and the usual SSO behavior is observed. If the new level is higher (i.e. a more secure method is requested), and it's not possible to serve such a request using the existing session's context, then the user must re-authenticate to continue. If the user succeeds, a new session with a new ACR gets associated. Flowchart - How the Jans AS derives an ACR value for a user session : # flowchart TD A[RP send authentication request] --> B{Request contains <br /><code>acr_values</code> parameter?} B -->|Yes| C[Perform Authentication] B -->|No| D{<code>Default ACR</code> <br />configured for <br />client?} D -->|Yes| C D -->|No| E{<code>Default ACR</code> value <br />configured for <br />Janssen Server?} E --> |Yes| C E --> |No| F[Select <br />internal ACR as<br /> Authentication method] --> C When authentication request is received from a client(RP), the Janssen Server looks for acr_values parameter in the request. This parameter is defined in the OpenId Connect core specification, section 3.1.2.1 . If the acr_values parameter is not received with the request, then Janssen Server uses the value from the Default ACR configuration from the client If Janssen Server doesn't find acr_values request parameter nor does it find the Default ACR configured for the client, then the Janssen Server checks the server configuration property useHighestLevelScriptIfAcrScriptNotFound . If this property is set to true, then Janssen Server invokes the authentication mechanism for which the corresponding person authentication script is enabled. Choosing the script with the highest level . If no script can be invoked or the useHighestLevelScriptIfAcrScriptNotFound property is set to false, then the Janssen Server authenticates using the default ACR for the server . If the default ACR for the server is not configured by the Janssen Server administrator, or it can not be invoked due to any reason, then the Janssen Server uses the internal server ACR to authenticate the end-user. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"ACRs"},{"location":"admin/auth-server/openid-features/acrs/#acr","text":"ACR(Authentication Context Class Reference) is defined by OpenId Connect Specification . Using ACRs and ACR configuration, the client application can define end-user authentication experience while ensuring required level of security for the application.","title":"ACR"},{"location":"admin/auth-server/openid-features/acrs/#supported-acrs","text":"Janssen Server lists supported ACRs in the response from Janssen Server's well-known configuration endpoint given below. Only ACRs that are supported and enabled by configuration will be part of the list. https://janssen.server.host/jans-auth/.well-known/openid-configuration The acr_values_supported claim in the response shows the list of supported and enabled ACRs for particular Janssen Server deployment.","title":"Supported ACRs"},{"location":"admin/auth-server/openid-features/acrs/#acr-categories","text":"ACRs available in Janssen Server can be broadly put into three categories. These categories are just for ease of understanding.","title":"ACR categories:"},{"location":"admin/auth-server/openid-features/acrs/#1-internal-janssen-server-acr","text":"Janssen server will use internal ACR only if no other authentication method is set or could be invoked. This internal ACR, default_password_auth , is set to level -1. This means that it has lower priority than any other script. This ACR is always available and enabled on any Janssen Server deployment. This ACR is a simple user-id and password-based authentication mechanism. It authenticates the end-user against the backend datastore.","title":"1. Internal Janssen Server ACR"},{"location":"admin/auth-server/openid-features/acrs/#2-pre-packaged-acr-for-authenticating-using-external-ldap-or-active-directory","text":"All Janssen Server deployments have default_ldap_server ACR which can be enabled to perform authentication against a remote LDAP-based IDP (e.g. ActiveDirectory). By default, this ACR is disabled. This ACR can only authenticate against LDAP-based IDP or a local LDAP. Use the instructions provided in jans-cli LDAP configuration options documentation to learn how to enable and configure ACRs that use external LDAP as IDP.","title":"2. Pre-packaged ACR for authenticating using external LDAP or Active Directory"},{"location":"admin/auth-server/openid-features/acrs/#3-script-based-acrs","text":"To offer highly flexible and pluggable authentication flows, Janssen Server uses script-based ACRs. These ACRs are associated with a corresponding person authentication script . To use these ACRs in the authentication flow, the associated script should be enabled .","title":"3. Script-based ACRs"},{"location":"admin/auth-server/openid-features/acrs/#configuring-acrs-in-the-jans-as","text":"ACRs can be configured on two levels:","title":"Configuring ACRs in the JANS AS:"},{"location":"admin/auth-server/openid-features/acrs/#1-client-level-acr","text":"The client can configure a specific ACR that should be used if the authentication request is missing acr_values parameter. This can be configured using Default ACR attribute of the client configuration. Also, the client can restrict ACR values that authentication requests can have as part of acr_values parameter. This can be configured using Allowed ACRs . Using the Janssen Text base UI (TUI) configuration tool, these values can be configured by navigating to Auth Server -> clients -> get clients -> choose a client and press enter -> Advanced Client Prop . On this screen populate ACR values in Default ACR and Allowed ACRs :","title":"1. Client Level ACR :"},{"location":"admin/auth-server/openid-features/acrs/#2-server-level-acr","text":"Janssen Server administrator can configure an ACR that should be invoked if ACR for incoming requests can not be determined using client-level configuration. This is the default authentication mechanism exposed to all the clients that send end-users to the Janssen Server for sign-in. To configure this parameter using Janssen Text base UI (TUI) configuration tool, navigate to Auth Server -> Defaults as shown below:","title":"2. Server Level ACR"},{"location":"admin/auth-server/openid-features/acrs/#acr-precedence-levels","text":"Each authentication mechanism (script) has a \"Level\" assigned to it which describes how secure and reliable it is. The higher the \"Level\" represents higher reliability. Though several mechanisms(ACRs) can be enabled for the same Janssen server deployment at the same time, for any specific user's session only one of them can be set as the current ACR (and will be returned as acr claim of id_token). After the creation of the initial session, if RP sends a new request with a different ACR, then ACR's \"Level\" will be compared to that of the method associated with the current session. If the requested method's \"Level\" is lower or equal to current ACR's level, nothing is changed and the usual SSO behavior is observed. If the new level is higher (i.e. a more secure method is requested), and it's not possible to serve such a request using the existing session's context, then the user must re-authenticate to continue. If the user succeeds, a new session with a new ACR gets associated.","title":"ACR Precedence Levels"},{"location":"admin/auth-server/openid-features/acrs/#flowchart-how-the-jans-as-derives-an-acr-value-for-a-user-session","text":"flowchart TD A[RP send authentication request] --> B{Request contains <br /><code>acr_values</code> parameter?} B -->|Yes| C[Perform Authentication] B -->|No| D{<code>Default ACR</code> <br />configured for <br />client?} D -->|Yes| C D -->|No| E{<code>Default ACR</code> value <br />configured for <br />Janssen Server?} E --> |Yes| C E --> |No| F[Select <br />internal ACR as<br /> Authentication method] --> C When authentication request is received from a client(RP), the Janssen Server looks for acr_values parameter in the request. This parameter is defined in the OpenId Connect core specification, section 3.1.2.1 . If the acr_values parameter is not received with the request, then Janssen Server uses the value from the Default ACR configuration from the client If Janssen Server doesn't find acr_values request parameter nor does it find the Default ACR configured for the client, then the Janssen Server checks the server configuration property useHighestLevelScriptIfAcrScriptNotFound . If this property is set to true, then Janssen Server invokes the authentication mechanism for which the corresponding person authentication script is enabled. Choosing the script with the highest level . If no script can be invoked or the useHighestLevelScriptIfAcrScriptNotFound property is set to false, then the Janssen Server authenticates using the default ACR for the server . If the default ACR for the server is not configured by the Janssen Server administrator, or it can not be invoked due to any reason, then the Janssen Server uses the internal server ACR to authenticate the end-user.","title":"Flowchart - How the Jans AS derives an ACR value for a user session :"},{"location":"admin/auth-server/openid-features/acrs/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/openid-features/ciba/","tags":["administration","auth-server","openidc","feature"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"CIBA"},{"location":"admin/auth-server/openid-features/ciba/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/auth-server/openid-features/ciba/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/openid-features/ciba/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/openid-features/id-token/","tags":["administration","auth-server","openidc","feature","ID Token"],"text":"ID Token # Janssen Server is an OpenID Connect Provider(OP). OpenID Connect extends OAuth 2.0 and adds user authentication capabilities using ID token. To add end-user authentication capabilities to an OAuth flow, it is important to use openid scope in the request as specified here . In absence of openid scope, the Janssen Server will not treat the incoming request as OpenID Connect request. For further information on how to configure and customize OpenID Connect using ID Token read here Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"id_token"},{"location":"admin/auth-server/openid-features/id-token/#id-token","text":"Janssen Server is an OpenID Connect Provider(OP). OpenID Connect extends OAuth 2.0 and adds user authentication capabilities using ID token. To add end-user authentication capabilities to an OAuth flow, it is important to use openid scope in the request as specified here . In absence of openid scope, the Janssen Server will not treat the incoming request as OpenID Connect request. For further information on how to configure and customize OpenID Connect using ID Token read here","title":"ID Token"},{"location":"admin/auth-server/openid-features/id-token/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/openid-features/jarm/","tags":["administration","auth-server","openidc","feature"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"JARM"},{"location":"admin/auth-server/openid-features/jarm/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/auth-server/openid-features/jarm/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/openid-features/jarm/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/openid-features/native-sso/","tags":["administration","auth-server","openidc","feature"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Native SSO"},{"location":"admin/auth-server/openid-features/native-sso/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/auth-server/openid-features/native-sso/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/openid-features/native-sso/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/openid-features/prompt-parameter/","tags":["administration","auth-server","openidc","feature","prompt"],"text":"Prompt NONE # The OpenID Connect protocol supports a prompt=none parameter on the authentication request that allows applications to indicate that the authorization server must not display any user interaction (such as authentication, consent, or MFA). Janssen will either return the requested response back to the application, or return an error if the user is not already authenticated or if some type of consent or prompt is required before proceeding. Initiate Silent Authentication requests To initiate a silent authentication request, add the prompt=none parameter when you redirect a user to the /authorize endpoint of Janssen authentication API. (The individual parameters on the authentication request will vary depending on the specific needs of your app.) For example: GET https://YOUR_DOMAIN//authorize? response_type={response_type}& client_id={client_id}& scope={scope}& state={state}& ui_locales=& claims_locales=& acr_values=& redirect_uri={redirect_uri}& prompt=none Basic credential user The prompt=none parameter causes Jannsen to immediately send a result to the specified redirect_uri (callback URL) using the specified response_mode with one of two possible responses: success or error. Note: Any applicable rules will be executed as part of the silent authentication process. Successful authentication responses If the user was already logged in to Janssen and no other interactive prompts are required, Janssen will respond exactly as if the user had authenticated manually through the login page. This response is indistinguishable from a login performed directly without the prompt=none parameter. Example 1: Prompt None (Without credentials in Header) title Prompt None (Without credentials in Header) participant Browser participant IDP participant Identity participant SessionIdService participant AuthorizeRestWebServiceValidator participant AuthenticationFilterService Browser->IDP: /authorize?\\nresponse_type=... &\\nclient_id=... &\\nscope=... &\\nstate=... &\\nui_locales=... &\\nclaims_locales=... &\\nacr_values=... &\\nredirect_uri=... &\\n**prompt=none** IDP->Identity: getSessionId() Identity->IDP: return: null IDP->SessionIdService: getUser(): from sessionId SessionIdService->IDP: return: null group Client validation IDP->AuthorizeRestWebServiceValidator: validateClient(): if it's par, disabled or not found? AuthorizeRestWebServiceValidator->Browser: throw WebApplicationException end group User is null IDP->IDP: ifUserIsNull() IDP->AuthenticationFilterService: processAuthenticationFilters() AuthenticationFilterService->Browser: WebApplicationException (LOGIN_REQUIRED) end Example 2: Prompt None (Without credentials in Header) title Prompt None (With credentials in Header) participant Browser participant Janssen participant Identity participant SessionIdService participant AuthorizeRestWebServiceValidator participant ScopeChecker participant ExternalPostAuthnService participant ResponseParameters participant ExternalUpdateTokenService participant ClientService Browser->Janssen: /authorize?\\nresponse_type=... &\\nclient_id=... &\\nscope=... &\\nstate=... &\\nui_locales=... &\\nclaims_locales=... &\\nacr_values=... &\\nredirect_uri=... &\\n**prompt=none**\\n\\n**Basic credentials (user)** in Headers Janssen->Identity: getSessionId() Identity->Janssen: return: sessionId Janssen->SessionIdService: getUser(): from sessionId SessionIdService->Janssen: return: User group Update Session For ROPC: If exists session attribute grant_type ROPC Janssen->Janssen: updateSessionForROPC() Janssen->SessionIdService: updateSessionId() SessionIdService->Janssen: session attributes updated end group Client validation Janssen->AuthorizeRestWebServiceValidator: validateClient(): if it's par, disabled or not found? AuthorizeRestWebServiceValidator->Browser: throw WebApplicationException (INVALID_REQUEST, UNAUTHORIZED_CLIENT, DISABLED_CLIENT) end group ACR validation Janssen->AuthorizeRestWebServiceValidator: validateAcrs(): If the request acr list does not exist in the session attribute? or\\n Acr Changed? AuthorizeRestWebServiceValidator->Browser: throw WebApplicationException (INVALID_REQUEST) end group Max Age Validation Janssen->Janssen: validateMaxAge() Janssen->AuthorizeRestWebServiceValidator: isAuthnMaxAgeValid() AuthorizeRestWebServiceValidator->Janssen: throw new WebApplicationException(): redirectToAuthorizationPage(): if it's not valid end Janssen->ScopeChecker: checkScopesPolicy() ScopeChecker->Janssen: return: scopes group Post Authn Custom Script Janssen->ExternalPostAuthnService: checkForceReAuthentication() Janssen->ExternalPostAuthnService: checkForceAuthorization() end group if ResponseType CODE Janssen->ResponseParameters: put code end group if ResponseType TOKEN Janssen->ResponseParameters: put access_token, token_type and expires_in Janssen->ExternalUpdateTokenService: modifyAccessToken() ExternalUpdateTokenService->Janssen: return true or false end group if ResponseType ID_TOKEN Janssen->ResponseParameters: put id_token Janssen->ExternalUpdateTokenService: modifyIdToken() ExternalUpdateTokenService->Janssen: return true or false end Janssen->SessionIdService: generateAuthenticatedSessionId(): if exists sessionId SessionIdService->Janssen: return: newSessionUser Janssen->ResponseParameters: addRespnseParameterSessionId(): if enabled appConfiguration.getSessionIdRequestParameterEnabled() Janssen->ResponseParameters: addResponseParameterSid(): if enabled appConfiguration.getIncludeSidInResponse() Janssen->ResponseParameters: put session_state and state Janssen->ClientService: updateAccessTime() Janssen->Browser: /redirect_uri?with_param=...","title":"Prompt Parameter"},{"location":"admin/auth-server/openid-features/prompt-parameter/#prompt-none","text":"The OpenID Connect protocol supports a prompt=none parameter on the authentication request that allows applications to indicate that the authorization server must not display any user interaction (such as authentication, consent, or MFA). Janssen will either return the requested response back to the application, or return an error if the user is not already authenticated or if some type of consent or prompt is required before proceeding. Initiate Silent Authentication requests To initiate a silent authentication request, add the prompt=none parameter when you redirect a user to the /authorize endpoint of Janssen authentication API. (The individual parameters on the authentication request will vary depending on the specific needs of your app.) For example: GET https://YOUR_DOMAIN//authorize? response_type={response_type}& client_id={client_id}& scope={scope}& state={state}& ui_locales=& claims_locales=& acr_values=& redirect_uri={redirect_uri}& prompt=none Basic credential user The prompt=none parameter causes Jannsen to immediately send a result to the specified redirect_uri (callback URL) using the specified response_mode with one of two possible responses: success or error. Note: Any applicable rules will be executed as part of the silent authentication process. Successful authentication responses If the user was already logged in to Janssen and no other interactive prompts are required, Janssen will respond exactly as if the user had authenticated manually through the login page. This response is indistinguishable from a login performed directly without the prompt=none parameter. Example 1: Prompt None (Without credentials in Header) title Prompt None (Without credentials in Header) participant Browser participant IDP participant Identity participant SessionIdService participant AuthorizeRestWebServiceValidator participant AuthenticationFilterService Browser->IDP: /authorize?\\nresponse_type=... &\\nclient_id=... &\\nscope=... &\\nstate=... &\\nui_locales=... &\\nclaims_locales=... &\\nacr_values=... &\\nredirect_uri=... &\\n**prompt=none** IDP->Identity: getSessionId() Identity->IDP: return: null IDP->SessionIdService: getUser(): from sessionId SessionIdService->IDP: return: null group Client validation IDP->AuthorizeRestWebServiceValidator: validateClient(): if it's par, disabled or not found? AuthorizeRestWebServiceValidator->Browser: throw WebApplicationException end group User is null IDP->IDP: ifUserIsNull() IDP->AuthenticationFilterService: processAuthenticationFilters() AuthenticationFilterService->Browser: WebApplicationException (LOGIN_REQUIRED) end Example 2: Prompt None (Without credentials in Header) title Prompt None (With credentials in Header) participant Browser participant Janssen participant Identity participant SessionIdService participant AuthorizeRestWebServiceValidator participant ScopeChecker participant ExternalPostAuthnService participant ResponseParameters participant ExternalUpdateTokenService participant ClientService Browser->Janssen: /authorize?\\nresponse_type=... &\\nclient_id=... &\\nscope=... &\\nstate=... &\\nui_locales=... &\\nclaims_locales=... &\\nacr_values=... &\\nredirect_uri=... &\\n**prompt=none**\\n\\n**Basic credentials (user)** in Headers Janssen->Identity: getSessionId() Identity->Janssen: return: sessionId Janssen->SessionIdService: getUser(): from sessionId SessionIdService->Janssen: return: User group Update Session For ROPC: If exists session attribute grant_type ROPC Janssen->Janssen: updateSessionForROPC() Janssen->SessionIdService: updateSessionId() SessionIdService->Janssen: session attributes updated end group Client validation Janssen->AuthorizeRestWebServiceValidator: validateClient(): if it's par, disabled or not found? AuthorizeRestWebServiceValidator->Browser: throw WebApplicationException (INVALID_REQUEST, UNAUTHORIZED_CLIENT, DISABLED_CLIENT) end group ACR validation Janssen->AuthorizeRestWebServiceValidator: validateAcrs(): If the request acr list does not exist in the session attribute? or\\n Acr Changed? AuthorizeRestWebServiceValidator->Browser: throw WebApplicationException (INVALID_REQUEST) end group Max Age Validation Janssen->Janssen: validateMaxAge() Janssen->AuthorizeRestWebServiceValidator: isAuthnMaxAgeValid() AuthorizeRestWebServiceValidator->Janssen: throw new WebApplicationException(): redirectToAuthorizationPage(): if it's not valid end Janssen->ScopeChecker: checkScopesPolicy() ScopeChecker->Janssen: return: scopes group Post Authn Custom Script Janssen->ExternalPostAuthnService: checkForceReAuthentication() Janssen->ExternalPostAuthnService: checkForceAuthorization() end group if ResponseType CODE Janssen->ResponseParameters: put code end group if ResponseType TOKEN Janssen->ResponseParameters: put access_token, token_type and expires_in Janssen->ExternalUpdateTokenService: modifyAccessToken() ExternalUpdateTokenService->Janssen: return true or false end group if ResponseType ID_TOKEN Janssen->ResponseParameters: put id_token Janssen->ExternalUpdateTokenService: modifyIdToken() ExternalUpdateTokenService->Janssen: return true or false end Janssen->SessionIdService: generateAuthenticatedSessionId(): if exists sessionId SessionIdService->Janssen: return: newSessionUser Janssen->ResponseParameters: addRespnseParameterSessionId(): if enabled appConfiguration.getSessionIdRequestParameterEnabled() Janssen->ResponseParameters: addResponseParameterSid(): if enabled appConfiguration.getIncludeSidInResponse() Janssen->ResponseParameters: put session_state and state Janssen->ClientService: updateAccessTime() Janssen->Browser: /redirect_uri?with_param=...","title":"Prompt NONE"},{"location":"admin/auth-server/openid-features/request-objects/","tags":["administration","auth-server","openidc","feature"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Request Objects"},{"location":"admin/auth-server/openid-features/request-objects/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/auth-server/openid-features/request-objects/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/openid-features/request-objects/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/openid-features/subject-identifiers/","tags":["administration","auth-server","openidc","feature","subject identifier"],"text":"Subject identifiers # Subject identifiers(defined in OpenID Connect Core SPEC ) are unique identifiers generated by Janssen Server(i.e. OpenId Provider) for an end-user. Subject identifiers are unique per Janssen Server instance and it is shared with the client (or clients) via ID token or access token. Whether the same subject identifier is used for the same end-user across multiple clients depends on the kind of subject identifier configured for a particular client. Types of Subject Identifiers # Janssen Server supports both subject identifier types, public and pairwise , as specified in OpenID Connect specification. For a particular Janssen Server deployment, the supported types are listed in the response of Janssen Server's well-known configuration endpoint is given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration The subject_types_supported claim in the response specifies the list of all the supported types. More details about both types are given in this section of specification. Public Subject Identifiers # Public subject identifiers are identifiers that the server generates and assigns to each subject. These identifiers are unique for each server deployment. All the clients that are configured to use a public type subject identifier will be supplied this same identifier for a given subject by the Janssen Server. Sharing common subject identifiers across multiple clients may enable clients to correlate data about a particular subject. If this is an unwanted situation, then the client should use pairwise subject identifiers. By default, the Janssen Server uses the subject attribute inum as the subject identifier. Customizing Subject Identifier Attribute # At the server level, the administrator specifies which subject attribute should be used as subject identifiers. This can be done by updating the value of openidSubAttribute Janssen Server property. At the client level, this can be further customized. If a client uses public type subject identifier, the client can configure the subject attribute that should be used as a subject identifier. This should be done at the client registration time. To enable client level customization, the Janssen Server property publicSubjectIdentifierPerClientEnabled should be set to true and also the desired attribute should be part of the list defined by the Janssen Server property subjectIdentifiersPerClientSupported . Both these properties can be set by the administrator using TUI . Pairwise Subject Identifiers # When a client chooses to use pairwise subject identifier, the Janssen Server generates and attaches a new identifier to all the subjects requested by the client. This identifier is consistently used for the subject-client pair and never used for any other clients configured on the Janssen Server. If multiple clients are using pairwise type subject identifiers, then the same subject will have different identifiers for each subject. Since every client has a different identifier for the same subject, the clients can't match identifiers and correlate information about a subject out of the band. Pairwise Identifier Generation # Janssen Server uses host name string from redirect URI or sector identifier, local user ID, and a salt string as initial inputs to generate pairwise identifiers. This input is then signed with the HS256 signing algorithm to generate a pairwise identifier. Sector identifier configuration influences how pairwise identifiers are calculated. See this document for more details. Properties # Janssen Server allows customization concerning subject identifiers using the properties below: subjectTypesSupported defaultSubjectType shareSubjectIdBetweenClientsWithSameSectorId openidSubAttribute publicSubjectIdentifierPerClientEnabled subjectIdentifiersPerClientSupported skipAuthorizationForOpenIdScopeAndPairwiseId pairwiseCalculationKey pairwiseCalculationSalt pairwiseIdType Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Pairwise/Public Subject Identifiers"},{"location":"admin/auth-server/openid-features/subject-identifiers/#subject-identifiers","text":"Subject identifiers(defined in OpenID Connect Core SPEC ) are unique identifiers generated by Janssen Server(i.e. OpenId Provider) for an end-user. Subject identifiers are unique per Janssen Server instance and it is shared with the client (or clients) via ID token or access token. Whether the same subject identifier is used for the same end-user across multiple clients depends on the kind of subject identifier configured for a particular client.","title":"Subject identifiers"},{"location":"admin/auth-server/openid-features/subject-identifiers/#types-of-subject-identifiers","text":"Janssen Server supports both subject identifier types, public and pairwise , as specified in OpenID Connect specification. For a particular Janssen Server deployment, the supported types are listed in the response of Janssen Server's well-known configuration endpoint is given below. https://janssen.server.host/jans-auth/.well-known/openid-configuration The subject_types_supported claim in the response specifies the list of all the supported types. More details about both types are given in this section of specification.","title":"Types of Subject Identifiers"},{"location":"admin/auth-server/openid-features/subject-identifiers/#public-subject-identifiers","text":"Public subject identifiers are identifiers that the server generates and assigns to each subject. These identifiers are unique for each server deployment. All the clients that are configured to use a public type subject identifier will be supplied this same identifier for a given subject by the Janssen Server. Sharing common subject identifiers across multiple clients may enable clients to correlate data about a particular subject. If this is an unwanted situation, then the client should use pairwise subject identifiers. By default, the Janssen Server uses the subject attribute inum as the subject identifier.","title":"Public Subject Identifiers"},{"location":"admin/auth-server/openid-features/subject-identifiers/#customizing-subject-identifier-attribute","text":"At the server level, the administrator specifies which subject attribute should be used as subject identifiers. This can be done by updating the value of openidSubAttribute Janssen Server property. At the client level, this can be further customized. If a client uses public type subject identifier, the client can configure the subject attribute that should be used as a subject identifier. This should be done at the client registration time. To enable client level customization, the Janssen Server property publicSubjectIdentifierPerClientEnabled should be set to true and also the desired attribute should be part of the list defined by the Janssen Server property subjectIdentifiersPerClientSupported . Both these properties can be set by the administrator using TUI .","title":"Customizing Subject Identifier Attribute"},{"location":"admin/auth-server/openid-features/subject-identifiers/#pairwise-subject-identifiers","text":"When a client chooses to use pairwise subject identifier, the Janssen Server generates and attaches a new identifier to all the subjects requested by the client. This identifier is consistently used for the subject-client pair and never used for any other clients configured on the Janssen Server. If multiple clients are using pairwise type subject identifiers, then the same subject will have different identifiers for each subject. Since every client has a different identifier for the same subject, the clients can't match identifiers and correlate information about a subject out of the band.","title":"Pairwise Subject Identifiers"},{"location":"admin/auth-server/openid-features/subject-identifiers/#pairwise-identifier-generation","text":"Janssen Server uses host name string from redirect URI or sector identifier, local user ID, and a salt string as initial inputs to generate pairwise identifiers. This input is then signed with the HS256 signing algorithm to generate a pairwise identifier. Sector identifier configuration influences how pairwise identifiers are calculated. See this document for more details.","title":"Pairwise Identifier Generation"},{"location":"admin/auth-server/openid-features/subject-identifiers/#properties","text":"Janssen Server allows customization concerning subject identifiers using the properties below: subjectTypesSupported defaultSubjectType shareSubjectIdBetweenClientsWithSameSectorId openidSubAttribute publicSubjectIdentifierPerClientEnabled subjectIdentifiersPerClientSupported skipAuthorizationForOpenIdScopeAndPairwiseId pairwiseCalculationKey pairwiseCalculationSalt pairwiseIdType","title":"Properties"},{"location":"admin/auth-server/openid-features/subject-identifiers/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/openid-features/consent/","tags":["administration","auth-server","openidc","feature","consent"],"text":"Overview # Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/auth-server/openid-features/consent/#overview","text":"Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/auth-server/openid-features/consent/customize/","tags":["administration","auth-server","openidc","feature","consent"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Customize"},{"location":"admin/auth-server/openid-features/consent/customize/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/auth-server/openid-features/consent/customize/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/openid-features/consent/customize/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/openid-features/consent/list-delete/","tags":["administration","auth-server","openidc","feature","consent"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"List/Delete Consent"},{"location":"admin/auth-server/openid-features/consent/list-delete/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/auth-server/openid-features/consent/list-delete/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/openid-features/consent/list-delete/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/openid-features/logout/","tags":["administration","auth-server","openidc","feature","logout","front channel logout","back channel logout","RP initiated logout"],"text":"Logout # Janssen Server supports various end-user logout mechanisms by implementing OpenID Connect specifications. OpenID Connect specifications for RP-Initiated Logout , Front-Channel Logout and Back-Channel Logout can be leveraged by applications(RPs) to implement end-user logout. Simpler logout scenarios can be fulfilled by using features of one of the specifications (just using RP-initiated logout for example), but for more complex scenarios like single sign-out, features from multiple specifications may have to be used in combination. To understand how various logout mechanisms work, it is important to first understand How Janssen Server manages sessions? OpenID Connect Session management specification User logout can be initiated either at RP (application) first or at the OpenID Provider (OP) first. Whichever party (RP or OP) gets the logout request first, and has to inform the other party about the event so that both the RP and OP sessions get properly terminated. RP-initiated logout is RP's method to let OP know about the event while Front-channel logout or back-channel logouts are the mechanisms used by OP to initiate logout and let RP know. Client Configuration # Which kind of logout mechanism is used by the client(RP) is dictated by the client's configuration on Janssen Server. When using Janssen Text-based UI(TUI) to configure the client, navigate via Auth Server -> Clients -> logout as shown in the image below: Janssen Server Configuration Properties # Following properties drive how Janssen Server as OpenID Connect Provider (OP) will execute logout. allowPostLogoutRedirectWithoutValidation frontChannelLogoutSessionSupported removeRefreshTokensForClientOnLogout RP-Initiated Logout # RP can initiate logout for a user by redirecting the user-agent to Janssen Server's end_session_endpoint . This URL can be obtained as the value of the end_session_endpoint claim in the OpenID Connect .well-known metadata endpoint response. Please read about end_session_endpoint in more details here A request to the end_session_endpoint endpoint of OP will clear the user session on OP. Along with this, it is important that RP also removes the local user session. RP can do this before redirecting the user agent to end_session_endpoint . In case RP is configured to receive an intimation from the OP about user logouts (either via front or backchannel logout mechanisms), then RP may choose to remove the local session after OP informs the RP about the successful logout. Configuration Properties # Client configuration property of Post Logout Redirection URIs plays an important role when using RP-initiated logout. After successful logout from Janssen Server, the server will redirect the user-agent to the URI specified in this property. Front-Channel Logout # Although Jans Auth Server has a session_id for each person who has authenticated, applications generally have their own sessions. Upon logout from an OpenID Provider, ideally, all RPs are notified, so they can also remove their local sessions. The OpenID solution to implement logout is currently described in the OpenID Connect Front Channel Logout specification . In practice, here's how it works: From the user-agent when the end-user initiates logout, the Janssen Server end_session endpoint is called. end_session endpoint returns an HTML page, which contains an iFrame for each application to which the user has authenticated. The iFrame contains a link to each application's respective logout URL. The special HTML page should be loaded in the background and not displayed to the user. The iFrame URLs should be loaded by the browser. Now, upon logout, the user is calling the logout page of each application, the local cookies are cleared, and the user is signed out of all applications. Configuration Properties # A client can use configuration values of Front Channel Logout URI to specify URI to be used by Janssen Server to render in the iFrame at the time of logout. These configuration values can be updated using TUI as shown here Janssen Server also provides a feature flag END_SESSION that enables or disables this endpoint. If this flag is enabled, it has the same effect as having frontchannel_logout_supported and frontchannel_logout_session_supported metadata values set to true . These metadata values are defined here in OpenID Connect Front-Channel Logout 1.0 specification. Back-Channel Logout # Janssen Server supports back-channel logout as a mechanism for OP to intimate the RP about user logout. As against front-channel logout, where OP intimates RP about user logout using user-agent, the back-channel logout uses direct message communication over HTTP with RP to convey the logout. Since this approach doesn't depend on the user-agent, it is more reliable. At the same time, it is more complex to implement since clearing the user-agent state has to be taken care of separately by RP. Central to the back-channel logout approach is the logout token . This token along with claims like sid , sub , and iss are sent by OP to RP to indicate that the subject or the session identified in the logout token has been logged out. Janssen Server follows recommendations published in the specification in order to construct the logout token. Upon receipt of the logout token, the RP should validate the token and perform appropriate actions . It should also send an appropriate response to OP informing the OP that logout has been successfully executed by RP. Configuration Properties # If an RP has specified Back channel logout URL as part of its client configuration then Janssen Server uses this URI to send the HTTP logout request. The client can also enable backchannel_logout_session_required as specified here by using client configuration. Janssen Server also provides a feature flag END_SESSION that enables or disables this endpoint. If this flag is enabled, it has the same effect as having backchannel_logout_supported and backchannel_logout_session_supported metadata values set to true . These metadata values are defined here in OpenID Connect Back-Channel Logout 1.0 specification.","title":"Logout"},{"location":"admin/auth-server/openid-features/logout/#logout","text":"Janssen Server supports various end-user logout mechanisms by implementing OpenID Connect specifications. OpenID Connect specifications for RP-Initiated Logout , Front-Channel Logout and Back-Channel Logout can be leveraged by applications(RPs) to implement end-user logout. Simpler logout scenarios can be fulfilled by using features of one of the specifications (just using RP-initiated logout for example), but for more complex scenarios like single sign-out, features from multiple specifications may have to be used in combination. To understand how various logout mechanisms work, it is important to first understand How Janssen Server manages sessions? OpenID Connect Session management specification User logout can be initiated either at RP (application) first or at the OpenID Provider (OP) first. Whichever party (RP or OP) gets the logout request first, and has to inform the other party about the event so that both the RP and OP sessions get properly terminated. RP-initiated logout is RP's method to let OP know about the event while Front-channel logout or back-channel logouts are the mechanisms used by OP to initiate logout and let RP know.","title":"Logout"},{"location":"admin/auth-server/openid-features/logout/#client-configuration","text":"Which kind of logout mechanism is used by the client(RP) is dictated by the client's configuration on Janssen Server. When using Janssen Text-based UI(TUI) to configure the client, navigate via Auth Server -> Clients -> logout as shown in the image below:","title":"Client Configuration"},{"location":"admin/auth-server/openid-features/logout/#janssen-server-configuration-properties","text":"Following properties drive how Janssen Server as OpenID Connect Provider (OP) will execute logout. allowPostLogoutRedirectWithoutValidation frontChannelLogoutSessionSupported removeRefreshTokensForClientOnLogout","title":"Janssen Server Configuration Properties"},{"location":"admin/auth-server/openid-features/logout/#rp-initiated-logout","text":"RP can initiate logout for a user by redirecting the user-agent to Janssen Server's end_session_endpoint . This URL can be obtained as the value of the end_session_endpoint claim in the OpenID Connect .well-known metadata endpoint response. Please read about end_session_endpoint in more details here A request to the end_session_endpoint endpoint of OP will clear the user session on OP. Along with this, it is important that RP also removes the local user session. RP can do this before redirecting the user agent to end_session_endpoint . In case RP is configured to receive an intimation from the OP about user logouts (either via front or backchannel logout mechanisms), then RP may choose to remove the local session after OP informs the RP about the successful logout.","title":"RP-Initiated Logout"},{"location":"admin/auth-server/openid-features/logout/#configuration-properties","text":"Client configuration property of Post Logout Redirection URIs plays an important role when using RP-initiated logout. After successful logout from Janssen Server, the server will redirect the user-agent to the URI specified in this property.","title":"Configuration Properties"},{"location":"admin/auth-server/openid-features/logout/#front-channel-logout","text":"Although Jans Auth Server has a session_id for each person who has authenticated, applications generally have their own sessions. Upon logout from an OpenID Provider, ideally, all RPs are notified, so they can also remove their local sessions. The OpenID solution to implement logout is currently described in the OpenID Connect Front Channel Logout specification . In practice, here's how it works: From the user-agent when the end-user initiates logout, the Janssen Server end_session endpoint is called. end_session endpoint returns an HTML page, which contains an iFrame for each application to which the user has authenticated. The iFrame contains a link to each application's respective logout URL. The special HTML page should be loaded in the background and not displayed to the user. The iFrame URLs should be loaded by the browser. Now, upon logout, the user is calling the logout page of each application, the local cookies are cleared, and the user is signed out of all applications.","title":"Front-Channel Logout"},{"location":"admin/auth-server/openid-features/logout/#configuration-properties_1","text":"A client can use configuration values of Front Channel Logout URI to specify URI to be used by Janssen Server to render in the iFrame at the time of logout. These configuration values can be updated using TUI as shown here Janssen Server also provides a feature flag END_SESSION that enables or disables this endpoint. If this flag is enabled, it has the same effect as having frontchannel_logout_supported and frontchannel_logout_session_supported metadata values set to true . These metadata values are defined here in OpenID Connect Front-Channel Logout 1.0 specification.","title":"Configuration Properties"},{"location":"admin/auth-server/openid-features/logout/#back-channel-logout","text":"Janssen Server supports back-channel logout as a mechanism for OP to intimate the RP about user logout. As against front-channel logout, where OP intimates RP about user logout using user-agent, the back-channel logout uses direct message communication over HTTP with RP to convey the logout. Since this approach doesn't depend on the user-agent, it is more reliable. At the same time, it is more complex to implement since clearing the user-agent state has to be taken care of separately by RP. Central to the back-channel logout approach is the logout token . This token along with claims like sid , sub , and iss are sent by OP to RP to indicate that the subject or the session identified in the logout token has been logged out. Janssen Server follows recommendations published in the specification in order to construct the logout token. Upon receipt of the logout token, the RP should validate the token and perform appropriate actions . It should also send an appropriate response to OP informing the OP that logout has been successfully executed by RP.","title":"Back-Channel Logout"},{"location":"admin/auth-server/openid-features/logout/#configuration-properties_2","text":"If an RP has specified Back channel logout URL as part of its client configuration then Janssen Server uses this URI to send the HTTP logout request. The client can also enable backchannel_logout_session_required as specified here by using client configuration. Janssen Server also provides a feature flag END_SESSION that enables or disables this endpoint. If this flag is enabled, it has the same effect as having backchannel_logout_supported and backchannel_logout_session_supported metadata values set to true . These metadata values are defined here in OpenID Connect Back-Channel Logout 1.0 specification.","title":"Configuration Properties"},{"location":"admin/auth-server/openid-features/logout/back-channel/","tags":["administration","auth-server","openidc","feature","logout"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Back Channel"},{"location":"admin/auth-server/openid-features/logout/back-channel/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/auth-server/openid-features/logout/back-channel/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/openid-features/logout/back-channel/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/openid-features/logout/customizing-logout/","tags":["administration","auth-server","openidc","feature","logout"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Customizing Logout"},{"location":"admin/auth-server/openid-features/logout/customizing-logout/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/auth-server/openid-features/logout/customizing-logout/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/openid-features/logout/customizing-logout/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/openid-features/logout/forcing-logout/","tags":["administration","auth-server","openidc","feature","logout"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Forcing Logout on Browser Exit"},{"location":"admin/auth-server/openid-features/logout/forcing-logout/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/auth-server/openid-features/logout/forcing-logout/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/openid-features/logout/forcing-logout/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/openid-features/logout/front-channel/","tags":["administration","auth-server","openidc","feature","logout"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Front Channel"},{"location":"admin/auth-server/openid-features/logout/front-channel/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/auth-server/openid-features/logout/front-channel/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/openid-features/logout/front-channel/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/openid-features/user-claims/","tags":["administration","auth-server","openidc","feature","claims"],"text":"Overview # Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/auth-server/openid-features/user-claims/#overview","text":"Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/auth-server/openid-features/user-claims/built-in-claims/","tags":["administration","auth-server","openidc","feature","claims"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Built-in Claims"},{"location":"admin/auth-server/openid-features/user-claims/built-in-claims/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/auth-server/openid-features/user-claims/built-in-claims/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/openid-features/user-claims/built-in-claims/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/openid-features/user-claims/claim-uniqueness-validation/","tags":["administration","auth-server","openidc","feature","claims"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Claim Uniqueness/Validation"},{"location":"admin/auth-server/openid-features/user-claims/claim-uniqueness-validation/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/auth-server/openid-features/user-claims/claim-uniqueness-validation/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/openid-features/user-claims/claim-uniqueness-validation/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/openid-features/user-claims/custom-claims/","tags":["administration","auth-server","openidc","feature","claims"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Adding Custom Claims"},{"location":"admin/auth-server/openid-features/user-claims/custom-claims/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/auth-server/openid-features/user-claims/custom-claims/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/openid-features/user-claims/custom-claims/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/reporting-metrics/","tags":["administration","auth-server","reporting","metric"],"text":"Overview # Authorization Server (AS) supports different metric data: - Monthly Active Users (MAU) - Health Check - Token Issued - Audit Logs Statistic Endpoint # Statistic data (MAU, Token Issued) is returned from /jans-auth/restv1/internal/stat protected endpoint. Endpoint is protected by authorization token which must contain configurable scope (via statAuthorizationScope AS configuration property). Default scope value of statAuthorizationScope is jans_stat which means that token must contain this scope or otherwise UNAUTHORIZED 401 response is returned. Parameters - month - specify month in YYYYMM format (e.g. January 2022 is 202201 ) - start-month - start month for range request - end-month - end month for range request - format - if no value is specified than json value is returns. Possible explicit values are openmetrics (open metrics format) and jsonmonth (all data are flattened for given month) Example: Request single month data (recommended) GET /jans-auth/restv1/internal/stat?month=202101 Authorization: Bearer czZCaGRSa3F0MzpnWDFmQmF0M2JW Example: request multiple months data GET /jans-auth/restv1/internal/stat?month=202012%20202101 Authorization: Bearer czZCaGRSa3F0MzpnWDFmQmF0M2JW It is also possible to request data by specifying month ranges via start-month and end-month parameters. Example: request multiple months by specifying month range (all months from February 2021 till February 2022) GET /jans-auth/restv1/internal/stat?start-month=202102&end-month=202202 Authorization: Bearer czZCaGRSa3F0MzpnWDFmQmF0M2JW If both month range parameters ( start-month or end-month ) and month parameter are used at the same time AS will return 400 Bad Request error. Note that data returned by endpoint is calculated and depending on request can be expensive to recalculate each time. Thus data (response) is cached during one hour and is not refreshed during this period. Example: response when format=jsonmonth [ { \"month\": \"202108\", \"montly_active_users\": 5, \"token_count_per_granttype\": { ... } }, { \"month\": \"202109\", \"montly_active_users\": 7, \"token_count_per_granttype\": { ... } } ... ] Monthly Active Users # Server uses algorithmic HLL approach of tracking active users. Means it is not exact number but approximation. MAU can be requested at /jans-auth/restv1/internal/stat protected endpoint and is returned per month in YYYYMM format for month. Example: 10 servers with 1000000 unique users with 10M total logins. log2m=15, regwidth = 5 server0 - size: 20483bytes, cardinality: 996522 server1 - size: 20483bytes, cardinality: 998560 server2 - size: 20483bytes, cardinality: 1001721 server3 - size: 20483bytes, cardinality: 988345 server4 - size: 20483bytes, cardinality: 998151 server5 - size: 20483bytes, cardinality: 1005606 server6 - size: 20483bytes, cardinality: 993774 server7 - size: 20483bytes, cardinality: 992465 server8 - size: 20483bytes, cardinality: 988403 server9 - size: 20483bytes, cardinality: 1002353 UNION - size: 20483bytes, cardinality: 10010897 Example: MAU with no format parameter in request { \"response\": { \"202101\": { \"monthly_active_users\": 1939497078, ... }, \"202102\": { \"monthly_active_users\": 1939497078, ... }, } } Health Check # AS provides /sys/health-check endpoint which can be used to perform health check. Sample reply { \"status\" : \"running\" , \"db_status\" : \"online\" } Sample curl curl -k https://janssen-host-name/jans-auth/sys/health-check Token Issued # Token Issued report shows how many tokens were issued per grant type. Sample response from /jans-auth/restv1/internal/stat protected endpoint. { \"response\" : { \"202101\" : { \"monthly_active_users\" : 1939497078 , \"token_count_per_granttype\" : { \"implicit\" : { \"access_token\" : 8843443 , \"refresh_token\" : 361678620 , \"uma_token\" : 257653798 , \"id_token\" : 1196937417 }, \"refresh_token\" : { \"access_token\" : 198484847 , \"refresh_token\" : 527458534 , \"uma_token\" : 1552211159 , \"id_token\" : 2077968838 }, \"password\" : { \"access_token\" : 21293868 , \"refresh_token\" : 2003904704 , \"uma_token\" : 44144850 , \"id_token\" : 1713870170 }, \"client_credentials\" : { \"access_token\" : 1656091541 , \"refresh_token\" : 875245682 , \"uma_token\" : 1920358732 , \"id_token\" : 2029924857 }, \"urn:ietf:params:oauth:grant-type:device_code\" : { \"access_token\" : 871050693 , \"refresh_token\" : 735390384 , \"uma_token\" : 902227655 , \"id_token\" : 572398177 }, \"authorization_code\" : { \"access_token\" : 1468057290 , \"refresh_token\" : 1576996227 , \"uma_token\" : 1755565333 , \"id_token\" : 944346498 }, \"urn:openid:params:grant-type:ciba\" : { \"access_token\" : 1187334485 , \"refresh_token\" : 1043290537 , \"uma_token\" : 206572517 , \"id_token\" : 1850166398 }, \"urn:ietf:params:oauth:grant-type:uma-ticket\" : { \"access_token\" : 933970698 , \"refresh_token\" : 1089756841 , \"uma_token\" : 352343374 , \"id_token\" : 645686974 } } }, \"202012\" : { \"monthly_active_users\" : 1620607010 , \"token_count_per_granttype\" : { \"implicit\" : { \"access_token\" : 20676511 , \"refresh_token\" : 960308503 , \"uma_token\" : 703633153 , \"id_token\" : 573544490 }, \"refresh_token\" : { \"access_token\" : 526463917 , \"refresh_token\" : 483679318 , \"uma_token\" : 545888615 , \"id_token\" : 951286042 }, \"password\" : { \"access_token\" : 1883167951 , \"refresh_token\" : 1636169697 , \"uma_token\" : 1753544837 , \"id_token\" : 1675535757 }, \"client_credentials\" : { \"access_token\" : 290209545 , \"refresh_token\" : 1635984977 , \"uma_token\" : 1066472511 , \"id_token\" : 463520941 }, \"urn:ietf:params:oauth:grant-type:device_code\" : { \"access_token\" : 84124820 , \"refresh_token\" : 1705729386 , \"uma_token\" : 2070635541 , \"id_token\" : 970034925 }, \"authorization_code\" : { \"access_token\" : 387026047 , \"refresh_token\" : 907425179 , \"uma_token\" : 370523863 , \"id_token\" : 1807260512 }, \"urn:openid:params:grant-type:ciba\" : { \"access_token\" : 1408098991 , \"refresh_token\" : 819153423 , \"uma_token\" : 936295536 , \"id_token\" : 378210748 }, \"urn:ietf:params:oauth:grant-type:uma-ticket\" : { \"access_token\" : 381038617 , \"refresh_token\" : 828068056 , \"uma_token\" : 448746427 , \"id_token\" : 650520169 } } } } } Audit logs # AS supports audit logs. Please check audit logs page It can help answer on questions like: - successful ( USER_AUTHORIZATION with isSuccess=true ) vs failed authentication ( USER_AUTHORIZATION with isSuccess=false ) - client registration and update, etc. which can help track successful vs failed authenticatio Success vs Failed authentications Have questions in the meantime? # You can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Overview"},{"location":"admin/auth-server/reporting-metrics/#overview","text":"Authorization Server (AS) supports different metric data: - Monthly Active Users (MAU) - Health Check - Token Issued - Audit Logs","title":"Overview"},{"location":"admin/auth-server/reporting-metrics/#statistic-endpoint","text":"Statistic data (MAU, Token Issued) is returned from /jans-auth/restv1/internal/stat protected endpoint. Endpoint is protected by authorization token which must contain configurable scope (via statAuthorizationScope AS configuration property). Default scope value of statAuthorizationScope is jans_stat which means that token must contain this scope or otherwise UNAUTHORIZED 401 response is returned. Parameters - month - specify month in YYYYMM format (e.g. January 2022 is 202201 ) - start-month - start month for range request - end-month - end month for range request - format - if no value is specified than json value is returns. Possible explicit values are openmetrics (open metrics format) and jsonmonth (all data are flattened for given month) Example: Request single month data (recommended) GET /jans-auth/restv1/internal/stat?month=202101 Authorization: Bearer czZCaGRSa3F0MzpnWDFmQmF0M2JW Example: request multiple months data GET /jans-auth/restv1/internal/stat?month=202012%20202101 Authorization: Bearer czZCaGRSa3F0MzpnWDFmQmF0M2JW It is also possible to request data by specifying month ranges via start-month and end-month parameters. Example: request multiple months by specifying month range (all months from February 2021 till February 2022) GET /jans-auth/restv1/internal/stat?start-month=202102&end-month=202202 Authorization: Bearer czZCaGRSa3F0MzpnWDFmQmF0M2JW If both month range parameters ( start-month or end-month ) and month parameter are used at the same time AS will return 400 Bad Request error. Note that data returned by endpoint is calculated and depending on request can be expensive to recalculate each time. Thus data (response) is cached during one hour and is not refreshed during this period. Example: response when format=jsonmonth [ { \"month\": \"202108\", \"montly_active_users\": 5, \"token_count_per_granttype\": { ... } }, { \"month\": \"202109\", \"montly_active_users\": 7, \"token_count_per_granttype\": { ... } } ... ]","title":"Statistic Endpoint"},{"location":"admin/auth-server/reporting-metrics/#monthly-active-users","text":"Server uses algorithmic HLL approach of tracking active users. Means it is not exact number but approximation. MAU can be requested at /jans-auth/restv1/internal/stat protected endpoint and is returned per month in YYYYMM format for month. Example: 10 servers with 1000000 unique users with 10M total logins. log2m=15, regwidth = 5 server0 - size: 20483bytes, cardinality: 996522 server1 - size: 20483bytes, cardinality: 998560 server2 - size: 20483bytes, cardinality: 1001721 server3 - size: 20483bytes, cardinality: 988345 server4 - size: 20483bytes, cardinality: 998151 server5 - size: 20483bytes, cardinality: 1005606 server6 - size: 20483bytes, cardinality: 993774 server7 - size: 20483bytes, cardinality: 992465 server8 - size: 20483bytes, cardinality: 988403 server9 - size: 20483bytes, cardinality: 1002353 UNION - size: 20483bytes, cardinality: 10010897 Example: MAU with no format parameter in request { \"response\": { \"202101\": { \"monthly_active_users\": 1939497078, ... }, \"202102\": { \"monthly_active_users\": 1939497078, ... }, } }","title":"Monthly Active Users"},{"location":"admin/auth-server/reporting-metrics/#health-check","text":"AS provides /sys/health-check endpoint which can be used to perform health check. Sample reply { \"status\" : \"running\" , \"db_status\" : \"online\" } Sample curl curl -k https://janssen-host-name/jans-auth/sys/health-check","title":"Health Check"},{"location":"admin/auth-server/reporting-metrics/#token-issued","text":"Token Issued report shows how many tokens were issued per grant type. Sample response from /jans-auth/restv1/internal/stat protected endpoint. { \"response\" : { \"202101\" : { \"monthly_active_users\" : 1939497078 , \"token_count_per_granttype\" : { \"implicit\" : { \"access_token\" : 8843443 , \"refresh_token\" : 361678620 , \"uma_token\" : 257653798 , \"id_token\" : 1196937417 }, \"refresh_token\" : { \"access_token\" : 198484847 , \"refresh_token\" : 527458534 , \"uma_token\" : 1552211159 , \"id_token\" : 2077968838 }, \"password\" : { \"access_token\" : 21293868 , \"refresh_token\" : 2003904704 , \"uma_token\" : 44144850 , \"id_token\" : 1713870170 }, \"client_credentials\" : { \"access_token\" : 1656091541 , \"refresh_token\" : 875245682 , \"uma_token\" : 1920358732 , \"id_token\" : 2029924857 }, \"urn:ietf:params:oauth:grant-type:device_code\" : { \"access_token\" : 871050693 , \"refresh_token\" : 735390384 , \"uma_token\" : 902227655 , \"id_token\" : 572398177 }, \"authorization_code\" : { \"access_token\" : 1468057290 , \"refresh_token\" : 1576996227 , \"uma_token\" : 1755565333 , \"id_token\" : 944346498 }, \"urn:openid:params:grant-type:ciba\" : { \"access_token\" : 1187334485 , \"refresh_token\" : 1043290537 , \"uma_token\" : 206572517 , \"id_token\" : 1850166398 }, \"urn:ietf:params:oauth:grant-type:uma-ticket\" : { \"access_token\" : 933970698 , \"refresh_token\" : 1089756841 , \"uma_token\" : 352343374 , \"id_token\" : 645686974 } } }, \"202012\" : { \"monthly_active_users\" : 1620607010 , \"token_count_per_granttype\" : { \"implicit\" : { \"access_token\" : 20676511 , \"refresh_token\" : 960308503 , \"uma_token\" : 703633153 , \"id_token\" : 573544490 }, \"refresh_token\" : { \"access_token\" : 526463917 , \"refresh_token\" : 483679318 , \"uma_token\" : 545888615 , \"id_token\" : 951286042 }, \"password\" : { \"access_token\" : 1883167951 , \"refresh_token\" : 1636169697 , \"uma_token\" : 1753544837 , \"id_token\" : 1675535757 }, \"client_credentials\" : { \"access_token\" : 290209545 , \"refresh_token\" : 1635984977 , \"uma_token\" : 1066472511 , \"id_token\" : 463520941 }, \"urn:ietf:params:oauth:grant-type:device_code\" : { \"access_token\" : 84124820 , \"refresh_token\" : 1705729386 , \"uma_token\" : 2070635541 , \"id_token\" : 970034925 }, \"authorization_code\" : { \"access_token\" : 387026047 , \"refresh_token\" : 907425179 , \"uma_token\" : 370523863 , \"id_token\" : 1807260512 }, \"urn:openid:params:grant-type:ciba\" : { \"access_token\" : 1408098991 , \"refresh_token\" : 819153423 , \"uma_token\" : 936295536 , \"id_token\" : 378210748 }, \"urn:ietf:params:oauth:grant-type:uma-ticket\" : { \"access_token\" : 381038617 , \"refresh_token\" : 828068056 , \"uma_token\" : 448746427 , \"id_token\" : 650520169 } } } } }","title":"Token Issued"},{"location":"admin/auth-server/reporting-metrics/#audit-logs","text":"AS supports audit logs. Please check audit logs page It can help answer on questions like: - successful ( USER_AUTHORIZATION with isSuccess=true ) vs failed authentication ( USER_AUTHORIZATION with isSuccess=false ) - client registration and update, etc. which can help track successful vs failed authenticatio Success vs Failed authentications","title":"Audit logs"},{"location":"admin/auth-server/reporting-metrics/#have-questions-in-the-meantime","text":"You can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/reporting-metrics/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/scopes/","tags":["administration","auth-server","scope"],"text":"Scopes # Scopes defines width of authorization access. Scopes are associated with authorization and thus with client to limit what scopes can be granted within given client. Scopes are represented in AS persistence with jansScope object and can have following attributes: jansDefScope - boolean value, specifies whether scope can be associated with client via Dynamic Client Registration (DCR) or not description - string value, text description of the scope displayName - string value, display name of the scope inum - inum identified (which takes part in dn key) dn - distinguished name (inum takes part in dn ), unique identifier of the entry within persistence jansScopeTyp - specified type of the scope and can have following values: oauth - OAuth 2.0 Scopes for any of their API's. This scope type would only have a description, but no claims. Once a client obtains this token, it may be passed to the backend API (let's say the calendar API). openid - Specify what access privileges are being requested for Access Tokens. The scopes associated with Access Tokens determine what resources will be available when they are used to access OAuth 2.0 protected endpoints. For OpenID Connect, scopes can be used to request that specific sets of information be made available as Claim Values. OpenID Connect defines the following scope values that are used to request Claims: profile - This scope value requests access to the End-User's default profile Claims, which are: name , family_name , given_name , middle_name , nickname , preferred_username , profile , picture , website , gender , birthdate , zoneinfo , locale , and updated_at . email - This scope value requests access to the email and email_verified Claims. address - This scope value requests access to the address Claim. phone - This scope value requests access to the phone_number and phone_number_verified Claims. The Claims requested by the profile , email , address , and phone scope values are returned from the UserInfo Endpoint. dynamic - Dynamic scope calls scripts which add claims dynamically. uma - UMA scopes spontaneous - spontaneous scopes, scopes which are created temporary and match to some regexp pattern creatorId - string value, specified creator id creatorTyp - enum value, specifies type of the creator and can have following values: none - creator type is unknown client - scope created by client (e.g. spontaneous scope) user - scope created by user auto - scope automatically created by AS if it does not exist in persistence (currently used only in UMA case) creatorAttrs - map which can hold creator attributes creationDate - date value, specified creation date of the scope jansClaim - string array, specified id of claims that belongs to this scope jansScrDn - string array, specified dynamic scope scripts dn s. jansGrpClaims - boolean value, specifies whether to group claims. jansId - string value, id of the claims (used during authorization requests or elsewhere in request/response) jansIconUrl - string values, specified icon url jansUmaPolicyScrDn - string array, specifies UMA policy scripts dn s exp - date value, specifies expired date del - boolean value, specified whether scope is deletable and has to be cleaned up by AS. false by default, it is true for spontaneous scopes which has expiration time and has to be cleaned up. jansAttrs - other attributes of the scopes spontaneousClientScopes - string array, specifies client spontaneous scopes which allowed creation of this scope showInConfigurationEndpoint - boolean values, specified whether to show scope in discovery page or not In AS code, scope object is represented with following java class Dynamic Client Registration # To enabled scope for DCR please set jansDefScope to true value. Global AS Configuration for DCR - dynamicRegistrationScopesParamEnabled - boolean value specifying whether to enable scopes parameter in dynamic registration. - dynamicRegistrationPasswordGrantTypeEnabled - boolean value specifying whether to enable Password Grant Type during Dynamic Registration. Default value is false . - dynamicRegistrationAllowedPasswordGrantScopes - string array, list of grant scopes for dynamic registration Customizing scopes # Similar to client registration, scopes can be customized using interception scripts. The sample dynamic scope script is available here . Global AS Configuration # Global AS Configurations related to scopes. forceOfflineAccessScopeToEnableRefreshToken - boolean value specifying whether force offline_access scope to enable refresh_token grant type. Default value is true introspectionResponseScopesBackwardCompatibility - boolean value specifying introspection response backward compatibility mode. Default value is false . introspectionAccessTokenMustHaveIntrospectionScope - if True, rejects introspection requests if access_token does not have the 'introspection' scope in its authorization header. Comparing to 'uma_protection', 'introspection' scope is not allowed for dynamic registration'. Default value is false . umaAddScopesAutomatically - add UMA scopes automatically if it is not registered yet umaGrantAccessIfNoPolicies - specify whether to grant access to resources if there is no any policies associated with scopes. Default value is false . skipAuthorizationForOpenIdScopeAndPairwiseId - choose whether to skip authorization if a client has an OpenId scope and a pairwise ID, Default value is false . activeSessionAuthorizationScope - string value, specified authorization Scope for active session introspectionAccessTokenMustHaveUmaProtectionScope - boolean value, if True, rejects introspection requests if access_token does not have the uma_protection scope in its authorization header. Default value is false . introspectionAccessTokenMustHaveIntrospectionScope - boolean value, if True, rejects introspection requests if access_token does not have the 'introspection' scope in its authorization header. Comparing to 'uma_protection', 'introspection' scope is not allowed for dynamic registration'. Default value is false . openidScopeBackwardCompatibility - boolean value, set to false to only allow token endpoint request for openid scope with grant type equals to authorization_code, restrict access to userinfo to scope openid and only return id_token if scope contains openid. Default value is false . Spontaneous scopes # Spontaneous scopes are scopes with random part. AS supports both OpenID Connect and UMA Spontaneous scopes. Global AS Configuration for spontaneous scopes. allowSpontaneousScopes - boolean value, specifies whether to allow spontaneous scopes spontaneousScopeLifetime - the lifetime of spontaneous scope in seconds OpenID Connect Spontaneous scopes # Spontaneous scopes are scopes with random part in it which are not known in advance. For example: transaction:4685456787 , pis-552fds where 4685456787 or 552fds are generated part of the scope. Spontaneous scopes are disabled by default and can be enabled per client. There are following client properties available during dynamic registration of the client related to spontaneous scopes: allow_spontaneous_scopes - OPTIONAL, boolean, false by default. Whether spontaneous scopes are allowed for given client spontaneous_scopes - OPTIONAL, array of strings. Regular expressions which should match to scope. If matched scope is allowed. Example: [\"^transaction:.+$\"] . It matches transaction:245 but not transaction: . Dynamic registration example: ... \"allow_spontaneous_scopes\": true, \"spontaneous_scopes\": [\"^transaction:.+$\"] ... Authorization request example (note transaction:245 and transaction:8645 scopes in request) https://example.gluu.org/oxauth/restv1/authorize?response_type=code&scope=openid+profile+transaction%3A245+transaction%3A8645&client_id=c8592b26-8984-484d-8aba-9f475be73af0&redirect_uri=https%3A%2F%2Fexample.gluu.org%2Foxauth-rp%2Fhome.htm&state=2dccaf64-c0b9-4c35-8008-f754ad964c3b&nonce=9cf5c813-578b-44e5-a353-b7446c1b9358 If allow_spontaneous_scopes=true and spontaneous_scopes regular expression has match then spontaneous scope is persisted and allowed to be handled as usual scope. Spontaneous scope has lifetime and is cleaned up from persistence when expired (and thus not available anymore). Configuration property spontaneousScopeLifetime specifies lifetime in seconds. In addition there is spontaneous scope interception scripts which give additional flexibility. The sample spontaneous scope script is available here . UMA Spontaneous scopes # Sometimes it's required to handle scope by pattern. For example we wish to grant access for particular user based on path /user/1 ... /user/n In this case we can't register resources for each user since it is dynamic. If lets say we have 1 million users we don't want to register 1 million resources. It can be handled with spontaneous scopes which works via regular expressions. Allow spontaneous scopes for client via allow_spontaneous_scopes client property. Register resource with scope ^/user/.+$ Register and assign UMA RPT Authorization Policies to ^/user/.+$ RS should sent explicit scope in permission during ticket registration, e.g. /user/1 (AS validates whether /user/1 matches regexp ^/user/.+$ ). After validation AS persists /user/1 scope and during RPT creation puts permission with explicit scope. In this way AS can validate and persist scopes dynamically. Spontaneous scopes have lifetime which is controlled by spontaneousScopeLifetime global oxauth configuration property. Ticket registration RS registers tickets with all scopes mentioned in \"data\" (we need all scopes in order to evaluate expression, all or nothing principle) { \"resource_id\" : \"112210f47de98100\" , \"resource_scopes\" :[ \"http://photoz.example.com/dev/actions/all\" , \"http://photoz.example.com/dev/actions/add\" , \"http://photoz.example.com/dev/actions/internalClient\" ] } UMA Scopes # UMA 2 scopes are used to grant a client permission to do an action on a protected resource. Different scopes can grant access to the same action. For example, a \"read\" action can be allowed with scope \"read\" or \"all\". For some actions the Resource Server (RS) may want multiple scopes at the same time. For instance, a \"read\" action should only be allowed if the authorization request includes the \"read\" and \"all\" scopes. UMA 2 scopes are bound to resources and are used to fetch policies that check whether the specified user or client should have access to the resource. The scopes are described in JSON and have the following properties: name icon_uri An example of the scope JSON is given below: { \"name\": \"Add photo\", \"icon_uri\": \"https://<hostname>/icons/add_photo_scope.png\" } Note The scope JSON may contain custom properties. The following is an example what an UMA 2 Scope URL may look like: https://<hostname>/uma/scopes/view Note The scope endpoint has to be present in UMA configuration to make it discoverable. The ldif for both an internal and external scope is given below: Sample ldif dn: inum=@!1111!8990!BF80,ou=scopes,ou=uma,o=@!1111,o=gluu displayName: View inum: @!1111!8990!BF80 objectClass: oxAuthUmaScopeDescription objectClass: top oxId: View oxIconUrl: http://<hostname>/uma/icons/view_scope.png UMA Scope Expressions # UMA 2 Scope expressions is Gluu invented extension of UMA 2 which gives flexible way to combine scopes and thus propose more robust way to grant access. Register resource with scope_expression RS registers resource Note new scope_expression field, resource_scopes is ignored in this case { \"resource_scopes\" :[], \"description\" : \"Collection of digital photographs\" , \"icon_uri\" : \"http://www.example.com/icons/flower.png\" , \"name\" : \"Photo Album\" , \"type\" : \"http://www.example.com/rsrcs/photoalbum\" , \"scope_expression\" : { \"rule\" : { \"and\" : [ { \"or\" : [ { \"var\" : 0 }, { \"var\" : 1 } ] }, { \"var\" : 2 } ] }, \"data\" : [ \"http://photoz.example.com/dev/actions/all\" , \"http://photoz.example.com/dev/actions/add\" , \"http://photoz.example.com/dev/actions/internalClient\" ] } } Statistic Endpoint # Global AS Configuration for statistic endpoint statAuthorizationScope - scope required for Statistical Authorization. Default value is jans_stat Have questions in the meantime? # You can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"admin/auth-server/scopes/#scopes","text":"Scopes defines width of authorization access. Scopes are associated with authorization and thus with client to limit what scopes can be granted within given client. Scopes are represented in AS persistence with jansScope object and can have following attributes: jansDefScope - boolean value, specifies whether scope can be associated with client via Dynamic Client Registration (DCR) or not description - string value, text description of the scope displayName - string value, display name of the scope inum - inum identified (which takes part in dn key) dn - distinguished name (inum takes part in dn ), unique identifier of the entry within persistence jansScopeTyp - specified type of the scope and can have following values: oauth - OAuth 2.0 Scopes for any of their API's. This scope type would only have a description, but no claims. Once a client obtains this token, it may be passed to the backend API (let's say the calendar API). openid - Specify what access privileges are being requested for Access Tokens. The scopes associated with Access Tokens determine what resources will be available when they are used to access OAuth 2.0 protected endpoints. For OpenID Connect, scopes can be used to request that specific sets of information be made available as Claim Values. OpenID Connect defines the following scope values that are used to request Claims: profile - This scope value requests access to the End-User's default profile Claims, which are: name , family_name , given_name , middle_name , nickname , preferred_username , profile , picture , website , gender , birthdate , zoneinfo , locale , and updated_at . email - This scope value requests access to the email and email_verified Claims. address - This scope value requests access to the address Claim. phone - This scope value requests access to the phone_number and phone_number_verified Claims. The Claims requested by the profile , email , address , and phone scope values are returned from the UserInfo Endpoint. dynamic - Dynamic scope calls scripts which add claims dynamically. uma - UMA scopes spontaneous - spontaneous scopes, scopes which are created temporary and match to some regexp pattern creatorId - string value, specified creator id creatorTyp - enum value, specifies type of the creator and can have following values: none - creator type is unknown client - scope created by client (e.g. spontaneous scope) user - scope created by user auto - scope automatically created by AS if it does not exist in persistence (currently used only in UMA case) creatorAttrs - map which can hold creator attributes creationDate - date value, specified creation date of the scope jansClaim - string array, specified id of claims that belongs to this scope jansScrDn - string array, specified dynamic scope scripts dn s. jansGrpClaims - boolean value, specifies whether to group claims. jansId - string value, id of the claims (used during authorization requests or elsewhere in request/response) jansIconUrl - string values, specified icon url jansUmaPolicyScrDn - string array, specifies UMA policy scripts dn s exp - date value, specifies expired date del - boolean value, specified whether scope is deletable and has to be cleaned up by AS. false by default, it is true for spontaneous scopes which has expiration time and has to be cleaned up. jansAttrs - other attributes of the scopes spontaneousClientScopes - string array, specifies client spontaneous scopes which allowed creation of this scope showInConfigurationEndpoint - boolean values, specified whether to show scope in discovery page or not In AS code, scope object is represented with following java class","title":"Scopes"},{"location":"admin/auth-server/scopes/#dynamic-client-registration","text":"To enabled scope for DCR please set jansDefScope to true value. Global AS Configuration for DCR - dynamicRegistrationScopesParamEnabled - boolean value specifying whether to enable scopes parameter in dynamic registration. - dynamicRegistrationPasswordGrantTypeEnabled - boolean value specifying whether to enable Password Grant Type during Dynamic Registration. Default value is false . - dynamicRegistrationAllowedPasswordGrantScopes - string array, list of grant scopes for dynamic registration","title":"Dynamic Client Registration"},{"location":"admin/auth-server/scopes/#customizing-scopes","text":"Similar to client registration, scopes can be customized using interception scripts. The sample dynamic scope script is available here .","title":"Customizing scopes"},{"location":"admin/auth-server/scopes/#global-as-configuration","text":"Global AS Configurations related to scopes. forceOfflineAccessScopeToEnableRefreshToken - boolean value specifying whether force offline_access scope to enable refresh_token grant type. Default value is true introspectionResponseScopesBackwardCompatibility - boolean value specifying introspection response backward compatibility mode. Default value is false . introspectionAccessTokenMustHaveIntrospectionScope - if True, rejects introspection requests if access_token does not have the 'introspection' scope in its authorization header. Comparing to 'uma_protection', 'introspection' scope is not allowed for dynamic registration'. Default value is false . umaAddScopesAutomatically - add UMA scopes automatically if it is not registered yet umaGrantAccessIfNoPolicies - specify whether to grant access to resources if there is no any policies associated with scopes. Default value is false . skipAuthorizationForOpenIdScopeAndPairwiseId - choose whether to skip authorization if a client has an OpenId scope and a pairwise ID, Default value is false . activeSessionAuthorizationScope - string value, specified authorization Scope for active session introspectionAccessTokenMustHaveUmaProtectionScope - boolean value, if True, rejects introspection requests if access_token does not have the uma_protection scope in its authorization header. Default value is false . introspectionAccessTokenMustHaveIntrospectionScope - boolean value, if True, rejects introspection requests if access_token does not have the 'introspection' scope in its authorization header. Comparing to 'uma_protection', 'introspection' scope is not allowed for dynamic registration'. Default value is false . openidScopeBackwardCompatibility - boolean value, set to false to only allow token endpoint request for openid scope with grant type equals to authorization_code, restrict access to userinfo to scope openid and only return id_token if scope contains openid. Default value is false .","title":"Global AS Configuration"},{"location":"admin/auth-server/scopes/#spontaneous-scopes","text":"Spontaneous scopes are scopes with random part. AS supports both OpenID Connect and UMA Spontaneous scopes. Global AS Configuration for spontaneous scopes. allowSpontaneousScopes - boolean value, specifies whether to allow spontaneous scopes spontaneousScopeLifetime - the lifetime of spontaneous scope in seconds","title":"Spontaneous scopes"},{"location":"admin/auth-server/scopes/#openid-connect-spontaneous-scopes","text":"Spontaneous scopes are scopes with random part in it which are not known in advance. For example: transaction:4685456787 , pis-552fds where 4685456787 or 552fds are generated part of the scope. Spontaneous scopes are disabled by default and can be enabled per client. There are following client properties available during dynamic registration of the client related to spontaneous scopes: allow_spontaneous_scopes - OPTIONAL, boolean, false by default. Whether spontaneous scopes are allowed for given client spontaneous_scopes - OPTIONAL, array of strings. Regular expressions which should match to scope. If matched scope is allowed. Example: [\"^transaction:.+$\"] . It matches transaction:245 but not transaction: . Dynamic registration example: ... \"allow_spontaneous_scopes\": true, \"spontaneous_scopes\": [\"^transaction:.+$\"] ... Authorization request example (note transaction:245 and transaction:8645 scopes in request) https://example.gluu.org/oxauth/restv1/authorize?response_type=code&scope=openid+profile+transaction%3A245+transaction%3A8645&client_id=c8592b26-8984-484d-8aba-9f475be73af0&redirect_uri=https%3A%2F%2Fexample.gluu.org%2Foxauth-rp%2Fhome.htm&state=2dccaf64-c0b9-4c35-8008-f754ad964c3b&nonce=9cf5c813-578b-44e5-a353-b7446c1b9358 If allow_spontaneous_scopes=true and spontaneous_scopes regular expression has match then spontaneous scope is persisted and allowed to be handled as usual scope. Spontaneous scope has lifetime and is cleaned up from persistence when expired (and thus not available anymore). Configuration property spontaneousScopeLifetime specifies lifetime in seconds. In addition there is spontaneous scope interception scripts which give additional flexibility. The sample spontaneous scope script is available here .","title":"OpenID Connect Spontaneous scopes"},{"location":"admin/auth-server/scopes/#uma-spontaneous-scopes","text":"Sometimes it's required to handle scope by pattern. For example we wish to grant access for particular user based on path /user/1 ... /user/n In this case we can't register resources for each user since it is dynamic. If lets say we have 1 million users we don't want to register 1 million resources. It can be handled with spontaneous scopes which works via regular expressions. Allow spontaneous scopes for client via allow_spontaneous_scopes client property. Register resource with scope ^/user/.+$ Register and assign UMA RPT Authorization Policies to ^/user/.+$ RS should sent explicit scope in permission during ticket registration, e.g. /user/1 (AS validates whether /user/1 matches regexp ^/user/.+$ ). After validation AS persists /user/1 scope and during RPT creation puts permission with explicit scope. In this way AS can validate and persist scopes dynamically. Spontaneous scopes have lifetime which is controlled by spontaneousScopeLifetime global oxauth configuration property. Ticket registration RS registers tickets with all scopes mentioned in \"data\" (we need all scopes in order to evaluate expression, all or nothing principle) { \"resource_id\" : \"112210f47de98100\" , \"resource_scopes\" :[ \"http://photoz.example.com/dev/actions/all\" , \"http://photoz.example.com/dev/actions/add\" , \"http://photoz.example.com/dev/actions/internalClient\" ] }","title":"UMA Spontaneous scopes"},{"location":"admin/auth-server/scopes/#uma-scopes","text":"UMA 2 scopes are used to grant a client permission to do an action on a protected resource. Different scopes can grant access to the same action. For example, a \"read\" action can be allowed with scope \"read\" or \"all\". For some actions the Resource Server (RS) may want multiple scopes at the same time. For instance, a \"read\" action should only be allowed if the authorization request includes the \"read\" and \"all\" scopes. UMA 2 scopes are bound to resources and are used to fetch policies that check whether the specified user or client should have access to the resource. The scopes are described in JSON and have the following properties: name icon_uri An example of the scope JSON is given below: { \"name\": \"Add photo\", \"icon_uri\": \"https://<hostname>/icons/add_photo_scope.png\" } Note The scope JSON may contain custom properties. The following is an example what an UMA 2 Scope URL may look like: https://<hostname>/uma/scopes/view Note The scope endpoint has to be present in UMA configuration to make it discoverable. The ldif for both an internal and external scope is given below: Sample ldif dn: inum=@!1111!8990!BF80,ou=scopes,ou=uma,o=@!1111,o=gluu displayName: View inum: @!1111!8990!BF80 objectClass: oxAuthUmaScopeDescription objectClass: top oxId: View oxIconUrl: http://<hostname>/uma/icons/view_scope.png","title":"UMA Scopes"},{"location":"admin/auth-server/scopes/#uma-scope-expressions","text":"UMA 2 Scope expressions is Gluu invented extension of UMA 2 which gives flexible way to combine scopes and thus propose more robust way to grant access. Register resource with scope_expression RS registers resource Note new scope_expression field, resource_scopes is ignored in this case { \"resource_scopes\" :[], \"description\" : \"Collection of digital photographs\" , \"icon_uri\" : \"http://www.example.com/icons/flower.png\" , \"name\" : \"Photo Album\" , \"type\" : \"http://www.example.com/rsrcs/photoalbum\" , \"scope_expression\" : { \"rule\" : { \"and\" : [ { \"or\" : [ { \"var\" : 0 }, { \"var\" : 1 } ] }, { \"var\" : 2 } ] }, \"data\" : [ \"http://photoz.example.com/dev/actions/all\" , \"http://photoz.example.com/dev/actions/add\" , \"http://photoz.example.com/dev/actions/internalClient\" ] } }","title":"UMA Scope Expressions"},{"location":"admin/auth-server/scopes/#statistic-endpoint","text":"Global AS Configuration for statistic endpoint statAuthorizationScope - scope required for Statistical Authorization. Default value is jans_stat","title":"Statistic Endpoint"},{"location":"admin/auth-server/scopes/#have-questions-in-the-meantime","text":"You can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/scopes/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/session-management/","tags":["administration","auth-server","session"],"text":"Overview # A session is a reference identifier on the Jans Auth Server that connects to a person's authentication state. During an authentication workflow, Auth Server writes a cookie with the session_id in the person's browser. OpenID Native SSO defines a way for mobile apps from the same vendor to use the iOS or Android protected secret storage to store the session_id . By correlating the session, the IDP can return an identity assertion (id_token) to a client without needing to re-authenticate the person. SSO ensues. For example, let's say a person uses a browser to navigate to the website of Relying Party (RP1), which redirects to Jans Auth Server for authentication. Once the person is authenticated, the OP creates a session_id cookie, sets the state to authenticated , and places it in the cache. If the person mavigates their browser to the website of RP2, it redirects to the OP for authentication; since the session_id detected via the cookie is already authenticated, the OP authenticates the person automatically for RP2 (without an authentication prompt). Jans Auth Server stores user session data in its cache. Auth Server performance retrieving the session will vary depending on whether the session is stored in memory, Redis, Memcached or the database, as controlled by the cacheProviderType Auth Server configuration property. The Auth Server session can have one of two states: unauthenticated - a browser that has started, but not completed an authentication workflow. authenticated - when a person has successfully authenticated The following Auth Server configuration properties are related to sessions: sessionIdLifetime - lifetime of the OP session in seconds. It sets both the session_id cookie expiration property as well as the OP session object expiration (if serverSessionIdLifetime is not set or equals 0 which is default behavior) in the persistence. Upi cam set the value to 0 or -1, which means that expiration is not set. In this case, the sesion is valid until the browser session ends. Default value is 86400 . serverSessionIdLifetime - dedicated property to control lifetime of the server side OP session object in seconds. Overrides sessionIdLifetime . By default value is 0 , so object lifetime equals sessionIdLifetime (which sets both cookie and object expiration). It can be useful if goal is to keep different values for client cookie and server object. Default value is 86400 . sessionIdUnusedLifetime - unused OP session lifetime in seconds. If an OP session is not used for a given amount of time, the OP session is removed. Default value is 86400 . sessionIdUnauthenticatedUnusedLifetime - lifetime in seconds of unauthenticated OP session. This determines how long the user can be on the login page while unauthenticated. Default value is 120 . sessionIdRequestParameterEnabled - Boolean value specifying whether to enable session_id HTTP request parameter. Default value is False . sessionIdPersistOnPromptNone - specifies whether to persist or update the session object with data if prompt=none . Default value is True . invalidateSessionCookiesAfterAuthorizationFlow - this is special property which specifies whether to invalidate session_id and consent_session_id cookies right after successful or unsuccessful authorization. changeSessionIdOnAuthentication - Using a different session after the user authenticates improves security. The default value is True . sessionIdPersistInCache - If True, sessions are stored according to cacheProviderType . Otherwise, sessions are persisted in the database. Default value is False . sessionIdPersistInCache Default value is False . For both unused properties, Jans Auth Server calculates this period as currentUnusedPeriod = now - session.lastUsedAt . So for OP session with states: unauthenticated - if currentUnusedPeriod >= sessionIdUnauthenticatedUnusedLifetime , then the session object is removed. authenticated - if currentUnusedPeriod >= sessionIdUnusedLifetime , then the session object is removed. Jans Auth Server updates lastUsedAt property of the session object: During creation For each Auth Server authentication attempt (regardless of success) Killing Sessions # The End Session endpoint ( /end_session ) is where the user can end their own session. See OpenID Logout for more information. To end another person's session, Jans Auth Server has a Session Revocation Endpoint ( /revoke_session ). Session Event Interception Scripts # It is possible to add custom business logic as Jans Auth Server detects session events, see: Application Session End Session Session data structure in Persistence # LDAP # All sessions can be found under ou=sessions,o=jans Object class janssessid - https://github.com/JanssenProject/jans/blob/main/docs/admin/reference/database/ldap-schema.md#janssessid MySQL # All session information is saved in this table : https://github.com/JanssenProject/jans/blob/main/docs/admin/reference/database/mysql-schema.md#janssessid FAQ # How can we force the user to log out if the user is idle on the RP for 4 hours? # The OP doesn't know anything about end-user activity on the RP. Therefore, the RP has to track activity internally, and when the inactivity period is reached (in this case, 4 hours) the RP should perform front-channel logout. How can we force the user to log out if the browser is closed? # Setting sessionIdLifetime to -1 value sets the session_id cookie value to expires=session , and sets the OP session object to not have an expiration time. Most browsers clear cookies with expires=session when the browser is closed, removing the session object at that time. Javascript may be necessary to override undesirable default browser behavior. Can we have a single session across multiple browsers? # Unfortunately, each browser has its own session cookies, and therefore its own sessions.","title":"Overview"},{"location":"admin/auth-server/session-management/#overview","text":"A session is a reference identifier on the Jans Auth Server that connects to a person's authentication state. During an authentication workflow, Auth Server writes a cookie with the session_id in the person's browser. OpenID Native SSO defines a way for mobile apps from the same vendor to use the iOS or Android protected secret storage to store the session_id . By correlating the session, the IDP can return an identity assertion (id_token) to a client without needing to re-authenticate the person. SSO ensues. For example, let's say a person uses a browser to navigate to the website of Relying Party (RP1), which redirects to Jans Auth Server for authentication. Once the person is authenticated, the OP creates a session_id cookie, sets the state to authenticated , and places it in the cache. If the person mavigates their browser to the website of RP2, it redirects to the OP for authentication; since the session_id detected via the cookie is already authenticated, the OP authenticates the person automatically for RP2 (without an authentication prompt). Jans Auth Server stores user session data in its cache. Auth Server performance retrieving the session will vary depending on whether the session is stored in memory, Redis, Memcached or the database, as controlled by the cacheProviderType Auth Server configuration property. The Auth Server session can have one of two states: unauthenticated - a browser that has started, but not completed an authentication workflow. authenticated - when a person has successfully authenticated The following Auth Server configuration properties are related to sessions: sessionIdLifetime - lifetime of the OP session in seconds. It sets both the session_id cookie expiration property as well as the OP session object expiration (if serverSessionIdLifetime is not set or equals 0 which is default behavior) in the persistence. Upi cam set the value to 0 or -1, which means that expiration is not set. In this case, the sesion is valid until the browser session ends. Default value is 86400 . serverSessionIdLifetime - dedicated property to control lifetime of the server side OP session object in seconds. Overrides sessionIdLifetime . By default value is 0 , so object lifetime equals sessionIdLifetime (which sets both cookie and object expiration). It can be useful if goal is to keep different values for client cookie and server object. Default value is 86400 . sessionIdUnusedLifetime - unused OP session lifetime in seconds. If an OP session is not used for a given amount of time, the OP session is removed. Default value is 86400 . sessionIdUnauthenticatedUnusedLifetime - lifetime in seconds of unauthenticated OP session. This determines how long the user can be on the login page while unauthenticated. Default value is 120 . sessionIdRequestParameterEnabled - Boolean value specifying whether to enable session_id HTTP request parameter. Default value is False . sessionIdPersistOnPromptNone - specifies whether to persist or update the session object with data if prompt=none . Default value is True . invalidateSessionCookiesAfterAuthorizationFlow - this is special property which specifies whether to invalidate session_id and consent_session_id cookies right after successful or unsuccessful authorization. changeSessionIdOnAuthentication - Using a different session after the user authenticates improves security. The default value is True . sessionIdPersistInCache - If True, sessions are stored according to cacheProviderType . Otherwise, sessions are persisted in the database. Default value is False . sessionIdPersistInCache Default value is False . For both unused properties, Jans Auth Server calculates this period as currentUnusedPeriod = now - session.lastUsedAt . So for OP session with states: unauthenticated - if currentUnusedPeriod >= sessionIdUnauthenticatedUnusedLifetime , then the session object is removed. authenticated - if currentUnusedPeriod >= sessionIdUnusedLifetime , then the session object is removed. Jans Auth Server updates lastUsedAt property of the session object: During creation For each Auth Server authentication attempt (regardless of success)","title":"Overview"},{"location":"admin/auth-server/session-management/#killing-sessions","text":"The End Session endpoint ( /end_session ) is where the user can end their own session. See OpenID Logout for more information. To end another person's session, Jans Auth Server has a Session Revocation Endpoint ( /revoke_session ).","title":"Killing Sessions"},{"location":"admin/auth-server/session-management/#session-event-interception-scripts","text":"It is possible to add custom business logic as Jans Auth Server detects session events, see: Application Session End Session","title":"Session Event Interception Scripts"},{"location":"admin/auth-server/session-management/#session-data-structure-in-persistence","text":"","title":"Session data structure in Persistence"},{"location":"admin/auth-server/session-management/#ldap","text":"All sessions can be found under ou=sessions,o=jans Object class janssessid - https://github.com/JanssenProject/jans/blob/main/docs/admin/reference/database/ldap-schema.md#janssessid","title":"LDAP"},{"location":"admin/auth-server/session-management/#mysql","text":"All session information is saved in this table : https://github.com/JanssenProject/jans/blob/main/docs/admin/reference/database/mysql-schema.md#janssessid","title":"MySQL"},{"location":"admin/auth-server/session-management/#faq","text":"","title":"FAQ"},{"location":"admin/auth-server/session-management/#how-can-we-force-the-user-to-log-out-if-the-user-is-idle-on-the-rp-for-4-hours","text":"The OP doesn't know anything about end-user activity on the RP. Therefore, the RP has to track activity internally, and when the inactivity period is reached (in this case, 4 hours) the RP should perform front-channel logout.","title":"How can we force the user to log out if the user is idle on the RP for 4 hours?"},{"location":"admin/auth-server/session-management/#how-can-we-force-the-user-to-log-out-if-the-browser-is-closed","text":"Setting sessionIdLifetime to -1 value sets the session_id cookie value to expires=session , and sets the OP session object to not have an expiration time. Most browsers clear cookies with expires=session when the browser is closed, removing the session object at that time. Javascript may be necessary to override undesirable default browser behavior.","title":"How can we force the user to log out if the browser is closed?"},{"location":"admin/auth-server/session-management/#can-we-have-a-single-session-across-multiple-browsers","text":"Unfortunately, each browser has its own session cookies, and therefore its own sessions.","title":"Can we have a single session across multiple browsers?"},{"location":"admin/auth-server/session-management/idp-v-rp/","tags":["administration","auth-server","session"],"text":"IDP versus RP session # Applications generally have their own session cookie (the \"RP Session\"). This makes sense, because the RP only redirects to the IDP for authentication if it cannot find its own local cookie. If a user has a session with many RP's, achieving simultaneous logout across all sites is a challenge--something which your business leaders may not appreciate. While OpenID proposes several solutions to logout, none are ideal. Fundamentally, logout is an asynchronous challenge. A given RP may be disconnected from the network. Thus logout messages sent to RP's that are not received must be replayed. The IETF Sec Events Workgroup has been working on standards to handle logout (and other asynchronous requirements). But adoption of this architecture is not common. Another challenge of RP sessions is that they may have a different timeout for inactivity. See the Janssen Planning Guide page on Timeout Management for more details.","title":"IDP v RP Sessions"},{"location":"admin/auth-server/session-management/idp-v-rp/#idp-versus-rp-session","text":"Applications generally have their own session cookie (the \"RP Session\"). This makes sense, because the RP only redirects to the IDP for authentication if it cannot find its own local cookie. If a user has a session with many RP's, achieving simultaneous logout across all sites is a challenge--something which your business leaders may not appreciate. While OpenID proposes several solutions to logout, none are ideal. Fundamentally, logout is an asynchronous challenge. A given RP may be disconnected from the network. Thus logout messages sent to RP's that are not received must be replayed. The IETF Sec Events Workgroup has been working on standards to handle logout (and other asynchronous requirements). But adoption of this architecture is not common. Another challenge of RP sessions is that they may have a different timeout for inactivity. See the Janssen Planning Guide page on Timeout Management for more details.","title":"IDP versus RP session"},{"location":"admin/auth-server/session-management/multiple-sessions-one-browser/","tags":["administration","auth-server","session","Account Chooser"],"text":"Select Account # A person may have several accounts on a single Jans Auth Server instance. For example, it is common to have several Gmail accounts. Jans Auth Server uses two cookies to track which accounts are associated with a browser: session_id and current_sessions . Below is an example or a person with two authenticated sessions: session_id: de510ab6-b06c-4393-86d8-12a7c501aafe current_sessions: [\"de510ab6-b06c-4393-86d8-12a7c501aafe\", \"c691e83d-eb1b-41f0-b453-fab905681b5b\"] An RP can trigger Auth Server's built in Account Chooser feature by sending an OpenID Authentication Request with the parameter prompt=select_account . In this case, Auth Server renders the default page: /opt/jans/jetty/jans-auth/custom/pages/selectAccount.xhtml This page iterates current_sessions and enables the person to login as a different account, for example: You can override this page if you place a selectAccount.xhtml in custom/pages .","title":"Multiple Sessions in One Browser"},{"location":"admin/auth-server/session-management/multiple-sessions-one-browser/#select-account","text":"A person may have several accounts on a single Jans Auth Server instance. For example, it is common to have several Gmail accounts. Jans Auth Server uses two cookies to track which accounts are associated with a browser: session_id and current_sessions . Below is an example or a person with two authenticated sessions: session_id: de510ab6-b06c-4393-86d8-12a7c501aafe current_sessions: [\"de510ab6-b06c-4393-86d8-12a7c501aafe\", \"c691e83d-eb1b-41f0-b453-fab905681b5b\"] An RP can trigger Auth Server's built in Account Chooser feature by sending an OpenID Authentication Request with the parameter prompt=select_account . In this case, Auth Server renders the default page: /opt/jans/jetty/jans-auth/custom/pages/selectAccount.xhtml This page iterates current_sessions and enables the person to login as a different account, for example: You can override this page if you place a selectAccount.xhtml in custom/pages .","title":"Select Account"},{"location":"admin/auth-server/tokens/","tags":["administration","auth-server","token"],"text":"Overview # Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/auth-server/tokens/#overview","text":"Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/auth-server/tokens/oauth-access-tokens/","tags":["administration","auth-server","oauth","access-token"],"text":"OAuth Access Tokens # Background # When a software client calls an OAuth protected API, an access token is presented in the HTTP Authorization header of the request. Following is an example of a bearer token: Authorization: Bearer 8pkjyj0gxhwh6ux2 OAuth access tokens come in two main types: bearer tokens and MAC tokens. Bearer tokens are the most commonly used type of access token. They are simply a string that is included in the Authorization header of an HTTP request. The client presents the token to the resource server, which can trust the token, by validating it was issued by a trusted authorization server. Bearer tokens can be sent either by value or reference. A value token is a JWT, signed by the authorization server. By calling Auth Server's [introspection endpoint], the client can trade the reference token for the plain JSON object. MAC tokens, are cryptographically signed tokens that include a nonce, timestamp, and other information to prevent replay attacks. They are typically used in situations where the client and the resource server are not able to securely share a secret. They are not commonly used and Janssen Auth Server does not support MAC tokens. There are several security considerations that both mobile developers and API developers should be aware of when working with OAuth access tokens. For mobile developers, it is important to ensure that the access token is stored securely on the device, and that it is not exposed to other apps or processes. API developers should ensure that their API is only accessible to clients that have a valid access token, and that the API properly validates the token before allowing access to the protected resource. Scopes are used in OAuth access tokens to limit the extent of access of a token, i.e. the specific resources and actions that the token is valid for. Scopes are typically defined by the API developer, and the client can request a specific scope when requesting an access token from the authorization server. This allows the API developer to fine-tune the level of access that different clients have to the API. Other security considerations for OAuth access tokens include the need to protect against replay attacks by including a nonce and timestamp in the token and using TLS for all communication between the client, the authorization server and the resource server. It is also important to rotate the access token. This can be done by using short lived tokens and refresh tokens which will allow the client to obtain a new access token without re-prompting the user for their credentials. By default, Jans Auth Server access tokens expire after 5 minutes. Access Token Schema # claim Description active true or false . iss The URI of the issuer authorization server aud The audience, used by the client to verify it is the correct recipient. During registration, the client can specify additional_audience values iat When the client was issued, in seconds, e.g. 1514797822 exp When the token expires, in seconds, e.g. 1514797942 scope A space delimited list of scopes client_id Recipient of the token nbf Not before, which insures the token is only valid within a certain time window cnf Confirmation, used for TLS client certificate bound tokens It is possible to add additional claims to an access token via the Auth Server interception scripts. The preferred script is the update token script . You can also use the introspection script . Access Token Crypto (JWT) # JWT access tokens are signed by Jans Auth Server using algorithms specified in the access_token_signing_alg_values_supported claim of the OpenID configuration endpoint response. Access tokens are signed with the standard OpenID signing key. Jans Auth Server supports TLS client certificate bound access tokens. After a successful mutual TLS client authentication, Jans Auth Server encodes the client certificate thumbprint (hash) in x5t#S256 confirmation method of the JWT or introspection JSON. Assuming the client uses the same certificate to establish a mutual TLS session with the API, the thumbprint in the access token can verify that this is the same client that obtained the access token. This feature is typically used in high security environments, as the operational cost of mutual TLS is material. Decoded JWT example { \"iss\" : \"https://server.example.com\" , \"sub\" : \"ty.webb@example.com\" , \"exp\" : 1493726400 , \"nbf\" : 1493722800 , \"cnf\" :{ \"x5t#S256\" : \"bwcK0esc3ACC3DB2Y5_lESsXE8o9ltc05O89jdN-dg2\" } } Sample introspection response HTTP/ 1.1 200 OK Co ntent - Type : applica t io n /jso n { \"active\" : true , \"iss\" : \"https://server.example.com\" , \"sub\" : \"ty.webb@example.com\" , \"exp\" : 1493726400 , \"nbf\" : 1493722800 , \"cnf\" :{ \"x5t#S256\" : \"bwcK0esc3ACC3DB2Y5_lESsXE8o9ltc05O89jdN-dg2\" } } Server and Client configurations # Access token lifetime is configurable at the server level via the accessTokenLifetime property. However, a client can override this value during client registration with the access_token_lifetime request parameter. Revoke Access Token # Access token can be revoked via Revoke Endpoint","title":"OAuth Access Tokens"},{"location":"admin/auth-server/tokens/oauth-access-tokens/#oauth-access-tokens","text":"","title":"OAuth Access Tokens"},{"location":"admin/auth-server/tokens/oauth-access-tokens/#background","text":"When a software client calls an OAuth protected API, an access token is presented in the HTTP Authorization header of the request. Following is an example of a bearer token: Authorization: Bearer 8pkjyj0gxhwh6ux2 OAuth access tokens come in two main types: bearer tokens and MAC tokens. Bearer tokens are the most commonly used type of access token. They are simply a string that is included in the Authorization header of an HTTP request. The client presents the token to the resource server, which can trust the token, by validating it was issued by a trusted authorization server. Bearer tokens can be sent either by value or reference. A value token is a JWT, signed by the authorization server. By calling Auth Server's [introspection endpoint], the client can trade the reference token for the plain JSON object. MAC tokens, are cryptographically signed tokens that include a nonce, timestamp, and other information to prevent replay attacks. They are typically used in situations where the client and the resource server are not able to securely share a secret. They are not commonly used and Janssen Auth Server does not support MAC tokens. There are several security considerations that both mobile developers and API developers should be aware of when working with OAuth access tokens. For mobile developers, it is important to ensure that the access token is stored securely on the device, and that it is not exposed to other apps or processes. API developers should ensure that their API is only accessible to clients that have a valid access token, and that the API properly validates the token before allowing access to the protected resource. Scopes are used in OAuth access tokens to limit the extent of access of a token, i.e. the specific resources and actions that the token is valid for. Scopes are typically defined by the API developer, and the client can request a specific scope when requesting an access token from the authorization server. This allows the API developer to fine-tune the level of access that different clients have to the API. Other security considerations for OAuth access tokens include the need to protect against replay attacks by including a nonce and timestamp in the token and using TLS for all communication between the client, the authorization server and the resource server. It is also important to rotate the access token. This can be done by using short lived tokens and refresh tokens which will allow the client to obtain a new access token without re-prompting the user for their credentials. By default, Jans Auth Server access tokens expire after 5 minutes.","title":"Background"},{"location":"admin/auth-server/tokens/oauth-access-tokens/#access-token-schema","text":"claim Description active true or false . iss The URI of the issuer authorization server aud The audience, used by the client to verify it is the correct recipient. During registration, the client can specify additional_audience values iat When the client was issued, in seconds, e.g. 1514797822 exp When the token expires, in seconds, e.g. 1514797942 scope A space delimited list of scopes client_id Recipient of the token nbf Not before, which insures the token is only valid within a certain time window cnf Confirmation, used for TLS client certificate bound tokens It is possible to add additional claims to an access token via the Auth Server interception scripts. The preferred script is the update token script . You can also use the introspection script .","title":"Access Token Schema"},{"location":"admin/auth-server/tokens/oauth-access-tokens/#access-token-crypto-jwt","text":"JWT access tokens are signed by Jans Auth Server using algorithms specified in the access_token_signing_alg_values_supported claim of the OpenID configuration endpoint response. Access tokens are signed with the standard OpenID signing key. Jans Auth Server supports TLS client certificate bound access tokens. After a successful mutual TLS client authentication, Jans Auth Server encodes the client certificate thumbprint (hash) in x5t#S256 confirmation method of the JWT or introspection JSON. Assuming the client uses the same certificate to establish a mutual TLS session with the API, the thumbprint in the access token can verify that this is the same client that obtained the access token. This feature is typically used in high security environments, as the operational cost of mutual TLS is material. Decoded JWT example { \"iss\" : \"https://server.example.com\" , \"sub\" : \"ty.webb@example.com\" , \"exp\" : 1493726400 , \"nbf\" : 1493722800 , \"cnf\" :{ \"x5t#S256\" : \"bwcK0esc3ACC3DB2Y5_lESsXE8o9ltc05O89jdN-dg2\" } } Sample introspection response HTTP/ 1.1 200 OK Co ntent - Type : applica t io n /jso n { \"active\" : true , \"iss\" : \"https://server.example.com\" , \"sub\" : \"ty.webb@example.com\" , \"exp\" : 1493726400 , \"nbf\" : 1493722800 , \"cnf\" :{ \"x5t#S256\" : \"bwcK0esc3ACC3DB2Y5_lESsXE8o9ltc05O89jdN-dg2\" } }","title":"Access Token Crypto (JWT)"},{"location":"admin/auth-server/tokens/oauth-access-tokens/#server-and-client-configurations","text":"Access token lifetime is configurable at the server level via the accessTokenLifetime property. However, a client can override this value during client registration with the access_token_lifetime request parameter.","title":"Server and Client configurations"},{"location":"admin/auth-server/tokens/oauth-access-tokens/#revoke-access-token","text":"Access token can be revoked via Revoke Endpoint","title":"Revoke Access Token"},{"location":"admin/auth-server/tokens/oauth-refresh-tokens/","tags":["administration","auth-server","oauth","refresh-token"],"text":"Background # Refresh tokens are an optimization that allows a client to renew an access token without having to re-authenticate. You should not issue a refresh token to untrusted clients, i.e. public clients. Server properties. # refreshTokenLifetime : Default: 14400 minutes - With this property, you can specify a longer lifetime then 5 days. Using the Jans Config API, you can set a client-specific refresh token lifetime. forceOfflineAccessScopeToEnableRefreshToken : Default: True - A good practice is for Auth Server to explicitly ask the subject to consent to the use of refresh tokens. To encourage this practice, by default, Auth Server requires that the client have the offline_access scope to issue a refresh token. persistRefreshToken : Default: True - Otherwise they are written to the cache clientRegDefaultToCodeFlowWithRefresh : Default: True - Set to False if you don't want web clients to get a refresh token. removeRefreshTokensForClientOnLogout : Default: True - Boolean value specifying whether to remove Refresh Tokens on logout. However if intention is to leave Refresh Token after logout, it's required to set it to false . skipRefreshTokenDuringRefreshing : Default: False - Boolean value specifying whether to skip refreshing tokens on refreshing. By default AS always creates new Refresh Token on refresh call to Token Endpoint. This property allows to avoid (skip) new Refresh Token creation. refreshTokenExtendLifetimeOnRotation : Default: False - Boolean value specifying whether to extend refresh tokens on rotation. By default lifetime is not extended, expiration date is set to date of previous Refresh Token. With this property it's possible to have all further Refresh Token have fixed (extended in relation to previuos Refresh Token) lifetime. checkUserPresenceOnRefreshToken : Default: False - Check whether user exists and is active before creating RefreshToken. Set it to true if check is needed(Default value is false - don't check. Refresh Token Management # To revoke a token, a client can do so via the revocation endpoint (including revocation of all tokens by client_id ). online_access scope # If online_access scope is present then refresh token expires when the session ends (for example via front channel logout).","title":"OAuth Refresh Tokens"},{"location":"admin/auth-server/tokens/oauth-refresh-tokens/#background","text":"Refresh tokens are an optimization that allows a client to renew an access token without having to re-authenticate. You should not issue a refresh token to untrusted clients, i.e. public clients.","title":"Background"},{"location":"admin/auth-server/tokens/oauth-refresh-tokens/#server-properties","text":"refreshTokenLifetime : Default: 14400 minutes - With this property, you can specify a longer lifetime then 5 days. Using the Jans Config API, you can set a client-specific refresh token lifetime. forceOfflineAccessScopeToEnableRefreshToken : Default: True - A good practice is for Auth Server to explicitly ask the subject to consent to the use of refresh tokens. To encourage this practice, by default, Auth Server requires that the client have the offline_access scope to issue a refresh token. persistRefreshToken : Default: True - Otherwise they are written to the cache clientRegDefaultToCodeFlowWithRefresh : Default: True - Set to False if you don't want web clients to get a refresh token. removeRefreshTokensForClientOnLogout : Default: True - Boolean value specifying whether to remove Refresh Tokens on logout. However if intention is to leave Refresh Token after logout, it's required to set it to false . skipRefreshTokenDuringRefreshing : Default: False - Boolean value specifying whether to skip refreshing tokens on refreshing. By default AS always creates new Refresh Token on refresh call to Token Endpoint. This property allows to avoid (skip) new Refresh Token creation. refreshTokenExtendLifetimeOnRotation : Default: False - Boolean value specifying whether to extend refresh tokens on rotation. By default lifetime is not extended, expiration date is set to date of previous Refresh Token. With this property it's possible to have all further Refresh Token have fixed (extended in relation to previuos Refresh Token) lifetime. checkUserPresenceOnRefreshToken : Default: False - Check whether user exists and is active before creating RefreshToken. Set it to true if check is needed(Default value is false - don't check.","title":"Server properties."},{"location":"admin/auth-server/tokens/oauth-refresh-tokens/#refresh-token-management","text":"To revoke a token, a client can do so via the revocation endpoint (including revocation of all tokens by client_id ).","title":"Refresh Token Management"},{"location":"admin/auth-server/tokens/oauth-refresh-tokens/#online_access-scope","text":"If online_access scope is present then refresh token expires when the session ends (for example via front channel logout).","title":"online_access scope"},{"location":"admin/auth-server/tokens/openid-id-token/","tags":["administration","auth-server","token","id token","customize id_token"],"text":"OpenID Connect ID Token # Defined in Section 2 of OpenID Connect Core 1.0 : The primary extension that OpenID Connect makes to OAuth 2.0 to enable End-Users to be Authenticated is the ID Token data structure. The ID Token is a security token that contains Claims about the Authentication of an End-User by an Authorization Server when using a Client, and potentially other requested Claims. The ID Token is represented as a JSON Web Token (JWT) [JWT]. The ID Token is similar to a SAML 2.0 Assertion, which must contain an Authentication statement, and may optionally contain an Attribute statement, defined in the spec as: Authentication statements: These are created by the party that successfully authenticated a user. At a minimum, they describe the particular means used to authenticate the user and the specific time at which the authentication took place. Attribute statements: These contain specific identifying attributes about the subject (for example, that user \u201cJohn Doe\u201d has \u201cGold\u201d card status). The ID Token is a standard JWT, and can use signing and encryption depending on the configuration preferences of the client. A sample payload for a Jans Auth Server id_token is below: { \"iss\": \"https://idp.example.tld\", <-- OP hostname \"aud\": \"bd0469f7-f80a-4595-bd52-df9826f0a2f4\", <-- client_id \"sub\": \"0a9ca356-6130-4032-91c6-a2dfe4e19804\", <-- in this case, a pairwise identifer \"iat\": 1672373703, <-- issued at \"auth_time\": 1672373700, <-- when user authenticated \"acr\": \"basic\", <-- how user authenticated \"amr\": [\"10\"], <-- Extra authn details \"nonce\": \"1u0y3ii\", <-- client should verify \"sid\": \"5f01565c-f2dc-4b4b-af8a-ab1578a5dbe3\", <-- session id handle \"jansOpenIDConnectVersion\": \"openidconnect-1.0\" <-- OpenID version } A great tool if you want to decode a JWT is Auth0's https://jwt.io/ . Notice that a basic ID Token, like the one above, contains details about the authentication event, not user claims. You can configure the client to \"include claims in id_token\", or you can set a Auth Server configuration property, legacyIdTokenClaims to True to set the behavior for all clients. Obtaining an ID Token # The client may obtain an ID Token in the authorization response, from the token endpoint, or both. Note, if you intend to use the Code Flow, and you don't intend to validate the c_hash or s_hash values in the ID Token returned from the authorization endpoint, don't check id_token in the response_type for the authorization endpoint, as it will waste compute and storage generating a token you don't need. Validating an ID Token # At a minimum, client developers should always validate the following: Signature of the ID token iss make sure the ID Token was issued by the OP you trust aud make sure the ID Token was issued to your client_id exp make sure the token is not expired nonce make sure the id_token correlates to your original authn request Using the ID Token as an access token for API's # Don't do this. The ID Token is an identity assertion, not an access token. It may be passed in the payload to an API, but it should not be used in lieu of an OAuth access token! Fundamentally, the id_token details how a person was authenticated, not which API's a client is authorized to call. Also, OAuth access tokens are short lived, while the expiration of an identity assertion is much longer. Customizing claims in an id_token # The UpdateTokenType can be used in the following scenarios: In addition to the default claims in an ID token ( iss , aud , exp etc), additional custom claims can be added to an ID token. You can also change the default value of a claim","title":"OpenID id_token"},{"location":"admin/auth-server/tokens/openid-id-token/#openid-connect-id-token","text":"Defined in Section 2 of OpenID Connect Core 1.0 : The primary extension that OpenID Connect makes to OAuth 2.0 to enable End-Users to be Authenticated is the ID Token data structure. The ID Token is a security token that contains Claims about the Authentication of an End-User by an Authorization Server when using a Client, and potentially other requested Claims. The ID Token is represented as a JSON Web Token (JWT) [JWT]. The ID Token is similar to a SAML 2.0 Assertion, which must contain an Authentication statement, and may optionally contain an Attribute statement, defined in the spec as: Authentication statements: These are created by the party that successfully authenticated a user. At a minimum, they describe the particular means used to authenticate the user and the specific time at which the authentication took place. Attribute statements: These contain specific identifying attributes about the subject (for example, that user \u201cJohn Doe\u201d has \u201cGold\u201d card status). The ID Token is a standard JWT, and can use signing and encryption depending on the configuration preferences of the client. A sample payload for a Jans Auth Server id_token is below: { \"iss\": \"https://idp.example.tld\", <-- OP hostname \"aud\": \"bd0469f7-f80a-4595-bd52-df9826f0a2f4\", <-- client_id \"sub\": \"0a9ca356-6130-4032-91c6-a2dfe4e19804\", <-- in this case, a pairwise identifer \"iat\": 1672373703, <-- issued at \"auth_time\": 1672373700, <-- when user authenticated \"acr\": \"basic\", <-- how user authenticated \"amr\": [\"10\"], <-- Extra authn details \"nonce\": \"1u0y3ii\", <-- client should verify \"sid\": \"5f01565c-f2dc-4b4b-af8a-ab1578a5dbe3\", <-- session id handle \"jansOpenIDConnectVersion\": \"openidconnect-1.0\" <-- OpenID version } A great tool if you want to decode a JWT is Auth0's https://jwt.io/ . Notice that a basic ID Token, like the one above, contains details about the authentication event, not user claims. You can configure the client to \"include claims in id_token\", or you can set a Auth Server configuration property, legacyIdTokenClaims to True to set the behavior for all clients.","title":"OpenID Connect ID Token"},{"location":"admin/auth-server/tokens/openid-id-token/#obtaining-an-id-token","text":"The client may obtain an ID Token in the authorization response, from the token endpoint, or both. Note, if you intend to use the Code Flow, and you don't intend to validate the c_hash or s_hash values in the ID Token returned from the authorization endpoint, don't check id_token in the response_type for the authorization endpoint, as it will waste compute and storage generating a token you don't need.","title":"Obtaining an ID Token"},{"location":"admin/auth-server/tokens/openid-id-token/#validating-an-id-token","text":"At a minimum, client developers should always validate the following: Signature of the ID token iss make sure the ID Token was issued by the OP you trust aud make sure the ID Token was issued to your client_id exp make sure the token is not expired nonce make sure the id_token correlates to your original authn request","title":"Validating an ID Token"},{"location":"admin/auth-server/tokens/openid-id-token/#using-the-id-token-as-an-access-token-for-apis","text":"Don't do this. The ID Token is an identity assertion, not an access token. It may be passed in the payload to an API, but it should not be used in lieu of an OAuth access token! Fundamentally, the id_token details how a person was authenticated, not which API's a client is authorized to call. Also, OAuth access tokens are short lived, while the expiration of an identity assertion is much longer.","title":"Using the ID Token as an access token for API's"},{"location":"admin/auth-server/tokens/openid-id-token/#customizing-claims-in-an-id_token","text":"The UpdateTokenType can be used in the following scenarios: In addition to the default claims in an ID token ( iss , aud , exp etc), additional custom claims can be added to an ID token. You can also change the default value of a claim","title":"Customizing claims in an id_token"},{"location":"admin/auth-server/tokens/openid-userinfo-token/","tags":["administration","auth-server","token","userinfo-token"],"text":"Userinfo JWT # An OpenID Connect client, after obtaining an access token, can present it at the Userinfo endpoint to obtain the Userinfo JWT token. The Userinfo response is is described in OpenID Core 5.4.3 , and directs the developer to: Verify that the OP that responded was the intended OP through a TLS server certificate check If the Client has provided a userinfo_encrypted_response_alg parameter during Registration, decrypt the UserInfo Response using the keys specified during Registration. If the response was signed, the Client SHOULD validate the signature. Below is an example of the Userinfo claims for the default Jans Admin user: { \"sub\": \"e25c4146-ce9d-465e-9b59-b9d959bdfe3a\", \"email\": \"admin@issuer.tld\", \"given_name\": \"Admin\", \"family_name\": \"User\", \"name\": \"Default Admin User\", \"middle_name\": \"Admin\", \"nickname\": \"Admin\", \"email_verified\": true, \"inum\": \"e25c4146-ce9d-465e-9b59-b9d959bdfe3a\", \"jansAdminUIRole\": [\"api-admin\"] } Selective disclosure # Domains can limit the claims released to a client from the Userinfo endpoint by associating only the OpenID scopes required by that client. You can also define new scopes, and associate any user claims with them. Note, clients still must request the scopes they need for an access token. For example, a client may be authorize Requesting individual claims # If you want to use the claims parameter, you will have to first enable this feature in the Auth Server properties: set claimsParameterSupported=True . This is not a recommended configuration, because the claims parameter bypasses the privacy protection of the OpenID scopes construct. Dynamic Scopes / Interception Script # If you need to call an API to render scopes or scope values on the fly, you should see the Dynamic Scopes interception script. Userinfo formatter # There is a configuration property dateFormatterPatterns which can be used for format date claims. Example: {'dateFormatterPatterns': {'userinfo':'yyyy-MM-dd'}} . Language support # The default value for the configuration parameter claimsLocalesSupported is ['en'] . Currently, only the name and description supports localization. You will also need to make a proper request and provide the associated values for the claim in the database.","title":"OpenID Userinfo Token"},{"location":"admin/auth-server/tokens/openid-userinfo-token/#userinfo-jwt","text":"An OpenID Connect client, after obtaining an access token, can present it at the Userinfo endpoint to obtain the Userinfo JWT token. The Userinfo response is is described in OpenID Core 5.4.3 , and directs the developer to: Verify that the OP that responded was the intended OP through a TLS server certificate check If the Client has provided a userinfo_encrypted_response_alg parameter during Registration, decrypt the UserInfo Response using the keys specified during Registration. If the response was signed, the Client SHOULD validate the signature. Below is an example of the Userinfo claims for the default Jans Admin user: { \"sub\": \"e25c4146-ce9d-465e-9b59-b9d959bdfe3a\", \"email\": \"admin@issuer.tld\", \"given_name\": \"Admin\", \"family_name\": \"User\", \"name\": \"Default Admin User\", \"middle_name\": \"Admin\", \"nickname\": \"Admin\", \"email_verified\": true, \"inum\": \"e25c4146-ce9d-465e-9b59-b9d959bdfe3a\", \"jansAdminUIRole\": [\"api-admin\"] }","title":"Userinfo JWT"},{"location":"admin/auth-server/tokens/openid-userinfo-token/#selective-disclosure","text":"Domains can limit the claims released to a client from the Userinfo endpoint by associating only the OpenID scopes required by that client. You can also define new scopes, and associate any user claims with them. Note, clients still must request the scopes they need for an access token. For example, a client may be authorize","title":"Selective disclosure"},{"location":"admin/auth-server/tokens/openid-userinfo-token/#requesting-individual-claims","text":"If you want to use the claims parameter, you will have to first enable this feature in the Auth Server properties: set claimsParameterSupported=True . This is not a recommended configuration, because the claims parameter bypasses the privacy protection of the OpenID scopes construct.","title":"Requesting individual claims"},{"location":"admin/auth-server/tokens/openid-userinfo-token/#dynamic-scopes-interception-script","text":"If you need to call an API to render scopes or scope values on the fly, you should see the Dynamic Scopes interception script.","title":"Dynamic Scopes / Interception Script"},{"location":"admin/auth-server/tokens/openid-userinfo-token/#userinfo-formatter","text":"There is a configuration property dateFormatterPatterns which can be used for format date claims. Example: {'dateFormatterPatterns': {'userinfo':'yyyy-MM-dd'}} .","title":"Userinfo formatter"},{"location":"admin/auth-server/tokens/openid-userinfo-token/#language-support","text":"The default value for the configuration parameter claimsLocalesSupported is ['en'] . Currently, only the name and description supports localization. You will also need to make a proper request and provide the associated values for the claim in the database.","title":"Language support"},{"location":"admin/auth-server/tokens/uma-rpt-token/","tags":["administration","auth-server","token","rpt-token"],"text":"Background # The UMA requesting party token (RPT) is an OAuth access token associated with the UMA grant. An RPT is unique to a requesting party, client, authorization server, resource server, and resource owner. The client uses the RPT in the Authorization header of an API request. The RPT bearer token conveys that UMA policy evaluation was successful on Auth Server. The Client may also present the RPT token while making a request to Auth Server for a new RPT, for example to up-scope or down-scope a token. For more information on UMA, see the specifications: * User-Managed Access (UMA) 2.0 Grant for OAuth 2.0 Authorization * Federated Authorization for User-Managed Access (UMA) 2.0 Server properties # umaRptAsJwt Default: False - : Reference token is the default umaRptLifetime Default: 3600 seconds - : 60 minutes introspectionAccessTokenMustHaveUmaProtectionScope Default: False - : umaGrantAccessIfNoPolicies Default: False - : umaTicketLifetime Default: 3600 seconds - : 60 minutes - Returned by the Resource Server to the Client for presentation at the UMA token endpoint. The ticket is the equivalent of the code in the OAuth code flow. umaAddScopesAutomatically Default: True - : umaPctLifetime Default: 1728000 seconds - : The PCT is a pushed claim token that references a previous claims gathering flow, so you don't have to bother the subject again for this information. umaValidateClaimToken Default: False - : umaRestrictResourceToAssociatedClient Default: False - :","title":"UMA RPT Token"},{"location":"admin/auth-server/tokens/uma-rpt-token/#background","text":"The UMA requesting party token (RPT) is an OAuth access token associated with the UMA grant. An RPT is unique to a requesting party, client, authorization server, resource server, and resource owner. The client uses the RPT in the Authorization header of an API request. The RPT bearer token conveys that UMA policy evaluation was successful on Auth Server. The Client may also present the RPT token while making a request to Auth Server for a new RPT, for example to up-scope or down-scope a token. For more information on UMA, see the specifications: * User-Managed Access (UMA) 2.0 Grant for OAuth 2.0 Authorization * Federated Authorization for User-Managed Access (UMA) 2.0","title":"Background"},{"location":"admin/auth-server/tokens/uma-rpt-token/#server-properties","text":"umaRptAsJwt Default: False - : Reference token is the default umaRptLifetime Default: 3600 seconds - : 60 minutes introspectionAccessTokenMustHaveUmaProtectionScope Default: False - : umaGrantAccessIfNoPolicies Default: False - : umaTicketLifetime Default: 3600 seconds - : 60 minutes - Returned by the Resource Server to the Client for presentation at the UMA token endpoint. The ticket is the equivalent of the code in the OAuth code flow. umaAddScopesAutomatically Default: True - : umaPctLifetime Default: 1728000 seconds - : The PCT is a pushed claim token that references a previous claims gathering flow, so you don't have to bother the subject again for this information. umaValidateClaimToken Default: False - : umaRestrictResourceToAssociatedClient Default: False - :","title":"Server properties"},{"location":"admin/auth-server/uma-features/","tags":["administration","auth-server","uma"],"text":"Overview # As a profile of OAuth 2.0 that is complementary to OpenID Connect, UMA 2 defines RESTful, JSON-based, standardized flows and constructs for coordinating the protection of APIs and web resources. UMA 2 defines interfaces between authorization servers (AS), like Gluu, and resource servers (RS) that enable centralized policy decision-making for improved service delivery, auditing, policy administration, and accountability, even in a very loosely coupled \"public API\" environment. UMA 2 does not standardize a policy expression language, enabling flexibility in policy expression and evaluation through XACML, other declarative policy languages, or procedural code as warranted by conditions. UMA 2 inherits authentication agnosticism from OAuth. It concentrates on authorization, not authentication. It has been profiled to work with OpenID Connect to gather identity claims from whoever is attempting access, and enables attribute-based (\"claims\" in OAuth2) authorization (with group-based or role-based policies a natural subset). Terminology # UMA 2 introduces new terms and enhancements of OAuth term definitions. A few important terms include: Resource Owner (RO): An entity capable of granting access to a protected resource--the \"user\" in User-Managed Access. This is typically an end-user, but it can also be non-human entity that is treated as a person for limited legal purposes, such as a corporation. Resource Server (RS): A server that hosts resources on a resource owner's behalf, registers resources for protection at an authorization server, and is capable of accepting and responding to requests for protected resources. Authorization Server (AS) * : A server that protects, on a resource owner's behalf, resources managed at a resource server. * The Janssen Authentication Server acts as an UMA AS . Learn more in the UMA 2 Core , Federated Authorization and Grant specifications.","title":"Index"},{"location":"admin/auth-server/uma-features/#overview","text":"As a profile of OAuth 2.0 that is complementary to OpenID Connect, UMA 2 defines RESTful, JSON-based, standardized flows and constructs for coordinating the protection of APIs and web resources. UMA 2 defines interfaces between authorization servers (AS), like Gluu, and resource servers (RS) that enable centralized policy decision-making for improved service delivery, auditing, policy administration, and accountability, even in a very loosely coupled \"public API\" environment. UMA 2 does not standardize a policy expression language, enabling flexibility in policy expression and evaluation through XACML, other declarative policy languages, or procedural code as warranted by conditions. UMA 2 inherits authentication agnosticism from OAuth. It concentrates on authorization, not authentication. It has been profiled to work with OpenID Connect to gather identity claims from whoever is attempting access, and enables attribute-based (\"claims\" in OAuth2) authorization (with group-based or role-based policies a natural subset).","title":"Overview"},{"location":"admin/auth-server/uma-features/#terminology","text":"UMA 2 introduces new terms and enhancements of OAuth term definitions. A few important terms include: Resource Owner (RO): An entity capable of granting access to a protected resource--the \"user\" in User-Managed Access. This is typically an end-user, but it can also be non-human entity that is treated as a person for limited legal purposes, such as a corporation. Resource Server (RS): A server that hosts resources on a resource owner's behalf, registers resources for protection at an authorization server, and is capable of accepting and responding to requests for protected resources. Authorization Server (AS) * : A server that protects, on a resource owner's behalf, resources managed at a resource server. * The Janssen Authentication Server acts as an UMA AS . Learn more in the UMA 2 Core , Federated Authorization and Grant specifications.","title":"Terminology"},{"location":"admin/auth-server/uma-features/claims-gathering-endpoint/","tags":["administration","auth-server","uma","feature","endpoint"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Claims Gathering Endpoint"},{"location":"admin/auth-server/uma-features/claims-gathering-endpoint/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/auth-server/uma-features/claims-gathering-endpoint/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/uma-features/claims-gathering-endpoint/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/auth-server/uma-features/rpt-endpoint/","tags":["administration","auth-server","uma","feature","endpoint"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"RPT Endpoint"},{"location":"admin/auth-server/uma-features/rpt-endpoint/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/auth-server/uma-features/rpt-endpoint/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/auth-server/uma-features/rpt-endpoint/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/config-guide/agama-configuration/","tags":["administration","configuration","agama"],"text":"Prerequisite: Know how to use the Janssen CLI in command-line mode Agama Developer Studio # In Janssen, You can deploy and customize agama project using commandline. To get the details of Janssen commandline feature of Agama Developer Studio, you can run this command as below: /opt/jans/jans-cli/config-cli.py --info AgamaDeveloperStudio It will show you the details of available operation-id for Agama developer studio. View Agama Developer Studio Project # You can get the details of an Agama project deployed in Janssen by the project name. Commandline for this operation as below: /opt/jans/jans-cli/config-cli.py --operation-id get-agama-dev-studio-prj-by-name --url-suffix name:\"agama-project-name\" Example: /opt/jans/jans-cli/config-cli.py --operation-id get-agama-dev-studio-prj-by-name --url-suffix name:testAuth Please wait while retrieving data ... { \"dn\": \"jansId=3a0e91a4-b79b-37c2-9df7-122247e8ed9c,ou=deployments,ou=agama,o=jans\", \"id\": \"3a0e91a4-b79b-37c2-9df7-122247e8ed9c\", \"createdAt\": 1687247278717, \"taskActive\": false, \"finishedAt\": 1687247288646, \"assets\": null, \"details\": { \"folders\": null, \"libs\": [], \"flowsError\": { \"imShakil.co.basicAuth\": null }, \"error\": null, \"projectMetadata\": { \"projectName\": \"testAuth\", \"author\": \"imShakil\", \"type\": \"community\", \"description\": \"testing authentication with janssen server\", \"version\": \"1.0.0\", \"configs\": null } }, \"baseDn\": \"jansId=3a0e91a4-b79b-37c2-9df7-122247e8ed9c,ou=deployments,ou=agama,o=jans\" } Post Agama Developer Studio Project in Janssen # Also, You can deploy agama project in Janssen through commandline. /opt/jans/jans-cli/config-cli.py --operation-id post-agama-dev-studio-prj --url-suffix name:\"agama-project-name\" Agama Flow Configuration # If you already deployed agama projects successfully in your janssen server through above operations, you can check those agama flow status with these below operations: /opt/jans/jans-cli/config-cli.py --info AgamaConfiguration Operation ID: get-agama-flows Description: Fetches all agama flow. Parameters: pattern: Search pattern [string] limit: Search size - max size of the results to return [integer] startIndex: The 1-based index of the first query result [integer] sortBy: Attribute whose value will be used to order the returned response [string] sortOrder: Order in which the sortBy param is applied. Allowed values are \"ascending\" and \"descending\" [string] includeSource: Boolean flag to indicate agama source is to be included [boolean] Operation ID: post-agama-flow Description: Create a new agama flow Schema: Flow Operation ID: get-agama-flow Description: Gets an agama flow based on Qname. Parameters: qname: Agama Flow name [string] includeSource: Boolean flag to indicate agama source is to be included [boolean] Operation ID: post-agama-flow-from-source Description: Create a new agama flow from source. Parameters: qname: Agama Flow name [string] Get Agama Flow # To get details of all the agama flows: /opt/jans/jans-cli/config-cli.py --operation-id get-agama-flows Please wait while retrieving data ... { \"start\": 0, \"totalEntriesCount\": 2, \"entriesCount\": 2, \"entries\": [ { \"dn\": \"agFlowQname=imShakil.co.basicAuth,ou=flows,ou=agama,o=jans\", \"qname\": \"imShakil.co.basicAuth\", \"revision\": 0, \"enabled\": true, \"metadata\": { \"funcName\": \"_imShakil_co_basicAuth\", \"author\": \"imShakil\", \"timestamp\": 1688453467147 }, \"baseDn\": \"agFlowQname=imShakil.co.basicAuth,ou=flows,ou=agama,o=jans\" }, { \"dn\": \"agFlowQname=mmrraju.test2.agama,ou=flows,ou=agama,o=jans\", \"qname\": \"mmrraju.test2.agama\", \"revision\": 0, \"enabled\": true, \"metadata\": { \"funcName\": \"_mmrraju_test2_agama\", \"author\": \"mmrraju\", \"timestamp\": 1688451217241 }, \"baseDn\": \"agFlowQname=mmrraju.test2.agama,ou=flows,ou=agama,o=jans\" } ] } It will display the total number of agama flows that are enabled and their list. You can get detail of an enabled agama flow by its qname . To get details through the qname of a agama flow: /opt/jans/jans-cli/config-cli.py --operation-id get-agama-flow --url-suffix qname:\"name\" qname stands for Qualified Name. You can grab that from above operation. In my case, qname for the first one of the above list is: imShakil.co.basicAuth Example : /opt/jans/jans-cli/config-cli.py --operation-id get-agama-flow --url-suffix qname:\"imShakil.co.basicAuth\" Please wait while retrieving data ... { \"dn\": \"agFlowQname=imShakil.co.basicAuth,ou=flows,ou=agama,o=jans\", \"qname\": \"imShakil.co.basicAuth\", \"revision\": 0, \"enabled\": true, \"metadata\": { \"funcName\": \"_imShakil_co_basicAuth\", \"author\": \"imShakil\", \"timestamp\": 1688453467147 }, \"baseDn\": \"agFlowQname=imShakil.co.basicAuth,ou=flows,ou=agama,o=jans\" } Create Agama Flow # To create an agama flow in janssen server, let's get the schema first as below: /opt/jans/jans-cli/config-cli.py --schema Flow > /tmp/flow.json Schema should be look like this: { \"dn\": \"string\", \"qname\": \"string\", \"transHash\": \"string\", \"revision\": 133, \"enabled\": true, \"metadata\": { \"funcName\": { \"type\": \"string\" }, \"inputs\": { \"type\": \"array\", \"items\": { \"type\": \"string\" } }, \"timeout\": { \"type\": \"integer\", \"format\": \"int32\" }, \"displayName\": { \"type\": \"string\" }, \"author\": { \"type\": \"string\" }, \"timestamp\": { \"type\": \"integer\", \"format\": \"int64\" }, \"description\": { \"type\": \"string\" }, \"properties\": { \"type\": \"object\", \"additionalProperties\": { \"type\": \"object\" } } }, \"source\": \"string\", \"transpiled\": \"string\", \"codeError\": \"string\", \"baseDn\": \"string\" } To post agama flow after modification, run this below commandline: /opt/jans/jans-cli/config-cli.py --operation-id post-agama-flow --data /tmp/flow.json It will display the server response.","title":"Agama configuration"},{"location":"admin/config-guide/agama-configuration/#agama-developer-studio","text":"In Janssen, You can deploy and customize agama project using commandline. To get the details of Janssen commandline feature of Agama Developer Studio, you can run this command as below: /opt/jans/jans-cli/config-cli.py --info AgamaDeveloperStudio It will show you the details of available operation-id for Agama developer studio.","title":"Agama Developer Studio"},{"location":"admin/config-guide/agama-configuration/#view-agama-developer-studio-project","text":"You can get the details of an Agama project deployed in Janssen by the project name. Commandline for this operation as below: /opt/jans/jans-cli/config-cli.py --operation-id get-agama-dev-studio-prj-by-name --url-suffix name:\"agama-project-name\" Example: /opt/jans/jans-cli/config-cli.py --operation-id get-agama-dev-studio-prj-by-name --url-suffix name:testAuth Please wait while retrieving data ... { \"dn\": \"jansId=3a0e91a4-b79b-37c2-9df7-122247e8ed9c,ou=deployments,ou=agama,o=jans\", \"id\": \"3a0e91a4-b79b-37c2-9df7-122247e8ed9c\", \"createdAt\": 1687247278717, \"taskActive\": false, \"finishedAt\": 1687247288646, \"assets\": null, \"details\": { \"folders\": null, \"libs\": [], \"flowsError\": { \"imShakil.co.basicAuth\": null }, \"error\": null, \"projectMetadata\": { \"projectName\": \"testAuth\", \"author\": \"imShakil\", \"type\": \"community\", \"description\": \"testing authentication with janssen server\", \"version\": \"1.0.0\", \"configs\": null } }, \"baseDn\": \"jansId=3a0e91a4-b79b-37c2-9df7-122247e8ed9c,ou=deployments,ou=agama,o=jans\" }","title":"View Agama Developer Studio Project"},{"location":"admin/config-guide/agama-configuration/#post-agama-developer-studio-project-in-janssen","text":"Also, You can deploy agama project in Janssen through commandline. /opt/jans/jans-cli/config-cli.py --operation-id post-agama-dev-studio-prj --url-suffix name:\"agama-project-name\"","title":"Post Agama Developer Studio Project in Janssen"},{"location":"admin/config-guide/agama-configuration/#agama-flow-configuration","text":"If you already deployed agama projects successfully in your janssen server through above operations, you can check those agama flow status with these below operations: /opt/jans/jans-cli/config-cli.py --info AgamaConfiguration Operation ID: get-agama-flows Description: Fetches all agama flow. Parameters: pattern: Search pattern [string] limit: Search size - max size of the results to return [integer] startIndex: The 1-based index of the first query result [integer] sortBy: Attribute whose value will be used to order the returned response [string] sortOrder: Order in which the sortBy param is applied. Allowed values are \"ascending\" and \"descending\" [string] includeSource: Boolean flag to indicate agama source is to be included [boolean] Operation ID: post-agama-flow Description: Create a new agama flow Schema: Flow Operation ID: get-agama-flow Description: Gets an agama flow based on Qname. Parameters: qname: Agama Flow name [string] includeSource: Boolean flag to indicate agama source is to be included [boolean] Operation ID: post-agama-flow-from-source Description: Create a new agama flow from source. Parameters: qname: Agama Flow name [string]","title":"Agama Flow Configuration"},{"location":"admin/config-guide/agama-configuration/#get-agama-flow","text":"To get details of all the agama flows: /opt/jans/jans-cli/config-cli.py --operation-id get-agama-flows Please wait while retrieving data ... { \"start\": 0, \"totalEntriesCount\": 2, \"entriesCount\": 2, \"entries\": [ { \"dn\": \"agFlowQname=imShakil.co.basicAuth,ou=flows,ou=agama,o=jans\", \"qname\": \"imShakil.co.basicAuth\", \"revision\": 0, \"enabled\": true, \"metadata\": { \"funcName\": \"_imShakil_co_basicAuth\", \"author\": \"imShakil\", \"timestamp\": 1688453467147 }, \"baseDn\": \"agFlowQname=imShakil.co.basicAuth,ou=flows,ou=agama,o=jans\" }, { \"dn\": \"agFlowQname=mmrraju.test2.agama,ou=flows,ou=agama,o=jans\", \"qname\": \"mmrraju.test2.agama\", \"revision\": 0, \"enabled\": true, \"metadata\": { \"funcName\": \"_mmrraju_test2_agama\", \"author\": \"mmrraju\", \"timestamp\": 1688451217241 }, \"baseDn\": \"agFlowQname=mmrraju.test2.agama,ou=flows,ou=agama,o=jans\" } ] } It will display the total number of agama flows that are enabled and their list. You can get detail of an enabled agama flow by its qname . To get details through the qname of a agama flow: /opt/jans/jans-cli/config-cli.py --operation-id get-agama-flow --url-suffix qname:\"name\" qname stands for Qualified Name. You can grab that from above operation. In my case, qname for the first one of the above list is: imShakil.co.basicAuth Example : /opt/jans/jans-cli/config-cli.py --operation-id get-agama-flow --url-suffix qname:\"imShakil.co.basicAuth\" Please wait while retrieving data ... { \"dn\": \"agFlowQname=imShakil.co.basicAuth,ou=flows,ou=agama,o=jans\", \"qname\": \"imShakil.co.basicAuth\", \"revision\": 0, \"enabled\": true, \"metadata\": { \"funcName\": \"_imShakil_co_basicAuth\", \"author\": \"imShakil\", \"timestamp\": 1688453467147 }, \"baseDn\": \"agFlowQname=imShakil.co.basicAuth,ou=flows,ou=agama,o=jans\" }","title":"Get Agama Flow"},{"location":"admin/config-guide/agama-configuration/#create-agama-flow","text":"To create an agama flow in janssen server, let's get the schema first as below: /opt/jans/jans-cli/config-cli.py --schema Flow > /tmp/flow.json Schema should be look like this: { \"dn\": \"string\", \"qname\": \"string\", \"transHash\": \"string\", \"revision\": 133, \"enabled\": true, \"metadata\": { \"funcName\": { \"type\": \"string\" }, \"inputs\": { \"type\": \"array\", \"items\": { \"type\": \"string\" } }, \"timeout\": { \"type\": \"integer\", \"format\": \"int32\" }, \"displayName\": { \"type\": \"string\" }, \"author\": { \"type\": \"string\" }, \"timestamp\": { \"type\": \"integer\", \"format\": \"int64\" }, \"description\": { \"type\": \"string\" }, \"properties\": { \"type\": \"object\", \"additionalProperties\": { \"type\": \"object\" } } }, \"source\": \"string\", \"transpiled\": \"string\", \"codeError\": \"string\", \"baseDn\": \"string\" } To post agama flow after modification, run this below commandline: /opt/jans/jans-cli/config-cli.py --operation-id post-agama-flow --data /tmp/flow.json It will display the server response.","title":"Create Agama Flow"},{"location":"admin/config-guide/attribute-configuration/","tags":["administration","configuration","attributes"],"text":"Attribute # First thing, let's get the information for Attribute : /opt/jans/jans-cli/config-cli.py --info Attribute In return, we get a list of Operations ID as below: Operation ID: get-attributes Description: Gets a list of Gluu attributes. Parameters: limit: Search size - max size of the results to return [integer] pattern: Search pattern [string] status: Status of the attribute [string] startIndex: The 1-based index of the first query result [integer] sortBy: Attribute whose value will be used to order the returned response [string] sortOrder: Order in which the sortBy param is applied. Allowed values are \"ascending\" and \"descending\" [string] fieldValuePair: Field and value pair for seraching [string] Operation ID: put-attributes Description: Updates an existing attribute Schema: JansAttribute Operation ID: post-attributes Description: Adds a new attribute Schema: JansAttribute Operation ID: get-attributes-by-inum Description: Gets an attribute based on inum Parameters: inum: Attribute Id [string] Operation ID: delete-attributes-by-inum Description: Deletes an attribute based on inum Parameters: inum: Attribute Id [string] Operation ID: patch-attributes-by-inum Description: Partially modify a JansAttribute Parameters: inum: Attribute Id [string] Schema: Array of PatchRequest To get sample schema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema PatchRequest We have discussed here about each of this operations ID with few examples to understand how these really works. Table of Contents # Attribute Get Attributes Creating an Attribute Updating an Attribute Get Attribute by inum Delete Attributes Patch Attributes Get Attributes # Prerequisite: Know how to use the Janssen CLI in command-line mode As we know, Attributes are individual pieces of user data, like uid or email , that are required by applications in order to identify a user and grant access to protect resources. The user attributes that are available in your Janssen Server can be found by using this operation-ID. If we look at the description below: Operation ID: get-attributes Description: Gets a list of Gluu attributes. Parameters: limit: Search size - max size of the results to return [integer] pattern: Search pattern [string] status: Status of the attribute [string] startIndex: The 1-based index of the first query result [integer] sortBy: Attribute whose value will be used to order the returned response [string] sortOrder: Order in which the sortBy param is applied. Allowed values are \"ascending\" and \"descending\" [string] fieldValuePair: Field and value pair for seraching [string] To get all the attributes without any arguments, run the following command: /opt/jans/jans-cli/config-cli.py --operation-id get-attributes To get attributes with passing the arguments, let's retrieve randomly limit:5: /opt/jans/jans-cli/config-cli.py --operation-id get-attributes --endpoint-args limit:1 It will return only one attribute details randomly: Getting access token for scope https://jans.io/oauth/config/attributes.readonly Calling with params limit=1 { \"start\": 0, \"totalEntriesCount\": 71, \"entriesCount\": 1, \"entries\": [ { \"dn\": \"inum=29DA,ou=attributes,o=jans\", \"selected\": false, \"inum\": \"29DA\", \"name\": \"inum\", \"displayName\": \"Inum\", \"description\": \"XRI i-number, persistent non-reassignable identifier\", \"origin\": \"jansPerson\", \"dataType\": \"string\", \"editType\": [ \"admin\" ], \"viewType\": [ \"user\", \"admin\" ], \"claimName\": \"inum\", \"status\": \"active\", \"saml1Uri\": \"urn:mace:dir:attribute-def:inum\", \"saml2Uri\": \"urn:oid:1.3.6.1.4.1.48710.1.3.117\", \"urn\": \"urn:jans:dir:attribute-def:inum\", \"oxMultiValuedAttribute\": false, \"custom\": false, \"requred\": false, \"adminCanAccess\": true, \"adminCanView\": true, \"adminCanEdit\": true, \"userCanAccess\": true, \"userCanView\": true, \"userCanEdit\": false, \"whitePagesCanView\": false, \"baseDn\": \"inum=29DA,ou=attributes,o=jans\" } ] } To get attributes with pattern & status : /opt/jans/jans-cli/config-cli.py --operation-id get-attributes --endpoint-args limit:3,pattern:profile,status:ACTIVE In return, we get a list of attribute that are matched with the given pattern and status : Please wait while retrieving data ... { \"start\": 0, \"totalEntriesCount\": 2, \"entriesCount\": 2, \"entries\": [ { \"dn\": \"inum=64A0,ou=attributes,o=jans\", \"selected\": false, \"inum\": \"64A0\", \"name\": \"profile\", \"displayName\": \"Profile URL\", \"description\": \"URL of the End-User's profile page. The contents of this Web page SHOULD be about the End-User.\", \"origin\": \"jansPerson\", \"dataType\": \"string\", \"editType\": [ \"user\", \"admin\" ], \"viewType\": [ \"user\", \"admin\" ], \"claimName\": \"profile\", \"status\": \"active\", \"saml1Uri\": \"urn:mace:dir:attribute-def:profile\", \"saml2Uri\": \"urn:oid:1.3.6.1.4.1.48710.1.3.321\", \"urn\": \"http://openid.net/specs/openid-connect-core-1_0.html/StandardClaims/profile\", \"oxMultiValuedAttribute\": false, \"custom\": false, \"requred\": false, \"adminCanAccess\": true, \"adminCanView\": true, \"adminCanEdit\": true, \"userCanAccess\": true, \"userCanView\": true, \"userCanEdit\": true, \"whitePagesCanView\": false, \"baseDn\": \"inum=64A0,ou=attributes,o=jans\" }, { \"dn\": \"inum=EC3A,ou=attributes,o=jans\", \"selected\": false, \"inum\": \"EC3A\", \"name\": \"picture\", \"displayName\": \"Picture URL\", \"description\": \"URL of the End-User's profile picture\", \"origin\": \"jansPerson\", \"dataType\": \"string\", \"editType\": [ \"user\", \"admin\" ], \"viewType\": [ \"user\", \"admin\" ], \"claimName\": \"picture\", \"status\": \"active\", \"saml1Uri\": \"urn:mace:dir:attribute-def:picture\", \"saml2Uri\": \"urn:oid:1.3.6.1.4.1.48710.1.3.322\", \"urn\": \"http://openid.net/specs/openid-connect-core-1_0.html/StandardClaims/picture\", \"oxMultiValuedAttribute\": false, \"custom\": false, \"requred\": false, \"adminCanAccess\": true, \"adminCanView\": true, \"adminCanEdit\": true, \"userCanAccess\": true, \"userCanView\": true, \"userCanEdit\": true, \"whitePagesCanView\": false, \"baseDn\": \"inum=EC3A,ou=attributes,o=jans\" } ] } Creating an Attribute # To create SSO for certain applications, you may need to add custom attributes to your Janssen Server. Custom attributes can be added by using this operation-ID. It has a schema file where it's defined: the properties it needs to be filled to create a new custom attribute. Operation ID: post-attributes Description: Adds a new attribute Schema: JansAttribute Before adding a new attribute, let's get sample schema : /opt/jans/jans-cli/config-cli.py --schema JansAttribute > /tmp/attribute.json It will return as below: { \"dn\" : \"string\" , \"selected\" : false , \"inum\" : \"string\" , \"sourceAttribute\" : \"string\" , \"nameIdType\" : \"string\" , \"name\" : \"string\" , \"displayName\" : \"string\" , \"description\" : \"string\" , \"origin\" : \"string\" , \"dataType\" : \"certificate\" , \"editType\" : [ \"manager\" ], \"viewType\" : [ \"user\" ], \"usageType\" : [ \"openid\" ], \"claimName\" : \"string\" , \"seeAlso\" : \"string\" , \"status\" : \"inactive\" , \"saml1Uri\" : \"string\" , \"saml2Uri\" : \"string\" , \"urn\" : \"string\" , \"scimCustomAttr\" : true , \"oxMultiValuedAttribute\" : true , \"jansHideOnDiscovery\" : true , \"custom\" : false , \"requred\" : true , \"attributeValidation\" : { \"minLength\" : { \"type\" : \"integer\" , \"format\" : \"int32\" }, \"maxLength\" : { \"type\" : \"integer\" , \"format\" : \"int32\" }, \"regexp\" : { \"type\" : \"string\" } }, \"tooltip\" : \"string\" , \"whitePagesCanView\" : false , \"adminCanView\" : true , \"userCanAccess\" : false , \"userCanView\" : true , \"adminCanAccess\" : false , \"adminCanEdit\" : false , \"userCanEdit\" : true , \"baseDn\" : \"string\" } Modify it to update attribute name , display name , view type : nano /tmp/attribute.json Now, let's add this attribute using post-attributes : /opt/jans/jans-cli/config-cli.py --operation-id post-attributes --data /tmp/attribute.json It will create a new attribute into the Attribute list with updated inum & dn : { \"dn\" : \"inum=0272b98e-0ead-43e9-94eb-4af9548af97d,ou=attributes,o=jans\" , \"selected\" : false , \"inum\" : \"0272b98e-0ead-43e9-94eb-4af9548af97d\" , \"nameIdType\" : \"string\" , \"name\" : \"testAttribute\" , \"displayName\" : \"testAttribute\" , \"description\" : \"testAttribute\" , \"dataType\" : \"certificate\" , \"editType\" : [ \"manager\" ], \"viewType\" : [ \"user\" ], \"usageType\" : [ \"openid\" ], \"status\" : \"inactive\" , \"scimCustomAttr\" : true , \"oxMultiValuedAttribute\" : true , \"jansHideOnDiscovery\" : true , \"custom\" : false , \"requred\" : false , \"tooltip\" : \"string\" , \"adminCanAccess\" : false , \"adminCanView\" : false , \"adminCanEdit\" : false , \"userCanAccess\" : true , \"userCanView\" : true , \"userCanEdit\" : false , \"whitePagesCanView\" : false , \"baseDn\" : \"inum=0272b98e-0ead-43e9-94eb-4af9548af97d,ou=attributes,o=jans\" } Updating an Attribute # This operation-id can be used to update an existing attribute information. The Janssen Server administrator can make changes to attributes, such as changing their status to active/inactive by using this operation-ID. Let's look at the schema: /opt/jans/jans-cli/config-cli.py --schema JansAttribute > /tmp/attrib.json You must see the similar schema while performed in post-attributes operation. To update an existing attribute, we have to ensure following properties in the schema file. In our case, I have modified the schema file as below: { \"dn\": \"inum=b691f2ab-a7db-4725-b85b-9961575b441f,ou=attributes,o=jans\", \"inum\": \"b691f2ab-a7db-4725-b85b-9961575b441f\", \"selected\": true, \"name\": \"testAttribute\", \"display_name\": \"testAttribute\", \"description\": \"testing put-attribute\", \"data_type\": \"STRING\", \"status\": \"ACTIVE\", \"edit_type\": [\"ADMIN\", \"OWNER\"], \"view_type\": [\"ADMIN\", \"OWNER\", \"USER\"] } Now if we run the below command line: /opt/jans/jans-cli/config-cli.py --operation-id put-attributes --data /tmp/attrb.json Getting access token for scope https://jans.io/oauth/config/attributes.write Server Response: { \"dn\": \"inum=b691f2ab-a7db-4725-b85b-9961575b441f,ou=attributes,o=jans\", \"inum\": \"b691f2ab-a7db-4725-b85b-9961575b441f\", \"selected\": false, \"name\": \"testAttribute\", \"displayName\": \"testAttribute\", \"description\": \"testing put-attribute\", \"dataType\": \"STRING\", \"status\": \"ACTIVE\", \"lifetime\": null, \"sourceAttribute\": null, \"salt\": null, \"nameIdType\": null, \"origin\": null, \"editType\": [ \"ADMIN\", \"OWNER\" ], \"viewType\": [ \"ADMIN\", \"OWNER\", \"USER\" ], \"usageType\": null, \"claimName\": null, \"seeAlso\": null, \"saml1Uri\": null, \"saml2Uri\": null, \"urn\": null, \"scimCustomAttr\": null, \"oxMultiValuedAttribute\": false, \"custom\": false, \"requred\": false, \"attributeValidation\": null, \"tooltip\": null, \"jansHideOnDiscovery\": null } It just replace the previous value with new one. Get Attribute by inum # As we know, There are a lot of attributes available in the Janssen Server including custom attributes as well. You may want to know details information for a single attribute uniquely identified by inum . Getting an attribute information by using its inum is pretty simple. /opt/jans/jans-cli/config-cli.py --operation-id get-attributes-by-inum --url-suffix inum:attribute-iunm-value It will show all details information of the selected Attribute as below example. /opt/jans/jans-cli/config-cli.py --operation-id get-attributes-by-inum --url-suffix inum:b691f2ab-a7db-4725-b85b-9961575b441f Getting access token for scope https://jans.io/oauth/config/attributes.readonly { \"dn\": \"inum=b691f2ab-a7db-4725-b85b-9961575b441f,ou=attributes,o=jans\", \"inum\": \"b691f2ab-a7db-4725-b85b-9961575b441f\", \"selected\": false, \"name\": \"testAttribute\", \"displayName\": \"testAttribute\", \"description\": \"testing put-attribute\", \"dataType\": \"STRING\", \"status\": \"ACTIVE\", \"lifetime\": null, \"sourceAttribute\": null, \"salt\": null, \"nameIdType\": null, \"origin\": null, \"editType\": [ \"ADMIN\", \"OWNER\" ], \"viewType\": [ \"ADMIN\", \"OWNER\", \"USER\" ], \"usageType\": null, \"claimName\": null, \"seeAlso\": null, \"saml1Uri\": null, \"saml2Uri\": null, \"urn\": null, \"scimCustomAttr\": null, \"oxMultiValuedAttribute\": false, \"custom\": false, \"requred\": false, \"attributeValidation\": null, \"tooltip\": null, \"jansHideOnDiscovery\": null } Delete Attributes # For any reason, If it needs to delete any attribute, you can do that simply using its inum value. See below example, just change the inum value with one that you want to delete. /opt/jans/jans-cli/config-cli.py --operation-id delete-attributes-by-inum --url-suffix inum:b691f2ab-a7db-4725-b85b-9961575b441f Patch Attributes # This operation can also used for updating an existing attribute by using its inum value. Operation ID: patch-attributes-by-inum Description: Partially modify a JansAttribute. url-suffix: inum Schema: Array of PatchRequest If we look at the description, we see that there is a schema file. Let's get the schema file with below command: /opt/jans/jans-cli/config-cli.py --schema PatchRequest > /tmp/patch.json # cat /tmp/patch.json { \"op\": \"add\", \"path\": \"string\", \"value\": {} } Let's modify this schema file to change the status of an attribute as below: In the above image, added two tasks. To know more about how we can modify this schema file to perform a specific task, follow this link: patch-request-schema Let's update an attribute by its inum value. In our case, inum : 6EEB. Before patching the selected attribute, you can check its properties using get-attributes-by-inum operation. Before patching the attribute, its properties are: { \"dn\": \"inum=6EEB,ou=attributes,o=jans\", \"inum\": \"6EEB\", \"selected\": false, \"name\": \"l\", \"displayName\": \"City\", \"description\": \"City\", \"dataType\": \"STRING\", \"status\": \"INACTIVE\", \"lifetime\": null, \"sourceAttribute\": null, \"salt\": null, \"nameIdType\": null, \"origin\": \"jansCustomPerson\", \"editType\": [ \"USER\", \"ADMIN\" ], \"viewType\": [ \"USER\", \"ADMIN\" ], \"usageType\": null, \"claimName\": \"locality\", \"seeAlso\": null, \"saml1Uri\": \"urn:mace:dir:attribute-def:l\", \"saml2Uri\": \"urn:oid:2.5.4.7\", \"urn\": \"urn:mace:dir:attribute-def:l\", \"scimCustomAttr\": null, \"oxMultiValuedAttribute\": false, \"custom\": false, \"requred\": false, \"attributeValidation\": null, \"tooltip\": null, \"jansHideOnDiscovery\": null } According to the schema file, There should be two changes, status and jansHideOnDiscovery . Let's perform the operation: /opt/jans/jans-cli/config-cli.py --operation-id patch-attributes-by-inum --url-suffix inum:6EEB --data /tmp/patch.json The updated attribute looks like: Getting access token for scope https://jans.io/oauth/config/attributes.write Server Response: { \"dn\": \"inum=6EEB,ou=attributes,o=jans\", \"inum\": \"6EEB\", \"selected\": false, \"name\": \"l\", \"displayName\": \"City\", \"description\": \"City\", \"dataType\": \"STRING\", \"status\": \"ACTIVE\", \"lifetime\": null, \"sourceAttribute\": null, \"salt\": null, \"nameIdType\": null, \"origin\": \"jansCustomPerson\", \"editType\": [ \"USER\", \"ADMIN\" ], \"viewType\": [ \"USER\", \"ADMIN\" ], \"usageType\": null, \"claimName\": \"locality\", \"seeAlso\": null, \"saml1Uri\": \"urn:mace:dir:attribute-def:l\", \"saml2Uri\": \"urn:oid:2.5.4.7\", \"urn\": \"urn:mace:dir:attribute-def:l\", \"scimCustomAttr\": null, \"oxMultiValuedAttribute\": false, \"custom\": false, \"requred\": false, \"attributeValidation\": null, \"tooltip\": null, \"jansHideOnDiscovery\": true } As you see, there are two changes.","title":"Attribute"},{"location":"admin/config-guide/attribute-configuration/#attribute","text":"First thing, let's get the information for Attribute : /opt/jans/jans-cli/config-cli.py --info Attribute In return, we get a list of Operations ID as below: Operation ID: get-attributes Description: Gets a list of Gluu attributes. Parameters: limit: Search size - max size of the results to return [integer] pattern: Search pattern [string] status: Status of the attribute [string] startIndex: The 1-based index of the first query result [integer] sortBy: Attribute whose value will be used to order the returned response [string] sortOrder: Order in which the sortBy param is applied. Allowed values are \"ascending\" and \"descending\" [string] fieldValuePair: Field and value pair for seraching [string] Operation ID: put-attributes Description: Updates an existing attribute Schema: JansAttribute Operation ID: post-attributes Description: Adds a new attribute Schema: JansAttribute Operation ID: get-attributes-by-inum Description: Gets an attribute based on inum Parameters: inum: Attribute Id [string] Operation ID: delete-attributes-by-inum Description: Deletes an attribute based on inum Parameters: inum: Attribute Id [string] Operation ID: patch-attributes-by-inum Description: Partially modify a JansAttribute Parameters: inum: Attribute Id [string] Schema: Array of PatchRequest To get sample schema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema PatchRequest We have discussed here about each of this operations ID with few examples to understand how these really works.","title":"Attribute"},{"location":"admin/config-guide/attribute-configuration/#table-of-contents","text":"Attribute Get Attributes Creating an Attribute Updating an Attribute Get Attribute by inum Delete Attributes Patch Attributes","title":"Table of Contents"},{"location":"admin/config-guide/attribute-configuration/#get-attributes","text":"Prerequisite: Know how to use the Janssen CLI in command-line mode As we know, Attributes are individual pieces of user data, like uid or email , that are required by applications in order to identify a user and grant access to protect resources. The user attributes that are available in your Janssen Server can be found by using this operation-ID. If we look at the description below: Operation ID: get-attributes Description: Gets a list of Gluu attributes. Parameters: limit: Search size - max size of the results to return [integer] pattern: Search pattern [string] status: Status of the attribute [string] startIndex: The 1-based index of the first query result [integer] sortBy: Attribute whose value will be used to order the returned response [string] sortOrder: Order in which the sortBy param is applied. Allowed values are \"ascending\" and \"descending\" [string] fieldValuePair: Field and value pair for seraching [string] To get all the attributes without any arguments, run the following command: /opt/jans/jans-cli/config-cli.py --operation-id get-attributes To get attributes with passing the arguments, let's retrieve randomly limit:5: /opt/jans/jans-cli/config-cli.py --operation-id get-attributes --endpoint-args limit:1 It will return only one attribute details randomly: Getting access token for scope https://jans.io/oauth/config/attributes.readonly Calling with params limit=1 { \"start\": 0, \"totalEntriesCount\": 71, \"entriesCount\": 1, \"entries\": [ { \"dn\": \"inum=29DA,ou=attributes,o=jans\", \"selected\": false, \"inum\": \"29DA\", \"name\": \"inum\", \"displayName\": \"Inum\", \"description\": \"XRI i-number, persistent non-reassignable identifier\", \"origin\": \"jansPerson\", \"dataType\": \"string\", \"editType\": [ \"admin\" ], \"viewType\": [ \"user\", \"admin\" ], \"claimName\": \"inum\", \"status\": \"active\", \"saml1Uri\": \"urn:mace:dir:attribute-def:inum\", \"saml2Uri\": \"urn:oid:1.3.6.1.4.1.48710.1.3.117\", \"urn\": \"urn:jans:dir:attribute-def:inum\", \"oxMultiValuedAttribute\": false, \"custom\": false, \"requred\": false, \"adminCanAccess\": true, \"adminCanView\": true, \"adminCanEdit\": true, \"userCanAccess\": true, \"userCanView\": true, \"userCanEdit\": false, \"whitePagesCanView\": false, \"baseDn\": \"inum=29DA,ou=attributes,o=jans\" } ] } To get attributes with pattern & status : /opt/jans/jans-cli/config-cli.py --operation-id get-attributes --endpoint-args limit:3,pattern:profile,status:ACTIVE In return, we get a list of attribute that are matched with the given pattern and status : Please wait while retrieving data ... { \"start\": 0, \"totalEntriesCount\": 2, \"entriesCount\": 2, \"entries\": [ { \"dn\": \"inum=64A0,ou=attributes,o=jans\", \"selected\": false, \"inum\": \"64A0\", \"name\": \"profile\", \"displayName\": \"Profile URL\", \"description\": \"URL of the End-User's profile page. The contents of this Web page SHOULD be about the End-User.\", \"origin\": \"jansPerson\", \"dataType\": \"string\", \"editType\": [ \"user\", \"admin\" ], \"viewType\": [ \"user\", \"admin\" ], \"claimName\": \"profile\", \"status\": \"active\", \"saml1Uri\": \"urn:mace:dir:attribute-def:profile\", \"saml2Uri\": \"urn:oid:1.3.6.1.4.1.48710.1.3.321\", \"urn\": \"http://openid.net/specs/openid-connect-core-1_0.html/StandardClaims/profile\", \"oxMultiValuedAttribute\": false, \"custom\": false, \"requred\": false, \"adminCanAccess\": true, \"adminCanView\": true, \"adminCanEdit\": true, \"userCanAccess\": true, \"userCanView\": true, \"userCanEdit\": true, \"whitePagesCanView\": false, \"baseDn\": \"inum=64A0,ou=attributes,o=jans\" }, { \"dn\": \"inum=EC3A,ou=attributes,o=jans\", \"selected\": false, \"inum\": \"EC3A\", \"name\": \"picture\", \"displayName\": \"Picture URL\", \"description\": \"URL of the End-User's profile picture\", \"origin\": \"jansPerson\", \"dataType\": \"string\", \"editType\": [ \"user\", \"admin\" ], \"viewType\": [ \"user\", \"admin\" ], \"claimName\": \"picture\", \"status\": \"active\", \"saml1Uri\": \"urn:mace:dir:attribute-def:picture\", \"saml2Uri\": \"urn:oid:1.3.6.1.4.1.48710.1.3.322\", \"urn\": \"http://openid.net/specs/openid-connect-core-1_0.html/StandardClaims/picture\", \"oxMultiValuedAttribute\": false, \"custom\": false, \"requred\": false, \"adminCanAccess\": true, \"adminCanView\": true, \"adminCanEdit\": true, \"userCanAccess\": true, \"userCanView\": true, \"userCanEdit\": true, \"whitePagesCanView\": false, \"baseDn\": \"inum=EC3A,ou=attributes,o=jans\" } ] }","title":"Get Attributes"},{"location":"admin/config-guide/attribute-configuration/#creating-an-attribute","text":"To create SSO for certain applications, you may need to add custom attributes to your Janssen Server. Custom attributes can be added by using this operation-ID. It has a schema file where it's defined: the properties it needs to be filled to create a new custom attribute. Operation ID: post-attributes Description: Adds a new attribute Schema: JansAttribute Before adding a new attribute, let's get sample schema : /opt/jans/jans-cli/config-cli.py --schema JansAttribute > /tmp/attribute.json It will return as below: { \"dn\" : \"string\" , \"selected\" : false , \"inum\" : \"string\" , \"sourceAttribute\" : \"string\" , \"nameIdType\" : \"string\" , \"name\" : \"string\" , \"displayName\" : \"string\" , \"description\" : \"string\" , \"origin\" : \"string\" , \"dataType\" : \"certificate\" , \"editType\" : [ \"manager\" ], \"viewType\" : [ \"user\" ], \"usageType\" : [ \"openid\" ], \"claimName\" : \"string\" , \"seeAlso\" : \"string\" , \"status\" : \"inactive\" , \"saml1Uri\" : \"string\" , \"saml2Uri\" : \"string\" , \"urn\" : \"string\" , \"scimCustomAttr\" : true , \"oxMultiValuedAttribute\" : true , \"jansHideOnDiscovery\" : true , \"custom\" : false , \"requred\" : true , \"attributeValidation\" : { \"minLength\" : { \"type\" : \"integer\" , \"format\" : \"int32\" }, \"maxLength\" : { \"type\" : \"integer\" , \"format\" : \"int32\" }, \"regexp\" : { \"type\" : \"string\" } }, \"tooltip\" : \"string\" , \"whitePagesCanView\" : false , \"adminCanView\" : true , \"userCanAccess\" : false , \"userCanView\" : true , \"adminCanAccess\" : false , \"adminCanEdit\" : false , \"userCanEdit\" : true , \"baseDn\" : \"string\" } Modify it to update attribute name , display name , view type : nano /tmp/attribute.json Now, let's add this attribute using post-attributes : /opt/jans/jans-cli/config-cli.py --operation-id post-attributes --data /tmp/attribute.json It will create a new attribute into the Attribute list with updated inum & dn : { \"dn\" : \"inum=0272b98e-0ead-43e9-94eb-4af9548af97d,ou=attributes,o=jans\" , \"selected\" : false , \"inum\" : \"0272b98e-0ead-43e9-94eb-4af9548af97d\" , \"nameIdType\" : \"string\" , \"name\" : \"testAttribute\" , \"displayName\" : \"testAttribute\" , \"description\" : \"testAttribute\" , \"dataType\" : \"certificate\" , \"editType\" : [ \"manager\" ], \"viewType\" : [ \"user\" ], \"usageType\" : [ \"openid\" ], \"status\" : \"inactive\" , \"scimCustomAttr\" : true , \"oxMultiValuedAttribute\" : true , \"jansHideOnDiscovery\" : true , \"custom\" : false , \"requred\" : false , \"tooltip\" : \"string\" , \"adminCanAccess\" : false , \"adminCanView\" : false , \"adminCanEdit\" : false , \"userCanAccess\" : true , \"userCanView\" : true , \"userCanEdit\" : false , \"whitePagesCanView\" : false , \"baseDn\" : \"inum=0272b98e-0ead-43e9-94eb-4af9548af97d,ou=attributes,o=jans\" }","title":"Creating an Attribute"},{"location":"admin/config-guide/attribute-configuration/#updating-an-attribute","text":"This operation-id can be used to update an existing attribute information. The Janssen Server administrator can make changes to attributes, such as changing their status to active/inactive by using this operation-ID. Let's look at the schema: /opt/jans/jans-cli/config-cli.py --schema JansAttribute > /tmp/attrib.json You must see the similar schema while performed in post-attributes operation. To update an existing attribute, we have to ensure following properties in the schema file. In our case, I have modified the schema file as below: { \"dn\": \"inum=b691f2ab-a7db-4725-b85b-9961575b441f,ou=attributes,o=jans\", \"inum\": \"b691f2ab-a7db-4725-b85b-9961575b441f\", \"selected\": true, \"name\": \"testAttribute\", \"display_name\": \"testAttribute\", \"description\": \"testing put-attribute\", \"data_type\": \"STRING\", \"status\": \"ACTIVE\", \"edit_type\": [\"ADMIN\", \"OWNER\"], \"view_type\": [\"ADMIN\", \"OWNER\", \"USER\"] } Now if we run the below command line: /opt/jans/jans-cli/config-cli.py --operation-id put-attributes --data /tmp/attrb.json Getting access token for scope https://jans.io/oauth/config/attributes.write Server Response: { \"dn\": \"inum=b691f2ab-a7db-4725-b85b-9961575b441f,ou=attributes,o=jans\", \"inum\": \"b691f2ab-a7db-4725-b85b-9961575b441f\", \"selected\": false, \"name\": \"testAttribute\", \"displayName\": \"testAttribute\", \"description\": \"testing put-attribute\", \"dataType\": \"STRING\", \"status\": \"ACTIVE\", \"lifetime\": null, \"sourceAttribute\": null, \"salt\": null, \"nameIdType\": null, \"origin\": null, \"editType\": [ \"ADMIN\", \"OWNER\" ], \"viewType\": [ \"ADMIN\", \"OWNER\", \"USER\" ], \"usageType\": null, \"claimName\": null, \"seeAlso\": null, \"saml1Uri\": null, \"saml2Uri\": null, \"urn\": null, \"scimCustomAttr\": null, \"oxMultiValuedAttribute\": false, \"custom\": false, \"requred\": false, \"attributeValidation\": null, \"tooltip\": null, \"jansHideOnDiscovery\": null } It just replace the previous value with new one.","title":"Updating an Attribute"},{"location":"admin/config-guide/attribute-configuration/#get-attribute-by-inum","text":"As we know, There are a lot of attributes available in the Janssen Server including custom attributes as well. You may want to know details information for a single attribute uniquely identified by inum . Getting an attribute information by using its inum is pretty simple. /opt/jans/jans-cli/config-cli.py --operation-id get-attributes-by-inum --url-suffix inum:attribute-iunm-value It will show all details information of the selected Attribute as below example. /opt/jans/jans-cli/config-cli.py --operation-id get-attributes-by-inum --url-suffix inum:b691f2ab-a7db-4725-b85b-9961575b441f Getting access token for scope https://jans.io/oauth/config/attributes.readonly { \"dn\": \"inum=b691f2ab-a7db-4725-b85b-9961575b441f,ou=attributes,o=jans\", \"inum\": \"b691f2ab-a7db-4725-b85b-9961575b441f\", \"selected\": false, \"name\": \"testAttribute\", \"displayName\": \"testAttribute\", \"description\": \"testing put-attribute\", \"dataType\": \"STRING\", \"status\": \"ACTIVE\", \"lifetime\": null, \"sourceAttribute\": null, \"salt\": null, \"nameIdType\": null, \"origin\": null, \"editType\": [ \"ADMIN\", \"OWNER\" ], \"viewType\": [ \"ADMIN\", \"OWNER\", \"USER\" ], \"usageType\": null, \"claimName\": null, \"seeAlso\": null, \"saml1Uri\": null, \"saml2Uri\": null, \"urn\": null, \"scimCustomAttr\": null, \"oxMultiValuedAttribute\": false, \"custom\": false, \"requred\": false, \"attributeValidation\": null, \"tooltip\": null, \"jansHideOnDiscovery\": null }","title":"Get Attribute by inum"},{"location":"admin/config-guide/attribute-configuration/#delete-attributes","text":"For any reason, If it needs to delete any attribute, you can do that simply using its inum value. See below example, just change the inum value with one that you want to delete. /opt/jans/jans-cli/config-cli.py --operation-id delete-attributes-by-inum --url-suffix inum:b691f2ab-a7db-4725-b85b-9961575b441f","title":"Delete Attributes"},{"location":"admin/config-guide/attribute-configuration/#patch-attributes","text":"This operation can also used for updating an existing attribute by using its inum value. Operation ID: patch-attributes-by-inum Description: Partially modify a JansAttribute. url-suffix: inum Schema: Array of PatchRequest If we look at the description, we see that there is a schema file. Let's get the schema file with below command: /opt/jans/jans-cli/config-cli.py --schema PatchRequest > /tmp/patch.json # cat /tmp/patch.json { \"op\": \"add\", \"path\": \"string\", \"value\": {} } Let's modify this schema file to change the status of an attribute as below: In the above image, added two tasks. To know more about how we can modify this schema file to perform a specific task, follow this link: patch-request-schema Let's update an attribute by its inum value. In our case, inum : 6EEB. Before patching the selected attribute, you can check its properties using get-attributes-by-inum operation. Before patching the attribute, its properties are: { \"dn\": \"inum=6EEB,ou=attributes,o=jans\", \"inum\": \"6EEB\", \"selected\": false, \"name\": \"l\", \"displayName\": \"City\", \"description\": \"City\", \"dataType\": \"STRING\", \"status\": \"INACTIVE\", \"lifetime\": null, \"sourceAttribute\": null, \"salt\": null, \"nameIdType\": null, \"origin\": \"jansCustomPerson\", \"editType\": [ \"USER\", \"ADMIN\" ], \"viewType\": [ \"USER\", \"ADMIN\" ], \"usageType\": null, \"claimName\": \"locality\", \"seeAlso\": null, \"saml1Uri\": \"urn:mace:dir:attribute-def:l\", \"saml2Uri\": \"urn:oid:2.5.4.7\", \"urn\": \"urn:mace:dir:attribute-def:l\", \"scimCustomAttr\": null, \"oxMultiValuedAttribute\": false, \"custom\": false, \"requred\": false, \"attributeValidation\": null, \"tooltip\": null, \"jansHideOnDiscovery\": null } According to the schema file, There should be two changes, status and jansHideOnDiscovery . Let's perform the operation: /opt/jans/jans-cli/config-cli.py --operation-id patch-attributes-by-inum --url-suffix inum:6EEB --data /tmp/patch.json The updated attribute looks like: Getting access token for scope https://jans.io/oauth/config/attributes.write Server Response: { \"dn\": \"inum=6EEB,ou=attributes,o=jans\", \"inum\": \"6EEB\", \"selected\": false, \"name\": \"l\", \"displayName\": \"City\", \"description\": \"City\", \"dataType\": \"STRING\", \"status\": \"ACTIVE\", \"lifetime\": null, \"sourceAttribute\": null, \"salt\": null, \"nameIdType\": null, \"origin\": \"jansCustomPerson\", \"editType\": [ \"USER\", \"ADMIN\" ], \"viewType\": [ \"USER\", \"ADMIN\" ], \"usageType\": null, \"claimName\": \"locality\", \"seeAlso\": null, \"saml1Uri\": \"urn:mace:dir:attribute-def:l\", \"saml2Uri\": \"urn:oid:2.5.4.7\", \"urn\": \"urn:mace:dir:attribute-def:l\", \"scimCustomAttr\": null, \"oxMultiValuedAttribute\": false, \"custom\": false, \"requred\": false, \"attributeValidation\": null, \"tooltip\": null, \"jansHideOnDiscovery\": true } As you see, there are two changes.","title":"Patch Attributes"},{"location":"admin/config-guide/cache-configuration/","tags":["administration","configuration","cache"],"text":"Cache Configuration # Prerequisite: Know how to use the Janssen CLI in command-line mode Cache Configuration supports two types of operation through the Single Line command of Janssen CLI. Let's get the information for Cache Configuration. /opt/jans/jans-cli/config-cli.py --info CacheConfiguration It prints below two operations: Operation ID: get-config-cache Description: Returns cache configuration. Operation ID: patch-config-cache Description: Partially modifies cache configuration. Schema: Array of /components/schemas/PatchRequest To get sample shema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/PatchRequest Table of Contents # Cache Configuration Table of Contents Get Cache Configuration Patch Cache Configuration Quick Patch Operation Get Cache Configuration # You can get the current Cache Configuration of your Janssen Server by performing this operation. /opt/jans/jans-cli/config-cli.py --operation-id get-config-cache It will show the Cache configuration with details. { \"cacheProviderType\": \"NATIVE_PERSISTENCE\", \"memcachedConfiguration\": { \"servers\": \"localhost:11211\", \"maxOperationQueueLength\": 100000, \"bufferSize\": 32768, \"defaultPutExpiration\": 60, \"connectionFactoryType\": \"DEFAULT\" }, \"redisConfiguration\": { \"redisProviderType\": \"STANDALONE\", \"servers\": \"localhost:6379\", \"password\": null, \"defaultPutExpiration\": 60, \"sentinelMasterGroupName\": null, \"useSSL\": false, \"sslTrustStoreFilePath\": null, \"maxIdleConnections\": 10, \"maxTotalConnections\": 500, \"connectionTimeout\": 3000, \"soTimeout\": 3000, \"maxRetryAttempts\": 5 }, \"inMemoryConfiguration\": { \"defaultPutExpiration\": 60 }, \"nativePersistenceConfiguration\": { \"defaultPutExpiration\": 60, \"defaultCleanupBatchSize\": 10000, \"deleteExpiredOnGetRequest\": false } } Patch Cache Configuration # You may need to update Cache configuration, In that case patch-config-cache can be used to modify cache configuration. Operation ID: patch-config-cache Description: Partially modifies cache configuration. Schema: Array of /components/schemas/PatchRequest To get sample shema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/PatchRequest Let's see the sample schema of cache configuration. /opt/jans/jans-cli/config-cli.py --schema /components/schemas/PatchRequest > /tmp/patch-cache.json { \"op\": \"add\", \"path\": \"string\", \"value\": {} } Let, We want to replace memcachedConfiguration/bufferSize : We can edit this json as follows (remember to make it an array): nano /tmp/patch-cache.json [ { \"op\": \"replace\", \"path\": \"memcachedConfiguration/bufferSize\", \"value\": \"32788\" } ] Now, let's do the operation: /opt/jans/jans-cli/config-cli.py --operation-id patch-config-cache --data /tmp/patch-cache.json Getting access token for scope https://jans.io/oauth/config/cache.write Server Response: { \"cacheProviderType\": \"NATIVE_PERSISTENCE\", \"memcachedConfiguration\": { \"servers\": \"localhost:11211\", \"maxOperationQueueLength\": 100000, \"bufferSize\": 32788, \"defaultPutExpiration\": 60, \"connectionFactoryType\": \"DEFAULT\" }, \"redisConfiguration\": { \"redisProviderType\": \"STANDALONE\", \"servers\": \"localhost:6379\", \"password\": null, \"defaultPutExpiration\": 60, \"sentinelMasterGroupName\": null, \"useSSL\": false, \"sslTrustStoreFilePath\": null, \"maxIdleConnections\": 10, \"maxTotalConnections\": 500, \"connectionTimeout\": 3000, \"soTimeout\": 3000, \"maxRetryAttempts\": 5 }, \"inMemoryConfiguration\": { \"defaultPutExpiration\": 60 }, \"nativePersistenceConfiguration\": { \"defaultPutExpiration\": 60, \"defaultCleanupBatchSize\": 10000, \"deleteExpiredOnGetRequest\": false } You see bufferSize has changed. You may want to know more about patching cache configuration. Please, have a look to this link to know more about how you can modify the schema file. Quick Patch Operation # In case you need to do a quick patch operation, you can do that also. For example, let's say we would like to replace defaultPutExpiration value from nativePersistenceConfiguration . We can do that simply by the following command line: /opt/jans/jans-cli/config-cli.py --operation-id patch-config-cache --patch-replace nativePersistenceConfiguration/defaultPutExpiration:90 It will change the value with given one. There are few option to do such quick patch operations. Please check them out from here .","title":"Cache Configuration"},{"location":"admin/config-guide/cache-configuration/#cache-configuration","text":"Prerequisite: Know how to use the Janssen CLI in command-line mode Cache Configuration supports two types of operation through the Single Line command of Janssen CLI. Let's get the information for Cache Configuration. /opt/jans/jans-cli/config-cli.py --info CacheConfiguration It prints below two operations: Operation ID: get-config-cache Description: Returns cache configuration. Operation ID: patch-config-cache Description: Partially modifies cache configuration. Schema: Array of /components/schemas/PatchRequest To get sample shema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/PatchRequest","title":"Cache Configuration"},{"location":"admin/config-guide/cache-configuration/#table-of-contents","text":"Cache Configuration Table of Contents Get Cache Configuration Patch Cache Configuration Quick Patch Operation","title":"Table of Contents"},{"location":"admin/config-guide/cache-configuration/#get-cache-configuration","text":"You can get the current Cache Configuration of your Janssen Server by performing this operation. /opt/jans/jans-cli/config-cli.py --operation-id get-config-cache It will show the Cache configuration with details. { \"cacheProviderType\": \"NATIVE_PERSISTENCE\", \"memcachedConfiguration\": { \"servers\": \"localhost:11211\", \"maxOperationQueueLength\": 100000, \"bufferSize\": 32768, \"defaultPutExpiration\": 60, \"connectionFactoryType\": \"DEFAULT\" }, \"redisConfiguration\": { \"redisProviderType\": \"STANDALONE\", \"servers\": \"localhost:6379\", \"password\": null, \"defaultPutExpiration\": 60, \"sentinelMasterGroupName\": null, \"useSSL\": false, \"sslTrustStoreFilePath\": null, \"maxIdleConnections\": 10, \"maxTotalConnections\": 500, \"connectionTimeout\": 3000, \"soTimeout\": 3000, \"maxRetryAttempts\": 5 }, \"inMemoryConfiguration\": { \"defaultPutExpiration\": 60 }, \"nativePersistenceConfiguration\": { \"defaultPutExpiration\": 60, \"defaultCleanupBatchSize\": 10000, \"deleteExpiredOnGetRequest\": false } }","title":"Get Cache Configuration"},{"location":"admin/config-guide/cache-configuration/#patch-cache-configuration","text":"You may need to update Cache configuration, In that case patch-config-cache can be used to modify cache configuration. Operation ID: patch-config-cache Description: Partially modifies cache configuration. Schema: Array of /components/schemas/PatchRequest To get sample shema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/PatchRequest Let's see the sample schema of cache configuration. /opt/jans/jans-cli/config-cli.py --schema /components/schemas/PatchRequest > /tmp/patch-cache.json { \"op\": \"add\", \"path\": \"string\", \"value\": {} } Let, We want to replace memcachedConfiguration/bufferSize : We can edit this json as follows (remember to make it an array): nano /tmp/patch-cache.json [ { \"op\": \"replace\", \"path\": \"memcachedConfiguration/bufferSize\", \"value\": \"32788\" } ] Now, let's do the operation: /opt/jans/jans-cli/config-cli.py --operation-id patch-config-cache --data /tmp/patch-cache.json Getting access token for scope https://jans.io/oauth/config/cache.write Server Response: { \"cacheProviderType\": \"NATIVE_PERSISTENCE\", \"memcachedConfiguration\": { \"servers\": \"localhost:11211\", \"maxOperationQueueLength\": 100000, \"bufferSize\": 32788, \"defaultPutExpiration\": 60, \"connectionFactoryType\": \"DEFAULT\" }, \"redisConfiguration\": { \"redisProviderType\": \"STANDALONE\", \"servers\": \"localhost:6379\", \"password\": null, \"defaultPutExpiration\": 60, \"sentinelMasterGroupName\": null, \"useSSL\": false, \"sslTrustStoreFilePath\": null, \"maxIdleConnections\": 10, \"maxTotalConnections\": 500, \"connectionTimeout\": 3000, \"soTimeout\": 3000, \"maxRetryAttempts\": 5 }, \"inMemoryConfiguration\": { \"defaultPutExpiration\": 60 }, \"nativePersistenceConfiguration\": { \"defaultPutExpiration\": 60, \"defaultCleanupBatchSize\": 10000, \"deleteExpiredOnGetRequest\": false } You see bufferSize has changed. You may want to know more about patching cache configuration. Please, have a look to this link to know more about how you can modify the schema file.","title":"Patch Cache Configuration"},{"location":"admin/config-guide/cache-configuration/#quick-patch-operation","text":"In case you need to do a quick patch operation, you can do that also. For example, let's say we would like to replace defaultPutExpiration value from nativePersistenceConfiguration . We can do that simply by the following command line: /opt/jans/jans-cli/config-cli.py --operation-id patch-config-cache --patch-replace nativePersistenceConfiguration/defaultPutExpiration:90 It will change the value with given one. There are few option to do such quick patch operations. Please check them out from here .","title":"Quick Patch Operation"},{"location":"admin/config-guide/couchbase-configuration/","tags":["administration","configuration","couchbase"],"text":"Couchbase Database Configuration # Prerequisite: Know how to use the Janssen CLI in command-line mode If your janssen server backend is connected with couchbase database then you can go with these operations instead of LDAP configuration . Let's get the couchbase database configuration operations details: /opt/jans/jans-cli/config-cli.py --info DatabaseCouchbaseConfiguration Operation ID: get-config-database-couchbase Description: Gets list of existing Couchbase configurations. Operation ID: post-config-database-couchbase Description: Adds a new Couchbase configuration. Schema: /components/schemas/CouchbaseConfiguration Operation ID: put-config-database-couchbase Description: Updates Couchbase configuration. Schema: /components/schemas/CouchbaseConfiguration Operation ID: get-config-database-couchbase-by-name Description: Gets a Couchbase configurations by name. url-suffix: name Operation ID: patch-config-database-couchbase-by-name Description: Partially modify an Couchbase configuration. url-suffix: name Schema: Array of /components/schemas/PatchRequest Operation ID: delete-config-database-couchbase-by-name Description: Deletes a Couchbase configurations by name. url-suffix: name Operation ID: post-config-database-couchbase-test Description: Tests a Couchbase configuration. Schema: /components/schemas/CouchbaseConfiguration To get sample schema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/CouchbaseConfiguration Get Couchbase Database Configuration details # To get the database configuration details, run the following command: /opt/jans/jans-cli/config-cli.py --operation-id get-config-database-couchbase Adds new Database Configurations # To add a new couchbase database configuration into the janssen server: /opt/jans/jans-cli/config-cli.py --operation-id post-config-database-couchbase --data data.json Update/Replace old couchbase database configurations # To update or replace an couchbase database configuration: /opt/jans/jans-cli/config-cli.py --operation-id put-config-database-couchbase --data data.json Gets Couchbase Database Configuration by its name # To get the couchbase database configuration by its configId: /opt/jans/jans-cli/config-cli.py --operation-id get-config-database-couchbase-by-name --url-suffix name:configId-name Delete Couchbase Database Configuration # You can delete the couchbase database configuration by its name. The command line is: /opt/jans/jans-cli/config-cli.py --operation-id delete-config-database-couchbase-by-name --url-suffix name:configId-name","title":"Couchbase Configuration"},{"location":"admin/config-guide/couchbase-configuration/#couchbase-database-configuration","text":"Prerequisite: Know how to use the Janssen CLI in command-line mode If your janssen server backend is connected with couchbase database then you can go with these operations instead of LDAP configuration . Let's get the couchbase database configuration operations details: /opt/jans/jans-cli/config-cli.py --info DatabaseCouchbaseConfiguration Operation ID: get-config-database-couchbase Description: Gets list of existing Couchbase configurations. Operation ID: post-config-database-couchbase Description: Adds a new Couchbase configuration. Schema: /components/schemas/CouchbaseConfiguration Operation ID: put-config-database-couchbase Description: Updates Couchbase configuration. Schema: /components/schemas/CouchbaseConfiguration Operation ID: get-config-database-couchbase-by-name Description: Gets a Couchbase configurations by name. url-suffix: name Operation ID: patch-config-database-couchbase-by-name Description: Partially modify an Couchbase configuration. url-suffix: name Schema: Array of /components/schemas/PatchRequest Operation ID: delete-config-database-couchbase-by-name Description: Deletes a Couchbase configurations by name. url-suffix: name Operation ID: post-config-database-couchbase-test Description: Tests a Couchbase configuration. Schema: /components/schemas/CouchbaseConfiguration To get sample schema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/CouchbaseConfiguration","title":"Couchbase Database Configuration"},{"location":"admin/config-guide/couchbase-configuration/#get-couchbase-database-configuration-details","text":"To get the database configuration details, run the following command: /opt/jans/jans-cli/config-cli.py --operation-id get-config-database-couchbase","title":"Get Couchbase Database Configuration details"},{"location":"admin/config-guide/couchbase-configuration/#adds-new-database-configurations","text":"To add a new couchbase database configuration into the janssen server: /opt/jans/jans-cli/config-cli.py --operation-id post-config-database-couchbase --data data.json","title":"Adds new Database Configurations"},{"location":"admin/config-guide/couchbase-configuration/#updatereplace-old-couchbase-database-configurations","text":"To update or replace an couchbase database configuration: /opt/jans/jans-cli/config-cli.py --operation-id put-config-database-couchbase --data data.json","title":"Update/Replace old couchbase database configurations"},{"location":"admin/config-guide/couchbase-configuration/#gets-couchbase-database-configuration-by-its-name","text":"To get the couchbase database configuration by its configId: /opt/jans/jans-cli/config-cli.py --operation-id get-config-database-couchbase-by-name --url-suffix name:configId-name","title":"Gets Couchbase Database Configuration by its name"},{"location":"admin/config-guide/couchbase-configuration/#delete-couchbase-database-configuration","text":"You can delete the couchbase database configuration by its name. The command line is: /opt/jans/jans-cli/config-cli.py --operation-id delete-config-database-couchbase-by-name --url-suffix name:configId-name","title":"Delete Couchbase Database Configuration"},{"location":"admin/config-guide/custom-scripts-config/","tags":["administration","configuration","custom-scripts"],"text":"Custom Scripts # Prerequisite: Know how to use the Janssen CLI in command-line mode Interception scripts can be used to implement custom business logic for authentication, authorization, and more in a way that is upgrade-proof and doesn't require forking the Gluu Server code. Using Janssen CLI, we can manage custom scripts as well. Let's get the task information using below command: /opt/jans/jans-cli/config-cli.py --info CustomScripts In return we gets each of the sub-task details: Operation ID: get-config-scripts Description: Gets a list of custom scripts. Operation ID: post-config-scripts Description: Adds a new custom script. Schema: /components/schemas/CustomScript Operation ID: put-config-scripts Description: Updates a custom script. Schema: /components/schemas/CustomScript Operation ID: get-config-scripts-by-type Description: Gets list of scripts by type. url-suffix: type Operation ID: get-config-scripts-by-inum Description: Gets a script by Inum. url-suffix: inum Operation ID: delete-config-scripts-by-inum Description: Deletes a custom script. url-suffix: inum To get sample schema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema CustomScript Let's perform each of this operation. Find list of Custom scripts # get-config-scripts operation id can be used to get a list of custom scripts of the Janssen Server. The command line is: /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts It returns all the custom scripts of the Janssen Server. Adds a New Custom Script # If we look at the description of this operation we see it supports schema: Operation ID: post-config-scripts Description: Adds a new custom script. Schema: /components/schemas/CustomScript So, let's get the schema first: /opt/jans/jans-cli/config-cli.py CustomScript > /tmp/cs.json { \"dn\": null, \"inum\": null, \"name\": \"string\", \"aliases\": [], \"description\": null, \"script\": \"_file /root/script.py\", \"scriptType\": \"INTROSPECTION\", \"programmingLanguage\": \"PYTHON\", \"moduleProperties\": { \"value1\": null, \"value2\": null, \"description\": null }, \"configurationProperties\": { \"value1\": null, \"value2\": null, \"description\": null, \"hide\": true }, \"level\": \"integer\", \"revision\": 0, \"enabled\": false, \"scriptError\": { \"raisedAt\": null, \"stackTrace\": null }, \"modified\": false, \"internal\": false } We need to fill some of these properties with valid data to add this new script. { \"name\": \"custom_script_client\", \"aliases\": null, \"description\": \"Testing custom script addition\", \"script\": \"_file /root/client_registration.py\", \"scriptType\": \"CLIENT_REGISTRATION\", \"programmingLanguage\": \"PYTHON\", \"moduleProperties\": [{ \"value1\": \"myvalue1\", \"value2\": \"myvalue2\", \"description\": \"description for this property\" }], \"configurationProperties\": null, \"level\": 100, \"revision\": 0, \"enabled\": false, \"scriptError\": null, \"modified\": false, \"internal\": false } We can remove dn , inum . As because these two items are auto generated with random value. Also we see aliases , moduleproperties and configurationProperties are the array type keys . So we need to put data into [] otherwise it will raise an error. We can also use null value if we need to skip any of them. For scriptType we can choose only selected type of script from the below list. Name of the type of scripts # PERSON_AUTHENTICATION, INTROSPECTION, RESOURCE_OWNER_PASSWORD_CREDENTIALS, APPLICATION_SESSION, CACHE_REFRESH, CLIENT_REGISTRATION, ID_GENERATOR, UMA_RPT_POLICY, UMA_RPT_CLAIMS, UMA_CLAIMS_GATHERING, CONSENT_GATHERING, DYNAMIC_SCOPE, SPONTANEOUS_SCOPE, END_SESSION, POST_AUTHN, SCIM, CIBA_END_USER_NOTIFICATION, PERSISTENCE_EXTENSION, IDP, UPDATE_TOKEN Programming Language # Two types of programming language available there. Those are Python and JavaScript . We can choose any of them regarding the script we need to add. Alright, let's add the script using the command line we have: /opt/jans/jans-cli/config-cli.py --operation-id post-config-scripts --data /tmp/cs.json Getting access token for scope https://jans.io/oauth/config/scripts.write Server Response: { \"dn\": \"inum=61aef81b-b22d-42c0-89d5-b098c976a2b7,ou=scripts,o=jans\", \"inum\": \"61aef81b-b22d-42c0-89d5-b098c976a2b7\", \"name\": \"custom_script_client\", \"aliases\": null, \"description\": \"Testing custom script addition\", \"script\": \"...\", \"scriptType\": \"CLIENT_REGISTRATION\", \"programmingLanguage\": \"PYTHON\", \"moduleProperties\": [ { \"value1\": \"myvalue1\", \"value2\": \"myvalue2\", \"description\": \"description for this property\" } ], \"configurationProperties\": null, \"level\": 100, \"revision\": 0, \"enabled\": false, \"scriptError\": null, \"modified\": false, \"internal\": false } Update an existing Custom Script # put-config-scripts operation-id can be used to update any existing script on the Janssen server. Operation ID: put-config-scripts Description: Updates a custom script. Schema: /components/schemas/CustomScript As we created a custom script in the above , let's update that one. So we know the dn:inum=61aef81b-b22d-42c0-89d5-b098c976a2b7,ou=scripts,o=jans and inum:61aef81b-b22d-42c0-89d5-b098c976a2b7 here. In this case, I have modified as below: { \"dn\": \"inum=61aef81b-b22d-42c0-89d5-b098c976a2b7,ou=scripts,o=jans\", \"inum\": \"61aef81b-b22d-42c0-89d5-b098c976a2b7\", \"name\": \"custom_script_client\", \"aliases\": null, \"description\": \"Testing custom script addition\", \"script\": \"_file /root/client_registrationj.py\", \"scriptType\": \"CLIENT_REGISTRATION\", \"programmingLanguage\": \"PYTHON\", \"moduleProperties\": [{ \"value1\": \"myvalue1\", \"value2\": \"myvalue2\", \"description\": \"description for this property\" }], \"configurationProperties\": [{ \"value1\": \"testconfigvalue1\", \"value2\": \"testconfigvalue2\", \"description\": \"description for configuration property\", \"hide\": true }], \"level\": 100, \"revision\": 0, \"enabled\": false, \"scriptError\": null, \"modified\": false, \"internal\": false } You can see, I have added configurationProperties for testing purpose only. In case you need to change the script, you can do that by changing the script path as well. /opt/jans/jans-cli/config-cli.py --operation-id put-config-scripts --data /tmp/cs.json Getting access token for scope https://jans.io/oauth/config/scripts.write Server Response: { \"dn\": \"inum=61aef81b-b22d-42c0-89d5-b098c976a2b7,ou=scripts,o=jans\", \"inum\": \"61aef81b-b22d-42c0-89d5-b098c976a2b7\", \"name\": \"custom_script_client\", \"aliases\": null, \"description\": \"Testing custom script addition\", \"script\": \"...\", \"scriptType\": \"CLIENT_REGISTRATION\", \"programmingLanguage\": \"PYTHON\", \"moduleProperties\": [ { \"value1\": \"myvalue1\", \"value2\": \"myvalue2\", \"description\": \"description for this property\" } ], \"configurationProperties\": [ { \"value1\": \"testconfigvalue1\", \"value2\": \"testconfigvalue2\", \"description\": \"description for configuration property\", \"hide\": true } ], \"level\": 100, \"revision\": 0, \"enabled\": false, \"scriptError\": null, \"modified\": false, \"internal\": false } Get Custom Script by type # With this operation-id, we can find a specific type of scripts. It uses url-suffix to get the list of a single type scripts. Operation ID: get-config-scripts-by-type Description: Gets list of scripts by type. url-suffix: type The command line is: /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-type --url-suffix type:script-type-name For an example, let's find all the scripts of CLIENT_REGISTRATION type. So, the command line is: /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-type --url-suffix type:CLIENT_REGISTRATION It returns all the custom scripts that are related to the CLIENT_REGISTRATION type available in the Janssen Server. You will find the name of all the types here Get Custom Scripts by it's inum # In case we need to find out details configuration of any custom script, we can search by its unique inum value. Operation ID: get-config-scripts-by-inum Description: Gets a script by Inum. url-suffix: inum command line: /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-inum --url-suffix inum:inum_value For example, we can show details here that we already added in the Janssen Server and we know it's inum value is 61aef81b-b22d-42c0-89d5-b098c976a2b7 . In our case, the command line is: /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-inum --url-suffix inum:61aef81b-b22d-42c0-89d5-b098c976a2b7 It returns the configuration of the custom script matched with the given inum value. Getting access token for scope https://jans.io/oauth/config/scripts.readonly { \"dn\": \"inum=61aef81b-b22d-42c0-89d5-b098c976a2b7,ou=scripts,o=jans\", \"inum\": \"61aef81b-b22d-42c0-89d5-b098c976a2b7\", \"name\": \"custom_script_client\", \"aliases\": null, \"description\": \"Testing custom script addition\", \"script\": \"...\", \"scriptType\": \"CLIENT_REGISTRATION\", \"programmingLanguage\": \"PYTHON\", \"moduleProperties\": [ { \"value1\": \"myvalue1\", \"value2\": \"myvalue2\", \"description\": \"description for this property\" } ], \"configurationProperties\": [ { \"value1\": \"testconfigvalue1\", \"value2\": \"testconfigvalue2\", \"description\": \"description for configuration property\", \"hide\": true } ], \"level\": 100, \"revision\": 0, \"enabled\": false, \"scriptError\": null, \"modified\": false, \"internal\": false } How to delete Custom Script? # Well, we can delete any custom script also in deed. In that case, we need to remember the inum value of the custom script we want to delete. In the above we added , updated a custom script. We know the inum value, so let's delete this one. Command line: /opt/jans/jans-cli/config-cli.py --operation-id delete-config-scripts-by-inum --url-suffix inum:inum_value For example, in our case; the command line is: /opt/jans/jans-cli/config-cli.py --operation-id delete-config-scripts-by-inum --url-suffix inum:61aef81b-b22d-42c0-89d5-b098c976a2b7 That's all for Custom Script management with CLI feature.","title":"Custom Scripts"},{"location":"admin/config-guide/custom-scripts-config/#custom-scripts","text":"Prerequisite: Know how to use the Janssen CLI in command-line mode Interception scripts can be used to implement custom business logic for authentication, authorization, and more in a way that is upgrade-proof and doesn't require forking the Gluu Server code. Using Janssen CLI, we can manage custom scripts as well. Let's get the task information using below command: /opt/jans/jans-cli/config-cli.py --info CustomScripts In return we gets each of the sub-task details: Operation ID: get-config-scripts Description: Gets a list of custom scripts. Operation ID: post-config-scripts Description: Adds a new custom script. Schema: /components/schemas/CustomScript Operation ID: put-config-scripts Description: Updates a custom script. Schema: /components/schemas/CustomScript Operation ID: get-config-scripts-by-type Description: Gets list of scripts by type. url-suffix: type Operation ID: get-config-scripts-by-inum Description: Gets a script by Inum. url-suffix: inum Operation ID: delete-config-scripts-by-inum Description: Deletes a custom script. url-suffix: inum To get sample schema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema CustomScript Let's perform each of this operation.","title":"Custom Scripts"},{"location":"admin/config-guide/custom-scripts-config/#find-list-of-custom-scripts","text":"get-config-scripts operation id can be used to get a list of custom scripts of the Janssen Server. The command line is: /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts It returns all the custom scripts of the Janssen Server.","title":"Find list of Custom scripts"},{"location":"admin/config-guide/custom-scripts-config/#adds-a-new-custom-script","text":"If we look at the description of this operation we see it supports schema: Operation ID: post-config-scripts Description: Adds a new custom script. Schema: /components/schemas/CustomScript So, let's get the schema first: /opt/jans/jans-cli/config-cli.py CustomScript > /tmp/cs.json { \"dn\": null, \"inum\": null, \"name\": \"string\", \"aliases\": [], \"description\": null, \"script\": \"_file /root/script.py\", \"scriptType\": \"INTROSPECTION\", \"programmingLanguage\": \"PYTHON\", \"moduleProperties\": { \"value1\": null, \"value2\": null, \"description\": null }, \"configurationProperties\": { \"value1\": null, \"value2\": null, \"description\": null, \"hide\": true }, \"level\": \"integer\", \"revision\": 0, \"enabled\": false, \"scriptError\": { \"raisedAt\": null, \"stackTrace\": null }, \"modified\": false, \"internal\": false } We need to fill some of these properties with valid data to add this new script. { \"name\": \"custom_script_client\", \"aliases\": null, \"description\": \"Testing custom script addition\", \"script\": \"_file /root/client_registration.py\", \"scriptType\": \"CLIENT_REGISTRATION\", \"programmingLanguage\": \"PYTHON\", \"moduleProperties\": [{ \"value1\": \"myvalue1\", \"value2\": \"myvalue2\", \"description\": \"description for this property\" }], \"configurationProperties\": null, \"level\": 100, \"revision\": 0, \"enabled\": false, \"scriptError\": null, \"modified\": false, \"internal\": false } We can remove dn , inum . As because these two items are auto generated with random value. Also we see aliases , moduleproperties and configurationProperties are the array type keys . So we need to put data into [] otherwise it will raise an error. We can also use null value if we need to skip any of them. For scriptType we can choose only selected type of script from the below list.","title":"Adds a New Custom Script"},{"location":"admin/config-guide/custom-scripts-config/#name-of-the-type-of-scripts","text":"PERSON_AUTHENTICATION, INTROSPECTION, RESOURCE_OWNER_PASSWORD_CREDENTIALS, APPLICATION_SESSION, CACHE_REFRESH, CLIENT_REGISTRATION, ID_GENERATOR, UMA_RPT_POLICY, UMA_RPT_CLAIMS, UMA_CLAIMS_GATHERING, CONSENT_GATHERING, DYNAMIC_SCOPE, SPONTANEOUS_SCOPE, END_SESSION, POST_AUTHN, SCIM, CIBA_END_USER_NOTIFICATION, PERSISTENCE_EXTENSION, IDP, UPDATE_TOKEN","title":"Name of the type of scripts"},{"location":"admin/config-guide/custom-scripts-config/#programming-language","text":"Two types of programming language available there. Those are Python and JavaScript . We can choose any of them regarding the script we need to add. Alright, let's add the script using the command line we have: /opt/jans/jans-cli/config-cli.py --operation-id post-config-scripts --data /tmp/cs.json Getting access token for scope https://jans.io/oauth/config/scripts.write Server Response: { \"dn\": \"inum=61aef81b-b22d-42c0-89d5-b098c976a2b7,ou=scripts,o=jans\", \"inum\": \"61aef81b-b22d-42c0-89d5-b098c976a2b7\", \"name\": \"custom_script_client\", \"aliases\": null, \"description\": \"Testing custom script addition\", \"script\": \"...\", \"scriptType\": \"CLIENT_REGISTRATION\", \"programmingLanguage\": \"PYTHON\", \"moduleProperties\": [ { \"value1\": \"myvalue1\", \"value2\": \"myvalue2\", \"description\": \"description for this property\" } ], \"configurationProperties\": null, \"level\": 100, \"revision\": 0, \"enabled\": false, \"scriptError\": null, \"modified\": false, \"internal\": false }","title":"Programming Language"},{"location":"admin/config-guide/custom-scripts-config/#update-an-existing-custom-script","text":"put-config-scripts operation-id can be used to update any existing script on the Janssen server. Operation ID: put-config-scripts Description: Updates a custom script. Schema: /components/schemas/CustomScript As we created a custom script in the above , let's update that one. So we know the dn:inum=61aef81b-b22d-42c0-89d5-b098c976a2b7,ou=scripts,o=jans and inum:61aef81b-b22d-42c0-89d5-b098c976a2b7 here. In this case, I have modified as below: { \"dn\": \"inum=61aef81b-b22d-42c0-89d5-b098c976a2b7,ou=scripts,o=jans\", \"inum\": \"61aef81b-b22d-42c0-89d5-b098c976a2b7\", \"name\": \"custom_script_client\", \"aliases\": null, \"description\": \"Testing custom script addition\", \"script\": \"_file /root/client_registrationj.py\", \"scriptType\": \"CLIENT_REGISTRATION\", \"programmingLanguage\": \"PYTHON\", \"moduleProperties\": [{ \"value1\": \"myvalue1\", \"value2\": \"myvalue2\", \"description\": \"description for this property\" }], \"configurationProperties\": [{ \"value1\": \"testconfigvalue1\", \"value2\": \"testconfigvalue2\", \"description\": \"description for configuration property\", \"hide\": true }], \"level\": 100, \"revision\": 0, \"enabled\": false, \"scriptError\": null, \"modified\": false, \"internal\": false } You can see, I have added configurationProperties for testing purpose only. In case you need to change the script, you can do that by changing the script path as well. /opt/jans/jans-cli/config-cli.py --operation-id put-config-scripts --data /tmp/cs.json Getting access token for scope https://jans.io/oauth/config/scripts.write Server Response: { \"dn\": \"inum=61aef81b-b22d-42c0-89d5-b098c976a2b7,ou=scripts,o=jans\", \"inum\": \"61aef81b-b22d-42c0-89d5-b098c976a2b7\", \"name\": \"custom_script_client\", \"aliases\": null, \"description\": \"Testing custom script addition\", \"script\": \"...\", \"scriptType\": \"CLIENT_REGISTRATION\", \"programmingLanguage\": \"PYTHON\", \"moduleProperties\": [ { \"value1\": \"myvalue1\", \"value2\": \"myvalue2\", \"description\": \"description for this property\" } ], \"configurationProperties\": [ { \"value1\": \"testconfigvalue1\", \"value2\": \"testconfigvalue2\", \"description\": \"description for configuration property\", \"hide\": true } ], \"level\": 100, \"revision\": 0, \"enabled\": false, \"scriptError\": null, \"modified\": false, \"internal\": false }","title":"Update an existing Custom Script"},{"location":"admin/config-guide/custom-scripts-config/#get-custom-script-by-type","text":"With this operation-id, we can find a specific type of scripts. It uses url-suffix to get the list of a single type scripts. Operation ID: get-config-scripts-by-type Description: Gets list of scripts by type. url-suffix: type The command line is: /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-type --url-suffix type:script-type-name For an example, let's find all the scripts of CLIENT_REGISTRATION type. So, the command line is: /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-type --url-suffix type:CLIENT_REGISTRATION It returns all the custom scripts that are related to the CLIENT_REGISTRATION type available in the Janssen Server. You will find the name of all the types here","title":"Get Custom Script by type"},{"location":"admin/config-guide/custom-scripts-config/#get-custom-scripts-by-its-inum","text":"In case we need to find out details configuration of any custom script, we can search by its unique inum value. Operation ID: get-config-scripts-by-inum Description: Gets a script by Inum. url-suffix: inum command line: /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-inum --url-suffix inum:inum_value For example, we can show details here that we already added in the Janssen Server and we know it's inum value is 61aef81b-b22d-42c0-89d5-b098c976a2b7 . In our case, the command line is: /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-inum --url-suffix inum:61aef81b-b22d-42c0-89d5-b098c976a2b7 It returns the configuration of the custom script matched with the given inum value. Getting access token for scope https://jans.io/oauth/config/scripts.readonly { \"dn\": \"inum=61aef81b-b22d-42c0-89d5-b098c976a2b7,ou=scripts,o=jans\", \"inum\": \"61aef81b-b22d-42c0-89d5-b098c976a2b7\", \"name\": \"custom_script_client\", \"aliases\": null, \"description\": \"Testing custom script addition\", \"script\": \"...\", \"scriptType\": \"CLIENT_REGISTRATION\", \"programmingLanguage\": \"PYTHON\", \"moduleProperties\": [ { \"value1\": \"myvalue1\", \"value2\": \"myvalue2\", \"description\": \"description for this property\" } ], \"configurationProperties\": [ { \"value1\": \"testconfigvalue1\", \"value2\": \"testconfigvalue2\", \"description\": \"description for configuration property\", \"hide\": true } ], \"level\": 100, \"revision\": 0, \"enabled\": false, \"scriptError\": null, \"modified\": false, \"internal\": false }","title":"Get Custom Scripts by it's inum"},{"location":"admin/config-guide/custom-scripts-config/#how-to-delete-custom-script","text":"Well, we can delete any custom script also in deed. In that case, we need to remember the inum value of the custom script we want to delete. In the above we added , updated a custom script. We know the inum value, so let's delete this one. Command line: /opt/jans/jans-cli/config-cli.py --operation-id delete-config-scripts-by-inum --url-suffix inum:inum_value For example, in our case; the command line is: /opt/jans/jans-cli/config-cli.py --operation-id delete-config-scripts-by-inum --url-suffix inum:61aef81b-b22d-42c0-89d5-b098c976a2b7 That's all for Custom Script management with CLI feature.","title":"How to delete Custom Script?"},{"location":"admin/config-guide/default-authentication-method-config/","tags":["administration","configuration","authentication"],"text":"Default Authentication Method # Prerequisite: Know how to use the Janssen CLI in command-line mode Let's get the information of Default Authentication Method : /opt/jans/jans-cli/config-cli.py --info DefaultAuthenticationMethod Operation ID: get-acrs Description: Gets default authentication method. Operation ID: put-acrs Description: Updates default authentication method. Schema: /components/schemas/AuthenticationMethod To get sample shema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/AuthenticationMethod Table of Contents # Default AUthentication Method Find Current Authentication Method Update Default Authentication Method Find Current Authentication Method # To get the default authentication method: /opt/jans/jans-cli/config-cli.py --operation-id get-acrs Getting access token for scope https://jans.io/oauth/config/acrs.readonly { \"defaultAcr\": \"simple_password_auth\" } Update Default Authentication Method # Let's update the Default Authentication Method using janssen CLI command line. To perform the put-acrs operation, we have to use its schema. To get its schema: /opt/jans/jans-cli/config-cli.py --schema AuthenticationMethod > /tmp/patch-default-auth.json { \"defaultAcr\": null } It will create a .json file with a schema. It comes with a null value. We need to modify this file to update default acr. we have seen that our Default Authentication Method is simple_password_auth . We are going to update it with passport_saml authenitcation method. nano /tmp/patch-default-auth.json Now let's do the operation: /opt/jans/jans-cli/config-cli.py --operation-id put-acrs --data /tmp/patch-default-auth.json It will show the updated result.","title":"Default Authentication"},{"location":"admin/config-guide/default-authentication-method-config/#default-authentication-method","text":"Prerequisite: Know how to use the Janssen CLI in command-line mode Let's get the information of Default Authentication Method : /opt/jans/jans-cli/config-cli.py --info DefaultAuthenticationMethod Operation ID: get-acrs Description: Gets default authentication method. Operation ID: put-acrs Description: Updates default authentication method. Schema: /components/schemas/AuthenticationMethod To get sample shema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/AuthenticationMethod","title":"Default Authentication Method"},{"location":"admin/config-guide/default-authentication-method-config/#table-of-contents","text":"Default AUthentication Method Find Current Authentication Method Update Default Authentication Method","title":"Table of Contents"},{"location":"admin/config-guide/default-authentication-method-config/#find-current-authentication-method","text":"To get the default authentication method: /opt/jans/jans-cli/config-cli.py --operation-id get-acrs Getting access token for scope https://jans.io/oauth/config/acrs.readonly { \"defaultAcr\": \"simple_password_auth\" }","title":"Find Current Authentication Method"},{"location":"admin/config-guide/default-authentication-method-config/#update-default-authentication-method","text":"Let's update the Default Authentication Method using janssen CLI command line. To perform the put-acrs operation, we have to use its schema. To get its schema: /opt/jans/jans-cli/config-cli.py --schema AuthenticationMethod > /tmp/patch-default-auth.json { \"defaultAcr\": null } It will create a .json file with a schema. It comes with a null value. We need to modify this file to update default acr. we have seen that our Default Authentication Method is simple_password_auth . We are going to update it with passport_saml authenitcation method. nano /tmp/patch-default-auth.json Now let's do the operation: /opt/jans/jans-cli/config-cli.py --operation-id put-acrs --data /tmp/patch-default-auth.json It will show the updated result.","title":"Update Default Authentication Method"},{"location":"admin/config-guide/device-flow-config/","tags":["administration","configuration","device flow"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Authentication via Device Flow"},{"location":"admin/config-guide/device-flow-config/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/config-guide/device-flow-config/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/config-guide/device-flow-config/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/config-guide/jans-authorization-server-config/","tags":["administration","configuration","jans-auth-server"],"text":"Janssen Authorization Server # Prerequisite: Know how to use the Janssen CLI in command-line mode To get info about Jans Authorization Server operations: /opt/jans/jans-cli/config-cli.py --info ConfigurationProperties Operation ID: get-properties Description: Gets all Jans authorization server configuration properties. Operation ID: patch-properties Description: Partially modifies Jans authorization server AppConfiguration properties. Schema: Array of JsonPatch Operation ID: get-properties-persistence Description: Returns persistence type configured for Jans authorization server. To get sample schema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema JsonPatch Jans Authorization server has two operations id to get/modify its properties. Table of Contents # Janssen Authorization Server Table of Contents Get All Jans Auth Server Configuration Properties Partially Modify Jans Auth Server Configuration Properties Get Persistence type for Jans Auth Get All Jans Auth Server Configuration Properties # It returns all the information of the Jans Authorization server. /opt/jans/jans-cli/config-cli.py --operation-id get-properties ``` You will get output like below ```json { \"issuer\": \"https://example.jans.io\", \"baseEndpoint\": \"https://example.jans.io/jans-auth/restv1\", \"authorizationEndpoint\": \"https://example.jans.io/jans-auth/restv1/authorize\", \"tokenEndpoint\": \"https://example.jans.io/jans-auth/restv1/token\", \"tokenRevocationEndpoint\": \"https://example.jans.io/jans-auth/restv1/revoke\", \"userInfoEndpoint\": \"https://example.jans.io/jans-auth/restv1/userinfo\", \"clientInfoEndpoint\": \"https://example.jans.io/jans-auth/restv1/clientinfo\", \"checkSessionIFrame\": \"https://example.jans.io/jans-auth/opiframe.htm\", \"endSessionEndpoint\": \"https://example.jans.io/jans-auth/restv1/end_session\", \"jwksUri\": \"https://example.jans.io/jans-auth/restv1/jwks\", \"registrationEndpoint\": \"https://example.jans.io/jans-auth/restv1/register\", \"openIdDiscoveryEndpoint\": \"https://example.jans.io/.well-known/webfinger\", \"openIdConfigurationEndpoint\": \"https://example.jans.io/.well-known/openid-configuration\", \"idGenerationEndpoint\": \"https://example.jans.io/jans-auth/restv1/id\", \"introspectionEndpoint\": \"https://example.jans.io/jans-auth/restv1/introspection\", \"parEndpoint\": \"https://example.jans.io/jans-auth/restv1/par\", \"requirePar\": false, \"deviceAuthzEndpoint\": \"https://example.jans.io/jans-auth/restv1/device_authorization\", \"requireRequestObjectEncryption\": false, \"requirePkce\": false, \"allowAllValueForRevokeEndpoint\": false, \"sectorIdentifierCacheLifetimeInMinutes\": 1440, \"umaConfigurationEndpoint\": \"https://example.jans.io/jans-auth/restv1/uma2-configuration\", \"umaRptAsJwt\": false, \"umaRptLifetime\": 3600, \"umaTicketLifetime\": 3600, \"umaPctLifetime\": 1728000, \"umaResourceLifetime\": 1728000, \"umaAddScopesAutomatically\": true, \"umaValidateClaimToken\": false, \"umaGrantAccessIfNoPolicies\": false, \"umaRestrictResourceToAssociatedClient\": false, \"statTimerIntervalInSeconds\": 0, \"statAuthorizationScope\": \"jans_stat\", \"allowSpontaneousScopes\": false, \"spontaneousScopeLifetime\": 86400, \"openidSubAttribute\": \"inum\", \"publicSubjectIdentifierPerClientEnabled\": true, \"subjectIdentifiersPerClientSupported\": [ \"mail\", \"uid\" ], \"responseTypesSupported\": [ [ \"code\", \"id_token\" ], [ \"code\", \"token\" ], [ \"code\" ], [ \"token\", \"id_token\" ], [ \"token\" ], [ \"code\", \"token\", \"id_token\" ], [ \"id_token\" ] ], \"responseModesSupported\": [ \"form_post.jwt\", \"form_post\", \"fragment\", \"query.jwt\", \"fragment.jwt\", \"jwt\", \"query\" ], \"grantTypesSupported\": [ \"urn:ietf:params:oauth:grant-type:uma-ticket\", \"implicit\", \"urn:ietf:params:oauth:grant-type:token-exchange\", \"urn:ietf:params:oauth:grant-type:device_code\", \"client_credentials\", \"refresh_token\", \"authorization_code\", \"password\" ], \"subjectTypesSupported\": [ \"public\", \"pairwise\" ], \"defaultSubjectType\": \"pairwise\", \"authorizationSigningAlgValuesSupported\": [ \"HS256\", \"HS384\", \"HS512\", \"RS256\", \"RS384\", \"RS512\", \"ES256\", \"ES384\", \"ES512\", \"ES512\", \"PS256\", \"PS384\", \"PS512\" ], \"authorizationEncryptionAlgValuesSupported\": [ \"RSA1_5\", \"RSA-OAEP\", \"A128KW\", \"A256KW\" ], \"authorizationEncryptionEncValuesSupported\": [ \"A128CBC+HS256\", \"A256CBC+HS512\", \"A128GCM\", \"A256GCM\" ], \"userInfoSigningAlgValuesSupported\": [ \"HS256\", \"HS384\", \"HS512\", \"RS256\", \"RS384\", \"RS512\", \"ES256\", \"ES384\", \"ES512\", \"ES512\", \"PS256\", \"PS384\", \"PS512\" ], \"userInfoEncryptionAlgValuesSupported\": [ \"RSA1_5\", \"RSA-OAEP\", \"A128KW\", \"A256KW\" ], \"userInfoEncryptionEncValuesSupported\": [ \"A128CBC+HS256\", \"A256CBC+HS512\", \"A128GCM\", \"A256GCM\" ], \"idTokenSigningAlgValuesSupported\": [ \"none\", \"HS256\", \"HS384\", \"HS512\", \"RS256\", \"RS384\", \"RS512\", \"ES256\", \"ES384\", \"ES512\", \"ES512\", \"PS256\", \"PS384\", \"PS512\" ], \"idTokenEncryptionAlgValuesSupported\": [ \"RSA1_5\", \"RSA-OAEP\", \"A128KW\", \"A256KW\" ], \"idTokenEncryptionEncValuesSupported\": [ \"A128CBC+HS256\", \"A256CBC+HS512\", \"A128GCM\", \"A256GCM\" ], \"accessTokenSigningAlgValuesSupported\": [ \"none\", \"HS256\", \"HS384\", \"HS512\", \"RS256\", \"RS384\", \"RS512\", \"ES256\", \"ES384\", \"ES512\", \"ES512\", \"PS256\", \"PS384\", \"PS512\" ], \"forceSignedRequestObject\": false, \"requestObjectSigningAlgValuesSupported\": [ \"none\", \"HS256\", \"HS384\", \"HS512\", \"RS256\", \"RS384\", \"RS512\", \"ES256\", \"ES384\", \"ES512\", \"ES512\", \"PS256\", \"PS384\", \"PS512\" ], \"requestObjectEncryptionAlgValuesSupported\": [ \"RSA1_5\", \"RSA-OAEP\", \"A128KW\", \"A256KW\" ], \"requestObjectEncryptionEncValuesSupported\": [ \"A128CBC+HS256\", \"A256CBC+HS512\", \"A128GCM\", \"A256GCM\" ], \"tokenEndpointAuthMethodsSupported\": [ \"client_secret_basic\", \"client_secret_post\", \"client_secret_jwt\", \"private_key_jwt\", \"tls_client_auth\", \"self_signed_tls_client_auth\" ], \"tokenEndpointAuthSigningAlgValuesSupported\": [ \"HS256\", \"HS384\", \"HS512\", \"RS256\", \"RS384\", \"RS512\", \"ES256\", \"ES384\", \"ES512\", \"ES512\", \"PS256\", \"PS384\", \"PS512\" ], \"displayValuesSupported\": [ \"page\", \"popup\" ], \"claimTypesSupported\": [ \"normal\" ], \"jwksAlgorithmsSupported\": [ \"RS256\", \"RS384\", \"RS512\", \"ES256\", \"ES384\", \"ES512\", \"PS256\", \"PS384\", \"PS512\", \"RSA1_5\", \"RSA-OAEP\" ], \"serviceDocumentation\": \"http://jans.org/docs\", \"claimsLocalesSupported\": [ \"en\" ], \"idTokenTokenBindingCnfValuesSupported\": [ \"tbh\" ], \"uiLocalesSupported\": [ \"en\", \"bg\", \"de\", \"es\", \"fr\", \"it\", \"ru\", \"tr\" ], \"claimsParameterSupported\": false, \"requestParameterSupported\": true, \"requestUriParameterSupported\": true, \"requestUriHashVerificationEnabled\": false, \"requireRequestUriRegistration\": false, \"requestUriBlockList\": [ \"localhost\", \"127.0.0.1\" ], \"opPolicyUri\": \"https://example.jans.io/opPolicy\", \"opTosUri\": \"https://example.jans.io/tos\", \"authorizationCodeLifetime\": 60, \"refreshTokenLifetime\": 14400, \"idTokenLifetime\": 3600, \"idTokenFilterClaimsBasedOnAccessToken\": false, \"accessTokenLifetime\": 300, \"cleanServiceInterval\": 60, \"cleanServiceBatchChunkSize\": 10000, \"keyRegenerationEnabled\": true, \"keyRegenerationInterval\": 48, \"defaultSignatureAlgorithm\": \"RS256\", \"jansOpenIdConnectVersion\": \"openidconnect-1.0\", \"jansId\": \"https://example.jans.io/oxid/service/jans/inum\", \"dynamicRegistrationExpirationTime\": -1, \"dynamicRegistrationPersistClientAuthorizations\": true, \"trustedClientEnabled\": true, \"skipAuthorizationForOpenIdScopeAndPairwiseId\": false, \"dynamicRegistrationScopesParamEnabled\": true, \"dynamicRegistrationPasswordGrantTypeEnabled\": false, \"personCustomObjectClassList\": [ \"jansCustomPerson\", \"jansPerson\" ], \"persistIdToken\": false, \"persistRefreshToken\": true, \"allowPostLogoutRedirectWithoutValidation\": false, \"invalidateSessionCookiesAfterAuthorizationFlow\": false, \"returnClientSecretOnRead\": true, \"rotateClientRegistrationAccessTokenOnUsage\": false, \"rejectJwtWithNoneAlg\": true, \"expirationNotificatorEnabled\": false, \"useNestedJwtDuringEncryption\": true, \"expirationNotificatorMapSizeLimit\": 100000, \"expirationNotificatorIntervalInSeconds\": 600, \"redirectUrisRegexEnabled\": true, \"useHighestLevelScriptIfAcrScriptNotFound\": false, \"authenticationFiltersEnabled\": false, \"clientAuthenticationFiltersEnabled\": false, \"clientRegDefaultToCodeFlowWithRefresh\": true, \"grantTypesAndResponseTypesAutofixEnabled\": false, \"authenticationFilters\": [ { \"filter\": \"(&(mail=*{0}*)(inum={1}))\", \"bind\": false, \"baseDn\": \"ou=people,o=jans\" }, { \"filter\": \"uid={0}\", \"bind\": true, \"bindPasswordAttribute\": \"pwd\", \"baseDn\": \"ou=people,o=jans\" } ], \"clientAuthenticationFilters\": [ { \"filter\": \"myCustomAttr1={0}\", \"baseDn\": \"ou=clients,o=jans\" } ], \"corsConfigurationFilters\": [ { \"filterName\": \"CorsFilter\", \"corsEnabled\": true, \"corsAllowedOrigins\": \"*\", \"corsAllowedMethods\": \"GET,POST,HEAD,OPTIONS\", \"corsAllowedHeaders\": \"Origin,Authorization,Accept,X-Requested-With,Content-Type,Access-Control-Request-Method,Access-Control-Request-Headers\", \"corsSupportCredentials\": true, \"corsLoggingEnabled\": false, \"corsPreflightMaxAge\": 1800, \"corsRequestDecorate\": true } ], \"sessionIdUnusedLifetime\": 86400, \"sessionIdUnauthenticatedUnusedLifetime\": 7200, \"sessionIdPersistOnPromptNone\": true, \"sessionIdRequestParameterEnabled\": false, \"changeSessionIdOnAuthentication\": true, \"sessionIdPersistInCache\": false, \"includeSidInResponse\": false, \"disablePromptLogin\": false, \"disablePromptConsent\": false, \"sessionIdLifetime\": 86400, \"serverSessionIdLifetime\": 86400, \"configurationUpdateInterval\": 3600, \"enableClientGrantTypeUpdate\": true, \"dynamicGrantTypeDefault\": [ \"urn:ietf:params:oauth:grant-type:uma-ticket\", \"implicit\", \"urn:ietf:params:oauth:grant-type:token-exchange\", \"urn:ietf:params:oauth:grant-type:device_code\", \"client_credentials\", \"refresh_token\", \"authorization_code\" ], \"metricReporterInterval\": 300, \"metricReporterKeepDataDays\": 15, \"pairwiseIdType\": \"algorithmic\", \"pairwiseCalculationKey\": \"9jwJNNXd9mMua666QDhfEKGcR\", \"pairwiseCalculationSalt\": \"aUn2q1HDtsUXtmTNovNeN1QTk\", \"shareSubjectIdBetweenClientsWithSameSectorId\": true, \"webKeysStorage\": \"keystore\", \"dnName\": \"CN=Jans Auth CA Certificates\", \"keyStoreFile\": \"/etc/certs/jans-auth-keys.pkcs12\", \"keyStoreSecret\": \"S63ogThoRsEf\", \"keySelectionStrategy\": \"OLDER\", \"keySignWithSameKeyButDiffAlg\": false, \"jansElevenGenerateKeyEndpoint\": \"https://example.jans.io/oxeleven/rest/oxeleven/generateKey\", \"jansElevenSignEndpoint\": \"https://example.jans.io/oxeleven/rest/oxeleven/sign\", \"jansElevenVerifySignatureEndpoint\": \"https://example.jans.io/oxeleven/rest/oxeleven/verifySignature\", \"jansElevenDeleteKeyEndpoint\": \"https://example.jans.io/oxeleven/rest/oxeleven/deleteKey\", \"introspectionAccessTokenMustHaveUmaProtectionScope\": false, \"introspectionAccessTokenMustHaveIntrospectionScope\": false, \"introspectionSkipAuthorization\": false, \"endSessionWithAccessToken\": false, \"clientWhiteList\": [ \"*\" ], \"clientBlackList\": [ \"*.attacker.com/*\" ], \"legacyIdTokenClaims\": false, \"customHeadersWithAuthorizationResponse\": true, \"frontChannelLogoutSessionSupported\": true, \"loggingLevel\": \"INFO\", \"loggingLayout\": \"text\", \"updateUserLastLogonTime\": false, \"updateClientAccessTime\": false, \"logClientIdOnClientAuthentication\": true, \"logClientNameOnClientAuthentication\": false, \"disableJdkLogger\": true, \"authorizationRequestCustomAllowedParameters\": [ { \"paramName\": \"customParam3\", \"returnInResponse\": false }, { \"paramName\": \"customParam4\", \"returnInResponse\": true }, { \"paramName\": \"customParam5\", \"returnInResponse\": true }, { \"paramName\": \"customParam1\", \"returnInResponse\": false }, { \"paramName\": \"agama_flow\", \"returnInResponse\": false }, { \"paramName\": \"customParam2\", \"returnInResponse\": false } ], \"openidScopeBackwardCompatibility\": false, \"disableU2fEndpoint\": false, \"rotateDeviceSecret\": false, \"returnDeviceSecretFromAuthzEndpoint\": false, \"dcrSignatureValidationEnabled\": false, \"dcrAuthorizationWithClientCredentials\": false, \"dcrAuthorizationWithMTLS\": false, \"useLocalCache\": true, \"fapiCompatibility\": false, \"forceIdTokenHintPrecense\": false, \"rejectEndSessionIfIdTokenExpired\": false, \"allowEndSessionWithUnmatchedSid\": false, \"forceOfflineAccessScopeToEnableRefreshToken\": true, \"errorReasonEnabled\": false, \"removeRefreshTokensForClientOnLogout\": true, \"skipRefreshTokenDuringRefreshing\": false, \"refreshTokenExtendLifetimeOnRotation\": false, \"checkUserPresenceOnRefreshToken\": false, \"consentGatheringScriptBackwardCompatibility\": false, \"introspectionScriptBackwardCompatibility\": false, \"introspectionResponseScopesBackwardCompatibility\": false, \"softwareStatementValidationType\": \"script\", \"authenticationProtectionConfiguration\": { \"attemptExpiration\": 15, \"maximumAllowedAttemptsWithoutDelay\": 4, \"delayTime\": 2, \"bruteForceProtectionEnabled\": false }, \"errorHandlingMethod\": \"remote\", \"keepAuthenticatorAttributesOnAcrChange\": false, \"deviceAuthzRequestExpiresIn\": 1800, \"deviceAuthzTokenPollInterval\": 5, \"deviceAuthzResponseTypeToProcessAuthz\": \"code\", \"backchannelRedirectUri\": \"https://example.jans.io/jans-auth/ciba/home.htm\", \"backchannelAuthenticationEndpoint\": \"https://example.jans.io/jans-auth/restv1/bc-authorize\", \"backchannelDeviceRegistrationEndpoint\": \"https://example.jans.io/jans-auth/restv1/bc-deviceRegistration\", \"backchannelTokenDeliveryModesSupported\": [ \"poll\", \"ping\", \"push\" ], \"backchannelUserCodeParameterSupported\": false, \"backchannelBindingMessagePattern\": \"^[a-zA-Z0-9]{4,8}$\", \"backchannelAuthenticationResponseExpiresIn\": 3600, \"backchannelAuthenticationResponseInterval\": 2, \"backchannelLoginHintClaims\": [ \"inum\", \"uid\", \"mail\" ], \"cibaEndUserNotificationConfig\": {}, \"backchannelRequestsProcessorJobIntervalSec\": 5, \"backchannelRequestsProcessorJobChunkSize\": 100, \"cibaGrantLifeExtraTimeSec\": 180, \"cibaMaxExpirationTimeAllowedSec\": 1800, \"dpopSigningAlgValuesSupported\": [ \"RS256\", \"RS384\", \"RS512\", \"ES256\", \"ES384\", \"ES512\", \"ES512\", \"PS256\", \"PS384\", \"PS512\" ], \"dpopTimeframe\": 5, \"dpopJtiCacheTime\": 3600, \"allowIdTokenWithoutImplicitGrantType\": false, \"discoveryCacheLifetimeInMinutes\": 60, \"discoveryDenyKeys\": [ \"id_generation_endpoint\", \"auth_level_mapping\", \"scope_to_claims_mapping\", \"op_policy_uri\" ], \"httpLoggingEnabled\": false, \"agamaConfiguration\": { \"enabled\": false, \"rootDir\": \"/opt/jans/jetty/jans-auth/agama\", \"templatesPath\": \"/ftl\", \"scriptsPath\": \"/scripts\", \"serializerType\": \"KRYO\", \"maxItemsLoggedInCollections\": 9, \"pageMismatchErrorPage\": \"mismatch.ftlh\", \"interruptionErrorPage\": \"timeout.ftlh\", \"crashErrorPage\": \"crash.ftlh\", \"finishedFlowPage\": \"finished.ftlh\", \"bridgeScriptPage\": \"agama.xhtml\", \"defaultResponseHeaders\": { \"Cache-Control\": \"max-age=0, no-store\" } }, \"ssaConfiguration\": { \"ssaEndpoint\": \"https://example.jans.io/jans-auth/restv1/ssa\", \"ssaSigningAlg\": \"RS256\", \"ssaExpirationInDays\": 30 }, \"blockWebviewAuthorizationEnabled\": false, \"dateFormatterPatterns\": { \"birthdate\": \"yyyy-MM-dd\" }, \"httpLoggingResponseBodyContent\": false, \"fapi\": false, \"allResponseTypesSupported\": [ \"code\", \"id_token\", \"token\" ] } Partially Modify Jans Auth Server Configuration Properties # Operation ID: patch-properties Description: Partially modifies Jans authorization server AppConfiguration properties. Schema: Array of /components/schemas/PatchRequest To get sample shema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/PatchRequest Let's look at the schema first: /opt/jans/jans-cli/config-cli.py --schema /components/schemas/PatchRequest > /tmp/patch-jans-auth.json It will create a .json file in /tmp with schema. Let's modify this schema: nano /tmp/patch-jans-auth.json This schema has three properties; op , path & value . Let's perform a replace operation at cibaEnabled to change it from false to true . So, the .json file will look like this: [ { \"op\": \"replace\", \"path\": \"cibaEnabled\", \"value\": true } ] Don't forget to use square brackets ( [] ). Otherwise, it won't work. Now, let's do the operation. /opt/jans/jans-cli/config-cli.py --operation-id patch-properties --data /tmp/patch-jans-auth.json If you run the following command line, you must see that cibaEnabled is true : Get Persistence type for Jans Auth Configuration # You can get the persistence details for jans auth server. /opt/jans/jans-cli/config-cli.py --operation-id get-properties-persistence Default persistence type is LDAP . Please wait while retrieving data ... { \"persistenceType\": \"ldap\" }","title":"Auth Server Configuration"},{"location":"admin/config-guide/jans-authorization-server-config/#janssen-authorization-server","text":"Prerequisite: Know how to use the Janssen CLI in command-line mode To get info about Jans Authorization Server operations: /opt/jans/jans-cli/config-cli.py --info ConfigurationProperties Operation ID: get-properties Description: Gets all Jans authorization server configuration properties. Operation ID: patch-properties Description: Partially modifies Jans authorization server AppConfiguration properties. Schema: Array of JsonPatch Operation ID: get-properties-persistence Description: Returns persistence type configured for Jans authorization server. To get sample schema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema JsonPatch Jans Authorization server has two operations id to get/modify its properties.","title":"Janssen Authorization Server"},{"location":"admin/config-guide/jans-authorization-server-config/#table-of-contents","text":"Janssen Authorization Server Table of Contents Get All Jans Auth Server Configuration Properties Partially Modify Jans Auth Server Configuration Properties Get Persistence type for Jans Auth","title":"Table of Contents"},{"location":"admin/config-guide/jans-authorization-server-config/#get-all-jans-auth-server-configuration-properties","text":"It returns all the information of the Jans Authorization server. /opt/jans/jans-cli/config-cli.py --operation-id get-properties ``` You will get output like below ```json { \"issuer\": \"https://example.jans.io\", \"baseEndpoint\": \"https://example.jans.io/jans-auth/restv1\", \"authorizationEndpoint\": \"https://example.jans.io/jans-auth/restv1/authorize\", \"tokenEndpoint\": \"https://example.jans.io/jans-auth/restv1/token\", \"tokenRevocationEndpoint\": \"https://example.jans.io/jans-auth/restv1/revoke\", \"userInfoEndpoint\": \"https://example.jans.io/jans-auth/restv1/userinfo\", \"clientInfoEndpoint\": \"https://example.jans.io/jans-auth/restv1/clientinfo\", \"checkSessionIFrame\": \"https://example.jans.io/jans-auth/opiframe.htm\", \"endSessionEndpoint\": \"https://example.jans.io/jans-auth/restv1/end_session\", \"jwksUri\": \"https://example.jans.io/jans-auth/restv1/jwks\", \"registrationEndpoint\": \"https://example.jans.io/jans-auth/restv1/register\", \"openIdDiscoveryEndpoint\": \"https://example.jans.io/.well-known/webfinger\", \"openIdConfigurationEndpoint\": \"https://example.jans.io/.well-known/openid-configuration\", \"idGenerationEndpoint\": \"https://example.jans.io/jans-auth/restv1/id\", \"introspectionEndpoint\": \"https://example.jans.io/jans-auth/restv1/introspection\", \"parEndpoint\": \"https://example.jans.io/jans-auth/restv1/par\", \"requirePar\": false, \"deviceAuthzEndpoint\": \"https://example.jans.io/jans-auth/restv1/device_authorization\", \"requireRequestObjectEncryption\": false, \"requirePkce\": false, \"allowAllValueForRevokeEndpoint\": false, \"sectorIdentifierCacheLifetimeInMinutes\": 1440, \"umaConfigurationEndpoint\": \"https://example.jans.io/jans-auth/restv1/uma2-configuration\", \"umaRptAsJwt\": false, \"umaRptLifetime\": 3600, \"umaTicketLifetime\": 3600, \"umaPctLifetime\": 1728000, \"umaResourceLifetime\": 1728000, \"umaAddScopesAutomatically\": true, \"umaValidateClaimToken\": false, \"umaGrantAccessIfNoPolicies\": false, \"umaRestrictResourceToAssociatedClient\": false, \"statTimerIntervalInSeconds\": 0, \"statAuthorizationScope\": \"jans_stat\", \"allowSpontaneousScopes\": false, \"spontaneousScopeLifetime\": 86400, \"openidSubAttribute\": \"inum\", \"publicSubjectIdentifierPerClientEnabled\": true, \"subjectIdentifiersPerClientSupported\": [ \"mail\", \"uid\" ], \"responseTypesSupported\": [ [ \"code\", \"id_token\" ], [ \"code\", \"token\" ], [ \"code\" ], [ \"token\", \"id_token\" ], [ \"token\" ], [ \"code\", \"token\", \"id_token\" ], [ \"id_token\" ] ], \"responseModesSupported\": [ \"form_post.jwt\", \"form_post\", \"fragment\", \"query.jwt\", \"fragment.jwt\", \"jwt\", \"query\" ], \"grantTypesSupported\": [ \"urn:ietf:params:oauth:grant-type:uma-ticket\", \"implicit\", \"urn:ietf:params:oauth:grant-type:token-exchange\", \"urn:ietf:params:oauth:grant-type:device_code\", \"client_credentials\", \"refresh_token\", \"authorization_code\", \"password\" ], \"subjectTypesSupported\": [ \"public\", \"pairwise\" ], \"defaultSubjectType\": \"pairwise\", \"authorizationSigningAlgValuesSupported\": [ \"HS256\", \"HS384\", \"HS512\", \"RS256\", \"RS384\", \"RS512\", \"ES256\", \"ES384\", \"ES512\", \"ES512\", \"PS256\", \"PS384\", \"PS512\" ], \"authorizationEncryptionAlgValuesSupported\": [ \"RSA1_5\", \"RSA-OAEP\", \"A128KW\", \"A256KW\" ], \"authorizationEncryptionEncValuesSupported\": [ \"A128CBC+HS256\", \"A256CBC+HS512\", \"A128GCM\", \"A256GCM\" ], \"userInfoSigningAlgValuesSupported\": [ \"HS256\", \"HS384\", \"HS512\", \"RS256\", \"RS384\", \"RS512\", \"ES256\", \"ES384\", \"ES512\", \"ES512\", \"PS256\", \"PS384\", \"PS512\" ], \"userInfoEncryptionAlgValuesSupported\": [ \"RSA1_5\", \"RSA-OAEP\", \"A128KW\", \"A256KW\" ], \"userInfoEncryptionEncValuesSupported\": [ \"A128CBC+HS256\", \"A256CBC+HS512\", \"A128GCM\", \"A256GCM\" ], \"idTokenSigningAlgValuesSupported\": [ \"none\", \"HS256\", \"HS384\", \"HS512\", \"RS256\", \"RS384\", \"RS512\", \"ES256\", \"ES384\", \"ES512\", \"ES512\", \"PS256\", \"PS384\", \"PS512\" ], \"idTokenEncryptionAlgValuesSupported\": [ \"RSA1_5\", \"RSA-OAEP\", \"A128KW\", \"A256KW\" ], \"idTokenEncryptionEncValuesSupported\": [ \"A128CBC+HS256\", \"A256CBC+HS512\", \"A128GCM\", \"A256GCM\" ], \"accessTokenSigningAlgValuesSupported\": [ \"none\", \"HS256\", \"HS384\", \"HS512\", \"RS256\", \"RS384\", \"RS512\", \"ES256\", \"ES384\", \"ES512\", \"ES512\", \"PS256\", \"PS384\", \"PS512\" ], \"forceSignedRequestObject\": false, \"requestObjectSigningAlgValuesSupported\": [ \"none\", \"HS256\", \"HS384\", \"HS512\", \"RS256\", \"RS384\", \"RS512\", \"ES256\", \"ES384\", \"ES512\", \"ES512\", \"PS256\", \"PS384\", \"PS512\" ], \"requestObjectEncryptionAlgValuesSupported\": [ \"RSA1_5\", \"RSA-OAEP\", \"A128KW\", \"A256KW\" ], \"requestObjectEncryptionEncValuesSupported\": [ \"A128CBC+HS256\", \"A256CBC+HS512\", \"A128GCM\", \"A256GCM\" ], \"tokenEndpointAuthMethodsSupported\": [ \"client_secret_basic\", \"client_secret_post\", \"client_secret_jwt\", \"private_key_jwt\", \"tls_client_auth\", \"self_signed_tls_client_auth\" ], \"tokenEndpointAuthSigningAlgValuesSupported\": [ \"HS256\", \"HS384\", \"HS512\", \"RS256\", \"RS384\", \"RS512\", \"ES256\", \"ES384\", \"ES512\", \"ES512\", \"PS256\", \"PS384\", \"PS512\" ], \"displayValuesSupported\": [ \"page\", \"popup\" ], \"claimTypesSupported\": [ \"normal\" ], \"jwksAlgorithmsSupported\": [ \"RS256\", \"RS384\", \"RS512\", \"ES256\", \"ES384\", \"ES512\", \"PS256\", \"PS384\", \"PS512\", \"RSA1_5\", \"RSA-OAEP\" ], \"serviceDocumentation\": \"http://jans.org/docs\", \"claimsLocalesSupported\": [ \"en\" ], \"idTokenTokenBindingCnfValuesSupported\": [ \"tbh\" ], \"uiLocalesSupported\": [ \"en\", \"bg\", \"de\", \"es\", \"fr\", \"it\", \"ru\", \"tr\" ], \"claimsParameterSupported\": false, \"requestParameterSupported\": true, \"requestUriParameterSupported\": true, \"requestUriHashVerificationEnabled\": false, \"requireRequestUriRegistration\": false, \"requestUriBlockList\": [ \"localhost\", \"127.0.0.1\" ], \"opPolicyUri\": \"https://example.jans.io/opPolicy\", \"opTosUri\": \"https://example.jans.io/tos\", \"authorizationCodeLifetime\": 60, \"refreshTokenLifetime\": 14400, \"idTokenLifetime\": 3600, \"idTokenFilterClaimsBasedOnAccessToken\": false, \"accessTokenLifetime\": 300, \"cleanServiceInterval\": 60, \"cleanServiceBatchChunkSize\": 10000, \"keyRegenerationEnabled\": true, \"keyRegenerationInterval\": 48, \"defaultSignatureAlgorithm\": \"RS256\", \"jansOpenIdConnectVersion\": \"openidconnect-1.0\", \"jansId\": \"https://example.jans.io/oxid/service/jans/inum\", \"dynamicRegistrationExpirationTime\": -1, \"dynamicRegistrationPersistClientAuthorizations\": true, \"trustedClientEnabled\": true, \"skipAuthorizationForOpenIdScopeAndPairwiseId\": false, \"dynamicRegistrationScopesParamEnabled\": true, \"dynamicRegistrationPasswordGrantTypeEnabled\": false, \"personCustomObjectClassList\": [ \"jansCustomPerson\", \"jansPerson\" ], \"persistIdToken\": false, \"persistRefreshToken\": true, \"allowPostLogoutRedirectWithoutValidation\": false, \"invalidateSessionCookiesAfterAuthorizationFlow\": false, \"returnClientSecretOnRead\": true, \"rotateClientRegistrationAccessTokenOnUsage\": false, \"rejectJwtWithNoneAlg\": true, \"expirationNotificatorEnabled\": false, \"useNestedJwtDuringEncryption\": true, \"expirationNotificatorMapSizeLimit\": 100000, \"expirationNotificatorIntervalInSeconds\": 600, \"redirectUrisRegexEnabled\": true, \"useHighestLevelScriptIfAcrScriptNotFound\": false, \"authenticationFiltersEnabled\": false, \"clientAuthenticationFiltersEnabled\": false, \"clientRegDefaultToCodeFlowWithRefresh\": true, \"grantTypesAndResponseTypesAutofixEnabled\": false, \"authenticationFilters\": [ { \"filter\": \"(&(mail=*{0}*)(inum={1}))\", \"bind\": false, \"baseDn\": \"ou=people,o=jans\" }, { \"filter\": \"uid={0}\", \"bind\": true, \"bindPasswordAttribute\": \"pwd\", \"baseDn\": \"ou=people,o=jans\" } ], \"clientAuthenticationFilters\": [ { \"filter\": \"myCustomAttr1={0}\", \"baseDn\": \"ou=clients,o=jans\" } ], \"corsConfigurationFilters\": [ { \"filterName\": \"CorsFilter\", \"corsEnabled\": true, \"corsAllowedOrigins\": \"*\", \"corsAllowedMethods\": \"GET,POST,HEAD,OPTIONS\", \"corsAllowedHeaders\": \"Origin,Authorization,Accept,X-Requested-With,Content-Type,Access-Control-Request-Method,Access-Control-Request-Headers\", \"corsSupportCredentials\": true, \"corsLoggingEnabled\": false, \"corsPreflightMaxAge\": 1800, \"corsRequestDecorate\": true } ], \"sessionIdUnusedLifetime\": 86400, \"sessionIdUnauthenticatedUnusedLifetime\": 7200, \"sessionIdPersistOnPromptNone\": true, \"sessionIdRequestParameterEnabled\": false, \"changeSessionIdOnAuthentication\": true, \"sessionIdPersistInCache\": false, \"includeSidInResponse\": false, \"disablePromptLogin\": false, \"disablePromptConsent\": false, \"sessionIdLifetime\": 86400, \"serverSessionIdLifetime\": 86400, \"configurationUpdateInterval\": 3600, \"enableClientGrantTypeUpdate\": true, \"dynamicGrantTypeDefault\": [ \"urn:ietf:params:oauth:grant-type:uma-ticket\", \"implicit\", \"urn:ietf:params:oauth:grant-type:token-exchange\", \"urn:ietf:params:oauth:grant-type:device_code\", \"client_credentials\", \"refresh_token\", \"authorization_code\" ], \"metricReporterInterval\": 300, \"metricReporterKeepDataDays\": 15, \"pairwiseIdType\": \"algorithmic\", \"pairwiseCalculationKey\": \"9jwJNNXd9mMua666QDhfEKGcR\", \"pairwiseCalculationSalt\": \"aUn2q1HDtsUXtmTNovNeN1QTk\", \"shareSubjectIdBetweenClientsWithSameSectorId\": true, \"webKeysStorage\": \"keystore\", \"dnName\": \"CN=Jans Auth CA Certificates\", \"keyStoreFile\": \"/etc/certs/jans-auth-keys.pkcs12\", \"keyStoreSecret\": \"S63ogThoRsEf\", \"keySelectionStrategy\": \"OLDER\", \"keySignWithSameKeyButDiffAlg\": false, \"jansElevenGenerateKeyEndpoint\": \"https://example.jans.io/oxeleven/rest/oxeleven/generateKey\", \"jansElevenSignEndpoint\": \"https://example.jans.io/oxeleven/rest/oxeleven/sign\", \"jansElevenVerifySignatureEndpoint\": \"https://example.jans.io/oxeleven/rest/oxeleven/verifySignature\", \"jansElevenDeleteKeyEndpoint\": \"https://example.jans.io/oxeleven/rest/oxeleven/deleteKey\", \"introspectionAccessTokenMustHaveUmaProtectionScope\": false, \"introspectionAccessTokenMustHaveIntrospectionScope\": false, \"introspectionSkipAuthorization\": false, \"endSessionWithAccessToken\": false, \"clientWhiteList\": [ \"*\" ], \"clientBlackList\": [ \"*.attacker.com/*\" ], \"legacyIdTokenClaims\": false, \"customHeadersWithAuthorizationResponse\": true, \"frontChannelLogoutSessionSupported\": true, \"loggingLevel\": \"INFO\", \"loggingLayout\": \"text\", \"updateUserLastLogonTime\": false, \"updateClientAccessTime\": false, \"logClientIdOnClientAuthentication\": true, \"logClientNameOnClientAuthentication\": false, \"disableJdkLogger\": true, \"authorizationRequestCustomAllowedParameters\": [ { \"paramName\": \"customParam3\", \"returnInResponse\": false }, { \"paramName\": \"customParam4\", \"returnInResponse\": true }, { \"paramName\": \"customParam5\", \"returnInResponse\": true }, { \"paramName\": \"customParam1\", \"returnInResponse\": false }, { \"paramName\": \"agama_flow\", \"returnInResponse\": false }, { \"paramName\": \"customParam2\", \"returnInResponse\": false } ], \"openidScopeBackwardCompatibility\": false, \"disableU2fEndpoint\": false, \"rotateDeviceSecret\": false, \"returnDeviceSecretFromAuthzEndpoint\": false, \"dcrSignatureValidationEnabled\": false, \"dcrAuthorizationWithClientCredentials\": false, \"dcrAuthorizationWithMTLS\": false, \"useLocalCache\": true, \"fapiCompatibility\": false, \"forceIdTokenHintPrecense\": false, \"rejectEndSessionIfIdTokenExpired\": false, \"allowEndSessionWithUnmatchedSid\": false, \"forceOfflineAccessScopeToEnableRefreshToken\": true, \"errorReasonEnabled\": false, \"removeRefreshTokensForClientOnLogout\": true, \"skipRefreshTokenDuringRefreshing\": false, \"refreshTokenExtendLifetimeOnRotation\": false, \"checkUserPresenceOnRefreshToken\": false, \"consentGatheringScriptBackwardCompatibility\": false, \"introspectionScriptBackwardCompatibility\": false, \"introspectionResponseScopesBackwardCompatibility\": false, \"softwareStatementValidationType\": \"script\", \"authenticationProtectionConfiguration\": { \"attemptExpiration\": 15, \"maximumAllowedAttemptsWithoutDelay\": 4, \"delayTime\": 2, \"bruteForceProtectionEnabled\": false }, \"errorHandlingMethod\": \"remote\", \"keepAuthenticatorAttributesOnAcrChange\": false, \"deviceAuthzRequestExpiresIn\": 1800, \"deviceAuthzTokenPollInterval\": 5, \"deviceAuthzResponseTypeToProcessAuthz\": \"code\", \"backchannelRedirectUri\": \"https://example.jans.io/jans-auth/ciba/home.htm\", \"backchannelAuthenticationEndpoint\": \"https://example.jans.io/jans-auth/restv1/bc-authorize\", \"backchannelDeviceRegistrationEndpoint\": \"https://example.jans.io/jans-auth/restv1/bc-deviceRegistration\", \"backchannelTokenDeliveryModesSupported\": [ \"poll\", \"ping\", \"push\" ], \"backchannelUserCodeParameterSupported\": false, \"backchannelBindingMessagePattern\": \"^[a-zA-Z0-9]{4,8}$\", \"backchannelAuthenticationResponseExpiresIn\": 3600, \"backchannelAuthenticationResponseInterval\": 2, \"backchannelLoginHintClaims\": [ \"inum\", \"uid\", \"mail\" ], \"cibaEndUserNotificationConfig\": {}, \"backchannelRequestsProcessorJobIntervalSec\": 5, \"backchannelRequestsProcessorJobChunkSize\": 100, \"cibaGrantLifeExtraTimeSec\": 180, \"cibaMaxExpirationTimeAllowedSec\": 1800, \"dpopSigningAlgValuesSupported\": [ \"RS256\", \"RS384\", \"RS512\", \"ES256\", \"ES384\", \"ES512\", \"ES512\", \"PS256\", \"PS384\", \"PS512\" ], \"dpopTimeframe\": 5, \"dpopJtiCacheTime\": 3600, \"allowIdTokenWithoutImplicitGrantType\": false, \"discoveryCacheLifetimeInMinutes\": 60, \"discoveryDenyKeys\": [ \"id_generation_endpoint\", \"auth_level_mapping\", \"scope_to_claims_mapping\", \"op_policy_uri\" ], \"httpLoggingEnabled\": false, \"agamaConfiguration\": { \"enabled\": false, \"rootDir\": \"/opt/jans/jetty/jans-auth/agama\", \"templatesPath\": \"/ftl\", \"scriptsPath\": \"/scripts\", \"serializerType\": \"KRYO\", \"maxItemsLoggedInCollections\": 9, \"pageMismatchErrorPage\": \"mismatch.ftlh\", \"interruptionErrorPage\": \"timeout.ftlh\", \"crashErrorPage\": \"crash.ftlh\", \"finishedFlowPage\": \"finished.ftlh\", \"bridgeScriptPage\": \"agama.xhtml\", \"defaultResponseHeaders\": { \"Cache-Control\": \"max-age=0, no-store\" } }, \"ssaConfiguration\": { \"ssaEndpoint\": \"https://example.jans.io/jans-auth/restv1/ssa\", \"ssaSigningAlg\": \"RS256\", \"ssaExpirationInDays\": 30 }, \"blockWebviewAuthorizationEnabled\": false, \"dateFormatterPatterns\": { \"birthdate\": \"yyyy-MM-dd\" }, \"httpLoggingResponseBodyContent\": false, \"fapi\": false, \"allResponseTypesSupported\": [ \"code\", \"id_token\", \"token\" ] }","title":"Get All Jans Auth Server Configuration Properties"},{"location":"admin/config-guide/jans-authorization-server-config/#partially-modify-jans-auth-server-configuration-properties","text":"Operation ID: patch-properties Description: Partially modifies Jans authorization server AppConfiguration properties. Schema: Array of /components/schemas/PatchRequest To get sample shema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/PatchRequest Let's look at the schema first: /opt/jans/jans-cli/config-cli.py --schema /components/schemas/PatchRequest > /tmp/patch-jans-auth.json It will create a .json file in /tmp with schema. Let's modify this schema: nano /tmp/patch-jans-auth.json This schema has three properties; op , path & value . Let's perform a replace operation at cibaEnabled to change it from false to true . So, the .json file will look like this: [ { \"op\": \"replace\", \"path\": \"cibaEnabled\", \"value\": true } ] Don't forget to use square brackets ( [] ). Otherwise, it won't work. Now, let's do the operation. /opt/jans/jans-cli/config-cli.py --operation-id patch-properties --data /tmp/patch-jans-auth.json If you run the following command line, you must see that cibaEnabled is true :","title":"Partially Modify Jans Auth Server Configuration Properties"},{"location":"admin/config-guide/jans-authorization-server-config/#get-persistence-type-for-jans-auth-configuration","text":"You can get the persistence details for jans auth server. /opt/jans/jans-cli/config-cli.py --operation-id get-properties-persistence Default persistence type is LDAP . Please wait while retrieving data ... { \"persistenceType\": \"ldap\" }","title":"Get Persistence type for Jans Auth Configuration"},{"location":"admin/config-guide/janssen-fido2-configuration/","tags":["administration","configuration","fido2"],"text":"Janssen FIDO2 Configuration # Prerequisite: Know how to use the Janssen CLI in command-line mode Using Janssen CLI, You can get/update Fido2 properties. To get the information of Janssen Fido2 CLI, run the following command: /opt/jans/jans-cli/config-cli.py --info ConfigurationFido2 Operation ID: get-properties-fido2 Description: Gets Jans Authorization Server Fido2 configuration properties. Operation ID: put-properties-fido2 Description: Updates Fido2 configuration properties. Schema: /components/schemas/JansFido2DynConfiguration To get sample shema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/JansFido2DynConfiguration Table of Contents # Janssen FIDO2 Configuration Find FIDO2 Configuration Properties Update FIDO2 Configuration Properties Find FIDO2 Configuration Properties # To get the properties of Janssen Fido2 Configuration, run below command: /opt/jans/jans-cli/config-cli.py --operation-id get-properties-fido2 It will return the result as below: Getting access token for scope https://jans.io/oauth/config/fido2.readonly { \"issuer\": \"https://testjans.gluu.com\", \"baseEndpoint\": \"https://testjans.gluu.com/fido2/restv1\", \"cleanServiceInterval\": 60, \"cleanServiceBatchChunkSize\": 10000, \"useLocalCache\": false, \"disableJdkLogger\": false, \"loggingLevel\": \"DEBUG\", \"loggingLayout\": \"text\", \"externalLoggerConfiguration\": null, \"metricReporterInterval\": 300, \"metricReporterKeepDataDays\": 15, \"metricReporterEnabled\": false, \"personCustomObjectClassList\": [ \"jansCustomPerson\", \"jansPerson\" ], \"fido2Configuration\": { \"authenticatorCertsFolder\": null, \"mdsCertsFolder\": null, \"mdsTocsFolder\": null, \"serverMetadataFolder\": null, \"requestedParties\": [ { \"name\": null, \"domains\": [] } ], \"userAutoEnrollment\": false, \"unfinishedRequestExpiration\": null, \"authenticationHistoryExpiration\": null, \"requestedCredentialTypes\": [] } } Update FIDO2 Configuration Properties # To perform this operation, let's check the schema first. /opt/jans/jans-cli/config-cli.py --schema /components/schemas/JansFido2DynConfiguration > /tmp/fido2-schema.json This command will create a fido2 schema file on /tmp/ . You can edit this file depending on the requirements: Now let's do the operation: /opt/jans/jans-cli/config-cli.py --operation-id put-properties-fido2 --data /tmp/fido2-schema.json Getting access token for scope https://jans.io/oauth/config/fido2.write Server Response: { \"issuer\": \"https://server.example.com/\", \"baseEndpoint\": \"https://server.example.com/fido2/restv1\", \"cleanServiceInterval\": null, \"cleanServiceBatchChunkSize\": null, \"useLocalCache\": false, \"disableJdkLogger\": false, \"loggingLevel\": \"INFO\", \"loggingLayout\": null, \"externalLoggerConfiguration\": null, \"metricReporterInterval\": null, \"metricReporterKeepDataDays\": null, \"metricReporterEnabled\": true, \"personCustomObjectClassList\": [], \"fido2Configuration\": { \"authenticatorCertsFolder\": null, \"mdsCertsFolder\": null, \"mdsTocsFolder\": null, \"serverMetadataFolder\": null, \"requestedParties\": [ { \"name\": null, \"domains\": null }, { \"name\": null, \"domains\": null } ], \"userAutoEnrollment\": true, \"unfinishedRequestExpiration\": null, \"authenticationHistoryExpiration\": null, \"requestedCredentialTypes\": [] } } You may find that I have updated to logginglabel:INFO from NULL .","title":"FIDO2 Configuration"},{"location":"admin/config-guide/janssen-fido2-configuration/#janssen-fido2-configuration","text":"Prerequisite: Know how to use the Janssen CLI in command-line mode Using Janssen CLI, You can get/update Fido2 properties. To get the information of Janssen Fido2 CLI, run the following command: /opt/jans/jans-cli/config-cli.py --info ConfigurationFido2 Operation ID: get-properties-fido2 Description: Gets Jans Authorization Server Fido2 configuration properties. Operation ID: put-properties-fido2 Description: Updates Fido2 configuration properties. Schema: /components/schemas/JansFido2DynConfiguration To get sample shema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/JansFido2DynConfiguration","title":"Janssen FIDO2 Configuration"},{"location":"admin/config-guide/janssen-fido2-configuration/#table-of-contents","text":"Janssen FIDO2 Configuration Find FIDO2 Configuration Properties Update FIDO2 Configuration Properties","title":"Table of Contents"},{"location":"admin/config-guide/janssen-fido2-configuration/#find-fido2-configuration-properties","text":"To get the properties of Janssen Fido2 Configuration, run below command: /opt/jans/jans-cli/config-cli.py --operation-id get-properties-fido2 It will return the result as below: Getting access token for scope https://jans.io/oauth/config/fido2.readonly { \"issuer\": \"https://testjans.gluu.com\", \"baseEndpoint\": \"https://testjans.gluu.com/fido2/restv1\", \"cleanServiceInterval\": 60, \"cleanServiceBatchChunkSize\": 10000, \"useLocalCache\": false, \"disableJdkLogger\": false, \"loggingLevel\": \"DEBUG\", \"loggingLayout\": \"text\", \"externalLoggerConfiguration\": null, \"metricReporterInterval\": 300, \"metricReporterKeepDataDays\": 15, \"metricReporterEnabled\": false, \"personCustomObjectClassList\": [ \"jansCustomPerson\", \"jansPerson\" ], \"fido2Configuration\": { \"authenticatorCertsFolder\": null, \"mdsCertsFolder\": null, \"mdsTocsFolder\": null, \"serverMetadataFolder\": null, \"requestedParties\": [ { \"name\": null, \"domains\": [] } ], \"userAutoEnrollment\": false, \"unfinishedRequestExpiration\": null, \"authenticationHistoryExpiration\": null, \"requestedCredentialTypes\": [] } }","title":"Find FIDO2 Configuration Properties"},{"location":"admin/config-guide/janssen-fido2-configuration/#update-fido2-configuration-properties","text":"To perform this operation, let's check the schema first. /opt/jans/jans-cli/config-cli.py --schema /components/schemas/JansFido2DynConfiguration > /tmp/fido2-schema.json This command will create a fido2 schema file on /tmp/ . You can edit this file depending on the requirements: Now let's do the operation: /opt/jans/jans-cli/config-cli.py --operation-id put-properties-fido2 --data /tmp/fido2-schema.json Getting access token for scope https://jans.io/oauth/config/fido2.write Server Response: { \"issuer\": \"https://server.example.com/\", \"baseEndpoint\": \"https://server.example.com/fido2/restv1\", \"cleanServiceInterval\": null, \"cleanServiceBatchChunkSize\": null, \"useLocalCache\": false, \"disableJdkLogger\": false, \"loggingLevel\": \"INFO\", \"loggingLayout\": null, \"externalLoggerConfiguration\": null, \"metricReporterInterval\": null, \"metricReporterKeepDataDays\": null, \"metricReporterEnabled\": true, \"personCustomObjectClassList\": [], \"fido2Configuration\": { \"authenticatorCertsFolder\": null, \"mdsCertsFolder\": null, \"mdsTocsFolder\": null, \"serverMetadataFolder\": null, \"requestedParties\": [ { \"name\": null, \"domains\": null }, { \"name\": null, \"domains\": null } ], \"userAutoEnrollment\": true, \"unfinishedRequestExpiration\": null, \"authenticationHistoryExpiration\": null, \"requestedCredentialTypes\": [] } } You may find that I have updated to logginglabel:INFO from NULL .","title":"Update FIDO2 Configuration Properties"},{"location":"admin/config-guide/json-web-key-config/","tags":["administration","configuration","JWK","json web keys"],"text":"JSON Web Key (JWK) # Prerequisite: Know how to use the Janssen CLI in command-line mode This operation is used to get the JSON Web Key Set (JWKS) from OP host. The JWKS is a set of keys containing the public keys that should be used to verify any JSON Web Token (JWT) issued by the authorization server. There are few operations we can do using jans-cli commands. To get list of operations id run below command: /opt/jans/jans-cli/config-cli.py --info ConfigurationJwkJsonWebKeyJwk It returns operations id with details information. Operation ID: get-config-jwks Description: Gets list of JSON Web Key (JWK) used by server. JWK is a JSON data structure that represents a set of public keys as a JSON object [RFC4627]. Operation ID: put-config-jwks Description: Puts/replaces JSON Web Keys (JWKS). Schema: /components/schemas/WebKeysConfiguration Operation ID: patch-config-jwks Description: Patch JSON Web Keys (JWKS). Schema: Array of /components/schemas/PatchRequest Operation ID: post-config-jwks-key Description: Adds a new key to JSON Web Keys (JWKS). Schema: /components/schemas/JsonWebKey Operation ID: put-config-jwk-kid Description: Get a JSON Web Key based on kid url-suffix: kid Operation ID: patch-config-jwk-kid Description: Patch a specific JSON Web Key based on kid url-suffix: kid Schema: Array of /components/schemas/PatchRequest Operation ID: delete-config-jwk-kid Description: Delete a JSON Web Key based on kid url-suffix: kid To get sample schema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/PatchRequest Let's explore each of these operations. Get Configurations list of JWKs # We can get list of all configurations of the jwk configuration within a single command like this: /opt/jans/jans-cli/config-cli.py --operation-id get-config-jwks It will return all the jwk configuration information as below: Getting access token for scope https://jans.io/oauth/config/jwks.readonly { \"keys\": [ { \"kid\": \"8627c7e1-0702-4103-9c28-28ff6a818da9_sig_rs256\", \"kty\": \"RSA\", \"use\": \"sig\", \"alg\": \"RS256\", \"crv\": \"\", \"exp\": 1622245655163, \"x5c\": [ \"MIIDCjCCAfKgAwIBAgIhAIi82XlGMTJRsn5djImvoD2wSLY1hkhPPUv2qaGjvC3IMA0GCSqGSIb3DQEBCwUAMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwNTI2MjM0NzI1WhcNMjEwNTI4MjM0NzM1WjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAqpU+2D0eQTszq3iq7qIHm3ryYGIDd4+3WUwMyCJoV0dYDDKZwFxaZD9auW/9wsqQZnwJcpYuDt+sAYVfei7+1nLKZhuo1eRLQxpHzDTmAoQcuWAGDg5f0sL24qaO9n1zSNAcEt8pyRJVZ1VcCEePryNSoustDZX36Eh/1pAOVjHzlVXSWCMtlS5uG6VcWoCzbrQU/z8ittfWqSpk/hM6z9KO95JofuFm5JG3U6qMFiZdG5qp3dY2zQ8clpqtV4yqaMTD6mv3IiH3TGxo1PGS2UHCRWh6TLVp15ElLlGiaaC6LlYxIdxMgV2AV80718ROKQT8OieVY5Q2T+198lPUWwIDAQABoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwDQYJKoZIhvcNAQELBQADggEBAGGUO67E3UjQaaxGI2pIrau0A5qWF0SAMay2FI+o1xstud8+imkANjoqIQgWVpaZCR6I7q9rDHbaSHQy6uPHRBGVtV9izC+vr6+ohVjyFO/1K97FHQJxaR62X+qswFHot6RGFjQbMDEWQs/BMOfuojp7rvkRYjazdxqX2Obbp0cmHuaJV0iiZ71+k2VpoJrpdP/RI+3OdCWvV+fydNDrBXAi7JYNaqhx9wVoqVEeMAOCXbcjEe6YiYcU2WHPCD7DaeOzPgJimzc5ujyu30RFMVl5RYOMYgETt4g+fVKDuRcstQJaR5zowBUGaiXCjOfhfkWa2fFd9v4hg5Y7YCmOMtI=\" ], \"n\": \"qpU-2D0eQTszq3iq7qIHm3ryYGIDd4-3WUwMyCJoV0dYDDKZwFxaZD9auW_9wsqQZnwJcpYuDt-sAYVfei7-1nLKZhuo1eRLQxpHzDTmAoQcuWAGDg5f0sL24qaO9n1zSNAcEt8pyRJVZ1VcCEePryNSoustDZX36Eh_1pAOVjHzlVXSWCMtlS5uG6VcWoCzbrQU_z8ittfWqSpk_hM6z9KO95JofuFm5JG3U6qMFiZdG5qp3dY2zQ8clpqtV4yqaMTD6mv3IiH3TGxo1PGS2UHCRWh6TLVp15ElLlGiaaC6LlYxIdxMgV2AV80718ROKQT8OieVY5Q2T-198lPUWw\", \"e\": \"AQAB\", \"x\": null, \"y\": null }, { \"kid\": \"77e3dec8-8a3e-479b-bcfc-aa508e5d9825_sig_rs384\", \"kty\": \"RSA\", \"use\": \"sig\", \"alg\": \"RS384\", \"crv\": \"\", \"exp\": 1622245655163, \"x5c\": [ \"MIIDCjCCAfKgAwIBAgIhAPMrnxSwxnvlx7up5juXI8j52fQQwbmdLtcooIjv7pC3MA0GCSqGSIb3DQEBDAUAMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwNTI2MjM0NzI2WhcNMjEwNTI4MjM0NzM1WjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAq415zmHRArQ9zD5YN44nG52yJI7FakkBUN/aYWNJSCk5Pq/0qc7tm3M6Jhqrz8XuOMfatqzOxG65i4s/kOwGmET+Mq+lJ416A9toUfGdZRHmint/spGOf5nUeWjXRxMOooVtafq0Ao2/WZnsBB4jfAI9F211pJv2MNcxJ1ZwLpNSoaJSrEgxQh3laIVBozEcikozSOVUj8CMfF+WJRo049nv+IazTwTg1ZS96WcAztIemqgjAoE80i9Y4DYNp1R97A9MtFcsLlEPjYyiGmt5SomRa1oo6gymMs3AHYBdYPY/U4iXMsNDBsG+8cbTz44fFTkWHeWSuTnP9z8aj32HFQIDAQABoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwDQYJKoZIhvcNAQEMBQADggEBAKdot2Upc7jH4XfgqXFDCkD0ILB2Zu/HE1PG0UGetJiR0hHwQ64CebpBqa8ExCHxiCamGjck6mZOVQHphJ0bgG1svMBG4M/x//RZcFld9L+mlPVEeTDJY5K0cb1csbuziACF1MrZB4pvVIVZgywdGFm+EqJ0aHDr5ByP5foBwqR3e7nGbuu6xWJx1hbXOrnjOFUqlwtnq0Qy4ZNNKgAbVW7n1We44ceWhWb4UenM5Ee2+xy1y9hkETdyLfgSjRh75pAv/+BhLM98x8ozns5bZXMTMZXt49Pbr29x2axBObGwKpv7Suqqndaw09iwSDtzyNUMVnCU4C1ikrozC8KHGvE=\" ], \"n\": \"q415zmHRArQ9zD5YN44nG52yJI7FakkBUN_aYWNJSCk5Pq_0qc7tm3M6Jhqrz8XuOMfatqzOxG65i4s_kOwGmET-Mq-lJ416A9toUfGdZRHmint_spGOf5nUeWjXRxMOooVtafq0Ao2_WZnsBB4jfAI9F211pJv2MNcxJ1ZwLpNSoaJSrEgxQh3laIVBozEcikozSOVUj8CMfF-WJRo049nv-IazTwTg1ZS96WcAztIemqgjAoE80i9Y4DYNp1R97A9MtFcsLlEPjYyiGmt5SomRa1oo6gymMs3AHYBdYPY_U4iXMsNDBsG-8cbTz44fFTkWHeWSuTnP9z8aj32HFQ\", \"e\": \"AQAB\", \"x\": null, \"y\": null }, { \"kid\": \"cb0b2d29-0d2f-411f-9d47-5885cffad6e2_sig_rs512\", \"kty\": \"RSA\", \"use\": \"sig\", \"alg\": \"RS512\", \"crv\": \"\", \"exp\": 1622245655163, \"x5c\": [ \"MIIDCTCCAfGgAwIBAgIgW10M3Wl7/TEDNK9DarGKNAFT+4E3HQfyJcVmh0e3s8gwDQYJKoZIhvcNAQENBQAwJDEiMCAGA1UEAwwZSmFucyBBdXRoIENBIENlcnRpZmljYXRlczAeFw0yMTA1MjYyMzQ3MjdaFw0yMTA1MjgyMzQ3MzVaMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDrEdrcsQGHM1T+7ZcpU46DbbxGTA2qM4T6FSFb2UEPyeD/zKnCcdOgM/598tSzsKZJrIR3ZQn1igzcJkm7gKqkn7Qbg3Thk+MZtX28S68YJSDonjdce1NkIn3fx3TsImBh2Le9iOJfkLRnwCFm1EnplahNZYmV6PyHZ9IChpC6XCoBa6+U6O/owL5iAS34XrRHKxJaECTJObI2Gydg1doEP8jSnU3EZChSwmRDCSE3IH7oiTIIISdhMhD5ZBWGZlPl73Mj8PzYUdWOU1ZqCDngCfBm+SGvXBJcSheJr4la9mnl0AtCnE3zwEGWLKBxhouDQvXYa6ELq8r3VbDBb+4VAgMBAAGjJzAlMCMGA1UdJQQcMBoGCCsGAQUFBwMBBggrBgEFBQcDAgYEVR0lADANBgkqhkiG9w0BAQ0FAAOCAQEAx8ykyU8CAE6IS+li9pRx/rStBNgvAyY8TiQDlpkBSPwA64KuKWZmSjmMqjZLtqCEIY5X9+GPAeEhFtBQYJVcxYAAWV7JnMrq6RuWmom1gHN8igOYEyBSwPWb9TS1kWrPYg/hD4p9kOlNAbbdEuid/NPWOZJ4uGA1+ViEY9D29dsYvPpPLBxf7XFVjXAkljefi3yREQzEpJ7/cerJW9WyYCeS0/Ahr8Yhn2txBwrniMwyMJPLb+KvLWfqPol0zsyHBwWIa2nygTHJ8mYftHGO26dxIef2kQAu5uUX7po4MXFUBkuUnrkqB2CfvjMq5cU5AATgtPDdmJjKMQ9ZjgGhNQ==\" ], \"n\": \"6xHa3LEBhzNU_u2XKVOOg228RkwNqjOE-hUhW9lBD8ng_8ypwnHToDP-ffLUs7CmSayEd2UJ9YoM3CZJu4CqpJ-0G4N04ZPjGbV9vEuvGCUg6J43XHtTZCJ938d07CJgYdi3vYjiX5C0Z8AhZtRJ6ZWoTWWJlej8h2fSAoaQulwqAWuvlOjv6MC-YgEt-F60RysSWhAkyTmyNhsnYNXaBD_I0p1NxGQoUsJkQwkhNyB-6IkyCCEnYTIQ-WQVhmZT5e9zI_D82FHVjlNWagg54AnwZvkhr1wSXEoXia-JWvZp5dALQpxN88BBliygcYaLg0L12GuhC6vK91WwwW_uFQ\", \"e\": \"AQAB\", \"x\": null, \"y\": null }, ... ... ... ] Adds new JSON Web key (JWK) # In case we need to add new key, we can use this operation id. To add a new key, we need to follow the schema definition. If we look at the description, we can see a schema definition available. Operation ID: post-config-jwks-key Description: Adds a new key to JSON Web Keys (JWKS). Schema: /components/schemas/JsonWebKey So, let's get the schema file and update it with keys data: /opt/jans/jans-cli/config-cli.py --schema /components/schemas/JsonWebKey > /tmp/jwk.json { \"kid\": \"string\", \"kty\": \"string\", \"use\": \"string\", \"alg\": \"string\", \"crv\": null, \"exp\": \"integer\", \"x5c\": [], \"n\": null, \"e\": null, \"x\": null, \"y\": null } Let's update the json file; In our case, I have added sample data for testing purpose only. \"kid\": \"dd550214-7969-41b9-b919-2a0cfa36047b_enc_rsa1_5\", \"kty\": \"RSA\", \"use\": \"enc\", \"alg\": \"RSA-OAEP\", \"crv\": \"\", \"exp\": 1622245655163, \"x5c\": [ \"MIIDCjCCAfKgAwIBAgIhANYLiviUTmgOsf9Bf+6N/pr6H4Mis5ku1VXNj7VW/CMbMA0GCSqGSIb3DQEBCwUAMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwNTI2MjM0NzI5WhcNMjEwNTI4MjM0NzM1WjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArlD19ib3J2bKYr2iap1d/gCmbXocMJTk5o7o3h9jJKXbh9pdf2gd3ZOE6wc5XwGx/CfHSgdEmACCXMiG7sQt80DPM67dlbtv/pEnWrHk4fwwst83OF+HXTSi4Sd9QWhDtBvaUu8Rp8ir+x2D0RK8YNGs0prA+qGR8O/h6Y+ascz4VNbbDlbJ+w7DJYeWU1HVp/5Lt8O5i4Q6I8KZEAytwvspF5y8m8DCrfYXF6Kz14vXgqr08hj0l0Aj4O3y/9i8kf2pmznpu5QEDimj1yxEB+G5WEYuHD/+qRTV85OXDIQJz6fgNM4kEimv7pmspcDfk/KKB7/KT0rEOn7T2rXW9QIDAQABoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwDQYJKoZIhvcNAQELBQADggEBAKrtlIPhvDBxBfcqS9Xy39QqE1WOPiNQooa/FVVOsCROdRZrHhFcP27HpxO9e6genQSJ6nBRaJ4ykEf0oM535Ker5jZcDWzCwPIyt+5Kc6qeacZI5FxEHRldYkSd4lF1OTzQNvGLOPKnNWnYnXwj48ZxO50lJUsRFspVbP79E6llVNOPexrZ2GOzWghyY1E74f4uGr6fzcXQk2aFaIfLusoJlvbROPTnDu68Jt+IW4WZcO4F0tl0JIcuaqSmLS6McJW0Mpmu4wqEPV6E45zRAuX0kJUkKDMzM/lYW1MZ8QaSTt/pCmlknX1+KTgb6Sf9zZJEya8AyKML/NCpc4sfn8g=\" ], \"n\": \"rlD19ib3J2bKYr2iap1d_gCmbXocMJTk5o7o3h9jJKXbh9pdf2gd3ZOE6wc5XwGx_CfHSgdEmACCXMiG7sQt80DPM67dlbtv_pEnWrHk4fwwst83OF-HXTSi4Sd9QWhDtBvaUu8Rp8ir-x2D0RK8YNGs0prA-qGR8O_h6Y-ascz4VNbbDlbJ-w7DJYeWU1HVp_5Lt8O5i4Q6I8KZEAytwvspF5y8m8DCrfYXF6Kz14vXgqr08hj0l0Aj4O3y_9i8kf2pmznpu5QEDimj1yxEB-G5WEYuHD_-qRTV85OXDIQJz6fgNM4kEimv7pmspcDfk_KKB7_KT0rEOn7T2rXW9Q\", \"e\": \"AQAB\", \"x\": null, \"y\": null Now let's post this keys into the list using below command: /opt/jans/jans-cli/config-cli.py --operation-id post-config-jwks-key --data /tmp/jwk.json Update / Replace JSON Web Key (JWK) # To update / replace any JWK configuration, let get the schema first. Operation ID: put-config-jwks Description: Puts/replaces JSON Web Keys (JWKS). Schema: /components/schemas/WebKeysConfiguration To get the schema file: /opt/jans/jans-cli/config-cli.py --schema /components/schemas/WebKeysConfiguration > /tmp/path-jwk.json root@testjans:~# cat /tmp/path-jwk.json { \"keys\": { \"kid\": null, \"kty\": null, \"use\": null, \"alg\": null, \"crv\": null, \"exp\": null, \"x5c\": [], \"n\": null, \"e\": null, \"x\": null, \"y\": null } } It's a json file containing key-value pair. Each of these properties in the key is defined by the JWK specification RFC 7517 , and for algorithm-specific properties, in RFC 7518 . Properties # name Description kid It's a unique identifier for the key configuration. kty It's used to define the type of the specific cryptographic algorithms use This parameter identifies the intend use of the public key. sig for signature and enc for encryption alg The specific algorithm used with the key crv exp The exponent for the RSA public key. x5c The x5c parameter contains a chain of one or more PKIX certificates RFC5280 n The modulus for the RSA public key . e The \"e\" (exponent) parameter contains the exponent value for the RSA public key . It is represented as a Base64urlUInt-encoded value. x The \"x\" (x coordinate) parameter contains the x coordinate for the Elliptic Curve point . y The \"y\" (y coordinate) parameter contains the y coordinate for the Elliptic Curve point . If you want to explore more, please go through the reference link. Let's update the json file to create a new key configuration. { \"keys\": [{ \"kid\": \"dd550214-7969-41b9-b919-2a0cfa36047b_enc_rsa1_5\", \"kty\": \"RSA\", \"use\": \"enc\", \"alg\": \"RSA-OAEP\", \"crv\": \"\", \"exp\": 1622245655163, \"x5c\": [ \"MIIDCjCCAfKgAwIBAgIhANYLiviUTmgOsf9Bf+6N/pr6H4Mis5ku1VXNj7VW/CMbMA0GCSqGSIb3DQEBCwUAMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwNTI2MjM0NzI5WhcNMjEwNTI4MjM0NzM1WjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArlD19ib3J2bKYr2iap1d/gCmbXocMJTk5o7o3h9jJKXbh9pdf2gd3ZOE6wc5XwGx/CfHSgdEmACCXMiG7sQt80DPM67dlbtv/pEnWrHk4fwwst83OF+HXTSi4Sd9QWhDtBvaUu8Rp8ir+x2D0RK8YNGs0prA+qGR8O/h6Y+ascz4VNbbDlbJ+w7DJYeWU1HVp/5Lt8O5i4Q6I8KZEAytwvspF5y8m8DCrfYXF6Kz14vXgqr08hj0l0Aj4O3y/9i8kf2pmznpu5QEDimj1yxEB+G5WEYuHD/+qRTV85OXDIQJz6fgNM4kEimv7pmspcDfk/KKB7/KT0rEOn7T2rXW9QIDAQABoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwDQYJKoZIhvcNAQELBQADggEBAKrtlIPhvDBxBfcqS9Xy39QqE1WOPiNQooa/FVVOsCROdRZrHhFcP27HpxO9e6genQSJ6nBRaJ4ykEf0oM535Ker5jZcDWzCwPIyt+5Kc6qeacZI5FxEHRldYkSd4lF1OTzQNvGLOPKnNWnYnXwj48ZxO50lJUsRFspVbP79E6llVNOPexrZ2GOzWghyY1E74f4uGr6fzcXQk2aFaIfLusoJlvbROPTnDu68Jt+IW4WZcO4F0tl0JIcuaqSmLS6McJW0Mpmu4wqEPV6E45zRAuX0kJUkKDMzM/lYW1MZ8QaSTt/pCmlknX1+KTgb6Sf9zZJEya8AyKML/NCpc4sfn8g=\" ], \"n\": \"rlD19ib3J2bKYr2iap1d_gCmbXocMJTk5o7o3h9jJKXbh9pdf2gd3ZOE6wc5XwGx_CfHSgdEmACCXMiG7sQt80DPM67dlbtv_pEnWrHk4fwwst83OF-HXTSi4Sd9QWhDtBvaUu8Rp8ir-x2D0RK8YNGs0prA-qGR8O_h6Y-ascz4VNbbDlbJ-w7DJYeWU1HVp_5Lt8O5i4Q6I8KZEAytwvspF5y8m8DCrfYXF6Kz14vXgqr08hj0l0Aj4O3y_9i8kf2pmznpu5QEDimj1yxEB-G5WEYuHD_-qRTV85OXDIQJz6fgNM4kEimv7pmspcDfk_KKB7_KT0rEOn7T2rXW9Q\", \"e\": \"AQAB\", \"x\": null, \"y\": null }] } Please remember if kid already matched then this will be replaced otherwise a new key configuration will be created in the Janssen server. Now let's put the updated data into the Janssen server. /opt/jans/jans-cli/config-cli.py --operation-id put-config-jwks --data /tmp/path-jwk.json Getting access token for scope https://jans.io/oauth/config/jwks.write Server Response: { \"keys\": [ { \"kid\": \"dd550214-7969-41b9-b919-2a0cfa36047b_enc_rsa1_5\", \"kty\": \"RSA\", \"use\": \"enc\", \"alg\": \"RSA-OAEP\", \"crv\": \"\", \"exp\": 1622245655163, \"x5c\": [ \"MIIDCjCCAfKgAwIBAgIhANYLiviUTmgOsf9Bf+6N/pr6H4Mis5ku1VXNj7VW/CMbMA0GCSqGSIb3DQEBCwUAMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwNTI2MjM0NzI5WhcNMjEwNTI4MjM0NzM1WjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArlD19ib3J2bKYr2iap1d/gCmbXocMJTk5o7o3h9jJKXbh9pdf2gd3ZOE6wc5XwGx/CfHSgdEmACCXMiG7sQt80DPM67dlbtv/pEnWrHk4fwwst83OF+HXTSi4Sd9QWhDtBvaUu8Rp8ir+x2D0RK8YNGs0prA+qGR8O/h6Y+ascz4VNbbDlbJ+w7DJYeWU1HVp/5Lt8O5i4Q6I8KZEAytwvspF5y8m8DCrfYXF6Kz14vXgqr08hj0l0Aj4O3y/9i8kf2pmznpu5QEDimj1yxEB+G5WEYuHD/+qRTV85OXDIQJz6fgNM4kEimv7pmspcDfk/KKB7/KT0rEOn7T2rXW9QIDAQABoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwDQYJKoZIhvcNAQELBQADggEBAKrtlIPhvDBxBfcqS9Xy39QqE1WOPiNQooa/FVVOsCROdRZrHhFcP27HpxO9e6genQSJ6nBRaJ4ykEf0oM535Ker5jZcDWzCwPIyt+5Kc6qeacZI5FxEHRldYkSd4lF1OTzQNvGLOPKnNWnYnXwj48ZxO50lJUsRFspVbP79E6llVNOPexrZ2GOzWghyY1E74f4uGr6fzcXQk2aFaIfLusoJlvbROPTnDu68Jt+IW4WZcO4F0tl0JIcuaqSmLS6McJW0Mpmu4wqEPV6E45zRAuX0kJUkKDMzM/lYW1MZ8QaSTt/pCmlknX1+KTgb6Sf9zZJEya8AyKML/NCpc4sfn8g=\" ], \"n\": \"rlD19ib3J2bKYr2iap1d_gCmbXocMJTk5o7o3h9jJKXbh9pdf2gd3ZOE6wc5XwGx_CfHSgdEmACCXMiG7sQt80DPM67dlbtv_pEnWrHk4fwwst83OF-HXTSi4Sd9QWhDtBvaUu8Rp8ir-x2D0RK8YNGs0prA-qGR8O_h6Y-ascz4VNbbDlbJ-w7DJYeWU1HVp_5Lt8O5i4Q6I8KZEAytwvspF5y8m8DCrfYXF6Kz14vXgqr08hj0l0Aj4O3y_9i8kf2pmznpu5QEDimj1yxEB-G5WEYuHD_-qRTV85OXDIQJz6fgNM4kEimv7pmspcDfk_KKB7_KT0rEOn7T2rXW9Q\", \"e\": \"AQAB\", \"x\": null, \"y\": null } ] } Please remember, This operation replaces all JWKs having in the Janssen server with new ones. So, In this case, if you want to keep olds JWKs, you have to put them as well in the schema file. Get a JSON Web Key Based on kid # We know that get-config-jwks operation-id returns all the json web keys available in the Janssen Server. With this operation-id, We can get any specific jwk matched with kid. If we know the kid , we can simply use the below command: /opt/jans/jans-cli/config-cli.py --operation-id put-config-jwk-kid --url-suffix kid:new-key-test-id It returns the details as below: Ge tt i n g access t oke n f or scope h tt ps : //jans.io/oauth/config/jwks.readonly { \"kid\" : \"new-key-test-id\" , \"kty\" : \"RSA\" , \"use\" : \"enc\" , \"alg\" : \"RSA-OAEP\" , \"crv\" : \"\" , \"exp\" : 1622245655163 , \"x5c\" : [ \"MIIDCjCCAfKgAwIBAgIhANYLiviUTmgOsf9Bf+6N/pr6H4Mis5ku1VXNj7VW/CMbMA0GCSqGSIb3DQEBCwUAMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwNTI2MjM0NzI5WhcNMjEwNTI4MjM0NzM1WjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArlD19ib3J2bKYr2iap1d/gCmbXocMJTk5o7o3h9jJKXbh9pdf2gd3ZOE6wc5XwGx/CfHSgdEmACCXMiG7sQt80DPM67dlbtv/pEnWrHk4fwwst83OF+HXTSi4Sd9QWhDtBvaUu8Rp8ir+x2D0RK8YNGs0prA+qGR8O/h6Y+ascz4VNbbDlbJ+w7DJYeWU1HVp/5Lt8O5i4Q6I8KZEAytwvspF5y8m8DCrfYXF6Kz14vXgqr08hj0l0Aj4O3y/9i8kf2pmznpu5QEDimj1yxEB+G5WEYuHD/+qRTV85OXDIQJz6fgNM4kEimv7pmspcDfk/KKB7/KT0rEOn7T2rXW9QIDAQABoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwDQYJKoZIhvcNAQELBQADggEBAKrtlIPhvDBxBfcqS9Xy39QqE1WOPiNQooa/FVVOsCROdRZrHhFcP27HpxO9e6genQSJ6nBRaJ4ykEf0oM535Ker5jZcDWzCwPIyt+5Kc6qeacZI5FxEHRldYkSd4lF1OTzQNvGLOPKnNWnYnXwj48ZxO50lJUsRFspVbP79E6llVNOPexrZ2GOzWghyY1E74f4uGr6fzcXQk2aFaIfLusoJlvbROPTnDu68Jt+IW4WZcO4F0tl0JIcuaqSmLS6McJW0Mpmu4wqEPV6E45zRAuX0kJUkKDMzM/lYW1MZ8QaSTt/pCmlknX1+KTgb6Sf9zZJEya8AyKML/NCpc4sfn8g=\" ], \"n\" : \"rlD19ib3J2bKYr2iap1d_gCmbXocMJTk5o7o3h9jJKXbh9pdf2gd3ZOE6wc5XwGx_CfHSgdEmACCXMiG7sQt80DPM67dlbtv_pEnWrHk4fwwst83OF-HXTSi4Sd9QWhDtBvaUu8Rp8ir-x2D0RK8YNGs0prA-qGR8O_h6Y-ascz4VNbbDlbJ-w7DJYeWU1HVp_5Lt8O5i4Q6I8KZEAytwvspF5y8m8DCrfYXF6Kz14vXgqr08hj0l0Aj4O3y_9i8kf2pmznpu5QEDimj1yxEB-G5WEYuHD_-qRTV85OXDIQJz6fgNM4kEimv7pmspcDfk_KKB7_KT0rEOn7T2rXW9Q\" , \"e\" : \"AQAB\" , \"x\" : null , \"y\" : null } Patch JSON Web Key (JWK) by kid # With this operation id, we can modify JSON Web Keys partially of its properties. Operation ID: patch-config-jwks Description: Patch JSON Web Keys ( JWKS ) . Schema: Array of /components/schemas/PatchRequest In this case, We are going to a test data JWK that already added in jwk list of the Janssen server. { \"kid\" : \"new-key-test-id\" , \"kty\" : \"RSA\" , \"use\" : \"enc\" , \"alg\" : \"RSA-OAEP\" , \"crv\" : \"\" , \"exp\" : 1622245655163 , \"x5c\" : [ \"MIIDCjCCAfKgAwIBAgIhANYLiviUTmgOsf9Bf+6N/pr6H4Mis5ku1VXNj7VW/CMbMA0GCSqGSIb3DQEBCwUAMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwNTI2MjM0NzI5WhcNMjEwNTI4MjM0NzM1WjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArlD19ib3J2bKYr2iap1d/gCmbXocMJTk5o7o3h9jJKXbh9pdf2gd3ZOE6wc5XwGx/CfHSgdEmACCXMiG7sQt80DPM67dlbtv/pEnWrHk4fwwst83OF+HXTSi4Sd9QWhDtBvaUu8Rp8ir+x2D0RK8YNGs0prA+qGR8O/h6Y+ascz4VNbbDlbJ+w7DJYeWU1HVp/5Lt8O5i4Q6I8KZEAytwvspF5y8m8DCrfYXF6Kz14vXgqr08hj0l0Aj4O3y/9i8kf2pmznpu5QEDimj1yxEB+G5WEYuHD/+qRTV85OXDIQJz6fgNM4kEimv7pmspcDfk/KKB7/KT0rEOn7T2rXW9QIDAQABoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwDQYJKoZIhvcNAQELBQADggEBAKrtlIPhvDBxBfcqS9Xy39QqE1WOPiNQooa/FVVOsCROdRZrHhFcP27HpxO9e6genQSJ6nBRaJ4ykEf0oM535Ker5jZcDWzCwPIyt+5Kc6qeacZI5FxEHRldYkSd4lF1OTzQNvGLOPKnNWnYnXwj48ZxO50lJUsRFspVbP79E6llVNOPexrZ2GOzWghyY1E74f4uGr6fzcXQk2aFaIfLusoJlvbROPTnDu68Jt+IW4WZcO4F0tl0JIcuaqSmLS6McJW0Mpmu4wqEPV6E45zRAuX0kJUkKDMzM/lYW1MZ8QaSTt/pCmlknX1+KTgb6Sf9zZJEya8AyKML/NCpc4sfn8g=\" ], \"n\" : \"rlD19ib3J2bKYr2iap1d_gCmbXocMJTk5o7o3h9jJKXbh9pdf2gd3ZOE6wc5XwGx_CfHSgdEmACCXMiG7sQt80DPM67dlbtv_pEnWrHk4fwwst83OF-HXTSi4Sd9QWhDtBvaUu8Rp8ir-x2D0RK8YNGs0prA-qGR8O_h6Y-ascz4VNbbDlbJ-w7DJYeWU1HVp_5Lt8O5i4Q6I8KZEAytwvspF5y8m8DCrfYXF6Kz14vXgqr08hj0l0Aj4O3y_9i8kf2pmznpu5QEDimj1yxEB-G5WEYuHD_-qRTV85OXDIQJz6fgNM4kEimv7pmspcDfk_KKB7_KT0rEOn7T2rXW9Q\" , \"e\" : \"AQAB\" , \"x\" : null , \"y\" : null } We can see here kid is new-key-test-id . Before going to patch this key, let's define the schema first. In this example; We are going to change use from enc to sig . So our schema definition as below: [ { \"op\" : \"replace\" , \"path\" : \"use\" , \"value\" : \"sig\" } ] Please, remember, you can do multiple operation within a single command because this schema definition support array of multiple operations. Now let's do the operation with below command line. /opt/jans/jans-cli/config-cli.py --operation-id patch-config-jwk-kid --url-suffix kid:new-key-test-id --data /tmp/schema.json You need to change kid and data path according to your own. Updated Json Web Key: Ge tt i n g access t oke n f or scope h tt ps : //jans.io/oauth/config/jwks.write Server Respo nse : { \"kid\" : \"new-key-test-id\" , \"kty\" : \"RSA\" , \"use\" : \"sig\" , \"alg\" : \"RSA-OAEP\" , \"crv\" : null , \"exp\" : 1622245655163 , \"x5c\" : [ \"MIIDCjCCAfKgAwIBAgIhANYLiviUTmgOsf9Bf+6N/pr6H4Mis5ku1VXNj7VW/CMbMA0GCSqGSIb3DQEBCwUAMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwNTI2MjM0NzI5WhcNMjEwNTI4MjM0NzM1WjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArlD19ib3J2bKYr2iap1d/gCmbXocMJTk5o7o3h9jJKXbh9pdf2gd3ZOE6wc5XwGx/CfHSgdEmACCXMiG7sQt80DPM67dlbtv/pEnWrHk4fwwst83OF+HXTSi4Sd9QWhDtBvaUu8Rp8ir+x2D0RK8YNGs0prA+qGR8O/h6Y+ascz4VNbbDlbJ+w7DJYeWU1HVp/5Lt8O5i4Q6I8KZEAytwvspF5y8m8DCrfYXF6Kz14vXgqr08hj0l0Aj4O3y/9i8kf2pmznpu5QEDimj1yxEB+G5WEYuHD/+qRTV85OXDIQJz6fgNM4kEimv7pmspcDfk/KKB7/KT0rEOn7T2rXW9QIDAQABoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwDQYJKoZIhvcNAQELBQADggEBAKrtlIPhvDBxBfcqS9Xy39QqE1WOPiNQooa/FVVOsCROdRZrHhFcP27HpxO9e6genQSJ6nBRaJ4ykEf0oM535Ker5jZcDWzCwPIyt+5Kc6qeacZI5FxEHRldYkSd4lF1OTzQNvGLOPKnNWnYnXwj48ZxO50lJUsRFspVbP79E6llVNOPexrZ2GOzWghyY1E74f4uGr6fzcXQk2aFaIfLusoJlvbROPTnDu68Jt+IW4WZcO4F0tl0JIcuaqSmLS6McJW0Mpmu4wqEPV6E45zRAuX0kJUkKDMzM/lYW1MZ8QaSTt/pCmlknX1+KTgb6Sf9zZJEya8AyKML/NCpc4sfn8g=\" ], \"n\" : \"rlD19ib3J2bKYr2iap1d_gCmbXocMJTk5o7o3h9jJKXbh9pdf2gd3ZOE6wc5XwGx_CfHSgdEmACCXMiG7sQt80DPM67dlbtv_pEnWrHk4fwwst83OF-HXTSi4Sd9QWhDtBvaUu8Rp8ir-x2D0RK8YNGs0prA-qGR8O_h6Y-ascz4VNbbDlbJ-w7DJYeWU1HVp_5Lt8O5i4Q6I8KZEAytwvspF5y8m8DCrfYXF6Kz14vXgqr08hj0l0Aj4O3y_9i8kf2pmznpu5QEDimj1yxEB-G5WEYuHD_-qRTV85OXDIQJz6fgNM4kEimv7pmspcDfk_KKB7_KT0rEOn7T2rXW9Q\" , \"e\" : \"AQAB\" , \"x\" : null , \"y\" : null } We see it has replaced use from enc to sig . Please read about patch method , You can get some idea how this patch method works to modify particular properties of any task. Delete Json Web Key using kid # It's pretty simple to delete json web key using its kid . The command line is: /opt/jans/jans-cli/config-cli.py --operation-id delete-config-jwk-kid --url-suffix kid:new-key-test-id It will delete the jwk if it matches with the given kid .","title":"JSON Web Key"},{"location":"admin/config-guide/json-web-key-config/#json-web-key-jwk","text":"Prerequisite: Know how to use the Janssen CLI in command-line mode This operation is used to get the JSON Web Key Set (JWKS) from OP host. The JWKS is a set of keys containing the public keys that should be used to verify any JSON Web Token (JWT) issued by the authorization server. There are few operations we can do using jans-cli commands. To get list of operations id run below command: /opt/jans/jans-cli/config-cli.py --info ConfigurationJwkJsonWebKeyJwk It returns operations id with details information. Operation ID: get-config-jwks Description: Gets list of JSON Web Key (JWK) used by server. JWK is a JSON data structure that represents a set of public keys as a JSON object [RFC4627]. Operation ID: put-config-jwks Description: Puts/replaces JSON Web Keys (JWKS). Schema: /components/schemas/WebKeysConfiguration Operation ID: patch-config-jwks Description: Patch JSON Web Keys (JWKS). Schema: Array of /components/schemas/PatchRequest Operation ID: post-config-jwks-key Description: Adds a new key to JSON Web Keys (JWKS). Schema: /components/schemas/JsonWebKey Operation ID: put-config-jwk-kid Description: Get a JSON Web Key based on kid url-suffix: kid Operation ID: patch-config-jwk-kid Description: Patch a specific JSON Web Key based on kid url-suffix: kid Schema: Array of /components/schemas/PatchRequest Operation ID: delete-config-jwk-kid Description: Delete a JSON Web Key based on kid url-suffix: kid To get sample schema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/PatchRequest Let's explore each of these operations.","title":"JSON Web Key (JWK)"},{"location":"admin/config-guide/json-web-key-config/#get-configurations-list-of-jwks","text":"We can get list of all configurations of the jwk configuration within a single command like this: /opt/jans/jans-cli/config-cli.py --operation-id get-config-jwks It will return all the jwk configuration information as below: Getting access token for scope https://jans.io/oauth/config/jwks.readonly { \"keys\": [ { \"kid\": \"8627c7e1-0702-4103-9c28-28ff6a818da9_sig_rs256\", \"kty\": \"RSA\", \"use\": \"sig\", \"alg\": \"RS256\", \"crv\": \"\", \"exp\": 1622245655163, \"x5c\": [ \"MIIDCjCCAfKgAwIBAgIhAIi82XlGMTJRsn5djImvoD2wSLY1hkhPPUv2qaGjvC3IMA0GCSqGSIb3DQEBCwUAMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwNTI2MjM0NzI1WhcNMjEwNTI4MjM0NzM1WjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAqpU+2D0eQTszq3iq7qIHm3ryYGIDd4+3WUwMyCJoV0dYDDKZwFxaZD9auW/9wsqQZnwJcpYuDt+sAYVfei7+1nLKZhuo1eRLQxpHzDTmAoQcuWAGDg5f0sL24qaO9n1zSNAcEt8pyRJVZ1VcCEePryNSoustDZX36Eh/1pAOVjHzlVXSWCMtlS5uG6VcWoCzbrQU/z8ittfWqSpk/hM6z9KO95JofuFm5JG3U6qMFiZdG5qp3dY2zQ8clpqtV4yqaMTD6mv3IiH3TGxo1PGS2UHCRWh6TLVp15ElLlGiaaC6LlYxIdxMgV2AV80718ROKQT8OieVY5Q2T+198lPUWwIDAQABoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwDQYJKoZIhvcNAQELBQADggEBAGGUO67E3UjQaaxGI2pIrau0A5qWF0SAMay2FI+o1xstud8+imkANjoqIQgWVpaZCR6I7q9rDHbaSHQy6uPHRBGVtV9izC+vr6+ohVjyFO/1K97FHQJxaR62X+qswFHot6RGFjQbMDEWQs/BMOfuojp7rvkRYjazdxqX2Obbp0cmHuaJV0iiZ71+k2VpoJrpdP/RI+3OdCWvV+fydNDrBXAi7JYNaqhx9wVoqVEeMAOCXbcjEe6YiYcU2WHPCD7DaeOzPgJimzc5ujyu30RFMVl5RYOMYgETt4g+fVKDuRcstQJaR5zowBUGaiXCjOfhfkWa2fFd9v4hg5Y7YCmOMtI=\" ], \"n\": \"qpU-2D0eQTszq3iq7qIHm3ryYGIDd4-3WUwMyCJoV0dYDDKZwFxaZD9auW_9wsqQZnwJcpYuDt-sAYVfei7-1nLKZhuo1eRLQxpHzDTmAoQcuWAGDg5f0sL24qaO9n1zSNAcEt8pyRJVZ1VcCEePryNSoustDZX36Eh_1pAOVjHzlVXSWCMtlS5uG6VcWoCzbrQU_z8ittfWqSpk_hM6z9KO95JofuFm5JG3U6qMFiZdG5qp3dY2zQ8clpqtV4yqaMTD6mv3IiH3TGxo1PGS2UHCRWh6TLVp15ElLlGiaaC6LlYxIdxMgV2AV80718ROKQT8OieVY5Q2T-198lPUWw\", \"e\": \"AQAB\", \"x\": null, \"y\": null }, { \"kid\": \"77e3dec8-8a3e-479b-bcfc-aa508e5d9825_sig_rs384\", \"kty\": \"RSA\", \"use\": \"sig\", \"alg\": \"RS384\", \"crv\": \"\", \"exp\": 1622245655163, \"x5c\": [ \"MIIDCjCCAfKgAwIBAgIhAPMrnxSwxnvlx7up5juXI8j52fQQwbmdLtcooIjv7pC3MA0GCSqGSIb3DQEBDAUAMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwNTI2MjM0NzI2WhcNMjEwNTI4MjM0NzM1WjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAq415zmHRArQ9zD5YN44nG52yJI7FakkBUN/aYWNJSCk5Pq/0qc7tm3M6Jhqrz8XuOMfatqzOxG65i4s/kOwGmET+Mq+lJ416A9toUfGdZRHmint/spGOf5nUeWjXRxMOooVtafq0Ao2/WZnsBB4jfAI9F211pJv2MNcxJ1ZwLpNSoaJSrEgxQh3laIVBozEcikozSOVUj8CMfF+WJRo049nv+IazTwTg1ZS96WcAztIemqgjAoE80i9Y4DYNp1R97A9MtFcsLlEPjYyiGmt5SomRa1oo6gymMs3AHYBdYPY/U4iXMsNDBsG+8cbTz44fFTkWHeWSuTnP9z8aj32HFQIDAQABoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwDQYJKoZIhvcNAQEMBQADggEBAKdot2Upc7jH4XfgqXFDCkD0ILB2Zu/HE1PG0UGetJiR0hHwQ64CebpBqa8ExCHxiCamGjck6mZOVQHphJ0bgG1svMBG4M/x//RZcFld9L+mlPVEeTDJY5K0cb1csbuziACF1MrZB4pvVIVZgywdGFm+EqJ0aHDr5ByP5foBwqR3e7nGbuu6xWJx1hbXOrnjOFUqlwtnq0Qy4ZNNKgAbVW7n1We44ceWhWb4UenM5Ee2+xy1y9hkETdyLfgSjRh75pAv/+BhLM98x8ozns5bZXMTMZXt49Pbr29x2axBObGwKpv7Suqqndaw09iwSDtzyNUMVnCU4C1ikrozC8KHGvE=\" ], \"n\": \"q415zmHRArQ9zD5YN44nG52yJI7FakkBUN_aYWNJSCk5Pq_0qc7tm3M6Jhqrz8XuOMfatqzOxG65i4s_kOwGmET-Mq-lJ416A9toUfGdZRHmint_spGOf5nUeWjXRxMOooVtafq0Ao2_WZnsBB4jfAI9F211pJv2MNcxJ1ZwLpNSoaJSrEgxQh3laIVBozEcikozSOVUj8CMfF-WJRo049nv-IazTwTg1ZS96WcAztIemqgjAoE80i9Y4DYNp1R97A9MtFcsLlEPjYyiGmt5SomRa1oo6gymMs3AHYBdYPY_U4iXMsNDBsG-8cbTz44fFTkWHeWSuTnP9z8aj32HFQ\", \"e\": \"AQAB\", \"x\": null, \"y\": null }, { \"kid\": \"cb0b2d29-0d2f-411f-9d47-5885cffad6e2_sig_rs512\", \"kty\": \"RSA\", \"use\": \"sig\", \"alg\": \"RS512\", \"crv\": \"\", \"exp\": 1622245655163, \"x5c\": [ \"MIIDCTCCAfGgAwIBAgIgW10M3Wl7/TEDNK9DarGKNAFT+4E3HQfyJcVmh0e3s8gwDQYJKoZIhvcNAQENBQAwJDEiMCAGA1UEAwwZSmFucyBBdXRoIENBIENlcnRpZmljYXRlczAeFw0yMTA1MjYyMzQ3MjdaFw0yMTA1MjgyMzQ3MzVaMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDrEdrcsQGHM1T+7ZcpU46DbbxGTA2qM4T6FSFb2UEPyeD/zKnCcdOgM/598tSzsKZJrIR3ZQn1igzcJkm7gKqkn7Qbg3Thk+MZtX28S68YJSDonjdce1NkIn3fx3TsImBh2Le9iOJfkLRnwCFm1EnplahNZYmV6PyHZ9IChpC6XCoBa6+U6O/owL5iAS34XrRHKxJaECTJObI2Gydg1doEP8jSnU3EZChSwmRDCSE3IH7oiTIIISdhMhD5ZBWGZlPl73Mj8PzYUdWOU1ZqCDngCfBm+SGvXBJcSheJr4la9mnl0AtCnE3zwEGWLKBxhouDQvXYa6ELq8r3VbDBb+4VAgMBAAGjJzAlMCMGA1UdJQQcMBoGCCsGAQUFBwMBBggrBgEFBQcDAgYEVR0lADANBgkqhkiG9w0BAQ0FAAOCAQEAx8ykyU8CAE6IS+li9pRx/rStBNgvAyY8TiQDlpkBSPwA64KuKWZmSjmMqjZLtqCEIY5X9+GPAeEhFtBQYJVcxYAAWV7JnMrq6RuWmom1gHN8igOYEyBSwPWb9TS1kWrPYg/hD4p9kOlNAbbdEuid/NPWOZJ4uGA1+ViEY9D29dsYvPpPLBxf7XFVjXAkljefi3yREQzEpJ7/cerJW9WyYCeS0/Ahr8Yhn2txBwrniMwyMJPLb+KvLWfqPol0zsyHBwWIa2nygTHJ8mYftHGO26dxIef2kQAu5uUX7po4MXFUBkuUnrkqB2CfvjMq5cU5AATgtPDdmJjKMQ9ZjgGhNQ==\" ], \"n\": \"6xHa3LEBhzNU_u2XKVOOg228RkwNqjOE-hUhW9lBD8ng_8ypwnHToDP-ffLUs7CmSayEd2UJ9YoM3CZJu4CqpJ-0G4N04ZPjGbV9vEuvGCUg6J43XHtTZCJ938d07CJgYdi3vYjiX5C0Z8AhZtRJ6ZWoTWWJlej8h2fSAoaQulwqAWuvlOjv6MC-YgEt-F60RysSWhAkyTmyNhsnYNXaBD_I0p1NxGQoUsJkQwkhNyB-6IkyCCEnYTIQ-WQVhmZT5e9zI_D82FHVjlNWagg54AnwZvkhr1wSXEoXia-JWvZp5dALQpxN88BBliygcYaLg0L12GuhC6vK91WwwW_uFQ\", \"e\": \"AQAB\", \"x\": null, \"y\": null }, ... ... ... ]","title":"Get Configurations list of JWKs"},{"location":"admin/config-guide/json-web-key-config/#adds-new-json-web-key-jwk","text":"In case we need to add new key, we can use this operation id. To add a new key, we need to follow the schema definition. If we look at the description, we can see a schema definition available. Operation ID: post-config-jwks-key Description: Adds a new key to JSON Web Keys (JWKS). Schema: /components/schemas/JsonWebKey So, let's get the schema file and update it with keys data: /opt/jans/jans-cli/config-cli.py --schema /components/schemas/JsonWebKey > /tmp/jwk.json { \"kid\": \"string\", \"kty\": \"string\", \"use\": \"string\", \"alg\": \"string\", \"crv\": null, \"exp\": \"integer\", \"x5c\": [], \"n\": null, \"e\": null, \"x\": null, \"y\": null } Let's update the json file; In our case, I have added sample data for testing purpose only. \"kid\": \"dd550214-7969-41b9-b919-2a0cfa36047b_enc_rsa1_5\", \"kty\": \"RSA\", \"use\": \"enc\", \"alg\": \"RSA-OAEP\", \"crv\": \"\", \"exp\": 1622245655163, \"x5c\": [ \"MIIDCjCCAfKgAwIBAgIhANYLiviUTmgOsf9Bf+6N/pr6H4Mis5ku1VXNj7VW/CMbMA0GCSqGSIb3DQEBCwUAMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwNTI2MjM0NzI5WhcNMjEwNTI4MjM0NzM1WjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArlD19ib3J2bKYr2iap1d/gCmbXocMJTk5o7o3h9jJKXbh9pdf2gd3ZOE6wc5XwGx/CfHSgdEmACCXMiG7sQt80DPM67dlbtv/pEnWrHk4fwwst83OF+HXTSi4Sd9QWhDtBvaUu8Rp8ir+x2D0RK8YNGs0prA+qGR8O/h6Y+ascz4VNbbDlbJ+w7DJYeWU1HVp/5Lt8O5i4Q6I8KZEAytwvspF5y8m8DCrfYXF6Kz14vXgqr08hj0l0Aj4O3y/9i8kf2pmznpu5QEDimj1yxEB+G5WEYuHD/+qRTV85OXDIQJz6fgNM4kEimv7pmspcDfk/KKB7/KT0rEOn7T2rXW9QIDAQABoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwDQYJKoZIhvcNAQELBQADggEBAKrtlIPhvDBxBfcqS9Xy39QqE1WOPiNQooa/FVVOsCROdRZrHhFcP27HpxO9e6genQSJ6nBRaJ4ykEf0oM535Ker5jZcDWzCwPIyt+5Kc6qeacZI5FxEHRldYkSd4lF1OTzQNvGLOPKnNWnYnXwj48ZxO50lJUsRFspVbP79E6llVNOPexrZ2GOzWghyY1E74f4uGr6fzcXQk2aFaIfLusoJlvbROPTnDu68Jt+IW4WZcO4F0tl0JIcuaqSmLS6McJW0Mpmu4wqEPV6E45zRAuX0kJUkKDMzM/lYW1MZ8QaSTt/pCmlknX1+KTgb6Sf9zZJEya8AyKML/NCpc4sfn8g=\" ], \"n\": \"rlD19ib3J2bKYr2iap1d_gCmbXocMJTk5o7o3h9jJKXbh9pdf2gd3ZOE6wc5XwGx_CfHSgdEmACCXMiG7sQt80DPM67dlbtv_pEnWrHk4fwwst83OF-HXTSi4Sd9QWhDtBvaUu8Rp8ir-x2D0RK8YNGs0prA-qGR8O_h6Y-ascz4VNbbDlbJ-w7DJYeWU1HVp_5Lt8O5i4Q6I8KZEAytwvspF5y8m8DCrfYXF6Kz14vXgqr08hj0l0Aj4O3y_9i8kf2pmznpu5QEDimj1yxEB-G5WEYuHD_-qRTV85OXDIQJz6fgNM4kEimv7pmspcDfk_KKB7_KT0rEOn7T2rXW9Q\", \"e\": \"AQAB\", \"x\": null, \"y\": null Now let's post this keys into the list using below command: /opt/jans/jans-cli/config-cli.py --operation-id post-config-jwks-key --data /tmp/jwk.json","title":"Adds new JSON Web key (JWK)"},{"location":"admin/config-guide/json-web-key-config/#update-replace-json-web-key-jwk","text":"To update / replace any JWK configuration, let get the schema first. Operation ID: put-config-jwks Description: Puts/replaces JSON Web Keys (JWKS). Schema: /components/schemas/WebKeysConfiguration To get the schema file: /opt/jans/jans-cli/config-cli.py --schema /components/schemas/WebKeysConfiguration > /tmp/path-jwk.json root@testjans:~# cat /tmp/path-jwk.json { \"keys\": { \"kid\": null, \"kty\": null, \"use\": null, \"alg\": null, \"crv\": null, \"exp\": null, \"x5c\": [], \"n\": null, \"e\": null, \"x\": null, \"y\": null } } It's a json file containing key-value pair. Each of these properties in the key is defined by the JWK specification RFC 7517 , and for algorithm-specific properties, in RFC 7518 .","title":"Update / Replace JSON Web Key (JWK)"},{"location":"admin/config-guide/json-web-key-config/#properties","text":"name Description kid It's a unique identifier for the key configuration. kty It's used to define the type of the specific cryptographic algorithms use This parameter identifies the intend use of the public key. sig for signature and enc for encryption alg The specific algorithm used with the key crv exp The exponent for the RSA public key. x5c The x5c parameter contains a chain of one or more PKIX certificates RFC5280 n The modulus for the RSA public key . e The \"e\" (exponent) parameter contains the exponent value for the RSA public key . It is represented as a Base64urlUInt-encoded value. x The \"x\" (x coordinate) parameter contains the x coordinate for the Elliptic Curve point . y The \"y\" (y coordinate) parameter contains the y coordinate for the Elliptic Curve point . If you want to explore more, please go through the reference link. Let's update the json file to create a new key configuration. { \"keys\": [{ \"kid\": \"dd550214-7969-41b9-b919-2a0cfa36047b_enc_rsa1_5\", \"kty\": \"RSA\", \"use\": \"enc\", \"alg\": \"RSA-OAEP\", \"crv\": \"\", \"exp\": 1622245655163, \"x5c\": [ \"MIIDCjCCAfKgAwIBAgIhANYLiviUTmgOsf9Bf+6N/pr6H4Mis5ku1VXNj7VW/CMbMA0GCSqGSIb3DQEBCwUAMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwNTI2MjM0NzI5WhcNMjEwNTI4MjM0NzM1WjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArlD19ib3J2bKYr2iap1d/gCmbXocMJTk5o7o3h9jJKXbh9pdf2gd3ZOE6wc5XwGx/CfHSgdEmACCXMiG7sQt80DPM67dlbtv/pEnWrHk4fwwst83OF+HXTSi4Sd9QWhDtBvaUu8Rp8ir+x2D0RK8YNGs0prA+qGR8O/h6Y+ascz4VNbbDlbJ+w7DJYeWU1HVp/5Lt8O5i4Q6I8KZEAytwvspF5y8m8DCrfYXF6Kz14vXgqr08hj0l0Aj4O3y/9i8kf2pmznpu5QEDimj1yxEB+G5WEYuHD/+qRTV85OXDIQJz6fgNM4kEimv7pmspcDfk/KKB7/KT0rEOn7T2rXW9QIDAQABoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwDQYJKoZIhvcNAQELBQADggEBAKrtlIPhvDBxBfcqS9Xy39QqE1WOPiNQooa/FVVOsCROdRZrHhFcP27HpxO9e6genQSJ6nBRaJ4ykEf0oM535Ker5jZcDWzCwPIyt+5Kc6qeacZI5FxEHRldYkSd4lF1OTzQNvGLOPKnNWnYnXwj48ZxO50lJUsRFspVbP79E6llVNOPexrZ2GOzWghyY1E74f4uGr6fzcXQk2aFaIfLusoJlvbROPTnDu68Jt+IW4WZcO4F0tl0JIcuaqSmLS6McJW0Mpmu4wqEPV6E45zRAuX0kJUkKDMzM/lYW1MZ8QaSTt/pCmlknX1+KTgb6Sf9zZJEya8AyKML/NCpc4sfn8g=\" ], \"n\": \"rlD19ib3J2bKYr2iap1d_gCmbXocMJTk5o7o3h9jJKXbh9pdf2gd3ZOE6wc5XwGx_CfHSgdEmACCXMiG7sQt80DPM67dlbtv_pEnWrHk4fwwst83OF-HXTSi4Sd9QWhDtBvaUu8Rp8ir-x2D0RK8YNGs0prA-qGR8O_h6Y-ascz4VNbbDlbJ-w7DJYeWU1HVp_5Lt8O5i4Q6I8KZEAytwvspF5y8m8DCrfYXF6Kz14vXgqr08hj0l0Aj4O3y_9i8kf2pmznpu5QEDimj1yxEB-G5WEYuHD_-qRTV85OXDIQJz6fgNM4kEimv7pmspcDfk_KKB7_KT0rEOn7T2rXW9Q\", \"e\": \"AQAB\", \"x\": null, \"y\": null }] } Please remember if kid already matched then this will be replaced otherwise a new key configuration will be created in the Janssen server. Now let's put the updated data into the Janssen server. /opt/jans/jans-cli/config-cli.py --operation-id put-config-jwks --data /tmp/path-jwk.json Getting access token for scope https://jans.io/oauth/config/jwks.write Server Response: { \"keys\": [ { \"kid\": \"dd550214-7969-41b9-b919-2a0cfa36047b_enc_rsa1_5\", \"kty\": \"RSA\", \"use\": \"enc\", \"alg\": \"RSA-OAEP\", \"crv\": \"\", \"exp\": 1622245655163, \"x5c\": [ \"MIIDCjCCAfKgAwIBAgIhANYLiviUTmgOsf9Bf+6N/pr6H4Mis5ku1VXNj7VW/CMbMA0GCSqGSIb3DQEBCwUAMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwNTI2MjM0NzI5WhcNMjEwNTI4MjM0NzM1WjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArlD19ib3J2bKYr2iap1d/gCmbXocMJTk5o7o3h9jJKXbh9pdf2gd3ZOE6wc5XwGx/CfHSgdEmACCXMiG7sQt80DPM67dlbtv/pEnWrHk4fwwst83OF+HXTSi4Sd9QWhDtBvaUu8Rp8ir+x2D0RK8YNGs0prA+qGR8O/h6Y+ascz4VNbbDlbJ+w7DJYeWU1HVp/5Lt8O5i4Q6I8KZEAytwvspF5y8m8DCrfYXF6Kz14vXgqr08hj0l0Aj4O3y/9i8kf2pmznpu5QEDimj1yxEB+G5WEYuHD/+qRTV85OXDIQJz6fgNM4kEimv7pmspcDfk/KKB7/KT0rEOn7T2rXW9QIDAQABoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwDQYJKoZIhvcNAQELBQADggEBAKrtlIPhvDBxBfcqS9Xy39QqE1WOPiNQooa/FVVOsCROdRZrHhFcP27HpxO9e6genQSJ6nBRaJ4ykEf0oM535Ker5jZcDWzCwPIyt+5Kc6qeacZI5FxEHRldYkSd4lF1OTzQNvGLOPKnNWnYnXwj48ZxO50lJUsRFspVbP79E6llVNOPexrZ2GOzWghyY1E74f4uGr6fzcXQk2aFaIfLusoJlvbROPTnDu68Jt+IW4WZcO4F0tl0JIcuaqSmLS6McJW0Mpmu4wqEPV6E45zRAuX0kJUkKDMzM/lYW1MZ8QaSTt/pCmlknX1+KTgb6Sf9zZJEya8AyKML/NCpc4sfn8g=\" ], \"n\": \"rlD19ib3J2bKYr2iap1d_gCmbXocMJTk5o7o3h9jJKXbh9pdf2gd3ZOE6wc5XwGx_CfHSgdEmACCXMiG7sQt80DPM67dlbtv_pEnWrHk4fwwst83OF-HXTSi4Sd9QWhDtBvaUu8Rp8ir-x2D0RK8YNGs0prA-qGR8O_h6Y-ascz4VNbbDlbJ-w7DJYeWU1HVp_5Lt8O5i4Q6I8KZEAytwvspF5y8m8DCrfYXF6Kz14vXgqr08hj0l0Aj4O3y_9i8kf2pmznpu5QEDimj1yxEB-G5WEYuHD_-qRTV85OXDIQJz6fgNM4kEimv7pmspcDfk_KKB7_KT0rEOn7T2rXW9Q\", \"e\": \"AQAB\", \"x\": null, \"y\": null } ] } Please remember, This operation replaces all JWKs having in the Janssen server with new ones. So, In this case, if you want to keep olds JWKs, you have to put them as well in the schema file.","title":"Properties"},{"location":"admin/config-guide/json-web-key-config/#get-a-json-web-key-based-on-kid","text":"We know that get-config-jwks operation-id returns all the json web keys available in the Janssen Server. With this operation-id, We can get any specific jwk matched with kid. If we know the kid , we can simply use the below command: /opt/jans/jans-cli/config-cli.py --operation-id put-config-jwk-kid --url-suffix kid:new-key-test-id It returns the details as below: Ge tt i n g access t oke n f or scope h tt ps : //jans.io/oauth/config/jwks.readonly { \"kid\" : \"new-key-test-id\" , \"kty\" : \"RSA\" , \"use\" : \"enc\" , \"alg\" : \"RSA-OAEP\" , \"crv\" : \"\" , \"exp\" : 1622245655163 , \"x5c\" : [ \"MIIDCjCCAfKgAwIBAgIhANYLiviUTmgOsf9Bf+6N/pr6H4Mis5ku1VXNj7VW/CMbMA0GCSqGSIb3DQEBCwUAMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwNTI2MjM0NzI5WhcNMjEwNTI4MjM0NzM1WjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArlD19ib3J2bKYr2iap1d/gCmbXocMJTk5o7o3h9jJKXbh9pdf2gd3ZOE6wc5XwGx/CfHSgdEmACCXMiG7sQt80DPM67dlbtv/pEnWrHk4fwwst83OF+HXTSi4Sd9QWhDtBvaUu8Rp8ir+x2D0RK8YNGs0prA+qGR8O/h6Y+ascz4VNbbDlbJ+w7DJYeWU1HVp/5Lt8O5i4Q6I8KZEAytwvspF5y8m8DCrfYXF6Kz14vXgqr08hj0l0Aj4O3y/9i8kf2pmznpu5QEDimj1yxEB+G5WEYuHD/+qRTV85OXDIQJz6fgNM4kEimv7pmspcDfk/KKB7/KT0rEOn7T2rXW9QIDAQABoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwDQYJKoZIhvcNAQELBQADggEBAKrtlIPhvDBxBfcqS9Xy39QqE1WOPiNQooa/FVVOsCROdRZrHhFcP27HpxO9e6genQSJ6nBRaJ4ykEf0oM535Ker5jZcDWzCwPIyt+5Kc6qeacZI5FxEHRldYkSd4lF1OTzQNvGLOPKnNWnYnXwj48ZxO50lJUsRFspVbP79E6llVNOPexrZ2GOzWghyY1E74f4uGr6fzcXQk2aFaIfLusoJlvbROPTnDu68Jt+IW4WZcO4F0tl0JIcuaqSmLS6McJW0Mpmu4wqEPV6E45zRAuX0kJUkKDMzM/lYW1MZ8QaSTt/pCmlknX1+KTgb6Sf9zZJEya8AyKML/NCpc4sfn8g=\" ], \"n\" : \"rlD19ib3J2bKYr2iap1d_gCmbXocMJTk5o7o3h9jJKXbh9pdf2gd3ZOE6wc5XwGx_CfHSgdEmACCXMiG7sQt80DPM67dlbtv_pEnWrHk4fwwst83OF-HXTSi4Sd9QWhDtBvaUu8Rp8ir-x2D0RK8YNGs0prA-qGR8O_h6Y-ascz4VNbbDlbJ-w7DJYeWU1HVp_5Lt8O5i4Q6I8KZEAytwvspF5y8m8DCrfYXF6Kz14vXgqr08hj0l0Aj4O3y_9i8kf2pmznpu5QEDimj1yxEB-G5WEYuHD_-qRTV85OXDIQJz6fgNM4kEimv7pmspcDfk_KKB7_KT0rEOn7T2rXW9Q\" , \"e\" : \"AQAB\" , \"x\" : null , \"y\" : null }","title":"Get a JSON Web Key Based on kid"},{"location":"admin/config-guide/json-web-key-config/#patch-json-web-key-jwk-by-kid","text":"With this operation id, we can modify JSON Web Keys partially of its properties. Operation ID: patch-config-jwks Description: Patch JSON Web Keys ( JWKS ) . Schema: Array of /components/schemas/PatchRequest In this case, We are going to a test data JWK that already added in jwk list of the Janssen server. { \"kid\" : \"new-key-test-id\" , \"kty\" : \"RSA\" , \"use\" : \"enc\" , \"alg\" : \"RSA-OAEP\" , \"crv\" : \"\" , \"exp\" : 1622245655163 , \"x5c\" : [ \"MIIDCjCCAfKgAwIBAgIhANYLiviUTmgOsf9Bf+6N/pr6H4Mis5ku1VXNj7VW/CMbMA0GCSqGSIb3DQEBCwUAMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwNTI2MjM0NzI5WhcNMjEwNTI4MjM0NzM1WjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArlD19ib3J2bKYr2iap1d/gCmbXocMJTk5o7o3h9jJKXbh9pdf2gd3ZOE6wc5XwGx/CfHSgdEmACCXMiG7sQt80DPM67dlbtv/pEnWrHk4fwwst83OF+HXTSi4Sd9QWhDtBvaUu8Rp8ir+x2D0RK8YNGs0prA+qGR8O/h6Y+ascz4VNbbDlbJ+w7DJYeWU1HVp/5Lt8O5i4Q6I8KZEAytwvspF5y8m8DCrfYXF6Kz14vXgqr08hj0l0Aj4O3y/9i8kf2pmznpu5QEDimj1yxEB+G5WEYuHD/+qRTV85OXDIQJz6fgNM4kEimv7pmspcDfk/KKB7/KT0rEOn7T2rXW9QIDAQABoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwDQYJKoZIhvcNAQELBQADggEBAKrtlIPhvDBxBfcqS9Xy39QqE1WOPiNQooa/FVVOsCROdRZrHhFcP27HpxO9e6genQSJ6nBRaJ4ykEf0oM535Ker5jZcDWzCwPIyt+5Kc6qeacZI5FxEHRldYkSd4lF1OTzQNvGLOPKnNWnYnXwj48ZxO50lJUsRFspVbP79E6llVNOPexrZ2GOzWghyY1E74f4uGr6fzcXQk2aFaIfLusoJlvbROPTnDu68Jt+IW4WZcO4F0tl0JIcuaqSmLS6McJW0Mpmu4wqEPV6E45zRAuX0kJUkKDMzM/lYW1MZ8QaSTt/pCmlknX1+KTgb6Sf9zZJEya8AyKML/NCpc4sfn8g=\" ], \"n\" : \"rlD19ib3J2bKYr2iap1d_gCmbXocMJTk5o7o3h9jJKXbh9pdf2gd3ZOE6wc5XwGx_CfHSgdEmACCXMiG7sQt80DPM67dlbtv_pEnWrHk4fwwst83OF-HXTSi4Sd9QWhDtBvaUu8Rp8ir-x2D0RK8YNGs0prA-qGR8O_h6Y-ascz4VNbbDlbJ-w7DJYeWU1HVp_5Lt8O5i4Q6I8KZEAytwvspF5y8m8DCrfYXF6Kz14vXgqr08hj0l0Aj4O3y_9i8kf2pmznpu5QEDimj1yxEB-G5WEYuHD_-qRTV85OXDIQJz6fgNM4kEimv7pmspcDfk_KKB7_KT0rEOn7T2rXW9Q\" , \"e\" : \"AQAB\" , \"x\" : null , \"y\" : null } We can see here kid is new-key-test-id . Before going to patch this key, let's define the schema first. In this example; We are going to change use from enc to sig . So our schema definition as below: [ { \"op\" : \"replace\" , \"path\" : \"use\" , \"value\" : \"sig\" } ] Please, remember, you can do multiple operation within a single command because this schema definition support array of multiple operations. Now let's do the operation with below command line. /opt/jans/jans-cli/config-cli.py --operation-id patch-config-jwk-kid --url-suffix kid:new-key-test-id --data /tmp/schema.json You need to change kid and data path according to your own. Updated Json Web Key: Ge tt i n g access t oke n f or scope h tt ps : //jans.io/oauth/config/jwks.write Server Respo nse : { \"kid\" : \"new-key-test-id\" , \"kty\" : \"RSA\" , \"use\" : \"sig\" , \"alg\" : \"RSA-OAEP\" , \"crv\" : null , \"exp\" : 1622245655163 , \"x5c\" : [ \"MIIDCjCCAfKgAwIBAgIhANYLiviUTmgOsf9Bf+6N/pr6H4Mis5ku1VXNj7VW/CMbMA0GCSqGSIb3DQEBCwUAMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwNTI2MjM0NzI5WhcNMjEwNTI4MjM0NzM1WjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArlD19ib3J2bKYr2iap1d/gCmbXocMJTk5o7o3h9jJKXbh9pdf2gd3ZOE6wc5XwGx/CfHSgdEmACCXMiG7sQt80DPM67dlbtv/pEnWrHk4fwwst83OF+HXTSi4Sd9QWhDtBvaUu8Rp8ir+x2D0RK8YNGs0prA+qGR8O/h6Y+ascz4VNbbDlbJ+w7DJYeWU1HVp/5Lt8O5i4Q6I8KZEAytwvspF5y8m8DCrfYXF6Kz14vXgqr08hj0l0Aj4O3y/9i8kf2pmznpu5QEDimj1yxEB+G5WEYuHD/+qRTV85OXDIQJz6fgNM4kEimv7pmspcDfk/KKB7/KT0rEOn7T2rXW9QIDAQABoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwDQYJKoZIhvcNAQELBQADggEBAKrtlIPhvDBxBfcqS9Xy39QqE1WOPiNQooa/FVVOsCROdRZrHhFcP27HpxO9e6genQSJ6nBRaJ4ykEf0oM535Ker5jZcDWzCwPIyt+5Kc6qeacZI5FxEHRldYkSd4lF1OTzQNvGLOPKnNWnYnXwj48ZxO50lJUsRFspVbP79E6llVNOPexrZ2GOzWghyY1E74f4uGr6fzcXQk2aFaIfLusoJlvbROPTnDu68Jt+IW4WZcO4F0tl0JIcuaqSmLS6McJW0Mpmu4wqEPV6E45zRAuX0kJUkKDMzM/lYW1MZ8QaSTt/pCmlknX1+KTgb6Sf9zZJEya8AyKML/NCpc4sfn8g=\" ], \"n\" : \"rlD19ib3J2bKYr2iap1d_gCmbXocMJTk5o7o3h9jJKXbh9pdf2gd3ZOE6wc5XwGx_CfHSgdEmACCXMiG7sQt80DPM67dlbtv_pEnWrHk4fwwst83OF-HXTSi4Sd9QWhDtBvaUu8Rp8ir-x2D0RK8YNGs0prA-qGR8O_h6Y-ascz4VNbbDlbJ-w7DJYeWU1HVp_5Lt8O5i4Q6I8KZEAytwvspF5y8m8DCrfYXF6Kz14vXgqr08hj0l0Aj4O3y_9i8kf2pmznpu5QEDimj1yxEB-G5WEYuHD_-qRTV85OXDIQJz6fgNM4kEimv7pmspcDfk_KKB7_KT0rEOn7T2rXW9Q\" , \"e\" : \"AQAB\" , \"x\" : null , \"y\" : null } We see it has replaced use from enc to sig . Please read about patch method , You can get some idea how this patch method works to modify particular properties of any task.","title":"Patch JSON Web Key (JWK) by kid"},{"location":"admin/config-guide/json-web-key-config/#delete-json-web-key-using-kid","text":"It's pretty simple to delete json web key using its kid . The command line is: /opt/jans/jans-cli/config-cli.py --operation-id delete-config-jwk-kid --url-suffix kid:new-key-test-id It will delete the jwk if it matches with the given kid .","title":"Delete Json Web Key using kid"},{"location":"admin/config-guide/ldap-configuration/","tags":["administration","configuration","ldap"],"text":"Lightweight Directory Access Protocol (LDAP) Configuration # Prerequisite: Know how to use the Janssen CLI in command-line mode Let's run the following command to get operation-id details of LDAP Database COnfiguration. /opt/jans/jans-cli/config-cli.py --info DatabaseLDAPConfiguration It comes with the following options: Operation ID: get-config-database-ldap Description: Gets list of existing LDAP configurations. Operation ID: post-config-database-ldap Description: Adds a new LDAP configuration. Schema: /components/schemas/LdapConfiguration Operation ID: put-config-database-ldap Description: Updates LDAP configuration. Schema: /components/schemas/LdapConfiguration Operation ID: get-config-database-ldap-by-name Description: Gets an LDAP configuration by name. url-suffix: name Operation ID: delete-config-database-ldap-by-name Description: Deletes an LDAP configuration. url-suffix: name Operation ID: patch-config-database-ldap-by-name Description: Partially modify an LDAP configuration. url-suffix: name Schema: Array of /components/schemas/PatchRequest Operation ID: post-config-database-ldap-test Description: Tests an LDAP configuration. Schema: /components/schemas/LdapConfiguration To get sample schema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/LdapConfiguration Get Existing LDAP Configurations # To find the existing ldap configurations, let's run the following command: /opt/jans/jans-cli/config-cli.py --operation-id get-config-database-ldap [ { \"configId\" : \"auth_ldap_server\" , \"bindDN\" : \"cn=directory manager\" , \"bindPassword\" : \"m+OTwmlCEho=\" , \"servers\" : [ \"localhost:1636\" ], \"maxConnections\" : 1000 , \"useSSL\" : true , \"baseDNs\" : [ \"ou=people,o=jans\" ], \"primaryKey\" : \"uid\" , \"localPrimaryKey\" : \"uid\" , \"useAnonymousBind\" : false , \"enabled\" : false , \"version\" : 0 , \"level\" : 0 } ] Adds a new LDAP Configuration # At first, we have checked the existing ldap database configurations the janssen server have. Indeed we can create a new ldap configuration as well. Operation ID: post-config-database-ldap Description: Adds a new LDAP configuration. Schema: /components/schemas/LdapConfiguration Let's get the schema file and update it to push into the server. /opt/jans/jans-cli/config-cli.py --schema /components/schemas/LdapConfiguration > /tmp/ldap.json { \"configId\": \"auth_ldap_server\", \"bindDN\": \"string\", \"bindPassword\": \"string\", \"servers\": \"array\", \"maxConnections\": 2, \"useSSL\": \"boolean\", \"baseDNs\": \"array\", \"primaryKey\": \"SAMAccountName,uid, email\", \"localPrimaryKey\": \"uid, email\", \"useAnonymousBind\": false, \"enabled\": false, \"version\": null, \"level\": null } You need to modify ldap.json file with valid information. In our case, I have modified as below for testing only: { \"configId\": \"test_ldap\", \"bindDN\": \"cn=directory manager\", \"bindPassword\": \"password\", \"servers\": [ \"localhost:1636\" ], \"maxConnections\": 1000, \"useSSL\": \"true\", \"baseDNs\": [\"ou=people,o=jans\"], \"primaryKey\": \"uid\", \"localPrimaryKey\": \"uid\", \"useAnonymousBind\": false, \"enabled\": false, \"version\": 0, \"level\": 0 } Now, lets post this configuration into the database. /opt/jans/jans-cli/config-cli.py --operation-id post-config-database-ldap --data /tmp/ldap.json Getting access token for scope https://jans.io/oauth/config/database/ldap.write Server Response: { \"configId\": \"test_ldap\", \"bindDN\": \"cn=directory manager\", \"bindPassword\": \"m+OTwmlCEho=\", \"servers\": [ \"localhost:1636\" ], \"maxConnections\": 1000, \"useSSL\": true, \"baseDNs\": [ \"ou=people,o=jans\" ], \"primaryKey\": \"uid\", \"localPrimaryKey\": \"uid\", \"useAnonymousBind\": false, \"enabled\": false, \"version\": 0, \"level\": 0 } Please note that configId should be a unique identifier name for each configuration. Otherwise you will get error while going to post duplicate configuration into the server. In that case, you can go through the next option to replace instead of adding a new one. Updating LDAP Database Configurations # With this operation, we can update any ldap database configuration. Operation ID: put-config-database-ldap Description: Updates LDAP configuration. Schema: /components/schemas/LdapConfiguration For example, let say we are going to change to maxConnections in the above test_ldap configuration. So lets modify the /tmp/ldap.json file as below: { \"configId\": \"test_ldap\", \"bindDN\": \"cn=directory manager\", \"bindPassword\": \"Mh@006\", \"servers\": [ \"localhost:1636\" ], \"maxConnections\": 100, \"useSSL\": \"true\", \"baseDNs\": [\"ou=people,o=jans\"], \"primaryKey\": \"uid\", \"localPrimaryKey\": \"uid\", \"useAnonymousBind\": false, \"enabled\": false, \"version\": 0, \"level\": 0 } Finally lets do the operation: /opt/jans/jans-cli/config-cli.oy --operation-id put-config-database-ldap --data /tmp/ldap.json It will update the configuration if match with its configId otherwise return an error. Gets LDAP Database Configuration by its name # In the above operation, we have updated test_ldap.json . Let's check the updated result with this operation by calling its name id. /opt/jans/jans-cli/config-cli.py --operation-id get-config-database-ldap-by-name --url-suffix name:test_ldap Here name is the configId of the configuration. If we run this command, it returns the configuration details matched with configId. Getting access token for scope https://jans.io/oauth/config/database/ldap.readonly { \"configId\": \"test_ldap\", \"bindDN\": \"cn=directory manager\", \"bindPassword\": \"3eFs1t1aRPsW4xtxvCiGQQ==\", \"servers\": [ \"localhost:1636\" ], \"maxConnections\": 100, \"useSSL\": true, \"baseDNs\": [ \"ou=people,o=jans\" ], \"primaryKey\": \"uid\", \"localPrimaryKey\": \"uid\", \"useAnonymousBind\": false, \"enabled\": false, \"version\": 0, \"level\": 0 } Delete LDAP Database Configurations # In case, we need to delete any existing LDAP Database configuration we can do that as well. The command line: /opt/jans/jans-cli/config-cli.py --operation-id delete-config-database-ldap-by-name --url-suffix name:test_ldap It will delete data ldap database configuration matched with the name. Patch LDAP Database Configurations # If required, We can patch single information of a ldap database configuration by using its name id. In that case, we have to make an array of operations in schema file. So, let's get the schema file first. /opt/jans/jans-cli/config-cli.py --schema /components/schemas/PatchRequest > patch.json We know already that this operation support three types of value op , path and value to be replaced. For more info visit this link For example, let's say, we want to change the level of the test_ldap configuration. So, Let's update the patch file as below: [ { \"op\": \"replace\", \"path\": \"level\", \"value\": \"100\" } ] To patch data, the command looks like for this: /opt/jans/jans-cli/config-cli.py --operation-id patch-config-database-ldap-by-name --url-suffix name:test_ldap --data patch.json It will update the configuration and will show the updated result as below image on the display.","title":"LDAP Configuration"},{"location":"admin/config-guide/ldap-configuration/#lightweight-directory-access-protocol-ldap-configuration","text":"Prerequisite: Know how to use the Janssen CLI in command-line mode Let's run the following command to get operation-id details of LDAP Database COnfiguration. /opt/jans/jans-cli/config-cli.py --info DatabaseLDAPConfiguration It comes with the following options: Operation ID: get-config-database-ldap Description: Gets list of existing LDAP configurations. Operation ID: post-config-database-ldap Description: Adds a new LDAP configuration. Schema: /components/schemas/LdapConfiguration Operation ID: put-config-database-ldap Description: Updates LDAP configuration. Schema: /components/schemas/LdapConfiguration Operation ID: get-config-database-ldap-by-name Description: Gets an LDAP configuration by name. url-suffix: name Operation ID: delete-config-database-ldap-by-name Description: Deletes an LDAP configuration. url-suffix: name Operation ID: patch-config-database-ldap-by-name Description: Partially modify an LDAP configuration. url-suffix: name Schema: Array of /components/schemas/PatchRequest Operation ID: post-config-database-ldap-test Description: Tests an LDAP configuration. Schema: /components/schemas/LdapConfiguration To get sample schema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/LdapConfiguration","title":"Lightweight Directory Access Protocol (LDAP) Configuration"},{"location":"admin/config-guide/ldap-configuration/#get-existing-ldap-configurations","text":"To find the existing ldap configurations, let's run the following command: /opt/jans/jans-cli/config-cli.py --operation-id get-config-database-ldap [ { \"configId\" : \"auth_ldap_server\" , \"bindDN\" : \"cn=directory manager\" , \"bindPassword\" : \"m+OTwmlCEho=\" , \"servers\" : [ \"localhost:1636\" ], \"maxConnections\" : 1000 , \"useSSL\" : true , \"baseDNs\" : [ \"ou=people,o=jans\" ], \"primaryKey\" : \"uid\" , \"localPrimaryKey\" : \"uid\" , \"useAnonymousBind\" : false , \"enabled\" : false , \"version\" : 0 , \"level\" : 0 } ]","title":"Get Existing LDAP Configurations"},{"location":"admin/config-guide/ldap-configuration/#adds-a-new-ldap-configuration","text":"At first, we have checked the existing ldap database configurations the janssen server have. Indeed we can create a new ldap configuration as well. Operation ID: post-config-database-ldap Description: Adds a new LDAP configuration. Schema: /components/schemas/LdapConfiguration Let's get the schema file and update it to push into the server. /opt/jans/jans-cli/config-cli.py --schema /components/schemas/LdapConfiguration > /tmp/ldap.json { \"configId\": \"auth_ldap_server\", \"bindDN\": \"string\", \"bindPassword\": \"string\", \"servers\": \"array\", \"maxConnections\": 2, \"useSSL\": \"boolean\", \"baseDNs\": \"array\", \"primaryKey\": \"SAMAccountName,uid, email\", \"localPrimaryKey\": \"uid, email\", \"useAnonymousBind\": false, \"enabled\": false, \"version\": null, \"level\": null } You need to modify ldap.json file with valid information. In our case, I have modified as below for testing only: { \"configId\": \"test_ldap\", \"bindDN\": \"cn=directory manager\", \"bindPassword\": \"password\", \"servers\": [ \"localhost:1636\" ], \"maxConnections\": 1000, \"useSSL\": \"true\", \"baseDNs\": [\"ou=people,o=jans\"], \"primaryKey\": \"uid\", \"localPrimaryKey\": \"uid\", \"useAnonymousBind\": false, \"enabled\": false, \"version\": 0, \"level\": 0 } Now, lets post this configuration into the database. /opt/jans/jans-cli/config-cli.py --operation-id post-config-database-ldap --data /tmp/ldap.json Getting access token for scope https://jans.io/oauth/config/database/ldap.write Server Response: { \"configId\": \"test_ldap\", \"bindDN\": \"cn=directory manager\", \"bindPassword\": \"m+OTwmlCEho=\", \"servers\": [ \"localhost:1636\" ], \"maxConnections\": 1000, \"useSSL\": true, \"baseDNs\": [ \"ou=people,o=jans\" ], \"primaryKey\": \"uid\", \"localPrimaryKey\": \"uid\", \"useAnonymousBind\": false, \"enabled\": false, \"version\": 0, \"level\": 0 } Please note that configId should be a unique identifier name for each configuration. Otherwise you will get error while going to post duplicate configuration into the server. In that case, you can go through the next option to replace instead of adding a new one.","title":"Adds a new LDAP Configuration"},{"location":"admin/config-guide/ldap-configuration/#updating-ldap-database-configurations","text":"With this operation, we can update any ldap database configuration. Operation ID: put-config-database-ldap Description: Updates LDAP configuration. Schema: /components/schemas/LdapConfiguration For example, let say we are going to change to maxConnections in the above test_ldap configuration. So lets modify the /tmp/ldap.json file as below: { \"configId\": \"test_ldap\", \"bindDN\": \"cn=directory manager\", \"bindPassword\": \"Mh@006\", \"servers\": [ \"localhost:1636\" ], \"maxConnections\": 100, \"useSSL\": \"true\", \"baseDNs\": [\"ou=people,o=jans\"], \"primaryKey\": \"uid\", \"localPrimaryKey\": \"uid\", \"useAnonymousBind\": false, \"enabled\": false, \"version\": 0, \"level\": 0 } Finally lets do the operation: /opt/jans/jans-cli/config-cli.oy --operation-id put-config-database-ldap --data /tmp/ldap.json It will update the configuration if match with its configId otherwise return an error.","title":"Updating LDAP Database Configurations"},{"location":"admin/config-guide/ldap-configuration/#gets-ldap-database-configuration-by-its-name","text":"In the above operation, we have updated test_ldap.json . Let's check the updated result with this operation by calling its name id. /opt/jans/jans-cli/config-cli.py --operation-id get-config-database-ldap-by-name --url-suffix name:test_ldap Here name is the configId of the configuration. If we run this command, it returns the configuration details matched with configId. Getting access token for scope https://jans.io/oauth/config/database/ldap.readonly { \"configId\": \"test_ldap\", \"bindDN\": \"cn=directory manager\", \"bindPassword\": \"3eFs1t1aRPsW4xtxvCiGQQ==\", \"servers\": [ \"localhost:1636\" ], \"maxConnections\": 100, \"useSSL\": true, \"baseDNs\": [ \"ou=people,o=jans\" ], \"primaryKey\": \"uid\", \"localPrimaryKey\": \"uid\", \"useAnonymousBind\": false, \"enabled\": false, \"version\": 0, \"level\": 0 }","title":"Gets LDAP Database Configuration by its name"},{"location":"admin/config-guide/ldap-configuration/#delete-ldap-database-configurations","text":"In case, we need to delete any existing LDAP Database configuration we can do that as well. The command line: /opt/jans/jans-cli/config-cli.py --operation-id delete-config-database-ldap-by-name --url-suffix name:test_ldap It will delete data ldap database configuration matched with the name.","title":"Delete LDAP Database Configurations"},{"location":"admin/config-guide/ldap-configuration/#patch-ldap-database-configurations","text":"If required, We can patch single information of a ldap database configuration by using its name id. In that case, we have to make an array of operations in schema file. So, let's get the schema file first. /opt/jans/jans-cli/config-cli.py --schema /components/schemas/PatchRequest > patch.json We know already that this operation support three types of value op , path and value to be replaced. For more info visit this link For example, let's say, we want to change the level of the test_ldap configuration. So, Let's update the patch file as below: [ { \"op\": \"replace\", \"path\": \"level\", \"value\": \"100\" } ] To patch data, the command looks like for this: /opt/jans/jans-cli/config-cli.py --operation-id patch-config-database-ldap-by-name --url-suffix name:test_ldap --data patch.json It will update the configuration and will show the updated result as below image on the display.","title":"Patch LDAP Database Configurations"},{"location":"admin/config-guide/logging-configuration/","tags":["administration","configuration","logging"],"text":"Log Management # Prerequisite: Know how to use the Janssen CLI in command-line mode To view/update logging configuration, let's get the information of logging Configuration. /opt/jans/jans-cli/config-cli.py --info ConfigurationLogging Operation ID: get-config-logging Description: Returns Jans Authorization Server logging settings. Operation ID: put-config-logging Description: Updates Jans Authorization Server logging settings. Schema: /components/schemas/LoggingConfiguration To get sample shema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/LoggingConfiguration Table of Contents # Log Management Find Logging Configuration Update Logging Configuration Find Logging Configuration # /opt/jans/jans-cli/config-cli.py --operation-id get-config-logging Getting access token for scope https://jans.io/oauth/config/logging.readonly { \"loggingLevel\": \"INFO\", \"loggingLayout\": \"text\", \"httpLoggingEnabled\": false, \"disableJdkLogger\": true, \"enabledOAuthAuditLogging\": false, \"externalLoggerConfiguration\": null, \"httpLoggingExcludePaths\": null } Update Logging Configuration # To update logging configuration, get the schema first: /opt/jans/jans-cli/config-cli.py --schema /components/schemas/LoggingConfiguration > /tmp/log-config.json { \"loggingLevel\": \"FATAL\", \"loggingLayout\": \"text\", \"httpLoggingEnabled\": true, \"disableJdkLogger\": true, \"enabledOAuthAuditLogging\": false, \"externalLoggerConfiguration\": null, \"httpLoggingExcludePaths\": [ \"/auth/img\", \"/auth/stylesheet\" ] } let's update the schema: nano /tmp/log-config.json Here I have updated loggingLevel to DEBUG and enabledOAuditLogging to true as below image. Let's do the operation: /opt/jans/jans-cli/config-cli.py --operation-id put-config-logging --data /tmp/log-config.json You will get the updated result as below: Getting access token for scope https://jans.io/oauth/config/logging.write Server Response: { \"loggingLevel\": \"DEBUG\", \"loggingLayout\": \"json\", \"httpLoggingEnabled\": false, \"disableJdkLogger\": false, \"enabledOAuthAuditLogging\": true, \"externalLoggerConfiguration\": null, \"httpLoggingExcludePaths\": [ \"/auth/img\", \"/auth/stylesheet\" ] }","title":"Logging"},{"location":"admin/config-guide/logging-configuration/#log-management","text":"Prerequisite: Know how to use the Janssen CLI in command-line mode To view/update logging configuration, let's get the information of logging Configuration. /opt/jans/jans-cli/config-cli.py --info ConfigurationLogging Operation ID: get-config-logging Description: Returns Jans Authorization Server logging settings. Operation ID: put-config-logging Description: Updates Jans Authorization Server logging settings. Schema: /components/schemas/LoggingConfiguration To get sample shema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/LoggingConfiguration","title":"Log Management"},{"location":"admin/config-guide/logging-configuration/#table-of-contents","text":"Log Management Find Logging Configuration Update Logging Configuration","title":"Table of Contents"},{"location":"admin/config-guide/logging-configuration/#find-logging-configuration","text":"/opt/jans/jans-cli/config-cli.py --operation-id get-config-logging Getting access token for scope https://jans.io/oauth/config/logging.readonly { \"loggingLevel\": \"INFO\", \"loggingLayout\": \"text\", \"httpLoggingEnabled\": false, \"disableJdkLogger\": true, \"enabledOAuthAuditLogging\": false, \"externalLoggerConfiguration\": null, \"httpLoggingExcludePaths\": null }","title":"Find Logging Configuration"},{"location":"admin/config-guide/logging-configuration/#update-logging-configuration","text":"To update logging configuration, get the schema first: /opt/jans/jans-cli/config-cli.py --schema /components/schemas/LoggingConfiguration > /tmp/log-config.json { \"loggingLevel\": \"FATAL\", \"loggingLayout\": \"text\", \"httpLoggingEnabled\": true, \"disableJdkLogger\": true, \"enabledOAuthAuditLogging\": false, \"externalLoggerConfiguration\": null, \"httpLoggingExcludePaths\": [ \"/auth/img\", \"/auth/stylesheet\" ] } let's update the schema: nano /tmp/log-config.json Here I have updated loggingLevel to DEBUG and enabledOAuditLogging to true as below image. Let's do the operation: /opt/jans/jans-cli/config-cli.py --operation-id put-config-logging --data /tmp/log-config.json You will get the updated result as below: Getting access token for scope https://jans.io/oauth/config/logging.write Server Response: { \"loggingLevel\": \"DEBUG\", \"loggingLayout\": \"json\", \"httpLoggingEnabled\": false, \"disableJdkLogger\": false, \"enabledOAuthAuditLogging\": true, \"externalLoggerConfiguration\": null, \"httpLoggingExcludePaths\": [ \"/auth/img\", \"/auth/stylesheet\" ] }","title":"Update Logging Configuration"},{"location":"admin/config-guide/oauth-scopes-config/","tags":["administration","configuration","scopes"],"text":"OAuth Scopes # Prerequisite: Know how to use the Janssen CLI in command-line mode Let's get information for a task OAuthScopes /opt/jans/jans-cli/config-cli.py --info OAuthScopes Operation ID: get-oauth-scopes Description: Gets list of Scopes. Optionally type to filter the scope, max-size of the result and pattern can be provided. Parameters: type: Scope type. [string] limit: Search size - max size of the results to return. [integer] pattern: Search pattern. [string] Operation ID: post-oauth-scopes Description: Create Scope. Schema: /components/schemas/Scope Operation ID: put-oauth-scopes Description: Updates existing Scope. Schema: /components/schemas/Scope Operation ID: get-oauth-scopes-by-inum Description: Get Scope by Inum url-suffix: inum Operation ID: delete-oauth-scopes-by-inum Description: Delete Scope. url-suffix: inum Operation ID: patch-oauth-scopes-by-id Description: Update modified attributes of existing Scope by Inum. url-suffix: inum Schema: Array of /components/schemas/PatchRequest To get sample schema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/PatchRequest Find/View OAuth Scopes # Operations will be done with Operation ID . Some operations may take parameters, let's retrieve 3 scopes ( limit ) that has view in it's description ( pattern ) and type openid : /opt/jans/jans-cli/config-cli.py --operation-id get-oauth-scopes --endpoint-args limit:3,pattern:view,type:openid ``` It will return: ``` Getting access token for scope https://jans.io/oauth/config/scopes.readonly Calling with params limit=3&pattern=view&type=openid [ { \"dn\": \"inum=43F1,ou=scopes,o=jans\", \"id\": \"profile\", \"inum\": \"43F1\", \"displayName\": null, \"description\": \"View your basic profile info.\", \"iconUrl\": null, \"authorizationPolicies\": null, \"defaultScope\": false, \"scopeType\": \"openid\", \"claims\": [ \"inum=2B29,ou=attributes,o=jans\", \"inum=0C85,ou=attributes,o=jans\", \"inum=B4B0,ou=attributes,o=jans\", \"inum=A0E8,ou=attributes,o=jans\", \"inum=5EC6,ou=attributes,o=jans\", \"inum=B52A,ou=attributes,o=jans\", \"inum=64A0,ou=attributes,o=jans\", \"inum=EC3A,ou=attributes,o=jans\", \"inum=3B47,ou=attributes,o=jans\", \"inum=3692,ou=attributes,o=jans\", \"inum=98FC,ou=attributes,o=jans\", \"inum=A901,ou=attributes,o=jans\", \"inum=36D9,ou=attributes,o=jans\", \"inum=BE64,ou=attributes,o=jans\", \"inum=6493,ou=attributes,o=jans\" ], \"umaType\": false, \"umaAuthorizationPolicies\": null, \"attributes\": { \"spontaneousClientId\": null, \"spontaneousClientScopes\": null, \"showInConfigurationEndpoint\": true } }, { \"dn\": \"inum=C17A,ou=scopes,o=jans\", \"id\": \"address\", \"inum\": \"C17A\", \"displayName\": null, \"description\": \"View your address.\", \"iconUrl\": null, \"authorizationPolicies\": null, \"defaultScope\": false, \"scopeType\": \"openid\", \"claims\": [ \"inum=27DB,ou=attributes,o=jans\", \"inum=2A3D,ou=attributes,o=jans\", \"inum=6609,ou=attributes,o=jans\", \"inum=6EEB,ou=attributes,o=jans\", \"inum=BCE8,ou=attributes,o=jans\", \"inum=D90B,ou=attributes,o=jans\", \"inum=E6B8,ou=attributes,o=jans\", \"inum=E999,ou=attributes,o=jans\" ], \"umaType\": false, \"umaAuthorizationPolicies\": null, \"attributes\": { \"spontaneousClientId\": null, \"spontaneousClientScopes\": null, \"showInConfigurationEndpoint\": true } }, { \"dn\": \"inum=764C,ou=scopes,o=jans\", \"id\": \"email\", \"inum\": \"764C\", \"displayName\": null, \"description\": \"View your email address.\", \"iconUrl\": null, \"authorizationPolicies\": null, \"defaultScope\": false, \"scopeType\": \"openid\", \"claims\": [ \"inum=8F88,ou=attributes,o=jans\", \"inum=CAE3,ou=attributes,o=jans\" ], \"umaType\": false, \"umaAuthorizationPolicies\": null, \"attributes\": { \"spontaneousClientId\": null, \"spontaneousClientScopes\": null, \"showInConfigurationEndpoint\": true } } ] Create an OAuth Scope # Let's create a scope. Remember when we queried info for a task OAuthScopes it printed: Operation ID: post-oauth-scopes Description: Create Scope. Schema: /components/schemas/Scope Thus, we can get sample schema and use Operation ID post-oauth-scopes . Lets get sample schema: /opt/jans/jans-cli/config-cli.py --schema /components/schemas/Scope > /tmp/scope.json Now edit file tmp/scope.json with an editor (like nano ). As an example we just filled the following properties: \"id\": \"TestScopeID\", \"displayName\": \"TestScope\", \"description\": \"Test Scope created by jans-cli\", It is time to post the data: /opt/jans/jans-cli/config-cli.py --operation-id post-oauth-scopes --data /tmp/scope.json Getting access token for scope https://jans.io/oauth/config/scopes.write Server Response: { \"dn\": \"inum=112116fd-257b-40d8-a2c9-0c23536680ed,ou=scopes,o=jans\", \"id\": \"TestScopeID\", \"inum\": \"112116fd-257b-40d8-a2c9-0c23536680ed\", \"displayName\": \"TestScope\", \"description\": \"Test Scope created by jans-cli\", \"iconUrl\": null, \"authorizationPolicies\": null, \"defaultScope\": true, \"scopeType\": \"openid\", \"claims\": null, \"umaType\": false, \"umaAuthorizationPolicies\": null, \"attributes\": { \"spontaneousClientId\": null, \"spontaneousClientScopes\": null, \"showInConfigurationEndpoint\": true } } It created scope with inum 112116fd-257b-40d8-a2c9-0c23536680ed and returned current data. Update Existing OAuth Scopes # In case we need to update an existing OAuth Scope, we can do that as well. To update an existing OAuth Scope, we have to create a json file with updated details. You can get the schema file as well to understand the format of the OAuth Scope JSON file. This is an existing OAuth Scope we are going to update. { \"dn\": \"inum=5c3ba3f0-d2ce-4974-9efb-883697d929d1,ou=scopes,o=jans\", \"inum\": \"5c3ba3f0-d2ce-4974-9efb-883697d929d1\", \"displayName\": \"TestScope\", \"id\": \"TestScopeID\", \"iconUrl\": null, \"description\": \"TestScope for jans-cli\", \"scopeType\": \"dynamic\", \"claims\": null, \"defaultScope\": true, \"groupClaims\": true, \"dynamicScopeScripts\": null, \"umaAuthorizationPolicies\": null, \"attributes\": { \"spontaneousClientId\": null, \"spontaneousClientScopes\": null, \"showInConfigurationEndpoint\": false }, \"umaType\": false, \"deletable\": false, \"expirationDate\": null } We have changed only the scopeType to openid . The updated data: { \"dn\": \"inum=5c3ba3f0-d2ce-4974-9efb-883697d929d1,ou=scopes,o=jans\", \"inum\": \"5c3ba3f0-d2ce-4974-9efb-883697d929d1\", \"displayName\": \"TestScope\", \"id\": \"TestScopeID\", \"iconUrl\": null, \"description\": \"TestScope for jans-cli\", \"scopeType\": \"openid\", \"claims\": null, \"defaultScope\": true, \"groupClaims\": true, \"dynamicScopeScripts\": null, \"umaAuthorizationPolicies\": null, \"attributes\": { \"spontaneousClientId\": null, \"spontaneousClientScopes\": null, \"showInConfigurationEndpoint\": false }, \"umaType\": false, \"deletable\": false, \"expirationDate\": null } The command line is: /opt/jans/jans-cli/config-cli.py --operation-id put-oauth-scopes --data /tmp/scope.json This will updated the existing oauth scopes matched with inum value. Patch OAuth Scopes by inum # Let's update iconUrl with patch method. So we need a schema for the patch method. Remember when we queried info for the task OAuthScopes it printed: Operation ID: patch-oauth-scopes-by-id Description: Update modified attributes of existing Scope by Inum. url-suffix: inum Schema: Array of /components/schemas/PatchRequest ``` This means we need schema `/components/schemas/PatchRequest`, be careful it states **Array of**, so we will make an array of this schema, in case you need multiple changes with patch method, you can put as many as of this schema into array. To know more about `PatchRequest` schema, please visit this [link](config-tools/jans-cli/README.md#patch-request-schema). Let's Get schema: /opt/jans/jans-cli/config-cli.py --schema /components/schemas/PatchRequest > /tmp/patch.json We can edit this json as follows (remember to make it an array): ![jans-cl Edit patch.json](../../assets/image-cl-oauthscope-patch-json-03042021.png) Let's do the operation: /opt/jans/jans-cli/config-cli.py --operation-id patch-oauth-scopes-by-id --url-suffix inum:112116fd-257b-40d8-a2c9-0c23536680ed --data /tmp/patch.json Getting access token for scope https://jans.io/oauth/config/scopes.write Server Response: { \"dn\": \"inum=112116fd-257b-40d8-a2c9-0c23536680ed,ou=scopes,o=jans\", \"id\": \"TestScopeID\", \"inum\": \"112116fd-257b-40d8-a2c9-0c23536680ed\", \"displayName\": \"TestScope\", \"description\": \"Test Scope created by jans-cli\", \"iconUrl\": \"https://www.jans.io/icon.png\", \"authorizationPolicies\": null, \"defaultScope\": true, \"scopeType\": \"openid\", \"claims\": null, \"umaType\": false, \"umaAuthorizationPolicies\": null, \"attributes\": { \"spontaneousClientId\": null, \"spontaneousClientScopes\": null, \"showInConfigurationEndpoint\": true } } ## Find OAuth Scopes by `inum` In case We know the `inum` value of an OAuth Scope, We can get the details of that scope. Operation ID: get-oauth-scopes-by-inum Description: Get Scope by Inum url-suffix: inum We can see that, the `url-suffix` here for `inum` value. And the command line is: /opt/jans/jans-cli/config-cli.py --operation-id get-oauth-scopes-by-inum --url-suffix inum:value For example: /opt/jans/jans-cli/config-cli.py --operation-id get-oauth-scopes-by-inum --url-suffix inum:C4F6 It returns the details of the scope matched with the `inum` value. { \"dn\": \"inum=C4F6,ou=scopes,o=jans\", \"inum\": \"C4F6\", \"displayName\": \"refresh_token\", \"id\": \"offline_access\", \"iconUrl\": null, \"description\": \"This scope value requests that an OAuth 2.0 Refresh Token be issued.\", \"scopeType\": \"openid\", \"claims\": null, \"defaultScope\": true, \"groupClaims\": null, \"dynamicScopeScripts\": null, \"umaAuthorizationPolicies\": null, \"attributes\": { \"spontaneousClientId\": null, \"spontaneousClientScopes\": null, \"showInConfigurationEndpoint\": true }, \"umaType\": false, \"deletable\": false, \"expirationDate\": null } That's it. ## Delete OAuth Scopes by `inum` You can delete any OAuth Scopes by its `inum` value. The command line is: /opt/jans/jans-cli/config-cli.py --operation-id delete-oauth-scopes-by-inum --url-suffix inum:f9a7add1-04ca-432c-84d4-cb127e84bd48 ``` Just change the inum value to your own according to which one you want to delete.","title":"OAuth Scope Management"},{"location":"admin/config-guide/oauth-scopes-config/#oauth-scopes","text":"Prerequisite: Know how to use the Janssen CLI in command-line mode Let's get information for a task OAuthScopes /opt/jans/jans-cli/config-cli.py --info OAuthScopes Operation ID: get-oauth-scopes Description: Gets list of Scopes. Optionally type to filter the scope, max-size of the result and pattern can be provided. Parameters: type: Scope type. [string] limit: Search size - max size of the results to return. [integer] pattern: Search pattern. [string] Operation ID: post-oauth-scopes Description: Create Scope. Schema: /components/schemas/Scope Operation ID: put-oauth-scopes Description: Updates existing Scope. Schema: /components/schemas/Scope Operation ID: get-oauth-scopes-by-inum Description: Get Scope by Inum url-suffix: inum Operation ID: delete-oauth-scopes-by-inum Description: Delete Scope. url-suffix: inum Operation ID: patch-oauth-scopes-by-id Description: Update modified attributes of existing Scope by Inum. url-suffix: inum Schema: Array of /components/schemas/PatchRequest To get sample schema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/PatchRequest","title":"OAuth Scopes"},{"location":"admin/config-guide/oauth-scopes-config/#findview-oauth-scopes","text":"Operations will be done with Operation ID . Some operations may take parameters, let's retrieve 3 scopes ( limit ) that has view in it's description ( pattern ) and type openid : /opt/jans/jans-cli/config-cli.py --operation-id get-oauth-scopes --endpoint-args limit:3,pattern:view,type:openid ``` It will return: ``` Getting access token for scope https://jans.io/oauth/config/scopes.readonly Calling with params limit=3&pattern=view&type=openid [ { \"dn\": \"inum=43F1,ou=scopes,o=jans\", \"id\": \"profile\", \"inum\": \"43F1\", \"displayName\": null, \"description\": \"View your basic profile info.\", \"iconUrl\": null, \"authorizationPolicies\": null, \"defaultScope\": false, \"scopeType\": \"openid\", \"claims\": [ \"inum=2B29,ou=attributes,o=jans\", \"inum=0C85,ou=attributes,o=jans\", \"inum=B4B0,ou=attributes,o=jans\", \"inum=A0E8,ou=attributes,o=jans\", \"inum=5EC6,ou=attributes,o=jans\", \"inum=B52A,ou=attributes,o=jans\", \"inum=64A0,ou=attributes,o=jans\", \"inum=EC3A,ou=attributes,o=jans\", \"inum=3B47,ou=attributes,o=jans\", \"inum=3692,ou=attributes,o=jans\", \"inum=98FC,ou=attributes,o=jans\", \"inum=A901,ou=attributes,o=jans\", \"inum=36D9,ou=attributes,o=jans\", \"inum=BE64,ou=attributes,o=jans\", \"inum=6493,ou=attributes,o=jans\" ], \"umaType\": false, \"umaAuthorizationPolicies\": null, \"attributes\": { \"spontaneousClientId\": null, \"spontaneousClientScopes\": null, \"showInConfigurationEndpoint\": true } }, { \"dn\": \"inum=C17A,ou=scopes,o=jans\", \"id\": \"address\", \"inum\": \"C17A\", \"displayName\": null, \"description\": \"View your address.\", \"iconUrl\": null, \"authorizationPolicies\": null, \"defaultScope\": false, \"scopeType\": \"openid\", \"claims\": [ \"inum=27DB,ou=attributes,o=jans\", \"inum=2A3D,ou=attributes,o=jans\", \"inum=6609,ou=attributes,o=jans\", \"inum=6EEB,ou=attributes,o=jans\", \"inum=BCE8,ou=attributes,o=jans\", \"inum=D90B,ou=attributes,o=jans\", \"inum=E6B8,ou=attributes,o=jans\", \"inum=E999,ou=attributes,o=jans\" ], \"umaType\": false, \"umaAuthorizationPolicies\": null, \"attributes\": { \"spontaneousClientId\": null, \"spontaneousClientScopes\": null, \"showInConfigurationEndpoint\": true } }, { \"dn\": \"inum=764C,ou=scopes,o=jans\", \"id\": \"email\", \"inum\": \"764C\", \"displayName\": null, \"description\": \"View your email address.\", \"iconUrl\": null, \"authorizationPolicies\": null, \"defaultScope\": false, \"scopeType\": \"openid\", \"claims\": [ \"inum=8F88,ou=attributes,o=jans\", \"inum=CAE3,ou=attributes,o=jans\" ], \"umaType\": false, \"umaAuthorizationPolicies\": null, \"attributes\": { \"spontaneousClientId\": null, \"spontaneousClientScopes\": null, \"showInConfigurationEndpoint\": true } } ]","title":"Find/View OAuth Scopes"},{"location":"admin/config-guide/oauth-scopes-config/#create-an-oauth-scope","text":"Let's create a scope. Remember when we queried info for a task OAuthScopes it printed: Operation ID: post-oauth-scopes Description: Create Scope. Schema: /components/schemas/Scope Thus, we can get sample schema and use Operation ID post-oauth-scopes . Lets get sample schema: /opt/jans/jans-cli/config-cli.py --schema /components/schemas/Scope > /tmp/scope.json Now edit file tmp/scope.json with an editor (like nano ). As an example we just filled the following properties: \"id\": \"TestScopeID\", \"displayName\": \"TestScope\", \"description\": \"Test Scope created by jans-cli\", It is time to post the data: /opt/jans/jans-cli/config-cli.py --operation-id post-oauth-scopes --data /tmp/scope.json Getting access token for scope https://jans.io/oauth/config/scopes.write Server Response: { \"dn\": \"inum=112116fd-257b-40d8-a2c9-0c23536680ed,ou=scopes,o=jans\", \"id\": \"TestScopeID\", \"inum\": \"112116fd-257b-40d8-a2c9-0c23536680ed\", \"displayName\": \"TestScope\", \"description\": \"Test Scope created by jans-cli\", \"iconUrl\": null, \"authorizationPolicies\": null, \"defaultScope\": true, \"scopeType\": \"openid\", \"claims\": null, \"umaType\": false, \"umaAuthorizationPolicies\": null, \"attributes\": { \"spontaneousClientId\": null, \"spontaneousClientScopes\": null, \"showInConfigurationEndpoint\": true } } It created scope with inum 112116fd-257b-40d8-a2c9-0c23536680ed and returned current data.","title":"Create an OAuth Scope"},{"location":"admin/config-guide/oauth-scopes-config/#update-existing-oauth-scopes","text":"In case we need to update an existing OAuth Scope, we can do that as well. To update an existing OAuth Scope, we have to create a json file with updated details. You can get the schema file as well to understand the format of the OAuth Scope JSON file. This is an existing OAuth Scope we are going to update. { \"dn\": \"inum=5c3ba3f0-d2ce-4974-9efb-883697d929d1,ou=scopes,o=jans\", \"inum\": \"5c3ba3f0-d2ce-4974-9efb-883697d929d1\", \"displayName\": \"TestScope\", \"id\": \"TestScopeID\", \"iconUrl\": null, \"description\": \"TestScope for jans-cli\", \"scopeType\": \"dynamic\", \"claims\": null, \"defaultScope\": true, \"groupClaims\": true, \"dynamicScopeScripts\": null, \"umaAuthorizationPolicies\": null, \"attributes\": { \"spontaneousClientId\": null, \"spontaneousClientScopes\": null, \"showInConfigurationEndpoint\": false }, \"umaType\": false, \"deletable\": false, \"expirationDate\": null } We have changed only the scopeType to openid . The updated data: { \"dn\": \"inum=5c3ba3f0-d2ce-4974-9efb-883697d929d1,ou=scopes,o=jans\", \"inum\": \"5c3ba3f0-d2ce-4974-9efb-883697d929d1\", \"displayName\": \"TestScope\", \"id\": \"TestScopeID\", \"iconUrl\": null, \"description\": \"TestScope for jans-cli\", \"scopeType\": \"openid\", \"claims\": null, \"defaultScope\": true, \"groupClaims\": true, \"dynamicScopeScripts\": null, \"umaAuthorizationPolicies\": null, \"attributes\": { \"spontaneousClientId\": null, \"spontaneousClientScopes\": null, \"showInConfigurationEndpoint\": false }, \"umaType\": false, \"deletable\": false, \"expirationDate\": null } The command line is: /opt/jans/jans-cli/config-cli.py --operation-id put-oauth-scopes --data /tmp/scope.json This will updated the existing oauth scopes matched with inum value.","title":"Update Existing OAuth Scopes"},{"location":"admin/config-guide/oauth-scopes-config/#patch-oauth-scopes-by-inum","text":"Let's update iconUrl with patch method. So we need a schema for the patch method. Remember when we queried info for the task OAuthScopes it printed: Operation ID: patch-oauth-scopes-by-id Description: Update modified attributes of existing Scope by Inum. url-suffix: inum Schema: Array of /components/schemas/PatchRequest ``` This means we need schema `/components/schemas/PatchRequest`, be careful it states **Array of**, so we will make an array of this schema, in case you need multiple changes with patch method, you can put as many as of this schema into array. To know more about `PatchRequest` schema, please visit this [link](config-tools/jans-cli/README.md#patch-request-schema). Let's Get schema: /opt/jans/jans-cli/config-cli.py --schema /components/schemas/PatchRequest > /tmp/patch.json We can edit this json as follows (remember to make it an array): ![jans-cl Edit patch.json](../../assets/image-cl-oauthscope-patch-json-03042021.png) Let's do the operation: /opt/jans/jans-cli/config-cli.py --operation-id patch-oauth-scopes-by-id --url-suffix inum:112116fd-257b-40d8-a2c9-0c23536680ed --data /tmp/patch.json Getting access token for scope https://jans.io/oauth/config/scopes.write Server Response: { \"dn\": \"inum=112116fd-257b-40d8-a2c9-0c23536680ed,ou=scopes,o=jans\", \"id\": \"TestScopeID\", \"inum\": \"112116fd-257b-40d8-a2c9-0c23536680ed\", \"displayName\": \"TestScope\", \"description\": \"Test Scope created by jans-cli\", \"iconUrl\": \"https://www.jans.io/icon.png\", \"authorizationPolicies\": null, \"defaultScope\": true, \"scopeType\": \"openid\", \"claims\": null, \"umaType\": false, \"umaAuthorizationPolicies\": null, \"attributes\": { \"spontaneousClientId\": null, \"spontaneousClientScopes\": null, \"showInConfigurationEndpoint\": true } } ## Find OAuth Scopes by `inum` In case We know the `inum` value of an OAuth Scope, We can get the details of that scope. Operation ID: get-oauth-scopes-by-inum Description: Get Scope by Inum url-suffix: inum We can see that, the `url-suffix` here for `inum` value. And the command line is: /opt/jans/jans-cli/config-cli.py --operation-id get-oauth-scopes-by-inum --url-suffix inum:value For example: /opt/jans/jans-cli/config-cli.py --operation-id get-oauth-scopes-by-inum --url-suffix inum:C4F6 It returns the details of the scope matched with the `inum` value. { \"dn\": \"inum=C4F6,ou=scopes,o=jans\", \"inum\": \"C4F6\", \"displayName\": \"refresh_token\", \"id\": \"offline_access\", \"iconUrl\": null, \"description\": \"This scope value requests that an OAuth 2.0 Refresh Token be issued.\", \"scopeType\": \"openid\", \"claims\": null, \"defaultScope\": true, \"groupClaims\": null, \"dynamicScopeScripts\": null, \"umaAuthorizationPolicies\": null, \"attributes\": { \"spontaneousClientId\": null, \"spontaneousClientScopes\": null, \"showInConfigurationEndpoint\": true }, \"umaType\": false, \"deletable\": false, \"expirationDate\": null } That's it. ## Delete OAuth Scopes by `inum` You can delete any OAuth Scopes by its `inum` value. The command line is: /opt/jans/jans-cli/config-cli.py --operation-id delete-oauth-scopes-by-inum --url-suffix inum:f9a7add1-04ca-432c-84d4-cb127e84bd48 ``` Just change the inum value to your own according to which one you want to delete.","title":"Patch OAuth Scopes by inum"},{"location":"admin/config-guide/oauth-umaresources-config/","tags":["administration","configuration","uma"],"text":"UMA Resources # Prerequisite: Know how to use the Janssen CLI in command-line mode Let's get the information for OAuthUMAResources: /opt/jans/jans-cli/config-cli.py --info OAuthUMAResources Operation ID: get-oauth-uma-resources Description: Gets list of UMA resources. Parameters: limit: Search size - max size of the results to return. [integer] pattern: Search pattern. [string] Operation ID: post-oauth-uma-resources Description: Creates an UMA resource. Schema: /components/schemas/UmaResource Operation ID: put-oauth-uma-resources Description: Updates an UMA resource. Schema: /components/schemas/UmaResource Operation ID: get-oauth-uma-resources-by-id Description: Gets an UMA resource by ID. url-suffix: id Operation ID: delete-oauth-uma-resources-by-id Description: Deletes an UMA resource. url-suffix: id Operation ID: patch-oauth-uma-resources-by-id Description: Partially updates an UMA resource by Inum. url-suffix: id Schema: Array of /components/schemas/PatchRequest To get sample shema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/PatchRequest Table of Contents # UMA Resources Get List of UMA Resources Get Oauth UMA Resource by ID Patch OAuth UMA Resource by ID Get List of UMA Resources # This operation is used to search UMA Resources. Operation ID: get-oauth-uma-resources Description: Gets list of UMA resources. Parameters: limit: Search size - max size of the results to return. [integer] pattern: Search pattern. [string] To get a list of UMA resources: /opt/jans/jans-cli/config-cli.py --operation-id get-oauth-uma-resources --endpoint-args limit:5 It will return random 5 UMA resources. Getting access token for scope https://jans.io/oauth/config/uma/resources.readonly Calling with params limit=5 [ { \"dn\": \"jansId=1800.1ed09ec8-5918-4cb5-9123-e4b9df36231f,ou=resources,ou=uma,o=jans\", \"inum\": null, \"id\": \"1800.1ed09ec8-5918-4cb5-9123-e4b9df36231f\", \"name\": \"Jans Cofig Api Uma Resource /jans-config-api/api/v1/attributes\", \"iconUri\": \"http://www.jans.io/img/scim_logo.png\", \"scopes\": [ \"inum=CACA-0B30,ou=scopes,o=jans\", \"inum=CACA-BFDB,ou=scopes,o=jans\" ], \"scopeExpression\": null, \"clients\": [ \"inum=1801.6e8351d4-5d3f-4773-b632-6c84bf8207cd,ou=clients,o=jans\" ], \"resources\": [ \"https://testjans.gluu.com/jans-config-api/api/v1/attributes\" ], \"rev\": \"1\", \"creator\": \"inum=d206dd87-3a22-465d-bd25-bec9313cd42d,ou=people,o=json\", \"description\": null, \"type\": null, \"creationDate\": null, \"expirationDate\": null, \"deletable\": true }, { \"dn\": \"jansId=1800.78e4c317-4d5a-4f23-b767-e63793364bee,ou=resources,ou=uma,o=jans\", \"inum\": null, \"id\": \"1800.78e4c317-4d5a-4f23-b767-e63793364bee\", \"name\": \"Jans Cofig Api Uma Resource /jans-config-api/api/v1/acrs\", \"iconUri\": \"http://www.jans.io/img/scim_logo.png\", \"scopes\": [ \"inum=CACA-D906,ou=scopes,o=jans\" ], \"scopeExpression\": null, \"clients\": [ \"inum=1801.6e8351d4-5d3f-4773-b632-6c84bf8207cd,ou=clients,o=jans\" ], \"resources\": [ \"https://testjans.gluu.com/jans-config-api/api/v1/acrs\" ], \"rev\": \"1\", \"creator\": \"inum=d206dd87-3a22-465d-bd25-bec9313cd42d,ou=people,o=json\", \"description\": null, \"type\": null, \"creationDate\": null, \"expirationDate\": null, \"deletable\": true }, { \"dn\": \"jansId=1800.556448d7-b349-45d8-a3a8-0d163df8753c,ou=resources,ou=uma,o=jans\", \"inum\": null, \"id\": \"1800.556448d7-b349-45d8-a3a8-0d163df8753c\", \"name\": \"Jans Cofig Api Uma Resource /jans-config-api/api/v1/config/cache\", \"iconUri\": \"http://www.jans.io/img/scim_logo.png\", \"scopes\": [ \"inum=CACA-4525,ou=scopes,o=jans\" ], \"scopeExpression\": null, \"clients\": [ \"inum=1801.6e8351d4-5d3f-4773-b632-6c84bf8207cd,ou=clients,o=jans\" ], \"resources\": [ \"https://testjans.gluu.com/jans-config-api/api/v1/config/cache\" ], \"rev\": \"1\", \"creator\": \"inum=d206dd87-3a22-465d-bd25-bec9313cd42d,ou=people,o=json\", \"description\": null, \"type\": null, \"creationDate\": null, \"expirationDate\": null, \"deletable\": true }, { \"dn\": \"jansId=1800.c4e0d1b6-e731-4c8d-a0ab-66784349a4da,ou=resources,ou=uma,o=jans\", \"inum\": null, \"id\": \"1800.c4e0d1b6-e731-4c8d-a0ab-66784349a4da\", \"name\": \"Jans Cofig Api Uma Resource /jans-config-api/api/v1/attributes\", \"iconUri\": \"http://www.jans.io/img/scim_logo.png\", \"scopes\": [ \"inum=CACA-0B30,ou=scopes,o=jans\" ], \"scopeExpression\": null, \"clients\": [ \"inum=1801.6e8351d4-5d3f-4773-b632-6c84bf8207cd,ou=clients,o=jans\" ], \"resources\": [ \"https://testjans.gluu.com/jans-config-api/api/v1/attributes\" ], \"rev\": \"1\", \"creator\": \"inum=d206dd87-3a22-465d-bd25-bec9313cd42d,ou=people,o=json\", \"description\": null, \"type\": null, \"creationDate\": null, \"expirationDate\": null, \"deletable\": true }, { \"dn\": \"jansId=1800.049d1198-a911-4032-aaf6-59cc94d3f4ef,ou=resources,ou=uma,o=jans\", \"inum\": null, \"id\": \"1800.049d1198-a911-4032-aaf6-59cc94d3f4ef\", \"name\": \"Jans Cofig Api Uma Resource /jans-config-api/api/v1/acrs\", \"iconUri\": \"http://www.jans.io/img/scim_logo.png\", \"scopes\": [ \"inum=CACA-D906,ou=scopes,o=jans\", \"inum=CACA-698C,ou=scopes,o=jans\" ], \"scopeExpression\": null, \"clients\": [ \"inum=1801.6e8351d4-5d3f-4773-b632-6c84bf8207cd,ou=clients,o=jans\" ], \"resources\": [ \"https://testjans.gluu.com/jans-config-api/api/v1/acrs\" ], \"rev\": \"1\", \"creator\": \"inum=d206dd87-3a22-465d-bd25-bec9313cd42d,ou=people,o=json\", \"description\": null, \"type\": null, \"creationDate\": null, \"expirationDate\": null, \"deletable\": true } ] To search using multiple arguments, you can change pattern that you want to find: /opt/jans/jans-cli/config-cli.py --operation-id get-oauth-uma-resources --endpoint-args limit:1,pattern:\"Jans Cofig Api Uma Resource /jans-config-api/api/v1/config/cache/native-persistence\" Getting access token for scope https://jans.io/oauth/config/uma/resources.readonly Calling with params limit=1&pattern=Jans+Cofig+Api+Uma+Resource+%2Fjans-config-api%2Fapi%2Fv1%2Fconfig%2Fcache%2Fnative-persistence [ { \"dn\": \"jansId=1800.02d24ac8-13d6-464d-af1d-46a6261eaa65,ou=resources,ou=uma,o=jans\", \"inum\": null, \"id\": \"1800.02d24ac8-13d6-464d-af1d-46a6261eaa65\", \"name\": \"Jans Cofig Api Uma Resource /jans-config-api/api/v1/config/cache/native-persistence\", \"iconUri\": \"http://www.jans.io/img/scim_logo.png\", \"scopes\": null, \"scopeExpression\": null, \"clients\": [ \"inum=1801.6e8351d4-5d3f-4773-b632-6c84bf8207cd,ou=clients,o=jans\" ], \"resources\": [ \"https://testjans.gluu.com/jans-config-api/api/v1/config/cache/native-persistence\" ], \"rev\": \"1\", \"creator\": \"inum=d206dd87-3a22-465d-bd25-bec9313cd42d,ou=people,o=json\", \"description\": null, \"type\": null, \"creationDate\": null, \"expirationDate\": null, \"deletable\": true }, { \"dn\": \"jansId=1800.6cd9bb98-05ac-43d2-bebb-3b1c92b9b409,ou=resources,ou=uma,o=jans\", \"inum\": null, \"id\": \"1800.6cd9bb98-05ac-43d2-bebb-3b1c92b9b409\", \"name\": \"Jans Cofig Api Uma Resource /jans-config-api/api/v1/config/cache/native-persistence\", \"iconUri\": \"http://www.jans.io/img/scim_logo.png\", \"scopes\": null, \"scopeExpression\": null, \"clients\": [ \"inum=1801.6e8351d4-5d3f-4773-b632-6c84bf8207cd,ou=clients,o=jans\" ], \"resources\": [ \"https://testjans.gluu.com/jans-config-api/api/v1/config/cache/native-persistence\" ], \"rev\": \"1\", \"creator\": \"inum=d206dd87-3a22-465d-bd25-bec9313cd42d,ou=people,o=json\", \"description\": null, \"type\": null, \"creationDate\": null, \"expirationDate\": null, \"deletable\": true } ] Get Oauth UMA Resource by ID # Operation ID: get-oauth-uma-resources-by-id Description: Gets an UMA resource by ID. url-suffix: id To get uma resource by its ID, run the following command: /opt/jans/jans-cli/config-cli.py --operation-id get-oauth-uma-resources-by-id --url-suffix id:1800.c4e0d1b6-e731-4c8d-a0ab-66784349a4da Getting access token for scope https://jans.io/oauth/config/uma/resources.readonly { \"dn\": \"jansId=1800.c4e0d1b6-e731-4c8d-a0ab-66784349a4da,ou=resources,ou=uma,o=jans\", \"inum\": null, \"id\": \"1800.c4e0d1b6-e731-4c8d-a0ab-66784349a4da\", \"name\": \"Jans Cofig Api Uma Resource /jans-config-api/api/v1/attributes\", \"iconUri\": \"http://www.jans.io/img/scim_logo.png\", \"scopes\": [ \"inum=CACA-0B30,ou=scopes,o=jans\" ], \"scopeExpression\": null, \"clients\": [ \"inum=1801.6e8351d4-5d3f-4773-b632-6c84bf8207cd,ou=clients,o=jans\" ], \"resources\": [ \"https://testjans.gluu.com/jans-config-api/api/v1/attributes\" ], \"rev\": \"1\", \"creator\": \"inum=d206dd87-3a22-465d-bd25-bec9313cd42d,ou=people,o=json\", \"description\": null, \"type\": null, \"creationDate\": null, \"expirationDate\": null, \"deletable\": true } replace the id with accurate one. Patch OAuth UMA Resource by ID # Operation ID: patch-oauth-uma-resources-by-id Description: Partially updates an UMA resource by Inum. url-suffix: id Schema: Array of /components/schemas/PatchRequest As you see the description, you can update an existing uma resource partially with this following operation. Let's get the sample schema: /opt/jans/jans-cli/config-cli.py --schema /components/schemas/PatchRequest > /tmp/patch-uma.json { \"op\": \"move\", \"path\": \"string\", \"value\": {} } Let's want to update as deletable:false to an uma resource whose id=1800.c4e0d1b6-e731-4c8d-a0ab-66784349a4da . So we are going to operate replace where path is deletable with value: false . let's update the json as below: nan o / t mp/pa t ch - uma.jso n [ { \"op\" : \"replace\" , \"path\" : \"deletable\" , \"value\" : false } ] now let's do the operation: /op t /ja ns /ja ns - cli/co nf ig - cli.py -- opera t io n - id pa t ch - oau t h - uma - resources - by - id -- url - su ff ix id : 1800. c 4e0 d 1 b 6-e731-4 c 8 d - a 0 ab -66784349 a 4 da -- da ta / t mp/pa t ch - uma.jso n Ge tt i n g access t oke n f or scope h tt ps : //jans.io/oauth/config/uma/resources.write Server Respo nse : { \"dn\" : \"jansId=1800.c4e0d1b6-e731-4c8d-a0ab-66784349a4da,ou=resources,ou=uma,o=jans\" , \"inum\" : null , \"id\" : \"1800.c4e0d1b6-e731-4c8d-a0ab-66784349a4da\" , \"name\" : \"Jans Cofig Api Uma Resource /jans-config-api/api/v1/attributes\" , \"iconUri\" : \"http://www.jans.io/img/scim_logo.png\" , \"scopes\" : [ \"inum=CACA-0B30,ou=scopes,o=jans\" ], \"scopeExpression\" : null , \"clients\" : [ \"inum=1801.6e8351d4-5d3f-4773-b632-6c84bf8207cd,ou=clients,o=jans\" ], \"resources\" : [ \"https://testjans.gluu.com/jans-config-api/api/v1/attributes\" ], \"rev\" : \"1\" , \"creator\" : \"inum=d206dd87-3a22-465d-bd25-bec9313cd42d,ou=people,o=json\" , \"description\" : null , \"type\" : null , \"creationDate\" : null , \"expirationDate\" : null , \"deletable\" : false } you must see that deletable updated to false .","title":"UMA Management"},{"location":"admin/config-guide/oauth-umaresources-config/#uma-resources","text":"Prerequisite: Know how to use the Janssen CLI in command-line mode Let's get the information for OAuthUMAResources: /opt/jans/jans-cli/config-cli.py --info OAuthUMAResources Operation ID: get-oauth-uma-resources Description: Gets list of UMA resources. Parameters: limit: Search size - max size of the results to return. [integer] pattern: Search pattern. [string] Operation ID: post-oauth-uma-resources Description: Creates an UMA resource. Schema: /components/schemas/UmaResource Operation ID: put-oauth-uma-resources Description: Updates an UMA resource. Schema: /components/schemas/UmaResource Operation ID: get-oauth-uma-resources-by-id Description: Gets an UMA resource by ID. url-suffix: id Operation ID: delete-oauth-uma-resources-by-id Description: Deletes an UMA resource. url-suffix: id Operation ID: patch-oauth-uma-resources-by-id Description: Partially updates an UMA resource by Inum. url-suffix: id Schema: Array of /components/schemas/PatchRequest To get sample shema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/PatchRequest","title":"UMA Resources"},{"location":"admin/config-guide/oauth-umaresources-config/#table-of-contents","text":"UMA Resources Get List of UMA Resources Get Oauth UMA Resource by ID Patch OAuth UMA Resource by ID","title":"Table of Contents"},{"location":"admin/config-guide/oauth-umaresources-config/#get-list-of-uma-resources","text":"This operation is used to search UMA Resources. Operation ID: get-oauth-uma-resources Description: Gets list of UMA resources. Parameters: limit: Search size - max size of the results to return. [integer] pattern: Search pattern. [string] To get a list of UMA resources: /opt/jans/jans-cli/config-cli.py --operation-id get-oauth-uma-resources --endpoint-args limit:5 It will return random 5 UMA resources. Getting access token for scope https://jans.io/oauth/config/uma/resources.readonly Calling with params limit=5 [ { \"dn\": \"jansId=1800.1ed09ec8-5918-4cb5-9123-e4b9df36231f,ou=resources,ou=uma,o=jans\", \"inum\": null, \"id\": \"1800.1ed09ec8-5918-4cb5-9123-e4b9df36231f\", \"name\": \"Jans Cofig Api Uma Resource /jans-config-api/api/v1/attributes\", \"iconUri\": \"http://www.jans.io/img/scim_logo.png\", \"scopes\": [ \"inum=CACA-0B30,ou=scopes,o=jans\", \"inum=CACA-BFDB,ou=scopes,o=jans\" ], \"scopeExpression\": null, \"clients\": [ \"inum=1801.6e8351d4-5d3f-4773-b632-6c84bf8207cd,ou=clients,o=jans\" ], \"resources\": [ \"https://testjans.gluu.com/jans-config-api/api/v1/attributes\" ], \"rev\": \"1\", \"creator\": \"inum=d206dd87-3a22-465d-bd25-bec9313cd42d,ou=people,o=json\", \"description\": null, \"type\": null, \"creationDate\": null, \"expirationDate\": null, \"deletable\": true }, { \"dn\": \"jansId=1800.78e4c317-4d5a-4f23-b767-e63793364bee,ou=resources,ou=uma,o=jans\", \"inum\": null, \"id\": \"1800.78e4c317-4d5a-4f23-b767-e63793364bee\", \"name\": \"Jans Cofig Api Uma Resource /jans-config-api/api/v1/acrs\", \"iconUri\": \"http://www.jans.io/img/scim_logo.png\", \"scopes\": [ \"inum=CACA-D906,ou=scopes,o=jans\" ], \"scopeExpression\": null, \"clients\": [ \"inum=1801.6e8351d4-5d3f-4773-b632-6c84bf8207cd,ou=clients,o=jans\" ], \"resources\": [ \"https://testjans.gluu.com/jans-config-api/api/v1/acrs\" ], \"rev\": \"1\", \"creator\": \"inum=d206dd87-3a22-465d-bd25-bec9313cd42d,ou=people,o=json\", \"description\": null, \"type\": null, \"creationDate\": null, \"expirationDate\": null, \"deletable\": true }, { \"dn\": \"jansId=1800.556448d7-b349-45d8-a3a8-0d163df8753c,ou=resources,ou=uma,o=jans\", \"inum\": null, \"id\": \"1800.556448d7-b349-45d8-a3a8-0d163df8753c\", \"name\": \"Jans Cofig Api Uma Resource /jans-config-api/api/v1/config/cache\", \"iconUri\": \"http://www.jans.io/img/scim_logo.png\", \"scopes\": [ \"inum=CACA-4525,ou=scopes,o=jans\" ], \"scopeExpression\": null, \"clients\": [ \"inum=1801.6e8351d4-5d3f-4773-b632-6c84bf8207cd,ou=clients,o=jans\" ], \"resources\": [ \"https://testjans.gluu.com/jans-config-api/api/v1/config/cache\" ], \"rev\": \"1\", \"creator\": \"inum=d206dd87-3a22-465d-bd25-bec9313cd42d,ou=people,o=json\", \"description\": null, \"type\": null, \"creationDate\": null, \"expirationDate\": null, \"deletable\": true }, { \"dn\": \"jansId=1800.c4e0d1b6-e731-4c8d-a0ab-66784349a4da,ou=resources,ou=uma,o=jans\", \"inum\": null, \"id\": \"1800.c4e0d1b6-e731-4c8d-a0ab-66784349a4da\", \"name\": \"Jans Cofig Api Uma Resource /jans-config-api/api/v1/attributes\", \"iconUri\": \"http://www.jans.io/img/scim_logo.png\", \"scopes\": [ \"inum=CACA-0B30,ou=scopes,o=jans\" ], \"scopeExpression\": null, \"clients\": [ \"inum=1801.6e8351d4-5d3f-4773-b632-6c84bf8207cd,ou=clients,o=jans\" ], \"resources\": [ \"https://testjans.gluu.com/jans-config-api/api/v1/attributes\" ], \"rev\": \"1\", \"creator\": \"inum=d206dd87-3a22-465d-bd25-bec9313cd42d,ou=people,o=json\", \"description\": null, \"type\": null, \"creationDate\": null, \"expirationDate\": null, \"deletable\": true }, { \"dn\": \"jansId=1800.049d1198-a911-4032-aaf6-59cc94d3f4ef,ou=resources,ou=uma,o=jans\", \"inum\": null, \"id\": \"1800.049d1198-a911-4032-aaf6-59cc94d3f4ef\", \"name\": \"Jans Cofig Api Uma Resource /jans-config-api/api/v1/acrs\", \"iconUri\": \"http://www.jans.io/img/scim_logo.png\", \"scopes\": [ \"inum=CACA-D906,ou=scopes,o=jans\", \"inum=CACA-698C,ou=scopes,o=jans\" ], \"scopeExpression\": null, \"clients\": [ \"inum=1801.6e8351d4-5d3f-4773-b632-6c84bf8207cd,ou=clients,o=jans\" ], \"resources\": [ \"https://testjans.gluu.com/jans-config-api/api/v1/acrs\" ], \"rev\": \"1\", \"creator\": \"inum=d206dd87-3a22-465d-bd25-bec9313cd42d,ou=people,o=json\", \"description\": null, \"type\": null, \"creationDate\": null, \"expirationDate\": null, \"deletable\": true } ] To search using multiple arguments, you can change pattern that you want to find: /opt/jans/jans-cli/config-cli.py --operation-id get-oauth-uma-resources --endpoint-args limit:1,pattern:\"Jans Cofig Api Uma Resource /jans-config-api/api/v1/config/cache/native-persistence\" Getting access token for scope https://jans.io/oauth/config/uma/resources.readonly Calling with params limit=1&pattern=Jans+Cofig+Api+Uma+Resource+%2Fjans-config-api%2Fapi%2Fv1%2Fconfig%2Fcache%2Fnative-persistence [ { \"dn\": \"jansId=1800.02d24ac8-13d6-464d-af1d-46a6261eaa65,ou=resources,ou=uma,o=jans\", \"inum\": null, \"id\": \"1800.02d24ac8-13d6-464d-af1d-46a6261eaa65\", \"name\": \"Jans Cofig Api Uma Resource /jans-config-api/api/v1/config/cache/native-persistence\", \"iconUri\": \"http://www.jans.io/img/scim_logo.png\", \"scopes\": null, \"scopeExpression\": null, \"clients\": [ \"inum=1801.6e8351d4-5d3f-4773-b632-6c84bf8207cd,ou=clients,o=jans\" ], \"resources\": [ \"https://testjans.gluu.com/jans-config-api/api/v1/config/cache/native-persistence\" ], \"rev\": \"1\", \"creator\": \"inum=d206dd87-3a22-465d-bd25-bec9313cd42d,ou=people,o=json\", \"description\": null, \"type\": null, \"creationDate\": null, \"expirationDate\": null, \"deletable\": true }, { \"dn\": \"jansId=1800.6cd9bb98-05ac-43d2-bebb-3b1c92b9b409,ou=resources,ou=uma,o=jans\", \"inum\": null, \"id\": \"1800.6cd9bb98-05ac-43d2-bebb-3b1c92b9b409\", \"name\": \"Jans Cofig Api Uma Resource /jans-config-api/api/v1/config/cache/native-persistence\", \"iconUri\": \"http://www.jans.io/img/scim_logo.png\", \"scopes\": null, \"scopeExpression\": null, \"clients\": [ \"inum=1801.6e8351d4-5d3f-4773-b632-6c84bf8207cd,ou=clients,o=jans\" ], \"resources\": [ \"https://testjans.gluu.com/jans-config-api/api/v1/config/cache/native-persistence\" ], \"rev\": \"1\", \"creator\": \"inum=d206dd87-3a22-465d-bd25-bec9313cd42d,ou=people,o=json\", \"description\": null, \"type\": null, \"creationDate\": null, \"expirationDate\": null, \"deletable\": true } ]","title":"Get List of UMA Resources"},{"location":"admin/config-guide/oauth-umaresources-config/#get-oauth-uma-resource-by-id","text":"Operation ID: get-oauth-uma-resources-by-id Description: Gets an UMA resource by ID. url-suffix: id To get uma resource by its ID, run the following command: /opt/jans/jans-cli/config-cli.py --operation-id get-oauth-uma-resources-by-id --url-suffix id:1800.c4e0d1b6-e731-4c8d-a0ab-66784349a4da Getting access token for scope https://jans.io/oauth/config/uma/resources.readonly { \"dn\": \"jansId=1800.c4e0d1b6-e731-4c8d-a0ab-66784349a4da,ou=resources,ou=uma,o=jans\", \"inum\": null, \"id\": \"1800.c4e0d1b6-e731-4c8d-a0ab-66784349a4da\", \"name\": \"Jans Cofig Api Uma Resource /jans-config-api/api/v1/attributes\", \"iconUri\": \"http://www.jans.io/img/scim_logo.png\", \"scopes\": [ \"inum=CACA-0B30,ou=scopes,o=jans\" ], \"scopeExpression\": null, \"clients\": [ \"inum=1801.6e8351d4-5d3f-4773-b632-6c84bf8207cd,ou=clients,o=jans\" ], \"resources\": [ \"https://testjans.gluu.com/jans-config-api/api/v1/attributes\" ], \"rev\": \"1\", \"creator\": \"inum=d206dd87-3a22-465d-bd25-bec9313cd42d,ou=people,o=json\", \"description\": null, \"type\": null, \"creationDate\": null, \"expirationDate\": null, \"deletable\": true } replace the id with accurate one.","title":"Get Oauth UMA Resource by ID"},{"location":"admin/config-guide/oauth-umaresources-config/#patch-oauth-uma-resource-by-id","text":"Operation ID: patch-oauth-uma-resources-by-id Description: Partially updates an UMA resource by Inum. url-suffix: id Schema: Array of /components/schemas/PatchRequest As you see the description, you can update an existing uma resource partially with this following operation. Let's get the sample schema: /opt/jans/jans-cli/config-cli.py --schema /components/schemas/PatchRequest > /tmp/patch-uma.json { \"op\": \"move\", \"path\": \"string\", \"value\": {} } Let's want to update as deletable:false to an uma resource whose id=1800.c4e0d1b6-e731-4c8d-a0ab-66784349a4da . So we are going to operate replace where path is deletable with value: false . let's update the json as below: nan o / t mp/pa t ch - uma.jso n [ { \"op\" : \"replace\" , \"path\" : \"deletable\" , \"value\" : false } ] now let's do the operation: /op t /ja ns /ja ns - cli/co nf ig - cli.py -- opera t io n - id pa t ch - oau t h - uma - resources - by - id -- url - su ff ix id : 1800. c 4e0 d 1 b 6-e731-4 c 8 d - a 0 ab -66784349 a 4 da -- da ta / t mp/pa t ch - uma.jso n Ge tt i n g access t oke n f or scope h tt ps : //jans.io/oauth/config/uma/resources.write Server Respo nse : { \"dn\" : \"jansId=1800.c4e0d1b6-e731-4c8d-a0ab-66784349a4da,ou=resources,ou=uma,o=jans\" , \"inum\" : null , \"id\" : \"1800.c4e0d1b6-e731-4c8d-a0ab-66784349a4da\" , \"name\" : \"Jans Cofig Api Uma Resource /jans-config-api/api/v1/attributes\" , \"iconUri\" : \"http://www.jans.io/img/scim_logo.png\" , \"scopes\" : [ \"inum=CACA-0B30,ou=scopes,o=jans\" ], \"scopeExpression\" : null , \"clients\" : [ \"inum=1801.6e8351d4-5d3f-4773-b632-6c84bf8207cd,ou=clients,o=jans\" ], \"resources\" : [ \"https://testjans.gluu.com/jans-config-api/api/v1/attributes\" ], \"rev\" : \"1\" , \"creator\" : \"inum=d206dd87-3a22-465d-bd25-bec9313cd42d,ou=people,o=json\" , \"description\" : null , \"type\" : null , \"creationDate\" : null , \"expirationDate\" : null , \"deletable\" : false } you must see that deletable updated to false .","title":"Patch OAuth UMA Resource by ID"},{"location":"admin/config-guide/openid-connect-client-configuration/","tags":["administration","configuration","openid-connect"],"text":"OpenID Connect Configuration # Prerequisite: Know how to use the Janssen CLI in command-line mode Let's get the information of OpenID Connect Client Configuration: /opt/jans/jans-cli/config-cli.py --info OAuthOpenIDConnectClients Operation ID: get-oauth-openid-clients Description: Gets list of OpenID Connect clients Parameters: limit: Search size - max size of the results to return. [integer] pattern: Search pattern. [string] Operation ID: post-oauth-openid-clients Description: Create new OpenId connect client Schema: /components/schemas/Client Operation ID: put-oauth-openid-clients Description: Update OpenId Connect client. Schema: /components/schemas/Client Operation ID: get-oauth-openid-clients-by-inum Description: Get OpenId Connect Client by Inum. url-suffix: inum Operation ID: delete-oauth-openid-clients-by-inum Description: Delete OpenId Connect client. url-suffix: inum Operation ID: patch-oauth-openid-clients-by-inum Description: Update modified properties of OpenId Connect client by Inum. url-suffix: inum Schema: Array of /components/schemas/PatchRequest To get sample shema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/PatchRequest Get List of OpenID Clients # To get the openid clients, run the following command: /opt/jans/jans-cli/config-cli.py --operation-id get-oauth-openid-clients Getting access token for scope https://jans.io/oauth/config/openid/clients.readonly [ { \"dn\": \"inum=1801.30bd0499-9dc0-48dc-9eb3-96b80a8da856,ou=clients,o=jans\", \"inum\": \"1801.30bd0499-9dc0-48dc-9eb3-96b80a8da856\", \"clientSecret\": \"zITPCsgIfmDTkKWkonuu+g==\", \"frontChannelLogoutUri\": null, \"frontChannelLogoutSessionRequired\": false, \"registrationAccessToken\": null, \"clientIdIssuedAt\": null, \"clientSecretExpiresAt\": null, \"redirectUris\": null, \"claimRedirectUris\": null, \"responseTypes\": [ \"code\" ], \"grantTypes\": [ \"authorization_code\", \"refresh_token\", \"client_credentials\" ], \"applicationType\": \"web\", \"contacts\": null, \"clientName\": \"Jans Config Api Client\", \"idTokenTokenBindingCnf\": null, \"logoUri\": null, \"clientUri\": null, \"policyUri\": null, \"tosUri\": null, \"jwksUri\": null, \"jwks\": null, \"sectorIdentifierUri\": null, \"subjectType\": \"pairwise\", \"idTokenSignedResponseAlg\": \"RS256\", \"idTokenEncryptedResponseAlg\": null, \"idTokenEncryptedResponseEnc\": null, \"userInfoSignedResponseAlg\": null, \"userInfoEncryptedResponseAlg\": null, \"userInfoEncryptedResponseEnc\": null, \"requestObjectSigningAlg\": null, \"requestObjectEncryptionAlg\": null, \"requestObjectEncryptionEnc\": null, \"tokenEndpointAuthMethod\": \"client_secret_basic\", \"tokenEndpointAuthSigningAlg\": null, \"defaultMaxAge\": null, \"requireAuthTime\": false, \"defaultAcrValues\": null, \"initiateLoginUri\": null, \"postLogoutRedirectUris\": null, \"requestUris\": null, \"scopes\": [ \"inum=CACA-B9D4,ou=scopes,o=jans\", \"inum=CACA-5AA4,ou=scopes,o=jans\", \"inum=CACA-F1E3,ou=scopes,o=jans\", \"inum=CACA-A1BD,ou=scopes,o=jans\", \"inum=CACA-113F,ou=scopes,o=jans\", \"inum=CACA-22E5,ou=scopes,o=jans\", \"inum=CACA-E6DE,ou=scopes,o=jans\", \"inum=CACA-B965,ou=scopes,o=jans\", \"inum=CACA-7FB9,ou=scopes,o=jans\", \"inum=CACA-3B0C,ou=scopes,o=jans\", \"inum=CACA-FD1D,ou=scopes,o=jans\", \"inum=CACA-7419,ou=scopes,o=jans\", \"inum=CACA-55A1,ou=scopes,o=jans\", \"inum=CACA-7B22,ou=scopes,o=jans\", \"inum=CACA-66AE,ou=scopes,o=jans\", \"inum=CACA-8283,ou=scopes,o=jans\", \"inum=CACA-1A74,ou=scopes,o=jans\", \"inum=CACA-CCFC,ou=scopes,o=jans\", \"inum=CACA-EABC,ou=scopes,o=jans\", \"inum=CACA-E7BB,ou=scopes,o=jans\", \"inum=CACA-EF5F,ou=scopes,o=jans\", \"inum=CACA-179E,ou=scopes,o=jans\", \"inum=CACA-174C,ou=scopes,o=jans\", \"inum=CACA-B36D,ou=scopes,o=jans\", \"inum=CACA-88E3,ou=scopes,o=jans\", \"inum=CACA-C1F5,ou=scopes,o=jans\", \"inum=CACA-82B8,ou=scopes,o=jans\", \"inum=CACA-016F,ou=scopes,o=jans\", \"inum=CACA-8F20,ou=scopes,o=jans\", \"inum=CACA-79A1,ou=scopes,o=jans\" ], \"claims\": null, \"trustedClient\": false, \"lastAccessTime\": null, \"lastLogonTime\": null, \"persistClientAuthorizations\": true, \"includeClaimsInIdToken\": false, \"refreshTokenLifetime\": null, \"accessTokenLifetime\": null, \"customAttributes\": [], \"customObjectClasses\": [ \"top\" ], \"rptAsJwt\": false, \"accessTokenAsJwt\": false, \"accessTokenSigningAlg\": \"RS256\", \"disabled\": false, \"authorizedOrigins\": null, \"softwareId\": null, \"softwareVersion\": null, \"softwareStatement\": null, \"attributes\": { \"tlsClientAuthSubjectDn\": null, \"runIntrospectionScriptBeforeJwtCreation\": false, \"keepClientAuthorizationAfterExpiration\": false, \"allowSpontaneousScopes\": false, \"spontaneousScopes\": null, \"spontaneousScopeScriptDns\": null, \"backchannelLogoutUri\": null, \"backchannelLogoutSessionRequired\": false, \"additionalAudience\": null, \"postAuthnScripts\": null, \"consentGatheringScripts\": null, \"introspectionScripts\": null, \"rptClaimsScripts\": null }, \"backchannelTokenDeliveryMode\": null, \"backchannelClientNotificationEndpoint\": null, \"backchannelAuthenticationRequestSigningAlg\": null, \"backchannelUserCodeParameter\": null, \"expirationDate\": null, \"deletable\": false, \"jansId\": null }, { \"dn\": \"inum=1001.3c40746d-63a6-478e-b06d-8f49bb984e4f,ou=clients,o=jans\", \"inum\": \"1001.3c40746d-63a6-478e-b06d-8f49bb984e4f\", \"clientSecret\": \"eVXRaEojULdohgOUbMeFPA==\", \"frontChannelLogoutUri\": \"https://testjans.imshakil.me/identity/ssologout.htm\", \"frontChannelLogoutSessionRequired\": true, \"registrationAccessToken\": null, \"clientIdIssuedAt\": null, \"clientSecretExpiresAt\": null, \"redirectUris\": [ \"https://testjans.imshakil.me/identity/scim/auth\", \"https://testjans.imshakil.me/identity/authcode.htm\", \"https://testjans.imshakil.me/jans-auth/restv1/uma/gather_claims?authentication=true\" ], \"claimRedirectUris\": [ \"https://testjans.imshakil.me/jans-auth/restv1/uma/gather_claims\" ], \"responseTypes\": [ \"code\" ], \"grantTypes\": [ \"authorization_code\", \"implicit\", \"refresh_token\" ], \"applicationType\": \"web\", \"contacts\": null, \"clientName\": \"oxTrust Admin GUI\", \"idTokenTokenBindingCnf\": null, \"logoUri\": null, \"clientUri\": null, \"policyUri\": null, \"tosUri\": null, \"jwksUri\": null, \"jwks\": null, \"sectorIdentifierUri\": null, \"subjectType\": \"public\", \"idTokenSignedResponseAlg\": \"HS256\", \"idTokenEncryptedResponseAlg\": null, \"idTokenEncryptedResponseEnc\": null, \"userInfoSignedResponseAlg\": null, \"userInfoEncryptedResponseAlg\": null, \"userInfoEncryptedResponseEnc\": null, \"requestObjectSigningAlg\": null, \"requestObjectEncryptionAlg\": null, \"requestObjectEncryptionEnc\": null, \"tokenEndpointAuthMethod\": \"client_secret_basic\", \"tokenEndpointAuthSigningAlg\": null, \"defaultMaxAge\": null, \"requireAuthTime\": false, \"defaultAcrValues\": null, \"initiateLoginUri\": null, \"postLogoutRedirectUris\": [ \"https://testjans.imshakil.me/identity/finishlogout.htm\" ], \"requestUris\": null, \"scopes\": [ \"inum=F0C4,ou=scopes,o=jans\", \"inum=10B2,ou=scopes,o=jans\", \"inum=764C,ou=scopes,o=jans\" ], \"claims\": null, \"trustedClient\": true, \"lastAccessTime\": null, \"lastLogonTime\": null, \"persistClientAuthorizations\": false, \"includeClaimsInIdToken\": false, \"refreshTokenLifetime\": null, \"accessTokenLifetime\": null, \"customAttributes\": [], \"customObjectClasses\": [ \"top\" ], \"rptAsJwt\": false, \"accessTokenAsJwt\": false, \"accessTokenSigningAlg\": null, \"disabled\": false, \"authorizedOrigins\": null, \"softwareId\": null, \"softwareVersion\": null, \"softwareStatement\": null, \"attributes\": { \"tlsClientAuthSubjectDn\": null, \"runIntrospectionScriptBeforeJwtCreation\": false, \"keepClientAuthorizationAfterExpiration\": false, \"allowSpontaneousScopes\": false, \"spontaneousScopes\": null, \"spontaneousScopeScriptDns\": null, \"backchannelLogoutUri\": null, \"backchannelLogoutSessionRequired\": false, \"additionalAudience\": null, \"postAuthnScripts\": null, \"consentGatheringScripts\": null, \"introspectionScripts\": null, \"rptClaimsScripts\": null }, \"backchannelTokenDeliveryMode\": null, \"backchannelClientNotificationEndpoint\": null, \"backchannelAuthenticationRequestSigningAlg\": null, \"backchannelUserCodeParameter\": null, \"expirationDate\": null, \"deletable\": null, \"jansId\": null }, { \"dn\": \"inum=1202.049eb91f-6339-4e83-ac83-55df359f6c9c,ou=clients,o=jans\", \"inum\": \"1202.049eb91f-6339-4e83-ac83-55df359f6c9c\", \"clientSecret\": null, \"frontChannelLogoutUri\": null, \"frontChannelLogoutSessionRequired\": false, \"registrationAccessToken\": null, \"clientIdIssuedAt\": null, \"clientSecretExpiresAt\": null, \"redirectUris\": null, \"claimRedirectUris\": null, \"responseTypes\": null, \"grantTypes\": [ \"client_credentials\" ], \"applicationType\": \"native\", \"contacts\": null, \"clientName\": \"SCIM Requesting Party Client\", \"idTokenTokenBindingCnf\": null, \"logoUri\": null, \"clientUri\": null, \"policyUri\": null, \"tosUri\": null, \"jwksUri\": null, \"jwks\": \"{ \\\"keys\\\" : [ { \\\"kty\\\" : \\\"RSA\\\", \\\"e\\\" : \\\"AQAB\\\", \\\"use\\\" : \\\"sig\\\", \\\"crv\\\" : \\\"\\\", \\\"kid\\\" : \\\"0b60383f-13c9-4064-9de1-7946724c0bbc_sig_rs256\\\", \\\"x5c\\\" : [ \\\"MIIDCTCCAfGgAwIBAgIgLJXeu/MFKl144/y6Xj55fqA+RWTWE0VgEhOSb1CmITcwDQYJKoZIhvcNAQELBQAwJDEiMCAGA1UEAwwZSmFucyBBdXRoIENBIENlcnRpZmljYXRlczAeFw0yMTAxMTUyMjM5MTNaFw0yMjAxMTUyMjM5MjNaMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCK7v3/S3Qn1puC16XM1mChQa3ygnAMoDQivlDj0AxLmSEO4ulmubVTbsvBFkt45+kKLvDUDozaNFhhNtnX1vZt37Fnd7/lnsODVn7GOrc8pGyiR048MfmPONO77LLqyf/ByrxhMpBYTR22kniRdQMc1+dHjWHIGzvmsQgMuefT2U81fqRpL0dkL2xDs7OEHm6BjQUoJgSXnf5BmWvdf+WiYPe5DXe6g56LdyZwwgN0vcx1IoYSMvmHlZyNjzyOPhCNgLPexXFpniBcFc5b5nGISgpn37yjVm4UIIMMGajv7jNJZKXkKZ+F4KRnuIByTYHwTqiHEwQoleRhlKJpNbthAgMBAAGjJzAlMCMGA1UdJQQcMBoGCCsGAQUFBwMBBggrBgEFBQcDAgYEVR0lADANBgkqhkiG9w0BAQsFAAOCAQEAhYEvDDBZ1Sl8b4Ng0aSXN+zw4nwS7pXBAwj4yLid47D6FnomFw25PYDAghO7YehDW18zjgbON69L5PH9Tqnq/Jzu1qAWpjWpwBVMRogCiGip/Kk59HmQos5/ckm9kgKrWhUw7vEqramHw40uqjXWuDfykWDbSqRYX2rccubSGwRsocMoMEoeFXLtyeBgjqoFY1Uqt4VTMdjTv6ekD+BLVfXOTlhemHSRXBG7GJVpwebYIyN/lx7LFAHYqbBi0adyGTI0/HQBtxMQeu57qy9oP+Q9gKse5QAz5Zesld71bKmUOshSGg4ks1JHH70wtRNPdQOgfdaaHHVzoyZo6FcMqg==\\\" ], \\\"exp\\\" : 1642286363453, \\\"alg\\\" : \\\"RS256\\\", \\\"n\\\" : \\\"iu79_0t0J9abgtelzNZgoUGt8oJwDKA0Ir5Q49AMS5khDuLpZrm1U27LwRZLeOfpCi7w1A6M2jRYYTbZ19b2bd-xZ3e_5Z7Dg1Z-xjq3PKRsokdOPDH5jzjTu-yy6sn_wcq8YTKQWE0dtpJ4kXUDHNfnR41hyBs75rEIDLnn09lPNX6kaS9HZC9sQ7OzhB5ugY0FKCYEl53-QZlr3X_lomD3uQ13uoOei3cmcMIDdL3MdSKGEjL5h5WcjY88jj4QjYCz3sVxaZ4gXBXOW-ZxiEoKZ9-8o1ZuFCCDDBmo7-4zSWSl5CmfheCkZ7iAck2B8E6ohxMEKJXkYZSiaTW7YQ\\\" }, { \\\"kty\\\" : \\\"RSA\\\", \\\"e\\\" : \\\"AQAB\\\", \\\"use\\\" : \\\"sig\\\", \\\"crv\\\" : \\\"\\\", \\\"kid\\\" : \\\"b3c52773-7377-45a2-97f8-0e8cc3895342_sig_rs384\\\", \\\"x5c\\\" : [ \\\"MIIDCjCCAfKgAwIBAgIhAPXe8+Rao043PUbs+WlpDB17Gyq8osq3tl/4d2qb38eTMA0GCSqGSIb3DQEBDAUAMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwMTE1MjIzOTE0WhcNMjIwMTE1MjIzOTIzWjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0DJHMKIC9rsPUurwE9aRXJ0YCi0hUrfZJ7CP3bnE5dbjSFgO9jSpFT+BS8SEaEWhTMUsrLAXqANTqPfEz3ITWhVEHdDvBDrSrpjQQWcEksxYP4/ZaScnFg09yt6Y6U3UMzwPijlzvq84xsJ1KWaz2klCSWvb/jQ4RJj6SG4eTApX0A2cHJmHwJ1oM9SwQe+eeKprd+uZj12iouWPjah4ztz2PzzAmYh8l3Wlycw7hs5OQnxU2ZnygSMYh/2V5cKVK22FAp3fE3QxLXYmn4hkmSoHcy0UjRxhSS5Q8m4AcJzdfUauMqpIJ0yL/W9jkAVdsgTMcacjJF9eesVyhcwwgwIDAQABoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwDQYJKoZIhvcNAQEMBQADggEBAJHB8bKmnQpllotN3dDg1heS2zqdsqyPK7K/5TFBRpXJV2LrIIAHEw5NjIh3vxva/dUwiJD/9uGpi3Xmn9wVFXhIxzYtSAGQmYxFEtkKsZZ7HmndmFbqbeHYv2q266yBQxx1GoZELyU85rrF+hB+/ZSdeMdqjq+Tyr25NwSHwDkGlYui3WAqLH0l0LqIvtSO5bgv6fpqhXe4H8PJ41EUsChN0HrIXNMJLbdvw8tnznJSMbaqKXjKCh0qr9GvHhxvZkDyklWRFTelg8Ct2xiH/eGeu2jwwc/QndcxNq0lqcFzyzp66oTUIdwrQitP9lgipB4c42jefoZjhv6mQaDbuO8=\\\" ], \\\"exp\\\" : 1642286363453, \\\"alg\\\" : \\\"RS384\\\", \\\"n\\\" : \\\"0DJHMKIC9rsPUurwE9aRXJ0YCi0hUrfZJ7CP3bnE5dbjSFgO9jSpFT-BS8SEaEWhTMUsrLAXqANTqPfEz3ITWhVEHdDvBDrSrpjQQWcEksxYP4_ZaScnFg09yt6Y6U3UMzwPijlzvq84xsJ1KWaz2klCSWvb_jQ4RJj6SG4eTApX0A2cHJmHwJ1oM9SwQe-eeKprd-uZj12iouWPjah4ztz2PzzAmYh8l3Wlycw7hs5OQnxU2ZnygSMYh_2V5cKVK22FAp3fE3QxLXYmn4hkmSoHcy0UjRxhSS5Q8m4AcJzdfUauMqpIJ0yL_W9jkAVdsgTMcacjJF9eesVyhcwwgw\\\" }, { \\\"kty\\\" : \\\"RSA\\\", \\\"e\\\" : \\\"AQAB\\\", \\\"use\\\" : \\\"sig\\\", \\\"crv\\\" : \\\"\\\", \\\"kid\\\" : \\\"bf5b0a2f-c977-4e0d-9a3c-bd8faef18e48_sig_rs512\\\", \\\"x5c\\\" : [ \\\"MIIDCTCCAfGgAwIBAgIgDrTQ+5YMX6eyx/WzSSJqS9gEsHlewOmswtphb3jE4/4wDQYJKoZIhvcNAQENBQAwJDEiMCAGA1UEAwwZSmFucyBBdXRoIENBIENlcnRpZmljYXRlczAeFw0yMTAxMTUyMjM5MTVaFw0yMjAxMTUyMjM5MjNaMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCWfXYlVgDnZpXP7XdEfSYbmJbKgVh0VzhRUzoXc1UTK+FZRM4NNuQBwkfF1X1vMg5x+1Dp1fhNw6anzf5oRjkgog6hEOucWDXq9+jjlkJPnUrYD9/yrinnBQPjsv2NFxWu7qI3KYUIWe96blPiqO1pJjUPk6dybCYoNoxk/0ut07/9uXcf3qVawqypGz4FHeiVz3SUJ1P17h59CS0+nCBT5OkR+rhT4XNc6qcqO3YDX/mj1vahuJijztoQQN82xp31bod9KsBezHIpuW8aM+steNz/aOn49bLYbNxneXV032wPmTZHr0mxxIlS95Vux0y/FVMnt/D1/L5SbWV/SxVDAgMBAAGjJzAlMCMGA1UdJQQcMBoGCCsGAQUFBwMBBggrBgEFBQcDAgYEVR0lADANBgkqhkiG9w0BAQ0FAAOCAQEAaEMcSaALKCCLjQ9GFyGQT3pOdT5AplJSD4ql+dISq44atxuDGSyrKyGehW07djBlUZFW8aDDMsOnQMjC049RU1LuU77FB9cmFhWAFCGIPTFFDdQrCK+LYB9LwSRX7kqBHsHZhqH9STdRMamakLnNuSJS5YzQNFziCIEUofkg0xe5WsAB4GdJrOfvy7JF0UnmjXhwpvZY/65b/Vv0o28j46QS4w769ltZwxIABKom0jdbfbn41UeLTlwgRftXh2/k59W5ma3lZPO/zi2aOl9nuj+7lXIUQKLoBUgDBYJ+8SyF0HhqDvlWijb29eJlPKKHkFRiQTo5Cbs704GWK8bx1A==\\\" ], \\\"exp\\\" : 1642286363453, \\\"alg\\\" : \\\"RS512\\\", \\\"n\\\" : \\\"ln12JVYA52aVz-13RH0mG5iWyoFYdFc4UVM6F3NVEyvhWUTODTbkAcJHxdV9bzIOcftQ6dX4TcOmp83-aEY5IKIOoRDrnFg16vfo45ZCT51K2A_f8q4p5wUD47L9jRcVru6iNymFCFnvem5T4qjtaSY1D5OncmwmKDaMZP9LrdO__bl3H96lWsKsqRs-BR3olc90lCdT9e4efQktPpwgU-TpEfq4U-FzXOqnKjt2A1_5o9b2obiYo87aEEDfNsad9W6HfSrAXsxyKblvGjPrLXjc_2jp-PWy2GzcZ3l1dN9sD5k2R69JscSJUveVbsdMvxVTJ7fw9fy-Um1lf0sVQw\\\" }, { \\\"kty\\\" : \\\"EC\\\", \\\"use\\\" : \\\"sig\\\", \\\"crv\\\" : \\\"P-256\\\", \\\"kid\\\" : \\\"fb0ef9a4-3b7f-4880-b896-57449de9ece8_sig_es256\\\", \\\"x5c\\\" : [ \\\"MIIBfTCCASOgAwIBAgIgQgvjjFY0ZMqTJ3pbRsXCrIcHCdP64r+VwPgHUCzhTwgwCgYIKoZIzj0EAwIwJDEiMCAGA1UEAwwZSmFucyBBdXRoIENBIENlcnRpZmljYXRlczAeFw0yMTAxMTUyMjM5MTVaFw0yMjAxMTUyMjM5MjNaMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAAT7B1VR+pnR8J0Omavpaeyq5K2aiJZXXQvuHn6piFZd7Gfr0rzzA9hSTgGZ84yOA96ZkV8XS71cuzP24Q72SsCKoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwCgYIKoZIzj0EAwIDSAAwRQIgPMWe6opagvCW0nkMASqpy7aQmnOw2cHFk8gqc7ztZyoCIQCK0xN9Kc3my9qGPYM75lUx2AwAzgyhkdWzo80jd+BVkA==\\\" ], \\\"x\\\" : \\\"APsHVVH6mdHwnQ6Zq-lp7KrkrZqIllddC-4efqmIVl3s\\\", \\\"y\\\" : \\\"Z-vSvPMD2FJOAZnzjI4D3pmRXxdLvVy7M_bhDvZKwIo\\\", \\\"exp\\\" : 1642286363453, \\\"alg\\\" : \\\"ES256\\\" }, { \\\"kty\\\" : \\\"EC\\\", \\\"use\\\" : \\\"sig\\\", \\\"crv\\\" : \\\"P-384\\\", \\\"kid\\\" : \\\"7cc680c6-c7d5-4a5c-885e-1e591dc1511d_sig_es384\\\", \\\"x5c\\\" : [ \\\"MIIBuTCCAUCgAwIBAgIgDPX0NX82/puI5AxdpOoQxPrsODbEGF3usqHUizJFvd4wCgYIKoZIzj0EAwMwJDEiMCAGA1UEAwwZSmFucyBBdXRoIENBIENlcnRpZmljYXRlczAeFw0yMTAxMTUyMjM5MTZaFw0yMjAxMTUyMjM5MjNaMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwdjAQBgcqhkjOPQIBBgUrgQQAIgNiAAR88zjor1uRqZg+UFFF7VrUyPXrGlkojxw2WiJsk3AKr6IbZNhGasSxjLV24Gjoo8BJUdcwX4DcOufpspU0KBUCaNY0rJjV6UM8kiyqDCYoKW0UpKxx1eXwm5m1AmCjkOSjJzAlMCMGA1UdJQQcMBoGCCsGAQUFBwMBBggrBgEFBQcDAgYEVR0lADAKBggqhkjOPQQDAwNnADBkAjAjyJsnKck1+hkXjAoN5PpLLwua4i6+KfW6fBeOXbwGjN7WkfJ595KstuPMI7GzP/ACMAaHxFdnih0lkfWJ6lwr3IXn4eon/yAskkN24DrK0Q9e1mJkrDU2uc3ybh796+f3IQ==\\\" ], \\\"x\\\" : \\\"fPM46K9bkamYPlBRRe1a1Mj16xpZKI8cNloibJNwCq-iG2TYRmrEsYy1duBo6KPA\\\", \\\"y\\\" : \\\"SVHXMF-A3Drn6bKVNCgVAmjWNKyY1elDPJIsqgwmKCltFKSscdXl8JuZtQJgo5Dk\\\", \\\"exp\\\" : 1642286363453, \\\"alg\\\" : \\\"ES384\\\" }, { \\\"kty\\\" : \\\"EC\\\", \\\"use\\\" : \\\"sig\\\", \\\"crv\\\" : \\\"P-521\\\", \\\"kid\\\" : \\\"98011bc0-8566-41ec-a64b-e0fca1fb22a2_sig_es512\\\", \\\"x5c\\\" : [ \\\"MIICBjCCAWegAwIBAgIhAM1ik4Lr1/favN6xSF65r92aemqYgpCMfLO9vVAtmOO4MAoGCCqGSM49BAMEMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwMTE1MjIzOTE2WhcNMjIwMTE1MjIzOTIzWjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIGbMBAGByqGSM49AgEGBSuBBAAjA4GGAAQAZG1VCPrKI5D9iLqkibhaKHH/j3SmDjhr9em63SIztO6gFXtEFNW4Jqc7oTHHcOv6VpagxX5XTzLinhpUQRuzEFUAw39iGsIJbwvGWarrw5/OCZaKPNRVA/kzAf9dl0I17EMyvGP0ctm6t4qqY8PjqygjA2nBoZWwLnhZu9q54IrdT+6jJzAlMCMGA1UdJQQcMBoGCCsGAQUFBwMBBggrBgEFBQcDAgYEVR0lADAKBggqhkjOPQQDBAOBjAAwgYgCQgHydUf16d/5yvFP5NGzBHOYY7sQ5jV0i2ICC+Vdh02jVTcmaAy6f2uraa6eL5X9SrfiwtR9HvkMqB/svMzAv999mQJCAL3LrtobouAY/i4Hxvfgt/H9Sf5G47zbO5QJBoqkOA9Q1OG4paRIVSQ3d1iZFvSPLfmbqwXee0aq8H9CU192+y52\\\" ], \\\"x\\\" : \\\"ZG1VCPrKI5D9iLqkibhaKHH_j3SmDjhr9em63SIztO6gFXtEFNW4Jqc7oTHHcOv6VpagxX5XTzLinhpUQRuzEFU\\\", \\\"y\\\" : \\\"AMN_YhrCCW8Lxlmq68OfzgmWijzUVQP5MwH_XZdCNexDMrxj9HLZureKqmPD46soIwNpwaGVsC54WbvaueCK3U_u\\\", \\\"exp\\\" : 1642286363453, \\\"alg\\\" : \\\"ES512\\\" } ]}\", \"sectorIdentifierUri\": null, \"subjectType\": \"public\", \"idTokenSignedResponseAlg\": \"HS256\", \"idTokenEncryptedResponseAlg\": null, \"idTokenEncryptedResponseEnc\": null, \"userInfoSignedResponseAlg\": null, \"userInfoEncryptedResponseAlg\": null, \"userInfoEncryptedResponseEnc\": null, \"requestObjectSigningAlg\": null, \"requestObjectEncryptionAlg\": null, \"requestObjectEncryptionEnc\": null, \"tokenEndpointAuthMethod\": \"private_key_jwt\", \"tokenEndpointAuthSigningAlg\": null, \"defaultMaxAge\": null, \"requireAuthTime\": false, \"defaultAcrValues\": null, \"initiateLoginUri\": null, \"postLogoutRedirectUris\": null, \"requestUris\": null, \"scopes\": null, \"claims\": null, \"trustedClient\": false, \"lastAccessTime\": null, \"lastLogonTime\": null, \"persistClientAuthorizations\": false, \"includeClaimsInIdToken\": false, \"refreshTokenLifetime\": null, \"accessTokenLifetime\": null, \"customAttributes\": [], \"customObjectClasses\": [ \"top\" ], \"rptAsJwt\": false, \"accessTokenAsJwt\": false, \"accessTokenSigningAlg\": null, \"disabled\": false, \"authorizedOrigins\": null, \"softwareId\": null, \"softwareVersion\": null, \"softwareStatement\": null, \"attributes\": { \"tlsClientAuthSubjectDn\": null, \"runIntrospectionScriptBeforeJwtCreation\": false, \"keepClientAuthorizationAfterExpiration\": false, \"allowSpontaneousScopes\": false, \"spontaneousScopes\": null, \"spontaneousScopeScriptDns\": null, \"backchannelLogoutUri\": null, \"backchannelLogoutSessionRequired\": false, \"additionalAudience\": null, \"postAuthnScripts\": null, \"consentGatheringScripts\": null, \"introspectionScripts\": null, \"rptClaimsScripts\": null }, \"backchannelTokenDeliveryMode\": null, \"backchannelClientNotificationEndpoint\": null, \"backchannelAuthenticationRequestSigningAlg\": null, \"backchannelUserCodeParameter\": null, \"expirationDate\": null, \"deletable\": null, \"jansId\": null }, { \"dn\": \"inum=1201.95be8034-0b72-4add-959c-3edf98b91af6,ou=clients,o=jans\", \"inum\": \"1201.95be8034-0b72-4add-959c-3edf98b91af6\", \"clientSecret\": null, \"frontChannelLogoutUri\": null, \"frontChannelLogoutSessionRequired\": false, \"registrationAccessToken\": null, \"clientIdIssuedAt\": null, \"clientSecretExpiresAt\": null, \"redirectUris\": null, \"claimRedirectUris\": null, \"responseTypes\": null, \"grantTypes\": [ \"client_credentials\" ], \"applicationType\": \"native\", \"contacts\": null, \"clientName\": \"SCIM Resource Server Client\", \"idTokenTokenBindingCnf\": null, \"logoUri\": null, \"clientUri\": null, \"policyUri\": null, \"tosUri\": null, \"jwksUri\": null, \"jwks\": \"{ \\\"keys\\\" : [ { \\\"kty\\\" : \\\"RSA\\\", \\\"e\\\" : \\\"AQAB\\\", \\\"use\\\" : \\\"sig\\\", \\\"crv\\\" : \\\"\\\", \\\"kid\\\" : \\\"8e6d654d-2133-45b6-84c4-4fce267d6bee_sig_rs256\\\", \\\"x5c\\\" : [ \\\"MIIDCjCCAfKgAwIBAgIhAO4ZTRoknOI/s7Mq9hIT424qwd9tY05Ht2uSgz/CuWmbMA0GCSqGSIb3DQEBCwUAMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwMTE1MjIzOTA5WhcNMjIwMTE1MjIzOTE5WjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsircewYbwIlSPYt6H3yFoxn26wSpij6sYsFHe6HcWkxSmbgkYSfTF5n+14PorBhsWzKDY+YODqIH9sNfZAjx3yX/VQpqlXn52Uwt1ZGb8tnwaNbbMkFW2848fqZXxtZHrBUVMbN+jiMec1tnI6ONIsDNJlBB4jJgE/wIThMtl5cmys9/RHmfr6YAnEVEZksFtyaDS3W4f3JsrbgWs1IYcY9MGeAQJ+OpXifb5D0qhSUrDjLBbKCOukvRf6Ue3U/Q4NaxpokHYhqbr/YA6jiZ2XPcJl53HKdpU4eO6V4HP0nuiVi7q1nQhb9f4cnuPnIKYaai759bozXTjByoki6YCQIDAQABoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwDQYJKoZIhvcNAQELBQADggEBAIyswl5l42DSzAJmJTIwNwJUDGORPPoj3CQlBsaT5pQ2Ykiqv1gqBLjNZw/Em1TYeD2Udm8Gjn5sPUxcwdiiH1zATYPyxk/uv4POkwQBw2n3L8OA4pl0d6So5HVzA1CS23Sy1CSKK0OiRVMym0TxzutYIJB4Usqg2KhgwJBzonoAHY8IXd9QvlV7+4Cb2gE4jpF8kUKgF3dCqQVZybDrEFQ0xf8bDPWp4CBTTVoHsyr/bn7UFpHO1FxKAWJglNa6cNOv1a/1QzjPK2OZGnYciHf/BT6SWRkJukRNs/O3jrfJJsw+LSlQSjpcZPMUwJ3+JJ5Eax41bseue1mLa1js2h4=\\\" ], \\\"exp\\\" : 1642286359278, \\\"alg\\\" : \\\"RS256\\\", \\\"n\\\" : \\\"sircewYbwIlSPYt6H3yFoxn26wSpij6sYsFHe6HcWkxSmbgkYSfTF5n-14PorBhsWzKDY-YODqIH9sNfZAjx3yX_VQpqlXn52Uwt1ZGb8tnwaNbbMkFW2848fqZXxtZHrBUVMbN-jiMec1tnI6ONIsDNJlBB4jJgE_wIThMtl5cmys9_RHmfr6YAnEVEZksFtyaDS3W4f3JsrbgWs1IYcY9MGeAQJ-OpXifb5D0qhSUrDjLBbKCOukvRf6Ue3U_Q4NaxpokHYhqbr_YA6jiZ2XPcJl53HKdpU4eO6V4HP0nuiVi7q1nQhb9f4cnuPnIKYaai759bozXTjByoki6YCQ\\\" }, { \\\"kty\\\" : \\\"RSA\\\", \\\"e\\\" : \\\"AQAB\\\", \\\"use\\\" : \\\"sig\\\", \\\"crv\\\" : \\\"\\\", \\\"kid\\\" : \\\"10a2a7f6-cabf-41c0-9d62-37644f214e1c_sig_rs384\\\", \\\"x5c\\\" : [ \\\"MIIDCjCCAfKgAwIBAgIhAPAwaemYVwozpAJBHURxIh6oD+BjzEvhLegWbdsM7/6zMA0GCSqGSIb3DQEBDAUAMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwMTE1MjIzOTEwWhcNMjIwMTE1MjIzOTE5WjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1s5Kx0ltPJswSizHDNTA786pyU3bqT5dym0O/9RUs1ishsp76QjytsYdxRZzzaYB4CcEaVRj5ZIZQwt0JNqbfx/MPiMEvpJhZHEruZRc1EsE3kUCx6yInBIuHk6yKsdYoAKiHa0dJOMirTcElZyCCzq83QBKpYdX7kV+i29kF/lOSvPeAsizN8HSmB29Hhy30nB3GmcYwghHAXCSpG5g467iGBi+gOMxRm7g/Uj/WSYIDc8CyGyd6iHPK9smCyna5cCfRtuGTAf+/fnfiK5IFrGXvDK5ggM+cbKBope7RceSawN28kjVtt+gY6oLvI3JrV0V33qKTC30JnPJCxTZ4wIDAQABoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwDQYJKoZIhvcNAQEMBQADggEBAGT0S+ke7qG9b7VS553n2JLTB13kSlXrBoa1XX4NlhnHnWO/w/YTFAi3jGVmgCesTr+2XBBFAIdOD9bC397Ufi8xd3PEDhNQKpWThhJpasMJvsiVqnXRsmoN+j5sqtzyUwl1Dsk5zdtDvoV7zeJHJ3niEpS5in6Gw8jMakn84VTekvtQvG6NBWwjVwWc4awSN18YVhMJYbs5J1tTSOcXjdwPD4Ee0WQMBrKqLeo7b9W5/F2Jb3DbfgMhkikVA9jRowyLMgFpyMI6VPneMDWyadnS9YrJHeX1Ml6i3m0uN3Jvp817jhgYFS1L74p3gA9oO0Tin6wnS5EZdWp8kCfrCx4=\\\" ], \\\"exp\\\" : 1642286359278, \\\"alg\\\" : \\\"RS384\\\", \\\"n\\\" : \\\"1s5Kx0ltPJswSizHDNTA786pyU3bqT5dym0O_9RUs1ishsp76QjytsYdxRZzzaYB4CcEaVRj5ZIZQwt0JNqbfx_MPiMEvpJhZHEruZRc1EsE3kUCx6yInBIuHk6yKsdYoAKiHa0dJOMirTcElZyCCzq83QBKpYdX7kV-i29kF_lOSvPeAsizN8HSmB29Hhy30nB3GmcYwghHAXCSpG5g467iGBi-gOMxRm7g_Uj_WSYIDc8CyGyd6iHPK9smCyna5cCfRtuGTAf-_fnfiK5IFrGXvDK5ggM-cbKBope7RceSawN28kjVtt-gY6oLvI3JrV0V33qKTC30JnPJCxTZ4w\\\" }, { \\\"kty\\\" : \\\"RSA\\\", \\\"e\\\" : \\\"AQAB\\\", \\\"use\\\" : \\\"sig\\\", \\\"crv\\\" : \\\"\\\", \\\"kid\\\" : \\\"35a9fa3e-56ac-4408-91c3-e959735222b9_sig_rs512\\\", \\\"x5c\\\" : [ \\\"MIIDCjCCAfKgAwIBAgIhAKLT4VuuTD1hb4Gsdd6djKvblI8eSGoksOMt+l2OG01XMA0GCSqGSIb3DQEBDQUAMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwMTE1MjIzOTEwWhcNMjIwMTE1MjIzOTE5WjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAppg3PsDya/MqabJX27lWx/xy/2zWaSF9+AQ1el34ECdf5e2PGjZIY5Nsx4T2K5uPTz9gH1i/3x8ViCNCX+VGjmyU96LQrLqTP0p9/dI1/E9Llr1igVn8ryyMCf0i8o+y9wEuxaRtiSCtUx65KLzwiGefgZGd7UwrAFce6Hy7VvYDdx1z6AcsJt08CXdDUAIU/M5zq3JCfmpyMFQQHPQ6H6UlK8pFeAGxLNp4IUVmZgUaswnZiaKgglMBqVVOh7bGBIQbmjzbwnIOWVoyuZt6vRfdQUoduya+PwxjwkF4WCRNNJr0NRbMp2aXJJvAHLNPcDXr2pntg4Gb2s40DMuimwIDAQABoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwDQYJKoZIhvcNAQENBQADggEBAIjIpRhEg9fQ9DQXbe7wEtaKpxzTl/FM+BAriQiIek2ZYDy2ux+uHmbTPYwIGNyTpkeAkkqk2xFUjP0QYDo9Q9vqlrWz0mTXDoRDuqyFtHy/4n2xVtAmJSg5us4wFWyBSiSOWyOL3H7TUMlSFjVGLUkweSOTymM29mPYb6xRay/6f1q6jB28LtHCpWm15ZmHa2XdyZTb5WSSD480S7jXcF3ON48AasXBfRxZpZpigF6YLZbxqSU4829RjnexfMJWHy81hVeFH3L+7WUkASpZNfIGlzKSFDqVuK3RncMswCHgMcygdzjem6DDH71qUDpwMVGLIcVQ0ZSjQzFSpd6fKag=\\\" ], \\\"exp\\\" : 1642286359278, \\\"alg\\\" : \\\"RS512\\\", \\\"n\\\" : \\\"ppg3PsDya_MqabJX27lWx_xy_2zWaSF9-AQ1el34ECdf5e2PGjZIY5Nsx4T2K5uPTz9gH1i_3x8ViCNCX-VGjmyU96LQrLqTP0p9_dI1_E9Llr1igVn8ryyMCf0i8o-y9wEuxaRtiSCtUx65KLzwiGefgZGd7UwrAFce6Hy7VvYDdx1z6AcsJt08CXdDUAIU_M5zq3JCfmpyMFQQHPQ6H6UlK8pFeAGxLNp4IUVmZgUaswnZiaKgglMBqVVOh7bGBIQbmjzbwnIOWVoyuZt6vRfdQUoduya-PwxjwkF4WCRNNJr0NRbMp2aXJJvAHLNPcDXr2pntg4Gb2s40DMuimw\\\" }, { \\\"kty\\\" : \\\"EC\\\", \\\"use\\\" : \\\"sig\\\", \\\"crv\\\" : \\\"P-256\\\", \\\"kid\\\" : \\\"b05a91e8-aa4e-4f6c-860a-3b63f13b16da_sig_es256\\\", \\\"x5c\\\" : [ \\\"MIIBfDCCASOgAwIBAgIgFbx/JYXagj82QeW+8XBk/FcdCinm/kX04q4tBOKiQ+gwCgYIKoZIzj0EAwIwJDEiMCAGA1UEAwwZSmFucyBBdXRoIENBIENlcnRpZmljYXRlczAeFw0yMTAxMTUyMjM5MTFaFw0yMjAxMTUyMjM5MTlaMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAARNynAgBRUdqdd5/Os3gpG/Y/CozNptimxnUXdGcDrMrLFBOtwVrB6wYk69Z9U2iY6KPTmgxHQ/MxcHiJOsTfuOoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwCgYIKoZIzj0EAwIDRwAwRAIgeohxfVOK3qgJSNZRzk50PvjeZZ6sIJi1uAOlsaYEMpcCIGPLcDJYIaFfNVQbO/UZjymtiDpoZdb8U39GSanA6HfP\\\" ], \\\"x\\\" : \\\"TcpwIAUVHanXefzrN4KRv2PwqMzabYpsZ1F3RnA6zKw\\\", \\\"y\\\" : \\\"ALFBOtwVrB6wYk69Z9U2iY6KPTmgxHQ_MxcHiJOsTfuO\\\", \\\"exp\\\" : 1642286359278, \\\"alg\\\" : \\\"ES256\\\" }, { \\\"kty\\\" : \\\"EC\\\", \\\"use\\\" : \\\"sig\\\", \\\"crv\\\" : \\\"P-384\\\", \\\"kid\\\" : \\\"30fc8067-9cbd-4a39-8621-6555815e046f_sig_es384\\\", \\\"x5c\\\" : [ \\\"MIIBuzCCAUCgAwIBAgIgAeP45q0dJdlruXGW4aKW/728ttfGj31IHROMLnFa5OQwCgYIKoZIzj0EAwMwJDEiMCAGA1UEAwwZSmFucyBBdXRoIENBIENlcnRpZmljYXRlczAeFw0yMTAxMTUyMjM5MTFaFw0yMjAxMTUyMjM5MTlaMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwdjAQBgcqhkjOPQIBBgUrgQQAIgNiAARHgy8tqS+sfqcL4f0LrTnisvAN6QEgylRR/upFj9+FOc7b5eImEzhO+PMhTmNvbutWN+0pVhZ5IcBY9dFSDyBSs9lkWgUDgcKXyg7HCIhnC7CXQfwPKOzH7ZzoD/2D6SWjJzAlMCMGA1UdJQQcMBoGCCsGAQUFBwMBBggrBgEFBQcDAgYEVR0lADAKBggqhkjOPQQDAwNpADBmAjEAp1Gof1uj66oNQsIvSaKBhZkgRoAIweQKVbvcXUTKr3P00HOZMdCrkhYwqXEmDmmzAjEA2sk385nNl/uyUzaW3gfciCxXAeMXUQUjmp6ZDrpuPDleL6jo1u6hoURO30EXBNRR\\\" ], \\\"x\\\" : \\\"R4MvLakvrH6nC-H9C6054rLwDekBIMpUUf7qRY_fhTnO2-XiJhM4TvjzIU5jb27r\\\", \\\"y\\\" : \\\"VjftKVYWeSHAWPXRUg8gUrPZZFoFA4HCl8oOxwiIZwuwl0H8Dyjsx-2c6A_9g-kl\\\", \\\"exp\\\" : 1642286359278, \\\"alg\\\" : \\\"ES384\\\" }, { \\\"kty\\\" : \\\"EC\\\", \\\"use\\\" : \\\"sig\\\", \\\"crv\\\" : \\\"P-521\\\", \\\"kid\\\" : \\\"4c1c8652-06a0-4203-bec7-f5e1408f9a71_sig_es512\\\", \\\"x5c\\\" : [ \\\"MIICBTCCAWegAwIBAgIhAOSKu6QwZhmEMffavHu0TX9xI23MKmwdmhS3iFnklzJrMAoGCCqGSM49BAMEMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwMTE1MjIzOTExWhcNMjIwMTE1MjIzOTE5WjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIGbMBAGByqGSM49AgEGBSuBBAAjA4GGAAQA79ze+ti5XVPYSVjd5j/pFDMftJC/yKZ67UXMF4hGKYPOpyntzg2DpObgmYwnyituSmE+Nk04aYyMb9wDYPtAKywA4K+G+8M4i3oQ3u2fxxIEcd/k1hl63rAJwaRCHHYSeUuHkDs90aYNkwTotuOta2+IVzLHTFtut78Ifejy41yqG76jJzAlMCMGA1UdJQQcMBoGCCsGAQUFBwMBBggrBgEFBQcDAgYEVR0lADAKBggqhkjOPQQDBAOBiwAwgYcCQSyYB5WGd7N0eutyN4VZFnhivJczXshpkYuz5/XX1HmZwNIwBtc1nTSTclQyZNNNPsadKHW3zrpLmuh7ZJtkAQwjAkIBHOUe7iZNtzzz9o3JX6c3a0GtAkNdV3fDB523Xp+jq6coUzzbUo0qX3tD01iKrxtHh/RY3C7GYNRTOndw9G7efnE=\\\" ], \\\"x\\\" : \\\"AO_c3vrYuV1T2ElY3eY_6RQzH7SQv8imeu1FzBeIRimDzqcp7c4Ng6Tm4JmMJ8orbkphPjZNOGmMjG_cA2D7QCss\\\", \\\"y\\\" : \\\"AOCvhvvDOIt6EN7tn8cSBHHf5NYZet6wCcGkQhx2EnlLh5A7PdGmDZME6LbjrWtviFcyx0xbbre_CH3o8uNcqhu-\\\", \\\"exp\\\" : 1642286359278, \\\"alg\\\" : \\\"ES512\\\" } ]}\", \"sectorIdentifierUri\": null, \"subjectType\": \"public\", \"idTokenSignedResponseAlg\": \"HS256\", \"idTokenEncryptedResponseAlg\": null, \"idTokenEncryptedResponseEnc\": null, \"userInfoSignedResponseAlg\": null, \"userInfoEncryptedResponseAlg\": null, \"userInfoEncryptedResponseEnc\": null, \"requestObjectSigningAlg\": null, \"requestObjectEncryptionAlg\": null, \"requestObjectEncryptionEnc\": null, \"tokenEndpointAuthMethod\": \"private_key_jwt\", \"tokenEndpointAuthSigningAlg\": null, \"defaultMaxAge\": null, \"requireAuthTime\": false, \"defaultAcrValues\": null, \"initiateLoginUri\": null, \"postLogoutRedirectUris\": null, \"requestUris\": null, \"scopes\": [ \"inum=6D99,ou=scopes,o=jans\" ], \"claims\": null, \"trustedClient\": false, \"lastAccessTime\": null, \"lastLogonTime\": null, \"persistClientAuthorizations\": false, \"includeClaimsInIdToken\": false, \"refreshTokenLifetime\": null, \"accessTokenLifetime\": null, \"customAttributes\": [], \"customObjectClasses\": [ \"top\" ], \"rptAsJwt\": false, \"accessTokenAsJwt\": false, \"accessTokenSigningAlg\": null, \"disabled\": false, \"authorizedOrigins\": null, \"softwareId\": null, \"softwareVersion\": null, \"softwareStatement\": null, \"attributes\": { \"tlsClientAuthSubjectDn\": null, \"runIntrospectionScriptBeforeJwtCreation\": false, \"keepClientAuthorizationAfterExpiration\": false, \"allowSpontaneousScopes\": false, \"spontaneousScopes\": null, \"spontaneousScopeScriptDns\": null, \"backchannelLogoutUri\": null, \"backchannelLogoutSessionRequired\": false, \"additionalAudience\": null, \"postAuthnScripts\": null, \"consentGatheringScripts\": null, \"introspectionScripts\": null, \"rptClaimsScripts\": null }, \"backchannelTokenDeliveryMode\": null, \"backchannelClientNotificationEndpoint\": null, \"backchannelAuthenticationRequestSigningAlg\": null, \"backchannelUserCodeParameter\": null, \"expirationDate\": null, \"deletable\": null, \"jansId\": null } ] It will show all the openid clients together. To search using parameters: /opt/jans/jans-cli/config-cli.py --operation-id get-oauth-openid-clients --endpoint-args limit:2 It will show two OpenID clients randomly. Getting access token for scope https://jans.io/oauth/config/openid/clients.readonly Calling with params limit=2 [ { \"dn\": \"inum=1801.d361f68d-8200-4ba2-a0bb-ca7fea79e805,ou=clients,o=jans\", \"inum\": \"1801.d361f68d-8200-4ba2-a0bb-ca7fea79e805\", \"clientSecret\": \"KfwZeAfq4jrL\", \"frontChannelLogoutUri\": null, \"frontChannelLogoutSessionRequired\": false, \"registrationAccessToken\": null, \"clientIdIssuedAt\": null, \"clientSecretExpiresAt\": null, \"redirectUris\": [ \"https://testjans.gluu.com/admin-ui\", \"http//:localhost:4100\" ], \"claimRedirectUris\": null, \"responseTypes\": [ \"code\" ], \"grantTypes\": [ \"authorization_code\", \"refresh_token\", \"client_credentials\" ], \"applicationType\": \"web\", \"contacts\": null, \"clientName\": \"Jans Config Api Client\", \"idTokenTokenBindingCnf\": null, \"logoUri\": null, \"clientUri\": null, \"policyUri\": null, \"tosUri\": null, \"jwksUri\": null, \"jwks\": null, \"sectorIdentifierUri\": null, \"subjectType\": \"pairwise\", \"idTokenSignedResponseAlg\": \"RS256\", \"idTokenEncryptedResponseAlg\": null, \"idTokenEncryptedResponseEnc\": null, \"userInfoSignedResponseAlg\": null, \"userInfoEncryptedResponseAlg\": null, \"userInfoEncryptedResponseEnc\": null, \"requestObjectSigningAlg\": null, \"requestObjectEncryptionAlg\": null, \"requestObjectEncryptionEnc\": null, \"tokenEndpointAuthMethod\": \"client_secret_basic\", \"tokenEndpointAuthSigningAlg\": null, \"defaultMaxAge\": null, \"requireAuthTime\": false, \"defaultAcrValues\": null, \"initiateLoginUri\": null, \"postLogoutRedirectUris\": null, \"requestUris\": null, \"scopes\": [ \"inum=1800.F6E877,ou=scopes,o=jans\", \"inum=1800.D4F3E7,ou=scopes,o=jans\", \"inum=1800.2FD7EF,ou=scopes,o=jans\", \"inum=1800.97B23C,ou=scopes,o=jans\", \"inum=1800.8FC2C7,ou=scopes,o=jans\", \"inum=1800.1FFDF2,ou=scopes,o=jans\", \"inum=1800.5CF44C,ou=scopes,o=jans\", \"inum=1800.CCA518,ou=scopes,o=jans\", \"inum=1800.E62D6E,ou=scopes,o=jans\", \"inum=1800.11CB33,ou=scopes,o=jans\", \"inum=1800.781FA2,ou=scopes,o=jans\", \"inum=1800.ADAD8F,ou=scopes,o=jans\", \"inum=1800.40F22F,ou=scopes,o=jans\", \"inum=1800.7619BA,ou=scopes,o=jans\", \"inum=1800.E0DAF5,ou=scopes,o=jans\", \"inum=1800.7F45B0,ou=scopes,o=jans\", \"inum=1800.778C57,ou=scopes,o=jans\", \"inum=1800.E39293,ou=scopes,o=jans\", \"inum=1800.939483,ou=scopes,o=jans\", \"inum=1800.0ED2E8,ou=scopes,o=jans\", \"inum=1800.66CA59,ou=scopes,o=jans\", \"inum=1800.A4DBE5,ou=scopes,o=jans\", \"inum=1800.9AF358,ou=scopes,o=jans\", \"inum=1800.478CCF,ou=scopes,o=jans\", \"inum=1800.450A9A,ou=scopes,o=jans\", \"inum=1800.27A193,ou=scopes,o=jans\", \"inum=1800.3971D5,ou=scopes,o=jans\", \"inum=1800.891693,ou=scopes,o=jans\", \"inum=1800.A35DFD,ou=scopes,o=jans\", \"inum=1800.3516DE,ou=scopes,o=jans\", \"inum=F0C4,ou=scopes,o=jans\", \"inum=764C,ou=scopes,o=jans\", \"inum=10B2,ou=scopes,o=jans\" ], \"claims\": null, \"trustedClient\": false, \"lastAccessTime\": null, \"lastLogonTime\": null, \"persistClientAuthorizations\": true, \"includeClaimsInIdToken\": false, \"refreshTokenLifetime\": null, \"accessTokenLifetime\": null, \"customAttributes\": [], \"customObjectClasses\": [ \"top\" ], \"rptAsJwt\": false, \"accessTokenAsJwt\": false, \"accessTokenSigningAlg\": \"RS256\", \"disabled\": false, \"authorizedOrigins\": null, \"softwareId\": null, \"softwareVersion\": null, \"softwareStatement\": null, \"attributes\": { \"tlsClientAuthSubjectDn\": null, \"runIntrospectionScriptBeforeJwtCreation\": false, \"keepClientAuthorizationAfterExpiration\": false, \"allowSpontaneousScopes\": false, \"spontaneousScopes\": null, \"spontaneousScopeScriptDns\": null, \"backchannelLogoutUri\": null, \"backchannelLogoutSessionRequired\": false, \"additionalAudience\": null, \"postAuthnScripts\": null, \"consentGatheringScripts\": null, \"introspectionScripts\": null, \"rptClaimsScripts\": null }, \"backchannelTokenDeliveryMode\": null, \"backchannelClientNotificationEndpoint\": null, \"backchannelAuthenticationRequestSigningAlg\": null, \"backchannelUserCodeParameter\": null, \"expirationDate\": null, \"deletable\": false, \"jansId\": null }, { \"dn\": \"inum=1001.0e964ce7-7670-44a4-a2d1-d0a5f689a34f,ou=clients,o=jans\", \"inum\": \"1001.0e964ce7-7670-44a4-a2d1-d0a5f689a34f\", \"clientSecret\": \"4OJLToBXav0P\", \"frontChannelLogoutUri\": \"https://testjans.gluu.com/identity/ssologout.htm\", \"frontChannelLogoutSessionRequired\": true, \"registrationAccessToken\": null, \"clientIdIssuedAt\": null, \"clientSecretExpiresAt\": null, \"redirectUris\": [ \"https://testjans.gluu.com/identity/scim/auth\", \"https://testjans.gluu.com/identity/authcode.htm\", \"https://testjans.gluu.com/jans-auth/restv1/uma/gather_claims?authentication=true\" ], \"claimRedirectUris\": [ \"https://testjans.gluu.com/jans-auth/restv1/uma/gather_claims\" ], \"responseTypes\": [ \"code\" ], \"grantTypes\": [ \"authorization_code\", \"implicit\", \"refresh_token\" ], \"applicationType\": \"web\", \"contacts\": null, \"clientName\": \"oxTrust Admin GUI\", \"idTokenTokenBindingCnf\": null, \"logoUri\": null, \"clientUri\": null, \"policyUri\": null, \"tosUri\": null, \"jwksUri\": null, \"jwks\": null, \"sectorIdentifierUri\": null, \"subjectType\": \"public\", \"idTokenSignedResponseAlg\": \"HS256\", \"idTokenEncryptedResponseAlg\": null, \"idTokenEncryptedResponseEnc\": null, \"userInfoSignedResponseAlg\": null, \"userInfoEncryptedResponseAlg\": null, \"userInfoEncryptedResponseEnc\": null, \"requestObjectSigningAlg\": null, \"requestObjectEncryptionAlg\": null, \"requestObjectEncryptionEnc\": null, \"tokenEndpointAuthMethod\": \"client_secret_basic\", \"tokenEndpointAuthSigningAlg\": null, \"defaultMaxAge\": null, \"requireAuthTime\": false, \"defaultAcrValues\": null, \"initiateLoginUri\": null, \"postLogoutRedirectUris\": [ \"https://testjans.gluu.com/identity/finishlogout.htm\" ], \"requestUris\": null, \"scopes\": [ \"inum=F0C4,ou=scopes,o=jans\", \"inum=10B2,ou=scopes,o=jans\", \"inum=764C,ou=scopes,o=jans\" ], \"claims\": null, \"trustedClient\": true, \"lastAccessTime\": null, \"lastLogonTime\": null, \"persistClientAuthorizations\": false, \"includeClaimsInIdToken\": false, \"refreshTokenLifetime\": null, \"accessTokenLifetime\": null, \"customAttributes\": [], \"customObjectClasses\": [ \"top\" ], \"rptAsJwt\": false, \"accessTokenAsJwt\": false, \"accessTokenSigningAlg\": null, \"disabled\": false, \"authorizedOrigins\": null, \"softwareId\": null, \"softwareVersion\": null, \"softwareStatement\": null, \"attributes\": { \"tlsClientAuthSubjectDn\": null, \"runIntrospectionScriptBeforeJwtCreation\": false, \"keepClientAuthorizationAfterExpiration\": false, \"allowSpontaneousScopes\": false, \"spontaneousScopes\": null, \"spontaneousScopeScriptDns\": null, \"backchannelLogoutUri\": null, \"backchannelLogoutSessionRequired\": false, \"additionalAudience\": null, \"postAuthnScripts\": null, \"consentGatheringScripts\": null, \"introspectionScripts\": null, \"rptClaimsScripts\": null }, \"backchannelTokenDeliveryMode\": null, \"backchannelClientNotificationEndpoint\": null, \"backchannelAuthenticationRequestSigningAlg\": null, \"backchannelUserCodeParameter\": null, \"expirationDate\": null, \"deletable\": false, \"jansId\": null } ] Creating a New OpenID Clients # We can create openid clients as well, Let's see the description. It has a schema file where is defined the properties needs to be filled to create a new openid clients. Operation ID: post-oauth-openid-clients Description: Create new OpenId connect client Schema: /components/schemas/Client To get the schema file: /opt/jans/jans-cli/config-cli.py --schema /components/schemas/Client It contains a lot of properties. But, It's not important to fill each of these properties. We are going to fill these properties: frontChannelLogoutSessionRequired[false, true] applicationType[web, native] clientName subjectType[pairwise, public] includeClaimsInIdToken[false, true] { \"dn\": null, \"inum\": null, \"clientSecret\": null, \"frontChannelLogoutUri\": null, \"frontChannelLogoutSessionRequired\": false, \"registrationAccessToken\": null, \"clientIdIssuedAt\": null, \"clientSecretExpiresAt\": null, \"redirectUris\": [ \"https://client.example.org/cb\" ], \"claimRedirectUris\": [], \"responseTypes\": [], \"grantTypes\": [], \"applicationType\": \"web\", \"contacts\": [], \"clientName\": \"testOIDC\", \"idTokenTokenBindingCnf\": null, \"logoUri\": null, \"clientUri\": null, \"policyUri\": null, \"tosUri\": null, \"jwksUri\": null, \"jwks\": \"{ \\\"keys\\\" : [ { \\\"e\\\" : \\\"AQAB\\\", \\\"n\\\" : \\\"gmlDX_mgMcHX..\\\" ] }\", \"sectorIdentifierUri\": null, \"subjectType\": \"public\", \"idTokenSignedResponseAlg\": \"HS512\", \"idTokenEncryptedResponseAlg\": \"RSA1_5\", \"idTokenEncryptedResponseEnc\": \"A256GCM\", \"userInfoSignedResponseAlg\": \"PS256\", \"userInfoEncryptedResponseAlg\": \"RSA1_5\", \"userInfoEncryptedResponseEnc\": \"A128GCM\", \"requestObjectSigningAlg\": \"PS512\", \"requestObjectEncryptionAlg\": \"A128KW\", \"requestObjectEncryptionEnc\": \"A256CBC+HS512\", \"tokenEndpointAuthMethod\": \"tls_client_auth\", \"tokenEndpointAuthSigningAlg\": \"PS384\", \"defaultMaxAge\": 1000000, \"requireAuthTime\": true, \"defaultAcrValues\": [], \"initiateLoginUri\": null, \"postLogoutRedirectUris\": [ \"https://client.example.org/logout/page1\", \"https://client.example.org/logout/page2\", \"https://client.example.org/logout/page3\" ], \"requestUris\": [], \"scopes\": [ \"read write dolphin\" ], \"claims\": [], \"trustedClient\": false, \"lastAccessTime\": null, \"lastLogonTime\": null, \"persistClientAuthorizations\": false, \"includeClaimsInIdToken\": false, \"refreshTokenLifetime\": 100000000, \"accessTokenLifetime\": 100000000, \"customAttributes\": { \"name\": \"name, displayName, birthdate, email\", \"multiValued\": false, \"values\": [] }, \"customObjectClasses\": [], \"rptAsJwt\": false, \"accessTokenAsJwt\": false, \"accessTokenSigningAlg\": \"ES384\", \"disabled\": false, \"authorizedOrigins\": [], \"softwareId\": \"4NRB1-0XZABZI9E6-5SM3R\", \"softwareVersion\": \"2.1\", \"softwareStatement\": null, \"attributes\": { \"tlsClientAuthSubjectDn\": null, \"runIntrospectionScriptBeforeJwtCreation\": true, \"keepClientAuthorizationAfterExpiration\": true, \"allowSpontaneousScopes\": false, \"spontaneousScopes\": [], \"spontaneousScopeScriptDns\": [], \"backchannelLogoutUri\": [], \"backchannelLogoutSessionRequired\": true, \"additionalAudience\": [], \"postAuthnScripts\": [], \"consentGatheringScripts\": [], \"introspectionScripts\": [], \"rptClaimsScripts\": [] }, \"backchannelTokenDeliveryMode\": \"ping\", \"backchannelClientNotificationEndpoint\": null, \"backchannelAuthenticationRequestSigningAlg\": \"PS384\", \"backchannelUserCodeParameter\": false, \"expirationDate\": null, \"deletable\": false, \"jansId\": null } I have changed few things only here to show how to create an OpenID Connect Client. Please make sure that you filled each of the required properties to work the client.","title":"OpenID Connect Client Configuration"},{"location":"admin/config-guide/openid-connect-client-configuration/#openid-connect-configuration","text":"Prerequisite: Know how to use the Janssen CLI in command-line mode Let's get the information of OpenID Connect Client Configuration: /opt/jans/jans-cli/config-cli.py --info OAuthOpenIDConnectClients Operation ID: get-oauth-openid-clients Description: Gets list of OpenID Connect clients Parameters: limit: Search size - max size of the results to return. [integer] pattern: Search pattern. [string] Operation ID: post-oauth-openid-clients Description: Create new OpenId connect client Schema: /components/schemas/Client Operation ID: put-oauth-openid-clients Description: Update OpenId Connect client. Schema: /components/schemas/Client Operation ID: get-oauth-openid-clients-by-inum Description: Get OpenId Connect Client by Inum. url-suffix: inum Operation ID: delete-oauth-openid-clients-by-inum Description: Delete OpenId Connect client. url-suffix: inum Operation ID: patch-oauth-openid-clients-by-inum Description: Update modified properties of OpenId Connect client by Inum. url-suffix: inum Schema: Array of /components/schemas/PatchRequest To get sample shema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/PatchRequest","title":"OpenID Connect Configuration"},{"location":"admin/config-guide/openid-connect-client-configuration/#get-list-of-openid-clients","text":"To get the openid clients, run the following command: /opt/jans/jans-cli/config-cli.py --operation-id get-oauth-openid-clients Getting access token for scope https://jans.io/oauth/config/openid/clients.readonly [ { \"dn\": \"inum=1801.30bd0499-9dc0-48dc-9eb3-96b80a8da856,ou=clients,o=jans\", \"inum\": \"1801.30bd0499-9dc0-48dc-9eb3-96b80a8da856\", \"clientSecret\": \"zITPCsgIfmDTkKWkonuu+g==\", \"frontChannelLogoutUri\": null, \"frontChannelLogoutSessionRequired\": false, \"registrationAccessToken\": null, \"clientIdIssuedAt\": null, \"clientSecretExpiresAt\": null, \"redirectUris\": null, \"claimRedirectUris\": null, \"responseTypes\": [ \"code\" ], \"grantTypes\": [ \"authorization_code\", \"refresh_token\", \"client_credentials\" ], \"applicationType\": \"web\", \"contacts\": null, \"clientName\": \"Jans Config Api Client\", \"idTokenTokenBindingCnf\": null, \"logoUri\": null, \"clientUri\": null, \"policyUri\": null, \"tosUri\": null, \"jwksUri\": null, \"jwks\": null, \"sectorIdentifierUri\": null, \"subjectType\": \"pairwise\", \"idTokenSignedResponseAlg\": \"RS256\", \"idTokenEncryptedResponseAlg\": null, \"idTokenEncryptedResponseEnc\": null, \"userInfoSignedResponseAlg\": null, \"userInfoEncryptedResponseAlg\": null, \"userInfoEncryptedResponseEnc\": null, \"requestObjectSigningAlg\": null, \"requestObjectEncryptionAlg\": null, \"requestObjectEncryptionEnc\": null, \"tokenEndpointAuthMethod\": \"client_secret_basic\", \"tokenEndpointAuthSigningAlg\": null, \"defaultMaxAge\": null, \"requireAuthTime\": false, \"defaultAcrValues\": null, \"initiateLoginUri\": null, \"postLogoutRedirectUris\": null, \"requestUris\": null, \"scopes\": [ \"inum=CACA-B9D4,ou=scopes,o=jans\", \"inum=CACA-5AA4,ou=scopes,o=jans\", \"inum=CACA-F1E3,ou=scopes,o=jans\", \"inum=CACA-A1BD,ou=scopes,o=jans\", \"inum=CACA-113F,ou=scopes,o=jans\", \"inum=CACA-22E5,ou=scopes,o=jans\", \"inum=CACA-E6DE,ou=scopes,o=jans\", \"inum=CACA-B965,ou=scopes,o=jans\", \"inum=CACA-7FB9,ou=scopes,o=jans\", \"inum=CACA-3B0C,ou=scopes,o=jans\", \"inum=CACA-FD1D,ou=scopes,o=jans\", \"inum=CACA-7419,ou=scopes,o=jans\", \"inum=CACA-55A1,ou=scopes,o=jans\", \"inum=CACA-7B22,ou=scopes,o=jans\", \"inum=CACA-66AE,ou=scopes,o=jans\", \"inum=CACA-8283,ou=scopes,o=jans\", \"inum=CACA-1A74,ou=scopes,o=jans\", \"inum=CACA-CCFC,ou=scopes,o=jans\", \"inum=CACA-EABC,ou=scopes,o=jans\", \"inum=CACA-E7BB,ou=scopes,o=jans\", \"inum=CACA-EF5F,ou=scopes,o=jans\", \"inum=CACA-179E,ou=scopes,o=jans\", \"inum=CACA-174C,ou=scopes,o=jans\", \"inum=CACA-B36D,ou=scopes,o=jans\", \"inum=CACA-88E3,ou=scopes,o=jans\", \"inum=CACA-C1F5,ou=scopes,o=jans\", \"inum=CACA-82B8,ou=scopes,o=jans\", \"inum=CACA-016F,ou=scopes,o=jans\", \"inum=CACA-8F20,ou=scopes,o=jans\", \"inum=CACA-79A1,ou=scopes,o=jans\" ], \"claims\": null, \"trustedClient\": false, \"lastAccessTime\": null, \"lastLogonTime\": null, \"persistClientAuthorizations\": true, \"includeClaimsInIdToken\": false, \"refreshTokenLifetime\": null, \"accessTokenLifetime\": null, \"customAttributes\": [], \"customObjectClasses\": [ \"top\" ], \"rptAsJwt\": false, \"accessTokenAsJwt\": false, \"accessTokenSigningAlg\": \"RS256\", \"disabled\": false, \"authorizedOrigins\": null, \"softwareId\": null, \"softwareVersion\": null, \"softwareStatement\": null, \"attributes\": { \"tlsClientAuthSubjectDn\": null, \"runIntrospectionScriptBeforeJwtCreation\": false, \"keepClientAuthorizationAfterExpiration\": false, \"allowSpontaneousScopes\": false, \"spontaneousScopes\": null, \"spontaneousScopeScriptDns\": null, \"backchannelLogoutUri\": null, \"backchannelLogoutSessionRequired\": false, \"additionalAudience\": null, \"postAuthnScripts\": null, \"consentGatheringScripts\": null, \"introspectionScripts\": null, \"rptClaimsScripts\": null }, \"backchannelTokenDeliveryMode\": null, \"backchannelClientNotificationEndpoint\": null, \"backchannelAuthenticationRequestSigningAlg\": null, \"backchannelUserCodeParameter\": null, \"expirationDate\": null, \"deletable\": false, \"jansId\": null }, { \"dn\": \"inum=1001.3c40746d-63a6-478e-b06d-8f49bb984e4f,ou=clients,o=jans\", \"inum\": \"1001.3c40746d-63a6-478e-b06d-8f49bb984e4f\", \"clientSecret\": \"eVXRaEojULdohgOUbMeFPA==\", \"frontChannelLogoutUri\": \"https://testjans.imshakil.me/identity/ssologout.htm\", \"frontChannelLogoutSessionRequired\": true, \"registrationAccessToken\": null, \"clientIdIssuedAt\": null, \"clientSecretExpiresAt\": null, \"redirectUris\": [ \"https://testjans.imshakil.me/identity/scim/auth\", \"https://testjans.imshakil.me/identity/authcode.htm\", \"https://testjans.imshakil.me/jans-auth/restv1/uma/gather_claims?authentication=true\" ], \"claimRedirectUris\": [ \"https://testjans.imshakil.me/jans-auth/restv1/uma/gather_claims\" ], \"responseTypes\": [ \"code\" ], \"grantTypes\": [ \"authorization_code\", \"implicit\", \"refresh_token\" ], \"applicationType\": \"web\", \"contacts\": null, \"clientName\": \"oxTrust Admin GUI\", \"idTokenTokenBindingCnf\": null, \"logoUri\": null, \"clientUri\": null, \"policyUri\": null, \"tosUri\": null, \"jwksUri\": null, \"jwks\": null, \"sectorIdentifierUri\": null, \"subjectType\": \"public\", \"idTokenSignedResponseAlg\": \"HS256\", \"idTokenEncryptedResponseAlg\": null, \"idTokenEncryptedResponseEnc\": null, \"userInfoSignedResponseAlg\": null, \"userInfoEncryptedResponseAlg\": null, \"userInfoEncryptedResponseEnc\": null, \"requestObjectSigningAlg\": null, \"requestObjectEncryptionAlg\": null, \"requestObjectEncryptionEnc\": null, \"tokenEndpointAuthMethod\": \"client_secret_basic\", \"tokenEndpointAuthSigningAlg\": null, \"defaultMaxAge\": null, \"requireAuthTime\": false, \"defaultAcrValues\": null, \"initiateLoginUri\": null, \"postLogoutRedirectUris\": [ \"https://testjans.imshakil.me/identity/finishlogout.htm\" ], \"requestUris\": null, \"scopes\": [ \"inum=F0C4,ou=scopes,o=jans\", \"inum=10B2,ou=scopes,o=jans\", \"inum=764C,ou=scopes,o=jans\" ], \"claims\": null, \"trustedClient\": true, \"lastAccessTime\": null, \"lastLogonTime\": null, \"persistClientAuthorizations\": false, \"includeClaimsInIdToken\": false, \"refreshTokenLifetime\": null, \"accessTokenLifetime\": null, \"customAttributes\": [], \"customObjectClasses\": [ \"top\" ], \"rptAsJwt\": false, \"accessTokenAsJwt\": false, \"accessTokenSigningAlg\": null, \"disabled\": false, \"authorizedOrigins\": null, \"softwareId\": null, \"softwareVersion\": null, \"softwareStatement\": null, \"attributes\": { \"tlsClientAuthSubjectDn\": null, \"runIntrospectionScriptBeforeJwtCreation\": false, \"keepClientAuthorizationAfterExpiration\": false, \"allowSpontaneousScopes\": false, \"spontaneousScopes\": null, \"spontaneousScopeScriptDns\": null, \"backchannelLogoutUri\": null, \"backchannelLogoutSessionRequired\": false, \"additionalAudience\": null, \"postAuthnScripts\": null, \"consentGatheringScripts\": null, \"introspectionScripts\": null, \"rptClaimsScripts\": null }, \"backchannelTokenDeliveryMode\": null, \"backchannelClientNotificationEndpoint\": null, \"backchannelAuthenticationRequestSigningAlg\": null, \"backchannelUserCodeParameter\": null, \"expirationDate\": null, \"deletable\": null, \"jansId\": null }, { \"dn\": \"inum=1202.049eb91f-6339-4e83-ac83-55df359f6c9c,ou=clients,o=jans\", \"inum\": \"1202.049eb91f-6339-4e83-ac83-55df359f6c9c\", \"clientSecret\": null, \"frontChannelLogoutUri\": null, \"frontChannelLogoutSessionRequired\": false, \"registrationAccessToken\": null, \"clientIdIssuedAt\": null, \"clientSecretExpiresAt\": null, \"redirectUris\": null, \"claimRedirectUris\": null, \"responseTypes\": null, \"grantTypes\": [ \"client_credentials\" ], \"applicationType\": \"native\", \"contacts\": null, \"clientName\": \"SCIM Requesting Party Client\", \"idTokenTokenBindingCnf\": null, \"logoUri\": null, \"clientUri\": null, \"policyUri\": null, \"tosUri\": null, \"jwksUri\": null, \"jwks\": \"{ \\\"keys\\\" : [ { \\\"kty\\\" : \\\"RSA\\\", \\\"e\\\" : \\\"AQAB\\\", \\\"use\\\" : \\\"sig\\\", \\\"crv\\\" : \\\"\\\", \\\"kid\\\" : \\\"0b60383f-13c9-4064-9de1-7946724c0bbc_sig_rs256\\\", \\\"x5c\\\" : [ \\\"MIIDCTCCAfGgAwIBAgIgLJXeu/MFKl144/y6Xj55fqA+RWTWE0VgEhOSb1CmITcwDQYJKoZIhvcNAQELBQAwJDEiMCAGA1UEAwwZSmFucyBBdXRoIENBIENlcnRpZmljYXRlczAeFw0yMTAxMTUyMjM5MTNaFw0yMjAxMTUyMjM5MjNaMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCK7v3/S3Qn1puC16XM1mChQa3ygnAMoDQivlDj0AxLmSEO4ulmubVTbsvBFkt45+kKLvDUDozaNFhhNtnX1vZt37Fnd7/lnsODVn7GOrc8pGyiR048MfmPONO77LLqyf/ByrxhMpBYTR22kniRdQMc1+dHjWHIGzvmsQgMuefT2U81fqRpL0dkL2xDs7OEHm6BjQUoJgSXnf5BmWvdf+WiYPe5DXe6g56LdyZwwgN0vcx1IoYSMvmHlZyNjzyOPhCNgLPexXFpniBcFc5b5nGISgpn37yjVm4UIIMMGajv7jNJZKXkKZ+F4KRnuIByTYHwTqiHEwQoleRhlKJpNbthAgMBAAGjJzAlMCMGA1UdJQQcMBoGCCsGAQUFBwMBBggrBgEFBQcDAgYEVR0lADANBgkqhkiG9w0BAQsFAAOCAQEAhYEvDDBZ1Sl8b4Ng0aSXN+zw4nwS7pXBAwj4yLid47D6FnomFw25PYDAghO7YehDW18zjgbON69L5PH9Tqnq/Jzu1qAWpjWpwBVMRogCiGip/Kk59HmQos5/ckm9kgKrWhUw7vEqramHw40uqjXWuDfykWDbSqRYX2rccubSGwRsocMoMEoeFXLtyeBgjqoFY1Uqt4VTMdjTv6ekD+BLVfXOTlhemHSRXBG7GJVpwebYIyN/lx7LFAHYqbBi0adyGTI0/HQBtxMQeu57qy9oP+Q9gKse5QAz5Zesld71bKmUOshSGg4ks1JHH70wtRNPdQOgfdaaHHVzoyZo6FcMqg==\\\" ], \\\"exp\\\" : 1642286363453, \\\"alg\\\" : \\\"RS256\\\", \\\"n\\\" : \\\"iu79_0t0J9abgtelzNZgoUGt8oJwDKA0Ir5Q49AMS5khDuLpZrm1U27LwRZLeOfpCi7w1A6M2jRYYTbZ19b2bd-xZ3e_5Z7Dg1Z-xjq3PKRsokdOPDH5jzjTu-yy6sn_wcq8YTKQWE0dtpJ4kXUDHNfnR41hyBs75rEIDLnn09lPNX6kaS9HZC9sQ7OzhB5ugY0FKCYEl53-QZlr3X_lomD3uQ13uoOei3cmcMIDdL3MdSKGEjL5h5WcjY88jj4QjYCz3sVxaZ4gXBXOW-ZxiEoKZ9-8o1ZuFCCDDBmo7-4zSWSl5CmfheCkZ7iAck2B8E6ohxMEKJXkYZSiaTW7YQ\\\" }, { \\\"kty\\\" : \\\"RSA\\\", \\\"e\\\" : \\\"AQAB\\\", \\\"use\\\" : \\\"sig\\\", \\\"crv\\\" : \\\"\\\", \\\"kid\\\" : \\\"b3c52773-7377-45a2-97f8-0e8cc3895342_sig_rs384\\\", \\\"x5c\\\" : [ \\\"MIIDCjCCAfKgAwIBAgIhAPXe8+Rao043PUbs+WlpDB17Gyq8osq3tl/4d2qb38eTMA0GCSqGSIb3DQEBDAUAMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwMTE1MjIzOTE0WhcNMjIwMTE1MjIzOTIzWjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0DJHMKIC9rsPUurwE9aRXJ0YCi0hUrfZJ7CP3bnE5dbjSFgO9jSpFT+BS8SEaEWhTMUsrLAXqANTqPfEz3ITWhVEHdDvBDrSrpjQQWcEksxYP4/ZaScnFg09yt6Y6U3UMzwPijlzvq84xsJ1KWaz2klCSWvb/jQ4RJj6SG4eTApX0A2cHJmHwJ1oM9SwQe+eeKprd+uZj12iouWPjah4ztz2PzzAmYh8l3Wlycw7hs5OQnxU2ZnygSMYh/2V5cKVK22FAp3fE3QxLXYmn4hkmSoHcy0UjRxhSS5Q8m4AcJzdfUauMqpIJ0yL/W9jkAVdsgTMcacjJF9eesVyhcwwgwIDAQABoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwDQYJKoZIhvcNAQEMBQADggEBAJHB8bKmnQpllotN3dDg1heS2zqdsqyPK7K/5TFBRpXJV2LrIIAHEw5NjIh3vxva/dUwiJD/9uGpi3Xmn9wVFXhIxzYtSAGQmYxFEtkKsZZ7HmndmFbqbeHYv2q266yBQxx1GoZELyU85rrF+hB+/ZSdeMdqjq+Tyr25NwSHwDkGlYui3WAqLH0l0LqIvtSO5bgv6fpqhXe4H8PJ41EUsChN0HrIXNMJLbdvw8tnznJSMbaqKXjKCh0qr9GvHhxvZkDyklWRFTelg8Ct2xiH/eGeu2jwwc/QndcxNq0lqcFzyzp66oTUIdwrQitP9lgipB4c42jefoZjhv6mQaDbuO8=\\\" ], \\\"exp\\\" : 1642286363453, \\\"alg\\\" : \\\"RS384\\\", \\\"n\\\" : \\\"0DJHMKIC9rsPUurwE9aRXJ0YCi0hUrfZJ7CP3bnE5dbjSFgO9jSpFT-BS8SEaEWhTMUsrLAXqANTqPfEz3ITWhVEHdDvBDrSrpjQQWcEksxYP4_ZaScnFg09yt6Y6U3UMzwPijlzvq84xsJ1KWaz2klCSWvb_jQ4RJj6SG4eTApX0A2cHJmHwJ1oM9SwQe-eeKprd-uZj12iouWPjah4ztz2PzzAmYh8l3Wlycw7hs5OQnxU2ZnygSMYh_2V5cKVK22FAp3fE3QxLXYmn4hkmSoHcy0UjRxhSS5Q8m4AcJzdfUauMqpIJ0yL_W9jkAVdsgTMcacjJF9eesVyhcwwgw\\\" }, { \\\"kty\\\" : \\\"RSA\\\", \\\"e\\\" : \\\"AQAB\\\", \\\"use\\\" : \\\"sig\\\", \\\"crv\\\" : \\\"\\\", \\\"kid\\\" : \\\"bf5b0a2f-c977-4e0d-9a3c-bd8faef18e48_sig_rs512\\\", \\\"x5c\\\" : [ \\\"MIIDCTCCAfGgAwIBAgIgDrTQ+5YMX6eyx/WzSSJqS9gEsHlewOmswtphb3jE4/4wDQYJKoZIhvcNAQENBQAwJDEiMCAGA1UEAwwZSmFucyBBdXRoIENBIENlcnRpZmljYXRlczAeFw0yMTAxMTUyMjM5MTVaFw0yMjAxMTUyMjM5MjNaMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCWfXYlVgDnZpXP7XdEfSYbmJbKgVh0VzhRUzoXc1UTK+FZRM4NNuQBwkfF1X1vMg5x+1Dp1fhNw6anzf5oRjkgog6hEOucWDXq9+jjlkJPnUrYD9/yrinnBQPjsv2NFxWu7qI3KYUIWe96blPiqO1pJjUPk6dybCYoNoxk/0ut07/9uXcf3qVawqypGz4FHeiVz3SUJ1P17h59CS0+nCBT5OkR+rhT4XNc6qcqO3YDX/mj1vahuJijztoQQN82xp31bod9KsBezHIpuW8aM+steNz/aOn49bLYbNxneXV032wPmTZHr0mxxIlS95Vux0y/FVMnt/D1/L5SbWV/SxVDAgMBAAGjJzAlMCMGA1UdJQQcMBoGCCsGAQUFBwMBBggrBgEFBQcDAgYEVR0lADANBgkqhkiG9w0BAQ0FAAOCAQEAaEMcSaALKCCLjQ9GFyGQT3pOdT5AplJSD4ql+dISq44atxuDGSyrKyGehW07djBlUZFW8aDDMsOnQMjC049RU1LuU77FB9cmFhWAFCGIPTFFDdQrCK+LYB9LwSRX7kqBHsHZhqH9STdRMamakLnNuSJS5YzQNFziCIEUofkg0xe5WsAB4GdJrOfvy7JF0UnmjXhwpvZY/65b/Vv0o28j46QS4w769ltZwxIABKom0jdbfbn41UeLTlwgRftXh2/k59W5ma3lZPO/zi2aOl9nuj+7lXIUQKLoBUgDBYJ+8SyF0HhqDvlWijb29eJlPKKHkFRiQTo5Cbs704GWK8bx1A==\\\" ], \\\"exp\\\" : 1642286363453, \\\"alg\\\" : \\\"RS512\\\", \\\"n\\\" : \\\"ln12JVYA52aVz-13RH0mG5iWyoFYdFc4UVM6F3NVEyvhWUTODTbkAcJHxdV9bzIOcftQ6dX4TcOmp83-aEY5IKIOoRDrnFg16vfo45ZCT51K2A_f8q4p5wUD47L9jRcVru6iNymFCFnvem5T4qjtaSY1D5OncmwmKDaMZP9LrdO__bl3H96lWsKsqRs-BR3olc90lCdT9e4efQktPpwgU-TpEfq4U-FzXOqnKjt2A1_5o9b2obiYo87aEEDfNsad9W6HfSrAXsxyKblvGjPrLXjc_2jp-PWy2GzcZ3l1dN9sD5k2R69JscSJUveVbsdMvxVTJ7fw9fy-Um1lf0sVQw\\\" }, { \\\"kty\\\" : \\\"EC\\\", \\\"use\\\" : \\\"sig\\\", \\\"crv\\\" : \\\"P-256\\\", \\\"kid\\\" : \\\"fb0ef9a4-3b7f-4880-b896-57449de9ece8_sig_es256\\\", \\\"x5c\\\" : [ \\\"MIIBfTCCASOgAwIBAgIgQgvjjFY0ZMqTJ3pbRsXCrIcHCdP64r+VwPgHUCzhTwgwCgYIKoZIzj0EAwIwJDEiMCAGA1UEAwwZSmFucyBBdXRoIENBIENlcnRpZmljYXRlczAeFw0yMTAxMTUyMjM5MTVaFw0yMjAxMTUyMjM5MjNaMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAAT7B1VR+pnR8J0Omavpaeyq5K2aiJZXXQvuHn6piFZd7Gfr0rzzA9hSTgGZ84yOA96ZkV8XS71cuzP24Q72SsCKoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwCgYIKoZIzj0EAwIDSAAwRQIgPMWe6opagvCW0nkMASqpy7aQmnOw2cHFk8gqc7ztZyoCIQCK0xN9Kc3my9qGPYM75lUx2AwAzgyhkdWzo80jd+BVkA==\\\" ], \\\"x\\\" : \\\"APsHVVH6mdHwnQ6Zq-lp7KrkrZqIllddC-4efqmIVl3s\\\", \\\"y\\\" : \\\"Z-vSvPMD2FJOAZnzjI4D3pmRXxdLvVy7M_bhDvZKwIo\\\", \\\"exp\\\" : 1642286363453, \\\"alg\\\" : \\\"ES256\\\" }, { \\\"kty\\\" : \\\"EC\\\", \\\"use\\\" : \\\"sig\\\", \\\"crv\\\" : \\\"P-384\\\", \\\"kid\\\" : \\\"7cc680c6-c7d5-4a5c-885e-1e591dc1511d_sig_es384\\\", \\\"x5c\\\" : [ \\\"MIIBuTCCAUCgAwIBAgIgDPX0NX82/puI5AxdpOoQxPrsODbEGF3usqHUizJFvd4wCgYIKoZIzj0EAwMwJDEiMCAGA1UEAwwZSmFucyBBdXRoIENBIENlcnRpZmljYXRlczAeFw0yMTAxMTUyMjM5MTZaFw0yMjAxMTUyMjM5MjNaMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwdjAQBgcqhkjOPQIBBgUrgQQAIgNiAAR88zjor1uRqZg+UFFF7VrUyPXrGlkojxw2WiJsk3AKr6IbZNhGasSxjLV24Gjoo8BJUdcwX4DcOufpspU0KBUCaNY0rJjV6UM8kiyqDCYoKW0UpKxx1eXwm5m1AmCjkOSjJzAlMCMGA1UdJQQcMBoGCCsGAQUFBwMBBggrBgEFBQcDAgYEVR0lADAKBggqhkjOPQQDAwNnADBkAjAjyJsnKck1+hkXjAoN5PpLLwua4i6+KfW6fBeOXbwGjN7WkfJ595KstuPMI7GzP/ACMAaHxFdnih0lkfWJ6lwr3IXn4eon/yAskkN24DrK0Q9e1mJkrDU2uc3ybh796+f3IQ==\\\" ], \\\"x\\\" : \\\"fPM46K9bkamYPlBRRe1a1Mj16xpZKI8cNloibJNwCq-iG2TYRmrEsYy1duBo6KPA\\\", \\\"y\\\" : \\\"SVHXMF-A3Drn6bKVNCgVAmjWNKyY1elDPJIsqgwmKCltFKSscdXl8JuZtQJgo5Dk\\\", \\\"exp\\\" : 1642286363453, \\\"alg\\\" : \\\"ES384\\\" }, { \\\"kty\\\" : \\\"EC\\\", \\\"use\\\" : \\\"sig\\\", \\\"crv\\\" : \\\"P-521\\\", \\\"kid\\\" : \\\"98011bc0-8566-41ec-a64b-e0fca1fb22a2_sig_es512\\\", \\\"x5c\\\" : [ \\\"MIICBjCCAWegAwIBAgIhAM1ik4Lr1/favN6xSF65r92aemqYgpCMfLO9vVAtmOO4MAoGCCqGSM49BAMEMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwMTE1MjIzOTE2WhcNMjIwMTE1MjIzOTIzWjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIGbMBAGByqGSM49AgEGBSuBBAAjA4GGAAQAZG1VCPrKI5D9iLqkibhaKHH/j3SmDjhr9em63SIztO6gFXtEFNW4Jqc7oTHHcOv6VpagxX5XTzLinhpUQRuzEFUAw39iGsIJbwvGWarrw5/OCZaKPNRVA/kzAf9dl0I17EMyvGP0ctm6t4qqY8PjqygjA2nBoZWwLnhZu9q54IrdT+6jJzAlMCMGA1UdJQQcMBoGCCsGAQUFBwMBBggrBgEFBQcDAgYEVR0lADAKBggqhkjOPQQDBAOBjAAwgYgCQgHydUf16d/5yvFP5NGzBHOYY7sQ5jV0i2ICC+Vdh02jVTcmaAy6f2uraa6eL5X9SrfiwtR9HvkMqB/svMzAv999mQJCAL3LrtobouAY/i4Hxvfgt/H9Sf5G47zbO5QJBoqkOA9Q1OG4paRIVSQ3d1iZFvSPLfmbqwXee0aq8H9CU192+y52\\\" ], \\\"x\\\" : \\\"ZG1VCPrKI5D9iLqkibhaKHH_j3SmDjhr9em63SIztO6gFXtEFNW4Jqc7oTHHcOv6VpagxX5XTzLinhpUQRuzEFU\\\", \\\"y\\\" : \\\"AMN_YhrCCW8Lxlmq68OfzgmWijzUVQP5MwH_XZdCNexDMrxj9HLZureKqmPD46soIwNpwaGVsC54WbvaueCK3U_u\\\", \\\"exp\\\" : 1642286363453, \\\"alg\\\" : \\\"ES512\\\" } ]}\", \"sectorIdentifierUri\": null, \"subjectType\": \"public\", \"idTokenSignedResponseAlg\": \"HS256\", \"idTokenEncryptedResponseAlg\": null, \"idTokenEncryptedResponseEnc\": null, \"userInfoSignedResponseAlg\": null, \"userInfoEncryptedResponseAlg\": null, \"userInfoEncryptedResponseEnc\": null, \"requestObjectSigningAlg\": null, \"requestObjectEncryptionAlg\": null, \"requestObjectEncryptionEnc\": null, \"tokenEndpointAuthMethod\": \"private_key_jwt\", \"tokenEndpointAuthSigningAlg\": null, \"defaultMaxAge\": null, \"requireAuthTime\": false, \"defaultAcrValues\": null, \"initiateLoginUri\": null, \"postLogoutRedirectUris\": null, \"requestUris\": null, \"scopes\": null, \"claims\": null, \"trustedClient\": false, \"lastAccessTime\": null, \"lastLogonTime\": null, \"persistClientAuthorizations\": false, \"includeClaimsInIdToken\": false, \"refreshTokenLifetime\": null, \"accessTokenLifetime\": null, \"customAttributes\": [], \"customObjectClasses\": [ \"top\" ], \"rptAsJwt\": false, \"accessTokenAsJwt\": false, \"accessTokenSigningAlg\": null, \"disabled\": false, \"authorizedOrigins\": null, \"softwareId\": null, \"softwareVersion\": null, \"softwareStatement\": null, \"attributes\": { \"tlsClientAuthSubjectDn\": null, \"runIntrospectionScriptBeforeJwtCreation\": false, \"keepClientAuthorizationAfterExpiration\": false, \"allowSpontaneousScopes\": false, \"spontaneousScopes\": null, \"spontaneousScopeScriptDns\": null, \"backchannelLogoutUri\": null, \"backchannelLogoutSessionRequired\": false, \"additionalAudience\": null, \"postAuthnScripts\": null, \"consentGatheringScripts\": null, \"introspectionScripts\": null, \"rptClaimsScripts\": null }, \"backchannelTokenDeliveryMode\": null, \"backchannelClientNotificationEndpoint\": null, \"backchannelAuthenticationRequestSigningAlg\": null, \"backchannelUserCodeParameter\": null, \"expirationDate\": null, \"deletable\": null, \"jansId\": null }, { \"dn\": \"inum=1201.95be8034-0b72-4add-959c-3edf98b91af6,ou=clients,o=jans\", \"inum\": \"1201.95be8034-0b72-4add-959c-3edf98b91af6\", \"clientSecret\": null, \"frontChannelLogoutUri\": null, \"frontChannelLogoutSessionRequired\": false, \"registrationAccessToken\": null, \"clientIdIssuedAt\": null, \"clientSecretExpiresAt\": null, \"redirectUris\": null, \"claimRedirectUris\": null, \"responseTypes\": null, \"grantTypes\": [ \"client_credentials\" ], \"applicationType\": \"native\", \"contacts\": null, \"clientName\": \"SCIM Resource Server Client\", \"idTokenTokenBindingCnf\": null, \"logoUri\": null, \"clientUri\": null, \"policyUri\": null, \"tosUri\": null, \"jwksUri\": null, \"jwks\": \"{ \\\"keys\\\" : [ { \\\"kty\\\" : \\\"RSA\\\", \\\"e\\\" : \\\"AQAB\\\", \\\"use\\\" : \\\"sig\\\", \\\"crv\\\" : \\\"\\\", \\\"kid\\\" : \\\"8e6d654d-2133-45b6-84c4-4fce267d6bee_sig_rs256\\\", \\\"x5c\\\" : [ \\\"MIIDCjCCAfKgAwIBAgIhAO4ZTRoknOI/s7Mq9hIT424qwd9tY05Ht2uSgz/CuWmbMA0GCSqGSIb3DQEBCwUAMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwMTE1MjIzOTA5WhcNMjIwMTE1MjIzOTE5WjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsircewYbwIlSPYt6H3yFoxn26wSpij6sYsFHe6HcWkxSmbgkYSfTF5n+14PorBhsWzKDY+YODqIH9sNfZAjx3yX/VQpqlXn52Uwt1ZGb8tnwaNbbMkFW2848fqZXxtZHrBUVMbN+jiMec1tnI6ONIsDNJlBB4jJgE/wIThMtl5cmys9/RHmfr6YAnEVEZksFtyaDS3W4f3JsrbgWs1IYcY9MGeAQJ+OpXifb5D0qhSUrDjLBbKCOukvRf6Ue3U/Q4NaxpokHYhqbr/YA6jiZ2XPcJl53HKdpU4eO6V4HP0nuiVi7q1nQhb9f4cnuPnIKYaai759bozXTjByoki6YCQIDAQABoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwDQYJKoZIhvcNAQELBQADggEBAIyswl5l42DSzAJmJTIwNwJUDGORPPoj3CQlBsaT5pQ2Ykiqv1gqBLjNZw/Em1TYeD2Udm8Gjn5sPUxcwdiiH1zATYPyxk/uv4POkwQBw2n3L8OA4pl0d6So5HVzA1CS23Sy1CSKK0OiRVMym0TxzutYIJB4Usqg2KhgwJBzonoAHY8IXd9QvlV7+4Cb2gE4jpF8kUKgF3dCqQVZybDrEFQ0xf8bDPWp4CBTTVoHsyr/bn7UFpHO1FxKAWJglNa6cNOv1a/1QzjPK2OZGnYciHf/BT6SWRkJukRNs/O3jrfJJsw+LSlQSjpcZPMUwJ3+JJ5Eax41bseue1mLa1js2h4=\\\" ], \\\"exp\\\" : 1642286359278, \\\"alg\\\" : \\\"RS256\\\", \\\"n\\\" : \\\"sircewYbwIlSPYt6H3yFoxn26wSpij6sYsFHe6HcWkxSmbgkYSfTF5n-14PorBhsWzKDY-YODqIH9sNfZAjx3yX_VQpqlXn52Uwt1ZGb8tnwaNbbMkFW2848fqZXxtZHrBUVMbN-jiMec1tnI6ONIsDNJlBB4jJgE_wIThMtl5cmys9_RHmfr6YAnEVEZksFtyaDS3W4f3JsrbgWs1IYcY9MGeAQJ-OpXifb5D0qhSUrDjLBbKCOukvRf6Ue3U_Q4NaxpokHYhqbr_YA6jiZ2XPcJl53HKdpU4eO6V4HP0nuiVi7q1nQhb9f4cnuPnIKYaai759bozXTjByoki6YCQ\\\" }, { \\\"kty\\\" : \\\"RSA\\\", \\\"e\\\" : \\\"AQAB\\\", \\\"use\\\" : \\\"sig\\\", \\\"crv\\\" : \\\"\\\", \\\"kid\\\" : \\\"10a2a7f6-cabf-41c0-9d62-37644f214e1c_sig_rs384\\\", \\\"x5c\\\" : [ \\\"MIIDCjCCAfKgAwIBAgIhAPAwaemYVwozpAJBHURxIh6oD+BjzEvhLegWbdsM7/6zMA0GCSqGSIb3DQEBDAUAMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwMTE1MjIzOTEwWhcNMjIwMTE1MjIzOTE5WjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1s5Kx0ltPJswSizHDNTA786pyU3bqT5dym0O/9RUs1ishsp76QjytsYdxRZzzaYB4CcEaVRj5ZIZQwt0JNqbfx/MPiMEvpJhZHEruZRc1EsE3kUCx6yInBIuHk6yKsdYoAKiHa0dJOMirTcElZyCCzq83QBKpYdX7kV+i29kF/lOSvPeAsizN8HSmB29Hhy30nB3GmcYwghHAXCSpG5g467iGBi+gOMxRm7g/Uj/WSYIDc8CyGyd6iHPK9smCyna5cCfRtuGTAf+/fnfiK5IFrGXvDK5ggM+cbKBope7RceSawN28kjVtt+gY6oLvI3JrV0V33qKTC30JnPJCxTZ4wIDAQABoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwDQYJKoZIhvcNAQEMBQADggEBAGT0S+ke7qG9b7VS553n2JLTB13kSlXrBoa1XX4NlhnHnWO/w/YTFAi3jGVmgCesTr+2XBBFAIdOD9bC397Ufi8xd3PEDhNQKpWThhJpasMJvsiVqnXRsmoN+j5sqtzyUwl1Dsk5zdtDvoV7zeJHJ3niEpS5in6Gw8jMakn84VTekvtQvG6NBWwjVwWc4awSN18YVhMJYbs5J1tTSOcXjdwPD4Ee0WQMBrKqLeo7b9W5/F2Jb3DbfgMhkikVA9jRowyLMgFpyMI6VPneMDWyadnS9YrJHeX1Ml6i3m0uN3Jvp817jhgYFS1L74p3gA9oO0Tin6wnS5EZdWp8kCfrCx4=\\\" ], \\\"exp\\\" : 1642286359278, \\\"alg\\\" : \\\"RS384\\\", \\\"n\\\" : \\\"1s5Kx0ltPJswSizHDNTA786pyU3bqT5dym0O_9RUs1ishsp76QjytsYdxRZzzaYB4CcEaVRj5ZIZQwt0JNqbfx_MPiMEvpJhZHEruZRc1EsE3kUCx6yInBIuHk6yKsdYoAKiHa0dJOMirTcElZyCCzq83QBKpYdX7kV-i29kF_lOSvPeAsizN8HSmB29Hhy30nB3GmcYwghHAXCSpG5g467iGBi-gOMxRm7g_Uj_WSYIDc8CyGyd6iHPK9smCyna5cCfRtuGTAf-_fnfiK5IFrGXvDK5ggM-cbKBope7RceSawN28kjVtt-gY6oLvI3JrV0V33qKTC30JnPJCxTZ4w\\\" }, { \\\"kty\\\" : \\\"RSA\\\", \\\"e\\\" : \\\"AQAB\\\", \\\"use\\\" : \\\"sig\\\", \\\"crv\\\" : \\\"\\\", \\\"kid\\\" : \\\"35a9fa3e-56ac-4408-91c3-e959735222b9_sig_rs512\\\", \\\"x5c\\\" : [ \\\"MIIDCjCCAfKgAwIBAgIhAKLT4VuuTD1hb4Gsdd6djKvblI8eSGoksOMt+l2OG01XMA0GCSqGSIb3DQEBDQUAMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwMTE1MjIzOTEwWhcNMjIwMTE1MjIzOTE5WjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAppg3PsDya/MqabJX27lWx/xy/2zWaSF9+AQ1el34ECdf5e2PGjZIY5Nsx4T2K5uPTz9gH1i/3x8ViCNCX+VGjmyU96LQrLqTP0p9/dI1/E9Llr1igVn8ryyMCf0i8o+y9wEuxaRtiSCtUx65KLzwiGefgZGd7UwrAFce6Hy7VvYDdx1z6AcsJt08CXdDUAIU/M5zq3JCfmpyMFQQHPQ6H6UlK8pFeAGxLNp4IUVmZgUaswnZiaKgglMBqVVOh7bGBIQbmjzbwnIOWVoyuZt6vRfdQUoduya+PwxjwkF4WCRNNJr0NRbMp2aXJJvAHLNPcDXr2pntg4Gb2s40DMuimwIDAQABoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwDQYJKoZIhvcNAQENBQADggEBAIjIpRhEg9fQ9DQXbe7wEtaKpxzTl/FM+BAriQiIek2ZYDy2ux+uHmbTPYwIGNyTpkeAkkqk2xFUjP0QYDo9Q9vqlrWz0mTXDoRDuqyFtHy/4n2xVtAmJSg5us4wFWyBSiSOWyOL3H7TUMlSFjVGLUkweSOTymM29mPYb6xRay/6f1q6jB28LtHCpWm15ZmHa2XdyZTb5WSSD480S7jXcF3ON48AasXBfRxZpZpigF6YLZbxqSU4829RjnexfMJWHy81hVeFH3L+7WUkASpZNfIGlzKSFDqVuK3RncMswCHgMcygdzjem6DDH71qUDpwMVGLIcVQ0ZSjQzFSpd6fKag=\\\" ], \\\"exp\\\" : 1642286359278, \\\"alg\\\" : \\\"RS512\\\", \\\"n\\\" : \\\"ppg3PsDya_MqabJX27lWx_xy_2zWaSF9-AQ1el34ECdf5e2PGjZIY5Nsx4T2K5uPTz9gH1i_3x8ViCNCX-VGjmyU96LQrLqTP0p9_dI1_E9Llr1igVn8ryyMCf0i8o-y9wEuxaRtiSCtUx65KLzwiGefgZGd7UwrAFce6Hy7VvYDdx1z6AcsJt08CXdDUAIU_M5zq3JCfmpyMFQQHPQ6H6UlK8pFeAGxLNp4IUVmZgUaswnZiaKgglMBqVVOh7bGBIQbmjzbwnIOWVoyuZt6vRfdQUoduya-PwxjwkF4WCRNNJr0NRbMp2aXJJvAHLNPcDXr2pntg4Gb2s40DMuimw\\\" }, { \\\"kty\\\" : \\\"EC\\\", \\\"use\\\" : \\\"sig\\\", \\\"crv\\\" : \\\"P-256\\\", \\\"kid\\\" : \\\"b05a91e8-aa4e-4f6c-860a-3b63f13b16da_sig_es256\\\", \\\"x5c\\\" : [ \\\"MIIBfDCCASOgAwIBAgIgFbx/JYXagj82QeW+8XBk/FcdCinm/kX04q4tBOKiQ+gwCgYIKoZIzj0EAwIwJDEiMCAGA1UEAwwZSmFucyBBdXRoIENBIENlcnRpZmljYXRlczAeFw0yMTAxMTUyMjM5MTFaFw0yMjAxMTUyMjM5MTlaMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAARNynAgBRUdqdd5/Os3gpG/Y/CozNptimxnUXdGcDrMrLFBOtwVrB6wYk69Z9U2iY6KPTmgxHQ/MxcHiJOsTfuOoycwJTAjBgNVHSUEHDAaBggrBgEFBQcDAQYIKwYBBQUHAwIGBFUdJQAwCgYIKoZIzj0EAwIDRwAwRAIgeohxfVOK3qgJSNZRzk50PvjeZZ6sIJi1uAOlsaYEMpcCIGPLcDJYIaFfNVQbO/UZjymtiDpoZdb8U39GSanA6HfP\\\" ], \\\"x\\\" : \\\"TcpwIAUVHanXefzrN4KRv2PwqMzabYpsZ1F3RnA6zKw\\\", \\\"y\\\" : \\\"ALFBOtwVrB6wYk69Z9U2iY6KPTmgxHQ_MxcHiJOsTfuO\\\", \\\"exp\\\" : 1642286359278, \\\"alg\\\" : \\\"ES256\\\" }, { \\\"kty\\\" : \\\"EC\\\", \\\"use\\\" : \\\"sig\\\", \\\"crv\\\" : \\\"P-384\\\", \\\"kid\\\" : \\\"30fc8067-9cbd-4a39-8621-6555815e046f_sig_es384\\\", \\\"x5c\\\" : [ \\\"MIIBuzCCAUCgAwIBAgIgAeP45q0dJdlruXGW4aKW/728ttfGj31IHROMLnFa5OQwCgYIKoZIzj0EAwMwJDEiMCAGA1UEAwwZSmFucyBBdXRoIENBIENlcnRpZmljYXRlczAeFw0yMTAxMTUyMjM5MTFaFw0yMjAxMTUyMjM5MTlaMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwdjAQBgcqhkjOPQIBBgUrgQQAIgNiAARHgy8tqS+sfqcL4f0LrTnisvAN6QEgylRR/upFj9+FOc7b5eImEzhO+PMhTmNvbutWN+0pVhZ5IcBY9dFSDyBSs9lkWgUDgcKXyg7HCIhnC7CXQfwPKOzH7ZzoD/2D6SWjJzAlMCMGA1UdJQQcMBoGCCsGAQUFBwMBBggrBgEFBQcDAgYEVR0lADAKBggqhkjOPQQDAwNpADBmAjEAp1Gof1uj66oNQsIvSaKBhZkgRoAIweQKVbvcXUTKr3P00HOZMdCrkhYwqXEmDmmzAjEA2sk385nNl/uyUzaW3gfciCxXAeMXUQUjmp6ZDrpuPDleL6jo1u6hoURO30EXBNRR\\\" ], \\\"x\\\" : \\\"R4MvLakvrH6nC-H9C6054rLwDekBIMpUUf7qRY_fhTnO2-XiJhM4TvjzIU5jb27r\\\", \\\"y\\\" : \\\"VjftKVYWeSHAWPXRUg8gUrPZZFoFA4HCl8oOxwiIZwuwl0H8Dyjsx-2c6A_9g-kl\\\", \\\"exp\\\" : 1642286359278, \\\"alg\\\" : \\\"ES384\\\" }, { \\\"kty\\\" : \\\"EC\\\", \\\"use\\\" : \\\"sig\\\", \\\"crv\\\" : \\\"P-521\\\", \\\"kid\\\" : \\\"4c1c8652-06a0-4203-bec7-f5e1408f9a71_sig_es512\\\", \\\"x5c\\\" : [ \\\"MIICBTCCAWegAwIBAgIhAOSKu6QwZhmEMffavHu0TX9xI23MKmwdmhS3iFnklzJrMAoGCCqGSM49BAMEMCQxIjAgBgNVBAMMGUphbnMgQXV0aCBDQSBDZXJ0aWZpY2F0ZXMwHhcNMjEwMTE1MjIzOTExWhcNMjIwMTE1MjIzOTE5WjAkMSIwIAYDVQQDDBlKYW5zIEF1dGggQ0EgQ2VydGlmaWNhdGVzMIGbMBAGByqGSM49AgEGBSuBBAAjA4GGAAQA79ze+ti5XVPYSVjd5j/pFDMftJC/yKZ67UXMF4hGKYPOpyntzg2DpObgmYwnyituSmE+Nk04aYyMb9wDYPtAKywA4K+G+8M4i3oQ3u2fxxIEcd/k1hl63rAJwaRCHHYSeUuHkDs90aYNkwTotuOta2+IVzLHTFtut78Ifejy41yqG76jJzAlMCMGA1UdJQQcMBoGCCsGAQUFBwMBBggrBgEFBQcDAgYEVR0lADAKBggqhkjOPQQDBAOBiwAwgYcCQSyYB5WGd7N0eutyN4VZFnhivJczXshpkYuz5/XX1HmZwNIwBtc1nTSTclQyZNNNPsadKHW3zrpLmuh7ZJtkAQwjAkIBHOUe7iZNtzzz9o3JX6c3a0GtAkNdV3fDB523Xp+jq6coUzzbUo0qX3tD01iKrxtHh/RY3C7GYNRTOndw9G7efnE=\\\" ], \\\"x\\\" : \\\"AO_c3vrYuV1T2ElY3eY_6RQzH7SQv8imeu1FzBeIRimDzqcp7c4Ng6Tm4JmMJ8orbkphPjZNOGmMjG_cA2D7QCss\\\", \\\"y\\\" : \\\"AOCvhvvDOIt6EN7tn8cSBHHf5NYZet6wCcGkQhx2EnlLh5A7PdGmDZME6LbjrWtviFcyx0xbbre_CH3o8uNcqhu-\\\", \\\"exp\\\" : 1642286359278, \\\"alg\\\" : \\\"ES512\\\" } ]}\", \"sectorIdentifierUri\": null, \"subjectType\": \"public\", \"idTokenSignedResponseAlg\": \"HS256\", \"idTokenEncryptedResponseAlg\": null, \"idTokenEncryptedResponseEnc\": null, \"userInfoSignedResponseAlg\": null, \"userInfoEncryptedResponseAlg\": null, \"userInfoEncryptedResponseEnc\": null, \"requestObjectSigningAlg\": null, \"requestObjectEncryptionAlg\": null, \"requestObjectEncryptionEnc\": null, \"tokenEndpointAuthMethod\": \"private_key_jwt\", \"tokenEndpointAuthSigningAlg\": null, \"defaultMaxAge\": null, \"requireAuthTime\": false, \"defaultAcrValues\": null, \"initiateLoginUri\": null, \"postLogoutRedirectUris\": null, \"requestUris\": null, \"scopes\": [ \"inum=6D99,ou=scopes,o=jans\" ], \"claims\": null, \"trustedClient\": false, \"lastAccessTime\": null, \"lastLogonTime\": null, \"persistClientAuthorizations\": false, \"includeClaimsInIdToken\": false, \"refreshTokenLifetime\": null, \"accessTokenLifetime\": null, \"customAttributes\": [], \"customObjectClasses\": [ \"top\" ], \"rptAsJwt\": false, \"accessTokenAsJwt\": false, \"accessTokenSigningAlg\": null, \"disabled\": false, \"authorizedOrigins\": null, \"softwareId\": null, \"softwareVersion\": null, \"softwareStatement\": null, \"attributes\": { \"tlsClientAuthSubjectDn\": null, \"runIntrospectionScriptBeforeJwtCreation\": false, \"keepClientAuthorizationAfterExpiration\": false, \"allowSpontaneousScopes\": false, \"spontaneousScopes\": null, \"spontaneousScopeScriptDns\": null, \"backchannelLogoutUri\": null, \"backchannelLogoutSessionRequired\": false, \"additionalAudience\": null, \"postAuthnScripts\": null, \"consentGatheringScripts\": null, \"introspectionScripts\": null, \"rptClaimsScripts\": null }, \"backchannelTokenDeliveryMode\": null, \"backchannelClientNotificationEndpoint\": null, \"backchannelAuthenticationRequestSigningAlg\": null, \"backchannelUserCodeParameter\": null, \"expirationDate\": null, \"deletable\": null, \"jansId\": null } ] It will show all the openid clients together. To search using parameters: /opt/jans/jans-cli/config-cli.py --operation-id get-oauth-openid-clients --endpoint-args limit:2 It will show two OpenID clients randomly. Getting access token for scope https://jans.io/oauth/config/openid/clients.readonly Calling with params limit=2 [ { \"dn\": \"inum=1801.d361f68d-8200-4ba2-a0bb-ca7fea79e805,ou=clients,o=jans\", \"inum\": \"1801.d361f68d-8200-4ba2-a0bb-ca7fea79e805\", \"clientSecret\": \"KfwZeAfq4jrL\", \"frontChannelLogoutUri\": null, \"frontChannelLogoutSessionRequired\": false, \"registrationAccessToken\": null, \"clientIdIssuedAt\": null, \"clientSecretExpiresAt\": null, \"redirectUris\": [ \"https://testjans.gluu.com/admin-ui\", \"http//:localhost:4100\" ], \"claimRedirectUris\": null, \"responseTypes\": [ \"code\" ], \"grantTypes\": [ \"authorization_code\", \"refresh_token\", \"client_credentials\" ], \"applicationType\": \"web\", \"contacts\": null, \"clientName\": \"Jans Config Api Client\", \"idTokenTokenBindingCnf\": null, \"logoUri\": null, \"clientUri\": null, \"policyUri\": null, \"tosUri\": null, \"jwksUri\": null, \"jwks\": null, \"sectorIdentifierUri\": null, \"subjectType\": \"pairwise\", \"idTokenSignedResponseAlg\": \"RS256\", \"idTokenEncryptedResponseAlg\": null, \"idTokenEncryptedResponseEnc\": null, \"userInfoSignedResponseAlg\": null, \"userInfoEncryptedResponseAlg\": null, \"userInfoEncryptedResponseEnc\": null, \"requestObjectSigningAlg\": null, \"requestObjectEncryptionAlg\": null, \"requestObjectEncryptionEnc\": null, \"tokenEndpointAuthMethod\": \"client_secret_basic\", \"tokenEndpointAuthSigningAlg\": null, \"defaultMaxAge\": null, \"requireAuthTime\": false, \"defaultAcrValues\": null, \"initiateLoginUri\": null, \"postLogoutRedirectUris\": null, \"requestUris\": null, \"scopes\": [ \"inum=1800.F6E877,ou=scopes,o=jans\", \"inum=1800.D4F3E7,ou=scopes,o=jans\", \"inum=1800.2FD7EF,ou=scopes,o=jans\", \"inum=1800.97B23C,ou=scopes,o=jans\", \"inum=1800.8FC2C7,ou=scopes,o=jans\", \"inum=1800.1FFDF2,ou=scopes,o=jans\", \"inum=1800.5CF44C,ou=scopes,o=jans\", \"inum=1800.CCA518,ou=scopes,o=jans\", \"inum=1800.E62D6E,ou=scopes,o=jans\", \"inum=1800.11CB33,ou=scopes,o=jans\", \"inum=1800.781FA2,ou=scopes,o=jans\", \"inum=1800.ADAD8F,ou=scopes,o=jans\", \"inum=1800.40F22F,ou=scopes,o=jans\", \"inum=1800.7619BA,ou=scopes,o=jans\", \"inum=1800.E0DAF5,ou=scopes,o=jans\", \"inum=1800.7F45B0,ou=scopes,o=jans\", \"inum=1800.778C57,ou=scopes,o=jans\", \"inum=1800.E39293,ou=scopes,o=jans\", \"inum=1800.939483,ou=scopes,o=jans\", \"inum=1800.0ED2E8,ou=scopes,o=jans\", \"inum=1800.66CA59,ou=scopes,o=jans\", \"inum=1800.A4DBE5,ou=scopes,o=jans\", \"inum=1800.9AF358,ou=scopes,o=jans\", \"inum=1800.478CCF,ou=scopes,o=jans\", \"inum=1800.450A9A,ou=scopes,o=jans\", \"inum=1800.27A193,ou=scopes,o=jans\", \"inum=1800.3971D5,ou=scopes,o=jans\", \"inum=1800.891693,ou=scopes,o=jans\", \"inum=1800.A35DFD,ou=scopes,o=jans\", \"inum=1800.3516DE,ou=scopes,o=jans\", \"inum=F0C4,ou=scopes,o=jans\", \"inum=764C,ou=scopes,o=jans\", \"inum=10B2,ou=scopes,o=jans\" ], \"claims\": null, \"trustedClient\": false, \"lastAccessTime\": null, \"lastLogonTime\": null, \"persistClientAuthorizations\": true, \"includeClaimsInIdToken\": false, \"refreshTokenLifetime\": null, \"accessTokenLifetime\": null, \"customAttributes\": [], \"customObjectClasses\": [ \"top\" ], \"rptAsJwt\": false, \"accessTokenAsJwt\": false, \"accessTokenSigningAlg\": \"RS256\", \"disabled\": false, \"authorizedOrigins\": null, \"softwareId\": null, \"softwareVersion\": null, \"softwareStatement\": null, \"attributes\": { \"tlsClientAuthSubjectDn\": null, \"runIntrospectionScriptBeforeJwtCreation\": false, \"keepClientAuthorizationAfterExpiration\": false, \"allowSpontaneousScopes\": false, \"spontaneousScopes\": null, \"spontaneousScopeScriptDns\": null, \"backchannelLogoutUri\": null, \"backchannelLogoutSessionRequired\": false, \"additionalAudience\": null, \"postAuthnScripts\": null, \"consentGatheringScripts\": null, \"introspectionScripts\": null, \"rptClaimsScripts\": null }, \"backchannelTokenDeliveryMode\": null, \"backchannelClientNotificationEndpoint\": null, \"backchannelAuthenticationRequestSigningAlg\": null, \"backchannelUserCodeParameter\": null, \"expirationDate\": null, \"deletable\": false, \"jansId\": null }, { \"dn\": \"inum=1001.0e964ce7-7670-44a4-a2d1-d0a5f689a34f,ou=clients,o=jans\", \"inum\": \"1001.0e964ce7-7670-44a4-a2d1-d0a5f689a34f\", \"clientSecret\": \"4OJLToBXav0P\", \"frontChannelLogoutUri\": \"https://testjans.gluu.com/identity/ssologout.htm\", \"frontChannelLogoutSessionRequired\": true, \"registrationAccessToken\": null, \"clientIdIssuedAt\": null, \"clientSecretExpiresAt\": null, \"redirectUris\": [ \"https://testjans.gluu.com/identity/scim/auth\", \"https://testjans.gluu.com/identity/authcode.htm\", \"https://testjans.gluu.com/jans-auth/restv1/uma/gather_claims?authentication=true\" ], \"claimRedirectUris\": [ \"https://testjans.gluu.com/jans-auth/restv1/uma/gather_claims\" ], \"responseTypes\": [ \"code\" ], \"grantTypes\": [ \"authorization_code\", \"implicit\", \"refresh_token\" ], \"applicationType\": \"web\", \"contacts\": null, \"clientName\": \"oxTrust Admin GUI\", \"idTokenTokenBindingCnf\": null, \"logoUri\": null, \"clientUri\": null, \"policyUri\": null, \"tosUri\": null, \"jwksUri\": null, \"jwks\": null, \"sectorIdentifierUri\": null, \"subjectType\": \"public\", \"idTokenSignedResponseAlg\": \"HS256\", \"idTokenEncryptedResponseAlg\": null, \"idTokenEncryptedResponseEnc\": null, \"userInfoSignedResponseAlg\": null, \"userInfoEncryptedResponseAlg\": null, \"userInfoEncryptedResponseEnc\": null, \"requestObjectSigningAlg\": null, \"requestObjectEncryptionAlg\": null, \"requestObjectEncryptionEnc\": null, \"tokenEndpointAuthMethod\": \"client_secret_basic\", \"tokenEndpointAuthSigningAlg\": null, \"defaultMaxAge\": null, \"requireAuthTime\": false, \"defaultAcrValues\": null, \"initiateLoginUri\": null, \"postLogoutRedirectUris\": [ \"https://testjans.gluu.com/identity/finishlogout.htm\" ], \"requestUris\": null, \"scopes\": [ \"inum=F0C4,ou=scopes,o=jans\", \"inum=10B2,ou=scopes,o=jans\", \"inum=764C,ou=scopes,o=jans\" ], \"claims\": null, \"trustedClient\": true, \"lastAccessTime\": null, \"lastLogonTime\": null, \"persistClientAuthorizations\": false, \"includeClaimsInIdToken\": false, \"refreshTokenLifetime\": null, \"accessTokenLifetime\": null, \"customAttributes\": [], \"customObjectClasses\": [ \"top\" ], \"rptAsJwt\": false, \"accessTokenAsJwt\": false, \"accessTokenSigningAlg\": null, \"disabled\": false, \"authorizedOrigins\": null, \"softwareId\": null, \"softwareVersion\": null, \"softwareStatement\": null, \"attributes\": { \"tlsClientAuthSubjectDn\": null, \"runIntrospectionScriptBeforeJwtCreation\": false, \"keepClientAuthorizationAfterExpiration\": false, \"allowSpontaneousScopes\": false, \"spontaneousScopes\": null, \"spontaneousScopeScriptDns\": null, \"backchannelLogoutUri\": null, \"backchannelLogoutSessionRequired\": false, \"additionalAudience\": null, \"postAuthnScripts\": null, \"consentGatheringScripts\": null, \"introspectionScripts\": null, \"rptClaimsScripts\": null }, \"backchannelTokenDeliveryMode\": null, \"backchannelClientNotificationEndpoint\": null, \"backchannelAuthenticationRequestSigningAlg\": null, \"backchannelUserCodeParameter\": null, \"expirationDate\": null, \"deletable\": false, \"jansId\": null } ]","title":"Get List of OpenID Clients"},{"location":"admin/config-guide/openid-connect-client-configuration/#creating-a-new-openid-clients","text":"We can create openid clients as well, Let's see the description. It has a schema file where is defined the properties needs to be filled to create a new openid clients. Operation ID: post-oauth-openid-clients Description: Create new OpenId connect client Schema: /components/schemas/Client To get the schema file: /opt/jans/jans-cli/config-cli.py --schema /components/schemas/Client It contains a lot of properties. But, It's not important to fill each of these properties. We are going to fill these properties: frontChannelLogoutSessionRequired[false, true] applicationType[web, native] clientName subjectType[pairwise, public] includeClaimsInIdToken[false, true] { \"dn\": null, \"inum\": null, \"clientSecret\": null, \"frontChannelLogoutUri\": null, \"frontChannelLogoutSessionRequired\": false, \"registrationAccessToken\": null, \"clientIdIssuedAt\": null, \"clientSecretExpiresAt\": null, \"redirectUris\": [ \"https://client.example.org/cb\" ], \"claimRedirectUris\": [], \"responseTypes\": [], \"grantTypes\": [], \"applicationType\": \"web\", \"contacts\": [], \"clientName\": \"testOIDC\", \"idTokenTokenBindingCnf\": null, \"logoUri\": null, \"clientUri\": null, \"policyUri\": null, \"tosUri\": null, \"jwksUri\": null, \"jwks\": \"{ \\\"keys\\\" : [ { \\\"e\\\" : \\\"AQAB\\\", \\\"n\\\" : \\\"gmlDX_mgMcHX..\\\" ] }\", \"sectorIdentifierUri\": null, \"subjectType\": \"public\", \"idTokenSignedResponseAlg\": \"HS512\", \"idTokenEncryptedResponseAlg\": \"RSA1_5\", \"idTokenEncryptedResponseEnc\": \"A256GCM\", \"userInfoSignedResponseAlg\": \"PS256\", \"userInfoEncryptedResponseAlg\": \"RSA1_5\", \"userInfoEncryptedResponseEnc\": \"A128GCM\", \"requestObjectSigningAlg\": \"PS512\", \"requestObjectEncryptionAlg\": \"A128KW\", \"requestObjectEncryptionEnc\": \"A256CBC+HS512\", \"tokenEndpointAuthMethod\": \"tls_client_auth\", \"tokenEndpointAuthSigningAlg\": \"PS384\", \"defaultMaxAge\": 1000000, \"requireAuthTime\": true, \"defaultAcrValues\": [], \"initiateLoginUri\": null, \"postLogoutRedirectUris\": [ \"https://client.example.org/logout/page1\", \"https://client.example.org/logout/page2\", \"https://client.example.org/logout/page3\" ], \"requestUris\": [], \"scopes\": [ \"read write dolphin\" ], \"claims\": [], \"trustedClient\": false, \"lastAccessTime\": null, \"lastLogonTime\": null, \"persistClientAuthorizations\": false, \"includeClaimsInIdToken\": false, \"refreshTokenLifetime\": 100000000, \"accessTokenLifetime\": 100000000, \"customAttributes\": { \"name\": \"name, displayName, birthdate, email\", \"multiValued\": false, \"values\": [] }, \"customObjectClasses\": [], \"rptAsJwt\": false, \"accessTokenAsJwt\": false, \"accessTokenSigningAlg\": \"ES384\", \"disabled\": false, \"authorizedOrigins\": [], \"softwareId\": \"4NRB1-0XZABZI9E6-5SM3R\", \"softwareVersion\": \"2.1\", \"softwareStatement\": null, \"attributes\": { \"tlsClientAuthSubjectDn\": null, \"runIntrospectionScriptBeforeJwtCreation\": true, \"keepClientAuthorizationAfterExpiration\": true, \"allowSpontaneousScopes\": false, \"spontaneousScopes\": [], \"spontaneousScopeScriptDns\": [], \"backchannelLogoutUri\": [], \"backchannelLogoutSessionRequired\": true, \"additionalAudience\": [], \"postAuthnScripts\": [], \"consentGatheringScripts\": [], \"introspectionScripts\": [], \"rptClaimsScripts\": [] }, \"backchannelTokenDeliveryMode\": \"ping\", \"backchannelClientNotificationEndpoint\": null, \"backchannelAuthenticationRequestSigningAlg\": \"PS384\", \"backchannelUserCodeParameter\": false, \"expirationDate\": null, \"deletable\": false, \"jansId\": null } I have changed few things only here to show how to create an OpenID Connect Client. Please make sure that you filled each of the required properties to work the client.","title":"Creating a New OpenID Clients"},{"location":"admin/config-guide/scim-group-config/","tags":["administration","configuration","group"],"text":"Group Resources # Prerequisite: Know how to use the Janssen CLI in command-line mode Group resources are used to manage user resources easily with some operations. If you run the below command, then you will get a list of operations as below: root@testjans:~# /opt/jans/jans-cli/scim-cli.py --info Group Operation ID: get-groups Description: Query Group resources (see section 3.4.2 of RFC 7644) Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] filter: An expression specifying the search criteria. See section 3.4.2.2 of RFC 7644 [string] startIndex: The 1-based index of the first query result [integer] count: Specifies the desired maximum number of query results per page [integer] sortBy: The attribute whose value will be used to order the returned responses [string] sortOrder: Order in which the sortBy param is applied. Allowed values are \"ascending\" and \"descending\" [string] Operation ID: create-group Description: Allows creating a Group resource via POST (see section 3.3 of RFC 7644) Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] Schema: /components/schemas/GroupResource Schema: /components/schemas/GroupResource Operation ID: get-group-by-id Description: Retrieves a Group resource by Id (see section 3.4.1 of RFC 7644) url-suffix: id Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] id: No description is provided for this parameter [string] Operation ID: update-group-by-id Description: Updates a Group resource (see section 3.5.1 of RFC 7644). Update works in a replacement fashion&amp;#58; every attribute value found in the payload sent will replace the one in the existing resource representation. Attributes not passed in the payload will be left intact. url-suffix: id Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] id: No description is provided for this parameter [string] Schema: /components/schemas/GroupResource Schema: /components/schemas/GroupResource Operation ID: delete-group-by-id Description: Deletes a group resource (see section 3.6 of RFC 7644) url-suffix: id Parameters: id: Identifier of the resource to delete [string] Operation ID: patch-group-by-id Description: Updates one or more attributes of a Group resource using a sequence of additions, removals, and replacements operations. See section 3.5.2 of RFC 7644 url-suffix: id Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] id: No description is provided for this parameter [string] Schema: /components/schemas/PatchRequest Schema: /components/schemas/PatchRequest Operation ID: search-group Description: Query Group resources (see section 3.4.2 of RFC 7644) Schema: /components/schemas/SearchRequest Schema: /components/schemas/SearchRequest To get sample schema type /opt/jans/jans-cli/scim-cli.py --schema <schma>, for example /opt/jans/jans-cli/scim-cli.py --schema /components/schemas/SearchRequest root@testjans:~# Table of Contents # Group Resources Get Groups Create Group Get Group by ID Update Group by ID Delete Group by ID Patch Group Search Group Get Groups # This operation can be used to get list of groups that are used to organize user resources. Let's run the below command: # /opt/jans/jans-cli/scim-cli.py --operation-id get-users It will show the list of groups with all the members linked with each of the group. You can filter for the advanced search with some of its properties: attributes excludeAttributes filter count [define maximum number of query] sortBy [attribute] sortOrder ['ascending', 'descending'] Getting access token for scope https://jans.io/scim/groups.read { \"Resources\": [ { \"displayName\": \"Jannsen Manager Group\", \"members\": [ { \"$ref\": \"https://testjans.gluu.org/jans-scim/restv1/v2/Users/e0b8a6a5-1955-49d7-acba-55a75b2373df\", \"type\": \"User\", \"display\": \"Default Admin User\", \"value\": \"e0b8a6a5-1955-49d7-acba-55a75b2373df\" } ], \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:Group\" ], \"id\": \"60B7\", \"meta\": { \"resourceType\": \"Group\", \"created\": null, \"lastModified\": null, \"location\": \"https://testjans.gluu.org/jans-scim/restv1/v2/Groups/60B7\" } } ], \"schemas\": [ \"urn:ietf:params:scim:api:messages:2.0:ListResponse\" ], \"totalResults\": 1, \"startIndex\": 1, \"itemsPerPage\": 1 } root@testjans:~# Create Group # This operation can be used to create group resources to manage user resources. Operation ID: create-group Description: Allows creating a Group resource via POST (see section 3.3 of RFC 7644) Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] Schema: /components/schemas/GroupResource So, let's get first the schema, to get schema: /opt/jans/jans-cli/scim-cli.py --schema /components/schemas/GroupResource root@testjans:~# /opt/jans/jans-cli/scim-cli.py --schema /components/schemas/GroupResource { \"displayName\": null, \"members\": { \"$ref\": null, \"type\": null, \"display\": null, \"value\": null }, \"schemas\": [], \"id\": null, \"meta\": { \"resourceType\": null, \"created\": null, \"lastModified\": null, \"location\": null } } The schema defines the properties of an attribute.Just Create a json file with each properties in schema filling by a value. As you see, I have removed members from the schema. We will add members in this group later. Let's use the command to create the group with this data. /opt/jans/jans-cli/scim-cli.py --operation-id create-group --data group.json Getting access token for scope https://jans.io/scim/groups.write Server Response: { \"displayName\": \"Jannsen Test Group\", \"members\": null, \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:Group\" ], \"id\": \"766ffd8c-88a8-4aa8-a430-a5b3ae809c21\", \"meta\": { \"resourceType\": \"Group\", \"created\": \"2021-04-14T19:54:03.091Z\", \"lastModified\": \"2021-04-14T19:54:03.091Z\", \"location\": \"https://testjans.gluu.org/jans-scim/restv1/v2/Groups/766ffd8c-88a8-4aa8-a430-a5b3ae809c21\" } } To verify let's use the get-groups operation id: root@testjans:~# /opt/jans/jans-cli/scim-cli.py --operation-id get-groups Getting access token for scope https://jans.io/scim/groups.read { \"Resources\": [ { \"displayName\": \"Jannsen Manager Group\", \"members\": [ { \"$ref\": \"https://testjans.gluu.org/jans-scim/restv1/v2/Users/e0b8a6a5-1955-49d7-acba-55a75b2373df\", \"type\": \"User\", \"display\": \"Default Admin User\", \"value\": \"e0b8a6a5-1955-49d7-acba-55a75b2373df\" } ], \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:Group\" ], \"id\": \"60B7\", \"meta\": { \"resourceType\": \"Group\", \"created\": null, \"lastModified\": null, \"location\": \"https://testjans.gluu.org/jans-scim/restv1/v2/Groups/60B7\" } }, { \"displayName\": \"Jannsen Test Group\", \"members\": [], \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:Group\" ], \"id\": \"766ffd8c-88a8-4aa8-a430-a5b3ae809c21\", \"meta\": { \"resourceType\": \"Group\", \"created\": \"2021-04-14T19:54:03.091Z\", \"lastModified\": \"2021-04-14T19:54:03.091Z\", \"location\": \"https://testjans.gluu.org/jans-scim/restv1/v2/Groups/766ffd8c-88a8-4aa8-a430-a5b3ae809c21\" } } ], \"schemas\": [ \"urn:ietf:params:scim:api:messages:2.0:ListResponse\" ], \"totalResults\": 2, \"startIndex\": 1, \"itemsPerPage\": 2 } root@testjans:~# Get Group by ID # If you have an id of a group resource, Then you can view its properties through this operation. Operation ID: get-group-by-id Description: Retrieves a Group resource by Id (see section 3.4.1 of RFC 7644) url-suffix: id Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] id: No description is provided for this parameter [string] In our case, id:766ffd8c-88a8-4aa8-a430-a5b3ae809c21 that's created while performing the create-group operation. /opt/jans/jans-cli/scim-cli.py --operation-id get-group-by-id --url-suffix id:766ffd8c-88a8-4aa8-a430-a5b3ae809c21 In return, you must see the group resources linked with the id: Getting access token for scope https://jans.io/scim/groups.read { \"displayName\": \"Jannsen Test Group\", \"members\": [], \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:Group\" ], \"id\": \"766ffd8c-88a8-4aa8-a430-a5b3ae809c21\", \"meta\": { \"resourceType\": \"Group\", \"created\": \"2021-04-14T19:54:03.091Z\", \"lastModified\": \"2021-04-14T19:54:03.091Z\", \"location\": \"https://testjans.gluu.org/jans-scim/restv1/v2/Groups/766ffd8c-88a8-4aa8-a430-a5b3ae809c21\" } } Update Group by ID # If we look at the description, We see this op-mode needs url-suffix as id and schema definition for data. Operation ID: update-group-by-id Description: Updates a Group resource (see section 3.5.1 of RFC 7644). Update works in a replacement fashion&amp;#58; every attribute value found in the payload sent will replace the one in the existing resource representation. Attributes not passed in the payload will be left intact. url-suffix: id Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] id: No description is provided for this parameter [string] Schema: /components/schemas/GroupResource Let's get the schema first: /opt/jans/jans-cli/scim-cli.py --schema /components/schemas/GroupResource > /tmp/group.json let's modify this schema to add members into a selected group: displayName: It should be a group name id: Selected group id which one you want to updae meta: Meta data of the selected group Now let's add this member into the group we are going to update. root@testjans:~# /opt/jans/jans-cli/scim-cli.py --operation-id update-group-by-id --data /tmp/group.json --url-suffix id:56030854-2784-408e-8fa7-e11835804ac7 Getting access token for scope https://jans.io/scim/groups.write Server Response: { \"displayName\": \"Test Janssen Server\", \"members\": [ { \"$ref\": \"https://testjans.gluu.com/jans-scim/restv1/v2/Users/null\", \"type\": \"User\", \"display\": null, \"value\": null } ], \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:Group\" ], \"id\": \"56030854-2784-408e-8fa7-e11835804ac7\", \"meta\": { \"resourceType\": \"Group\", \"created\": \"2021-04-19T22:15:15.151Z\", \"lastModified\": \"2021-04-21T16:22:24.085Z\", \"location\": \"https://testjans.gluu.com/jans-scim/restv1/v2/Groups/56030854-2784-408e-8fa7-e11835804ac7\" } } root@testjans:~# That's how we can update a group using this operation method. Please remember one thing, this update method just replace the data. If you want to add members instead of replacing then you must try patch-group-by-id . Delete Group by ID # You can delete a group by its ID. The command line looks like: /opt/jans/jans-cli/scim-cli.py --operation-id delete-group-by-id --url-suffix id:56030854-2784-408e-8fa7-e11835804ac7 It will delete the group and all of its data matched with the unique ID. root@testjans:~# /opt/jans/jans-cli/scim-cli.py --operation-id delete-group-by-id --url-suffix id:56030854-2784-408e-8fa7-e11835804ac7 Getting access token for scope https://jans.io/scim/groups.write Patch Group # This is also an option to update any existing group resources. The only difference between update-group-by-id and patch-group is that the first one just replace new data with previous data. It won't add any new data into the group. But Patch-group supports few more operations including replace. Like, You can test , add , replace , delete , copy any data from a Group resource. If wee look at the description: Operation ID: patch-group-by-id Description: Updates one or more attributes of a Group resource using a sequence of additions, removals, and replacements operations. See section 3.5.2 of RFC 7644 url-suffix: id Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] id: No description is provided for this parameter [string] Schema: /components/schemas/PatchRequest As we see, It has a schema file. So, Let's get the schema: Search Group #","title":"SCIM Group Management"},{"location":"admin/config-guide/scim-group-config/#group-resources","text":"Prerequisite: Know how to use the Janssen CLI in command-line mode Group resources are used to manage user resources easily with some operations. If you run the below command, then you will get a list of operations as below: root@testjans:~# /opt/jans/jans-cli/scim-cli.py --info Group Operation ID: get-groups Description: Query Group resources (see section 3.4.2 of RFC 7644) Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] filter: An expression specifying the search criteria. See section 3.4.2.2 of RFC 7644 [string] startIndex: The 1-based index of the first query result [integer] count: Specifies the desired maximum number of query results per page [integer] sortBy: The attribute whose value will be used to order the returned responses [string] sortOrder: Order in which the sortBy param is applied. Allowed values are \"ascending\" and \"descending\" [string] Operation ID: create-group Description: Allows creating a Group resource via POST (see section 3.3 of RFC 7644) Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] Schema: /components/schemas/GroupResource Schema: /components/schemas/GroupResource Operation ID: get-group-by-id Description: Retrieves a Group resource by Id (see section 3.4.1 of RFC 7644) url-suffix: id Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] id: No description is provided for this parameter [string] Operation ID: update-group-by-id Description: Updates a Group resource (see section 3.5.1 of RFC 7644). Update works in a replacement fashion&amp;#58; every attribute value found in the payload sent will replace the one in the existing resource representation. Attributes not passed in the payload will be left intact. url-suffix: id Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] id: No description is provided for this parameter [string] Schema: /components/schemas/GroupResource Schema: /components/schemas/GroupResource Operation ID: delete-group-by-id Description: Deletes a group resource (see section 3.6 of RFC 7644) url-suffix: id Parameters: id: Identifier of the resource to delete [string] Operation ID: patch-group-by-id Description: Updates one or more attributes of a Group resource using a sequence of additions, removals, and replacements operations. See section 3.5.2 of RFC 7644 url-suffix: id Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] id: No description is provided for this parameter [string] Schema: /components/schemas/PatchRequest Schema: /components/schemas/PatchRequest Operation ID: search-group Description: Query Group resources (see section 3.4.2 of RFC 7644) Schema: /components/schemas/SearchRequest Schema: /components/schemas/SearchRequest To get sample schema type /opt/jans/jans-cli/scim-cli.py --schema <schma>, for example /opt/jans/jans-cli/scim-cli.py --schema /components/schemas/SearchRequest root@testjans:~#","title":"Group Resources"},{"location":"admin/config-guide/scim-group-config/#table-of-contents","text":"Group Resources Get Groups Create Group Get Group by ID Update Group by ID Delete Group by ID Patch Group Search Group","title":"Table of Contents"},{"location":"admin/config-guide/scim-group-config/#get-groups","text":"This operation can be used to get list of groups that are used to organize user resources. Let's run the below command: # /opt/jans/jans-cli/scim-cli.py --operation-id get-users It will show the list of groups with all the members linked with each of the group. You can filter for the advanced search with some of its properties: attributes excludeAttributes filter count [define maximum number of query] sortBy [attribute] sortOrder ['ascending', 'descending'] Getting access token for scope https://jans.io/scim/groups.read { \"Resources\": [ { \"displayName\": \"Jannsen Manager Group\", \"members\": [ { \"$ref\": \"https://testjans.gluu.org/jans-scim/restv1/v2/Users/e0b8a6a5-1955-49d7-acba-55a75b2373df\", \"type\": \"User\", \"display\": \"Default Admin User\", \"value\": \"e0b8a6a5-1955-49d7-acba-55a75b2373df\" } ], \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:Group\" ], \"id\": \"60B7\", \"meta\": { \"resourceType\": \"Group\", \"created\": null, \"lastModified\": null, \"location\": \"https://testjans.gluu.org/jans-scim/restv1/v2/Groups/60B7\" } } ], \"schemas\": [ \"urn:ietf:params:scim:api:messages:2.0:ListResponse\" ], \"totalResults\": 1, \"startIndex\": 1, \"itemsPerPage\": 1 } root@testjans:~#","title":"Get Groups"},{"location":"admin/config-guide/scim-group-config/#create-group","text":"This operation can be used to create group resources to manage user resources. Operation ID: create-group Description: Allows creating a Group resource via POST (see section 3.3 of RFC 7644) Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] Schema: /components/schemas/GroupResource So, let's get first the schema, to get schema: /opt/jans/jans-cli/scim-cli.py --schema /components/schemas/GroupResource root@testjans:~# /opt/jans/jans-cli/scim-cli.py --schema /components/schemas/GroupResource { \"displayName\": null, \"members\": { \"$ref\": null, \"type\": null, \"display\": null, \"value\": null }, \"schemas\": [], \"id\": null, \"meta\": { \"resourceType\": null, \"created\": null, \"lastModified\": null, \"location\": null } } The schema defines the properties of an attribute.Just Create a json file with each properties in schema filling by a value. As you see, I have removed members from the schema. We will add members in this group later. Let's use the command to create the group with this data. /opt/jans/jans-cli/scim-cli.py --operation-id create-group --data group.json Getting access token for scope https://jans.io/scim/groups.write Server Response: { \"displayName\": \"Jannsen Test Group\", \"members\": null, \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:Group\" ], \"id\": \"766ffd8c-88a8-4aa8-a430-a5b3ae809c21\", \"meta\": { \"resourceType\": \"Group\", \"created\": \"2021-04-14T19:54:03.091Z\", \"lastModified\": \"2021-04-14T19:54:03.091Z\", \"location\": \"https://testjans.gluu.org/jans-scim/restv1/v2/Groups/766ffd8c-88a8-4aa8-a430-a5b3ae809c21\" } } To verify let's use the get-groups operation id: root@testjans:~# /opt/jans/jans-cli/scim-cli.py --operation-id get-groups Getting access token for scope https://jans.io/scim/groups.read { \"Resources\": [ { \"displayName\": \"Jannsen Manager Group\", \"members\": [ { \"$ref\": \"https://testjans.gluu.org/jans-scim/restv1/v2/Users/e0b8a6a5-1955-49d7-acba-55a75b2373df\", \"type\": \"User\", \"display\": \"Default Admin User\", \"value\": \"e0b8a6a5-1955-49d7-acba-55a75b2373df\" } ], \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:Group\" ], \"id\": \"60B7\", \"meta\": { \"resourceType\": \"Group\", \"created\": null, \"lastModified\": null, \"location\": \"https://testjans.gluu.org/jans-scim/restv1/v2/Groups/60B7\" } }, { \"displayName\": \"Jannsen Test Group\", \"members\": [], \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:Group\" ], \"id\": \"766ffd8c-88a8-4aa8-a430-a5b3ae809c21\", \"meta\": { \"resourceType\": \"Group\", \"created\": \"2021-04-14T19:54:03.091Z\", \"lastModified\": \"2021-04-14T19:54:03.091Z\", \"location\": \"https://testjans.gluu.org/jans-scim/restv1/v2/Groups/766ffd8c-88a8-4aa8-a430-a5b3ae809c21\" } } ], \"schemas\": [ \"urn:ietf:params:scim:api:messages:2.0:ListResponse\" ], \"totalResults\": 2, \"startIndex\": 1, \"itemsPerPage\": 2 } root@testjans:~#","title":"Create Group"},{"location":"admin/config-guide/scim-group-config/#get-group-by-id","text":"If you have an id of a group resource, Then you can view its properties through this operation. Operation ID: get-group-by-id Description: Retrieves a Group resource by Id (see section 3.4.1 of RFC 7644) url-suffix: id Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] id: No description is provided for this parameter [string] In our case, id:766ffd8c-88a8-4aa8-a430-a5b3ae809c21 that's created while performing the create-group operation. /opt/jans/jans-cli/scim-cli.py --operation-id get-group-by-id --url-suffix id:766ffd8c-88a8-4aa8-a430-a5b3ae809c21 In return, you must see the group resources linked with the id: Getting access token for scope https://jans.io/scim/groups.read { \"displayName\": \"Jannsen Test Group\", \"members\": [], \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:Group\" ], \"id\": \"766ffd8c-88a8-4aa8-a430-a5b3ae809c21\", \"meta\": { \"resourceType\": \"Group\", \"created\": \"2021-04-14T19:54:03.091Z\", \"lastModified\": \"2021-04-14T19:54:03.091Z\", \"location\": \"https://testjans.gluu.org/jans-scim/restv1/v2/Groups/766ffd8c-88a8-4aa8-a430-a5b3ae809c21\" } }","title":"Get Group by ID"},{"location":"admin/config-guide/scim-group-config/#update-group-by-id","text":"If we look at the description, We see this op-mode needs url-suffix as id and schema definition for data. Operation ID: update-group-by-id Description: Updates a Group resource (see section 3.5.1 of RFC 7644). Update works in a replacement fashion&amp;#58; every attribute value found in the payload sent will replace the one in the existing resource representation. Attributes not passed in the payload will be left intact. url-suffix: id Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] id: No description is provided for this parameter [string] Schema: /components/schemas/GroupResource Let's get the schema first: /opt/jans/jans-cli/scim-cli.py --schema /components/schemas/GroupResource > /tmp/group.json let's modify this schema to add members into a selected group: displayName: It should be a group name id: Selected group id which one you want to updae meta: Meta data of the selected group Now let's add this member into the group we are going to update. root@testjans:~# /opt/jans/jans-cli/scim-cli.py --operation-id update-group-by-id --data /tmp/group.json --url-suffix id:56030854-2784-408e-8fa7-e11835804ac7 Getting access token for scope https://jans.io/scim/groups.write Server Response: { \"displayName\": \"Test Janssen Server\", \"members\": [ { \"$ref\": \"https://testjans.gluu.com/jans-scim/restv1/v2/Users/null\", \"type\": \"User\", \"display\": null, \"value\": null } ], \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:Group\" ], \"id\": \"56030854-2784-408e-8fa7-e11835804ac7\", \"meta\": { \"resourceType\": \"Group\", \"created\": \"2021-04-19T22:15:15.151Z\", \"lastModified\": \"2021-04-21T16:22:24.085Z\", \"location\": \"https://testjans.gluu.com/jans-scim/restv1/v2/Groups/56030854-2784-408e-8fa7-e11835804ac7\" } } root@testjans:~# That's how we can update a group using this operation method. Please remember one thing, this update method just replace the data. If you want to add members instead of replacing then you must try patch-group-by-id .","title":"Update Group by ID"},{"location":"admin/config-guide/scim-group-config/#delete-group-by-id","text":"You can delete a group by its ID. The command line looks like: /opt/jans/jans-cli/scim-cli.py --operation-id delete-group-by-id --url-suffix id:56030854-2784-408e-8fa7-e11835804ac7 It will delete the group and all of its data matched with the unique ID. root@testjans:~# /opt/jans/jans-cli/scim-cli.py --operation-id delete-group-by-id --url-suffix id:56030854-2784-408e-8fa7-e11835804ac7 Getting access token for scope https://jans.io/scim/groups.write","title":"Delete Group by ID"},{"location":"admin/config-guide/scim-group-config/#patch-group","text":"This is also an option to update any existing group resources. The only difference between update-group-by-id and patch-group is that the first one just replace new data with previous data. It won't add any new data into the group. But Patch-group supports few more operations including replace. Like, You can test , add , replace , delete , copy any data from a Group resource. If wee look at the description: Operation ID: patch-group-by-id Description: Updates one or more attributes of a Group resource using a sequence of additions, removals, and replacements operations. See section 3.5.2 of RFC 7644 url-suffix: id Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] id: No description is provided for this parameter [string] Schema: /components/schemas/PatchRequest As we see, It has a schema file. So, Let's get the schema:","title":"Patch Group"},{"location":"admin/config-guide/scim-group-config/#search-group","text":"","title":"Search Group"},{"location":"admin/config-guide/smtp-configuration/","tags":["administration","configuration","smtp"],"text":"SMTP Configuration # Prerequisite: Know how to use the Janssen CLI in command-line mode Let's get the information of SMTP Configuration using Janssen CLI. /opt/jans/jans-cli/config-cli.py --info ConfigurationSMTP Operation ID: get-config-smtp Description: Returns SMTP server configuration. Operation ID: post-config-smtp Description: Adds SMTP server configuration. Schema: /components/schemas/SmtpConfiguration Operation ID: put-config-smtp Description: Updates SMTP server configuration. Schema: /components/schemas/SmtpConfiguration Operation ID: delete-config-smtp Description: Deletes SMTP server configuration. Operation ID: test-config-smtp Description: Test SMTP server configuration. To get sample schema type /opt/jans/jans-cli/config-cli.py --schema <schema>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/SmtpConfiguration As we see, we can perform many operations such as update , delete , test , post , etc. Let's do some operations. Find SMTP Server Configuration # To view the current SMTP server configuration, run the following command line: /opt/jans/jans-cli/config-cli.py --operation-id get-config-smtp It will show your SMTP server configuration as below: Getting access token for scope https://jans.io/oauth/config/smtp.readonly { \"host\": \"webmail.gluu.org\", \"port\": 587, \"requiresSsl\": null, \"serverTrust\": null, \"fromName\": null, \"fromEmailAddress\": null, \"requiresAuthentication\": null, \"userName\": null, \"password\": \"fHze8OEMs1MzkGhWw/29eg==\" } Setup New SMTP Server Configuration # This operation can be performed to update/post a new SMTP configuration on your Janssen server. Let's see the schema first: /opt/jans/jans-cli/config-cli.py --schema /components/schemas/SmtpConfiguration > /tmp/smtp.json It will create a .json file. Let's modify this file: nano /tmp/smtp.json You can update each of its properties. To perform this operation, run the following command: /opt/jans/jans-cli/config-cli.py --operation-id post-config-smtp --data /tmp/smtp.json If you run the following command, it will update your janssen smtp server and print on the screen as below. Getting access token for scope https://jans.io/oauth/config/smtp.write Server Response: { \"host\": \"webmail.gluu.org\", \"port\": 587, \"requiresSsl\": null, \"serverTrust\": null, \"fromName\": null, \"fromEmailAddress\": null, \"requiresAuthentication\": null, \"userName\": null, \"password\": \"fHze8OEMs1MzkGhWw/29eg==\" } Update SMTP Server Configuration # To update smtp server, simply change any information on /tmp/smtp.json file and run the following command: /opt/jans/jans-cli/config-cli.py --operation-id put-config-smtp --data /tmp/smtp.json It will update the information. Test SMTP Server Configuration # Testing SMTP configuration token with https://jans.io/oauth/config/smtp.write scope is required. To test SMTP configuration update, change any information on /tmp/smtp.json file with test data and run the following command: /opt/jans/jans-cli/config-cli.py --operation-id test-config-smtp --data /tmp/smtp.json This will be return status code 200 with response as true or false based on the SMTP test result. Note: SMTP Password should be App password and not web login password.","title":"SMTP Configuration"},{"location":"admin/config-guide/smtp-configuration/#smtp-configuration","text":"Prerequisite: Know how to use the Janssen CLI in command-line mode Let's get the information of SMTP Configuration using Janssen CLI. /opt/jans/jans-cli/config-cli.py --info ConfigurationSMTP Operation ID: get-config-smtp Description: Returns SMTP server configuration. Operation ID: post-config-smtp Description: Adds SMTP server configuration. Schema: /components/schemas/SmtpConfiguration Operation ID: put-config-smtp Description: Updates SMTP server configuration. Schema: /components/schemas/SmtpConfiguration Operation ID: delete-config-smtp Description: Deletes SMTP server configuration. Operation ID: test-config-smtp Description: Test SMTP server configuration. To get sample schema type /opt/jans/jans-cli/config-cli.py --schema <schema>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/SmtpConfiguration As we see, we can perform many operations such as update , delete , test , post , etc. Let's do some operations.","title":"SMTP Configuration"},{"location":"admin/config-guide/smtp-configuration/#find-smtp-server-configuration","text":"To view the current SMTP server configuration, run the following command line: /opt/jans/jans-cli/config-cli.py --operation-id get-config-smtp It will show your SMTP server configuration as below: Getting access token for scope https://jans.io/oauth/config/smtp.readonly { \"host\": \"webmail.gluu.org\", \"port\": 587, \"requiresSsl\": null, \"serverTrust\": null, \"fromName\": null, \"fromEmailAddress\": null, \"requiresAuthentication\": null, \"userName\": null, \"password\": \"fHze8OEMs1MzkGhWw/29eg==\" }","title":"Find SMTP Server Configuration"},{"location":"admin/config-guide/smtp-configuration/#setup-new-smtp-server-configuration","text":"This operation can be performed to update/post a new SMTP configuration on your Janssen server. Let's see the schema first: /opt/jans/jans-cli/config-cli.py --schema /components/schemas/SmtpConfiguration > /tmp/smtp.json It will create a .json file. Let's modify this file: nano /tmp/smtp.json You can update each of its properties. To perform this operation, run the following command: /opt/jans/jans-cli/config-cli.py --operation-id post-config-smtp --data /tmp/smtp.json If you run the following command, it will update your janssen smtp server and print on the screen as below. Getting access token for scope https://jans.io/oauth/config/smtp.write Server Response: { \"host\": \"webmail.gluu.org\", \"port\": 587, \"requiresSsl\": null, \"serverTrust\": null, \"fromName\": null, \"fromEmailAddress\": null, \"requiresAuthentication\": null, \"userName\": null, \"password\": \"fHze8OEMs1MzkGhWw/29eg==\" }","title":"Setup New SMTP Server Configuration"},{"location":"admin/config-guide/smtp-configuration/#update-smtp-server-configuration","text":"To update smtp server, simply change any information on /tmp/smtp.json file and run the following command: /opt/jans/jans-cli/config-cli.py --operation-id put-config-smtp --data /tmp/smtp.json It will update the information.","title":"Update SMTP Server Configuration"},{"location":"admin/config-guide/smtp-configuration/#test-smtp-server-configuration","text":"Testing SMTP configuration token with https://jans.io/oauth/config/smtp.write scope is required. To test SMTP configuration update, change any information on /tmp/smtp.json file with test data and run the following command: /opt/jans/jans-cli/config-cli.py --operation-id test-config-smtp --data /tmp/smtp.json This will be return status code 200 with response as true or false based on the SMTP test result. Note: SMTP Password should be App password and not web login password.","title":"Test SMTP Server Configuration"},{"location":"admin/config-guide/user-config/","tags":["administration","configuration","user"],"text":"User Resources # Prerequisite: Know how to use the Janssen CLI in command-line mode The first thing is to do, Let's get some information for the following task: /opt/jans/jans-cli/scim-cli.py --info User In retrun we get, root@testjans:~# /opt/jans/jans-cli/scim-cli.py --info User Operation ID: get-users Description: Query User resources (see section 3.4.2 of RFC 7644) Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] filter: An expression specifying the search criteria. See section 3.4.2.2 of RFC 7644 [string] startIndex: The 1-based index of the first query result [integer] count: Specifies the desired maximum number of query results per page [integer] sortBy: The attribute whose value will be used to order the returned responses [string] sortOrder: Order in which the sortBy param is applied. Allowed values are \"ascending\" and \"descending\" [string] Operation ID: create-user Description: Allows creating a User resource via POST (see section 3.3 of RFC 7644) Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] Schema: /components/schemas/UserResource Schema: /components/schemas/UserResource Operation ID: get-user-by-id Description: Retrieves a User resource by Id (see section 3.4.1 of RFC 7644) url-suffix: id Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] id: No description is provided for this parameter [string] Operation ID: update-user-by-id Description: Updates a User resource (see section 3.5.1 of RFC 7644). Update works in a replacement fashion&amp;#58; every attribute value found in the payload sent will replace the one in the existing resource representation. Attributes not passed in the payload will be left intact. url-suffix: id Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] id: No description is provided for this parameter [string] Schema: /components/schemas/UserResource Schema: /components/schemas/UserResource Operation ID: delete-user-by-id Description: Deletes a user resource url-suffix: id Parameters: id: Identifier of the resource to delete [string] Operation ID: patch-user-by-id Description: Updates one or more attributes of a User resource using a sequence of additions, removals, and replacements operations. See section 3.5.2 of RFC 7644 url-suffix: id Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] id: No description is provided for this parameter [string] Schema: /components/schemas/PatchRequest Schema: /components/schemas/PatchRequest Operation ID: search-user Description: Query User resources (see section 3.4.2 of RFC 7644) Schema: /components/schemas/SearchRequest Schema: /components/schemas/SearchRequest To get sample schema type /opt/jans/jans-cli/scim-cli.py --schema <schma>, for example /opt/jans/jans-cli/scim-cli.py Find Users List # This operation is used to get list of the users and its properties. The command line is: /opt/jans/jans-cli/scim-cli.py --operation-id get-users By default, This will return all of the users and their properties. root@testjans:~# /opt/jans/jans-cli/scim-cli.py --operation-id get-users Getting access token for scope https://jans.io/scim/users.read { \"Resources\": [ { \"externalId\": null, \"userName\": \"admin\", \"name\": { \"familyName\": \"User\", \"givenName\": \"Admin\", \"middleName\": \"Admin\", \"honorificPrefix\": null, \"honorificSuffix\": null, \"formatted\": \"Admin Admin User\" }, \"displayName\": \"Default Admin User\", \"nickName\": \"Admin\", \"profileUrl\": null, \"title\": \"MH Shakil\", \"userType\": null, \"preferredLanguage\": null, \"locale\": null, \"timezone\": null, \"active\": true, \"password\": null, \"emails\": [ { \"value\": \"admin@testjans.gluu.com\", \"display\": null, \"type\": null, \"primary\": false } ], \"phoneNumbers\": null, \"ims\": null, \"photos\": null, \"addresses\": null, \"groups\": [ { \"value\": \"60B7\", \"$ref\": \"https://testjans.gluu.com/jans-scim/restv1/v2/Groups/60B7\", \"display\": \"Jannsen Manager Group\", \"type\": \"direct\" } ], \"entitlements\": null, \"roles\": null, \"x509Certificates\": null, \"urn:ietf:params:scim:schemas:extension:gluu:2.0:User\": null, \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:User\" ], \"id\": \"18ca6089-42fb-410a-a5b5-c2631d75dc7d\", \"meta\": { \"resourceType\": \"User\", \"created\": null, \"lastModified\": \"2021-04-06T18:39:54.087Z\", \"location\": \"https://testjans.gluu.com/jans-scim/restv1/v2/Users/18ca6089-42fb-410a-a5b5-c2631d75dc7d\" } } ], \"schemas\": [ \"urn:ietf:params:scim:api:messages:2.0:ListResponse\" ], \"totalResults\": 1, \"startIndex\": 1, \"itemsPerPage\": 1 } It also supports parameters for the advanced search. Those parameters are: 1. attributes 2. excludeAttributes 3. filter 4. count [ define maximum number of query ] 5. sortBy [ attribute ] 6. sortOrder [ 'ascending', 'descending' ] This is an example with endpoint-args : /opt/jans/jans-cli/scim-cli.py --operation-id get-users --endpoint-args count:1 It returns as below: Getting access token for scope https://jans.io/scim/users.read Calling with params count=1 { \"Resources\": [ { \"externalId\": null, \"userName\": \"admin\", \"name\": { \"familyName\": \"User\", \"givenName\": \"Admin\", \"middleName\": \"Admin\", \"honorificPrefix\": null, \"honorificSuffix\": null, \"formatted\": \"Admin Admin User\" }, \"displayName\": \"Default Admin User\", \"nickName\": \"Admin\", \"profileUrl\": null, \"title\": \"MH Shakil\", \"userType\": null, \"preferredLanguage\": null, \"locale\": null, \"timezone\": null, \"active\": true, \"password\": null, \"emails\": [ { \"value\": \"admin@testjans.gluu.com\", \"display\": null, \"type\": null, \"primary\": false } ], \"phoneNumbers\": null, \"ims\": null, \"photos\": null, \"addresses\": null, \"groups\": [ { \"value\": \"60B7\", \"$ref\": \"https://testjans.gluu.com/jans-scim/restv1/v2/Groups/60B7\", \"display\": \"Jannsen Manager Group\", \"type\": \"direct\" } ], \"entitlements\": null, \"roles\": null, \"x509Certificates\": null, \"urn:ietf:params:scim:schemas:extension:gluu:2.0:User\": null, \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:User\" ], \"id\": \"18ca6089-42fb-410a-a5b5-c2631d75dc7d\", \"meta\": { \"resourceType\": \"User\", \"created\": null, \"lastModified\": \"2021-04-06T18:39:54.087Z\", \"location\": \"https://testjans.gluu.com/jans-scim/restv1/v2/Users/18ca6089-42fb-410a-a5b5-c2631d75dc7d\" } } ], \"schemas\": [ \"urn:ietf:params:scim:api:messages:2.0:ListResponse\" ], \"totalResults\": 1, \"startIndex\": 1, \"itemsPerPage\": 1 } Creating an User Resources # This operation can be performed to create user resources. Operation ID: create-user Description: Allows creating a User resource via POST (see section 3.3 of RFC 7644) Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] Schema: /components/schemas/UserResource As we see, to perform this operation we need to define the schema. So, let's get the schema of this operation. /opt/jans/jans-cli/scim-cli.py --schema /components/schemas/UserResource > /tmp/create-user.json root@testjans:~# cat /tmp/create-user.json { \"externalId\": null, \"userName\": null, \"name\": { \"familyName\": null, \"givenName\": null, \"middleName\": null, \"honorificPrefix\": null, \"honorificSuffix\": null, \"formatted\": null }, \"displayName\": null, \"nickName\": null, \"profileUrl\": null, \"title\": \"Vice President\", \"userType\": \"Contractor\", \"preferredLanguage\": \"en\", \"locale\": \"en-US\", \"timezone\": \"America/Los_Angeles\", \"active\": false, \"password\": null, \"emails\": { \"value\": \"gossow@nsfw.com\", \"display\": null, \"type\": \"work\", \"primary\": true }, \"phoneNumbers\": { \"value\": \"+1-555-555-8377\", \"display\": null, \"type\": \"fax\", \"primary\": true }, \"ims\": { \"value\": null, \"display\": null, \"type\": \"gtalk\", \"primary\": true }, \"photos\": { \"value\": \"https://pics.nsfw.com/gossow.png\", \"display\": null, \"type\": \"thumbnail\", \"primary\": true }, \"addresses\": { \"formatted\": null, \"streetAddress\": \"56 Acacia Avenue\", \"locality\": null, \"region\": null, \"postalCode\": null, \"country\": \"UK\", \"type\": \"home\", \"primary\": false }, \"groups\": { \"value\": \"180ee84f0671b1\", \"$ref\": \"https://nsfw.com/scim/restv1/v2/Groups/180ee84f0671b1\", \"display\": \"Cult managers\", \"type\": \"direct\" }, \"entitlements\": { \"value\": \"Stakeholder\", \"display\": null, \"type\": null, \"primary\": false }, \"roles\": { \"value\": \"Project manager\", \"display\": null, \"type\": null, \"primary\": false }, \"x509Certificates\": { \"value\": null, \"display\": null, \"type\": null, \"primary\": true }, \"urn:ietf:params:scim:schemas:extension:gluu:2.0:User\": {}, \"schemas\": [], \"id\": null, \"meta\": { \"resourceType\": null, \"created\": null, \"lastModified\": null, \"location\": null } } Now it's pretty simple. Fill each of this information, you may skip some of this properties as well. If you look at the schema, some of the properties are already filled with some random value. You can modify them as well or ignore them. let's modify this schema: nano /tmp/create-user.json Finally use below command line, to create an user resources. /opt/jans/jans-cli/scim-cli.py --operation-id create-user --data /tmp/create-user.json It will generate user inum value, metadata and will be added in user resources: Getting access token for scope https://jans.io/scim/users.write Server Response: { \"externalId\": null, \"userName\": \"mhosen\", \"name\": { \"familyName\": \"mobarak\", \"givenName\": \"mobarak\", \"middleName\": null, \"honorificPrefix\": null, \"honorificSuffix\": null, \"formatted\": \"mobarak mobarak\" }, \"displayName\": \"mobarak\", \"nickName\": null, \"profileUrl\": null, \"title\": \"Vice President\", \"userType\": \"Contractor\", \"preferredLanguage\": \"en\", \"locale\": \"en-US\", \"timezone\": \"America/Los_Angeles\", \"active\": true, \"password\": null, \"emails\": null, \"phoneNumbers\": null, \"ims\": null, \"photos\": null, \"addresses\": null, \"groups\": null, \"entitlements\": null, \"roles\": null, \"x509Certificates\": null, \"urn:ietf:params:scim:schemas:extension:gluu:2.0:User\": null, \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:User\" ], \"id\": \"7034663f-dc43-4f8c-8074-e8e75cae9c96\", \"meta\": { \"resourceType\": \"User\", \"created\": \"2021-04-17T14:54:30.430Z\", \"lastModified\": \"2021-04-17T14:54:30.430Z\", \"location\": \"https://testjans.gluu.org/jans-scim/restv1/v2/Users/7034663f-dc43-4f8c-8074-e8e75cae9c96\" } } root@testjans:~#","title":"SCIM User Resources"},{"location":"admin/config-guide/user-config/#user-resources","text":"Prerequisite: Know how to use the Janssen CLI in command-line mode The first thing is to do, Let's get some information for the following task: /opt/jans/jans-cli/scim-cli.py --info User In retrun we get, root@testjans:~# /opt/jans/jans-cli/scim-cli.py --info User Operation ID: get-users Description: Query User resources (see section 3.4.2 of RFC 7644) Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] filter: An expression specifying the search criteria. See section 3.4.2.2 of RFC 7644 [string] startIndex: The 1-based index of the first query result [integer] count: Specifies the desired maximum number of query results per page [integer] sortBy: The attribute whose value will be used to order the returned responses [string] sortOrder: Order in which the sortBy param is applied. Allowed values are \"ascending\" and \"descending\" [string] Operation ID: create-user Description: Allows creating a User resource via POST (see section 3.3 of RFC 7644) Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] Schema: /components/schemas/UserResource Schema: /components/schemas/UserResource Operation ID: get-user-by-id Description: Retrieves a User resource by Id (see section 3.4.1 of RFC 7644) url-suffix: id Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] id: No description is provided for this parameter [string] Operation ID: update-user-by-id Description: Updates a User resource (see section 3.5.1 of RFC 7644). Update works in a replacement fashion&amp;#58; every attribute value found in the payload sent will replace the one in the existing resource representation. Attributes not passed in the payload will be left intact. url-suffix: id Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] id: No description is provided for this parameter [string] Schema: /components/schemas/UserResource Schema: /components/schemas/UserResource Operation ID: delete-user-by-id Description: Deletes a user resource url-suffix: id Parameters: id: Identifier of the resource to delete [string] Operation ID: patch-user-by-id Description: Updates one or more attributes of a User resource using a sequence of additions, removals, and replacements operations. See section 3.5.2 of RFC 7644 url-suffix: id Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] id: No description is provided for this parameter [string] Schema: /components/schemas/PatchRequest Schema: /components/schemas/PatchRequest Operation ID: search-user Description: Query User resources (see section 3.4.2 of RFC 7644) Schema: /components/schemas/SearchRequest Schema: /components/schemas/SearchRequest To get sample schema type /opt/jans/jans-cli/scim-cli.py --schema <schma>, for example /opt/jans/jans-cli/scim-cli.py","title":"User Resources"},{"location":"admin/config-guide/user-config/#find-users-list","text":"This operation is used to get list of the users and its properties. The command line is: /opt/jans/jans-cli/scim-cli.py --operation-id get-users By default, This will return all of the users and their properties. root@testjans:~# /opt/jans/jans-cli/scim-cli.py --operation-id get-users Getting access token for scope https://jans.io/scim/users.read { \"Resources\": [ { \"externalId\": null, \"userName\": \"admin\", \"name\": { \"familyName\": \"User\", \"givenName\": \"Admin\", \"middleName\": \"Admin\", \"honorificPrefix\": null, \"honorificSuffix\": null, \"formatted\": \"Admin Admin User\" }, \"displayName\": \"Default Admin User\", \"nickName\": \"Admin\", \"profileUrl\": null, \"title\": \"MH Shakil\", \"userType\": null, \"preferredLanguage\": null, \"locale\": null, \"timezone\": null, \"active\": true, \"password\": null, \"emails\": [ { \"value\": \"admin@testjans.gluu.com\", \"display\": null, \"type\": null, \"primary\": false } ], \"phoneNumbers\": null, \"ims\": null, \"photos\": null, \"addresses\": null, \"groups\": [ { \"value\": \"60B7\", \"$ref\": \"https://testjans.gluu.com/jans-scim/restv1/v2/Groups/60B7\", \"display\": \"Jannsen Manager Group\", \"type\": \"direct\" } ], \"entitlements\": null, \"roles\": null, \"x509Certificates\": null, \"urn:ietf:params:scim:schemas:extension:gluu:2.0:User\": null, \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:User\" ], \"id\": \"18ca6089-42fb-410a-a5b5-c2631d75dc7d\", \"meta\": { \"resourceType\": \"User\", \"created\": null, \"lastModified\": \"2021-04-06T18:39:54.087Z\", \"location\": \"https://testjans.gluu.com/jans-scim/restv1/v2/Users/18ca6089-42fb-410a-a5b5-c2631d75dc7d\" } } ], \"schemas\": [ \"urn:ietf:params:scim:api:messages:2.0:ListResponse\" ], \"totalResults\": 1, \"startIndex\": 1, \"itemsPerPage\": 1 } It also supports parameters for the advanced search. Those parameters are: 1. attributes 2. excludeAttributes 3. filter 4. count [ define maximum number of query ] 5. sortBy [ attribute ] 6. sortOrder [ 'ascending', 'descending' ] This is an example with endpoint-args : /opt/jans/jans-cli/scim-cli.py --operation-id get-users --endpoint-args count:1 It returns as below: Getting access token for scope https://jans.io/scim/users.read Calling with params count=1 { \"Resources\": [ { \"externalId\": null, \"userName\": \"admin\", \"name\": { \"familyName\": \"User\", \"givenName\": \"Admin\", \"middleName\": \"Admin\", \"honorificPrefix\": null, \"honorificSuffix\": null, \"formatted\": \"Admin Admin User\" }, \"displayName\": \"Default Admin User\", \"nickName\": \"Admin\", \"profileUrl\": null, \"title\": \"MH Shakil\", \"userType\": null, \"preferredLanguage\": null, \"locale\": null, \"timezone\": null, \"active\": true, \"password\": null, \"emails\": [ { \"value\": \"admin@testjans.gluu.com\", \"display\": null, \"type\": null, \"primary\": false } ], \"phoneNumbers\": null, \"ims\": null, \"photos\": null, \"addresses\": null, \"groups\": [ { \"value\": \"60B7\", \"$ref\": \"https://testjans.gluu.com/jans-scim/restv1/v2/Groups/60B7\", \"display\": \"Jannsen Manager Group\", \"type\": \"direct\" } ], \"entitlements\": null, \"roles\": null, \"x509Certificates\": null, \"urn:ietf:params:scim:schemas:extension:gluu:2.0:User\": null, \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:User\" ], \"id\": \"18ca6089-42fb-410a-a5b5-c2631d75dc7d\", \"meta\": { \"resourceType\": \"User\", \"created\": null, \"lastModified\": \"2021-04-06T18:39:54.087Z\", \"location\": \"https://testjans.gluu.com/jans-scim/restv1/v2/Users/18ca6089-42fb-410a-a5b5-c2631d75dc7d\" } } ], \"schemas\": [ \"urn:ietf:params:scim:api:messages:2.0:ListResponse\" ], \"totalResults\": 1, \"startIndex\": 1, \"itemsPerPage\": 1 }","title":"Find Users List"},{"location":"admin/config-guide/user-config/#creating-an-user-resources","text":"This operation can be performed to create user resources. Operation ID: create-user Description: Allows creating a User resource via POST (see section 3.3 of RFC 7644) Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] Schema: /components/schemas/UserResource As we see, to perform this operation we need to define the schema. So, let's get the schema of this operation. /opt/jans/jans-cli/scim-cli.py --schema /components/schemas/UserResource > /tmp/create-user.json root@testjans:~# cat /tmp/create-user.json { \"externalId\": null, \"userName\": null, \"name\": { \"familyName\": null, \"givenName\": null, \"middleName\": null, \"honorificPrefix\": null, \"honorificSuffix\": null, \"formatted\": null }, \"displayName\": null, \"nickName\": null, \"profileUrl\": null, \"title\": \"Vice President\", \"userType\": \"Contractor\", \"preferredLanguage\": \"en\", \"locale\": \"en-US\", \"timezone\": \"America/Los_Angeles\", \"active\": false, \"password\": null, \"emails\": { \"value\": \"gossow@nsfw.com\", \"display\": null, \"type\": \"work\", \"primary\": true }, \"phoneNumbers\": { \"value\": \"+1-555-555-8377\", \"display\": null, \"type\": \"fax\", \"primary\": true }, \"ims\": { \"value\": null, \"display\": null, \"type\": \"gtalk\", \"primary\": true }, \"photos\": { \"value\": \"https://pics.nsfw.com/gossow.png\", \"display\": null, \"type\": \"thumbnail\", \"primary\": true }, \"addresses\": { \"formatted\": null, \"streetAddress\": \"56 Acacia Avenue\", \"locality\": null, \"region\": null, \"postalCode\": null, \"country\": \"UK\", \"type\": \"home\", \"primary\": false }, \"groups\": { \"value\": \"180ee84f0671b1\", \"$ref\": \"https://nsfw.com/scim/restv1/v2/Groups/180ee84f0671b1\", \"display\": \"Cult managers\", \"type\": \"direct\" }, \"entitlements\": { \"value\": \"Stakeholder\", \"display\": null, \"type\": null, \"primary\": false }, \"roles\": { \"value\": \"Project manager\", \"display\": null, \"type\": null, \"primary\": false }, \"x509Certificates\": { \"value\": null, \"display\": null, \"type\": null, \"primary\": true }, \"urn:ietf:params:scim:schemas:extension:gluu:2.0:User\": {}, \"schemas\": [], \"id\": null, \"meta\": { \"resourceType\": null, \"created\": null, \"lastModified\": null, \"location\": null } } Now it's pretty simple. Fill each of this information, you may skip some of this properties as well. If you look at the schema, some of the properties are already filled with some random value. You can modify them as well or ignore them. let's modify this schema: nano /tmp/create-user.json Finally use below command line, to create an user resources. /opt/jans/jans-cli/scim-cli.py --operation-id create-user --data /tmp/create-user.json It will generate user inum value, metadata and will be added in user resources: Getting access token for scope https://jans.io/scim/users.write Server Response: { \"externalId\": null, \"userName\": \"mhosen\", \"name\": { \"familyName\": \"mobarak\", \"givenName\": \"mobarak\", \"middleName\": null, \"honorificPrefix\": null, \"honorificSuffix\": null, \"formatted\": \"mobarak mobarak\" }, \"displayName\": \"mobarak\", \"nickName\": null, \"profileUrl\": null, \"title\": \"Vice President\", \"userType\": \"Contractor\", \"preferredLanguage\": \"en\", \"locale\": \"en-US\", \"timezone\": \"America/Los_Angeles\", \"active\": true, \"password\": null, \"emails\": null, \"phoneNumbers\": null, \"ims\": null, \"photos\": null, \"addresses\": null, \"groups\": null, \"entitlements\": null, \"roles\": null, \"x509Certificates\": null, \"urn:ietf:params:scim:schemas:extension:gluu:2.0:User\": null, \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:User\" ], \"id\": \"7034663f-dc43-4f8c-8074-e8e75cae9c96\", \"meta\": { \"resourceType\": \"User\", \"created\": \"2021-04-17T14:54:30.430Z\", \"lastModified\": \"2021-04-17T14:54:30.430Z\", \"location\": \"https://testjans.gluu.org/jans-scim/restv1/v2/Users/7034663f-dc43-4f8c-8074-e8e75cae9c96\" } } root@testjans:~#","title":"Creating an User Resources"},{"location":"admin/config-guide/config-tools/curl-guide/","tags":["administration","configuration","tools","cli","curl"],"text":"Most useful configurations and operations on Jans server using CURL # Configuring the Janssen server # To use CURL commands and configure Janssen's Authorization server, you need to have an access token of \"Config-API\" (which is an RP of Jans-auth server). Configurations to the AS can be done only through \"The Config-API client (RP)\". Obtaining an Access token # All commands to configure the AS are protected by an Access token. According to the use case, you must specify the scope for which the access token has been requested. For the client_id and client_secret, contact your administrator. Template curl -u \"client_inum:client_secret\" https://<your.jans.server>/jans-auth/restv1/token \\ -d \"grant_type=client_credentials&scope=put_scope_name_here\" Example : To modify a custom script, you need to request an access token using the scope scope=https://jans.io/oauth/config/scripts.write curl -u \"put_client_id_here:put_config_api_client_secret_here\" https://<your.jans.server>/jans-auth/restv1/token \\ -d \"grant_type=client_credentials&scope=https://jans.io/oauth/config/scripts.write\" Enable an authentication script # Steps # Obtain a token, use scope https://jans.io/oauth/config/scripts.write curl -u \"put_client_id_here:put_config_api_client_secret_here\" https://<your.jans.server>/jans-auth/restv1/token \\ -d \"grant_type=client_credentials&scope=https://jans.io/oauth/config/scripts.write\" Enable the script curl https://<your.jans.server>/jans-config-api/api/v1/config/scripts/name/name_of_the_script \\ -H \"Authorization: Bearer put_access_token_here\" Examples of name_of_the_script ( Authentication methods that are present in the Janssen server.) Name of the script smpp otp duo fido2 super_gluu twilio_sms smpp otp duo fido2 super_gluu Client creation # Creating a client with minimal upfront configuration requires only redirectUris in following format. Add following content in a text file and save it as client.json. { \"redirectUris\" : [ \"http://localhost:8080\" ] } In place of http://localhost:8080 uri used above, any valid redirect URI can be used. To provide full client configuration at the time of creation, Download and use this json format , update the values and save it as client.json. Few important fields to populate are scope , responseTypes , redirectUris (The only mandatory field), grantTypes . If there is a need to update the attributes of the client after creation, then make sure that the client is created with grantTypes list having client_credentials grant type as well. Run curl command curl -X POST https://my.jans.server/jans-auth/restv1/register \\ -H \"Content-Type: application/json\" -d @/some/directory/client.json If client is created successfully, response similar to below will be received: { \"allow_spontaneous_scopes\" : false , \"application_type\" : \"web\" , \"rpt_as_jwt\" : false , \"registration_client_uri\" : \"https://my.jans.server/jans-auth/restv1/register?client_id=994ec0a7-1143-456c-85ca-66ba592d7f9a\" , \"tls_client_auth_subject_dn\" : \"\" , \"run_introspection_script_before_jwt_creation\" : false , \"registration_access_token\" : \"d34f30ff-ae31-4760-8b67-ef071ba9ee68\" , \"client_id\" : \"994ec0a7-1143-456c-85ca-66ba592d7f9a\" , \"token_endpoint_auth_method\" : \"client_secret_basic\" , \"scope\" : \"openid profile permission https://jans.io/auth/ssa.portal uma_protection work_phone phone address test https://jans.io/auth/ssa.admin user_name email clientinfo device_sso org_name https://jans.io/auth/ssa.developer offline_access\" , \"client_secret\" : \"da4c17de-b6bc-4f25-b642-4c7b887c7860\" , \"client_id_issued_at\" : 1672221633 , \"backchannel_logout_uri\" : [], \"backchannel_logout_session_required\" : false , \"par_lifetime\" : 600 , \"spontaneous_scopes\" : [], \"id_token_signed_response_alg\" : \"RS256\" , \"access_token_as_jwt\" : false , \"grant_types\" : [ \"authorization_code\" , \"refresh_token\" ], \"subject_type\" : \"pairwise\" , \"keep_client_authorization_after_expiration\" : false , \"require_par\" : false , \"redirect_uris_regex\" : \"\" , \"additional_audience\" : [], \"frontchannel_logout_session_required\" : false , \"client_secret_expires_at\" : 1672308033 , \"access_token_signing_alg\" : \"RS256\" , \"response_types\" : [ \"code\" ] } Response contains client_id and client_secret apart from other client configuration details. Get Client Details # Obtain an Access Token with scope https://jans.io/oauth/config/openid/clients.readonly . curl -u \"put_client_id_here:put_config_api_client_secret_here\" https://<your.jans.server>/jans-auth/restv1/token \\ -d \"grant_type=client_credentials&scope=https://jans.io/oauth/config/openid/clients.readonly\" Obtain client information using: curl -X GET https://my.jans.server/jans-config-api/api/v1/openid/clients/client-s_inum_for_which_scope_to_be_added -H \"Authorization: Bearer put_access_token_here\" This will return JSON response similar to the one below. { \"dn\" : \"inum=994ec0a7-1143-456c-85ca-66ba592d7f9a,ou=clients,o=jans\" , \"expirationDate\" : \"2022-12-29T10:00:33\" , \"deletable\" : true , \"clientSecret\" : \"5Mlvuh0JRwl/WcpiUNGGXjtDO4+SprNBjiVFFcWqWB4gu7gYxqcSMw==\" , \"frontChannelLogoutSessionRequired\" : false , \"redirectUris\" :[ \"http://localhost:8080\" ], \"responseTypes\" :[ \"code\" ], \"grantTypes\" :[ \"authorization_code\" , \"refresh_token\" , \"client_credentials\" ], \"applicationType\" : \"web\" , \"clientName\" : \"dd-test-client\" , \"clientNameLocalized\" :{ }, \"logoUriLocalized\" :{ }, \"clientUriLocalized\" :{ }, \"policyUriLocalized\" :{ }, \"tosUriLocalized\" :{ }, \"subjectType\" : \"pairwise\" , \"idTokenSignedResponseAlg\" : \"RS256\" , \"tokenEndpointAuthMethod\" : \"client_secret_basic\" , \"scopes\" :[ \"inum=F0C4,ou=scopes,o=jans\" , \"inum=43F1,ou=scopes,o=jans\" , \"inum=C4F5,ou=scopes,o=jans\" , \"inum=SSA1-PTL1,ou=scopes,o=jans\" , \"inum=6D99,ou=scopes,o=jans\" , \"inum=7D02,ou=scopes,o=jans\" , \"inum=D491,ou=scopes,o=jans\" , \"inum=C17A,ou=scopes,o=jans\" , \"inum=0465-1DEA,ou=scopes,o=jans\" , \"inum=SSA1-AD01,ou=scopes,o=jans\" , \"inum=10B2,ou=scopes,o=jans\" , \"inum=764C,ou=scopes,o=jans\" , \"inum=341A,ou=scopes,o=jans\" , \"inum=C4F8,ou=scopes,o=jans\" , \"inum=7D01,ou=scopes,o=jans\" , \"inum=SSA1-DEV1,ou=scopes,o=jans\" , \"inum=C4F6,ou=scopes,o=jans\" ], \"trustedClient\" : false , \"persistClientAuthorizations\" : true , \"includeClaimsInIdToken\" : false , \"customAttributes\" :[ ], \"customObjectClasses\" :[ \"top\" ], \"rptAsJwt\" : false , \"accessTokenAsJwt\" : false , \"accessTokenSigningAlg\" : \"RS256\" , \"disabled\" : false , \"attributes\" :{ \"runIntrospectionScriptBeforeJwtCreation\" : false , \"keepClientAuthorizationAfterExpiration\" : false , \"allowSpontaneousScopes\" : false , \"backchannelLogoutSessionRequired\" : false , \"parLifetime\" : 600 , \"requirePar\" : false , \"jansDefaultPromptLogin\" : false , \"minimumAcrLevel\" : -1 }, \"backchannelTokenDeliveryMode\" : \"poll\" , \"backchannelUserCodeParameter\" : false , \"displayName\" : \"dd-test-client\" , \"authenticationMethod\" : \"client_secret_basic\" , \"baseDn\" : \"inum=994ec0a7-1143-456c-85ca-66ba592d7f9a,ou=clients,o=jans\" , \"inum\" : \"994ec0a7-1143-456c-85ca-66ba592d7f9a\" } Add New Scope to Client # To the above client, lets append the profile, so the scope attrib should now have value \"openid user_name profile\"`. This new value will be patched onto the client. Obtain an Access Token with scope https://jans.io/oauth/config/openid/clients.write curl -u \"put_client_id_here:put_config_api_client_secret_here\" https://<your.jans.server>/jans-auth/restv1/token \\ -d \"grant_type=client_credentials&scope=https://jans.io/oauth/config/openid/clients.write\" Patch the new scope for the client curl -X PATCH -k -H 'Content-Type: application/json-patch+json' \\ -i 'https://my.jans.server/jans-config-api/api/v1/openid/clients/put_client_inum_here' \\ -H \"Authorization: Bearer put_access_token_here\" --data '[ { \"op\": \"add\", \"path\": \"/scope\", \"value\": \"openid user_name profile\" } ]' Add OpenID scope and map to database attribute # Obtain access token curl -k -u \"put_client_id:put_client_secret\" https://jans-ui.jans.io/jans-auth/restv1/token \\ -d \"grant_type=client_credentials&scope=https://jans.io/oauth/config/scopes.write\" Build json on similar lines { \"dn\": \"string\", \"inum\": \"string\", \"displayName\": \"string\", \"id\": \"string\", \"iconUrl\": \"string\", \"description\": \"string\", \"scopeType\": \"openid\", \"claims\": [ \"string\" ], \"defaultScope\": true, \"groupClaims\": true, \"dynamicScopeScripts\": [ \"string\" ], \"umaAuthorizationPolicies\": [ \"string\" ], \"attributes\": { \"spontaneousClientId\": \"string\", \"spontaneousClientScopes\": [ \"string\" ], \"showInConfigurationEndpoint\": true }, \"umaType\": false, \"deletable\": false, \"expirationDate\": \"2022-07-26\" } Run curl. Note the claims field which maps to the database attrib curl -k -X POST https://jans-ui.jans.io/jans-config-api/api/v1/scopes -H \"Content-Type: application/json\" -H \"Authorization: Bearer use_bearer_token_here\" --data '{ \"dn\": \"inum=AAC1,ou=scopes,o=jans\", \"inum\": \"AAC1\", \"displayName\": \"website\", \"id\": \"website\", \"description\": \"website\", \"scopeType\": \"openid\", \"claims\": [\"website\"], \"umaType\": false, \"deletable\": false }' Using the Janssen server # Accessing OpenID Discovery endpoint / Well-known endpoint # curl https://jans-ui.jans.io/.well-known/openid-configuration Client Credentials Flow # curl -k -u \"put_client_id:put_client_secret\" https://jans-ui.jans.io/jans-auth/restv1/token \\ -d \"grant_type=client_credentials&scope=https://jans.io/oauth/config/scopes.write\" Authorization code flow # Steps: On a browser type https://my.jans.server/jans-auth/restv1/authorize?redirect_uri=https://my-redirect-app:8080&client_id=Put_client_id_here&scope=username+openid&response_type=code Based on the default authentication method set, the user will be presented with credentials for login. The OpenID Provider (Gluu Server) verifies the user\u2019s identity and authenticates the user. In the back channel the following steps take place : The OpenID Provider (Gluu Server) sends the user back to the application with an authorization code. The application sends the code to the Token Endpoint to receive an Access Token and ID Token in the response. The application uses the ID Token to authorize the user. At this point the application/RP can access the UserInfo endpoint for claims. Device Authorization code flow # Client_id that is used in the curl command below should have grant_type urn:ietf:params:oauth:grant-type:device_code Call the Device Authorization Endpoint : curl -k -u \"client_id_here:client_secret_here\" https://jans-ui.jans.io/jans-auth/restv1/device_authorization \\ -d scope=openid+profile+email+offline_access\" Response received will be like this { \"user_code\": \"HJDN-BMHQ\", \"device_code\": \"b8a5e5e6b1c10506af4f4bbb5400ca2587dcfe44974d7e62\", \"interval\": 5, \"verification_uri_complete\": \"https://jans-ui.jans.io/device-code?user_code=HJDN-BMHQ\", \"verification_uri\": \"https://jans-ui.jans.io/device-code\", \"expires_in\": 1800 } User should visit the verification_uri link on a browser and enter the user_code . Until the user to activates the device, begin polling token URL to request an Access Token. Use interval from step 2 as the polling interval. curl -k -u \"client_id:put_client_secret\" https://jans-ui.jans.io/jans-auth/restv1/token \\ -d \"grant_type=client_credentials&grant_type=urn:ietf:params:oauth:grant-type:device_code&device_code=YOUR_DEVICE_CODE&client_id=YOUR_CLIENT_ID\"","title":"Most useful configurations and operations on Jans server using CURL"},{"location":"admin/config-guide/config-tools/curl-guide/#most-useful-configurations-and-operations-on-jans-server-using-curl","text":"","title":"Most useful configurations and operations on Jans server using CURL"},{"location":"admin/config-guide/config-tools/curl-guide/#configuring-the-janssen-server","text":"To use CURL commands and configure Janssen's Authorization server, you need to have an access token of \"Config-API\" (which is an RP of Jans-auth server). Configurations to the AS can be done only through \"The Config-API client (RP)\".","title":"Configuring the Janssen server"},{"location":"admin/config-guide/config-tools/curl-guide/#obtaining-an-access-token","text":"All commands to configure the AS are protected by an Access token. According to the use case, you must specify the scope for which the access token has been requested. For the client_id and client_secret, contact your administrator. Template curl -u \"client_inum:client_secret\" https://<your.jans.server>/jans-auth/restv1/token \\ -d \"grant_type=client_credentials&scope=put_scope_name_here\" Example : To modify a custom script, you need to request an access token using the scope scope=https://jans.io/oauth/config/scripts.write curl -u \"put_client_id_here:put_config_api_client_secret_here\" https://<your.jans.server>/jans-auth/restv1/token \\ -d \"grant_type=client_credentials&scope=https://jans.io/oauth/config/scripts.write\"","title":"Obtaining an Access token"},{"location":"admin/config-guide/config-tools/curl-guide/#enable-an-authentication-script","text":"","title":"Enable an authentication script"},{"location":"admin/config-guide/config-tools/curl-guide/#steps","text":"Obtain a token, use scope https://jans.io/oauth/config/scripts.write curl -u \"put_client_id_here:put_config_api_client_secret_here\" https://<your.jans.server>/jans-auth/restv1/token \\ -d \"grant_type=client_credentials&scope=https://jans.io/oauth/config/scripts.write\" Enable the script curl https://<your.jans.server>/jans-config-api/api/v1/config/scripts/name/name_of_the_script \\ -H \"Authorization: Bearer put_access_token_here\" Examples of name_of_the_script ( Authentication methods that are present in the Janssen server.) Name of the script smpp otp duo fido2 super_gluu twilio_sms smpp otp duo fido2 super_gluu","title":"Steps"},{"location":"admin/config-guide/config-tools/curl-guide/#client-creation","text":"Creating a client with minimal upfront configuration requires only redirectUris in following format. Add following content in a text file and save it as client.json. { \"redirectUris\" : [ \"http://localhost:8080\" ] } In place of http://localhost:8080 uri used above, any valid redirect URI can be used. To provide full client configuration at the time of creation, Download and use this json format , update the values and save it as client.json. Few important fields to populate are scope , responseTypes , redirectUris (The only mandatory field), grantTypes . If there is a need to update the attributes of the client after creation, then make sure that the client is created with grantTypes list having client_credentials grant type as well. Run curl command curl -X POST https://my.jans.server/jans-auth/restv1/register \\ -H \"Content-Type: application/json\" -d @/some/directory/client.json If client is created successfully, response similar to below will be received: { \"allow_spontaneous_scopes\" : false , \"application_type\" : \"web\" , \"rpt_as_jwt\" : false , \"registration_client_uri\" : \"https://my.jans.server/jans-auth/restv1/register?client_id=994ec0a7-1143-456c-85ca-66ba592d7f9a\" , \"tls_client_auth_subject_dn\" : \"\" , \"run_introspection_script_before_jwt_creation\" : false , \"registration_access_token\" : \"d34f30ff-ae31-4760-8b67-ef071ba9ee68\" , \"client_id\" : \"994ec0a7-1143-456c-85ca-66ba592d7f9a\" , \"token_endpoint_auth_method\" : \"client_secret_basic\" , \"scope\" : \"openid profile permission https://jans.io/auth/ssa.portal uma_protection work_phone phone address test https://jans.io/auth/ssa.admin user_name email clientinfo device_sso org_name https://jans.io/auth/ssa.developer offline_access\" , \"client_secret\" : \"da4c17de-b6bc-4f25-b642-4c7b887c7860\" , \"client_id_issued_at\" : 1672221633 , \"backchannel_logout_uri\" : [], \"backchannel_logout_session_required\" : false , \"par_lifetime\" : 600 , \"spontaneous_scopes\" : [], \"id_token_signed_response_alg\" : \"RS256\" , \"access_token_as_jwt\" : false , \"grant_types\" : [ \"authorization_code\" , \"refresh_token\" ], \"subject_type\" : \"pairwise\" , \"keep_client_authorization_after_expiration\" : false , \"require_par\" : false , \"redirect_uris_regex\" : \"\" , \"additional_audience\" : [], \"frontchannel_logout_session_required\" : false , \"client_secret_expires_at\" : 1672308033 , \"access_token_signing_alg\" : \"RS256\" , \"response_types\" : [ \"code\" ] } Response contains client_id and client_secret apart from other client configuration details.","title":"Client creation"},{"location":"admin/config-guide/config-tools/curl-guide/#get-client-details","text":"Obtain an Access Token with scope https://jans.io/oauth/config/openid/clients.readonly . curl -u \"put_client_id_here:put_config_api_client_secret_here\" https://<your.jans.server>/jans-auth/restv1/token \\ -d \"grant_type=client_credentials&scope=https://jans.io/oauth/config/openid/clients.readonly\" Obtain client information using: curl -X GET https://my.jans.server/jans-config-api/api/v1/openid/clients/client-s_inum_for_which_scope_to_be_added -H \"Authorization: Bearer put_access_token_here\" This will return JSON response similar to the one below. { \"dn\" : \"inum=994ec0a7-1143-456c-85ca-66ba592d7f9a,ou=clients,o=jans\" , \"expirationDate\" : \"2022-12-29T10:00:33\" , \"deletable\" : true , \"clientSecret\" : \"5Mlvuh0JRwl/WcpiUNGGXjtDO4+SprNBjiVFFcWqWB4gu7gYxqcSMw==\" , \"frontChannelLogoutSessionRequired\" : false , \"redirectUris\" :[ \"http://localhost:8080\" ], \"responseTypes\" :[ \"code\" ], \"grantTypes\" :[ \"authorization_code\" , \"refresh_token\" , \"client_credentials\" ], \"applicationType\" : \"web\" , \"clientName\" : \"dd-test-client\" , \"clientNameLocalized\" :{ }, \"logoUriLocalized\" :{ }, \"clientUriLocalized\" :{ }, \"policyUriLocalized\" :{ }, \"tosUriLocalized\" :{ }, \"subjectType\" : \"pairwise\" , \"idTokenSignedResponseAlg\" : \"RS256\" , \"tokenEndpointAuthMethod\" : \"client_secret_basic\" , \"scopes\" :[ \"inum=F0C4,ou=scopes,o=jans\" , \"inum=43F1,ou=scopes,o=jans\" , \"inum=C4F5,ou=scopes,o=jans\" , \"inum=SSA1-PTL1,ou=scopes,o=jans\" , \"inum=6D99,ou=scopes,o=jans\" , \"inum=7D02,ou=scopes,o=jans\" , \"inum=D491,ou=scopes,o=jans\" , \"inum=C17A,ou=scopes,o=jans\" , \"inum=0465-1DEA,ou=scopes,o=jans\" , \"inum=SSA1-AD01,ou=scopes,o=jans\" , \"inum=10B2,ou=scopes,o=jans\" , \"inum=764C,ou=scopes,o=jans\" , \"inum=341A,ou=scopes,o=jans\" , \"inum=C4F8,ou=scopes,o=jans\" , \"inum=7D01,ou=scopes,o=jans\" , \"inum=SSA1-DEV1,ou=scopes,o=jans\" , \"inum=C4F6,ou=scopes,o=jans\" ], \"trustedClient\" : false , \"persistClientAuthorizations\" : true , \"includeClaimsInIdToken\" : false , \"customAttributes\" :[ ], \"customObjectClasses\" :[ \"top\" ], \"rptAsJwt\" : false , \"accessTokenAsJwt\" : false , \"accessTokenSigningAlg\" : \"RS256\" , \"disabled\" : false , \"attributes\" :{ \"runIntrospectionScriptBeforeJwtCreation\" : false , \"keepClientAuthorizationAfterExpiration\" : false , \"allowSpontaneousScopes\" : false , \"backchannelLogoutSessionRequired\" : false , \"parLifetime\" : 600 , \"requirePar\" : false , \"jansDefaultPromptLogin\" : false , \"minimumAcrLevel\" : -1 }, \"backchannelTokenDeliveryMode\" : \"poll\" , \"backchannelUserCodeParameter\" : false , \"displayName\" : \"dd-test-client\" , \"authenticationMethod\" : \"client_secret_basic\" , \"baseDn\" : \"inum=994ec0a7-1143-456c-85ca-66ba592d7f9a,ou=clients,o=jans\" , \"inum\" : \"994ec0a7-1143-456c-85ca-66ba592d7f9a\" }","title":"Get Client Details"},{"location":"admin/config-guide/config-tools/curl-guide/#add-new-scope-to-client","text":"To the above client, lets append the profile, so the scope attrib should now have value \"openid user_name profile\"`. This new value will be patched onto the client. Obtain an Access Token with scope https://jans.io/oauth/config/openid/clients.write curl -u \"put_client_id_here:put_config_api_client_secret_here\" https://<your.jans.server>/jans-auth/restv1/token \\ -d \"grant_type=client_credentials&scope=https://jans.io/oauth/config/openid/clients.write\" Patch the new scope for the client curl -X PATCH -k -H 'Content-Type: application/json-patch+json' \\ -i 'https://my.jans.server/jans-config-api/api/v1/openid/clients/put_client_inum_here' \\ -H \"Authorization: Bearer put_access_token_here\" --data '[ { \"op\": \"add\", \"path\": \"/scope\", \"value\": \"openid user_name profile\" } ]'","title":"Add New Scope to Client"},{"location":"admin/config-guide/config-tools/curl-guide/#add-openid-scope-and-map-to-database-attribute","text":"Obtain access token curl -k -u \"put_client_id:put_client_secret\" https://jans-ui.jans.io/jans-auth/restv1/token \\ -d \"grant_type=client_credentials&scope=https://jans.io/oauth/config/scopes.write\" Build json on similar lines { \"dn\": \"string\", \"inum\": \"string\", \"displayName\": \"string\", \"id\": \"string\", \"iconUrl\": \"string\", \"description\": \"string\", \"scopeType\": \"openid\", \"claims\": [ \"string\" ], \"defaultScope\": true, \"groupClaims\": true, \"dynamicScopeScripts\": [ \"string\" ], \"umaAuthorizationPolicies\": [ \"string\" ], \"attributes\": { \"spontaneousClientId\": \"string\", \"spontaneousClientScopes\": [ \"string\" ], \"showInConfigurationEndpoint\": true }, \"umaType\": false, \"deletable\": false, \"expirationDate\": \"2022-07-26\" } Run curl. Note the claims field which maps to the database attrib curl -k -X POST https://jans-ui.jans.io/jans-config-api/api/v1/scopes -H \"Content-Type: application/json\" -H \"Authorization: Bearer use_bearer_token_here\" --data '{ \"dn\": \"inum=AAC1,ou=scopes,o=jans\", \"inum\": \"AAC1\", \"displayName\": \"website\", \"id\": \"website\", \"description\": \"website\", \"scopeType\": \"openid\", \"claims\": [\"website\"], \"umaType\": false, \"deletable\": false }'","title":"Add OpenID scope and map to database attribute"},{"location":"admin/config-guide/config-tools/curl-guide/#using-the-janssen-server","text":"","title":"Using the Janssen server"},{"location":"admin/config-guide/config-tools/curl-guide/#accessing-openid-discovery-endpoint-well-known-endpoint","text":"curl https://jans-ui.jans.io/.well-known/openid-configuration","title":"Accessing OpenID Discovery endpoint / Well-known endpoint"},{"location":"admin/config-guide/config-tools/curl-guide/#client-credentials-flow","text":"curl -k -u \"put_client_id:put_client_secret\" https://jans-ui.jans.io/jans-auth/restv1/token \\ -d \"grant_type=client_credentials&scope=https://jans.io/oauth/config/scopes.write\"","title":"Client Credentials Flow"},{"location":"admin/config-guide/config-tools/curl-guide/#authorization-code-flow","text":"Steps: On a browser type https://my.jans.server/jans-auth/restv1/authorize?redirect_uri=https://my-redirect-app:8080&client_id=Put_client_id_here&scope=username+openid&response_type=code Based on the default authentication method set, the user will be presented with credentials for login. The OpenID Provider (Gluu Server) verifies the user\u2019s identity and authenticates the user. In the back channel the following steps take place : The OpenID Provider (Gluu Server) sends the user back to the application with an authorization code. The application sends the code to the Token Endpoint to receive an Access Token and ID Token in the response. The application uses the ID Token to authorize the user. At this point the application/RP can access the UserInfo endpoint for claims.","title":"Authorization code flow"},{"location":"admin/config-guide/config-tools/curl-guide/#device-authorization-code-flow","text":"Client_id that is used in the curl command below should have grant_type urn:ietf:params:oauth:grant-type:device_code Call the Device Authorization Endpoint : curl -k -u \"client_id_here:client_secret_here\" https://jans-ui.jans.io/jans-auth/restv1/device_authorization \\ -d scope=openid+profile+email+offline_access\" Response received will be like this { \"user_code\": \"HJDN-BMHQ\", \"device_code\": \"b8a5e5e6b1c10506af4f4bbb5400ca2587dcfe44974d7e62\", \"interval\": 5, \"verification_uri_complete\": \"https://jans-ui.jans.io/device-code?user_code=HJDN-BMHQ\", \"verification_uri\": \"https://jans-ui.jans.io/device-code\", \"expires_in\": 1800 } User should visit the verification_uri link on a browser and enter the user_code . Until the user to activates the device, begin polling token URL to request an Access Token. Use interval from step 2 as the polling interval. curl -k -u \"client_id:put_client_secret\" https://jans-ui.jans.io/jans-auth/restv1/token \\ -d \"grant_type=client_credentials&grant_type=urn:ietf:params:oauth:grant-type:device_code&device_code=YOUR_DEVICE_CODE&client_id=YOUR_CLIENT_ID\"","title":"Device Authorization code flow"},{"location":"admin/config-guide/config-tools/scim-cli/","tags":["administration","configuration","tools","cli","scim"],"text":"SCIM-CLI # SCIM is a specification designed to reduce the complexity of user management operations by providing a common user schema and the patterns for exchanging such schema using HTTP in a platform-neutral fashion. The aim of SCIM is achieving interoperability, security, and scalability in the context of identity management. SCIM-CLI which is going to help on performing such SCIM operations on the Janssen Server with ease and more readability. It supports Command Line Mode .","title":"SCIM-CLI"},{"location":"admin/config-guide/config-tools/scim-cli/#scim-cli","text":"SCIM is a specification designed to reduce the complexity of user management operations by providing a common user schema and the patterns for exchanging such schema using HTTP in a platform-neutral fashion. The aim of SCIM is achieving interoperability, security, and scalability in the context of identity management. SCIM-CLI which is going to help on performing such SCIM operations on the Janssen Server with ease and more readability. It supports Command Line Mode .","title":"SCIM-CLI"},{"location":"admin/config-guide/config-tools/config-api/","tags":["administration","tools","config-api"],"text":"config-api # Overview # Jans Config Api provides a central place to manage and configure jans modules. It helps in configuring auth-server, users, fido2 and scim modules. Config API is a REST application that is developed using Weld 4.x (JSR-365) and JAX-RS. Its endpoints can be used to manage configuration and other properties of Jans Auth Server , which is an open-source OpenID Connect Provider (OP) and UMA Authorization Server (AS) If you want to learn more about Weld, please visit its website: https://weld.cdi-spec.org/ Packaging and running the application # The application can be packaged using ./mvnw package . It produces the jans-config-api.war file in the server/target directory. Be aware that all the dependencies are copied into the server/target/jans-config-api/WEB-INF/lib directory. Plugins # Jans Config API follow a flexible plugin architecture in which the new features can be added using extensions called plugins without altering the application itself. In this section, we will discuss the steps to develop and add plugins in Jans Config API. Refer here for more details. Endpoints protection # Config API endpoints are OAuth 2.0 protected. It supports simple bearer and JWT token. Learn more API endpoint protection using here . Monitoring # Config API module monitoring related details here .","title":"config-api"},{"location":"admin/config-guide/config-tools/config-api/#config-api","text":"","title":"config-api"},{"location":"admin/config-guide/config-tools/config-api/#overview","text":"Jans Config Api provides a central place to manage and configure jans modules. It helps in configuring auth-server, users, fido2 and scim modules. Config API is a REST application that is developed using Weld 4.x (JSR-365) and JAX-RS. Its endpoints can be used to manage configuration and other properties of Jans Auth Server , which is an open-source OpenID Connect Provider (OP) and UMA Authorization Server (AS) If you want to learn more about Weld, please visit its website: https://weld.cdi-spec.org/","title":"Overview"},{"location":"admin/config-guide/config-tools/config-api/#packaging-and-running-the-application","text":"The application can be packaged using ./mvnw package . It produces the jans-config-api.war file in the server/target directory. Be aware that all the dependencies are copied into the server/target/jans-config-api/WEB-INF/lib directory.","title":"Packaging and running the application"},{"location":"admin/config-guide/config-tools/config-api/#plugins","text":"Jans Config API follow a flexible plugin architecture in which the new features can be added using extensions called plugins without altering the application itself. In this section, we will discuss the steps to develop and add plugins in Jans Config API. Refer here for more details.","title":"Plugins"},{"location":"admin/config-guide/config-tools/config-api/#endpoints-protection","text":"Config API endpoints are OAuth 2.0 protected. It supports simple bearer and JWT token. Learn more API endpoint protection using here .","title":"Endpoints protection"},{"location":"admin/config-guide/config-tools/config-api/#monitoring","text":"Config API module monitoring related details here .","title":"Monitoring"},{"location":"admin/config-guide/config-tools/config-api/attribute/","tags":["administration","tools","config-api","attributes"],"text":"Attributes # Attributes are individual pieces of user data, like uid or email, that are required by applications in order to identify a user and grant access to protected resources. In OpenID Connect, these are called user claims. Listing existing attributes # GET / (gets list of attributes based on search parameters) ### Parameters > | name | param type | data type | type |default value | description | > |------------|-------------|----------------|-----------|--------------|---------------------------------------------------------------------------------| > | limit | query | integer | optional |50 |Search size - max size of the results to return | > | pattern | query | string | optional |N/A |Comma separated search patter. E.g. `pattern=edu`, `pattern=edu,locale,License` | > | status | query | string | optional |all |Search size - max size of the results to return | > | startIndex | query | integer | optional |1 |Index of the first query result | > | sortBy | query | string | optional |inum |Field whose value will be used to order the returned response | > | sortOrder | query | string | optional |ascending |Search size - max size of the results to return | ### Responses > | http code | content-type | response | > |---------------|-----------------------------------|---------------------------------------------------------------------| > | `200` | `application/json` | `Paginated result` | > | `401` | `application/json` | `{\"code\":\"401\",\"message\":\"Unauthorized\"}` | > | `500` | `application/json` | `{\"code\":\"500\",\"message\":\"Error msg\"}` | ### Example cURL > curl - k - i - H \"Accept: application/json\" - H \"Content-Type: application/json\" - H \"Authorization:Bearer 697479e0-e6f4-453d-bf7a-ddf31b53efba\" - X GET http : //my.jans.server/jans-config-api/api/v1/attributes?limit=5&pattern=edu,locale,carLicense&startIndex=1 ### Sample Response > { \"start\" : 0 , \"totalEntriesCount\" : 78 , \"entriesCount\" : 2 , \"entries\" : [ { \"dn\" : \"inum=08E2,ou=attributes,o=jans\" , \"selected\" : false , \"inum\" : \"08E2\" , \"name\" : \"departmentNumber\" , \"displayName\" : \"Department\" , \"description\" : \"Organizational Department\" , \"origin\" : \"jansCustomPerson\" , \"dataType\" : \"string\" , \"editType\" : [ \"admin\" ], \"viewType\" : [ \"user\" , \"admin\" ], \"claimName\" : \"department_number\" , \"status\" : \"inactive\" , \"saml1Uri\" : \"urn:mace:dir:attribute-def:departmentNumber\" , \"saml2Uri\" : \"urn:oid:2.16.840.1.113730.3.1.2\" , \"urn\" : \"urn:mace:dir:attribute-def:departmentNumber\" , \"oxMultiValuedAttribute\" : false , \"custom\" : false , \"requred\" : false , \"whitePagesCanView\" : false , \"adminCanEdit\" : true , \"userCanView\" : true , \"userCanEdit\" : false , \"adminCanAccess\" : true , \"adminCanView\" : true , \"userCanAccess\" : true , \"baseDn\" : \"inum=08E2,ou=attributes,o=jans\" }, { \"dn\" : \"inum=0C18,ou=attributes,o=jans\" , \"selected\" : false , \"inum\" : \"0C18\" , \"name\" : \"telephoneNumber\" , \"displayName\" : \"Home Telephone Number\" , \"description\" : \"Home Telephone Number\" , \"origin\" : \"jansCustomPerson\" , \"dataType\" : \"string\" , \"editType\" : [ \"user\" , \"admin\" ], \"viewType\" : [ \"user\" , \"admin\" ], \"claimName\" : \"phone_number\" , \"status\" : \"inactive\" , \"saml1Uri\" : \"urn:mace:dir:attribute-def:telephoneNumber\" , \"saml2Uri\" : \"urn:oid:2.5.4.20\" , \"urn\" : \"urn:mace:dir:attribute-def:phone_number\" , \"oxMultiValuedAttribute\" : false , \"custom\" : false , \"requred\" : false , \"whitePagesCanView\" : false , \"adminCanEdit\" : true , \"userCanView\" : true , \"userCanEdit\" : true , \"adminCanAccess\" : true , \"adminCanView\" : true , \"userCanAccess\" : true , \"baseDn\" : \"inum=0C18,ou=attributes,o=jans\" } } GET /{inum} (gets attribute based on inum) ### Parameters > | name | param type | data type | type |default value | description | > |------------|-------------|----------------|-----------|--------------|----------------------------------------| > | `inum` | path | string | required | NA | Attribute unique identifier | ### Responses > | http code | content-type | response | > |---------------|-----------------------------------|---------------------------------------------------------------------| > | `200` | `application/json ` | `attribute details` | > | `401` | `application/json` | `{\"code\":\"401\",\"message\":\"Unauthorized\"}` | > | `500` | `application/json` | `{\"code\":\"500\",\"message\":\"Error msg\"}` | ### Example cURL > curl - k - i - H \"Accept: application/json\" - H \"Content-Type: application/json\" - H \"Authorization:Bearer 697479e0-e6f4-453d-bf7a-ddf31b53efba\" - X GET http : //my.jans.server/jans-config-api/api/v1/attributes/08E2 ### Sample Response > { \"dn\" : \"inum=08E2,ou=attributes,o=jans\" , \"selected\" : false , \"inum\" : \"08E2\" , \"name\" : \"departmentNumber\" , \"displayName\" : \"Department\" , \"description\" : \"Organizational Department\" , \"origin\" : \"jansCustomPerson\" , \"dataType\" : \"string\" , \"editType\" : [ \"admin\" ], \"viewType\" : [ \"user\" , \"admin\" ], \"claimName\" : \"department_number\" , \"status\" : \"inactive\" , \"saml1Uri\" : \"urn:mace:dir:attribute-def:departmentNumber\" , \"saml2Uri\" : \"urn:oid:2.16.840.1.113730.3.1.2\" , \"urn\" : \"urn:mace:dir:attribute-def:departmentNumber\" , \"oxMultiValuedAttribute\" : false , \"custom\" : false , \"requred\" : false , \"whitePagesCanView\" : false , \"adminCanEdit\" : true , \"userCanView\" : true , \"userCanEdit\" : false , \"adminCanAccess\" : true , \"adminCanView\" : true , \"userCanAccess\" : true , \"baseDn\" : \"inum=08E2,ou=attributes,o=jans\" } Creating new attribute # POST /{inum} (creates a new attribute) ### Parameters > | name | param type | data type | type |default value | description | > |------------|-------------|----------------|-----------|--------------|----------------------------------------| > | None | request | object (JSON) | required | NA | Attribute json | ### Responses > | http code | content-type | response | > |---------------|-----------------------------------|---------------------------------------------------------------------| > | `201` | `application/json ` | `attribute details json` | > | `401` | `application/json` | `{\"code\":\"401\",\"message\":\"Unauthorized\"}` | > | `500` | `application/json` | `{\"code\":\"500\",\"message\":\"Error msg\"}` | ### Example cURL > curl - X POST - k - H 'Content-Type: application/json' - H 'Authorization: Bearer ba9b8810-7a2b-4e4a-a18a-689d7eacf7d1' - i 'https://my.jans.server/jans-config-api/api/v1/attributes' -- data @ post . json ### Sample Request > { \"adminCanAccess\" : true , \"adminCanEdit\" : true , \"adminCanView\" : true , \"custom\" : false , \"dataType\" : \"string\" , \"description\" : \"QAAdded Attribute\" , \"displayName\" : \"QAAdded Attribute\" , \"editType\" : [ \"admin\" , \"user\" ], \"name\" : \"qaattribute\" , \"origin\" : \"jansPerson\" , \"jansMultivaluedAttr\" : false , \"requred\" : false , \"status\" : \"active\" , \"urn\" : \"urn:mace:dir:attribute-def:qaattribute\" , \"userCanAccess\" : true , \"userCanEdit\" : true , \"userCanView\" : true , \"viewType\" : [ \"admin\" , \"user\" ], \"whitePagesCanView\" : false } Updating existing attribute # PUT /{inum} (updates an existing attribute) ### Parameters > | name | param type | data type | type |default value | description | > |------------|-------------|----------------|-----------|--------------|----------------------------------------| > | None | request | object (JSON) | required | NA | Attribute json | ### Responses > | http code | content-type | response | > |---------------|-----------------------------------|------------------------------------------------------------------------| > | `200` | `application/json ` | `attribute details` | > | `404` | `application/json` | `{\"code\":\"404\",\"message\":\"The requested doesn't exist\"}` | > | `401` | `application/json` | `{\"code\":\"401\",\"message\":\"Unauthorized\"}` | > | `500` | `application/json` | `{\"code\":\"500\",\"message\":\"Error msg\"}` | ### Example cURL > curl - X PUT - k - H 'Content-Type: application/json' - H 'Authorization: Bearer ba9b8810-7a2b-4e4a-a18a-689d7eacf7d1' - i 'https://my.jans.server/jans-config-api/api/v1/attributes' -- data @ put . json ### Sample Request > { \"dn\" : \"inum=08E2,ou=attributes,o=jans\" , \"selected\" : false , \"inum\" : \"08E2\" , \"name\" : \"departmentNumber\" , \"displayName\" : \"Department\" , \"description\" : \"Organizational Department\" , \"origin\" : \"jansCustomPerson\" , \"dataType\" : \"string\" , \"editType\" : [ \"admin\" ], \"viewType\" : [ \"user\" , \"admin\" ], \"claimName\" : \"department_number\" , \"status\" : \"inactive\" , \"saml1Uri\" : \"urn:mace:dir:attribute-def:departmentNumber\" , \"saml2Uri\" : \"urn:oid:2.16.840.1.113730.3.1.2\" , \"urn\" : \"urn:mace:dir:attribute-def:departmentNumber\" , \"oxMultiValuedAttribute\" : false , \"custom\" : false , \"requred\" : false , \"whitePagesCanView\" : false , \"adminCanEdit\" : true , \"userCanView\" : true , \"userCanEdit\" : false , \"adminCanAccess\" : true , \"adminCanView\" : true , \"userCanAccess\" : true , \"baseDn\" : \"inum=08E2,ou=attributes,o=jans\" } Patching existing attribute # PATCH /{inum} (patches an existing attribute) ### Parameters > | name | param type | data type | type |default value | description | > |------------|-------------|--------------------|-----------|--------------|----------------------------------------| > | inum | path | string | required | NA | Attribute unique identifier | > | None | request | json-patch object | required | NA | json-patch request | ### Responses > | http code | content-type | response | > |---------------|-----------------------------------|------------------------------------------------------------------------| > | `200` | `application/json ` | `attribute details` | > | `404` | `application/json` | `{\"code\":\"404\",\"message\":\"The requested doesn't exist\"}` | > | `401` | `application/json` | `{\"code\":\"401\",\"message\":\"Unauthorized\"}` | > | `500` | `application/json` | `{\"code\":\"500\",\"message\":\"Error msg\"}` | ### Example cURL > curl - X PATCH - k - H 'Content-Type: application/json-patch+json' - H 'Authorization: Bearer ba9b8810-7a2b-4e4a-a18a-689d7eacf7d1' - i 'https://my.jans.server/jans-config-api/api/v1/attributes/08E2' -- data @ patch . json ### Sample Request > [ { \"op\" : \"replace\" , \"path\" : \"/displayName\" , \"value\" : \"PatchCustomAttribute123\" } ] Deleting existing attribute # DELETE /{inum} (deletes an existing attribute) ### Parameters > | name | param type | data type | type |default value | description | > |------------|-------------|--------------------|-----------|--------------|----------------------------------------| > | inum | path | string | required | NA | Attribute unique identifier | ### Responses > | http code | content-type | response | > |---------------|-----------------------------------|------------------------------------------------------------------------| > | `204` | `application/json ` | `No Content` | > | `404` | `application/json` | `{\"code\":\"404\",\"message\":\"The requested doesn't exist\"}` | > | `401` | `application/json` | `{\"code\":\"401\",\"message\":\"Unauthorized\"}` | > | `500` | `application/json` | `{\"code\":\"500\",\"message\":\"Error msg\"}` | ### Example cURL > curl - X DELETE - k - H 'Content-Type: application/json' - H 'Authorization: Bearer ba9b8810-7a2b-4e4a-a18a-689d7eacf7d1' - i 'https://my.jans.server/jans-config-api/api/v1/attributes/08E2' ### Sample Request > None","title":"Attributes"},{"location":"admin/config-guide/config-tools/config-api/attribute/#attributes","text":"Attributes are individual pieces of user data, like uid or email, that are required by applications in order to identify a user and grant access to protected resources. In OpenID Connect, these are called user claims.","title":"Attributes"},{"location":"admin/config-guide/config-tools/config-api/attribute/#listing-existing-attributes","text":"GET / (gets list of attributes based on search parameters) ### Parameters > | name | param type | data type | type |default value | description | > |------------|-------------|----------------|-----------|--------------|---------------------------------------------------------------------------------| > | limit | query | integer | optional |50 |Search size - max size of the results to return | > | pattern | query | string | optional |N/A |Comma separated search patter. E.g. `pattern=edu`, `pattern=edu,locale,License` | > | status | query | string | optional |all |Search size - max size of the results to return | > | startIndex | query | integer | optional |1 |Index of the first query result | > | sortBy | query | string | optional |inum |Field whose value will be used to order the returned response | > | sortOrder | query | string | optional |ascending |Search size - max size of the results to return | ### Responses > | http code | content-type | response | > |---------------|-----------------------------------|---------------------------------------------------------------------| > | `200` | `application/json` | `Paginated result` | > | `401` | `application/json` | `{\"code\":\"401\",\"message\":\"Unauthorized\"}` | > | `500` | `application/json` | `{\"code\":\"500\",\"message\":\"Error msg\"}` | ### Example cURL > curl - k - i - H \"Accept: application/json\" - H \"Content-Type: application/json\" - H \"Authorization:Bearer 697479e0-e6f4-453d-bf7a-ddf31b53efba\" - X GET http : //my.jans.server/jans-config-api/api/v1/attributes?limit=5&pattern=edu,locale,carLicense&startIndex=1 ### Sample Response > { \"start\" : 0 , \"totalEntriesCount\" : 78 , \"entriesCount\" : 2 , \"entries\" : [ { \"dn\" : \"inum=08E2,ou=attributes,o=jans\" , \"selected\" : false , \"inum\" : \"08E2\" , \"name\" : \"departmentNumber\" , \"displayName\" : \"Department\" , \"description\" : \"Organizational Department\" , \"origin\" : \"jansCustomPerson\" , \"dataType\" : \"string\" , \"editType\" : [ \"admin\" ], \"viewType\" : [ \"user\" , \"admin\" ], \"claimName\" : \"department_number\" , \"status\" : \"inactive\" , \"saml1Uri\" : \"urn:mace:dir:attribute-def:departmentNumber\" , \"saml2Uri\" : \"urn:oid:2.16.840.1.113730.3.1.2\" , \"urn\" : \"urn:mace:dir:attribute-def:departmentNumber\" , \"oxMultiValuedAttribute\" : false , \"custom\" : false , \"requred\" : false , \"whitePagesCanView\" : false , \"adminCanEdit\" : true , \"userCanView\" : true , \"userCanEdit\" : false , \"adminCanAccess\" : true , \"adminCanView\" : true , \"userCanAccess\" : true , \"baseDn\" : \"inum=08E2,ou=attributes,o=jans\" }, { \"dn\" : \"inum=0C18,ou=attributes,o=jans\" , \"selected\" : false , \"inum\" : \"0C18\" , \"name\" : \"telephoneNumber\" , \"displayName\" : \"Home Telephone Number\" , \"description\" : \"Home Telephone Number\" , \"origin\" : \"jansCustomPerson\" , \"dataType\" : \"string\" , \"editType\" : [ \"user\" , \"admin\" ], \"viewType\" : [ \"user\" , \"admin\" ], \"claimName\" : \"phone_number\" , \"status\" : \"inactive\" , \"saml1Uri\" : \"urn:mace:dir:attribute-def:telephoneNumber\" , \"saml2Uri\" : \"urn:oid:2.5.4.20\" , \"urn\" : \"urn:mace:dir:attribute-def:phone_number\" , \"oxMultiValuedAttribute\" : false , \"custom\" : false , \"requred\" : false , \"whitePagesCanView\" : false , \"adminCanEdit\" : true , \"userCanView\" : true , \"userCanEdit\" : true , \"adminCanAccess\" : true , \"adminCanView\" : true , \"userCanAccess\" : true , \"baseDn\" : \"inum=0C18,ou=attributes,o=jans\" } } GET /{inum} (gets attribute based on inum) ### Parameters > | name | param type | data type | type |default value | description | > |------------|-------------|----------------|-----------|--------------|----------------------------------------| > | `inum` | path | string | required | NA | Attribute unique identifier | ### Responses > | http code | content-type | response | > |---------------|-----------------------------------|---------------------------------------------------------------------| > | `200` | `application/json ` | `attribute details` | > | `401` | `application/json` | `{\"code\":\"401\",\"message\":\"Unauthorized\"}` | > | `500` | `application/json` | `{\"code\":\"500\",\"message\":\"Error msg\"}` | ### Example cURL > curl - k - i - H \"Accept: application/json\" - H \"Content-Type: application/json\" - H \"Authorization:Bearer 697479e0-e6f4-453d-bf7a-ddf31b53efba\" - X GET http : //my.jans.server/jans-config-api/api/v1/attributes/08E2 ### Sample Response > { \"dn\" : \"inum=08E2,ou=attributes,o=jans\" , \"selected\" : false , \"inum\" : \"08E2\" , \"name\" : \"departmentNumber\" , \"displayName\" : \"Department\" , \"description\" : \"Organizational Department\" , \"origin\" : \"jansCustomPerson\" , \"dataType\" : \"string\" , \"editType\" : [ \"admin\" ], \"viewType\" : [ \"user\" , \"admin\" ], \"claimName\" : \"department_number\" , \"status\" : \"inactive\" , \"saml1Uri\" : \"urn:mace:dir:attribute-def:departmentNumber\" , \"saml2Uri\" : \"urn:oid:2.16.840.1.113730.3.1.2\" , \"urn\" : \"urn:mace:dir:attribute-def:departmentNumber\" , \"oxMultiValuedAttribute\" : false , \"custom\" : false , \"requred\" : false , \"whitePagesCanView\" : false , \"adminCanEdit\" : true , \"userCanView\" : true , \"userCanEdit\" : false , \"adminCanAccess\" : true , \"adminCanView\" : true , \"userCanAccess\" : true , \"baseDn\" : \"inum=08E2,ou=attributes,o=jans\" }","title":"Listing existing attributes"},{"location":"admin/config-guide/config-tools/config-api/attribute/#creating-new-attribute","text":"POST /{inum} (creates a new attribute) ### Parameters > | name | param type | data type | type |default value | description | > |------------|-------------|----------------|-----------|--------------|----------------------------------------| > | None | request | object (JSON) | required | NA | Attribute json | ### Responses > | http code | content-type | response | > |---------------|-----------------------------------|---------------------------------------------------------------------| > | `201` | `application/json ` | `attribute details json` | > | `401` | `application/json` | `{\"code\":\"401\",\"message\":\"Unauthorized\"}` | > | `500` | `application/json` | `{\"code\":\"500\",\"message\":\"Error msg\"}` | ### Example cURL > curl - X POST - k - H 'Content-Type: application/json' - H 'Authorization: Bearer ba9b8810-7a2b-4e4a-a18a-689d7eacf7d1' - i 'https://my.jans.server/jans-config-api/api/v1/attributes' -- data @ post . json ### Sample Request > { \"adminCanAccess\" : true , \"adminCanEdit\" : true , \"adminCanView\" : true , \"custom\" : false , \"dataType\" : \"string\" , \"description\" : \"QAAdded Attribute\" , \"displayName\" : \"QAAdded Attribute\" , \"editType\" : [ \"admin\" , \"user\" ], \"name\" : \"qaattribute\" , \"origin\" : \"jansPerson\" , \"jansMultivaluedAttr\" : false , \"requred\" : false , \"status\" : \"active\" , \"urn\" : \"urn:mace:dir:attribute-def:qaattribute\" , \"userCanAccess\" : true , \"userCanEdit\" : true , \"userCanView\" : true , \"viewType\" : [ \"admin\" , \"user\" ], \"whitePagesCanView\" : false }","title":"Creating new attribute"},{"location":"admin/config-guide/config-tools/config-api/attribute/#updating-existing-attribute","text":"PUT /{inum} (updates an existing attribute) ### Parameters > | name | param type | data type | type |default value | description | > |------------|-------------|----------------|-----------|--------------|----------------------------------------| > | None | request | object (JSON) | required | NA | Attribute json | ### Responses > | http code | content-type | response | > |---------------|-----------------------------------|------------------------------------------------------------------------| > | `200` | `application/json ` | `attribute details` | > | `404` | `application/json` | `{\"code\":\"404\",\"message\":\"The requested doesn't exist\"}` | > | `401` | `application/json` | `{\"code\":\"401\",\"message\":\"Unauthorized\"}` | > | `500` | `application/json` | `{\"code\":\"500\",\"message\":\"Error msg\"}` | ### Example cURL > curl - X PUT - k - H 'Content-Type: application/json' - H 'Authorization: Bearer ba9b8810-7a2b-4e4a-a18a-689d7eacf7d1' - i 'https://my.jans.server/jans-config-api/api/v1/attributes' -- data @ put . json ### Sample Request > { \"dn\" : \"inum=08E2,ou=attributes,o=jans\" , \"selected\" : false , \"inum\" : \"08E2\" , \"name\" : \"departmentNumber\" , \"displayName\" : \"Department\" , \"description\" : \"Organizational Department\" , \"origin\" : \"jansCustomPerson\" , \"dataType\" : \"string\" , \"editType\" : [ \"admin\" ], \"viewType\" : [ \"user\" , \"admin\" ], \"claimName\" : \"department_number\" , \"status\" : \"inactive\" , \"saml1Uri\" : \"urn:mace:dir:attribute-def:departmentNumber\" , \"saml2Uri\" : \"urn:oid:2.16.840.1.113730.3.1.2\" , \"urn\" : \"urn:mace:dir:attribute-def:departmentNumber\" , \"oxMultiValuedAttribute\" : false , \"custom\" : false , \"requred\" : false , \"whitePagesCanView\" : false , \"adminCanEdit\" : true , \"userCanView\" : true , \"userCanEdit\" : false , \"adminCanAccess\" : true , \"adminCanView\" : true , \"userCanAccess\" : true , \"baseDn\" : \"inum=08E2,ou=attributes,o=jans\" }","title":"Updating existing attribute"},{"location":"admin/config-guide/config-tools/config-api/attribute/#patching-existing-attribute","text":"PATCH /{inum} (patches an existing attribute) ### Parameters > | name | param type | data type | type |default value | description | > |------------|-------------|--------------------|-----------|--------------|----------------------------------------| > | inum | path | string | required | NA | Attribute unique identifier | > | None | request | json-patch object | required | NA | json-patch request | ### Responses > | http code | content-type | response | > |---------------|-----------------------------------|------------------------------------------------------------------------| > | `200` | `application/json ` | `attribute details` | > | `404` | `application/json` | `{\"code\":\"404\",\"message\":\"The requested doesn't exist\"}` | > | `401` | `application/json` | `{\"code\":\"401\",\"message\":\"Unauthorized\"}` | > | `500` | `application/json` | `{\"code\":\"500\",\"message\":\"Error msg\"}` | ### Example cURL > curl - X PATCH - k - H 'Content-Type: application/json-patch+json' - H 'Authorization: Bearer ba9b8810-7a2b-4e4a-a18a-689d7eacf7d1' - i 'https://my.jans.server/jans-config-api/api/v1/attributes/08E2' -- data @ patch . json ### Sample Request > [ { \"op\" : \"replace\" , \"path\" : \"/displayName\" , \"value\" : \"PatchCustomAttribute123\" } ]","title":"Patching existing attribute"},{"location":"admin/config-guide/config-tools/config-api/attribute/#deleting-existing-attribute","text":"DELETE /{inum} (deletes an existing attribute) ### Parameters > | name | param type | data type | type |default value | description | > |------------|-------------|--------------------|-----------|--------------|----------------------------------------| > | inum | path | string | required | NA | Attribute unique identifier | ### Responses > | http code | content-type | response | > |---------------|-----------------------------------|------------------------------------------------------------------------| > | `204` | `application/json ` | `No Content` | > | `404` | `application/json` | `{\"code\":\"404\",\"message\":\"The requested doesn't exist\"}` | > | `401` | `application/json` | `{\"code\":\"401\",\"message\":\"Unauthorized\"}` | > | `500` | `application/json` | `{\"code\":\"500\",\"message\":\"Error msg\"}` | ### Example cURL > curl - X DELETE - k - H 'Content-Type: application/json' - H 'Authorization: Bearer ba9b8810-7a2b-4e4a-a18a-689d7eacf7d1' - i 'https://my.jans.server/jans-config-api/api/v1/attributes/08E2' ### Sample Request > None","title":"Deleting existing attribute"},{"location":"admin/config-guide/config-tools/config-api/authorization/","tags":["administration","tools","config-api","endpoint"],"text":"Endpoints protection # Config API endpoints are OAuth 2.0 protected. It supports simple bearer and JWT token. # 1) If a user has write permission then should be able to read data as well. That is no need for explicit read permission 2) Need super permission to execute endpoints - https://jans.io/oauth/config/read-all should be able to able to execute read for all endpoints - https://jans.io/oauth/config/write-all should be able to execute add/update/delete for all endpoints 3) Functionality wise group permission to enable execution of all endpoints - example all OpenID endpoints (client, scope), all admin-ui endpoints(role, mapping, permission, license) https://jans.io/oauth/config/oauth-write https://jans.io/oauth/config/oauth-read Implementation # Metadata: An endpoint can be annotated with endpoint specific scope, feature level scope(Group) or admin level scope using @ProtectedApi wherein; - scope -> endpoint specific granular permissions - groupScopes -> feature level permissions - superScopes -> Admin level permissions Logic: - superScopes: If the access token has any of super scopes then no need to check group or granular scopes - groupScopes: If the access token does not have any of the applicable super scopes, then check if the access token has group level scopes. If any of the group level scope present then no need to check group or granular scopes. - scope: If access token does not have any of the super or group level scopes then check if all the applicable endpoint specific granular scopes are present. Example: OpenID Client GET endpoint annotation @ProtectedApi(scopes = { \"https://jans.io/oauth/config/openid/clients.readonly\" }, groupScopes = { \"https://jans.io/oauth/config/openid/openid-write\", \"https://jans.io/oauth/config/openid-read\" }, superScopes = { \"https://jans.io/oauth/config/read-all\") superScopes: If the access token has https://jans.io/oauth/config/read-all scopes then no need to check presence of any other scope. groupScopes: If the access token does not of any of applicable superScopes but has either of https://jans.io/oauth/config/openid/openid-write or https://jans.io/oauth/config/openid-read then no need to check presence of any other scope. scope: If access token does not have any of the super or group level scopes then check it should have the applicable https://jans.io/oauth/config/openid/clients.readonly scope to invoke the endpoint.","title":"Authorization"},{"location":"admin/config-guide/config-tools/config-api/authorization/#endpoints-protection","text":"Config API endpoints are OAuth 2.0 protected. It supports simple bearer and JWT token.","title":"Endpoints protection"},{"location":"admin/config-guide/config-tools/config-api/authorization/#_1","text":"1) If a user has write permission then should be able to read data as well. That is no need for explicit read permission 2) Need super permission to execute endpoints - https://jans.io/oauth/config/read-all should be able to able to execute read for all endpoints - https://jans.io/oauth/config/write-all should be able to execute add/update/delete for all endpoints 3) Functionality wise group permission to enable execution of all endpoints - example all OpenID endpoints (client, scope), all admin-ui endpoints(role, mapping, permission, license) https://jans.io/oauth/config/oauth-write https://jans.io/oauth/config/oauth-read","title":""},{"location":"admin/config-guide/config-tools/config-api/authorization/#implementation","text":"Metadata: An endpoint can be annotated with endpoint specific scope, feature level scope(Group) or admin level scope using @ProtectedApi wherein; - scope -> endpoint specific granular permissions - groupScopes -> feature level permissions - superScopes -> Admin level permissions Logic: - superScopes: If the access token has any of super scopes then no need to check group or granular scopes - groupScopes: If the access token does not have any of the applicable super scopes, then check if the access token has group level scopes. If any of the group level scope present then no need to check group or granular scopes. - scope: If access token does not have any of the super or group level scopes then check if all the applicable endpoint specific granular scopes are present. Example: OpenID Client GET endpoint annotation @ProtectedApi(scopes = { \"https://jans.io/oauth/config/openid/clients.readonly\" }, groupScopes = { \"https://jans.io/oauth/config/openid/openid-write\", \"https://jans.io/oauth/config/openid-read\" }, superScopes = { \"https://jans.io/oauth/config/read-all\") superScopes: If the access token has https://jans.io/oauth/config/read-all scopes then no need to check presence of any other scope. groupScopes: If the access token does not of any of applicable superScopes but has either of https://jans.io/oauth/config/openid/openid-write or https://jans.io/oauth/config/openid-read then no need to check presence of any other scope. scope: If access token does not have any of the super or group level scopes then check it should have the applicable https://jans.io/oauth/config/openid/clients.readonly scope to invoke the endpoint.","title":"Implementation"},{"location":"admin/config-guide/config-tools/config-api/config/","tags":["administration","tools","config-api","configuration"],"text":"Config-api-configuration # Overview # Jans Config API configuration enables to manage application-level configuration. Config API Configuration Parameters: # Field named Example Description configOauthEnabled true property can be used to enable or disable the oAuth2 authorization. By default, its set to true. apiApprovedIssuer [\"https:// ,https:// ,https:// \"] Enables to set more than one authorization servers. By default, the current auth-server is set. You can add more server separated by comma. apiProtectionType oauth2 Currently support mechanisms is OAuth 2.0 tokens. apiClientId 1800.52eb1bed-ab5c-4ba6-b87e-90aad26058d0 Jans Config API Client. apiClientPassword lwI/8mcMkF63mvueYTZ0mQ== Encrypted secret of Jans Config API Client endpointInjectionEnabled false To be used in-case endpoint needs to be injected. authIssuerUrl https://my-jans-server.jans.io URL of underlying auth-server. authOpenidConfigurationUrl https://my-jans-server.jans.io/.well-known/openid-configuration Metadata url of the authorization server. authOpenidIntrospectionUrl https://my-jans-server.jans.io/jans-auth/restv1/introspection Authorization server endpoint ro check the state of an OAuth 2.0 token and to determine meta-information about token. authOpenidTokenUrl https://my-jans-server.jans.io/jans-auth/restv1/token Authorization server endpoint to obtain an Access Token, an ID Token, and optionally a Refresh Token. authOpenidRevokeUrl https://my-jans-server.jans.io/jans-auth/restv1/token Authorization server endpoint to notify an OAuth 2.0 authorization server that a previously obtained refresh or access token is no longer needed, allowing the server to clean up security credentials. smallryeHealthRootPath /health-check Deprecated param for health-check exclusiveAuthScopes [\"jans_stat\",\"https://jans.io/scim/users.read\",\"https://jans.io/scim/users.write\"] Scopes that are only validated against the underlying Jansen Authorization server. corsConfigurationFilters [{\"filterName\":\"CorsFilter\",\"corsEnabled\":true,\"corsAllowedOrigins\":\"*\",\"corsAllowedMethods\":\"GET,PUT,POST,DELETE,PATCH,HEAD,OPTIONS\",\"corsAllowedHeaders\":\"\",\"corsExposedHeaders\":\"\",\"corsSupportCredentials\":true,\"corsLoggingEnabled\":false,\"corsPreflightMaxAge\":1800,\"corsRequestDecorate\":true}] This list specifies the CORS configuration filters. exclusiveAuthScopes [\"jans_stat\",\"https://jans.io/scim/users.read\",\"https://jans.io/scim/users.write\"] Scopes that are only validated against the underlying Jansen Authorization server. loggingLevel \"INFO\" or \"TRACE\" or \"DEBUG\" Logging level for Config API. loggingLayout \"text\" Contents of logs as plain text format. externalLoggerConfiguration Path to external log4j2 logging configuration. disableJdkLogger true Boolean to disable JDK loggers. maxCount 200 To be used to set maximum records returned in response. userExclusionAttributes [\"userPassword\"] List of attributes to be excluded in User response. userMandatoryAttributes [\"mail\",\"displayName\",\"jansStatus\",\"userPassword\",\"givenName\"] List of attributes mandatory for creating a User. agamaConfiguration {\"mandatoryAttributes\":[\"qname\",\"source\"],\"optionalAttributes\":[\"serialVersionUID\",\"enabled\"]} Configuration parameters like mandatory, optional, etc for agama flow. auditLogConf {\"enabled\":true,\"ignoreHttpMethod\":[],\"headerAttributes\":[\"User-inum\"]} Audit Log configuration. dataFormatConversionConf {\"enabled\":true,\"ignoreHttpMethod\":[\"@jakarta.ws.rs.GET()\"]} DB specific data format conversion configuration for Date field. plugins [{\"name\":\"admin\",\"description\":\"admin-ui plugin\",\"className\":\"io.jans.ca.plugin.adminui.rest.ApiApplication\"},{\"name\":\"fido2\",\"description\":\"fido2 plugin\",\"className\":\"io.jans.configapi.plugin.fido2.rest.ApiApplication\"},{\"name\":\"scim\",\"description\":\"scim plugin\",\"className\":\"io.jans.configapi.plugin.scim.rest.ApiApplication\"},{\"name\":\"user-management\",\"description\":\"user-management plugin\",\"className\":\"io.jans.configapi.plugin.mgt.rest.ApiApplication\"}] List of configured plugin. Configuring the Config API: # 1. Read Configuration parameters: # Use the following command to obtain configuration parameters: /opt/jans/jans-cli/config-cli.py --operation-id get-config-api-properties Response: javascript { \"configOauthEnabled\": true, \"apiApprovedIssuer\": [\"https://<your-jans-host>\"], \"apiProtectionType\": \"oauth2\", \"apiClientId\": \"1800.0a6a17a0-0d3b-4ce5-881c-f98b2f2b75a7\", \"apiClientPassword\": \"BlRk0TlvJp8QJg1vs5e1vw==\", \"endpointInjectionEnabled\": false, \"authIssuerUrl\": \"https://<your-jans-host>\", \"authOpenidConfigurationUrl\": \"https://<your-jans-host>/.well-known/openid-configuration\", \"authOpenidIntrospectionUrl\": \"https://<your-jans-host>/jans-auth/restv1/introspection\", \"authOpenidTokenUrl\": \"https://<your-jans-host>/jans-auth/restv1/token\", \"authOpenidRevokeUrl\": \"https://<your-jans-host>/jans-auth/restv1/revoke\", \"smallryeHealthRootPath\": \"/health-check\", \"disableJdkLogger\":true, \"loggingLevel\":\"INFO\", \"loggingLayout\":\"text\", \"externalLoggerConfiguration\":\"\", \"exclusiveAuthScopes\": [ \"jans_stat\", \"https://jans.io/scim/users.read\", \"https://jans.io/scim/users.write\" ], \"corsConfigurationFilters\": [ { \"filterName\": \"CorsFilter\", \"corsAllowedOrigins\": \"*\", \"corsAllowedMethods\": \"GET,PUT,POST,DELETE,PATCH,HEAD,OPTIONS\", \"corsAllowedHeaders\": \"\", \"corsExposedHeaders\": \"\", \"corsSupportCredentials\": true, \"corsLoggingEnabled\": false, \"corsPreflightMaxAge\": 1800, \"corsRequestDecorate\": true, \"corsEnabled\": true } ], \"userExclusionAttributes\": [ \"userPassword\" ], \"userMandatoryAttributes\": [ \"mail\", \"displayName\", \"jansStatus\", \"userPassword\", \"givenName\" ], \"agamaConfiguration\": { \"mandatoryAttributes\": [ \"qname\", \"source\" ], \"optionalAttributes\": [ \"serialVersionUID\", \"enabled\" ] } } 2. Update configuration parameters: # Config API configuration parameters can be updated via PATCH request. Steps: A. Create a JSON file say /tmp/config_values.json by editing the JSON with JSON Patch operation list. Refer JSON Patch document [RFC 6902] (https://datatracker.ietf.org/doc/html/rfc6902) Example: javascript [ { \"op\": \"replace\", \"path\": \"/loggingLevel\", \"value\": \"TRACE\" }, { \"op\": \"add\", \"path\": \"/exclusiveAuthScopes/3\", \"value\": \"https://jans.io/oauth/config/properties.write\" } ] B. Use the following command /opt/jans/jans-cli/config-cli.py --operation-id patch-config-api-properties --data /tmp/config_values.json 3. Two options to make effect any manual changes done to the configuration # Restart jans-config-api Increment the jansRevision property of the configuration without restarting the application. The timer job will detect the change and fetch the latest configuration from the DB. 4. Locating Config API configuration in Persistence Layer # While it is not recommended that an administrator directly edits a configuration at the persistence layer, it may be useful information for a developer. A. MySQL # erDiagram jansAppConf { string doc_id PK \"\" string ou \"jans-config-api\" string jansConfDyn \"json configuration for the app\" } B. LDAP # graph LR A[ou=jans] --> V(ou=configuration) V --> V5[ou=jans-config-api] Important attributes # OAuth authorization # configOauthEnabled property can be used to enable or disable the oAuth2 authorization. By default, its set to true. javascript ... \"configOauthEnabled\": true ... Api protection # apiProtectionType property states the protocol used for API authorization. Currently supported value is oauth2 . ... \"apiProtectionType\" : \"oauth2\" ... Api protection auth server # apiApprovedIssuer property enables to set more than one authorization servers. By default, the current auth-server is set. You can add more server separated by comma. ... apiApprovedIssuer \": [\" https : //<jans.auth.server>,https://<gluu.server>,https://<anyAuth.server>\"] ... Logging level # loggingLevel property can be used to the change the logging level to the desired values (TRACE, DEBUG, INFO, WARN, ERROR) . By default, the level is set to INFO `javascript ... \"loggingLevel\":\"DEBUG\", ... Scopes other than the one defined by config-api # Config API endpoints are oAuth2 protected. These scopes are created while installation. However, there are few endpoints that require scopes defined by other modules like auth-server. A list of these scopes is maintained in configuration in order to avoid creation of these scopes during Config API start-up. exclusiveAuthScopes property can be used to the change the logging level to the desired value (TRACE, DEBUG, INFO, WARN, ERROR) . By default, the level is set to INFO ... \"exclusiveAuthScopes\" : [ \"jans_stat\" , \"https://jans.io/scim/users.read\" , \"https://jans.io/scim/users.write\" ], ... User - Mandatory and exclusion attributes # MandatoryAttributes # userMandatoryAttributes can be used to define mandatory attributes for User while creation and update. ... \"userMandatoryAttributes\" : [ \"mail\" , \"displayName\" , \"jansStatus\" , \"userPassword\" , \"givenName\" ], ... Exclusion attributes # userExclusionAttributes can be used to define User attributes that are not to be returned in API response. More attributes that are to be skipped in response can be added to the list. ... \"userExclusionAttributes\" : [ \"userPassword\" ], ... Agama flow configuration # agamaConfiguration stores Agama related configuration used in Agama related endpoints. mandatoryAttributes list defines required attributes for Agama flow creation and update. optionalAttributes list specify the optional attributes. ... \"agamaConfiguration\" : { \"mandatoryAttributes\" : [ \"qname\" , \"source\" ], \"optionalAttributes\" : [ \"serialVersionUID\" , \"enabled\" ] } ...","title":"Config-api-configuration"},{"location":"admin/config-guide/config-tools/config-api/config/#config-api-configuration","text":"","title":"Config-api-configuration"},{"location":"admin/config-guide/config-tools/config-api/config/#overview","text":"Jans Config API configuration enables to manage application-level configuration.","title":"Overview"},{"location":"admin/config-guide/config-tools/config-api/config/#config-api-configuration-parameters","text":"Field named Example Description configOauthEnabled true property can be used to enable or disable the oAuth2 authorization. By default, its set to true. apiApprovedIssuer [\"https:// ,https:// ,https:// \"] Enables to set more than one authorization servers. By default, the current auth-server is set. You can add more server separated by comma. apiProtectionType oauth2 Currently support mechanisms is OAuth 2.0 tokens. apiClientId 1800.52eb1bed-ab5c-4ba6-b87e-90aad26058d0 Jans Config API Client. apiClientPassword lwI/8mcMkF63mvueYTZ0mQ== Encrypted secret of Jans Config API Client endpointInjectionEnabled false To be used in-case endpoint needs to be injected. authIssuerUrl https://my-jans-server.jans.io URL of underlying auth-server. authOpenidConfigurationUrl https://my-jans-server.jans.io/.well-known/openid-configuration Metadata url of the authorization server. authOpenidIntrospectionUrl https://my-jans-server.jans.io/jans-auth/restv1/introspection Authorization server endpoint ro check the state of an OAuth 2.0 token and to determine meta-information about token. authOpenidTokenUrl https://my-jans-server.jans.io/jans-auth/restv1/token Authorization server endpoint to obtain an Access Token, an ID Token, and optionally a Refresh Token. authOpenidRevokeUrl https://my-jans-server.jans.io/jans-auth/restv1/token Authorization server endpoint to notify an OAuth 2.0 authorization server that a previously obtained refresh or access token is no longer needed, allowing the server to clean up security credentials. smallryeHealthRootPath /health-check Deprecated param for health-check exclusiveAuthScopes [\"jans_stat\",\"https://jans.io/scim/users.read\",\"https://jans.io/scim/users.write\"] Scopes that are only validated against the underlying Jansen Authorization server. corsConfigurationFilters [{\"filterName\":\"CorsFilter\",\"corsEnabled\":true,\"corsAllowedOrigins\":\"*\",\"corsAllowedMethods\":\"GET,PUT,POST,DELETE,PATCH,HEAD,OPTIONS\",\"corsAllowedHeaders\":\"\",\"corsExposedHeaders\":\"\",\"corsSupportCredentials\":true,\"corsLoggingEnabled\":false,\"corsPreflightMaxAge\":1800,\"corsRequestDecorate\":true}] This list specifies the CORS configuration filters. exclusiveAuthScopes [\"jans_stat\",\"https://jans.io/scim/users.read\",\"https://jans.io/scim/users.write\"] Scopes that are only validated against the underlying Jansen Authorization server. loggingLevel \"INFO\" or \"TRACE\" or \"DEBUG\" Logging level for Config API. loggingLayout \"text\" Contents of logs as plain text format. externalLoggerConfiguration Path to external log4j2 logging configuration. disableJdkLogger true Boolean to disable JDK loggers. maxCount 200 To be used to set maximum records returned in response. userExclusionAttributes [\"userPassword\"] List of attributes to be excluded in User response. userMandatoryAttributes [\"mail\",\"displayName\",\"jansStatus\",\"userPassword\",\"givenName\"] List of attributes mandatory for creating a User. agamaConfiguration {\"mandatoryAttributes\":[\"qname\",\"source\"],\"optionalAttributes\":[\"serialVersionUID\",\"enabled\"]} Configuration parameters like mandatory, optional, etc for agama flow. auditLogConf {\"enabled\":true,\"ignoreHttpMethod\":[],\"headerAttributes\":[\"User-inum\"]} Audit Log configuration. dataFormatConversionConf {\"enabled\":true,\"ignoreHttpMethod\":[\"@jakarta.ws.rs.GET()\"]} DB specific data format conversion configuration for Date field. plugins [{\"name\":\"admin\",\"description\":\"admin-ui plugin\",\"className\":\"io.jans.ca.plugin.adminui.rest.ApiApplication\"},{\"name\":\"fido2\",\"description\":\"fido2 plugin\",\"className\":\"io.jans.configapi.plugin.fido2.rest.ApiApplication\"},{\"name\":\"scim\",\"description\":\"scim plugin\",\"className\":\"io.jans.configapi.plugin.scim.rest.ApiApplication\"},{\"name\":\"user-management\",\"description\":\"user-management plugin\",\"className\":\"io.jans.configapi.plugin.mgt.rest.ApiApplication\"}] List of configured plugin.","title":"Config API Configuration Parameters:"},{"location":"admin/config-guide/config-tools/config-api/config/#configuring-the-config-api","text":"","title":"Configuring the Config API:"},{"location":"admin/config-guide/config-tools/config-api/config/#1-read-configuration-parameters","text":"Use the following command to obtain configuration parameters: /opt/jans/jans-cli/config-cli.py --operation-id get-config-api-properties Response: javascript { \"configOauthEnabled\": true, \"apiApprovedIssuer\": [\"https://<your-jans-host>\"], \"apiProtectionType\": \"oauth2\", \"apiClientId\": \"1800.0a6a17a0-0d3b-4ce5-881c-f98b2f2b75a7\", \"apiClientPassword\": \"BlRk0TlvJp8QJg1vs5e1vw==\", \"endpointInjectionEnabled\": false, \"authIssuerUrl\": \"https://<your-jans-host>\", \"authOpenidConfigurationUrl\": \"https://<your-jans-host>/.well-known/openid-configuration\", \"authOpenidIntrospectionUrl\": \"https://<your-jans-host>/jans-auth/restv1/introspection\", \"authOpenidTokenUrl\": \"https://<your-jans-host>/jans-auth/restv1/token\", \"authOpenidRevokeUrl\": \"https://<your-jans-host>/jans-auth/restv1/revoke\", \"smallryeHealthRootPath\": \"/health-check\", \"disableJdkLogger\":true, \"loggingLevel\":\"INFO\", \"loggingLayout\":\"text\", \"externalLoggerConfiguration\":\"\", \"exclusiveAuthScopes\": [ \"jans_stat\", \"https://jans.io/scim/users.read\", \"https://jans.io/scim/users.write\" ], \"corsConfigurationFilters\": [ { \"filterName\": \"CorsFilter\", \"corsAllowedOrigins\": \"*\", \"corsAllowedMethods\": \"GET,PUT,POST,DELETE,PATCH,HEAD,OPTIONS\", \"corsAllowedHeaders\": \"\", \"corsExposedHeaders\": \"\", \"corsSupportCredentials\": true, \"corsLoggingEnabled\": false, \"corsPreflightMaxAge\": 1800, \"corsRequestDecorate\": true, \"corsEnabled\": true } ], \"userExclusionAttributes\": [ \"userPassword\" ], \"userMandatoryAttributes\": [ \"mail\", \"displayName\", \"jansStatus\", \"userPassword\", \"givenName\" ], \"agamaConfiguration\": { \"mandatoryAttributes\": [ \"qname\", \"source\" ], \"optionalAttributes\": [ \"serialVersionUID\", \"enabled\" ] } }","title":"1. Read Configuration parameters:"},{"location":"admin/config-guide/config-tools/config-api/config/#2-update-configuration-parameters","text":"Config API configuration parameters can be updated via PATCH request. Steps: A. Create a JSON file say /tmp/config_values.json by editing the JSON with JSON Patch operation list. Refer JSON Patch document [RFC 6902] (https://datatracker.ietf.org/doc/html/rfc6902) Example: javascript [ { \"op\": \"replace\", \"path\": \"/loggingLevel\", \"value\": \"TRACE\" }, { \"op\": \"add\", \"path\": \"/exclusiveAuthScopes/3\", \"value\": \"https://jans.io/oauth/config/properties.write\" } ] B. Use the following command /opt/jans/jans-cli/config-cli.py --operation-id patch-config-api-properties --data /tmp/config_values.json","title":"2. Update configuration parameters:"},{"location":"admin/config-guide/config-tools/config-api/config/#3-two-options-to-make-effect-any-manual-changes-done-to-the-configuration","text":"Restart jans-config-api Increment the jansRevision property of the configuration without restarting the application. The timer job will detect the change and fetch the latest configuration from the DB.","title":"3. Two options to make effect any manual changes done to the configuration"},{"location":"admin/config-guide/config-tools/config-api/config/#4-locating-config-api-configuration-in-persistence-layer","text":"While it is not recommended that an administrator directly edits a configuration at the persistence layer, it may be useful information for a developer.","title":"4. Locating Config API configuration in Persistence Layer"},{"location":"admin/config-guide/config-tools/config-api/config/#a-mysql","text":"erDiagram jansAppConf { string doc_id PK \"\" string ou \"jans-config-api\" string jansConfDyn \"json configuration for the app\" }","title":"A. MySQL"},{"location":"admin/config-guide/config-tools/config-api/config/#b-ldap","text":"graph LR A[ou=jans] --> V(ou=configuration) V --> V5[ou=jans-config-api]","title":"B. LDAP"},{"location":"admin/config-guide/config-tools/config-api/config/#important-attributes","text":"","title":"Important attributes"},{"location":"admin/config-guide/config-tools/config-api/config/#oauth-authorization","text":"configOauthEnabled property can be used to enable or disable the oAuth2 authorization. By default, its set to true. javascript ... \"configOauthEnabled\": true ...","title":"OAuth authorization"},{"location":"admin/config-guide/config-tools/config-api/config/#api-protection","text":"apiProtectionType property states the protocol used for API authorization. Currently supported value is oauth2 . ... \"apiProtectionType\" : \"oauth2\" ...","title":"Api protection"},{"location":"admin/config-guide/config-tools/config-api/config/#api-protection-auth-server","text":"apiApprovedIssuer property enables to set more than one authorization servers. By default, the current auth-server is set. You can add more server separated by comma. ... apiApprovedIssuer \": [\" https : //<jans.auth.server>,https://<gluu.server>,https://<anyAuth.server>\"] ...","title":"Api protection auth server"},{"location":"admin/config-guide/config-tools/config-api/config/#logging-level","text":"loggingLevel property can be used to the change the logging level to the desired values (TRACE, DEBUG, INFO, WARN, ERROR) . By default, the level is set to INFO `javascript ... \"loggingLevel\":\"DEBUG\", ...","title":"Logging level"},{"location":"admin/config-guide/config-tools/config-api/config/#scopes-other-than-the-one-defined-by-config-api","text":"Config API endpoints are oAuth2 protected. These scopes are created while installation. However, there are few endpoints that require scopes defined by other modules like auth-server. A list of these scopes is maintained in configuration in order to avoid creation of these scopes during Config API start-up. exclusiveAuthScopes property can be used to the change the logging level to the desired value (TRACE, DEBUG, INFO, WARN, ERROR) . By default, the level is set to INFO ... \"exclusiveAuthScopes\" : [ \"jans_stat\" , \"https://jans.io/scim/users.read\" , \"https://jans.io/scim/users.write\" ], ...","title":"Scopes other than the one defined by config-api"},{"location":"admin/config-guide/config-tools/config-api/config/#user-mandatory-and-exclusion-attributes","text":"","title":"User - Mandatory and exclusion attributes"},{"location":"admin/config-guide/config-tools/config-api/config/#mandatoryattributes","text":"userMandatoryAttributes can be used to define mandatory attributes for User while creation and update. ... \"userMandatoryAttributes\" : [ \"mail\" , \"displayName\" , \"jansStatus\" , \"userPassword\" , \"givenName\" ], ...","title":"MandatoryAttributes"},{"location":"admin/config-guide/config-tools/config-api/config/#exclusion-attributes","text":"userExclusionAttributes can be used to define User attributes that are not to be returned in API response. More attributes that are to be skipped in response can be added to the list. ... \"userExclusionAttributes\" : [ \"userPassword\" ], ...","title":"Exclusion attributes"},{"location":"admin/config-guide/config-tools/config-api/config/#agama-flow-configuration","text":"agamaConfiguration stores Agama related configuration used in Agama related endpoints. mandatoryAttributes list defines required attributes for Agama flow creation and update. optionalAttributes list specify the optional attributes. ... \"agamaConfiguration\" : { \"mandatoryAttributes\" : [ \"qname\" , \"source\" ], \"optionalAttributes\" : [ \"serialVersionUID\" , \"enabled\" ] } ...","title":"Agama flow configuration"},{"location":"admin/config-guide/config-tools/config-api/logs/","tags":["administration","tools","config-api","logs"],"text":"Config-api logs: # Two types of logs generated by config-api, application logs and audit log . - Application log contains application functionality logs - Audit log contains information of each request received. Logging configuration # Log configuration is stored in DB along with the config-application other configuration javascript { \"configOauthEnabled\": true, \"apiApprovedIssuer\": [\"https://jans.server2\"], \"apiProtectionType\": \"oauth2\", \"apiClientId\": \"1800.c9c0b756-a1fc-4013-9feb-64d531ac2dc1\", \"apiClientPassword\": \"X9q7cAemqyD9LaS1c5YzIA==\", \"endpointInjectionEnabled\": false, \"authIssuerUrl\": \"https://jans.server2\", \"authOpenidConfigurationUrl\": \"https://jans.server2/.well-known/openid-configuration\", \"authOpenidIntrospectionUrl\": \"https://jans.server2/jans-auth/restv1/introspection\", \"authOpenidTokenUrl\": \"https://jans.server2/jans-auth/restv1/token\", \"authOpenidRevokeUrl\": \"https://jans.server2/jans-auth/restv1/revoke\", \"smallryeHealthRootPath\": \"/health-check\", \"disableJdkLogger\":true, \"loggingLevel\":\"INFO\", \"loggingLayout\":\"text\", \"externalLoggerConfiguration\":\"\", \"exclusiveAuthScopes\": [ \"jans_stat\", \"https://jans.io/scim/users.read\", \"https://jans.io/scim/users.write\" ], \"corsConfigurationFilters\": [ { \"filterName\": \"CorsFilter\", \"corsAllowedOrigins\": \"*\", \"corsAllowedMethods\": \"GET,PUT,POST,DELETE,PATCH,HEAD,OPTIONS\", \"corsAllowedHeaders\": \"\", \"corsExposedHeaders\": \"\", \"corsSupportCredentials\": true, \"corsLoggingEnabled\": false, \"corsPreflightMaxAge\": 1800, \"corsRequestDecorate\": true, \"corsEnabled\": true } ], \"userExclusionAttributes\": [ \"userPassword\" ], \"userMandatoryAttributes\": [ \"mail\", \"displayName\", \"jansStatus\", \"userPassword\", \"givenName\" ], \"agamaConfiguration\": { \"mandatoryAttributes\": [ \"qname\", \"source\" ], \"optionalAttributes\": [ \"serialVersionUID\", \"enabled\" ] }, \"auditLogConf\": { \"enabled\": true, \"ignoreHttpMethod\": [], \"headerAttributes\": [ \"User-inum\" ] }, \"dataFormatConversionConf\": { \"enabled\": true, \"ignoreHttpMethod\": [ \"@jakarta.ws.rs.GET()\" ] }, \"plugins\": [ { \"name\": \"admin\", \"description\": \"admin-ui plugin\", \"className\": \"io.jans.ca.plugin.adminui.rest.ApiApplication\" }, { \"name\": \"fido2\", \"description\": \"fido2 plugin\", \"className\": \"io.jans.configapi.plugin.fido2.rest.ApiApplication\" }, { \"name\": \"scim\", \"description\": \"scim plugin\", \"className\": \"io.jans.configapi.plugin.scim.rest.ApiApplication\" }, { \"name\": \"user-management\", \"description\": \"user-management plugin\", \"className\": \"io.jans.configapi.plugin.mgt.rest.ApiApplication\" } ] } Audit log # Configuration # ... auditLogConf \": { \" enabled \": true, \" ignoreHttpMethod \": [], \" headerAttributes \": [ \" User - inum \" ] ... Field Description Example enabled Flag to enable and disable audit log true , default value is true, to enable audit logging ignoreHttpMethod HTTP methods for which audit is disabled @jakarta.ws.rs.GET(), @jakarta.ws.rs.PATCH(), @jakarta.ws.rs.PATCH(), etc headerAttributes List of HTTP header attributes whose value is to be logged User-inum File name and location on server # Log name: configapi-audit.log Log location: /opt/jans/jetty/jans-config-api/logs Application Logs # Config-api uses log4j to generate application execution logs for each endpoint invocation. These can be used to debug the application. Configuration # DB: ``javascript ... \"loggingLevel\":\"DEBUG\", \"loggingLayout\":\"text\" ... log4j file: https://github.com/JanssenProject/jans/blob/main/jans-config-api/server/src/main/resources/log4j2.xml DB configuration # Fetch configuration curl - k - i - H \"Accept: application/json\" - H \"Content-Type: application/json\" - H \"Authorization:Bearer 3114e010-fd4d-4e62-b5e2-a51b7d6dd231\" - X GET https : //jans.server/jans-config-api/api/v1/api-config Patch configuration curl - X PATCH - k - H 'Content-Type: application/json-patch+json' - H 'Authorization:Bearer 3114e010-fd4d-4e62-b5e2-a51b7d6dd231' - i 'https://jans.server/jans-config-api/api/v1/api-config' -- data '[{\"op\": \"replace\", \"path\": \"/loggingLevel\", \"value\":\"ERROR\"}, {\"op\": \"replace\", \"path\": \"/loggingLayout\", \"value\":\"json\"}, {\"op\": \"replace\", \"path\": \"/auditLogConf/enabled\", \"value\":false} , {\"op\": \"replace\", \"path\": \"/auditLogConf/headerAttributes\", \"value\":[\"User-inum\",\"city\"]}]'","title":"Config-api logs:"},{"location":"admin/config-guide/config-tools/config-api/logs/#config-api-logs","text":"Two types of logs generated by config-api, application logs and audit log . - Application log contains application functionality logs - Audit log contains information of each request received.","title":"Config-api logs:"},{"location":"admin/config-guide/config-tools/config-api/logs/#logging-configuration","text":"Log configuration is stored in DB along with the config-application other configuration javascript { \"configOauthEnabled\": true, \"apiApprovedIssuer\": [\"https://jans.server2\"], \"apiProtectionType\": \"oauth2\", \"apiClientId\": \"1800.c9c0b756-a1fc-4013-9feb-64d531ac2dc1\", \"apiClientPassword\": \"X9q7cAemqyD9LaS1c5YzIA==\", \"endpointInjectionEnabled\": false, \"authIssuerUrl\": \"https://jans.server2\", \"authOpenidConfigurationUrl\": \"https://jans.server2/.well-known/openid-configuration\", \"authOpenidIntrospectionUrl\": \"https://jans.server2/jans-auth/restv1/introspection\", \"authOpenidTokenUrl\": \"https://jans.server2/jans-auth/restv1/token\", \"authOpenidRevokeUrl\": \"https://jans.server2/jans-auth/restv1/revoke\", \"smallryeHealthRootPath\": \"/health-check\", \"disableJdkLogger\":true, \"loggingLevel\":\"INFO\", \"loggingLayout\":\"text\", \"externalLoggerConfiguration\":\"\", \"exclusiveAuthScopes\": [ \"jans_stat\", \"https://jans.io/scim/users.read\", \"https://jans.io/scim/users.write\" ], \"corsConfigurationFilters\": [ { \"filterName\": \"CorsFilter\", \"corsAllowedOrigins\": \"*\", \"corsAllowedMethods\": \"GET,PUT,POST,DELETE,PATCH,HEAD,OPTIONS\", \"corsAllowedHeaders\": \"\", \"corsExposedHeaders\": \"\", \"corsSupportCredentials\": true, \"corsLoggingEnabled\": false, \"corsPreflightMaxAge\": 1800, \"corsRequestDecorate\": true, \"corsEnabled\": true } ], \"userExclusionAttributes\": [ \"userPassword\" ], \"userMandatoryAttributes\": [ \"mail\", \"displayName\", \"jansStatus\", \"userPassword\", \"givenName\" ], \"agamaConfiguration\": { \"mandatoryAttributes\": [ \"qname\", \"source\" ], \"optionalAttributes\": [ \"serialVersionUID\", \"enabled\" ] }, \"auditLogConf\": { \"enabled\": true, \"ignoreHttpMethod\": [], \"headerAttributes\": [ \"User-inum\" ] }, \"dataFormatConversionConf\": { \"enabled\": true, \"ignoreHttpMethod\": [ \"@jakarta.ws.rs.GET()\" ] }, \"plugins\": [ { \"name\": \"admin\", \"description\": \"admin-ui plugin\", \"className\": \"io.jans.ca.plugin.adminui.rest.ApiApplication\" }, { \"name\": \"fido2\", \"description\": \"fido2 plugin\", \"className\": \"io.jans.configapi.plugin.fido2.rest.ApiApplication\" }, { \"name\": \"scim\", \"description\": \"scim plugin\", \"className\": \"io.jans.configapi.plugin.scim.rest.ApiApplication\" }, { \"name\": \"user-management\", \"description\": \"user-management plugin\", \"className\": \"io.jans.configapi.plugin.mgt.rest.ApiApplication\" } ] }","title":"Logging configuration"},{"location":"admin/config-guide/config-tools/config-api/logs/#audit-log","text":"","title":"Audit log"},{"location":"admin/config-guide/config-tools/config-api/logs/#configuration","text":"... auditLogConf \": { \" enabled \": true, \" ignoreHttpMethod \": [], \" headerAttributes \": [ \" User - inum \" ] ... Field Description Example enabled Flag to enable and disable audit log true , default value is true, to enable audit logging ignoreHttpMethod HTTP methods for which audit is disabled @jakarta.ws.rs.GET(), @jakarta.ws.rs.PATCH(), @jakarta.ws.rs.PATCH(), etc headerAttributes List of HTTP header attributes whose value is to be logged User-inum","title":"Configuration"},{"location":"admin/config-guide/config-tools/config-api/logs/#file-name-and-location-on-server","text":"Log name: configapi-audit.log Log location: /opt/jans/jetty/jans-config-api/logs","title":"File name and location on server"},{"location":"admin/config-guide/config-tools/config-api/logs/#application-logs","text":"Config-api uses log4j to generate application execution logs for each endpoint invocation. These can be used to debug the application.","title":"Application Logs"},{"location":"admin/config-guide/config-tools/config-api/logs/#configuration_1","text":"DB: ``javascript ... \"loggingLevel\":\"DEBUG\", \"loggingLayout\":\"text\" ... log4j file: https://github.com/JanssenProject/jans/blob/main/jans-config-api/server/src/main/resources/log4j2.xml","title":"Configuration"},{"location":"admin/config-guide/config-tools/config-api/logs/#db-configuration","text":"Fetch configuration curl - k - i - H \"Accept: application/json\" - H \"Content-Type: application/json\" - H \"Authorization:Bearer 3114e010-fd4d-4e62-b5e2-a51b7d6dd231\" - X GET https : //jans.server/jans-config-api/api/v1/api-config Patch configuration curl - X PATCH - k - H 'Content-Type: application/json-patch+json' - H 'Authorization:Bearer 3114e010-fd4d-4e62-b5e2-a51b7d6dd231' - i 'https://jans.server/jans-config-api/api/v1/api-config' -- data '[{\"op\": \"replace\", \"path\": \"/loggingLevel\", \"value\":\"ERROR\"}, {\"op\": \"replace\", \"path\": \"/loggingLayout\", \"value\":\"json\"}, {\"op\": \"replace\", \"path\": \"/auditLogConf/enabled\", \"value\":false} , {\"op\": \"replace\", \"path\": \"/auditLogConf/headerAttributes\", \"value\":[\"User-inum\",\"city\"]}]'","title":"DB configuration"},{"location":"admin/config-guide/config-tools/config-api/monitoring/","tags":["administration","tools","config-api","monitoring"],"text":"Health - Check endpoints # /api/v1/health - Returns application consolidated health status - liveness and readiness /api/v1/health/live - Returns application liveness status /api/v1/health/ready -Returns application readiness status /api/v1/health/server-stat - Returns application server status and stats metric like memoryfree , uptime , free_disk_space , etc Sample health response HTTP/ 1.1 200 OK Co ntent - Type : applica t io n /jso n [ { \"name\" : \"jans-config-api liveness\" , \"status\" : \"UP\" }, { \"name\" : \"jans-config-api readiness\" , \"status\" : \"UP\" } ] Sample liveness response HTTP/ 1.1 200 OK Co ntent - Type : applica t io n /jso n { \"name\" : \"jans-config-api liveness\" , \"status\" : \"UP\" } Sample readiness response HTTP/ 1.1 200 OK Co ntent - Type : applica t io n /jso n { \"name\" : \"jans-config-api readiness\" , \"status\" : \"UP\" } Sample server status response HTTP/ 1.1 200 OK Co ntent - Type : applica t io n /jso n { \"dbType\" : \"ldap\" , \"lastUpdate\" : \"2023-03-16T03:17:44\" , \"facterData\" : { \"memoryfree\" : \"7.1%\" , \"swapfree\" : \"60.1%\" , \"hostname\" : \"jans.server2\" , \"ipaddress\" : \"192.168.0.102\" , \"uptime\" : \"3:03\" , \"free_disk_space\" : \"65.0%\" , \"load_average\" : \"0.77\" } } Application logs # Application log can be verified if application is started properly. Refer here for more details.","title":"Health - Check endpoints"},{"location":"admin/config-guide/config-tools/config-api/monitoring/#health-check-endpoints","text":"/api/v1/health - Returns application consolidated health status - liveness and readiness /api/v1/health/live - Returns application liveness status /api/v1/health/ready -Returns application readiness status /api/v1/health/server-stat - Returns application server status and stats metric like memoryfree , uptime , free_disk_space , etc Sample health response HTTP/ 1.1 200 OK Co ntent - Type : applica t io n /jso n [ { \"name\" : \"jans-config-api liveness\" , \"status\" : \"UP\" }, { \"name\" : \"jans-config-api readiness\" , \"status\" : \"UP\" } ] Sample liveness response HTTP/ 1.1 200 OK Co ntent - Type : applica t io n /jso n { \"name\" : \"jans-config-api liveness\" , \"status\" : \"UP\" } Sample readiness response HTTP/ 1.1 200 OK Co ntent - Type : applica t io n /jso n { \"name\" : \"jans-config-api readiness\" , \"status\" : \"UP\" } Sample server status response HTTP/ 1.1 200 OK Co ntent - Type : applica t io n /jso n { \"dbType\" : \"ldap\" , \"lastUpdate\" : \"2023-03-16T03:17:44\" , \"facterData\" : { \"memoryfree\" : \"7.1%\" , \"swapfree\" : \"60.1%\" , \"hostname\" : \"jans.server2\" , \"ipaddress\" : \"192.168.0.102\" , \"uptime\" : \"3:03\" , \"free_disk_space\" : \"65.0%\" , \"load_average\" : \"0.77\" } }","title":"Health - Check endpoints"},{"location":"admin/config-guide/config-tools/config-api/monitoring/#application-logs","text":"Application log can be verified if application is started properly. Refer here for more details.","title":"Application logs"},{"location":"admin/config-guide/config-tools/config-api/openid-client/","tags":["administration","tools","config-api","openid-connect client"],"text":"OpenID Connect Client # OpenID Connect Client is Relying Parties(RP) using the OAuth Implicit Flow. Listing existing OpenID Connect clients # GET / (gets list of OpenID Connect clients based on search parameters) ### Parameters > | name | param type | data type | type |default value | description | > |------------|-------------|----------------|-----------|--------------|---------------------------------------------------------------------------------| > | limit | query | integer | optional |50 |Search size - max size of the results to return | > | pattern | query | string | optional |N/A |Comma separated search patter. E.g. `pattern=edu`, `pattern=edu,locale,License` | > | startIndex | query | integer | optional |1 |Index of the first query result | > | sortBy | query | string | optional |inum |Field whose value will be used to order the returned response | > | sortOrder | query | string | optional |ascending |Search size - max size of the results to return | ### Responses > | http code | content-type | response | > |---------------|-----------------------------------|---------------------------------------------------------------------| > | `200` | `application/json` | `Paginated result` | > | `401` | `application/json` | `{\"code\":\"401\",\"message\":\"Unauthorized\"}` | > | `500` | `application/json` | `{\"code\":\"500\",\"message\":\"Error msg\"}` | ### Example cURL > curl - k - i - H \"Accept: application/json\" - H \"Content-Type: application/json\" - H \"Authorization:Bearer 697479e0-e6f4-453d-bf7a-ddf31b53efba\" - X GET http : //my.jans.server/jans-config-api/api/v1/openid/clients?limit=3&pattern=test&startIndex=1&includeSource=true ### Sample Response > ```javascript >{ > \"start\": 0, > \"totalEntriesCount\": 5, > \"entriesCount\": 3, > \"entries\": [ > { > \"dn\": \"inum=FF81-2D39,ou=clients,o=jans\", > \"clientSecret\": \"FF81-2D39-jans\", > \"frontChannelLogoutSessionRequired\": false, > \"redirectUris\": [ > \"https://jans.server2/jans-auth-rp/home.htm\", > \"https://client.example.com/cb\", > \"https://client.example.com/cb1\", > \"https://client.example.com/cb2\" > ], > \"claimRedirectUris\": [ > \"https://jans.server2/jans-auth/restv1/uma/gather_claims\" > ], > \"responseTypes\": [ > \"token\", > \"code\", > \"id_token\" > ], > \"grantTypes\": [ > \"authorization_code\", > \"implicit\", > \"refresh_token\", > \"client_credentials\" > ], > \"applicationType\": \"web\", > \"clientName\": \"Jans Test Client (don't remove)\", > \"clientNameLocalized\": {}, > \"logoUriLocalized\": {}, > \"clientUriLocalized\": {}, > \"policyUriLocalized\": {}, > \"tosUriLocalized\": {}, > \"subjectType\": \"public\", > \"idTokenSignedResponseAlg\": \"RS256\", > \"tokenEndpointAuthMethod\": \"client_secret_basic\", > \"scopes\": [ > \"inum=F0C4,ou=scopes,o=jans\", > \"inum=10B2,ou=scopes,o=jans\", > \"inum=764C,ou=scopes,o=jans\", > \"inum=43F1,ou=scopes,o=jans\", > \"inum=341A,ou=scopes,o=jans\", > \"inum=6D99,ou=scopes,o=jans\" > ], > \"trustedClient\": true, > \"persistClientAuthorizations\": false, > \"includeClaimsInIdToken\": false, > \"customAttributes\": [], > \"customObjectClasses\": [ > \"top\" > ], > \"rptAsJwt\": false, > \"accessTokenAsJwt\": false, > \"disabled\": false, > \"attributes\": { > \"runIntrospectionScriptBeforeJwtCreation\": false, > \"keepClientAuthorizationAfterExpiration\": false, > \"allowSpontaneousScopes\": false, > \"backchannelLogoutSessionRequired\": false, > \"parLifetime\": 600, > \"requirePar\": false, > \"jansDefaultPromptLogin\": false > }, > \"displayName\": \"Jans Test Client (don't remove)\", > \"authenticationMethod\": \"client_secret_basic\", > \"tokenBindingSupported\": false, > \"baseDn\": \"inum=FF81-2D39,ou=clients,o=jans\", > \"inum\": \"FF81-2D39\" > }, > { > \"dn\": \"inum=AB77-1A2B,ou=clients,o=jans\", > \"clientSecret\": \"AB77-1A2B-jans\", > \"frontChannelLogoutSessionRequired\": false, > \"redirectUris\": [ > \"https://client.example.com/cb\" > ], > \"claimRedirectUris\": [ > \"https://jans.server2/jans-auth/restv1/uma/gather_claims\" > ], > \"responseTypes\": [ > \"code\", > \"id_token\" > ], > \"grantTypes\": [ > \"authorization_code\", > \"implicit\", > \"refresh_token\", > \"client_credentials\" > ], > \"applicationType\": \"web\", > \"clientName\": \"Jans Test Resource Server Client (don't remove)\", > \"clientNameLocalized\": {}, > \"logoUriLocalized\": {}, > \"clientUriLocalized\": {}, > \"policyUriLocalized\": {}, > \"tosUriLocalized\": {}, > \"subjectType\": \"public\", > \"idTokenSignedResponseAlg\": \"RS256\", > \"tokenEndpointAuthMethod\": \"client_secret_basic\", > \"scopes\": [ > \"inum=6D99,ou=scopes,o=jans\", > \"inum=7D90,ou=scopes,o=jans\" > ], > \"trustedClient\": true, > \"persistClientAuthorizations\": false, > \"includeClaimsInIdToken\": false, > \"customAttributes\": [], > \"customObjectClasses\": [ > \"top\" > ], > \"rptAsJwt\": false, > \"accessTokenAsJwt\": false, > \"disabled\": false, > \"attributes\": { > \"runIntrospectionScriptBeforeJwtCreation\": false, > \"keepClientAuthorizationAfterExpiration\": false, > \"allowSpontaneousScopes\": false, > \"backchannelLogoutSessionRequired\": false, > \"parLifetime\": 600, > \"requirePar\": false, > \"jansDefaultPromptLogin\": false > }, > \"displayName\": \"Jans Test Resource Server Client (don't remove)\", > \"authenticationMethod\": \"client_secret_basic\", > \"tokenBindingSupported\": false, > \"baseDn\": \"inum=AB77-1A2B,ou=clients,o=jans\", > \"inum\": \"AB77-1A2B\" > }, > { > \"dn\": \"inum=3E20,ou=clients,o=jans\", > \"clientSecret\": \"3E20-jans\", > \"frontChannelLogoutSessionRequired\": false, > \"redirectUris\": [ > \"https://client.example.com/cb\" > ], > \"responseTypes\": [ > \"code\", > \"id_token\" > ], > \"grantTypes\": [ > \"authorization_code\", > \"implicit\", > \"refresh_token\", > \"client_credentials\" > ], > \"applicationType\": \"web\", > \"clientName\": \"Jans Test Requesting Party Client (don't remove)\", > \"clientNameLocalized\": {}, > \"logoUriLocalized\": {}, > \"clientUriLocalized\": {}, > \"policyUriLocalized\": {}, > \"tosUriLocalized\": {}, > \"subjectType\": \"public\", > \"idTokenSignedResponseAlg\": \"RS256\", > \"tokenEndpointAuthMethod\": \"client_secret_basic\", > \"trustedClient\": true, > \"persistClientAuthorizations\": false, > \"includeClaimsInIdToken\": false, > \"customAttributes\": [], > \"customObjectClasses\": [ > \"top\" > ], > \"rptAsJwt\": false, > \"accessTokenAsJwt\": false, > \"disabled\": false, > \"attributes\": { > \"runIntrospectionScriptBeforeJwtCreation\": false, > \"keepClientAuthorizationAfterExpiration\": false, > \"allowSpontaneousScopes\": false, > \"backchannelLogoutSessionRequired\": false, > \"parLifetime\": 600, > \"requirePar\": false, > \"jansDefaultPromptLogin\": false > }, > \"displayName\": \"Jans Test Requesting Party Client (don't remove)\", > \"authenticationMethod\": \"client_secret_basic\", > \"tokenBindingSupported\": false, > \"baseDn\": \"inum=3E20,ou=clients,o=jans\", > \"inum\": \"3E20\" > } > ] >} > ``` GET /{inum} (gets OpenID Connect client based on inum) ### Parameters > | name | param type | data type | type |default value | description | > |------------|-------------|----------------|-----------|--------------|----------------------------------------| > | `inum` | path | string | required | NA | OpenID Connect client unique identifier| ### Responses > | http code | content-type | response | > |---------------|-----------------------------------|---------------------------------------------------------------------| > | `200` | `application/json ` | `OpenID Connect client details` | > | `401` | `application/json` | `{\"code\":\"401\",\"message\":\"Unauthorized\"}` | > | `401` | `application/json` | `{\"code\":\"404\",\"message\":\"Not Found\"}` | > | `500` | `application/json` | `{\"code\":\"500\",\"message\":\"Error msg\"}` | ### Example cURL > curl - k - i - H \"Accept: application/json\" - H \"Content-Type: application/json\" - H \"Authorization:Bearer 697479e0-e6f4-453d-bf7a-ddf31b53efba\" - X GET http : //my.jans.server/jans-config-api/api/v1/openid/clients/bd27a9f6-7772-4049-bd4f-bf7c651fbe7c ### Sample Response > ```javascript >{ > \"dn\": \"inum=bd27a9f6-7772-4049-bd4f-bf7c651fbe7c,ou=clients,o=jans\", > \"deletable\": false, > \"clientSecret\": \"WonHg253UDJmtl7d55z1K0PWWEZ3N9Xg+O33ibJ1JwCVs4ynLhjPxQ==\", > \"frontChannelLogoutSessionRequired\": false, > \"redirectUris\": [ > \"https://abc,com\" > ], > \"responseTypes\": [ > \"code\" > ], > \"grantTypes\": [ > \"refresh_token\", > \"authorization_code\" > ], > \"applicationType\": \"web\", > \"clientName\": \"test1234\", > \"clientNameLocalized\": {}, > \"logoUriLocalized\": {}, > \"clientUriLocalized\": {}, > \"policyUriLocalized\": {}, > \"tosUriLocalized\": {}, > \"subjectType\": \"public\", > \"tokenEndpointAuthMethod\": \"client_secret_basic\", > \"scopes\": [ > \"inum=43F1,ou=scopes,o=jans\", > \"inum=C17A,ou=scopes,o=jans\", > \"inum=764C,ou=scopes,o=jans\" > ], > \"trustedClient\": false, > \"persistClientAuthorizations\": false, > \"includeClaimsInIdToken\": false, > \"customAttributes\": [], > \"customObjectClasses\": [ > \"top\", > \"jansClntCustomAttributes\" > ], > \"rptAsJwt\": false, > \"accessTokenAsJwt\": false, > \"disabled\": false, > \"attributes\": { > \"runIntrospectionScriptBeforeJwtCreation\": false, > \"keepClientAuthorizationAfterExpiration\": false, > \"allowSpontaneousScopes\": false, > \"backchannelLogoutSessionRequired\": false, > \"parLifetime\": 600, > \"requirePar\": false, > \"jansDefaultPromptLogin\": false > }, > \"backchannelUserCodeParameter\": false, > \"description\": \"test1234\", > \"displayName\": \"test1234\", > \"authenticationMethod\": \"client_secret_basic\", > \"tokenBindingSupported\": false, > \"baseDn\": \"inum=bd27a9f6-7772-4049-bd4f-bf7c651fbe7c,ou=clients,o=jans\", > \"inum\": \"bd27a9f6-7772-4049-bd4f-bf7c651fbe7c\" >} > ``` Creating new OpenID Connect client # POST /{inum} (creates a new OpenID Connect client) ### Parameters > | name | param type | data type | type |default value | description | > |------------|-------------|----------------|-----------|--------------|----------------------------------------| > | None | request | object (JSON) | required | NA | OpenID Connect client json | ### Responses > | http code | content-type | response | > |---------------|-----------------------------------|---------------------------------------------------------------------| > | `201` | `application/json ` | `OpenID Connect client json` | > | `401` | `application/json` | `{\"code\":\"401\",\"message\":\"Unauthorized\"}` | > | `500` | `application/json` | `{\"code\":\"500\",\"message\":\"Error msg\"}` | ### Example cURL > curl - X POST - k - H 'Content-Type: application/json' - H 'Authorization: Bearer ba9b8810-7a2b-4e4a-a18a-689d7eacf7d1' - i 'https://my.jans.server/jans-config-api/api/v1/openid/clients' -- data @ post . json ### Sample Request > ```javascript >{ > \"clientName\": \"test1234\", > \"description\": \"test1234\", > \"expirable\": [], > \"softwareSection\": false, > \"cibaSection\": false, > \"backchannelUserCodeParameter\": false, > \"redirectUris\": [ > \"https://abc,com\" > ], > \"claimRedirectUris\": [], > \"authorizedOrigins\": [], > \"requestUris\": [], > \"postLogoutRedirectUris\": [], > \"responseTypes\": [], > \"grantTypes\": [], > \"scopes\": [ > \"inum=43F1,ou=scopes,o=jans\", > \"inum=C17A,ou=scopes,o=jans\", > \"inum=764C,ou=scopes,o=jans\" > ], > \"attributes\": { > \"tlsClientAuthSubjectDn\": null, > \"runIntrospectionScriptBeforeAccessTokenAsJwtCreationAndIncludeClaims\": false, > \"keepClientAuthorizationAfterExpiration\": false, > \"allowSpontaneousScopes\": false, > \"backchannelLogoutSessionRequired\": false, > \"backchannelLogoutUri\": [], > \"rptClaimsScripts\": [], > \"consentGatheringScripts\": [], > \"spontaneousScopeScriptDns\": [], > \"introspectionScripts\": [], > \"postAuthnScripts\": [], > \"additionalAudience\": [], > \"spontaneousScopes\": [], > \"redirectUrisRegex\": \"\", > \"parLifetime\": \"\", > \"requirePar\": false, > \"jansDefaultPromptLogin\": false, > \"authorizedAcrValues\": [], > \"updateTokenScriptDns\": [], > \"ropcScripts\": [], > \"jansAuthSignedRespAlg\": \"\", > \"jansAuthEncRespAlg\": \"\", > \"jansAuthEncRespEnc\": \"\" > }, > \"tlsClientAuthSubjectDn\": null, > \"frontChannelLogoutSessionRequired\": false, > \"runIntrospectionScriptBeforeAccessTokenAsJwtCreationAndIncludeClaims\": false, > \"backchannelLogoutSessionRequired\": false, > \"keepClientAuthorizationAfterExpiration\": false, > \"allowSpontaneousScopes\": false, > \"spontaneousScopes\": [], > \"introspectionScripts\": [], > \"spontaneousScopeScriptDns\": [], > \"consentGatheringScripts\": [], > \"redirectUrisRegex\": \"\", > \"parLifetime\": \"\", > \"requirePar\": false, > \"updateTokenScriptDns\": [], > \"ropcScripts\": [], > \"jansAuthSignedRespAlg\": \"\", > \"jansAuthEncRespAlg\": \"\", > \"jansAuthEncRespEnc\": \"\", > \"postAuthnScripts\": [], > \"rptClaimsScripts\": [], > \"additionalAudience\": [], > \"backchannelLogoutUri\": [], > \"jansDefaultPromptLogin\": false, > \"authorizedAcrValues\": [], > \"customObjectClasses\": [], > \"requireAuthTime\": false, > \"trustedClient\": false, > \"persistClientAuthorizations\": false, > \"includeClaimsInIdToken\": false, > \"rptAsJwt\": false, > \"accessTokenAsJwt\": false, > \"disabled\": false, > \"action_message\": \"test1234test1234\" >} > ``` Updating existing OpenID Connect client # PUT /{inum} (updates an existing OpenID Connect client) ### Parameters > | name | param type | data type | type |default value | description | > |------------|-------------|----------------|-----------|--------------|----------------------------------------| > | None | request | object (JSON) | required | NA | OpenID Connect client json | ### Responses > | http code | content-type | response | > |---------------|-----------------------------------|-------------------------------------------------------------------------------| > | `200` | `application/json ` | `OpenID Connect client json` | > | `404` | `application/json` | `{\"code\":\"404\",\"message\":\"The requested OpenID Connect client doesn't exist\"}`| > | `401` | `application/json` | `{\"code\":\"401\",\"message\":\"Unauthorized\"}` | > | `500` | `application/json` | `{\"code\":\"500\",\"message\":\"Error msg\"}` | ### Example cURL > curl - X PUT - k - H 'Content-Type: application/json' - H 'Authorization: Bearer ba9b8810-7a2b-4e4a-a18a-689d7eacf7d1' - i 'https://my.jans.server/jans-config-api/api/v1/openid/clients' -- data @ put . json ### Sample Request > ```javascript >{ > \"dn\": \"inum=bd27a9f6-7772-4049-bd4f-bf7c651fbe7c,ou=clients,o=jans\", > \"deletable\": false, > \"clientSecret\": \"c0b5ce54-d1e0-4a22-999a-8bcd055a3bc2\", > \"frontChannelLogoutSessionRequired\": false, > \"redirectUris\": [ > \"https://abc,com\" > ], > \"responseTypes\": [ > \"code\" > ], > \"grantTypes\": [ > \"refresh_token\", > \"authorization_code\" > ], > \"applicationType\": \"web\", > \"clientName\": \"test1234\", > \"clientNameLocalized\": {}, > \"logoUriLocalized\": {}, > \"clientUriLocalized\": {}, > \"policyUriLocalized\": {}, > \"tosUriLocalized\": {}, > \"subjectType\": \"public\", > \"tokenEndpointAuthMethod\": \"client_secret_basic\", > \"scopes\": [ > \"inum=43F1,ou=scopes,o=jans\", > \"inum=C17A,ou=scopes,o=jans\", > \"inum=764C,ou=scopes,o=jans\" > ], > \"trustedClient\": false, > \"persistClientAuthorizations\": false, > \"includeClaimsInIdToken\": false, > \"customAttributes\": [], > \"customObjectClasses\": [ > \"top\", > \"jansClntCustomAttributes\" > ], > \"rptAsJwt\": false, > \"accessTokenAsJwt\": false, > \"disabled\": false, > \"attributes\": { > \"runIntrospectionScriptBeforeJwtCreation\": false, > \"keepClientAuthorizationAfterExpiration\": false, > \"allowSpontaneousScopes\": false, > \"backchannelLogoutSessionRequired\": false, > \"parLifetime\": 600, > \"requirePar\": false, > \"jansDefaultPromptLogin\": false > }, > \"backchannelUserCodeParameter\": false, > \"description\": \"test1234\", > \"displayName\": \"test1234\", > \"authenticationMethod\": \"client_secret_basic\", > \"tokenBindingSupported\": false, > \"baseDn\": \"inum=bd27a9f6-7772-4049-bd4f-bf7c651fbe7c,ou=clients,o=jans\", > \"inum\": \"bd27a9f6-7772-4049-bd4f-bf7c651fbe7c\" >} > ``` Patching existing OpenID Connect client # PATCH /{inum} (patches an existing OpenID Connect client) ### Parameters > | name | param type | data type | type |default value | description | > |------------|-------------|--------------------|-----------|--------------|-----------------------------------------| > | inum | path | string | required | NA | OpenID Connect client unique identifier | > | None | request | json-patch object | required | NA | json-patch request | ### Responses > | http code | content-type | response | > |---------------|-----------------------------------|------------------------------------------------------------------------| > | `200` | `application/json ` | `OpenID Connect client details` | > | `404` | `application/json` | `{\"code\":\"404\",\"message\":\"The requested doesn't exist\"}` | > | `401` | `application/json` | `{\"code\":\"401\",\"message\":\"Unauthorized\"}` | > | `500` | `application/json` | `{\"code\":\"500\",\"message\":\"Error msg\"}` | ### Example cURL > curl - X PATCH - k - H 'Content-Type: application/json-patch+json' - H 'Authorization: Bearer ba9b8810-7a2b-4e4a-a18a-689d7eacf7d1' - i 'https://my.jans.server/jans-config-api/api/v1/openid/clients/f8c1a111-0919-47e8-a4d4-f7c18f73a644' -- data @ patch . json ### Sample Request > [{ \"op\" : \"replace\" , \"path\" : \"/responseTypes\" , \"value\" : [ \"code\" , \"token\" ]}] Deleting existing OpenID Connect client # DELETE /{inum} (deletes an existing OpenID Connect client) ### Parameters > | name | param type | data type | type |default value | description | > |------------|-------------|--------------------|-----------|--------------|-----------------------------------------| > | inum | path | string | required | NA | OpenID Connect client unique identifier | ### Responses > | http code | content-type | response | > |---------------|-----------------------------------|------------------------------------------------------------------------| > | `204` | `application/json ` | `No Content` | > | `404` | `application/json` | `{\"code\":\"404\",\"message\":\"The requested doesn't exist\"}` | > | `401` | `application/json` | `{\"code\":\"401\",\"message\":\"Unauthorized\"}` | > | `500` | `application/json` | `{\"code\":\"500\",\"message\":\"Error msg\"}` | ### Example cURL > curl - X DELETE - k - H 'Content-Type: application/json' - H 'Authorization: Bearer ba9b8810-7a2b-4e4a-a18a-689d7eacf7d1' - i 'https://my.jans.server/jans-config-api/api/v1/openid/clients/f8c1a111-0919-47e8-a4d4-f7c18f73a644' ### Sample Request > None","title":"OpenID Connect Client"},{"location":"admin/config-guide/config-tools/config-api/openid-client/#openid-connect-client","text":"OpenID Connect Client is Relying Parties(RP) using the OAuth Implicit Flow.","title":"OpenID Connect Client"},{"location":"admin/config-guide/config-tools/config-api/openid-client/#listing-existing-openid-connect-clients","text":"GET / (gets list of OpenID Connect clients based on search parameters) ### Parameters > | name | param type | data type | type |default value | description | > |------------|-------------|----------------|-----------|--------------|---------------------------------------------------------------------------------| > | limit | query | integer | optional |50 |Search size - max size of the results to return | > | pattern | query | string | optional |N/A |Comma separated search patter. E.g. `pattern=edu`, `pattern=edu,locale,License` | > | startIndex | query | integer | optional |1 |Index of the first query result | > | sortBy | query | string | optional |inum |Field whose value will be used to order the returned response | > | sortOrder | query | string | optional |ascending |Search size - max size of the results to return | ### Responses > | http code | content-type | response | > |---------------|-----------------------------------|---------------------------------------------------------------------| > | `200` | `application/json` | `Paginated result` | > | `401` | `application/json` | `{\"code\":\"401\",\"message\":\"Unauthorized\"}` | > | `500` | `application/json` | `{\"code\":\"500\",\"message\":\"Error msg\"}` | ### Example cURL > curl - k - i - H \"Accept: application/json\" - H \"Content-Type: application/json\" - H \"Authorization:Bearer 697479e0-e6f4-453d-bf7a-ddf31b53efba\" - X GET http : //my.jans.server/jans-config-api/api/v1/openid/clients?limit=3&pattern=test&startIndex=1&includeSource=true ### Sample Response > ```javascript >{ > \"start\": 0, > \"totalEntriesCount\": 5, > \"entriesCount\": 3, > \"entries\": [ > { > \"dn\": \"inum=FF81-2D39,ou=clients,o=jans\", > \"clientSecret\": \"FF81-2D39-jans\", > \"frontChannelLogoutSessionRequired\": false, > \"redirectUris\": [ > \"https://jans.server2/jans-auth-rp/home.htm\", > \"https://client.example.com/cb\", > \"https://client.example.com/cb1\", > \"https://client.example.com/cb2\" > ], > \"claimRedirectUris\": [ > \"https://jans.server2/jans-auth/restv1/uma/gather_claims\" > ], > \"responseTypes\": [ > \"token\", > \"code\", > \"id_token\" > ], > \"grantTypes\": [ > \"authorization_code\", > \"implicit\", > \"refresh_token\", > \"client_credentials\" > ], > \"applicationType\": \"web\", > \"clientName\": \"Jans Test Client (don't remove)\", > \"clientNameLocalized\": {}, > \"logoUriLocalized\": {}, > \"clientUriLocalized\": {}, > \"policyUriLocalized\": {}, > \"tosUriLocalized\": {}, > \"subjectType\": \"public\", > \"idTokenSignedResponseAlg\": \"RS256\", > \"tokenEndpointAuthMethod\": \"client_secret_basic\", > \"scopes\": [ > \"inum=F0C4,ou=scopes,o=jans\", > \"inum=10B2,ou=scopes,o=jans\", > \"inum=764C,ou=scopes,o=jans\", > \"inum=43F1,ou=scopes,o=jans\", > \"inum=341A,ou=scopes,o=jans\", > \"inum=6D99,ou=scopes,o=jans\" > ], > \"trustedClient\": true, > \"persistClientAuthorizations\": false, > \"includeClaimsInIdToken\": false, > \"customAttributes\": [], > \"customObjectClasses\": [ > \"top\" > ], > \"rptAsJwt\": false, > \"accessTokenAsJwt\": false, > \"disabled\": false, > \"attributes\": { > \"runIntrospectionScriptBeforeJwtCreation\": false, > \"keepClientAuthorizationAfterExpiration\": false, > \"allowSpontaneousScopes\": false, > \"backchannelLogoutSessionRequired\": false, > \"parLifetime\": 600, > \"requirePar\": false, > \"jansDefaultPromptLogin\": false > }, > \"displayName\": \"Jans Test Client (don't remove)\", > \"authenticationMethod\": \"client_secret_basic\", > \"tokenBindingSupported\": false, > \"baseDn\": \"inum=FF81-2D39,ou=clients,o=jans\", > \"inum\": \"FF81-2D39\" > }, > { > \"dn\": \"inum=AB77-1A2B,ou=clients,o=jans\", > \"clientSecret\": \"AB77-1A2B-jans\", > \"frontChannelLogoutSessionRequired\": false, > \"redirectUris\": [ > \"https://client.example.com/cb\" > ], > \"claimRedirectUris\": [ > \"https://jans.server2/jans-auth/restv1/uma/gather_claims\" > ], > \"responseTypes\": [ > \"code\", > \"id_token\" > ], > \"grantTypes\": [ > \"authorization_code\", > \"implicit\", > \"refresh_token\", > \"client_credentials\" > ], > \"applicationType\": \"web\", > \"clientName\": \"Jans Test Resource Server Client (don't remove)\", > \"clientNameLocalized\": {}, > \"logoUriLocalized\": {}, > \"clientUriLocalized\": {}, > \"policyUriLocalized\": {}, > \"tosUriLocalized\": {}, > \"subjectType\": \"public\", > \"idTokenSignedResponseAlg\": \"RS256\", > \"tokenEndpointAuthMethod\": \"client_secret_basic\", > \"scopes\": [ > \"inum=6D99,ou=scopes,o=jans\", > \"inum=7D90,ou=scopes,o=jans\" > ], > \"trustedClient\": true, > \"persistClientAuthorizations\": false, > \"includeClaimsInIdToken\": false, > \"customAttributes\": [], > \"customObjectClasses\": [ > \"top\" > ], > \"rptAsJwt\": false, > \"accessTokenAsJwt\": false, > \"disabled\": false, > \"attributes\": { > \"runIntrospectionScriptBeforeJwtCreation\": false, > \"keepClientAuthorizationAfterExpiration\": false, > \"allowSpontaneousScopes\": false, > \"backchannelLogoutSessionRequired\": false, > \"parLifetime\": 600, > \"requirePar\": false, > \"jansDefaultPromptLogin\": false > }, > \"displayName\": \"Jans Test Resource Server Client (don't remove)\", > \"authenticationMethod\": \"client_secret_basic\", > \"tokenBindingSupported\": false, > \"baseDn\": \"inum=AB77-1A2B,ou=clients,o=jans\", > \"inum\": \"AB77-1A2B\" > }, > { > \"dn\": \"inum=3E20,ou=clients,o=jans\", > \"clientSecret\": \"3E20-jans\", > \"frontChannelLogoutSessionRequired\": false, > \"redirectUris\": [ > \"https://client.example.com/cb\" > ], > \"responseTypes\": [ > \"code\", > \"id_token\" > ], > \"grantTypes\": [ > \"authorization_code\", > \"implicit\", > \"refresh_token\", > \"client_credentials\" > ], > \"applicationType\": \"web\", > \"clientName\": \"Jans Test Requesting Party Client (don't remove)\", > \"clientNameLocalized\": {}, > \"logoUriLocalized\": {}, > \"clientUriLocalized\": {}, > \"policyUriLocalized\": {}, > \"tosUriLocalized\": {}, > \"subjectType\": \"public\", > \"idTokenSignedResponseAlg\": \"RS256\", > \"tokenEndpointAuthMethod\": \"client_secret_basic\", > \"trustedClient\": true, > \"persistClientAuthorizations\": false, > \"includeClaimsInIdToken\": false, > \"customAttributes\": [], > \"customObjectClasses\": [ > \"top\" > ], > \"rptAsJwt\": false, > \"accessTokenAsJwt\": false, > \"disabled\": false, > \"attributes\": { > \"runIntrospectionScriptBeforeJwtCreation\": false, > \"keepClientAuthorizationAfterExpiration\": false, > \"allowSpontaneousScopes\": false, > \"backchannelLogoutSessionRequired\": false, > \"parLifetime\": 600, > \"requirePar\": false, > \"jansDefaultPromptLogin\": false > }, > \"displayName\": \"Jans Test Requesting Party Client (don't remove)\", > \"authenticationMethod\": \"client_secret_basic\", > \"tokenBindingSupported\": false, > \"baseDn\": \"inum=3E20,ou=clients,o=jans\", > \"inum\": \"3E20\" > } > ] >} > ``` GET /{inum} (gets OpenID Connect client based on inum) ### Parameters > | name | param type | data type | type |default value | description | > |------------|-------------|----------------|-----------|--------------|----------------------------------------| > | `inum` | path | string | required | NA | OpenID Connect client unique identifier| ### Responses > | http code | content-type | response | > |---------------|-----------------------------------|---------------------------------------------------------------------| > | `200` | `application/json ` | `OpenID Connect client details` | > | `401` | `application/json` | `{\"code\":\"401\",\"message\":\"Unauthorized\"}` | > | `401` | `application/json` | `{\"code\":\"404\",\"message\":\"Not Found\"}` | > | `500` | `application/json` | `{\"code\":\"500\",\"message\":\"Error msg\"}` | ### Example cURL > curl - k - i - H \"Accept: application/json\" - H \"Content-Type: application/json\" - H \"Authorization:Bearer 697479e0-e6f4-453d-bf7a-ddf31b53efba\" - X GET http : //my.jans.server/jans-config-api/api/v1/openid/clients/bd27a9f6-7772-4049-bd4f-bf7c651fbe7c ### Sample Response > ```javascript >{ > \"dn\": \"inum=bd27a9f6-7772-4049-bd4f-bf7c651fbe7c,ou=clients,o=jans\", > \"deletable\": false, > \"clientSecret\": \"WonHg253UDJmtl7d55z1K0PWWEZ3N9Xg+O33ibJ1JwCVs4ynLhjPxQ==\", > \"frontChannelLogoutSessionRequired\": false, > \"redirectUris\": [ > \"https://abc,com\" > ], > \"responseTypes\": [ > \"code\" > ], > \"grantTypes\": [ > \"refresh_token\", > \"authorization_code\" > ], > \"applicationType\": \"web\", > \"clientName\": \"test1234\", > \"clientNameLocalized\": {}, > \"logoUriLocalized\": {}, > \"clientUriLocalized\": {}, > \"policyUriLocalized\": {}, > \"tosUriLocalized\": {}, > \"subjectType\": \"public\", > \"tokenEndpointAuthMethod\": \"client_secret_basic\", > \"scopes\": [ > \"inum=43F1,ou=scopes,o=jans\", > \"inum=C17A,ou=scopes,o=jans\", > \"inum=764C,ou=scopes,o=jans\" > ], > \"trustedClient\": false, > \"persistClientAuthorizations\": false, > \"includeClaimsInIdToken\": false, > \"customAttributes\": [], > \"customObjectClasses\": [ > \"top\", > \"jansClntCustomAttributes\" > ], > \"rptAsJwt\": false, > \"accessTokenAsJwt\": false, > \"disabled\": false, > \"attributes\": { > \"runIntrospectionScriptBeforeJwtCreation\": false, > \"keepClientAuthorizationAfterExpiration\": false, > \"allowSpontaneousScopes\": false, > \"backchannelLogoutSessionRequired\": false, > \"parLifetime\": 600, > \"requirePar\": false, > \"jansDefaultPromptLogin\": false > }, > \"backchannelUserCodeParameter\": false, > \"description\": \"test1234\", > \"displayName\": \"test1234\", > \"authenticationMethod\": \"client_secret_basic\", > \"tokenBindingSupported\": false, > \"baseDn\": \"inum=bd27a9f6-7772-4049-bd4f-bf7c651fbe7c,ou=clients,o=jans\", > \"inum\": \"bd27a9f6-7772-4049-bd4f-bf7c651fbe7c\" >} > ```","title":"Listing existing OpenID Connect clients"},{"location":"admin/config-guide/config-tools/config-api/openid-client/#creating-new-openid-connect-client","text":"POST /{inum} (creates a new OpenID Connect client) ### Parameters > | name | param type | data type | type |default value | description | > |------------|-------------|----------------|-----------|--------------|----------------------------------------| > | None | request | object (JSON) | required | NA | OpenID Connect client json | ### Responses > | http code | content-type | response | > |---------------|-----------------------------------|---------------------------------------------------------------------| > | `201` | `application/json ` | `OpenID Connect client json` | > | `401` | `application/json` | `{\"code\":\"401\",\"message\":\"Unauthorized\"}` | > | `500` | `application/json` | `{\"code\":\"500\",\"message\":\"Error msg\"}` | ### Example cURL > curl - X POST - k - H 'Content-Type: application/json' - H 'Authorization: Bearer ba9b8810-7a2b-4e4a-a18a-689d7eacf7d1' - i 'https://my.jans.server/jans-config-api/api/v1/openid/clients' -- data @ post . json ### Sample Request > ```javascript >{ > \"clientName\": \"test1234\", > \"description\": \"test1234\", > \"expirable\": [], > \"softwareSection\": false, > \"cibaSection\": false, > \"backchannelUserCodeParameter\": false, > \"redirectUris\": [ > \"https://abc,com\" > ], > \"claimRedirectUris\": [], > \"authorizedOrigins\": [], > \"requestUris\": [], > \"postLogoutRedirectUris\": [], > \"responseTypes\": [], > \"grantTypes\": [], > \"scopes\": [ > \"inum=43F1,ou=scopes,o=jans\", > \"inum=C17A,ou=scopes,o=jans\", > \"inum=764C,ou=scopes,o=jans\" > ], > \"attributes\": { > \"tlsClientAuthSubjectDn\": null, > \"runIntrospectionScriptBeforeAccessTokenAsJwtCreationAndIncludeClaims\": false, > \"keepClientAuthorizationAfterExpiration\": false, > \"allowSpontaneousScopes\": false, > \"backchannelLogoutSessionRequired\": false, > \"backchannelLogoutUri\": [], > \"rptClaimsScripts\": [], > \"consentGatheringScripts\": [], > \"spontaneousScopeScriptDns\": [], > \"introspectionScripts\": [], > \"postAuthnScripts\": [], > \"additionalAudience\": [], > \"spontaneousScopes\": [], > \"redirectUrisRegex\": \"\", > \"parLifetime\": \"\", > \"requirePar\": false, > \"jansDefaultPromptLogin\": false, > \"authorizedAcrValues\": [], > \"updateTokenScriptDns\": [], > \"ropcScripts\": [], > \"jansAuthSignedRespAlg\": \"\", > \"jansAuthEncRespAlg\": \"\", > \"jansAuthEncRespEnc\": \"\" > }, > \"tlsClientAuthSubjectDn\": null, > \"frontChannelLogoutSessionRequired\": false, > \"runIntrospectionScriptBeforeAccessTokenAsJwtCreationAndIncludeClaims\": false, > \"backchannelLogoutSessionRequired\": false, > \"keepClientAuthorizationAfterExpiration\": false, > \"allowSpontaneousScopes\": false, > \"spontaneousScopes\": [], > \"introspectionScripts\": [], > \"spontaneousScopeScriptDns\": [], > \"consentGatheringScripts\": [], > \"redirectUrisRegex\": \"\", > \"parLifetime\": \"\", > \"requirePar\": false, > \"updateTokenScriptDns\": [], > \"ropcScripts\": [], > \"jansAuthSignedRespAlg\": \"\", > \"jansAuthEncRespAlg\": \"\", > \"jansAuthEncRespEnc\": \"\", > \"postAuthnScripts\": [], > \"rptClaimsScripts\": [], > \"additionalAudience\": [], > \"backchannelLogoutUri\": [], > \"jansDefaultPromptLogin\": false, > \"authorizedAcrValues\": [], > \"customObjectClasses\": [], > \"requireAuthTime\": false, > \"trustedClient\": false, > \"persistClientAuthorizations\": false, > \"includeClaimsInIdToken\": false, > \"rptAsJwt\": false, > \"accessTokenAsJwt\": false, > \"disabled\": false, > \"action_message\": \"test1234test1234\" >} > ```","title":"Creating new OpenID Connect client"},{"location":"admin/config-guide/config-tools/config-api/openid-client/#updating-existing-openid-connect-client","text":"PUT /{inum} (updates an existing OpenID Connect client) ### Parameters > | name | param type | data type | type |default value | description | > |------------|-------------|----------------|-----------|--------------|----------------------------------------| > | None | request | object (JSON) | required | NA | OpenID Connect client json | ### Responses > | http code | content-type | response | > |---------------|-----------------------------------|-------------------------------------------------------------------------------| > | `200` | `application/json ` | `OpenID Connect client json` | > | `404` | `application/json` | `{\"code\":\"404\",\"message\":\"The requested OpenID Connect client doesn't exist\"}`| > | `401` | `application/json` | `{\"code\":\"401\",\"message\":\"Unauthorized\"}` | > | `500` | `application/json` | `{\"code\":\"500\",\"message\":\"Error msg\"}` | ### Example cURL > curl - X PUT - k - H 'Content-Type: application/json' - H 'Authorization: Bearer ba9b8810-7a2b-4e4a-a18a-689d7eacf7d1' - i 'https://my.jans.server/jans-config-api/api/v1/openid/clients' -- data @ put . json ### Sample Request > ```javascript >{ > \"dn\": \"inum=bd27a9f6-7772-4049-bd4f-bf7c651fbe7c,ou=clients,o=jans\", > \"deletable\": false, > \"clientSecret\": \"c0b5ce54-d1e0-4a22-999a-8bcd055a3bc2\", > \"frontChannelLogoutSessionRequired\": false, > \"redirectUris\": [ > \"https://abc,com\" > ], > \"responseTypes\": [ > \"code\" > ], > \"grantTypes\": [ > \"refresh_token\", > \"authorization_code\" > ], > \"applicationType\": \"web\", > \"clientName\": \"test1234\", > \"clientNameLocalized\": {}, > \"logoUriLocalized\": {}, > \"clientUriLocalized\": {}, > \"policyUriLocalized\": {}, > \"tosUriLocalized\": {}, > \"subjectType\": \"public\", > \"tokenEndpointAuthMethod\": \"client_secret_basic\", > \"scopes\": [ > \"inum=43F1,ou=scopes,o=jans\", > \"inum=C17A,ou=scopes,o=jans\", > \"inum=764C,ou=scopes,o=jans\" > ], > \"trustedClient\": false, > \"persistClientAuthorizations\": false, > \"includeClaimsInIdToken\": false, > \"customAttributes\": [], > \"customObjectClasses\": [ > \"top\", > \"jansClntCustomAttributes\" > ], > \"rptAsJwt\": false, > \"accessTokenAsJwt\": false, > \"disabled\": false, > \"attributes\": { > \"runIntrospectionScriptBeforeJwtCreation\": false, > \"keepClientAuthorizationAfterExpiration\": false, > \"allowSpontaneousScopes\": false, > \"backchannelLogoutSessionRequired\": false, > \"parLifetime\": 600, > \"requirePar\": false, > \"jansDefaultPromptLogin\": false > }, > \"backchannelUserCodeParameter\": false, > \"description\": \"test1234\", > \"displayName\": \"test1234\", > \"authenticationMethod\": \"client_secret_basic\", > \"tokenBindingSupported\": false, > \"baseDn\": \"inum=bd27a9f6-7772-4049-bd4f-bf7c651fbe7c,ou=clients,o=jans\", > \"inum\": \"bd27a9f6-7772-4049-bd4f-bf7c651fbe7c\" >} > ```","title":"Updating existing OpenID Connect client"},{"location":"admin/config-guide/config-tools/config-api/openid-client/#patching-existing-openid-connect-client","text":"PATCH /{inum} (patches an existing OpenID Connect client) ### Parameters > | name | param type | data type | type |default value | description | > |------------|-------------|--------------------|-----------|--------------|-----------------------------------------| > | inum | path | string | required | NA | OpenID Connect client unique identifier | > | None | request | json-patch object | required | NA | json-patch request | ### Responses > | http code | content-type | response | > |---------------|-----------------------------------|------------------------------------------------------------------------| > | `200` | `application/json ` | `OpenID Connect client details` | > | `404` | `application/json` | `{\"code\":\"404\",\"message\":\"The requested doesn't exist\"}` | > | `401` | `application/json` | `{\"code\":\"401\",\"message\":\"Unauthorized\"}` | > | `500` | `application/json` | `{\"code\":\"500\",\"message\":\"Error msg\"}` | ### Example cURL > curl - X PATCH - k - H 'Content-Type: application/json-patch+json' - H 'Authorization: Bearer ba9b8810-7a2b-4e4a-a18a-689d7eacf7d1' - i 'https://my.jans.server/jans-config-api/api/v1/openid/clients/f8c1a111-0919-47e8-a4d4-f7c18f73a644' -- data @ patch . json ### Sample Request > [{ \"op\" : \"replace\" , \"path\" : \"/responseTypes\" , \"value\" : [ \"code\" , \"token\" ]}]","title":"Patching existing OpenID Connect client"},{"location":"admin/config-guide/config-tools/config-api/openid-client/#deleting-existing-openid-connect-client","text":"DELETE /{inum} (deletes an existing OpenID Connect client) ### Parameters > | name | param type | data type | type |default value | description | > |------------|-------------|--------------------|-----------|--------------|-----------------------------------------| > | inum | path | string | required | NA | OpenID Connect client unique identifier | ### Responses > | http code | content-type | response | > |---------------|-----------------------------------|------------------------------------------------------------------------| > | `204` | `application/json ` | `No Content` | > | `404` | `application/json` | `{\"code\":\"404\",\"message\":\"The requested doesn't exist\"}` | > | `401` | `application/json` | `{\"code\":\"401\",\"message\":\"Unauthorized\"}` | > | `500` | `application/json` | `{\"code\":\"500\",\"message\":\"Error msg\"}` | ### Example cURL > curl - X DELETE - k - H 'Content-Type: application/json' - H 'Authorization: Bearer ba9b8810-7a2b-4e4a-a18a-689d7eacf7d1' - i 'https://my.jans.server/jans-config-api/api/v1/openid/clients/f8c1a111-0919-47e8-a4d4-f7c18f73a644' ### Sample Request > None","title":"Deleting existing OpenID Connect client"},{"location":"admin/config-guide/config-tools/config-api/plugins/","tags":["administration","tools","config-api","plugins"],"text":"Overview # Jans Config Api is a REST application that is developed using Weld 4.x (JSR-365) and JAX-RS. Its endpoint can be used to manage configuration and other properties of Jans Auth Server . Jans Config API Plugins # Jans Config API follow a flexible plugin architecture in which the new features can be added using extensions called plugins without altering the application itself. In this section, we will discuss the steps to develop and add plugins in Jans Config API. The plugin architecture implemented in Jans Config API allows the deployer to add/remove new rest APIs (plugin) without changing the core application. A plugin contains one or more Rest API(s) packaged in a Java ARchive (jar file). It is added to Jans Config API by adding the plugin jar file path in the external extraClasspath of the jetty context file. Pre-requisites # The plugin developer should have an understanding of the following: Jakarta EE Platform : The plugin developer should know the Java programming language Weld : Weld is the reference implementation of CDI: Contexts and Dependency Injection for the Java EE Platform JAX-RS : JAX-RS for creating RESTful web services. Maven : Maven to build projects and manage dependencies. Web application container (Jetty) Sample plugin # To help bootstrap the plugin development, we have put together a sample plugin. Clone the Jans Config API project from here . Navigate under the plugins/sample folder. This folder contains the sample plugins for reference. helloworld folder for example contains the code for a basic plugin with GET endpoint sending Hello World! string response. Take the time to explore helloworld which is a minimalistic plugin that showcases very basic aspects of plugin development. Exploring Hello World Plugin # beans.xml # The resources/META-INF/beans.xml is the CDI deployment descriptor required in bean archive . Deployment descriptor helps WELD to explore beans, interceptors, decorators, etc in the bean archive . Refer to the WELD docs to learn more about deployment descriptors. HelloWorldExtension.java # A CDI portable extension is a mechanism by which we can implement additional functionalities on top of the CDI container. In this sample plugin, we have created an extension called HelloWorldExtension.java , implementing jakarta.enterprise.inject.spi.Extension . An extension can observe lifecycle events and also can modify the container\u2019s metamodel. Please refer to the WELD documentation for details. We need to register our extension as a service provider by creating a file named resources/META-INF/services/jakarta.enterprise.inject.spi.Extension (as shown below). com.spl.plugin.helloworld.ext.HelloWorldExtension HelloWorldApplication.java # The com.spl.plugin.helloworld.rest.HelloWorldApplication.java class is annotated with the @ApplicationPath annotation which identifies the application path that serves as the base URI for all resources of the plugin and is used to register JAX-RS resources and providers. HelloWorldResource.java # This is a sample JAX-RS resource with an endpoint returning Hello World! string as http response. Plugin Deployment # Jans Config API is offered as one of the several components of the Jans Auth Server. A plugin jar can be added to Jans Config API by following below steps. On an installed Jans Auth Server with Jans Config API (as component) copy plugin jar to /opt/jans/jetty/jans-config-api/custom/libs location. Add the location of plugin jar inside tag with name extraClasspath (multiple plugins can be added comma separated) of /opt/jans/jetty/jans-config-api/webapps/jans-config-api.xml file. <?xml version=\"1.0\" encoding=\"ISO-8859-1\"?> <!DOCTYPE Configure PUBLIC \"-//Jetty//Configure//EN\" \"http://www.eclipse.org/jetty/configure_9_0.dtd\"> <Configure class=\"org.eclipse.jetty.webapp.WebAppContext\"> <Set name=\"contextPath\">/jans-config-api</Set> <Set name=\"war\"> <Property name=\"jetty.webapps\" default=\".\" />/jans-config-api.war </Set> <Set name=\"extractWAR\">true</Set> <Set name=\"extraClasspath\">/opt/jans/jetty/jans-config-api/custom/libs/helloWorldjar</Set> </Configure> Restart jans-config-api service. systemctl restart jans-config-api.service","title":"Plugins"},{"location":"admin/config-guide/config-tools/config-api/plugins/#overview","text":"Jans Config Api is a REST application that is developed using Weld 4.x (JSR-365) and JAX-RS. Its endpoint can be used to manage configuration and other properties of Jans Auth Server .","title":"Overview"},{"location":"admin/config-guide/config-tools/config-api/plugins/#jans-config-api-plugins","text":"Jans Config API follow a flexible plugin architecture in which the new features can be added using extensions called plugins without altering the application itself. In this section, we will discuss the steps to develop and add plugins in Jans Config API. The plugin architecture implemented in Jans Config API allows the deployer to add/remove new rest APIs (plugin) without changing the core application. A plugin contains one or more Rest API(s) packaged in a Java ARchive (jar file). It is added to Jans Config API by adding the plugin jar file path in the external extraClasspath of the jetty context file.","title":"Jans Config API Plugins"},{"location":"admin/config-guide/config-tools/config-api/plugins/#pre-requisites","text":"The plugin developer should have an understanding of the following: Jakarta EE Platform : The plugin developer should know the Java programming language Weld : Weld is the reference implementation of CDI: Contexts and Dependency Injection for the Java EE Platform JAX-RS : JAX-RS for creating RESTful web services. Maven : Maven to build projects and manage dependencies. Web application container (Jetty)","title":"Pre-requisites"},{"location":"admin/config-guide/config-tools/config-api/plugins/#sample-plugin","text":"To help bootstrap the plugin development, we have put together a sample plugin. Clone the Jans Config API project from here . Navigate under the plugins/sample folder. This folder contains the sample plugins for reference. helloworld folder for example contains the code for a basic plugin with GET endpoint sending Hello World! string response. Take the time to explore helloworld which is a minimalistic plugin that showcases very basic aspects of plugin development.","title":"Sample plugin"},{"location":"admin/config-guide/config-tools/config-api/plugins/#exploring-hello-world-plugin","text":"","title":"Exploring Hello World Plugin"},{"location":"admin/config-guide/config-tools/config-api/plugins/#beansxml","text":"The resources/META-INF/beans.xml is the CDI deployment descriptor required in bean archive . Deployment descriptor helps WELD to explore beans, interceptors, decorators, etc in the bean archive . Refer to the WELD docs to learn more about deployment descriptors.","title":"beans.xml"},{"location":"admin/config-guide/config-tools/config-api/plugins/#helloworldextensionjava","text":"A CDI portable extension is a mechanism by which we can implement additional functionalities on top of the CDI container. In this sample plugin, we have created an extension called HelloWorldExtension.java , implementing jakarta.enterprise.inject.spi.Extension . An extension can observe lifecycle events and also can modify the container\u2019s metamodel. Please refer to the WELD documentation for details. We need to register our extension as a service provider by creating a file named resources/META-INF/services/jakarta.enterprise.inject.spi.Extension (as shown below). com.spl.plugin.helloworld.ext.HelloWorldExtension","title":"HelloWorldExtension.java"},{"location":"admin/config-guide/config-tools/config-api/plugins/#helloworldapplicationjava","text":"The com.spl.plugin.helloworld.rest.HelloWorldApplication.java class is annotated with the @ApplicationPath annotation which identifies the application path that serves as the base URI for all resources of the plugin and is used to register JAX-RS resources and providers.","title":"HelloWorldApplication.java"},{"location":"admin/config-guide/config-tools/config-api/plugins/#helloworldresourcejava","text":"This is a sample JAX-RS resource with an endpoint returning Hello World! string as http response.","title":"HelloWorldResource.java"},{"location":"admin/config-guide/config-tools/config-api/plugins/#plugin-deployment","text":"Jans Config API is offered as one of the several components of the Jans Auth Server. A plugin jar can be added to Jans Config API by following below steps. On an installed Jans Auth Server with Jans Config API (as component) copy plugin jar to /opt/jans/jetty/jans-config-api/custom/libs location. Add the location of plugin jar inside tag with name extraClasspath (multiple plugins can be added comma separated) of /opt/jans/jetty/jans-config-api/webapps/jans-config-api.xml file. <?xml version=\"1.0\" encoding=\"ISO-8859-1\"?> <!DOCTYPE Configure PUBLIC \"-//Jetty//Configure//EN\" \"http://www.eclipse.org/jetty/configure_9_0.dtd\"> <Configure class=\"org.eclipse.jetty.webapp.WebAppContext\"> <Set name=\"contextPath\">/jans-config-api</Set> <Set name=\"war\"> <Property name=\"jetty.webapps\" default=\".\" />/jans-config-api.war </Set> <Set name=\"extractWAR\">true</Set> <Set name=\"extraClasspath\">/opt/jans/jetty/jans-config-api/custom/libs/helloWorldjar</Set> </Configure> Restart jans-config-api service. systemctl restart jans-config-api.service","title":"Plugin Deployment"},{"location":"admin/config-guide/config-tools/config-api/security/","tags":["administration","tools","config-api","security"],"text":"Security # Disclosing vulnerabilities # If you think you found a security vulnerability, please refrain from posting it publicly on the forums, the chat, or GitHub. Instead, email us on security@jans.io. Refer to Janssen Security Policy","title":"Security"},{"location":"admin/config-guide/config-tools/config-api/security/#security","text":"","title":"Security"},{"location":"admin/config-guide/config-tools/config-api/security/#disclosing-vulnerabilities","text":"If you think you found a security vulnerability, please refrain from posting it publicly on the forums, the chat, or GitHub. Instead, email us on security@jans.io. Refer to Janssen Security Policy","title":"Disclosing vulnerabilities"},{"location":"admin/config-guide/config-tools/jans-cli/","tags":["administration","configuration","tools","cli","commandline"],"text":"Janssen CLI # jans-cli module is a command line interface for configuring the Janssen software, providing both interactive and simple single line options for configuration. This module interacts with Janssen server via RESTful configuration APIs that server exposes. Using these REST APIs, jans-cli allows configuration of authorization server and its major modules for FIDO2, SCIM, OpenID Connect etc. Using this mode is more difficult than the TUI. If needed, help options are available by typing: /opt/jans/jans-cli/config-cli.py --help It will print all information about how to configure Janssen Server using CLI mode: usage: config-cli.py [-h] [--host HOST] [--client-id CLIENT_ID] [--client_secret CLIENT_SECRET] [--plugins PLUGINS] [-debug] [--debug-log-file DEBUG_LOG_FILE] [--operation-id OPERATION_ID] [--url-suffix URL_SUFFIX] [--info {Attribute,CacheConfiguration,CacheConfigurationInMemory,CacheConfigurationMemcached,CacheConfigurationNativePersistence,CacheConfigurationRedis,ConfigurationFido2,ConfigurationJWKJSONWebKeyJWK,ConfigurationLogging,ConfigurationProperties,ConfigurationSMTP,CustomScripts,DatabaseCouchbaseConfiguration,DatabaseLDAPConfiguration,DefaultAuthenticationMethod,OAuthOpenIDConnectClients,OAuthScopes,OAuthUMAResources}] [--op-mode {get,post,put,patch,delete}] [--endpoint-args ENDPOINT_ARGS] [--schema SCHEMA] [--username USERNAME] [--password PASSWORD] [-j J] [--cert-file CERT_FILE] [--key-file KEY_FILE] [-noverify] [--patch-add PATCH_ADD] [--patch-replace PATCH_REPLACE] [--patch-remove PATCH_REMOVE] [--data DATA] optional arguments: -h, --help show this help message and exit --host HOST Hostname of server --client-id CLIENT_ID Jans Config Api Client ID --client_secret CLIENT_SECRET Jans Config Api Client ID secret --plugins PLUGINS Available plugins separated by comma -debug Run in debug mode --debug-log-file DEBUG_LOG_FILE Log file name when run in debug mode --operation-id OPERATION_ID Operation ID to be done --url-suffix URL_SUFFIX Argument to be added api endpoint url. For example inum:2B29 --info {Attribute,CacheConfiguration,CacheConfigurationInMemory,CacheConfigurationMemcached,CacheConfigurationNativePersistence,CacheConfigurationRedis,ConfigurationFido2,ConfigurationJWKJSONWebKeyJWK,ConfigurationLogging,ConfigurationProperties,ConfigurationSMTP,CustomScripts,DatabaseCouchbaseConfiguration,DatabaseLDAPConfiguration,DefaultAuthenticationMethod,OAuthOpenIDConnectClients,OAuthScopes,OAuthUMAResources} Help for operation --op-mode {get,post,put,patch,delete} Operation mode to be done --endpoint-args ENDPOINT_ARGS Arguments to pass endpoint separated by comma. For example limit:5,status:INACTIVE --schema SCHEMA Get sample json schema --username USERNAME Auth username --password PASSWORD Auth password -j J Auth password file --cert-file CERT_FILE Path to SSL Certificate file --key-file KEY_FILE Path to SSL Key file -noverify Ignore verifying the SSL certificate --patch-add PATCH_ADD Colon delimited key:value pair for add patch operation. For example loggingLevel:DEBUG --patch-replace PATCH_REPLACE Colon delimited key:value pair for replace patch operation. For example loggingLevel:DEBUG --patch-remove PATCH_REMOVE Key for remove patch operation. For example imgLocation --data DATA Path to json data file --output-access-token Prints jwt access token and exits root@testjans:~# We start with getting information about tasks, tasks are options of argument --info : Attribute, CacheConfiguration, CacheConfigurationInMemory, CacheConfigurationMemcached, CacheConfigurationNativePersistence, CacheConfigurationRedis, ConfigurationFido2, ConfigurationJWKJSONWebKeyJWK, ConfigurationLogging, ConfigurationProperties, ConfigurationSMTP, CustomScripts, DatabaseCouchbaseConfiguration, DatabaseLDAPConfiguration, DefaultAuthenticationMethod, OAuthOpenIDConnectClients, OAuthOpenIDConnectSectorIdentifiers, OAuthScopes, OAuthUMAResources To get information for a specific task we run command as below: /opt/jans/jans-cli/config-cli.py --info [task] for example: /opt/jans/jans-cli/config-cli.py --info DefaultAuthenticationMethod It returns with some operation id : Operation ID: get-acrs Description: Gets default authentication method. Operation ID: put-acrs Description: Updates default authentication method. Schema: /components/schemas/AuthenticationMethod To get sample shema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/AuthenticationMethod To perform any operation, you have to run command line with the operation id. for example: /opt/jans/jans-cli/config-cli.py --operation-id get-acrs It returns: Getting access token for scope https://jans.io/oauth/config/acrs.readonly { \"defaultAcr\": \"simple_password_auth\" } This is how we can execute single line command to get information about the Janssen Server. Operation Modes # Default operation mode is jca , i.e., all queries are done to Jans Config Api Server. CLI has also SCIM and OAUTH modes: SCIM Mode # To switch SCIM mode user -scim switch. For example to get help for SCIM mode: /opt/jans/jans-cli/config-cli.py -scim -h Only --info arguments will be different from jca mode: --info {Discovery,Fido2Devices,FidoDevices,GlobalSearch,Group,User} You can get information about operation Discovery : /opt/jans/jans-cli/config-cli.py -scim --info Fido2Devices Operation ID: get-fido2-devices Description: Query Fido 2 resources Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] userId: Used to restrict the search to fido 2 resources owned by a specific user [string] filter: An expression specifying the search criteria. See section 3.4.2.2 of RFC 7644 [string] startIndex: The 1-based index of the first query result [integer] count: Specifies the desired maximum number of query results per page [integer] sortBy: The attribute whose value will be used to order the returned responses [string] sortOrder: Order in which the sortBy param is applied. Allowed values are \"ascending\" and \"descending\" [string] Operation ID: get-fido2-device-by-id Description: Retrieves a Fido 2 device by Id Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] userId: Identifier (inum) of the device owner. This param is not required when underlying database is LDAP [string] id: No description is provided for this parameter [string] Operation ID: update-fido2-device-by-id Description: Updates a Fido 2 resource. Update works in a replacement fashion&amp;#58; every attribute value found in the payload sent will replace the one in the existing resource representation. Attributes not passed in the payload will be left intact. Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] id: No description is provided for this parameter [string] Schema: Fido2DeviceResource Schema: Fido2DeviceResource Operation ID: delete-fido2-device-by-id Description: Deletes a Fido 2 resource Parameters: id: Identifier of the resource to delete [string] Operation ID: search-fido2-device Description: Query Fido 2 resources Parameters: userId: Used to restrict the search to fido 2 resources owned by a specific user [string] Schema: SearchRequest Schema: SearchRequest To get sample schema type /opt/jans/jans-cli/config-cli.py -scim --schema <schma>, for example /opt/jans/jans-cli/config-cli.py -scim --schema SearchRequest Here is how you can get sample schema for SearchRequest : /opt/jans/jans-cli/config-cli.py -scim --schema SearchRequest { \"schemas\": [ \"string\" ], \"attributes\": [ \"string\" ], \"excludedAttributes\": [ \"string\" ], \"filter\": \"userName eq \\\"jhon\\\" and meta.lastModified gt \\\"2011-05-13T04:42:34Z\\\"\", \"sortBy\": \"string\", \"sortOrder\": \"string\", \"startIndex\": 143, \"count\": 58 } AUTH Mode # To switch AUTH mode user -auth switch. For example to get help for AUTH mode: /opt/jans/jans-cli/config-cli.py -auth -h --info arguments will be: --info {Authorization,ClientInfo,ClientRegistration,FidoU2F,JwkJsonWebKeySetJwks,Registration,ServerConfiguration,SessionManagement,Ssa,Token,TokenIntrospection,Uma2Resource,UmaScope,UmaUserManagedAccess,UserInfo} To get information about operation ClientRegistration : /opt/jans/jans-cli/config-cli.py -auth --info ClientInfo Operation ID: get_clientinfo Description: The ClientInfo Endpoint is an OAuth 2.0 Protected Resource that returns Claims about the registered client. Parameters: access_token: No description is provided for this parameter [string] Authorization: No description is provided for this parameter [string] Operation ID: post_clientinfo Description: The ClientInfo Endpoint is an OAuth 2.0 Protected Resource that returns Claims about the registered client. Parameters: Authorization: No description is provided for this parameter [string] Parameters: access_token*: Client-specific access token. Basic command-line switches # -h or --help to get all the formations of command line argument (ex; /opt/jans/jans-cli/config-cli.py -h ) --info to get formations about some operations id for a specific task (ex; opt/jans/jans-cli/config-cli.py --info User ) --operation-id usage to operate each of the sub-task --endpoint-args advanced usage for operation-id --data usage to share data in operations Patch Request (schema) # This schema file can be found in /components/schemas/PatchRequest for those which one support this operation. When you examine this sample schema, you will see three properties in an object: op, path, and value. op : operation to be done, one of add , remove , replace , move , copy , test path : Path of the property to be changed. use path separator / for config or . for SCIM to change a property inside an object. value : New value to be assigned for each property defined in path Multiple Patch Request (schema) # When we need to perform multiple patch operations on any configuration endpoint, Instead of doing one by one, we can create a json file including all individual operation into an array. To clarify, please see below json file: [ { \"op\": \"operation-name\", \"path\": \"configuration-path\", \"value\": \"Value\" }, { \"op\": \"operation-name\", \"path\": \"configuration-path\", \"value\": \"value\" }, { \"op\": \"operation-name\", \"path\": \"configuration-path\", \"value\": \"value\" } ... ... ... { \"op\": \"operation-name\", \"path\": \"configuration-path\", \"value\": \"value\" } ] This file contains multiple individual patch operation. In Patch Request (schema) we explained about each of these keys in the above json file. After creating the json file, just run the patch operation command. /opt/jans/jans-cli/config-cli.py --operation-id [patch operation id name] --data [json file absolute url] Quick Patch Operations # There is another patch request feature. It is a single line patch-request command line. It supports three types of operations: patch-replace : to replace value with new one. patch-add : it will add value into the key path. patch-remove : to remove value from any key path. The command line looks like below: /opt/jans/jans-cli/config-cli.py --operation-id [patch-operation-id] --[patch-operation-name] key:value for example: /opt/jans/jans-cli/config-cli.py --operation-id patch-config-cache --patch-replace memcachedConfiguration/bufferSize:32788 In this command line: - patch-config-cache is a operation-id from Cache Configurations task. - patch-replace type of operation; used to replace values in - memcachedConfiguration/bufferSize:32788 is a key:value pair Multi valued arguments can be privede as key:value1,key:vlaue2 , for example /opt/jans/jans-cli/config-cli.py --operation-id=get-config-scripts --endpoint-args=\"fieldValuePair:scriptType=dynamic_scope,fieldValuePair:level=100\" CLI Authorization # To run operations on Janssen Server, CLI client will need to be authenticated and authorized by the server. Since CLI has limited input capabilities, it uses Device Authorization Grant flow to get required permissions in form of an access token. After successfully receiving the token, CLI can run operations on the Janssen server while the token is valid. The steps below will summarize this process. Execution of CLI command will return the following message if a valid token is not found. Access token was not found. Please visit verification url <Janssen-server-device-code-url> and enter user code CGFZ-RTZR in 1800 seconds Please press <<Enter>> when ready Take <Janssen-server-device-code-url> from the message above and use any browser to access it from a different device User will be presented with a page where the user has to authenticate using id and password After successful user authentication, the next screen allows the user to enter the user code. Use the user code presented on command-line instruction in step 1 above. After successful code validation, the user is presented with OAuth permissions screen. This screen would list all the permissions requested by Jans CLI. The user can choose to Allow or Not Allow granting of these permissions. After allowing the grant of requested permissions, the user should come back to the command-line interface and hit < > as instructed. This will enable CLI to run operations on the corresponding Janssen server.","title":"Janssen CLI"},{"location":"admin/config-guide/config-tools/jans-cli/#janssen-cli","text":"jans-cli module is a command line interface for configuring the Janssen software, providing both interactive and simple single line options for configuration. This module interacts with Janssen server via RESTful configuration APIs that server exposes. Using these REST APIs, jans-cli allows configuration of authorization server and its major modules for FIDO2, SCIM, OpenID Connect etc. Using this mode is more difficult than the TUI. If needed, help options are available by typing: /opt/jans/jans-cli/config-cli.py --help It will print all information about how to configure Janssen Server using CLI mode: usage: config-cli.py [-h] [--host HOST] [--client-id CLIENT_ID] [--client_secret CLIENT_SECRET] [--plugins PLUGINS] [-debug] [--debug-log-file DEBUG_LOG_FILE] [--operation-id OPERATION_ID] [--url-suffix URL_SUFFIX] [--info {Attribute,CacheConfiguration,CacheConfigurationInMemory,CacheConfigurationMemcached,CacheConfigurationNativePersistence,CacheConfigurationRedis,ConfigurationFido2,ConfigurationJWKJSONWebKeyJWK,ConfigurationLogging,ConfigurationProperties,ConfigurationSMTP,CustomScripts,DatabaseCouchbaseConfiguration,DatabaseLDAPConfiguration,DefaultAuthenticationMethod,OAuthOpenIDConnectClients,OAuthScopes,OAuthUMAResources}] [--op-mode {get,post,put,patch,delete}] [--endpoint-args ENDPOINT_ARGS] [--schema SCHEMA] [--username USERNAME] [--password PASSWORD] [-j J] [--cert-file CERT_FILE] [--key-file KEY_FILE] [-noverify] [--patch-add PATCH_ADD] [--patch-replace PATCH_REPLACE] [--patch-remove PATCH_REMOVE] [--data DATA] optional arguments: -h, --help show this help message and exit --host HOST Hostname of server --client-id CLIENT_ID Jans Config Api Client ID --client_secret CLIENT_SECRET Jans Config Api Client ID secret --plugins PLUGINS Available plugins separated by comma -debug Run in debug mode --debug-log-file DEBUG_LOG_FILE Log file name when run in debug mode --operation-id OPERATION_ID Operation ID to be done --url-suffix URL_SUFFIX Argument to be added api endpoint url. For example inum:2B29 --info {Attribute,CacheConfiguration,CacheConfigurationInMemory,CacheConfigurationMemcached,CacheConfigurationNativePersistence,CacheConfigurationRedis,ConfigurationFido2,ConfigurationJWKJSONWebKeyJWK,ConfigurationLogging,ConfigurationProperties,ConfigurationSMTP,CustomScripts,DatabaseCouchbaseConfiguration,DatabaseLDAPConfiguration,DefaultAuthenticationMethod,OAuthOpenIDConnectClients,OAuthScopes,OAuthUMAResources} Help for operation --op-mode {get,post,put,patch,delete} Operation mode to be done --endpoint-args ENDPOINT_ARGS Arguments to pass endpoint separated by comma. For example limit:5,status:INACTIVE --schema SCHEMA Get sample json schema --username USERNAME Auth username --password PASSWORD Auth password -j J Auth password file --cert-file CERT_FILE Path to SSL Certificate file --key-file KEY_FILE Path to SSL Key file -noverify Ignore verifying the SSL certificate --patch-add PATCH_ADD Colon delimited key:value pair for add patch operation. For example loggingLevel:DEBUG --patch-replace PATCH_REPLACE Colon delimited key:value pair for replace patch operation. For example loggingLevel:DEBUG --patch-remove PATCH_REMOVE Key for remove patch operation. For example imgLocation --data DATA Path to json data file --output-access-token Prints jwt access token and exits root@testjans:~# We start with getting information about tasks, tasks are options of argument --info : Attribute, CacheConfiguration, CacheConfigurationInMemory, CacheConfigurationMemcached, CacheConfigurationNativePersistence, CacheConfigurationRedis, ConfigurationFido2, ConfigurationJWKJSONWebKeyJWK, ConfigurationLogging, ConfigurationProperties, ConfigurationSMTP, CustomScripts, DatabaseCouchbaseConfiguration, DatabaseLDAPConfiguration, DefaultAuthenticationMethod, OAuthOpenIDConnectClients, OAuthOpenIDConnectSectorIdentifiers, OAuthScopes, OAuthUMAResources To get information for a specific task we run command as below: /opt/jans/jans-cli/config-cli.py --info [task] for example: /opt/jans/jans-cli/config-cli.py --info DefaultAuthenticationMethod It returns with some operation id : Operation ID: get-acrs Description: Gets default authentication method. Operation ID: put-acrs Description: Updates default authentication method. Schema: /components/schemas/AuthenticationMethod To get sample shema type /opt/jans/jans-cli/config-cli.py --schema <schma>, for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/AuthenticationMethod To perform any operation, you have to run command line with the operation id. for example: /opt/jans/jans-cli/config-cli.py --operation-id get-acrs It returns: Getting access token for scope https://jans.io/oauth/config/acrs.readonly { \"defaultAcr\": \"simple_password_auth\" } This is how we can execute single line command to get information about the Janssen Server.","title":"Janssen CLI"},{"location":"admin/config-guide/config-tools/jans-cli/#operation-modes","text":"Default operation mode is jca , i.e., all queries are done to Jans Config Api Server. CLI has also SCIM and OAUTH modes:","title":"Operation Modes"},{"location":"admin/config-guide/config-tools/jans-cli/#scim-mode","text":"To switch SCIM mode user -scim switch. For example to get help for SCIM mode: /opt/jans/jans-cli/config-cli.py -scim -h Only --info arguments will be different from jca mode: --info {Discovery,Fido2Devices,FidoDevices,GlobalSearch,Group,User} You can get information about operation Discovery : /opt/jans/jans-cli/config-cli.py -scim --info Fido2Devices Operation ID: get-fido2-devices Description: Query Fido 2 resources Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] userId: Used to restrict the search to fido 2 resources owned by a specific user [string] filter: An expression specifying the search criteria. See section 3.4.2.2 of RFC 7644 [string] startIndex: The 1-based index of the first query result [integer] count: Specifies the desired maximum number of query results per page [integer] sortBy: The attribute whose value will be used to order the returned responses [string] sortOrder: Order in which the sortBy param is applied. Allowed values are \"ascending\" and \"descending\" [string] Operation ID: get-fido2-device-by-id Description: Retrieves a Fido 2 device by Id Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] userId: Identifier (inum) of the device owner. This param is not required when underlying database is LDAP [string] id: No description is provided for this parameter [string] Operation ID: update-fido2-device-by-id Description: Updates a Fido 2 resource. Update works in a replacement fashion&amp;#58; every attribute value found in the payload sent will replace the one in the existing resource representation. Attributes not passed in the payload will be left intact. Parameters: attributes: A comma-separated list of attribute names to return in the response [string] excludedAttributes: When specified, the response will contain a default set of attributes minus those listed here (as a comma-separated list) [string] id: No description is provided for this parameter [string] Schema: Fido2DeviceResource Schema: Fido2DeviceResource Operation ID: delete-fido2-device-by-id Description: Deletes a Fido 2 resource Parameters: id: Identifier of the resource to delete [string] Operation ID: search-fido2-device Description: Query Fido 2 resources Parameters: userId: Used to restrict the search to fido 2 resources owned by a specific user [string] Schema: SearchRequest Schema: SearchRequest To get sample schema type /opt/jans/jans-cli/config-cli.py -scim --schema <schma>, for example /opt/jans/jans-cli/config-cli.py -scim --schema SearchRequest Here is how you can get sample schema for SearchRequest : /opt/jans/jans-cli/config-cli.py -scim --schema SearchRequest { \"schemas\": [ \"string\" ], \"attributes\": [ \"string\" ], \"excludedAttributes\": [ \"string\" ], \"filter\": \"userName eq \\\"jhon\\\" and meta.lastModified gt \\\"2011-05-13T04:42:34Z\\\"\", \"sortBy\": \"string\", \"sortOrder\": \"string\", \"startIndex\": 143, \"count\": 58 }","title":"SCIM Mode"},{"location":"admin/config-guide/config-tools/jans-cli/#auth-mode","text":"To switch AUTH mode user -auth switch. For example to get help for AUTH mode: /opt/jans/jans-cli/config-cli.py -auth -h --info arguments will be: --info {Authorization,ClientInfo,ClientRegistration,FidoU2F,JwkJsonWebKeySetJwks,Registration,ServerConfiguration,SessionManagement,Ssa,Token,TokenIntrospection,Uma2Resource,UmaScope,UmaUserManagedAccess,UserInfo} To get information about operation ClientRegistration : /opt/jans/jans-cli/config-cli.py -auth --info ClientInfo Operation ID: get_clientinfo Description: The ClientInfo Endpoint is an OAuth 2.0 Protected Resource that returns Claims about the registered client. Parameters: access_token: No description is provided for this parameter [string] Authorization: No description is provided for this parameter [string] Operation ID: post_clientinfo Description: The ClientInfo Endpoint is an OAuth 2.0 Protected Resource that returns Claims about the registered client. Parameters: Authorization: No description is provided for this parameter [string] Parameters: access_token*: Client-specific access token.","title":"AUTH Mode"},{"location":"admin/config-guide/config-tools/jans-cli/#basic-command-line-switches","text":"-h or --help to get all the formations of command line argument (ex; /opt/jans/jans-cli/config-cli.py -h ) --info to get formations about some operations id for a specific task (ex; opt/jans/jans-cli/config-cli.py --info User ) --operation-id usage to operate each of the sub-task --endpoint-args advanced usage for operation-id --data usage to share data in operations","title":"Basic command-line switches"},{"location":"admin/config-guide/config-tools/jans-cli/#patch-request-schema","text":"This schema file can be found in /components/schemas/PatchRequest for those which one support this operation. When you examine this sample schema, you will see three properties in an object: op, path, and value. op : operation to be done, one of add , remove , replace , move , copy , test path : Path of the property to be changed. use path separator / for config or . for SCIM to change a property inside an object. value : New value to be assigned for each property defined in path","title":"Patch Request (schema)"},{"location":"admin/config-guide/config-tools/jans-cli/#multiple-patch-request-schema","text":"When we need to perform multiple patch operations on any configuration endpoint, Instead of doing one by one, we can create a json file including all individual operation into an array. To clarify, please see below json file: [ { \"op\": \"operation-name\", \"path\": \"configuration-path\", \"value\": \"Value\" }, { \"op\": \"operation-name\", \"path\": \"configuration-path\", \"value\": \"value\" }, { \"op\": \"operation-name\", \"path\": \"configuration-path\", \"value\": \"value\" } ... ... ... { \"op\": \"operation-name\", \"path\": \"configuration-path\", \"value\": \"value\" } ] This file contains multiple individual patch operation. In Patch Request (schema) we explained about each of these keys in the above json file. After creating the json file, just run the patch operation command. /opt/jans/jans-cli/config-cli.py --operation-id [patch operation id name] --data [json file absolute url]","title":"Multiple Patch Request (schema)"},{"location":"admin/config-guide/config-tools/jans-cli/#quick-patch-operations","text":"There is another patch request feature. It is a single line patch-request command line. It supports three types of operations: patch-replace : to replace value with new one. patch-add : it will add value into the key path. patch-remove : to remove value from any key path. The command line looks like below: /opt/jans/jans-cli/config-cli.py --operation-id [patch-operation-id] --[patch-operation-name] key:value for example: /opt/jans/jans-cli/config-cli.py --operation-id patch-config-cache --patch-replace memcachedConfiguration/bufferSize:32788 In this command line: - patch-config-cache is a operation-id from Cache Configurations task. - patch-replace type of operation; used to replace values in - memcachedConfiguration/bufferSize:32788 is a key:value pair Multi valued arguments can be privede as key:value1,key:vlaue2 , for example /opt/jans/jans-cli/config-cli.py --operation-id=get-config-scripts --endpoint-args=\"fieldValuePair:scriptType=dynamic_scope,fieldValuePair:level=100\"","title":"Quick Patch Operations"},{"location":"admin/config-guide/config-tools/jans-cli/#cli-authorization","text":"To run operations on Janssen Server, CLI client will need to be authenticated and authorized by the server. Since CLI has limited input capabilities, it uses Device Authorization Grant flow to get required permissions in form of an access token. After successfully receiving the token, CLI can run operations on the Janssen server while the token is valid. The steps below will summarize this process. Execution of CLI command will return the following message if a valid token is not found. Access token was not found. Please visit verification url <Janssen-server-device-code-url> and enter user code CGFZ-RTZR in 1800 seconds Please press <<Enter>> when ready Take <Janssen-server-device-code-url> from the message above and use any browser to access it from a different device User will be presented with a page where the user has to authenticate using id and password After successful user authentication, the next screen allows the user to enter the user code. Use the user code presented on command-line instruction in step 1 above. After successful code validation, the user is presented with OAuth permissions screen. This screen would list all the permissions requested by Jans CLI. The user can choose to Allow or Not Allow granting of these permissions. After allowing the grant of requested permissions, the user should come back to the command-line interface and hit < > as instructed. This will enable CLI to run operations on the corresponding Janssen server.","title":"CLI Authorization"},{"location":"admin/config-guide/config-tools/jans-cli/install/","tags":["administration","configuration","tools","cli","commandline","tui"],"text":"Please follow these instructions for stand alone installation. Example execution: $ ./jans-cli-tui.pyz --no-tui --host test.jans.io --client-id 2000.562981df-1623-4136-b1d0-aaa277edc48c --client-secret KU6ydImJZK6S --operation-id get-acrs Please wait while retrieving data ... Access token was not found. Please visit verification url https://test.jans.io/device-code?user_code=LKHC-PBTR and authorize this device within 1800 secods Please press \u00abEnter\u00bb when ready { \"defaultAcr\": \"simple_password_auth\" } Note that argument --no-tui is necessary, otherwise it will switch to TUI mode.","title":"Install"},{"location":"admin/config-guide/config-tools/jans-tui/","tags":["administration","configuration","tools","config","tui","text base UI"],"text":"Overview # The \"Text User Interface\" or \"TUI\" is a tool for admins to perform ad hoc configuration of the Janssen Project software components. You can run it by executing: /opt/jans/jans-cli/jans_cli_tui.py The TUI calls the Jans Config API. A TUI client is configured out of the box when you run either the VM or container Jans setup. The TUI utilizes the OAuth Device Flow for user authentication--the default admin user created during setup has the correct roles to use all the TUI features. Client credentials, tokens and other data is stored in file ~/.config/jans-cli.ini in encoded format. The user-role mappings roles are defined in a Jans Auth Server introspection script ~/.config/jans-cli.ini Plugins # It's possible to extend the TUI by writing a plugin. Each plugin is loaded dynamically according to the numeric priority of the folders in /opt/jans/jans-cli/plugins . To enable a plugin, you need to edit jans-cli.ini . The default plugins are: jca_plugins = user-mgt,scim,fido2,admin-ui Administration # When you run the TUI, this is the home panel: Auth Server # The most complicated configuration belongs to Auth Server. This should be no surprise, because this component is responsible for the implementation of OpenID Provider, OAuth Authorization Server, and UMA Authorization Server endpoints. In below screenshot, we are getting the list of existing clients. It's possible to get details of any client as well. Just hit enter on any client and you will see information like this. With the button which is located on right upper side named \"Add Client\", it's possible to create new client. FIDO # The Janssen FIDO Server implements FIDO 2 and FIDO U2F endpoints. Using the TUI, you can view/update details of the FIDO configuration. There are two configurations included here: Dynamic Configuration Static Configuration SCIM # System for Cross-domain Identity Management, in short SCIM, is a specification that simplifies the exchange of user identity information across different domains. The Janssen Server provides implementation for the SCIM specification. With Janssen CLI-TUI, it's possible to view / update SCIM configuration. Command Line Logs # Jans TUI logs all write (post/put/patch) activities to file <log-dir>/cli_cmd.log , default log-dir is home directory of user executing TUI. Consider that we create a user as below We will have following line in cli_cmd.log : /usr/bin/python3 /opt/jans/jans-cli/cli/config_cli.py --operation-id post-user --data '{\"customObjectClasses\": [\"top\", \"jansPerson\"], \"customAttributes\": [{\"name\": \"middleName\", \"multiValued\": false, \"values\": [\"\"]}, {\"name\": \"sn\", \"multiValued\": false, \"values\": [\"Watts\"]}, {\"name\": \"nickname\", \"multiValued\": false, \"values\": [\"\"]}], \"mail\": \"ewatts@foo.org\", \"userId\": \"ewatts\", \"displayName\": \"Emelia Watts\", \"givenName\": \"Emelia\", \"userPassword\": \"TopSecret\", \"jansStatus\": \"active\"}' By using this line, you can create user via jans-config.py , see for example Standalone Installation # Configure the Janssen server using the jans-cli-tui a Text based User Interface app which can be installed on any remote Linux machine. There are two ways of achieving this: 1. Build pyz self executable file # pip3 install shiv wget https://github.com/JanssenProject/jans/archive/refs/heads/main.zip -O jans-main.zip unzip jans-main.zip cd jans-main/jans-cli-tui/ make zipapp After build you can execute as ./jans-cli-tui.pyz You will be prompted for credentials if you do not have ~/.config/jans-cli.ini . Contact your administrator for credentials. Administrator can obtain credidentials on Janssen Server as follows: cat /opt/jans/jans-setup/setup.properties.last | grep tui_client tui_client_encoded_pw=4jnkODv3KRV6xNm1oGQ8+g\\=\\= tui_client_id=2000.eac308d1-95e3-4e38-87cf-1532af310a9e tui_client_pw=GnEkCqg4Vsks tui_client_id is the Client ID and tui_client_pw is the Client Secret 2. Installing with pip from GitHub # pip3 install https://github.com/JanssenProject/jans/archive/refs/heads/main.zip#subdirectory=jans-cli-tui Execute: jans-cli-tui","title":"Index"},{"location":"admin/config-guide/config-tools/jans-tui/#overview","text":"The \"Text User Interface\" or \"TUI\" is a tool for admins to perform ad hoc configuration of the Janssen Project software components. You can run it by executing: /opt/jans/jans-cli/jans_cli_tui.py The TUI calls the Jans Config API. A TUI client is configured out of the box when you run either the VM or container Jans setup. The TUI utilizes the OAuth Device Flow for user authentication--the default admin user created during setup has the correct roles to use all the TUI features. Client credentials, tokens and other data is stored in file ~/.config/jans-cli.ini in encoded format. The user-role mappings roles are defined in a Jans Auth Server introspection script ~/.config/jans-cli.ini","title":"Overview"},{"location":"admin/config-guide/config-tools/jans-tui/#plugins","text":"It's possible to extend the TUI by writing a plugin. Each plugin is loaded dynamically according to the numeric priority of the folders in /opt/jans/jans-cli/plugins . To enable a plugin, you need to edit jans-cli.ini . The default plugins are: jca_plugins = user-mgt,scim,fido2,admin-ui","title":"Plugins"},{"location":"admin/config-guide/config-tools/jans-tui/#administration","text":"When you run the TUI, this is the home panel:","title":"Administration"},{"location":"admin/config-guide/config-tools/jans-tui/#auth-server","text":"The most complicated configuration belongs to Auth Server. This should be no surprise, because this component is responsible for the implementation of OpenID Provider, OAuth Authorization Server, and UMA Authorization Server endpoints. In below screenshot, we are getting the list of existing clients. It's possible to get details of any client as well. Just hit enter on any client and you will see information like this. With the button which is located on right upper side named \"Add Client\", it's possible to create new client.","title":"Auth Server"},{"location":"admin/config-guide/config-tools/jans-tui/#fido","text":"The Janssen FIDO Server implements FIDO 2 and FIDO U2F endpoints. Using the TUI, you can view/update details of the FIDO configuration. There are two configurations included here: Dynamic Configuration Static Configuration","title":"FIDO"},{"location":"admin/config-guide/config-tools/jans-tui/#scim","text":"System for Cross-domain Identity Management, in short SCIM, is a specification that simplifies the exchange of user identity information across different domains. The Janssen Server provides implementation for the SCIM specification. With Janssen CLI-TUI, it's possible to view / update SCIM configuration.","title":"SCIM"},{"location":"admin/config-guide/config-tools/jans-tui/#command-line-logs","text":"Jans TUI logs all write (post/put/patch) activities to file <log-dir>/cli_cmd.log , default log-dir is home directory of user executing TUI. Consider that we create a user as below We will have following line in cli_cmd.log : /usr/bin/python3 /opt/jans/jans-cli/cli/config_cli.py --operation-id post-user --data '{\"customObjectClasses\": [\"top\", \"jansPerson\"], \"customAttributes\": [{\"name\": \"middleName\", \"multiValued\": false, \"values\": [\"\"]}, {\"name\": \"sn\", \"multiValued\": false, \"values\": [\"Watts\"]}, {\"name\": \"nickname\", \"multiValued\": false, \"values\": [\"\"]}], \"mail\": \"ewatts@foo.org\", \"userId\": \"ewatts\", \"displayName\": \"Emelia Watts\", \"givenName\": \"Emelia\", \"userPassword\": \"TopSecret\", \"jansStatus\": \"active\"}' By using this line, you can create user via jans-config.py , see for example","title":"Command Line Logs"},{"location":"admin/config-guide/config-tools/jans-tui/#standalone-installation","text":"Configure the Janssen server using the jans-cli-tui a Text based User Interface app which can be installed on any remote Linux machine. There are two ways of achieving this:","title":"Standalone Installation"},{"location":"admin/config-guide/config-tools/jans-tui/#1-build-pyz-self-executable-file","text":"pip3 install shiv wget https://github.com/JanssenProject/jans/archive/refs/heads/main.zip -O jans-main.zip unzip jans-main.zip cd jans-main/jans-cli-tui/ make zipapp After build you can execute as ./jans-cli-tui.pyz You will be prompted for credentials if you do not have ~/.config/jans-cli.ini . Contact your administrator for credentials. Administrator can obtain credidentials on Janssen Server as follows: cat /opt/jans/jans-setup/setup.properties.last | grep tui_client tui_client_encoded_pw=4jnkODv3KRV6xNm1oGQ8+g\\=\\= tui_client_id=2000.eac308d1-95e3-4e38-87cf-1532af310a9e tui_client_pw=GnEkCqg4Vsks tui_client_id is the Client ID and tui_client_pw is the Client Secret","title":"1. Build pyz self executable file"},{"location":"admin/config-guide/config-tools/jans-tui/#2-installing-with-pip-from-github","text":"pip3 install https://github.com/JanssenProject/jans/archive/refs/heads/main.zip#subdirectory=jans-cli-tui Execute: jans-cli-tui","title":"2. Installing with pip from GitHub"},{"location":"admin/config-guide/config-tools/jans-tui/navigation-guide/","tags":["administration","configuration","tools","tui","text base UI"],"text":"General Structure: # The TUI consists of many tabs, each tab may or may not contain nested tabs. The TUI consists of one main navigation bar which contains (Auth Server, FIDO, SCIM, Scripts, Users, and Jans CLI) The tab currently in focus is highlighted at the top. ex: Note: in the image provided below SCIM is focused We can notice that there is a cursor mark on the first of the Navigation bar line, which indicates that the focus currently in this widget General Purpose shortcuts # f1 : Open help dialog (currently, help dialog is static, in the near future it will dynamically change according to the current position inside the TUI ) ESC : Close any dialog or even nested dialog Ctrl+c (Terminate) : Terminate the program (SIGINT) Navigation Shortcuts # General Navigation shortcuts # tab (Next): focus on the next field or widget. shift + tab (Previous): focus on the previous field or widget PageUp (Next tab): Jump to the next tab in dialogs (ex: Client dialog) Note: the focus must be inside the current tab In the Gif provided, the focus was inside the tab itself before we can press the PageUp key * If the focus is on the tab name itself, we can navigate to other tabs by the Up key and Down key PageDown (Previous tab) : Jump to the previous tab in dialogs (ex: Client dialog) Note: the focus must be inside the current tab In the Gif provided, the focus was inside the tab itself before we can press the PageDown key If the focus is on the tab name itself, we can navigate to other tabs by the Up key and Down key Main tabs Navigation shortcuts # Alt + key You can navigate to any tab inside the TUI by using the Alt key followed by a certain letter from the tab you want to navigate too Note: the colored character inside each Tab name is the specified letter for the navigation. you can't navigate from a tab in the main top navigation bar to a nested navigation bar inside another tab, you must navigate to it first. examples on the navigation letters for the main navigation bar: Auth Server -> A FIDO -> F SCIM -> C Scripts -> r Users -> U Jans CLI -> J Custom widget shortcuts # Note: * This section contains any widgets with special shortcuts and behavior Lists (Vertical Nav bar) # currently, we have about 6 List widgets Note: Any list widget can be navigated between its items by the Up key and Down key There are some shortcuts here that can be used in most but not all List widgets delete : can be used to delete a certain item d : can be used to view all the selected item data in the JSON format Enter : can be used to edit the current item ex: p : can be used to update user's password. Date Widgets # The date widget can be used to select a date and time. ex (Client Expiration Date) tab , shift + tab : can be used to navigate between date and time Up , Down , Right , and Left arrows: can be used to change the date and time Note: * in the date section, if you navigate to the right border and then pressed Right , the year will be increased. in the date section, if you navigate to the left border and then pressed Left , the year will be decreased. in the date section, if you navigate to the up border and then pressed Up , the month will be decreased. * in the date section, if you navigate to the down border and then pressed Down , the month will be increased. in the time section, you can navigate between hour, minute, and second by the Right key and the Left key. in the time section, you can increase the time (hour, minute, or second) by the Up key and the Down key. Label Widgets # The label widget is used with scopes to show certain items instead of a long one, it is similar to the list widget tab , shift + tab : can be used to navigate between the button and the labels Right key and Left key can be used to navigate between the labels d : can be used to view all the data of the selected label delete : can be used to delete a certain label","title":"Navigation guide"},{"location":"admin/config-guide/config-tools/jans-tui/navigation-guide/#general-structure","text":"The TUI consists of many tabs, each tab may or may not contain nested tabs. The TUI consists of one main navigation bar which contains (Auth Server, FIDO, SCIM, Scripts, Users, and Jans CLI) The tab currently in focus is highlighted at the top. ex: Note: in the image provided below SCIM is focused We can notice that there is a cursor mark on the first of the Navigation bar line, which indicates that the focus currently in this widget","title":"General Structure:"},{"location":"admin/config-guide/config-tools/jans-tui/navigation-guide/#general-purpose-shortcuts","text":"f1 : Open help dialog (currently, help dialog is static, in the near future it will dynamically change according to the current position inside the TUI ) ESC : Close any dialog or even nested dialog Ctrl+c (Terminate) : Terminate the program (SIGINT)","title":"General Purpose shortcuts"},{"location":"admin/config-guide/config-tools/jans-tui/navigation-guide/#navigation-shortcuts","text":"","title":"Navigation Shortcuts"},{"location":"admin/config-guide/config-tools/jans-tui/navigation-guide/#general-navigation-shortcuts","text":"tab (Next): focus on the next field or widget. shift + tab (Previous): focus on the previous field or widget PageUp (Next tab): Jump to the next tab in dialogs (ex: Client dialog) Note: the focus must be inside the current tab In the Gif provided, the focus was inside the tab itself before we can press the PageUp key * If the focus is on the tab name itself, we can navigate to other tabs by the Up key and Down key PageDown (Previous tab) : Jump to the previous tab in dialogs (ex: Client dialog) Note: the focus must be inside the current tab In the Gif provided, the focus was inside the tab itself before we can press the PageDown key If the focus is on the tab name itself, we can navigate to other tabs by the Up key and Down key","title":"General Navigation shortcuts"},{"location":"admin/config-guide/config-tools/jans-tui/navigation-guide/#main-tabs-navigation-shortcuts","text":"Alt + key You can navigate to any tab inside the TUI by using the Alt key followed by a certain letter from the tab you want to navigate too Note: the colored character inside each Tab name is the specified letter for the navigation. you can't navigate from a tab in the main top navigation bar to a nested navigation bar inside another tab, you must navigate to it first. examples on the navigation letters for the main navigation bar: Auth Server -> A FIDO -> F SCIM -> C Scripts -> r Users -> U Jans CLI -> J","title":"Main tabs Navigation shortcuts"},{"location":"admin/config-guide/config-tools/jans-tui/navigation-guide/#custom-widget-shortcuts","text":"Note: * This section contains any widgets with special shortcuts and behavior","title":"Custom widget shortcuts"},{"location":"admin/config-guide/config-tools/jans-tui/navigation-guide/#lists-vertical-nav-bar","text":"currently, we have about 6 List widgets Note: Any list widget can be navigated between its items by the Up key and Down key There are some shortcuts here that can be used in most but not all List widgets delete : can be used to delete a certain item d : can be used to view all the selected item data in the JSON format Enter : can be used to edit the current item ex: p : can be used to update user's password.","title":"Lists (Vertical Nav bar)"},{"location":"admin/config-guide/config-tools/jans-tui/navigation-guide/#date-widgets","text":"The date widget can be used to select a date and time. ex (Client Expiration Date) tab , shift + tab : can be used to navigate between date and time Up , Down , Right , and Left arrows: can be used to change the date and time Note: * in the date section, if you navigate to the right border and then pressed Right , the year will be increased. in the date section, if you navigate to the left border and then pressed Left , the year will be decreased. in the date section, if you navigate to the up border and then pressed Up , the month will be decreased. * in the date section, if you navigate to the down border and then pressed Down , the month will be increased. in the time section, you can navigate between hour, minute, and second by the Right key and the Left key. in the time section, you can increase the time (hour, minute, or second) by the Up key and the Down key.","title":"Date Widgets"},{"location":"admin/config-guide/config-tools/jans-tui/navigation-guide/#label-widgets","text":"The label widget is used with scopes to show certain items instead of a long one, it is similar to the list widget tab , shift + tab : can be used to navigate between the button and the labels Right key and Left key can be used to navigate between the labels d : can be used to view all the data of the selected label delete : can be used to delete a certain label","title":"Label Widgets"},{"location":"admin/config-guide/config-tools/jans-tui/using-command-line-log/","tags":["administration","configuration","tools","cli","tui","commandline","logging"],"text":"Using TUI Command Line Log # When you do a write operation (post/put/patch) with Jans TUI, it logs activities to file <log-dir>/cli_cmd.log ,default log-dir is home directory. Consider you created a user with TUI and have the following line in cli_cmd.log : /usr/bin/python3 /opt/jans/jans-cli/cli/config_cli.py --operation-id post-user --data '{\"customObjectClasses\": [\"top\", \"jansPerson\"], \"customAttributes\": [{\"name\": \"middleName\", \"multiValued\": false, \"values\": [\"\"]}, {\"name\": \"sn\", \"multiValued\": false, \"values\": [\"Watts\"]}, {\"name\": \"nickname\", \"multiValued\": false, \"values\": [\"\"]}], \"mail\": \"ewatts@foo.org\", \"userId\": \"ewatts\", \"displayName\": \"Emelia Watts\", \"givenName\": \"Emelia\", \"userPassword\": \"TopSecret\", \"jansStatus\": \"active\"}' You can modify this line to create another user, let us change the followings: userId padilla userPassword NewSecret sn Padilla givenName Reggie displayName Padilla Reggie mail reggie.padilla@egg.org New command will become: /usr/bin/python3 /opt/jans/jans-cli/cli/config_cli.py --operation-id post-user --data '{\"customObjectClasses\": [\"top\", \"jansPerson\"], \"customAttributes\": [{\"name\": \"middleName\", \"multiValued\": false, \"values\": [\"\"]}, {\"name\": \"sn\", \"multiValued\": false, \"values\": [\"Padilla\"]}, {\"name\": \"nickname\", \"multiValued\": false, \"values\": [\"\"]}], \"mail\": \"reggie.padilla@egg.org\", \"userId\": \"padilla\", \"displayName\": \"Padilla Reggie\", \"givenName\": \"Reggie\", \"userPassword\": \"NewSecret\", \"jansStatus\": \"active\"}' When you execute this command, user will be created: Server Response: { \"dn\": \"inum=65a5a60c-d314-426d-a8f4-8c36325a1024,ou=people,o=jans\", \"userId\": \"padilla\", \"createdAt\": \"2023-05-30T09:48:58\", \"customAttributes\": [ { \"name\": \"sn\", \"multiValued\": false, \"values\": [ \"Padilla\" ], \"displayValue\": \"Padilla\", \"value\": \"Padilla\" } ], \"customObjectClasses\": [ \"top\", \"jansCustomPerson\" ], \"inum\": \"65a5a60c-d314-426d-a8f4-8c36325a1024\", \"mail\": \"reggie.padilla@egg.org\", \"displayName\": \"Padilla Reggie\", \"jansStatus\": \"active\", \"givenName\": \"Reggie\", \"baseDn\": \"inum=65a5a60c-d314-426d-a8f4-8c36325a1024,ou=people,o=jans\" }","title":"Using TUI Command Line Log"},{"location":"admin/config-guide/config-tools/jans-tui/using-command-line-log/#using-tui-command-line-log","text":"When you do a write operation (post/put/patch) with Jans TUI, it logs activities to file <log-dir>/cli_cmd.log ,default log-dir is home directory. Consider you created a user with TUI and have the following line in cli_cmd.log : /usr/bin/python3 /opt/jans/jans-cli/cli/config_cli.py --operation-id post-user --data '{\"customObjectClasses\": [\"top\", \"jansPerson\"], \"customAttributes\": [{\"name\": \"middleName\", \"multiValued\": false, \"values\": [\"\"]}, {\"name\": \"sn\", \"multiValued\": false, \"values\": [\"Watts\"]}, {\"name\": \"nickname\", \"multiValued\": false, \"values\": [\"\"]}], \"mail\": \"ewatts@foo.org\", \"userId\": \"ewatts\", \"displayName\": \"Emelia Watts\", \"givenName\": \"Emelia\", \"userPassword\": \"TopSecret\", \"jansStatus\": \"active\"}' You can modify this line to create another user, let us change the followings: userId padilla userPassword NewSecret sn Padilla givenName Reggie displayName Padilla Reggie mail reggie.padilla@egg.org New command will become: /usr/bin/python3 /opt/jans/jans-cli/cli/config_cli.py --operation-id post-user --data '{\"customObjectClasses\": [\"top\", \"jansPerson\"], \"customAttributes\": [{\"name\": \"middleName\", \"multiValued\": false, \"values\": [\"\"]}, {\"name\": \"sn\", \"multiValued\": false, \"values\": [\"Padilla\"]}, {\"name\": \"nickname\", \"multiValued\": false, \"values\": [\"\"]}], \"mail\": \"reggie.padilla@egg.org\", \"userId\": \"padilla\", \"displayName\": \"Padilla Reggie\", \"givenName\": \"Reggie\", \"userPassword\": \"NewSecret\", \"jansStatus\": \"active\"}' When you execute this command, user will be created: Server Response: { \"dn\": \"inum=65a5a60c-d314-426d-a8f4-8c36325a1024,ou=people,o=jans\", \"userId\": \"padilla\", \"createdAt\": \"2023-05-30T09:48:58\", \"customAttributes\": [ { \"name\": \"sn\", \"multiValued\": false, \"values\": [ \"Padilla\" ], \"displayValue\": \"Padilla\", \"value\": \"Padilla\" } ], \"customObjectClasses\": [ \"top\", \"jansCustomPerson\" ], \"inum\": \"65a5a60c-d314-426d-a8f4-8c36325a1024\", \"mail\": \"reggie.padilla@egg.org\", \"displayName\": \"Padilla Reggie\", \"jansStatus\": \"active\", \"givenName\": \"Reggie\", \"baseDn\": \"inum=65a5a60c-d314-426d-a8f4-8c36325a1024,ou=people,o=jans\" }","title":"Using TUI Command Line Log"},{"location":"admin/developer/","tags":["administration","developer"],"text":"Overview # Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/developer/#overview","text":"Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/developer/cors/","tags":["administration","installation"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"CORS"},{"location":"admin/developer/cors/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/developer/cors/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/developer/cors/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/developer/external-libraries/","tags":["administration","developer","external","libraries"],"text":"Using External Libraries In Interception Scripts # Janssen Server Interception script is a very powerful tool that enables developers to control many different aspects of the authentication process. It is possible to use external libraries in interception scripts. It is possible to use external libraries Java libraries in pure Java based interception script. If the interception script is implemented in Jython then it is possible to use external Java libraries as well as external Python libraries .","title":"External Libraries"},{"location":"admin/developer/external-libraries/#using-external-libraries-in-interception-scripts","text":"Janssen Server Interception script is a very powerful tool that enables developers to control many different aspects of the authentication process. It is possible to use external libraries in interception scripts. It is possible to use external libraries Java libraries in pure Java based interception script. If the interception script is implemented in Jython then it is possible to use external Java libraries as well as external Python libraries .","title":"Using External Libraries In Interception Scripts"},{"location":"admin/developer/interception-scripts-debug-ce/","text":"Debugging a custom script: # Setup # Assuming that the Jans-auth server is already installed, perform the following steps: Install https://repo.gluu.org/tools/tools-install.sh Run opt/jans/bin/prepare-dev-tools.py Log in to CE Run /opt/jans/bin/eclipse.sh Once complete, start the PyDev debug server: Open the Eclipse Debug perspective From the menu: Pydev > Start Debug Server Development & Debugging # Now we are ready to perform script development and debugging. Here is a quick overview: In order to simplify development, put the script into a shared folder like /root/eclipse-workspace Then instruct jans-auth to load the script from the file system instead of LDAP Add debug instructions to the script, as specified in the next section Execute the script Enable Remote Debug in Custom Script # After the import section, add: REMOTE_DEBUG = True if REMOTE_DEBUG: try: import sys sys.path.append('/opt/libs/pydevd') import pydevd except ImportError as ex: print \"Failed to import pydevd: %s\" % ex raise Add the following lines wherever breakpoints are needed: if REMOTE_DEBUG: pydevd.settrace('localhost', port=5678, stdoutToServer=True, stderrToServer=True) Example # Copy the script to /root/eclipse-workspace/basic.py Change script Location type to File using a jans-cli Assume that we're using basic.py, Specify the Script Path location to: /root/eclipse-workspace/basic.py Enable the script using jans-cli Check the following log to verify that jans-auth loaded the script properly: /opt/jans/jetty/jans-auth/logs/jans-auth_script.log. It should look like this: ... (PythonService.java:239) - Basic. Initialization ... (PythonService.java:239) - Basic. Initialized successfully Open the following file in Eclipse: /root/eclipse-workspace/basic.py When opening the Python file for the first time, we need to instruct Eclipse to use a specific interpreter. Follow these steps: Press the \"Manual Config\" button in the dialog box after opening the Python file Open \"PyDev->Interpreters->Jython Interpreters\" Click the \"New...\" button in the right panel. Name it \"Jython\" and specify the interpreter executable \"/opt/jython/jython.jar\" Click \"OK\", then confirm the settings by clicking \"OK\" again, then \"Apply and Close\" In the final dialog, confirm the settings by clicking \"OK\" Open basic.py in a file editor. After the import section, add the following lines to load the PyDev libraries: REMOTE_DEBUG = True if REMOTE_DEBUG: try: import sys sys.path.append('/opt/libs/pydevd') import pydevd except ImportError as ex: print \"Failed to import pydevd: %s\" % ex raise Add this break condition to the first line in the authenticate method: if REMOTE_DEBUG: pydevd.settrace('localhost', port=5678, stdoutToServer=True, stderrToServer=True) 9. Save basic.py Within one minute, jans-auth should load the changed file. Check the following log file again to make sure there are no load errors: /opt/jans/jetty/jans-auth/logs/jans-auth_script.log To check if the script works, update the default authentication method to Basic Authentication. Use jans-cli. Open another browser or session and try to log in. Make sure to keep the first session open in order to disable the Basic Authentication method in case the script doesn't work as expected. After executing pydevd.settrace the script will transfer execution control to the PyDev server in Eclipse. You can use any debug commands. For example: Step Over (F6), Resume (F8), etc After debugging is finished, resume script execution to transfer execution control back to jans-auth Useful link : https://www.pydev.org/manual_adv_remote_debugger.html # X Server troubleshooting : Running /opt/jans/bin/prepare-dev-tools.py allows Eclipse to access X server. # It runs the following commands: # Only this one key is needed to access from chroot xauth -f /root/.Xauthority-jans generate :0 . trusted 2>1 >> /root/prepare-dev-tools.log # Generate our own key, xauth requires 128 bit hex encoding xauth -f /root/.Xauthority-jans add ${HOST}:0 . $(xxd -l 16 -p /dev/urandom) # Copy result key to chroot cp -f /root/.Xauthority-jans /root/.Xauthority # Allow to access local server X11 sudo su $(logname) -c \"xhost +local: Unable to access x11 # If Eclipse is unable to access X11, run the following command from the host to check if it has the necessary permissisons: user@u144:~$ xhost +local: non-network local connections being added to access control list user@u144:~$ xhost access control enabled, only authorized clients can connect LOCAL: SI:localuser:user If the user is still unable to access X11, remove .Xauthority from user home and log out/log in again.","title":"Debugging a custom script:"},{"location":"admin/developer/interception-scripts-debug-ce/#debugging-a-custom-script","text":"","title":"Debugging a custom script:"},{"location":"admin/developer/interception-scripts-debug-ce/#setup","text":"Assuming that the Jans-auth server is already installed, perform the following steps: Install https://repo.gluu.org/tools/tools-install.sh Run opt/jans/bin/prepare-dev-tools.py Log in to CE Run /opt/jans/bin/eclipse.sh Once complete, start the PyDev debug server: Open the Eclipse Debug perspective From the menu: Pydev > Start Debug Server","title":"Setup"},{"location":"admin/developer/interception-scripts-debug-ce/#development-debugging","text":"Now we are ready to perform script development and debugging. Here is a quick overview: In order to simplify development, put the script into a shared folder like /root/eclipse-workspace Then instruct jans-auth to load the script from the file system instead of LDAP Add debug instructions to the script, as specified in the next section Execute the script","title":"Development &amp; Debugging"},{"location":"admin/developer/interception-scripts-debug-ce/#enable-remote-debug-in-custom-script","text":"After the import section, add: REMOTE_DEBUG = True if REMOTE_DEBUG: try: import sys sys.path.append('/opt/libs/pydevd') import pydevd except ImportError as ex: print \"Failed to import pydevd: %s\" % ex raise Add the following lines wherever breakpoints are needed: if REMOTE_DEBUG: pydevd.settrace('localhost', port=5678, stdoutToServer=True, stderrToServer=True)","title":"Enable Remote Debug in Custom Script"},{"location":"admin/developer/interception-scripts-debug-ce/#example","text":"Copy the script to /root/eclipse-workspace/basic.py Change script Location type to File using a jans-cli Assume that we're using basic.py, Specify the Script Path location to: /root/eclipse-workspace/basic.py Enable the script using jans-cli Check the following log to verify that jans-auth loaded the script properly: /opt/jans/jetty/jans-auth/logs/jans-auth_script.log. It should look like this: ... (PythonService.java:239) - Basic. Initialization ... (PythonService.java:239) - Basic. Initialized successfully Open the following file in Eclipse: /root/eclipse-workspace/basic.py When opening the Python file for the first time, we need to instruct Eclipse to use a specific interpreter. Follow these steps: Press the \"Manual Config\" button in the dialog box after opening the Python file Open \"PyDev->Interpreters->Jython Interpreters\" Click the \"New...\" button in the right panel. Name it \"Jython\" and specify the interpreter executable \"/opt/jython/jython.jar\" Click \"OK\", then confirm the settings by clicking \"OK\" again, then \"Apply and Close\" In the final dialog, confirm the settings by clicking \"OK\" Open basic.py in a file editor. After the import section, add the following lines to load the PyDev libraries: REMOTE_DEBUG = True if REMOTE_DEBUG: try: import sys sys.path.append('/opt/libs/pydevd') import pydevd except ImportError as ex: print \"Failed to import pydevd: %s\" % ex raise Add this break condition to the first line in the authenticate method: if REMOTE_DEBUG: pydevd.settrace('localhost', port=5678, stdoutToServer=True, stderrToServer=True) 9. Save basic.py Within one minute, jans-auth should load the changed file. Check the following log file again to make sure there are no load errors: /opt/jans/jetty/jans-auth/logs/jans-auth_script.log To check if the script works, update the default authentication method to Basic Authentication. Use jans-cli. Open another browser or session and try to log in. Make sure to keep the first session open in order to disable the Basic Authentication method in case the script doesn't work as expected. After executing pydevd.settrace the script will transfer execution control to the PyDev server in Eclipse. You can use any debug commands. For example: Step Over (F6), Resume (F8), etc After debugging is finished, resume script execution to transfer execution control back to jans-auth","title":"Example"},{"location":"admin/developer/interception-scripts-debug-ce/#useful-link-httpswwwpydevorgmanual_adv_remote_debuggerhtml","text":"","title":"Useful link : https://www.pydev.org/manual_adv_remote_debugger.html"},{"location":"admin/developer/interception-scripts-debug-ce/#x-server-troubleshooting-running-optjansbinprepare-dev-toolspy-allows-eclipse-to-access-x-server","text":"It runs the following commands: # Only this one key is needed to access from chroot xauth -f /root/.Xauthority-jans generate :0 . trusted 2>1 >> /root/prepare-dev-tools.log # Generate our own key, xauth requires 128 bit hex encoding xauth -f /root/.Xauthority-jans add ${HOST}:0 . $(xxd -l 16 -p /dev/urandom) # Copy result key to chroot cp -f /root/.Xauthority-jans /root/.Xauthority # Allow to access local server X11 sudo su $(logname) -c \"xhost +local:","title":"X Server troubleshooting : Running /opt/jans/bin/prepare-dev-tools.py allows Eclipse to access X server."},{"location":"admin/developer/interception-scripts-debug-ce/#unable-to-access-x11","text":"If Eclipse is unable to access X11, run the following command from the host to check if it has the necessary permissisons: user@u144:~$ xhost +local: non-network local connections being added to access control list user@u144:~$ xhost access control enabled, only authorized clients can connect LOCAL: SI:localuser:user If the user is still unable to access X11, remove .Xauthority from user home and log out/log in again.","title":"Unable to access x11"},{"location":"admin/developer/interception-scripts-debug/","tags":["administration","developer"],"text":"Setup # For development the kubernetes setup must be local and accessible to the debug server address. The following steps will walk you trough a setup using Minikube with docker driver, and ksync for syncing the files between local, and the container. The following instructions assume a fresh ubuntu 20.04, however the setup can be done on a different operating systems such as macOS or Windows. System Requirements # The minimum system requirement for running all jans services are 8GB RAM , 4 CPU , and 50GB disk . This can be dropped to 4GB RAM , 4CPU and 20GB disk space if operating with required services auth-server, and LDAP. Setup Minikube # Install Docker 18.09 or higher. For other operating systems follow the appropriate docs . Install minikube , but do not start it yet. Install kubectl . Once Minikube is installed start it with the docker driver. minikube start --driver = docker If not automatically set configure kubectl to use the cluster: kubectl config use-context minikube Enable ingress on minikube minikube addons enable ingress Install Janssen # Install Helm3 Install Janssen helm repo add jans https://janssenproject.github.io/jans-cloud-native/charts kubectl create ns jans helm install jans-auth jans/jans -n jans --set global.lbIp = \" $( minikube ip ) \" --set global.provisioner = \"k8s.io/minikube-hostpath\" --devel Install Ksync # Once Janssen is fully running we want to create an active sync between a local folder, and the folder that will hold the interception scripts inside the auth server container. Create a folder that will hold the interception script inside the auth server container. Place the namespace where jans is installed in the env JANS_NAMESPACE and execute: JANS_NAMESPACE = <jans-namespace> for pod in $( kubectl get pods -n $JANS_NAMESPACE --selector = APP_NAME = auth-server --output = jsonpath ={ .items..metadata.name } ) ; do kubectl exec -ti $pod -n $JANS_NAMESPACE -- mkdir -p /deploy/interception-scripts-ksync done Install ksync curl https://ksync.github.io/gimme-that/gimme.sh | bash Initialize ksync ksync init -n <jans-namespace> Start ksync. ksync watch -n <jans-namespace> & Open a new terminal and create a folder called interception-scripts-ksync mkdir -p $( pwd ) /interception-scripts-ksync Create a spec to start syncing folders between the local system and auth server container. ksync create --selector = APP_NAME = auth-server $( pwd ) /interception-scripts-ksync /deploy/interception-scripts-ksync -n <jans-namespace> Check the status. Also check the terminal where the watch command is running. ksync get 1. Move the interception script to the local folder $(pwd)/interception-scripts-ksync . In the below example we copied the following script as basic.py : # oxAuth is available under the MIT License (2008). See http://opensource.org/licenses/MIT for full text. # Copyright (c) 2016, Janssen # # Author: Yuriy Movchan # from io.jans.service.cdi.util import CdiUtil from io.jans.as.server.security import Identity from io.jans.model.custom.script.type.auth import PersonAuthenticationType from io.jans.as.server.service import AuthenticationService from io.jans.util import StringHelper import java class PersonAuthentication ( PersonAuthenticationType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"Basic. Initialization\" print \"Basic. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"Basic. Destroy\" print \"Basic. Destroyed successfully\" return True def getAuthenticationMethodClaims ( self , requestParameters ): return None def getApiVersion ( self ): return 11 def isValidAuthenticationMethod ( self , usageType , configurationAttributes ): return True def getAlternativeAuthenticationMethod ( self , usageType , configurationAttributes ): return None def authenticate ( self , configurationAttributes , requestParameters , step ): authenticationService = CdiUtil . bean ( AuthenticationService ) if ( step == 1 ): print \"Basic. Authenticate for step 1\" identity = CdiUtil . bean ( Identity ) credentials = identity . getCredentials () user_name = credentials . getUsername () user_password = credentials . getPassword () logged_in = False if ( StringHelper . isNotEmptyString ( user_name ) and StringHelper . isNotEmptyString ( user_password )): logged_in = authenticationService . authenticate ( user_name , user_password ) if ( not logged_in ): return False return True else : return False def prepareForStep ( self , configurationAttributes , requestParameters , step ): if ( step == 1 ): print \"Basic. Prepare for Step 1\" return True else : return False def getExtraParametersForStep ( self , configurationAttributes , step ): return None def getCountAuthenticationSteps ( self , configurationAttributes ): return 1 def getPageForStep ( self , configurationAttributes , step ): return \"\" def getNextStep ( self , configurationAttributes , requestParameters , step ): return - 1 def getLogoutExternalUrl ( self , configurationAttributes , requestParameters ): print \"Get external logout URL call\" return None def logout ( self , configurationAttributes , requestParameters ): return True Install an IDE # The IDE can be of choice but must contain PyDev. We chose Liclipse for this demonstration. Once complete, start the PyDev debug server: Open Liclipse Install the jython jar for the interpreter. wget https://repo1.maven.org/maven2/org/python/jython-standalone/2.7.2/jython-standalone-2.7.2.jar From the menu: go to File -> Open File and choose the interception script that will be debugged in $(pwd)/interception-scripts-ksync . When opening the Python file for the first time, we need to instruct Liclipse to use a specific interpreter. Follow these steps: Press the \"Manual Config\" button in the dialog box after opening the Python file Open \"PyDev->Interpreters->Jython Interpreters\" Click the \"New...\" button in the right panel. Name it \"Jython\" and specify the interpreter executable that was downloaded previously \"jython-standalone-2.7.2.jar\" Click \"OK\", then confirm the settings by clicking \"OK\" again, then \"Apply and Close\" In the final dialog, confirm the settings by clicking \"OK\" From the menu: go to Window -> Perspective -> Open Perspective -> Other.. -> Debug From the menu: go to Pydev > Start Debug Server . Now the server should have started at port 5678 . Take a note of the ip of the computer running Liclipse and save it for later use. Remember that the auth server pod must be able to communicate with this ip. If you have followed the instructions above and installed minikube on your local computer which is the same computer Liclipse is operating on you should be able to reach it from within the pods. Development & Debugging # Now we are ready to perform script development and debugging. Here is a quick overview: Enable remote debugging on the jans-auth service. Instruct the auth server to load the script from the file system instead of LDAP. Add debug instructions to the script. Execute the script. Enable Remote Debugging in jans-auth # In order to enable remote debugging in the jans-auth process, open /etc/default/jans-auth in your favorite text editor. The default JAVA_OPTIONS variable is as follows: JAVA_OPTIONS=\"-server -Xms256m -Xmx928m -XX:+DisableExplicitGC -Djans.base=/etc/jans -Dserver.base=/opt/jans/jetty/jans-auth -Dlog.base=/opt/jans/jetty/jans-auth -Dpython.home=/opt/jython\" Modify to this: JAVA_OPTIONS=\"-server -Xms256m -Xmx928m -XX:+DisableExplicitGC -Djans.base=/etc/jans -Dserver.base=/opt/jans/jetty/jans-auth -Dlog.base=/opt/jans/jetty/jans-auth -Dpython.home=/opt/jython -Dorg.eclipse.jetty.server.Request.maxFormContentSize=50000000 -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5005\" The last line will enable remote debug on port 5005. Now restart the jans-auth service. # To list all jans processes systemctl list-units --all \"jans*\" # On Ubuntu, the service name is jans-auth.service systemctl restart jans-auth.service If you are running Jans on a local VM or anywhere that is not the same as the machine that will be debugging, you will need to set up an SSH tunnel on port 5005. Execute the following command: ssh -L 5005:localhost:5005 <username>@<host> This will cause your local host's port 5005 to listen on the remote server's port 5005. Now you can use your favorite IDE and set up the remote debugger to connect to localhost:5005 . Enable remote debug in Jython Custom Script # For Jython scripts, we need additional steps to enable breakpoints. After the import section, add: REMOTE_DEBUG = True if REMOTE_DEBUG: try: import sys import pydevd except ImportError as ex: print \"Failed to import pydevd: %s\" % ex raise Add the following lines wherever breakpoints are needed: if REMOTE_DEBUG: pydevd.settrace('localhost', port=5678, stdoutToServer=True, stderrToServer=True) Sample Scenario # Copy the below script to $(pwd)/interception-scripts-ksync/basic.py # oxAuth is available under the MIT License (2008). See http://opensource.org/licenses/MIT for full text. # Copyright (c) 2016, Janssen # # Author: Yuriy Movchan # from io.jans.service.cdi.util import CdiUtil from io.jans.as.server.security import Identity from io.jans.model.custom.script.type.auth import PersonAuthenticationType from io.jans.as.server.service import AuthenticationService from io.jans.util import StringHelper import java class PersonAuthentication ( PersonAuthenticationType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"Basic. Initialization\" print \"Basic. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"Basic. Destroy\" print \"Basic. Destroyed successfully\" return True def getAuthenticationMethodClaims ( self , requestParameters ): return None def getApiVersion ( self ): return 11 def isValidAuthenticationMethod ( self , usageType , configurationAttributes ): return True def getAlternativeAuthenticationMethod ( self , usageType , configurationAttributes ): return None def authenticate ( self , configurationAttributes , requestParameters , step ): authenticationService = CdiUtil . bean ( AuthenticationService ) if ( step == 1 ): print \"Basic. Authenticate for step 1\" identity = CdiUtil . bean ( Identity ) credentials = identity . getCredentials () user_name = credentials . getUsername () user_password = credentials . getPassword () logged_in = False if ( StringHelper . isNotEmptyString ( user_name ) and StringHelper . isNotEmptyString ( user_password )): logged_in = authenticationService . authenticate ( user_name , user_password ) if ( not logged_in ): return False return True else : return False def prepareForStep ( self , configurationAttributes , requestParameters , step ): if ( step == 1 ): print \"Basic. Prepare for Step 1\" return True else : return False def getExtraParametersForStep ( self , configurationAttributes , step ): return None def getCountAuthenticationSteps ( self , configurationAttributes ): return 1 def getPageForStep ( self , configurationAttributes , step ): return \"\" def getNextStep ( self , configurationAttributes , requestParameters , step ): return - 1 def getLogoutExternalUrl ( self , configurationAttributes , requestParameters ): print \"Get external logout URL call\" return None def logout ( self , configurationAttributes , requestParameters ): return True Make sure to have an LDAP browser available. We recommend Apache Directory Studio . Port forward the opendj pod. kubectl port-forward jans-opendj-0 -n <jans-namespace> 1636 :1636 --address 0 .0.0.0 Create a connection to the ldap browser. The default password will be Test1234# if not changed in the helm install command. Inside the browser navigate to o=jans, ou=scripts . Right click on ou=scripts and click on Quick Search . Inside the pop up box that appears fill Returning Attributes with displayName , and press Apply and Close In the results that appear click on the Dn that has a displayName of basic . Choose to load the script from file instead of ldap. Inside the browser change jansModuleProperty with value {\"value1\":\"location_type\",\"value2\":\"ldap\",\"description\":\"\"} to {\"value1\":\"location_type\",\"value2\":\"file\",\"description\":\"\"} Specify the Script Path location to the location of the folder inside auth server pods: /deploy/interception-scripts-ksync/basic.py . Right click the upper jansModuleProperty and click New Value . A new entry for jansModuleProperty will be created. Insert the following for the value: {\"value1\":\"location_path\",\"value2\":\"/deploy/interception-scripts-ksync/basic.py\",\"description\":\"\"} Enable the script by settings jansEnabled to true . The following is an example of how the basic script entry should look. Check the following log inside the the auth-server container to verify that auth server loaded the script properly: /opt/jans/jetty/jans-auth/logs/jans-auth_script.log . It should look like this: kubectl exec -ti <auth-server-pod-name> -n <jans-namespace> -- tail -f /opt/jans/jetty/jans-auth/logs/jans-auth_script.log You should find the following in the log: ... (PythonService.java:239) - Basic. Initialization ... (PythonService.java:239) - Basic. Initialized successfully Download the jython jar for the interpreter. wget https://repo1.maven.org/maven2/org/python/jython-standalone/2.7.2/jython-standalone-2.7.2.jar From the IDE (Liclipse) menu: navigate to File -> Open File and choose the interception script that will be debugged in $(pwd)/interception-scripts-ksync/basic.py When opening the Python file for the first time, we need to instruct Liclipse to use a specific interpreter. Follow these steps: Press the \"Manual Config\" button in the dialog box after opening the Python file Open \"PyDev->Interpreters->Jython Interpreters\" Click the \"New...\" button in the right panel. Name it \"Jython\" and specify the interpreter executable that was downloaded previously \"jython-standalone-2.7.2.jar\" Click \"OK\", then confirm the settings by clicking \"OK\" again, then \"Apply and Close\" In the final dialog, confirm the settings by clicking \"OK\" Open basic.py in a file editor. After the import section, add the following lines to load the PyDev libraries: REMOTE_DEBUG = True if REMOTE_DEBUG: try: import sys import pydevd except ImportError as ex: print \"Failed to import pydevd: %s\" % ex raise Add this break condition to the first line in the authenticate method. Place the ip of the maching running the ide , here liclipse i.e 192.168.140.2 . if REMOTE_DEBUG: pydevd.settrace ( '<ip-of-machine-running-ide>' , port = 5678 , stdoutToServer = True, stderrToServer = True ) Save basic.py Within one minute, the auth server should load the changed file. Check the following log file again to make sure there are no load errors: /opt/jans/jetty/jans-auth/logs/jans-auth_script.log To check if the script works, update the default authentication method to Basic Authentication. Preform this in the LDAP browser. Navigate to o=jans,ou=configuration . Change the jansAuthMode to basic instead of simple_password_auth . After executing pydevd.settrace the script will transfer execution control to the PyDev server in Liclipse. You can use any debug commands. For example: Step Over (F6), Resume (F8), etc After debugging is finished, resume script execution to transfer execution control back to the auth server.","title":"Script Debugging"},{"location":"admin/developer/interception-scripts-debug/#setup","text":"For development the kubernetes setup must be local and accessible to the debug server address. The following steps will walk you trough a setup using Minikube with docker driver, and ksync for syncing the files between local, and the container. The following instructions assume a fresh ubuntu 20.04, however the setup can be done on a different operating systems such as macOS or Windows.","title":"Setup"},{"location":"admin/developer/interception-scripts-debug/#system-requirements","text":"The minimum system requirement for running all jans services are 8GB RAM , 4 CPU , and 50GB disk . This can be dropped to 4GB RAM , 4CPU and 20GB disk space if operating with required services auth-server, and LDAP.","title":"System Requirements"},{"location":"admin/developer/interception-scripts-debug/#setup-minikube","text":"Install Docker 18.09 or higher. For other operating systems follow the appropriate docs . Install minikube , but do not start it yet. Install kubectl . Once Minikube is installed start it with the docker driver. minikube start --driver = docker If not automatically set configure kubectl to use the cluster: kubectl config use-context minikube Enable ingress on minikube minikube addons enable ingress","title":"Setup Minikube"},{"location":"admin/developer/interception-scripts-debug/#install-janssen","text":"Install Helm3 Install Janssen helm repo add jans https://janssenproject.github.io/jans-cloud-native/charts kubectl create ns jans helm install jans-auth jans/jans -n jans --set global.lbIp = \" $( minikube ip ) \" --set global.provisioner = \"k8s.io/minikube-hostpath\" --devel","title":"Install Janssen"},{"location":"admin/developer/interception-scripts-debug/#install-ksync","text":"Once Janssen is fully running we want to create an active sync between a local folder, and the folder that will hold the interception scripts inside the auth server container. Create a folder that will hold the interception script inside the auth server container. Place the namespace where jans is installed in the env JANS_NAMESPACE and execute: JANS_NAMESPACE = <jans-namespace> for pod in $( kubectl get pods -n $JANS_NAMESPACE --selector = APP_NAME = auth-server --output = jsonpath ={ .items..metadata.name } ) ; do kubectl exec -ti $pod -n $JANS_NAMESPACE -- mkdir -p /deploy/interception-scripts-ksync done Install ksync curl https://ksync.github.io/gimme-that/gimme.sh | bash Initialize ksync ksync init -n <jans-namespace> Start ksync. ksync watch -n <jans-namespace> & Open a new terminal and create a folder called interception-scripts-ksync mkdir -p $( pwd ) /interception-scripts-ksync Create a spec to start syncing folders between the local system and auth server container. ksync create --selector = APP_NAME = auth-server $( pwd ) /interception-scripts-ksync /deploy/interception-scripts-ksync -n <jans-namespace> Check the status. Also check the terminal where the watch command is running. ksync get 1. Move the interception script to the local folder $(pwd)/interception-scripts-ksync . In the below example we copied the following script as basic.py : # oxAuth is available under the MIT License (2008). See http://opensource.org/licenses/MIT for full text. # Copyright (c) 2016, Janssen # # Author: Yuriy Movchan # from io.jans.service.cdi.util import CdiUtil from io.jans.as.server.security import Identity from io.jans.model.custom.script.type.auth import PersonAuthenticationType from io.jans.as.server.service import AuthenticationService from io.jans.util import StringHelper import java class PersonAuthentication ( PersonAuthenticationType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"Basic. Initialization\" print \"Basic. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"Basic. Destroy\" print \"Basic. Destroyed successfully\" return True def getAuthenticationMethodClaims ( self , requestParameters ): return None def getApiVersion ( self ): return 11 def isValidAuthenticationMethod ( self , usageType , configurationAttributes ): return True def getAlternativeAuthenticationMethod ( self , usageType , configurationAttributes ): return None def authenticate ( self , configurationAttributes , requestParameters , step ): authenticationService = CdiUtil . bean ( AuthenticationService ) if ( step == 1 ): print \"Basic. Authenticate for step 1\" identity = CdiUtil . bean ( Identity ) credentials = identity . getCredentials () user_name = credentials . getUsername () user_password = credentials . getPassword () logged_in = False if ( StringHelper . isNotEmptyString ( user_name ) and StringHelper . isNotEmptyString ( user_password )): logged_in = authenticationService . authenticate ( user_name , user_password ) if ( not logged_in ): return False return True else : return False def prepareForStep ( self , configurationAttributes , requestParameters , step ): if ( step == 1 ): print \"Basic. Prepare for Step 1\" return True else : return False def getExtraParametersForStep ( self , configurationAttributes , step ): return None def getCountAuthenticationSteps ( self , configurationAttributes ): return 1 def getPageForStep ( self , configurationAttributes , step ): return \"\" def getNextStep ( self , configurationAttributes , requestParameters , step ): return - 1 def getLogoutExternalUrl ( self , configurationAttributes , requestParameters ): print \"Get external logout URL call\" return None def logout ( self , configurationAttributes , requestParameters ): return True","title":"Install Ksync"},{"location":"admin/developer/interception-scripts-debug/#install-an-ide","text":"The IDE can be of choice but must contain PyDev. We chose Liclipse for this demonstration. Once complete, start the PyDev debug server: Open Liclipse Install the jython jar for the interpreter. wget https://repo1.maven.org/maven2/org/python/jython-standalone/2.7.2/jython-standalone-2.7.2.jar From the menu: go to File -> Open File and choose the interception script that will be debugged in $(pwd)/interception-scripts-ksync . When opening the Python file for the first time, we need to instruct Liclipse to use a specific interpreter. Follow these steps: Press the \"Manual Config\" button in the dialog box after opening the Python file Open \"PyDev->Interpreters->Jython Interpreters\" Click the \"New...\" button in the right panel. Name it \"Jython\" and specify the interpreter executable that was downloaded previously \"jython-standalone-2.7.2.jar\" Click \"OK\", then confirm the settings by clicking \"OK\" again, then \"Apply and Close\" In the final dialog, confirm the settings by clicking \"OK\" From the menu: go to Window -> Perspective -> Open Perspective -> Other.. -> Debug From the menu: go to Pydev > Start Debug Server . Now the server should have started at port 5678 . Take a note of the ip of the computer running Liclipse and save it for later use. Remember that the auth server pod must be able to communicate with this ip. If you have followed the instructions above and installed minikube on your local computer which is the same computer Liclipse is operating on you should be able to reach it from within the pods.","title":"Install an IDE"},{"location":"admin/developer/interception-scripts-debug/#development-debugging","text":"Now we are ready to perform script development and debugging. Here is a quick overview: Enable remote debugging on the jans-auth service. Instruct the auth server to load the script from the file system instead of LDAP. Add debug instructions to the script. Execute the script.","title":"Development &amp; Debugging"},{"location":"admin/developer/interception-scripts-debug/#enable-remote-debugging-in-jans-auth","text":"In order to enable remote debugging in the jans-auth process, open /etc/default/jans-auth in your favorite text editor. The default JAVA_OPTIONS variable is as follows: JAVA_OPTIONS=\"-server -Xms256m -Xmx928m -XX:+DisableExplicitGC -Djans.base=/etc/jans -Dserver.base=/opt/jans/jetty/jans-auth -Dlog.base=/opt/jans/jetty/jans-auth -Dpython.home=/opt/jython\" Modify to this: JAVA_OPTIONS=\"-server -Xms256m -Xmx928m -XX:+DisableExplicitGC -Djans.base=/etc/jans -Dserver.base=/opt/jans/jetty/jans-auth -Dlog.base=/opt/jans/jetty/jans-auth -Dpython.home=/opt/jython -Dorg.eclipse.jetty.server.Request.maxFormContentSize=50000000 -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5005\" The last line will enable remote debug on port 5005. Now restart the jans-auth service. # To list all jans processes systemctl list-units --all \"jans*\" # On Ubuntu, the service name is jans-auth.service systemctl restart jans-auth.service If you are running Jans on a local VM or anywhere that is not the same as the machine that will be debugging, you will need to set up an SSH tunnel on port 5005. Execute the following command: ssh -L 5005:localhost:5005 <username>@<host> This will cause your local host's port 5005 to listen on the remote server's port 5005. Now you can use your favorite IDE and set up the remote debugger to connect to localhost:5005 .","title":"Enable Remote Debugging in jans-auth"},{"location":"admin/developer/interception-scripts-debug/#enable-remote-debug-in-jython-custom-script","text":"For Jython scripts, we need additional steps to enable breakpoints. After the import section, add: REMOTE_DEBUG = True if REMOTE_DEBUG: try: import sys import pydevd except ImportError as ex: print \"Failed to import pydevd: %s\" % ex raise Add the following lines wherever breakpoints are needed: if REMOTE_DEBUG: pydevd.settrace('localhost', port=5678, stdoutToServer=True, stderrToServer=True)","title":"Enable remote debug in Jython Custom Script"},{"location":"admin/developer/interception-scripts-debug/#sample-scenario","text":"Copy the below script to $(pwd)/interception-scripts-ksync/basic.py # oxAuth is available under the MIT License (2008). See http://opensource.org/licenses/MIT for full text. # Copyright (c) 2016, Janssen # # Author: Yuriy Movchan # from io.jans.service.cdi.util import CdiUtil from io.jans.as.server.security import Identity from io.jans.model.custom.script.type.auth import PersonAuthenticationType from io.jans.as.server.service import AuthenticationService from io.jans.util import StringHelper import java class PersonAuthentication ( PersonAuthenticationType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"Basic. Initialization\" print \"Basic. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"Basic. Destroy\" print \"Basic. Destroyed successfully\" return True def getAuthenticationMethodClaims ( self , requestParameters ): return None def getApiVersion ( self ): return 11 def isValidAuthenticationMethod ( self , usageType , configurationAttributes ): return True def getAlternativeAuthenticationMethod ( self , usageType , configurationAttributes ): return None def authenticate ( self , configurationAttributes , requestParameters , step ): authenticationService = CdiUtil . bean ( AuthenticationService ) if ( step == 1 ): print \"Basic. Authenticate for step 1\" identity = CdiUtil . bean ( Identity ) credentials = identity . getCredentials () user_name = credentials . getUsername () user_password = credentials . getPassword () logged_in = False if ( StringHelper . isNotEmptyString ( user_name ) and StringHelper . isNotEmptyString ( user_password )): logged_in = authenticationService . authenticate ( user_name , user_password ) if ( not logged_in ): return False return True else : return False def prepareForStep ( self , configurationAttributes , requestParameters , step ): if ( step == 1 ): print \"Basic. Prepare for Step 1\" return True else : return False def getExtraParametersForStep ( self , configurationAttributes , step ): return None def getCountAuthenticationSteps ( self , configurationAttributes ): return 1 def getPageForStep ( self , configurationAttributes , step ): return \"\" def getNextStep ( self , configurationAttributes , requestParameters , step ): return - 1 def getLogoutExternalUrl ( self , configurationAttributes , requestParameters ): print \"Get external logout URL call\" return None def logout ( self , configurationAttributes , requestParameters ): return True Make sure to have an LDAP browser available. We recommend Apache Directory Studio . Port forward the opendj pod. kubectl port-forward jans-opendj-0 -n <jans-namespace> 1636 :1636 --address 0 .0.0.0 Create a connection to the ldap browser. The default password will be Test1234# if not changed in the helm install command. Inside the browser navigate to o=jans, ou=scripts . Right click on ou=scripts and click on Quick Search . Inside the pop up box that appears fill Returning Attributes with displayName , and press Apply and Close In the results that appear click on the Dn that has a displayName of basic . Choose to load the script from file instead of ldap. Inside the browser change jansModuleProperty with value {\"value1\":\"location_type\",\"value2\":\"ldap\",\"description\":\"\"} to {\"value1\":\"location_type\",\"value2\":\"file\",\"description\":\"\"} Specify the Script Path location to the location of the folder inside auth server pods: /deploy/interception-scripts-ksync/basic.py . Right click the upper jansModuleProperty and click New Value . A new entry for jansModuleProperty will be created. Insert the following for the value: {\"value1\":\"location_path\",\"value2\":\"/deploy/interception-scripts-ksync/basic.py\",\"description\":\"\"} Enable the script by settings jansEnabled to true . The following is an example of how the basic script entry should look. Check the following log inside the the auth-server container to verify that auth server loaded the script properly: /opt/jans/jetty/jans-auth/logs/jans-auth_script.log . It should look like this: kubectl exec -ti <auth-server-pod-name> -n <jans-namespace> -- tail -f /opt/jans/jetty/jans-auth/logs/jans-auth_script.log You should find the following in the log: ... (PythonService.java:239) - Basic. Initialization ... (PythonService.java:239) - Basic. Initialized successfully Download the jython jar for the interpreter. wget https://repo1.maven.org/maven2/org/python/jython-standalone/2.7.2/jython-standalone-2.7.2.jar From the IDE (Liclipse) menu: navigate to File -> Open File and choose the interception script that will be debugged in $(pwd)/interception-scripts-ksync/basic.py When opening the Python file for the first time, we need to instruct Liclipse to use a specific interpreter. Follow these steps: Press the \"Manual Config\" button in the dialog box after opening the Python file Open \"PyDev->Interpreters->Jython Interpreters\" Click the \"New...\" button in the right panel. Name it \"Jython\" and specify the interpreter executable that was downloaded previously \"jython-standalone-2.7.2.jar\" Click \"OK\", then confirm the settings by clicking \"OK\" again, then \"Apply and Close\" In the final dialog, confirm the settings by clicking \"OK\" Open basic.py in a file editor. After the import section, add the following lines to load the PyDev libraries: REMOTE_DEBUG = True if REMOTE_DEBUG: try: import sys import pydevd except ImportError as ex: print \"Failed to import pydevd: %s\" % ex raise Add this break condition to the first line in the authenticate method. Place the ip of the maching running the ide , here liclipse i.e 192.168.140.2 . if REMOTE_DEBUG: pydevd.settrace ( '<ip-of-machine-running-ide>' , port = 5678 , stdoutToServer = True, stderrToServer = True ) Save basic.py Within one minute, the auth server should load the changed file. Check the following log file again to make sure there are no load errors: /opt/jans/jetty/jans-auth/logs/jans-auth_script.log To check if the script works, update the default authentication method to Basic Authentication. Preform this in the LDAP browser. Navigate to o=jans,ou=configuration . Change the jansAuthMode to basic instead of simple_password_auth . After executing pydevd.settrace the script will transfer execution control to the PyDev server in Liclipse. You can use any debug commands. For example: Step Over (F6), Resume (F8), etc After debugging is finished, resume script execution to transfer execution control back to the auth server.","title":"Sample Scenario"},{"location":"admin/developer/interception-scripts/","tags":["administration","developer"],"text":"Interception Scripts (or custom scripts) # Interception scripts (or custom scripts) allow you to define custom business logic for various features offered by the OpenID Provider (Jans-auth server). Some examples of features which can be customized are - implementing a 2FA authentication method, consent gathering, client registration, adding business specific claims to ID token or Access token etc. Scripts can easily be upgraded and doesn't require forking the Jans Server code or re-building it. Types of Interception scripts in Jans server # Listed below, are custom scripts classified into various types, each of which represents a feature of the Jans server that can be extended as per the business need. Each script type is described by a java interface whose methods should be overridden to implement your business case. Person Authentication : Allows the definition of multi-step authentication workflows, including adaptive authentication - where the number of steps varies depending on the context. Consent Gathering : Allows exact customization of the authorization (or consent) process. By default, the OP will request authorization for each scope, and display the respective scope description. Update User Client Registration : Allows implementing custom business logic during dynamic client registration, including validating SSA's and granting scopes. Dynamic Scopes : Enables admin to generate scopes on the fly, for example by calling external APIs ID Generator Update Token : Enables transformation of claims and values in id_token, Access token and Refresh tokens; allows the setting of token lifetime; allows the addition or removal of scopes to / from tokens; allows the addition of audit logs each time a token is created. Session Management SCIM Introspection : Introspection scripts allows to modify response of Introspection Endpoint spec and present additional meta information surrounding the token. Post Authentication Select Account Resource Owner Password Credentials UMA 2 RPT Authorization Policies UMA 2 Claims-Gathering Fido2 Extension : Extension of attestation and assertion endpoints. Implementation languages - Jython or pure Java # Interception scripts are written in Jython or in pure Java , enabling Java or Python libraries to be imported. Implementation in Pure Java # A script in Java refers to a java source file (e.g. Discovery.java ) which is compiled by AS and executed at runtime. Some rules: The java class file containing the script should not have a package set. The name of the class must match to the name set in CustomScriptType source code (e.g. for discovery script it is \"Discovery\") Scripts must implement predefined interface which can be found against the CustomScriptType . For e.g. if you are writing a Person authentication script then your class should implement the following interface All libraries available at runtime to server are available also to pure java script To log to jans-auth_script.log use scriptLogger Normal log will log in to jans-auth.log Example pure java script import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.model.custom.script.type.discovery.DiscoveryType ; import io.jans.service.custom.script.CustomScriptManager ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; import org.json.JSONObject ; import java.util.Map ; /** * @author Yuriy Zabrovarnyy */ public class Discovery implements DiscoveryType { private static final Logger log = LoggerFactory . getLogger ( Discovery . class ); private static final Logger scriptLogger = LoggerFactory . getLogger ( CustomScriptManager . class ); @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Init of Discovery Java custom script\" ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Init of Discovery Java custom script\" ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Destroy of Discovery Java custom script\" ); return true ; } @Override public int getApiVersion () { log . info ( \"getApiVersion Discovery Java custom script: 11\" ); return 11 ; } @Override public boolean modifyResponse ( Object responseAsJsonObject , Object context ) { scriptLogger . info ( \"write to script logger\" ); JSONObject response = ( JSONObject ) responseAsJsonObject ; response . accumulate ( \"key_from_java\" , \"value_from_script_on_java\" ); return true ; } } Using Java libraries in a script: # Steps: 1. Add library jars to /opt/jans/jetty/jans-auth/custom/libs/ 2. Edit /opt/jans/jetty/jans-auth/webapps/jans-auth.xml and add the following line replacing the word library-name with the actual name of the library: <Set name=\"extraClasspath\">/opt/jans/jetty/jans-auth/custom/libs/library-name.jar</Set> 3. Restart jans-auth service systemctl restart jans-auth Implementation in Jython # The example below is only meant to convey the concept, we will cover the details in later parts of the documentation. Suppose, we are implementing an Openbanking Identity platform and we have to add business specific claims say openbanking_intent_id to the ID token. The custom script which will help us accomplish our goal is of the type UpdateTokenType where the modifyIdToken method has to be implemented. A sample custom script with this business logic will be as stated below: class UpdateToken ( UpdateTokenType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): < initialization code comes here > return True def destroy ( self , configurationAttributes ): < clean up code comes here > return True def getApiVersion ( self ): return < version number > def modifyIdToken ( self , jsonWebResponse , context ): # Step1: <get openbanking_intent_id from session > sessionId = context . getSession () openbanking_intent_id = sessionId . getSessionAttributes () . get ( \"openbanking_intent_id \" ) # Step2: <add custom claims to ID token here> jsonWebResponse . getClaims () . setClaim ( \"openbanking_intent_id \" , openbanking_intent_id ) Using Java libraries in a Jython script: # Steps: 1. Add library jars to /opt/jans/jetty/jans-auth/custom/libs/ 2. Edit /opt/jans/jetty/jans-auth/webapps/jans-auth.xml and add the following line replacing the word library-name with the actual name of the library: <Set name=\"extraClasspath\">/opt/jans/jetty/jans-auth/custom/libs/library-name.jar</Set> 3. Restart jans-auth service systemctl restart jans-auth Using Python libraries in a script: # You can only use libraries (packages and modules) that are written in Pure Python . Importing a Python class which is a wrapper around a library written in C is not supported by the Jans server. As an example, the psycopg2 library used to connect to PostgreSQL from Python. Since it is a C wrapper around libpq, it won't work with Jython. Python 3 packages / modules are not supported. Steps: 1. Pure Python libraries should be added to /opt/jans/python/libs Using pip to install additional Python packages: Find out about your Jython version first. cd into the /opt directory in your Jans Server container and run ls. A directory named jython- should be listed too where will correspond to the Jython version. Note the version. Open the file /etc/jans/conf/jans.properties and look for the line starting with pythonModulesDir= . Append the value /opt/jython-<version>/Lib/site-packages to any existing value. Each value is separater by a colon (:). It should look something like this pythonModulesDir=/opt/jans/python/libs:/opt/jython-2.7.2a/Lib/site-packages Run the following command /opt/jython-<version>/bin/jython -m ensurepip Install your library with /opt/jython-<version>/bin/pip install <library_name> where is the name of the library to install. Restart the jans-auth service : systemctl restart jans-auth Debugging a Jython script # This article covers the details for debugging a script in a developer environment (CE). This article covers the details for debugging a script in a CN environment. Mandatory methods to be overridden # This is the base class of all custom script types and all custom scripts should implement the following methods. * init(self, customScript, configurationAttributes) : This method is only called once during the script initialization (or jans-auth service restarts). It can be used for global script initialization, initiate objects etc destroy(self, configurationAttributes) : This method is called when a custom script fails to initialize or upon jans-auth service restarts. It can be used to free resource and objects created in the init() method getApiVersion(self, configurationAttributes, customScript) : The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10 Configurable properties of a custom script # Property Description Name unique identifier(name) for the custom script e.g. person_authentication_google Description Description Text Programming Languages Python/Java Level Used in Person Authentication script type, the strength of the credential is a numerical value assigned to the custom script that is tied to the authentication method. The higher the value, the stronger it is considered. Thus, if a user has several credentials enrolled, he will be asked to present the one of them having the highest strength associated. Location type Database - Stored in persistence (LDAP, MYSQL or PLSQL whichever applicable ) File - stored as a file Interactive Web - web application native - mobile application both Custom Properties Key - value pairs for configurable parameters like Third Party API keys, location of configuration files etc Building business logic in a custom script # Jans-auth server uses Weld 3.0 (JSR-365 aka CDI 2.0) for managed beans. The most common business functions are implemented through a set of beans. This article presents many ready-to-use beans which can be used to build a script. Operations on custom scripts using jans-cli # Jans-cli supports the following six operations on custom scripts: get-config-scripts , gets a list of custom scripts. post-config-scripts , adds a new custom script. put-config-scripts , updates a custom script. get-config-scripts-by-type , requires an argument --url-suffix TYPE: ______ . You can specify the following types: PERSON_AUTHENTICATION, INTROSPECTION, RESOURCE_OWNER_PASSWORD_CREDENTIALS, APPLICATION_SESSION, CACHE_REFRESH, UPDATE_USER, USER_REGISTRATION, CLIENT_REGISTRATION, ID_GENERATOR, UMA_RPT_POLICY, UMA_RPT_CLAIMS, UMA_CLAIMS_GATHERING, CONSENT_GATHERING, DYNAMIC_SCOPE, SPONTANEOUS_SCOPE, END_SESSION, POST_AUTHN, SCIM, CIBA_END_USER_NOTIFICATION, PERSISTENCE_EXTENSION, IDP, or UPDATE_TOKEN. get-config-scripts-by-inum , requires an argument --url-suffix inum: _____ delete-config-scripts-by-inum , requires an argument --url-suffix inum: _____ The post-config-scripts and put-config-scripts require various details about the scripts. The following command gives the basic schema of the custom scripts to pass to these operations. Basic schema of a custom script # Command: /opt/jans/jans-cli/config-cli.py --schema CustomScript Output: { \"dn\" : \"string\" , \"inum\" : \"string\" , \"name\" : \"string\" , \"aliases\" : [ \"string\" ], \"description\" : \"string\" , \"script\" : \"string\" , \"scriptType\" : \"ciba_end_user_notification\" , \"programmingLanguage\" : \"python\" , \"level\" : 45 , \"revision\" : 156 , \"enabled\" : true , \"scriptError\" : { \"raisedAt\" : { \"type\" : \"string\" , \"format\" : \"date-time\" }, \"stackTrace\" : { \"type\" : \"string\" } }, \"modified\" : true , \"internal\" : true , \"locationType\" : \"file\" , \"locationPath\" : \"string\" , \"baseDn\" : \"string\" } To add or modify a script first, we need to create the script's python file (e.g. /tmp/sample.py) and then create a JSON file by following the above schema and update the fields as : /tmp/sample.json { \"name\" : \"mySampleScript\" , \"aliases\" : null , \"description\" : \"This is a sample script\" , \"script\" : \"_file /tmp/sample.py\" , \"scriptType\" : \"PERSON_AUTHENTICATION\" , \"programmingLanguage\" : \"PYTHON\" , \"moduleProperties\" : [ { \"value1\" : \"mayvalue1\" , \"value2\" : \"myvalues2\" , \"description\" : \"description for property\" } ], \"configurationProperties\" : null , \"level\" : 1 , \"revision\" : 0 , \"enabled\" : false , \"scriptError\" : null , \"modified\" : false , \"internal\" : false } Add, Modify and Delete a script # The following command will add a new script with details given in /tmp/sample.json file. The jans-cli will generate a unique inum of this new script if we skip inum in the json file. /opt/jans/jans-cli/config-cli.py --operation-id post-config-scripts --data /tmp/sampleadd.json The following command will modify/update the existing script with details given in /tmp/samplemodify.json file. Remember to set inum field in samplemodify.json to the inum of the script to update. /opt/jans/jans-cli/config-cli.py --operation-id put-config-scripts --data /tmp/samplemodify.json To delete a custom script by its inum, use the following command: /opt/jans/jans-cli/config-cli.py --operation-id delete-config-scripts-by-inum --url-suffix inum:SAMPLE-TEST-INUM List existing custom scripts # These commands to print the details are important, as using them we can get the inum of these scripts which is required to perform update or delete operation. The following command will display the details of all the existing custom scripts. This will be helpful to get the inum of scripts to perform the update and delete operation. /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts Following command displays the details of selected custom script (by inum). /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-inum --url-suffix inum:_____ Use the following command to display the details of existing custom scripts of a given type (for example: INTROSPECTION). /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-type --url-suffix type:INTROSPECTION Note: Incase the AS's Access token is bound to the client's MTLS certificate, you need to add the certificate and key files to the above commands. E.g: /opt/jans/jans-cli/config-cli.py --operation-id post-config-scripts --data /tmp/sampleadd.json -cert-file sampleCert.pem -key-file sampleKey.key Client specific implementations # Useful links # Custom scripts and jans-cli","title":"Interception Script Overview"},{"location":"admin/developer/interception-scripts/#interception-scripts-or-custom-scripts","text":"Interception scripts (or custom scripts) allow you to define custom business logic for various features offered by the OpenID Provider (Jans-auth server). Some examples of features which can be customized are - implementing a 2FA authentication method, consent gathering, client registration, adding business specific claims to ID token or Access token etc. Scripts can easily be upgraded and doesn't require forking the Jans Server code or re-building it.","title":"Interception Scripts (or custom scripts)"},{"location":"admin/developer/interception-scripts/#types-of-interception-scripts-in-jans-server","text":"Listed below, are custom scripts classified into various types, each of which represents a feature of the Jans server that can be extended as per the business need. Each script type is described by a java interface whose methods should be overridden to implement your business case. Person Authentication : Allows the definition of multi-step authentication workflows, including adaptive authentication - where the number of steps varies depending on the context. Consent Gathering : Allows exact customization of the authorization (or consent) process. By default, the OP will request authorization for each scope, and display the respective scope description. Update User Client Registration : Allows implementing custom business logic during dynamic client registration, including validating SSA's and granting scopes. Dynamic Scopes : Enables admin to generate scopes on the fly, for example by calling external APIs ID Generator Update Token : Enables transformation of claims and values in id_token, Access token and Refresh tokens; allows the setting of token lifetime; allows the addition or removal of scopes to / from tokens; allows the addition of audit logs each time a token is created. Session Management SCIM Introspection : Introspection scripts allows to modify response of Introspection Endpoint spec and present additional meta information surrounding the token. Post Authentication Select Account Resource Owner Password Credentials UMA 2 RPT Authorization Policies UMA 2 Claims-Gathering Fido2 Extension : Extension of attestation and assertion endpoints.","title":"Types of Interception scripts in Jans server"},{"location":"admin/developer/interception-scripts/#implementation-languages-jython-or-pure-java","text":"Interception scripts are written in Jython or in pure Java , enabling Java or Python libraries to be imported.","title":"Implementation languages - Jython or pure Java"},{"location":"admin/developer/interception-scripts/#implementation-in-pure-java","text":"A script in Java refers to a java source file (e.g. Discovery.java ) which is compiled by AS and executed at runtime. Some rules: The java class file containing the script should not have a package set. The name of the class must match to the name set in CustomScriptType source code (e.g. for discovery script it is \"Discovery\") Scripts must implement predefined interface which can be found against the CustomScriptType . For e.g. if you are writing a Person authentication script then your class should implement the following interface All libraries available at runtime to server are available also to pure java script To log to jans-auth_script.log use scriptLogger Normal log will log in to jans-auth.log Example pure java script import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.model.custom.script.type.discovery.DiscoveryType ; import io.jans.service.custom.script.CustomScriptManager ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; import org.json.JSONObject ; import java.util.Map ; /** * @author Yuriy Zabrovarnyy */ public class Discovery implements DiscoveryType { private static final Logger log = LoggerFactory . getLogger ( Discovery . class ); private static final Logger scriptLogger = LoggerFactory . getLogger ( CustomScriptManager . class ); @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Init of Discovery Java custom script\" ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Init of Discovery Java custom script\" ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Destroy of Discovery Java custom script\" ); return true ; } @Override public int getApiVersion () { log . info ( \"getApiVersion Discovery Java custom script: 11\" ); return 11 ; } @Override public boolean modifyResponse ( Object responseAsJsonObject , Object context ) { scriptLogger . info ( \"write to script logger\" ); JSONObject response = ( JSONObject ) responseAsJsonObject ; response . accumulate ( \"key_from_java\" , \"value_from_script_on_java\" ); return true ; } }","title":"Implementation in Pure Java"},{"location":"admin/developer/interception-scripts/#using-java-libraries-in-a-script","text":"Steps: 1. Add library jars to /opt/jans/jetty/jans-auth/custom/libs/ 2. Edit /opt/jans/jetty/jans-auth/webapps/jans-auth.xml and add the following line replacing the word library-name with the actual name of the library: <Set name=\"extraClasspath\">/opt/jans/jetty/jans-auth/custom/libs/library-name.jar</Set> 3. Restart jans-auth service systemctl restart jans-auth","title":"Using Java libraries in a script:"},{"location":"admin/developer/interception-scripts/#implementation-in-jython","text":"The example below is only meant to convey the concept, we will cover the details in later parts of the documentation. Suppose, we are implementing an Openbanking Identity platform and we have to add business specific claims say openbanking_intent_id to the ID token. The custom script which will help us accomplish our goal is of the type UpdateTokenType where the modifyIdToken method has to be implemented. A sample custom script with this business logic will be as stated below: class UpdateToken ( UpdateTokenType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): < initialization code comes here > return True def destroy ( self , configurationAttributes ): < clean up code comes here > return True def getApiVersion ( self ): return < version number > def modifyIdToken ( self , jsonWebResponse , context ): # Step1: <get openbanking_intent_id from session > sessionId = context . getSession () openbanking_intent_id = sessionId . getSessionAttributes () . get ( \"openbanking_intent_id \" ) # Step2: <add custom claims to ID token here> jsonWebResponse . getClaims () . setClaim ( \"openbanking_intent_id \" , openbanking_intent_id )","title":"Implementation in Jython"},{"location":"admin/developer/interception-scripts/#using-java-libraries-in-a-jython-script","text":"Steps: 1. Add library jars to /opt/jans/jetty/jans-auth/custom/libs/ 2. Edit /opt/jans/jetty/jans-auth/webapps/jans-auth.xml and add the following line replacing the word library-name with the actual name of the library: <Set name=\"extraClasspath\">/opt/jans/jetty/jans-auth/custom/libs/library-name.jar</Set> 3. Restart jans-auth service systemctl restart jans-auth","title":"Using Java libraries in a Jython script:"},{"location":"admin/developer/interception-scripts/#using-python-libraries-in-a-script","text":"You can only use libraries (packages and modules) that are written in Pure Python . Importing a Python class which is a wrapper around a library written in C is not supported by the Jans server. As an example, the psycopg2 library used to connect to PostgreSQL from Python. Since it is a C wrapper around libpq, it won't work with Jython. Python 3 packages / modules are not supported. Steps: 1. Pure Python libraries should be added to /opt/jans/python/libs Using pip to install additional Python packages: Find out about your Jython version first. cd into the /opt directory in your Jans Server container and run ls. A directory named jython- should be listed too where will correspond to the Jython version. Note the version. Open the file /etc/jans/conf/jans.properties and look for the line starting with pythonModulesDir= . Append the value /opt/jython-<version>/Lib/site-packages to any existing value. Each value is separater by a colon (:). It should look something like this pythonModulesDir=/opt/jans/python/libs:/opt/jython-2.7.2a/Lib/site-packages Run the following command /opt/jython-<version>/bin/jython -m ensurepip Install your library with /opt/jython-<version>/bin/pip install <library_name> where is the name of the library to install. Restart the jans-auth service : systemctl restart jans-auth","title":"Using Python libraries in a script:"},{"location":"admin/developer/interception-scripts/#debugging-a-jython-script","text":"This article covers the details for debugging a script in a developer environment (CE). This article covers the details for debugging a script in a CN environment.","title":"Debugging a Jython script"},{"location":"admin/developer/interception-scripts/#mandatory-methods-to-be-overridden","text":"This is the base class of all custom script types and all custom scripts should implement the following methods. * init(self, customScript, configurationAttributes) : This method is only called once during the script initialization (or jans-auth service restarts). It can be used for global script initialization, initiate objects etc destroy(self, configurationAttributes) : This method is called when a custom script fails to initialize or upon jans-auth service restarts. It can be used to free resource and objects created in the init() method getApiVersion(self, configurationAttributes, customScript) : The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10","title":"Mandatory methods to be overridden"},{"location":"admin/developer/interception-scripts/#configurable-properties-of-a-custom-script","text":"Property Description Name unique identifier(name) for the custom script e.g. person_authentication_google Description Description Text Programming Languages Python/Java Level Used in Person Authentication script type, the strength of the credential is a numerical value assigned to the custom script that is tied to the authentication method. The higher the value, the stronger it is considered. Thus, if a user has several credentials enrolled, he will be asked to present the one of them having the highest strength associated. Location type Database - Stored in persistence (LDAP, MYSQL or PLSQL whichever applicable ) File - stored as a file Interactive Web - web application native - mobile application both Custom Properties Key - value pairs for configurable parameters like Third Party API keys, location of configuration files etc","title":"Configurable properties of a custom script"},{"location":"admin/developer/interception-scripts/#building-business-logic-in-a-custom-script","text":"Jans-auth server uses Weld 3.0 (JSR-365 aka CDI 2.0) for managed beans. The most common business functions are implemented through a set of beans. This article presents many ready-to-use beans which can be used to build a script.","title":"Building business logic in a custom script"},{"location":"admin/developer/interception-scripts/#operations-on-custom-scripts-using-jans-cli","text":"Jans-cli supports the following six operations on custom scripts: get-config-scripts , gets a list of custom scripts. post-config-scripts , adds a new custom script. put-config-scripts , updates a custom script. get-config-scripts-by-type , requires an argument --url-suffix TYPE: ______ . You can specify the following types: PERSON_AUTHENTICATION, INTROSPECTION, RESOURCE_OWNER_PASSWORD_CREDENTIALS, APPLICATION_SESSION, CACHE_REFRESH, UPDATE_USER, USER_REGISTRATION, CLIENT_REGISTRATION, ID_GENERATOR, UMA_RPT_POLICY, UMA_RPT_CLAIMS, UMA_CLAIMS_GATHERING, CONSENT_GATHERING, DYNAMIC_SCOPE, SPONTANEOUS_SCOPE, END_SESSION, POST_AUTHN, SCIM, CIBA_END_USER_NOTIFICATION, PERSISTENCE_EXTENSION, IDP, or UPDATE_TOKEN. get-config-scripts-by-inum , requires an argument --url-suffix inum: _____ delete-config-scripts-by-inum , requires an argument --url-suffix inum: _____ The post-config-scripts and put-config-scripts require various details about the scripts. The following command gives the basic schema of the custom scripts to pass to these operations.","title":"Operations on custom scripts using jans-cli"},{"location":"admin/developer/interception-scripts/#basic-schema-of-a-custom-script","text":"Command: /opt/jans/jans-cli/config-cli.py --schema CustomScript Output: { \"dn\" : \"string\" , \"inum\" : \"string\" , \"name\" : \"string\" , \"aliases\" : [ \"string\" ], \"description\" : \"string\" , \"script\" : \"string\" , \"scriptType\" : \"ciba_end_user_notification\" , \"programmingLanguage\" : \"python\" , \"level\" : 45 , \"revision\" : 156 , \"enabled\" : true , \"scriptError\" : { \"raisedAt\" : { \"type\" : \"string\" , \"format\" : \"date-time\" }, \"stackTrace\" : { \"type\" : \"string\" } }, \"modified\" : true , \"internal\" : true , \"locationType\" : \"file\" , \"locationPath\" : \"string\" , \"baseDn\" : \"string\" } To add or modify a script first, we need to create the script's python file (e.g. /tmp/sample.py) and then create a JSON file by following the above schema and update the fields as : /tmp/sample.json { \"name\" : \"mySampleScript\" , \"aliases\" : null , \"description\" : \"This is a sample script\" , \"script\" : \"_file /tmp/sample.py\" , \"scriptType\" : \"PERSON_AUTHENTICATION\" , \"programmingLanguage\" : \"PYTHON\" , \"moduleProperties\" : [ { \"value1\" : \"mayvalue1\" , \"value2\" : \"myvalues2\" , \"description\" : \"description for property\" } ], \"configurationProperties\" : null , \"level\" : 1 , \"revision\" : 0 , \"enabled\" : false , \"scriptError\" : null , \"modified\" : false , \"internal\" : false }","title":"Basic schema of a custom script"},{"location":"admin/developer/interception-scripts/#add-modify-and-delete-a-script","text":"The following command will add a new script with details given in /tmp/sample.json file. The jans-cli will generate a unique inum of this new script if we skip inum in the json file. /opt/jans/jans-cli/config-cli.py --operation-id post-config-scripts --data /tmp/sampleadd.json The following command will modify/update the existing script with details given in /tmp/samplemodify.json file. Remember to set inum field in samplemodify.json to the inum of the script to update. /opt/jans/jans-cli/config-cli.py --operation-id put-config-scripts --data /tmp/samplemodify.json To delete a custom script by its inum, use the following command: /opt/jans/jans-cli/config-cli.py --operation-id delete-config-scripts-by-inum --url-suffix inum:SAMPLE-TEST-INUM","title":"Add, Modify and Delete a script"},{"location":"admin/developer/interception-scripts/#list-existing-custom-scripts","text":"These commands to print the details are important, as using them we can get the inum of these scripts which is required to perform update or delete operation. The following command will display the details of all the existing custom scripts. This will be helpful to get the inum of scripts to perform the update and delete operation. /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts Following command displays the details of selected custom script (by inum). /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-inum --url-suffix inum:_____ Use the following command to display the details of existing custom scripts of a given type (for example: INTROSPECTION). /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-type --url-suffix type:INTROSPECTION Note: Incase the AS's Access token is bound to the client's MTLS certificate, you need to add the certificate and key files to the above commands. E.g: /opt/jans/jans-cli/config-cli.py --operation-id post-config-scripts --data /tmp/sampleadd.json -cert-file sampleCert.pem -key-file sampleKey.key","title":"List existing custom scripts"},{"location":"admin/developer/interception-scripts/#client-specific-implementations","text":"","title":"Client specific implementations"},{"location":"admin/developer/interception-scripts/#useful-links","text":"Custom scripts and jans-cli","title":"Useful links"},{"location":"admin/developer/managed-beans/","tags":["administration","developer","bean","CdiUtil"],"text":"Ready-to-use code in Custom script: # Jans-auth server uses Weld 3.0 (JSR-365 aka CDI 2.0) for managed beans. The most useful functions are implemented through a set of beans which can be re-used in all custom scripts. Obtaining a bean inside a custom script: # CdiUtil used to obtain managed beans inside a custom script. Relevant methods: Signature Description T bean(Class clazz) Gets the managed bean belonging to the class passed as parameter Usage (jython code): Suppose UserService and AuthenticationService beans have to be referenced in the code, it can be done as below: from io.jans.as.server.service import UserService from io.jans.as.server.service import AuthenticationService ... userService = CdiUtil.bean(UserService) authenticationService = CdiUtil.bean(AuthenticationService) Commonly used beans: # 1. AuthenticationService # Allows to authenticate a user or obtain the current authenticated user Relevant methods: Signature Description boolean authenticate(String userName) Performs authentication for the user whose identifier ( userName ) is passed as parameter boolean authenticate(String userName, String password) Performs authentication for the user whose identifier ( userName ) is passed as parameter. The password supplied must be the correct password of the user in question User getAuthenticatedUser() Returns a representation of the currently authenticated user. null if no user is currently authenticated. See User data object Usage: from io.jans.as.server.service import AuthenticationService ... #1. authenticate a user using username and password authenticationService = CdiUtil.bean(AuthenticationService) logged_in = authenticationService.authenticate(user_name, user_password) # 2. authenticate method without passing password parameter logged_in = authenticationService.authenticate(user_name) #3. obtain an authenticated user user = authenticationService.getAuthenticatedUser() userName = user.getUserId() emailIds = user.getAttribute(\"oxEmailAlternate\") 2. UserService # Allows CRUD operations for users to the local persistence. Relevant methods: Signature Description User addUser(User user, boolean active) Creates a new user based on the representation passed as parameter. active parameter denotes whether user status ( gluuStatus attribute) will be active or register User addUserAttribute(String userId, String attributeName, String attributeValue) Adds an attribute to the user identified by userId in the database with the name and value passed. Returns a representation of the modified user or null in case of failure or if such name/attribute is already part of such user boolean addUserAttribute(User user, String attributeName, String attributeValue) Adds an attribute to the user object with the name and value passed. This method only alters the user argument and does not persist changes. Returns false if such name/attribute is already part of user User addUserAttributeByUserInum(String userInum, String attributeName, String attributeValue) Adds an attribute to the user whose inum attribute (in the database) equals to userInum using the name and value passed. Returns a representation of the modified user or null in case of failure or if such name/attribute is already part of such user CustomAttribute getCustomAttribute(User user, String attributeName) Gets a representation of the attribute whose name is passed for the user in question ( user ). Returns null if no such attribute is populated String getDnForUser(String inum) Obtains the DN (distinguished name) of the user whose inum attribute equals to userInum (no check that such user may exist is actually made) User getUser(String userId, String... returnAttributes) Retrieves a user representation for the user identified with userId containing only the attributes requested ( returnAttributes ). null is returned if no such user exists User getUserByAttribute(String attributeName, String attributeValue) Retrieves a user (first available) such that the attribute referenced ( attributeName ) has the value passed ( attributeValue ). null is returned if no such user exists String getUserInum(String userId) Retrieves the inum database attribute for the user identified with userId . null is returned if no such user exists User removeUserAttribute(String userId, String attributeName, String attributeValue) Removes attributeValue from the values of the attribute whose name is passed ( attributeName ) for the user identified with userId User replaceUserAttribute(String userId, String attributeName, String oldAttributeValue, String newAttributeValue) Updates the user identified with userId by replacing the value of the attribute attributeName with the value passed. null is returned if no such user exists void setCustomAttribute(User user, String attributeName, String attributeValue) Sets the value of the attribute attributeName with the single value attributeValue for the user representation passes as parameter. This method does not persist changes User updateUser(User user) Updates the user represented by user object in the database Usage # a. Add a user # from io.jans.as.common.service.common import UserService from io.jans.orm.model.base import CustomObjectAttribute; ... new_user = User() found_user.getCustomAttributes().add(new CustomObjectAttribute(\"address\", Arrays.asList(\"London\", \"Texas\", \"Kiev\"))); found_user.getCustomAttributes().add(new CustomObjectAttribute(\"jansGuid\", \"test_value\")); found_user.getCustomAttributes().add(new CustomObjectAttribute(\"birthdate\", new Date())); found_user.getCustomAttributes().add(new CustomObjectAttribute(\"jansActive\", false)); found_user.getCustomAttributes().add(new CustomObjectAttribute(\"scimCustomThird\", 18)); found_user.setUserRole(UserRole.ADMIN); found_user.setMemberOf(Arrays.asList(\"group_1\", \"group_2\", \"group_3\")); CustomObjectAttribute multiValuedSingleValue = new CustomObjectAttribute(\"oxExternalUid\", \"multivalued_single_valued\"); multiValuedSingleValue.setMultiValued(true); foundUser.getCustomAttributes().add(multiValuedSingleValue); new_user = CdiUtil.bean(UserService).addUser(new_user, True) b. Add user attributes # userObject = userService.addUserAttribute(user_name, \"oxExternalUid\", cert_user_external_uid, true) c. Get User # # example 1 - get User by userId user = userService.getUser(user_name) # example 2 - get User by User-Id only if attribute oxExternalUid is populated user = userService.getUser(user_name, \"oxExternalUid\") customAttributeValue = userService.getCustomAttribute(user, \"oxExternalUid\") d. Get specific User attribute # status_attribute_value = userService.getCustomAttribute(find_user_by_uid, \"gluuStatus\") e. Replace user attributes # userService.replaceUserAttribute(user_name, \"oxOTPCache\", cachedOTP, localTotpKey) f. Remove user attribute # userService.removeUserAttribute(user.getUserId(),\"oxTrustExternalId\", \"wwpass:%s\"%puid) g. Update users # found_user = userService.getUser(user_name) found_user.getCustomAttributes().add(new CustomObjectAttribute(\"address\", Arrays.asList(\"London\", \"Texas\", \"Kiev\"))); found_user.getCustomAttributes().add(new CustomObjectAttribute(\"jansGuid\", \"test_value\")); found_user.getCustomAttributes().add(new CustomObjectAttribute(\"birthdate\", new Date())); found_user.getCustomAttributes().add(new CustomObjectAttribute(\"jansActive\", false)); found_user.getCustomAttributes().add(new CustomObjectAttribute(\"jansActive\", false)); found_user.getCustomAttributes().add(new CustomObjectAttribute(\"scimCustomThird\", 18)); found_user.setUserRole(UserRole.ADMIN); found_user.setMemberOf(Arrays.asList(\"group_1\", \"group_2\", \"group_3\")); userService.updateUser(found_user) 4. User # A class employed to represent a user entry in the persistence. Provides getters and setters to retrieve and assign value(s) for attributes 5. CustomAttribute # A class that models an attribute. An attribute has a name and a collection of associated values 6. Identity # The authentication flow in jans-auth server is stateless and the instance is preserved because the Identity parameters (another name for session parameters) are persisted in databases. A function in the PersonAuthenticationType script called getExtraParametersForStep should be overridden to include any new session variable. The underlying Jans-auth server takes care of retrieving it, persisting it etc. def getExtraParametersForStep(self, configurationAttributes, step): return Arrays.asList(\"sessionParamName1\", \"sessionParamName2\", \"sessionParamName3\") Bean details: |Signature|Description| |-|-| | Object getWorkingParameter(String name) |Retrieves a working parameter by name previously set via setWorkingParameter | | void setWorkingParameter(String name, Object value) |Binds data to a name for further use in an authentication flow. Recommended values to store are String s| | SessionId getSessionId() |Retrieves a reference to the associated server session object, see SessionId | Usage from io.jans.as.server.security import Identity identity = CdiUtil.bean(Identity) #1. newExpDate = identity.getWorkingParameter(\"expDate\") #2. identity.setWorkingParameter(\"expDate\", expDate) #3. session_attributes = identity.getSessionId().getSessionAttributes() session_attributes.containsKey(\"remote_ip\") 8. SessionIdService # #1. get session sessionIdservice = CdiUtil.bean(SessionIdService).getSessionId() #2. update session sessionIdservice.getSessionAttributes().put(key, value) sessionIdservice.updateSessionId(session) 9. GrantService # 10. ClientService : Provides operations with clients. # Usage: from io.jans.as.server.service import ClientService clientService = CdiUtil.bean(ClientService) client = clientService.getClient(clientId) 7. HttpService: HttpService # Provides utility methods to execute HTTP requests, manipulate responses, etc Relevant methods: Signature Description HttpClient getHttpsClient() Returns an instance of org.apache.http.client.HttpClient (see oxcore-util class SslDefaultHttpClient ) HttpServiceResponse executeGet(HttpClient httpClient, String requestUri) Perform a GET on the URI requested. Returns an instance of io.jans.as.server.model.net.HttpServiceResponse (a wrapper on org.apache.http.HttpResponse ) byte[] getResponseContent(HttpResponse httpResponse) Consumes the bytes of the associated response. Returns null if the response status code is not 200 (OK) 8. CacheService # Provides a unified means to interact with the underlying cache provider configured in the Jans-auth Server Relevant methods: Signature Description void clear() Flushes the whole cache Object get(String key) Retrieves the value of key in the cache. null if there is no such key present void put(int expirationInSeconds, String key, Object object) Puts an object in the cache associated to the key passed. An expiration in seconds can be provided put(String key, Object object) Puts an object in the cache associated to the key passed. The expiration used is the default expiration configured in Gluu void remove(String key) Removes an entry from the cache 9. FacesService : Provides utilities to properly build encoded URLs and make redirections. This class is used a great deal in custom scripts # Relevant methods: Signature Description void redirectToExternalURL(String url) Redirects the user's browser to the URL passed as parameter String encodeParameters(String url, Map<String, Object> parameters) Builds a URL by appending query parameters as supplied in parameters map. Every value in the map is properly URL-encoded 10. FacesMessages # Allows manipulation of JSF context messages Relevant methods: Signature Description void add(Severity severity, String message) Adds a message to the JSF context with the severity ( javax.faces.application.FacesMessage.Severity ) specified void clear() Clears the messages of the JSF context String evalAsString(String expression) Evaluates an EL expression using the JSF context and returns the result as a String void setKeepMessages() Sets the \"keep messages\" property of the JSF flash 11. StringHelper # Provides many utility methods that often arise in the manipulation of Strings Usage: from io.jans.util import StringHelper isNotEmptyString # if StringHelper.isNotEmptyString(user_name): # do something equalsIgnoreCase # if StringHelper.equalsIgnoreCase(authentication_mode, \"one_step\"): # do something isEmpty # if StringHelper.isEmpty(auth_method): # do something split # allowedClientsListArray = StringHelper.split(allowedClientsList, \",\") toLowerCase # remoteAttribute = StringHelper.toLowerCase(remoteAttributesListArray[i]) base64urlencode # StringUtils.base64urlencode(input); 13. EncryptionService # Allows to encrypt/decrypt strings using a 3DES cipher whose salt is found in /etc/jans/conf/salt Relevant methods: Signature Description String decrypt(String encryptedString) Decrypts the encrypted string supplied Properties decryptAllProperties(Properties connectionProperties) Returns a java.util.Properties object with all decrypted values found in connectionProperties String encrypt(String unencryptedString) Encrypts the string supplied Usage: # from io.jans.as.common.service.common import EncryptionService .... encryptionService = CdiUtil.bean(EncryptionService) pwd_decrypted = encryptionService.decrypt(\"stringtobedecrypted\") 14. Base64Util # Usage: from io.jans.as.model.util import Base64Util .... Base64Util.base64urldecodeToString(input_string) Base64Util.base64urlencode(input_string.encode('utf-8')));","title":"Managed Beans"},{"location":"admin/developer/managed-beans/#ready-to-use-code-in-custom-script","text":"Jans-auth server uses Weld 3.0 (JSR-365 aka CDI 2.0) for managed beans. The most useful functions are implemented through a set of beans which can be re-used in all custom scripts.","title":"Ready-to-use code in Custom script:"},{"location":"admin/developer/managed-beans/#obtaining-a-bean-inside-a-custom-script","text":"CdiUtil used to obtain managed beans inside a custom script. Relevant methods: Signature Description T bean(Class clazz) Gets the managed bean belonging to the class passed as parameter Usage (jython code): Suppose UserService and AuthenticationService beans have to be referenced in the code, it can be done as below: from io.jans.as.server.service import UserService from io.jans.as.server.service import AuthenticationService ... userService = CdiUtil.bean(UserService) authenticationService = CdiUtil.bean(AuthenticationService)","title":"Obtaining a bean inside a custom script:"},{"location":"admin/developer/managed-beans/#commonly-used-beans","text":"","title":"Commonly used beans:"},{"location":"admin/developer/managed-beans/#1-authenticationservice","text":"Allows to authenticate a user or obtain the current authenticated user Relevant methods: Signature Description boolean authenticate(String userName) Performs authentication for the user whose identifier ( userName ) is passed as parameter boolean authenticate(String userName, String password) Performs authentication for the user whose identifier ( userName ) is passed as parameter. The password supplied must be the correct password of the user in question User getAuthenticatedUser() Returns a representation of the currently authenticated user. null if no user is currently authenticated. See User data object Usage: from io.jans.as.server.service import AuthenticationService ... #1. authenticate a user using username and password authenticationService = CdiUtil.bean(AuthenticationService) logged_in = authenticationService.authenticate(user_name, user_password) # 2. authenticate method without passing password parameter logged_in = authenticationService.authenticate(user_name) #3. obtain an authenticated user user = authenticationService.getAuthenticatedUser() userName = user.getUserId() emailIds = user.getAttribute(\"oxEmailAlternate\")","title":"1. AuthenticationService"},{"location":"admin/developer/managed-beans/#2-userservice","text":"Allows CRUD operations for users to the local persistence. Relevant methods: Signature Description User addUser(User user, boolean active) Creates a new user based on the representation passed as parameter. active parameter denotes whether user status ( gluuStatus attribute) will be active or register User addUserAttribute(String userId, String attributeName, String attributeValue) Adds an attribute to the user identified by userId in the database with the name and value passed. Returns a representation of the modified user or null in case of failure or if such name/attribute is already part of such user boolean addUserAttribute(User user, String attributeName, String attributeValue) Adds an attribute to the user object with the name and value passed. This method only alters the user argument and does not persist changes. Returns false if such name/attribute is already part of user User addUserAttributeByUserInum(String userInum, String attributeName, String attributeValue) Adds an attribute to the user whose inum attribute (in the database) equals to userInum using the name and value passed. Returns a representation of the modified user or null in case of failure or if such name/attribute is already part of such user CustomAttribute getCustomAttribute(User user, String attributeName) Gets a representation of the attribute whose name is passed for the user in question ( user ). Returns null if no such attribute is populated String getDnForUser(String inum) Obtains the DN (distinguished name) of the user whose inum attribute equals to userInum (no check that such user may exist is actually made) User getUser(String userId, String... returnAttributes) Retrieves a user representation for the user identified with userId containing only the attributes requested ( returnAttributes ). null is returned if no such user exists User getUserByAttribute(String attributeName, String attributeValue) Retrieves a user (first available) such that the attribute referenced ( attributeName ) has the value passed ( attributeValue ). null is returned if no such user exists String getUserInum(String userId) Retrieves the inum database attribute for the user identified with userId . null is returned if no such user exists User removeUserAttribute(String userId, String attributeName, String attributeValue) Removes attributeValue from the values of the attribute whose name is passed ( attributeName ) for the user identified with userId User replaceUserAttribute(String userId, String attributeName, String oldAttributeValue, String newAttributeValue) Updates the user identified with userId by replacing the value of the attribute attributeName with the value passed. null is returned if no such user exists void setCustomAttribute(User user, String attributeName, String attributeValue) Sets the value of the attribute attributeName with the single value attributeValue for the user representation passes as parameter. This method does not persist changes User updateUser(User user) Updates the user represented by user object in the database","title":"2.  UserService"},{"location":"admin/developer/managed-beans/#usage","text":"","title":"Usage"},{"location":"admin/developer/managed-beans/#a-add-a-user","text":"from io.jans.as.common.service.common import UserService from io.jans.orm.model.base import CustomObjectAttribute; ... new_user = User() found_user.getCustomAttributes().add(new CustomObjectAttribute(\"address\", Arrays.asList(\"London\", \"Texas\", \"Kiev\"))); found_user.getCustomAttributes().add(new CustomObjectAttribute(\"jansGuid\", \"test_value\")); found_user.getCustomAttributes().add(new CustomObjectAttribute(\"birthdate\", new Date())); found_user.getCustomAttributes().add(new CustomObjectAttribute(\"jansActive\", false)); found_user.getCustomAttributes().add(new CustomObjectAttribute(\"scimCustomThird\", 18)); found_user.setUserRole(UserRole.ADMIN); found_user.setMemberOf(Arrays.asList(\"group_1\", \"group_2\", \"group_3\")); CustomObjectAttribute multiValuedSingleValue = new CustomObjectAttribute(\"oxExternalUid\", \"multivalued_single_valued\"); multiValuedSingleValue.setMultiValued(true); foundUser.getCustomAttributes().add(multiValuedSingleValue); new_user = CdiUtil.bean(UserService).addUser(new_user, True)","title":"a. Add a user"},{"location":"admin/developer/managed-beans/#b-add-user-attributes","text":"userObject = userService.addUserAttribute(user_name, \"oxExternalUid\", cert_user_external_uid, true)","title":"b. Add user attributes"},{"location":"admin/developer/managed-beans/#c-get-user","text":"# example 1 - get User by userId user = userService.getUser(user_name) # example 2 - get User by User-Id only if attribute oxExternalUid is populated user = userService.getUser(user_name, \"oxExternalUid\") customAttributeValue = userService.getCustomAttribute(user, \"oxExternalUid\")","title":"c. Get User"},{"location":"admin/developer/managed-beans/#d-get-specific-user-attribute","text":"status_attribute_value = userService.getCustomAttribute(find_user_by_uid, \"gluuStatus\")","title":"d. Get specific User attribute"},{"location":"admin/developer/managed-beans/#e-replace-user-attributes","text":"userService.replaceUserAttribute(user_name, \"oxOTPCache\", cachedOTP, localTotpKey)","title":"e. Replace user attributes"},{"location":"admin/developer/managed-beans/#f-remove-user-attribute","text":"userService.removeUserAttribute(user.getUserId(),\"oxTrustExternalId\", \"wwpass:%s\"%puid)","title":"f. Remove user attribute"},{"location":"admin/developer/managed-beans/#g-update-users","text":"found_user = userService.getUser(user_name) found_user.getCustomAttributes().add(new CustomObjectAttribute(\"address\", Arrays.asList(\"London\", \"Texas\", \"Kiev\"))); found_user.getCustomAttributes().add(new CustomObjectAttribute(\"jansGuid\", \"test_value\")); found_user.getCustomAttributes().add(new CustomObjectAttribute(\"birthdate\", new Date())); found_user.getCustomAttributes().add(new CustomObjectAttribute(\"jansActive\", false)); found_user.getCustomAttributes().add(new CustomObjectAttribute(\"jansActive\", false)); found_user.getCustomAttributes().add(new CustomObjectAttribute(\"scimCustomThird\", 18)); found_user.setUserRole(UserRole.ADMIN); found_user.setMemberOf(Arrays.asList(\"group_1\", \"group_2\", \"group_3\")); userService.updateUser(found_user)","title":"g. Update users"},{"location":"admin/developer/managed-beans/#4-user","text":"A class employed to represent a user entry in the persistence. Provides getters and setters to retrieve and assign value(s) for attributes","title":"4.  User"},{"location":"admin/developer/managed-beans/#5-customattribute","text":"A class that models an attribute. An attribute has a name and a collection of associated values","title":"5. CustomAttribute"},{"location":"admin/developer/managed-beans/#6-identity","text":"The authentication flow in jans-auth server is stateless and the instance is preserved because the Identity parameters (another name for session parameters) are persisted in databases. A function in the PersonAuthenticationType script called getExtraParametersForStep should be overridden to include any new session variable. The underlying Jans-auth server takes care of retrieving it, persisting it etc. def getExtraParametersForStep(self, configurationAttributes, step): return Arrays.asList(\"sessionParamName1\", \"sessionParamName2\", \"sessionParamName3\") Bean details: |Signature|Description| |-|-| | Object getWorkingParameter(String name) |Retrieves a working parameter by name previously set via setWorkingParameter | | void setWorkingParameter(String name, Object value) |Binds data to a name for further use in an authentication flow. Recommended values to store are String s| | SessionId getSessionId() |Retrieves a reference to the associated server session object, see SessionId | Usage from io.jans.as.server.security import Identity identity = CdiUtil.bean(Identity) #1. newExpDate = identity.getWorkingParameter(\"expDate\") #2. identity.setWorkingParameter(\"expDate\", expDate) #3. session_attributes = identity.getSessionId().getSessionAttributes() session_attributes.containsKey(\"remote_ip\")","title":"6. Identity"},{"location":"admin/developer/managed-beans/#8-sessionidservice","text":"#1. get session sessionIdservice = CdiUtil.bean(SessionIdService).getSessionId() #2. update session sessionIdservice.getSessionAttributes().put(key, value) sessionIdservice.updateSessionId(session)","title":"8. SessionIdService"},{"location":"admin/developer/managed-beans/#9-grantservice","text":"","title":"9. GrantService"},{"location":"admin/developer/managed-beans/#10-clientservice-provides-operations-with-clients","text":"Usage: from io.jans.as.server.service import ClientService clientService = CdiUtil.bean(ClientService) client = clientService.getClient(clientId)","title":"10. ClientService : Provides operations with clients."},{"location":"admin/developer/managed-beans/#7-httpservice-httpservice","text":"Provides utility methods to execute HTTP requests, manipulate responses, etc Relevant methods: Signature Description HttpClient getHttpsClient() Returns an instance of org.apache.http.client.HttpClient (see oxcore-util class SslDefaultHttpClient ) HttpServiceResponse executeGet(HttpClient httpClient, String requestUri) Perform a GET on the URI requested. Returns an instance of io.jans.as.server.model.net.HttpServiceResponse (a wrapper on org.apache.http.HttpResponse ) byte[] getResponseContent(HttpResponse httpResponse) Consumes the bytes of the associated response. Returns null if the response status code is not 200 (OK)","title":"7. HttpService: HttpService"},{"location":"admin/developer/managed-beans/#8-cacheservice","text":"Provides a unified means to interact with the underlying cache provider configured in the Jans-auth Server Relevant methods: Signature Description void clear() Flushes the whole cache Object get(String key) Retrieves the value of key in the cache. null if there is no such key present void put(int expirationInSeconds, String key, Object object) Puts an object in the cache associated to the key passed. An expiration in seconds can be provided put(String key, Object object) Puts an object in the cache associated to the key passed. The expiration used is the default expiration configured in Gluu void remove(String key) Removes an entry from the cache","title":"8.  CacheService"},{"location":"admin/developer/managed-beans/#9-facesservice-provides-utilities-to-properly-build-encoded-urls-and-make-redirections-this-class-is-used-a-great-deal-in-custom-scripts","text":"Relevant methods: Signature Description void redirectToExternalURL(String url) Redirects the user's browser to the URL passed as parameter String encodeParameters(String url, Map<String, Object> parameters) Builds a URL by appending query parameters as supplied in parameters map. Every value in the map is properly URL-encoded","title":"9. FacesService : Provides utilities to properly build encoded URLs and make redirections. This class is used a great deal in custom scripts"},{"location":"admin/developer/managed-beans/#10-facesmessages","text":"Allows manipulation of JSF context messages Relevant methods: Signature Description void add(Severity severity, String message) Adds a message to the JSF context with the severity ( javax.faces.application.FacesMessage.Severity ) specified void clear() Clears the messages of the JSF context String evalAsString(String expression) Evaluates an EL expression using the JSF context and returns the result as a String void setKeepMessages() Sets the \"keep messages\" property of the JSF flash","title":"10.  FacesMessages"},{"location":"admin/developer/managed-beans/#11-stringhelper","text":"Provides many utility methods that often arise in the manipulation of Strings Usage: from io.jans.util import StringHelper","title":"11. StringHelper"},{"location":"admin/developer/managed-beans/#isnotemptystring","text":"if StringHelper.isNotEmptyString(user_name): # do something","title":"isNotEmptyString"},{"location":"admin/developer/managed-beans/#equalsignorecase","text":"if StringHelper.equalsIgnoreCase(authentication_mode, \"one_step\"): # do something","title":"equalsIgnoreCase"},{"location":"admin/developer/managed-beans/#isempty","text":"if StringHelper.isEmpty(auth_method): # do something","title":"isEmpty"},{"location":"admin/developer/managed-beans/#split","text":"allowedClientsListArray = StringHelper.split(allowedClientsList, \",\")","title":"split"},{"location":"admin/developer/managed-beans/#tolowercase","text":"remoteAttribute = StringHelper.toLowerCase(remoteAttributesListArray[i])","title":"toLowerCase"},{"location":"admin/developer/managed-beans/#base64urlencode","text":"StringUtils.base64urlencode(input);","title":"base64urlencode"},{"location":"admin/developer/managed-beans/#13-encryptionservice","text":"Allows to encrypt/decrypt strings using a 3DES cipher whose salt is found in /etc/jans/conf/salt Relevant methods: Signature Description String decrypt(String encryptedString) Decrypts the encrypted string supplied Properties decryptAllProperties(Properties connectionProperties) Returns a java.util.Properties object with all decrypted values found in connectionProperties String encrypt(String unencryptedString) Encrypts the string supplied","title":"13. EncryptionService"},{"location":"admin/developer/managed-beans/#usage_1","text":"from io.jans.as.common.service.common import EncryptionService .... encryptionService = CdiUtil.bean(EncryptionService) pwd_decrypted = encryptionService.decrypt(\"stringtobedecrypted\")","title":"Usage:"},{"location":"admin/developer/managed-beans/#14-base64util","text":"Usage: from io.jans.as.model.util import Base64Util .... Base64Util.base64urldecodeToString(input_string) Base64Util.base64urlencode(input_string.encode('utf-8')));","title":"14. Base64Util"},{"location":"admin/developer/agama/advanced-usages/","tags":["developer","agama"],"text":"Advanced usages # UI templates # Template overrides # Template overrides is a mechanism that allows templates customization and promotes flows reuse. If an existing flow serves well the needs of a new flow you are writing, with this feature you can homogenize your UI for a more pleasant user experience. To start, use Trigger to play around with the existing flow - as is - from the flow you are creating. Collect the URLs of the pages you are not comfortable with: grab them directly from the browser's address bar. Then proceed as follows with every URL to locate the actual templates physically: Remove the https://.../fl/ portion of the URL Split the URL obtained into two pieces: a folder name and a remainder . The remainder starts after the last slash found in the URL, and usually ends in .fls In your Janssen server, locate the directory /opt/jans/jetty/jans-auth/agama/ftl cd to the directory specified by the folder List the contents of the directory and pick the filename that best matches the remainder Save a copy of every selected file in the directory associated to your flow ( basePath directive) or in a subdirectory of it. Rename the files if desired too. Now, build the Override templates directive passing several pairs of strings separated by lines or spaces. Every pair consists of a string specifying the original template location, that is, <folder>/<filename> followed by the path to the new template version relative to the base path of your flow. Output encoding # By default, the engine sends rendered pages using UTF-8 character encoding. To specify a different encoding the ftl directive can be used in pages, for instance, <#ftl encoding=\"ISO-8859-5\"> . Always place this at the top of a template. Localization # To implement this behavior, store all messages that your templates may show in the jans-auth resource bundle. This can be done by creating files named jans-auth_xx.properties or jans-auth_xx_YY.properties in /opt/jans/jetty/jans-auth/custom/i18n . As an example, use jans-auth_ja.properties to hold the messages translated to Japanese, or jans-auth_de_CH.properties for German localized to Switzerland. The syntax of these files adhere to that of Java properties files. The suffixes xx and YY are driven by RFC 4647 and RFC 5646. Agama engine will pick the messages from the bundle that best matches the language settings of the end-user browser. Normally, this is supplied through the HTTP header Accept-Language . A file with no suffix, i.e. jans-auth.properties is used as fallback when a message cannot be found in specific language/country combination. To learn how to reference a message in a template, check this page. Reusable templates # A widespread practice in web page authoring is to compose pages based on reusable pieces. As an example, the need for a common header and footer is ubiquitous in HTML projects. With FreeMarker, composition can be achieved by means of macros . These are the equivalent to functions in programming, they can generate output based on parameters passed and can be called anywhere in a template. Agama already makes use of macros for this purpose. Take a look at the ftlh files found at /opt/jans/jetty/jans-auth/agama . These templates are used to present errors, like timeouts, flow crashes, etc. Example: Here, two pages will be built to demonstrate the concept of composition in FreeMarker templates: a homepage and an \"about us\" page. These will be made up of a header, a sidebar, and their respective main content. Assume the sidebar should be shown only for the home page. Note FreeMarker comments are of the form <#-- This won't be printed in the output --> One way to structure the solution is the following: <#-- aside.ftlh --> <#macro sidebar> <aside> <h2>Recommended tracks</h2> <nav> <ul> <li><a href=\"#\">Efilnikufesin</a></li> <li><a href=\"#\">P.O.N.X.</a></li> <!--li><a href=\"#\">Planet caravan</a></li--> </ul> </nav> </aside> </#macro> aside.ftlh has static markup for a sidebar. It is defined inside a macro called sidebar . <#-- commons.ftlh --> <#import \"aside.ftlh\" as sbar> <#macro header> <header> <h1>Welcome</h1> <nav> <ul> <li><a href=\"#\">Home</a></li> <li><a href=\"#\">About</a></li> <li><a href=\"#\">Sign Up</a></li> </ul> </nav> </header> </#macro> <#macro main useSidebar=false> <!DOCTYPE html> <html> <body> <@header/> <#if useSidebar> <@sbar.sidebar/> </#if> <#nested> </body> </html> </#macro> commons.ftlh template imports aside.ftlh associating it with the shortname sbar . Additionally: It defines two macros: header and main . The macro header generates a static navigation menu main macro is the skeleton of a very simple HTML page main has a parameter named useSidebar whose default is false The sidebar macro is called using <@sbar.sidebar/> while header with <@header/> (local macro) <#-- index.ftlh --> <#import \"commons.ftlh\" as com> <@com.main useSidebar=true> <article> <h1>This is the index page!</h1> <p>Temporibus ut nisi quibusdam iusto vitae similique laudantium. Minima cumque ducimus sit ut dolores. Autem quam soluta illo et omnis expedita voluptas magnam. Sit aperiam laboriosam magnam et amet deleniti. Sit et velit unde quibusdam esse ullam voluptatem. Enim sint blanditiis dolores. Laborum velit eos dolor ad quaerat. Quo tempora excepturi enim dolor harum sunt ipsa. Quis sit dolorem harum ipsa fuga voluptatem commodi. </p> </article> </@com.main> index.ftlh is the homepage: Template commons.ftlh is imported and its macro main called passing true for useSidebar The markup between <@com.main... and <!--@com.main--> is the content of the homepage, which is \"inserted\" by the main macro when the <#nested> directive is reached <#-- about.ftlh --> <#import \"commons.ftlh\" as com> <@com.main> <article> <h1>About us</h1> <p>We don't know ourselves very well.</p> </article> </@com.main> about.ftlh is the \"about us\" page. It works like the homepage except the sidebar will not be shown. Cancellation # Important Ensure you have previously gone through the contents of this page before proceeding This is a feature that in conjuction with template overrides allows developers to implement backtracking or alternative routing. Suppose a flow is designed to reuse two or more existing subflows. As expected these subflows are neither aware of each other nor of its parent. How can the parent make so that once the user has landed at a page belonging to a given subflow A be presented the alternative to take another route, say, to subflow B? Clearly a page at flow A can be overriden, however, how to abort A and make it jump to B? The answer is cancellation. Through flow cancellation, a running flow can be aborted and the control returned to one of its parents for further processing. This can achieved by overriding a template so that the POST to the current URL includes a form field named _abort . POSTing this way will provoke the associated Trigger call to return a value like { aborted: true, data: ..., url: ... } where data is a map consisting of the payload (form fields) sent with the POST. Thus, developers can build custom pages and add for example a button to provoke the cancellation. Then, back in the flow implementation take the user to the desired path. The url property will hold the URL where cancellation took place relative to https://your-server/jans-auth/fl/ . As an example, suppose there exists two flows that allow users to enter and validate a one-time passcode (OTP), one flow sends the OTP via e-mail while the other through an SMS. Assume these flows receive a user identifier as input and render a single UI page each to enter the received OTP. If we are interested in building a flow that prompts for username/password credentials and use the SMS-based OTP flow with a customization that consists of showing a link like \"Didn't get an SMS?, send the passcode to my e-mail\", the following is a sketch of an implementation: ... //validate username/password ... result = Trigger co.acme.SmsOTP userId Override templates \"path/to/enter_otp.ftlh\" \"cust_enter_otp.ftlh\" When result.aborted is true //The user clicked on \"send the passcode to my e-mail\" result = Trigger co.acme.EmailOTP userId When result.success is true result.data = { userId: userId } Finish result The overriden template cust_enter_otp.ftlh would have a form like: ... <form method=\"post\" enctype=\"application/x-www-form-urlencoded\"> <button type=\"submit\" id=\"_abort\" name=\"_abort\" value=\"\"> Didn't get an SMS?, send the passcode to my e-mail</button> </form> Cancellation bubble-up # In order to override a page, the path to the corresponding template can be easily derived from the URL seen at the browser's address bar when the subflow is Trigger ed. Note the page may not necessarily belong directly to the subflow triggered but probably to another flow lying deep in a chain of Trigger invocations. As an example suppose you are interested in building a flow A that reuses flow B. You identify a page shown that needs to be overriden. It might happen this page is actually rendered by C - a flow that B in turn reuses. In scenarios like this cancellation still works transparently and developers need not be aware of flows dependencies. In practice, when cancellation occurs at C, it bubbles up to B and then to A, which is the target of this process. Note that even flow B (as is) may also be overriding C's templates. Resolution of a template path takes place from the inner to the outer flow, so it occurs this way in the example: path is as found in C's RRF instruction path is looked up on the list provided in B's Override templates . If a match is found, path is updated accordingly path is looked up on the list provided in A's Override templates . If a match is found, path is updated accordingly The page referenced by path is rendered Engine internals # Here we provide insight on some behavioral aspects of the engine that may result of interest to developers. Flow advance and navigation # Once a web page (or a response in general) is replied to a client (e.g. web browser), a POST is required to make the flow proceed . The POST is expected to be sent to the current URL only, otherwise, a 404 error will be thrown. The engine will then respond with a redirect (usually 301) so the client will GET the next URL to be rendered. This pattern of navigation is known as \"POST-REDIRECT-GET\". There is a clear correspondence of the \"current URL\" with the physical path of the template rendered. As an example, if the browser location shows https://<your-host>/jans-auth/fl/foo/bar.fls , the involved template is stored at /opt/jans/jetty/jans-auth/agama/ftl/foo and has name bar . This makes flows more predictable and easier to reason about. Note however URLs are not manipulable: an attempt to set the browser location to a URL corresponding to a different template will not make that template be rendered or provoke any unexpected jump in the flow control. Instead, an error page is shown that allows users to re-take where they left off or to restart from scratch. In other words, navigation honors the \"current flow URL\" avoiding attempts to re-visit past stages or make unexpected moves to future ones. Additionally, the engine by default sends responses with proper HTTP headers so page contents are not cached. This is key to prevent manipulation and allows a safe usage of the browser's back button, where it will not be possible to visit past stages. Code transpilation # The engine has some timers running in the background. One of them transpiles code when a change is detected in a given flow's source (written in Agama language). The transpilation process generates vanilla Javascript code runnable through Mozilla Rhino by using a transformation chain like (DSL) flow code -> (ANTLR4) parse tree -> (XML) abstract syntax tree -> JS. The transformation chain guarantees that a flow written in Agama DSL cannot: Access Java classes/instances not specified in the original flow code (i.e. the only bridge to Java world is via Call s) Access/modify the standard javascript built-in objects directly Conflict with javascript keywords Notes You can find the (ANTLR4) DSL grammar here . The last step of the transformation chain is carried out by means of this Freemarker transformer Other engine characteristics # Some interesting facts for the curious: The engine does not use asynchronous paradigms: no events, callbacks, extra threads, etc. All computations remain in the classic request/response servlet lifecycle familiar to most Java developers Continuations allow to express a flow as if it were a straight sequence of commands despite there are actual pauses in the middle: the gaps between an HTTP response and the next request Currently Mozilla Rhino seems to be the only mechanism that brings continuations into the Java language In order to preserve server statelessness, continuations are persisted to storage at every flow pause. This way the proper state can be restored when the continuation is resumed in the upcoming HTTP request","title":"Advanced usages"},{"location":"admin/developer/agama/advanced-usages/#advanced-usages","text":"","title":"Advanced usages"},{"location":"admin/developer/agama/advanced-usages/#ui-templates","text":"","title":"UI templates"},{"location":"admin/developer/agama/advanced-usages/#template-overrides","text":"Template overrides is a mechanism that allows templates customization and promotes flows reuse. If an existing flow serves well the needs of a new flow you are writing, with this feature you can homogenize your UI for a more pleasant user experience. To start, use Trigger to play around with the existing flow - as is - from the flow you are creating. Collect the URLs of the pages you are not comfortable with: grab them directly from the browser's address bar. Then proceed as follows with every URL to locate the actual templates physically: Remove the https://.../fl/ portion of the URL Split the URL obtained into two pieces: a folder name and a remainder . The remainder starts after the last slash found in the URL, and usually ends in .fls In your Janssen server, locate the directory /opt/jans/jetty/jans-auth/agama/ftl cd to the directory specified by the folder List the contents of the directory and pick the filename that best matches the remainder Save a copy of every selected file in the directory associated to your flow ( basePath directive) or in a subdirectory of it. Rename the files if desired too. Now, build the Override templates directive passing several pairs of strings separated by lines or spaces. Every pair consists of a string specifying the original template location, that is, <folder>/<filename> followed by the path to the new template version relative to the base path of your flow.","title":"Template overrides"},{"location":"admin/developer/agama/advanced-usages/#output-encoding","text":"By default, the engine sends rendered pages using UTF-8 character encoding. To specify a different encoding the ftl directive can be used in pages, for instance, <#ftl encoding=\"ISO-8859-5\"> . Always place this at the top of a template.","title":"Output encoding"},{"location":"admin/developer/agama/advanced-usages/#localization","text":"To implement this behavior, store all messages that your templates may show in the jans-auth resource bundle. This can be done by creating files named jans-auth_xx.properties or jans-auth_xx_YY.properties in /opt/jans/jetty/jans-auth/custom/i18n . As an example, use jans-auth_ja.properties to hold the messages translated to Japanese, or jans-auth_de_CH.properties for German localized to Switzerland. The syntax of these files adhere to that of Java properties files. The suffixes xx and YY are driven by RFC 4647 and RFC 5646. Agama engine will pick the messages from the bundle that best matches the language settings of the end-user browser. Normally, this is supplied through the HTTP header Accept-Language . A file with no suffix, i.e. jans-auth.properties is used as fallback when a message cannot be found in specific language/country combination. To learn how to reference a message in a template, check this page.","title":"Localization"},{"location":"admin/developer/agama/advanced-usages/#reusable-templates","text":"A widespread practice in web page authoring is to compose pages based on reusable pieces. As an example, the need for a common header and footer is ubiquitous in HTML projects. With FreeMarker, composition can be achieved by means of macros . These are the equivalent to functions in programming, they can generate output based on parameters passed and can be called anywhere in a template. Agama already makes use of macros for this purpose. Take a look at the ftlh files found at /opt/jans/jetty/jans-auth/agama . These templates are used to present errors, like timeouts, flow crashes, etc. Example: Here, two pages will be built to demonstrate the concept of composition in FreeMarker templates: a homepage and an \"about us\" page. These will be made up of a header, a sidebar, and their respective main content. Assume the sidebar should be shown only for the home page. Note FreeMarker comments are of the form <#-- This won't be printed in the output --> One way to structure the solution is the following: <#-- aside.ftlh --> <#macro sidebar> <aside> <h2>Recommended tracks</h2> <nav> <ul> <li><a href=\"#\">Efilnikufesin</a></li> <li><a href=\"#\">P.O.N.X.</a></li> <!--li><a href=\"#\">Planet caravan</a></li--> </ul> </nav> </aside> </#macro> aside.ftlh has static markup for a sidebar. It is defined inside a macro called sidebar . <#-- commons.ftlh --> <#import \"aside.ftlh\" as sbar> <#macro header> <header> <h1>Welcome</h1> <nav> <ul> <li><a href=\"#\">Home</a></li> <li><a href=\"#\">About</a></li> <li><a href=\"#\">Sign Up</a></li> </ul> </nav> </header> </#macro> <#macro main useSidebar=false> <!DOCTYPE html> <html> <body> <@header/> <#if useSidebar> <@sbar.sidebar/> </#if> <#nested> </body> </html> </#macro> commons.ftlh template imports aside.ftlh associating it with the shortname sbar . Additionally: It defines two macros: header and main . The macro header generates a static navigation menu main macro is the skeleton of a very simple HTML page main has a parameter named useSidebar whose default is false The sidebar macro is called using <@sbar.sidebar/> while header with <@header/> (local macro) <#-- index.ftlh --> <#import \"commons.ftlh\" as com> <@com.main useSidebar=true> <article> <h1>This is the index page!</h1> <p>Temporibus ut nisi quibusdam iusto vitae similique laudantium. Minima cumque ducimus sit ut dolores. Autem quam soluta illo et omnis expedita voluptas magnam. Sit aperiam laboriosam magnam et amet deleniti. Sit et velit unde quibusdam esse ullam voluptatem. Enim sint blanditiis dolores. Laborum velit eos dolor ad quaerat. Quo tempora excepturi enim dolor harum sunt ipsa. Quis sit dolorem harum ipsa fuga voluptatem commodi. </p> </article> </@com.main> index.ftlh is the homepage: Template commons.ftlh is imported and its macro main called passing true for useSidebar The markup between <@com.main... and <!--@com.main--> is the content of the homepage, which is \"inserted\" by the main macro when the <#nested> directive is reached <#-- about.ftlh --> <#import \"commons.ftlh\" as com> <@com.main> <article> <h1>About us</h1> <p>We don't know ourselves very well.</p> </article> </@com.main> about.ftlh is the \"about us\" page. It works like the homepage except the sidebar will not be shown.","title":"Reusable templates"},{"location":"admin/developer/agama/advanced-usages/#cancellation","text":"Important Ensure you have previously gone through the contents of this page before proceeding This is a feature that in conjuction with template overrides allows developers to implement backtracking or alternative routing. Suppose a flow is designed to reuse two or more existing subflows. As expected these subflows are neither aware of each other nor of its parent. How can the parent make so that once the user has landed at a page belonging to a given subflow A be presented the alternative to take another route, say, to subflow B? Clearly a page at flow A can be overriden, however, how to abort A and make it jump to B? The answer is cancellation. Through flow cancellation, a running flow can be aborted and the control returned to one of its parents for further processing. This can achieved by overriding a template so that the POST to the current URL includes a form field named _abort . POSTing this way will provoke the associated Trigger call to return a value like { aborted: true, data: ..., url: ... } where data is a map consisting of the payload (form fields) sent with the POST. Thus, developers can build custom pages and add for example a button to provoke the cancellation. Then, back in the flow implementation take the user to the desired path. The url property will hold the URL where cancellation took place relative to https://your-server/jans-auth/fl/ . As an example, suppose there exists two flows that allow users to enter and validate a one-time passcode (OTP), one flow sends the OTP via e-mail while the other through an SMS. Assume these flows receive a user identifier as input and render a single UI page each to enter the received OTP. If we are interested in building a flow that prompts for username/password credentials and use the SMS-based OTP flow with a customization that consists of showing a link like \"Didn't get an SMS?, send the passcode to my e-mail\", the following is a sketch of an implementation: ... //validate username/password ... result = Trigger co.acme.SmsOTP userId Override templates \"path/to/enter_otp.ftlh\" \"cust_enter_otp.ftlh\" When result.aborted is true //The user clicked on \"send the passcode to my e-mail\" result = Trigger co.acme.EmailOTP userId When result.success is true result.data = { userId: userId } Finish result The overriden template cust_enter_otp.ftlh would have a form like: ... <form method=\"post\" enctype=\"application/x-www-form-urlencoded\"> <button type=\"submit\" id=\"_abort\" name=\"_abort\" value=\"\"> Didn't get an SMS?, send the passcode to my e-mail</button> </form>","title":"Cancellation"},{"location":"admin/developer/agama/advanced-usages/#cancellation-bubble-up","text":"In order to override a page, the path to the corresponding template can be easily derived from the URL seen at the browser's address bar when the subflow is Trigger ed. Note the page may not necessarily belong directly to the subflow triggered but probably to another flow lying deep in a chain of Trigger invocations. As an example suppose you are interested in building a flow A that reuses flow B. You identify a page shown that needs to be overriden. It might happen this page is actually rendered by C - a flow that B in turn reuses. In scenarios like this cancellation still works transparently and developers need not be aware of flows dependencies. In practice, when cancellation occurs at C, it bubbles up to B and then to A, which is the target of this process. Note that even flow B (as is) may also be overriding C's templates. Resolution of a template path takes place from the inner to the outer flow, so it occurs this way in the example: path is as found in C's RRF instruction path is looked up on the list provided in B's Override templates . If a match is found, path is updated accordingly path is looked up on the list provided in A's Override templates . If a match is found, path is updated accordingly The page referenced by path is rendered","title":"Cancellation bubble-up"},{"location":"admin/developer/agama/advanced-usages/#engine-internals","text":"Here we provide insight on some behavioral aspects of the engine that may result of interest to developers.","title":"Engine internals"},{"location":"admin/developer/agama/advanced-usages/#flow-advance-and-navigation","text":"Once a web page (or a response in general) is replied to a client (e.g. web browser), a POST is required to make the flow proceed . The POST is expected to be sent to the current URL only, otherwise, a 404 error will be thrown. The engine will then respond with a redirect (usually 301) so the client will GET the next URL to be rendered. This pattern of navigation is known as \"POST-REDIRECT-GET\". There is a clear correspondence of the \"current URL\" with the physical path of the template rendered. As an example, if the browser location shows https://<your-host>/jans-auth/fl/foo/bar.fls , the involved template is stored at /opt/jans/jetty/jans-auth/agama/ftl/foo and has name bar . This makes flows more predictable and easier to reason about. Note however URLs are not manipulable: an attempt to set the browser location to a URL corresponding to a different template will not make that template be rendered or provoke any unexpected jump in the flow control. Instead, an error page is shown that allows users to re-take where they left off or to restart from scratch. In other words, navigation honors the \"current flow URL\" avoiding attempts to re-visit past stages or make unexpected moves to future ones. Additionally, the engine by default sends responses with proper HTTP headers so page contents are not cached. This is key to prevent manipulation and allows a safe usage of the browser's back button, where it will not be possible to visit past stages.","title":"Flow advance and navigation"},{"location":"admin/developer/agama/advanced-usages/#code-transpilation","text":"The engine has some timers running in the background. One of them transpiles code when a change is detected in a given flow's source (written in Agama language). The transpilation process generates vanilla Javascript code runnable through Mozilla Rhino by using a transformation chain like (DSL) flow code -> (ANTLR4) parse tree -> (XML) abstract syntax tree -> JS. The transformation chain guarantees that a flow written in Agama DSL cannot: Access Java classes/instances not specified in the original flow code (i.e. the only bridge to Java world is via Call s) Access/modify the standard javascript built-in objects directly Conflict with javascript keywords Notes You can find the (ANTLR4) DSL grammar here . The last step of the transformation chain is carried out by means of this Freemarker transformer","title":"Code transpilation"},{"location":"admin/developer/agama/advanced-usages/#other-engine-characteristics","text":"Some interesting facts for the curious: The engine does not use asynchronous paradigms: no events, callbacks, extra threads, etc. All computations remain in the classic request/response servlet lifecycle familiar to most Java developers Continuations allow to express a flow as if it were a straight sequence of commands despite there are actual pauses in the middle: the gaps between an HTTP response and the next request Currently Mozilla Rhino seems to be the only mechanism that brings continuations into the Java language In order to preserve server statelessness, continuations are persisted to storage at every flow pause. This way the proper state can be restored when the continuation is resumed in the upcoming HTTP request","title":"Other engine characteristics"},{"location":"admin/developer/agama/engine-bridge-config/","tags":["administration","developer","agama"],"text":"Engine and bridge configurations # Availability # The engine and the bridge are two of the components part of the Agama Framework implementation in Janssen. The engine is a piece of software in charge of parsing flows written in Agama DSL and put them into action. The \"bridge\" is a regular jython script that temporarily hands control to the engine when an Agama flow is started, and receives control back once the flow has finished. This script is in charge of completing the authentication process for the user. By default, both components are disabled. To activate them do the following: Open TUI Navigate to Auth Server > properties > agamaConfiguration > check enabled > save Navigate to Scripts > Search 'agama' > Select the script and hit enter > check enabled > save Engine configuration # Some aspects of the engine are configurable and they are integral part of the Jans authentication server's JSON configuration - specifically the section labeled agamaConfiguration . To learn how to perform changes in the server's configuration click here . The properties of Agama engine configuration are described in the following: enabled : A boolean value that specifies if the engine is enabled. Read more about engine availability above templatesPath : A path relative to /opt/jans/jetty/jans-auth/server/agama that serves as the root of Agama flow pages. Default value is /ftl scriptsPath : A path relative to /opt/jans/jetty/jans-auth/server/agama that serves as the root of the hierarchy of (Java/Groovy) classes added on the fly. Default value is /scripts serializerType : A low-level property related to continuations serialization. Set this to null if your flows present crashes due to issues with Java serialization. Default value is KRYO maxItemsLoggedInCollections : When a list or map is logged in a flow, only the first few items are included in the output. You can use this property to increase that limit. Default value is 9 pageMismatchErrorPage : A path relative to /opt/jans/jetty/jans-auth/server/agama containing the location of the page shown when an unexpected URL is requested while a flow is in course. Default value is mismatch.ftlh interruptionErrorPage : A path relative to /opt/jans/jetty/jans-auth/server/agama containing the location of the page shown when a user exceeds the amount of time allowed to take a flow to completion. Note that in order to preserve resources, the engine holds references to unfinished flows only for a small period of time (usually less than two minutes). Once the reference is lost, the error page regarded here won't be shown but pageMismatchErrorPage . Default value is timeout.ftlh crashErrorPage : A path relative to /opt/jans/jetty/jans-auth/server/agama containing the location of the page shown when an error has occured while running the flow. It contains a brief description of the problem for troubleshooting. Default value is crash.ftlh finishedFlowPage : A path relative to /opt/jans/jetty/jans-auth/server/agama containing the location of the page shown when a flow has finished (whether successfully or not) in the phase handled exclusively by the engine. This page features an auto-submitting form that users won't notice in practice. This page will rarely need modifications. Default value is finished.ftlh bridgeScriptPage : This is a facelets (JSF) page the bridge needs for proper operation. This page resides in the authentication server WAR file and will rarely need modifications. Default value is agama.xhtml Bridge configuration # There are a few configuration properties admins can set to modify the behavior of the bridge: cust_param_name : The name of the request parameter - in the authentication request - that will carry the name of the flow to launch. Ensure to register the given parameter name in the server configuration (property authorizationRequestCustomAllowedParameters ) beforehand default_flow_name : If the relying party (RP) is not able to send custom parameters or omits the flow name in the authentication request, the value of this property will be assumed to be the flow to launch by default finish_userid_db_attribute : It is used to map the identity of the user to login in the case of sucessfully finished flows. The value of this property will contain a physical database attribute that will be correlated with the userId passed in the Finish instruction of the flow","title":"Engine and bridge configurations"},{"location":"admin/developer/agama/engine-bridge-config/#engine-and-bridge-configurations","text":"","title":"Engine and bridge configurations"},{"location":"admin/developer/agama/engine-bridge-config/#availability","text":"The engine and the bridge are two of the components part of the Agama Framework implementation in Janssen. The engine is a piece of software in charge of parsing flows written in Agama DSL and put them into action. The \"bridge\" is a regular jython script that temporarily hands control to the engine when an Agama flow is started, and receives control back once the flow has finished. This script is in charge of completing the authentication process for the user. By default, both components are disabled. To activate them do the following: Open TUI Navigate to Auth Server > properties > agamaConfiguration > check enabled > save Navigate to Scripts > Search 'agama' > Select the script and hit enter > check enabled > save","title":"Availability"},{"location":"admin/developer/agama/engine-bridge-config/#engine-configuration","text":"Some aspects of the engine are configurable and they are integral part of the Jans authentication server's JSON configuration - specifically the section labeled agamaConfiguration . To learn how to perform changes in the server's configuration click here . The properties of Agama engine configuration are described in the following: enabled : A boolean value that specifies if the engine is enabled. Read more about engine availability above templatesPath : A path relative to /opt/jans/jetty/jans-auth/server/agama that serves as the root of Agama flow pages. Default value is /ftl scriptsPath : A path relative to /opt/jans/jetty/jans-auth/server/agama that serves as the root of the hierarchy of (Java/Groovy) classes added on the fly. Default value is /scripts serializerType : A low-level property related to continuations serialization. Set this to null if your flows present crashes due to issues with Java serialization. Default value is KRYO maxItemsLoggedInCollections : When a list or map is logged in a flow, only the first few items are included in the output. You can use this property to increase that limit. Default value is 9 pageMismatchErrorPage : A path relative to /opt/jans/jetty/jans-auth/server/agama containing the location of the page shown when an unexpected URL is requested while a flow is in course. Default value is mismatch.ftlh interruptionErrorPage : A path relative to /opt/jans/jetty/jans-auth/server/agama containing the location of the page shown when a user exceeds the amount of time allowed to take a flow to completion. Note that in order to preserve resources, the engine holds references to unfinished flows only for a small period of time (usually less than two minutes). Once the reference is lost, the error page regarded here won't be shown but pageMismatchErrorPage . Default value is timeout.ftlh crashErrorPage : A path relative to /opt/jans/jetty/jans-auth/server/agama containing the location of the page shown when an error has occured while running the flow. It contains a brief description of the problem for troubleshooting. Default value is crash.ftlh finishedFlowPage : A path relative to /opt/jans/jetty/jans-auth/server/agama containing the location of the page shown when a flow has finished (whether successfully or not) in the phase handled exclusively by the engine. This page features an auto-submitting form that users won't notice in practice. This page will rarely need modifications. Default value is finished.ftlh bridgeScriptPage : This is a facelets (JSF) page the bridge needs for proper operation. This page resides in the authentication server WAR file and will rarely need modifications. Default value is agama.xhtml","title":"Engine configuration"},{"location":"admin/developer/agama/engine-bridge-config/#bridge-configuration","text":"There are a few configuration properties admins can set to modify the behavior of the bridge: cust_param_name : The name of the request parameter - in the authentication request - that will carry the name of the flow to launch. Ensure to register the given parameter name in the server configuration (property authorizationRequestCustomAllowedParameters ) beforehand default_flow_name : If the relying party (RP) is not able to send custom parameters or omits the flow name in the authentication request, the value of this property will be assumed to be the flow to launch by default finish_userid_db_attribute : It is used to map the identity of the user to login in the case of sucessfully finished flows. The value of this property will contain a physical database attribute that will be correlated with the userId passed in the Finish instruction of the flow","title":"Bridge configuration"},{"location":"admin/developer/agama/faq/","tags":["administration","developer","agama"],"text":"Frequently asked questions # Common errors # Unable to find a constructor with arity ... in class ... # A Java invocation of the form Call package.className#new ... is passing a number of parameters that does not match any of the existing constructors for that class. Unable to find a method called ... with arity ... in class ... # A java invocation is attempting to call a method that is not part of the given class or the number of parameters passed for the method is not correct. No Finish instruction was reached # This occurs when no Finish statement has been found in the execution of a flow and there are no remaining instructions. Serialization errors # Agama engine saves the state of a flow every time an RRF or RFAC instruction is reached. For this purpose the KRYO library is employed. If kryo is unable to serialize a variable in use by your flow, a serialization error will appear in the screen or in the logs. Normally the problematic (Java) class is logged and this helps reveal the variable that is causing the issue. Note variables that hold \"native\" Agama values like strings or maps are never troublesome; the problems may originate from values obtained via Call . To fix a serialization problem, try some of the following: Check if the value held by the variable is needed for RRF/RFAC or some upcoming statement. If that's not the case, simply set it to null before RRF/RFAC occurs Adjust the given class so it is \"serialization\" friendlier. With kryo, classes are not required to implement the java.io.Serializable interface Find a replacement for the problematic class As a last resort, set serializerType property of the engine to null . Note this will switch to standard Java serialization. This setting applies globally for all your flows Classes added on the fly # A class is still available after removing the corresponding file # This is because the JVM does not support unloading: even if a given source file is removed, its corresponding class will still be accessible - it remains in the classpath. The classpath will be clean again after a service restart. How to append data to a flow's log directly? # Call method log of class io.jans.agama.engine.script.LogUtils . This method receives a variable number of arguments as DSL's Log does. Thus you can do LogUtils.log(\"@w Today is Friday %th\", 13) , as in the logging examples . What Groovy and Java versions are supported? # Groovy 4.0 and Java 11. The runtime is Amazon Corretto 11. Templates # How to implement localization? # This topic is covered here . How to modify the built-in error pages? # Agama features some error pages out-of-the-box. They can be customized by editing the corresponding files referenced in the configuration doc page. Is Javascript supported? # Yes, the template engine is not concerned about the kind of contents linked in markup. It does not even care if your markup makes any sense. For FreeMarker, templates just produce a textual output. A flow page is not rendered as HTML, the browser just shows the source code as text # This is due to lack of proper Content-Type response header. This occurs if your template has filename extension other than ftlh . If you don't want to rename your template, insert <#ftl output_format=\"HTML\"> at the beginning of the file. How to produce JSON instead of HTML? # In your templates use <#ftl output_format=\"JSON\"> in the first line. Take a look at the templates whose name start with json_ in folder /opt/jans/jetty/jans-auth/agama . Particularly check how JSON content can be escaped - unfortunately FreeMarker does not support escaping for JSON out-of-the-box. Development tools # Are there any IDE or editor plugins available for coding flows and manage projects? # Not plugins but you can use Agama Lab for projects and flows authoring. How to debug flows? # We plan to offer a debugger in the future. In the meantime, you can do printf -like debugging using the Log instruction. See Agama logging . Miscellaneous # Does the engine support AJAX? # If you require a flow with no page refreshes, it could be implemented using AJAX calls as long as they align to the POST-REDIRECT-GET pattern, where a form is submitted, and as response a 302/303 HTTP redirection is obtained. Your Javascript code must also render UI elements in accordance with the data obtained by following the redirect (GET). Also, care must be taken in order to process server errors, timeouts, etc. In general, this requires a considerable amount of effort. If you require AJAX to consume a resource (service) residing in the same domain of your server, there is no restriction - the engine is not involved. Interaction with external domains may require to setup CORS configuration appropriately in the authentication server. How to launch a flow? # A flow is launched by issuing an authentication request in a browser as explained here . Does flow execution timeout? # Yes. The maximum amount of time an end-user can take to fully complete a flow is driven by the configuration of the authentication server and can be constrained even more in the flow itself. Read about timeouts here . How to prevent launching a flow directly from the browser? # This can be configured in the project's metadata file . Updates in a flow's code are not reflected in its execution # When a project is re-deployed, a flow remains unchanged if it comes with errors in the provided .gama file. The response obtained by the deployment API will let you know which flows have errors and their descriptions. Why are the contents of a list or map logged partially? # This is to avoid traversing big structures fully. You can increase the value of maxItemsLoggedInCollections in the engine configuration . How to add two numbers or compare numeric values in Agama? # Agama only provides operators for equality check in conditional statements. The structure of an authentication flow will rarely have to deal with computations/comparisons of numbers, strings, etc. In case this is needed, developers have to resort to Java. Hint : some methods like addExact , incrementExact , etc. in java.lang.Math might help. How to concatenate strings in Agama? # See the previous answer. A two-lines solution could be: strings = [ s1, s2, ... ] Call java.lang.String#join \"\" strings How to know the index of a given loop iteration? # See the examples in the Looping section of the language reference . How to know the number of iterations carried out by a loop once it has finished? # You can assign this value to a variable at the top of your loop declaration. See the examples in the Looping section of the language reference . Can Agama code be called from Java? # No. These two languages are supposed to play roles that should not be mixed, check here .","title":"FAQ"},{"location":"admin/developer/agama/faq/#frequently-asked-questions","text":"","title":"Frequently asked questions"},{"location":"admin/developer/agama/faq/#common-errors","text":"","title":"Common errors"},{"location":"admin/developer/agama/faq/#unable-to-find-a-constructor-with-arity-in-class","text":"A Java invocation of the form Call package.className#new ... is passing a number of parameters that does not match any of the existing constructors for that class.","title":"Unable to find a constructor with arity ... in class ..."},{"location":"admin/developer/agama/faq/#unable-to-find-a-method-called-with-arity-in-class","text":"A java invocation is attempting to call a method that is not part of the given class or the number of parameters passed for the method is not correct.","title":"Unable to find a method called ... with arity ... in class ..."},{"location":"admin/developer/agama/faq/#no-finish-instruction-was-reached","text":"This occurs when no Finish statement has been found in the execution of a flow and there are no remaining instructions.","title":"No Finish instruction was reached"},{"location":"admin/developer/agama/faq/#serialization-errors","text":"Agama engine saves the state of a flow every time an RRF or RFAC instruction is reached. For this purpose the KRYO library is employed. If kryo is unable to serialize a variable in use by your flow, a serialization error will appear in the screen or in the logs. Normally the problematic (Java) class is logged and this helps reveal the variable that is causing the issue. Note variables that hold \"native\" Agama values like strings or maps are never troublesome; the problems may originate from values obtained via Call . To fix a serialization problem, try some of the following: Check if the value held by the variable is needed for RRF/RFAC or some upcoming statement. If that's not the case, simply set it to null before RRF/RFAC occurs Adjust the given class so it is \"serialization\" friendlier. With kryo, classes are not required to implement the java.io.Serializable interface Find a replacement for the problematic class As a last resort, set serializerType property of the engine to null . Note this will switch to standard Java serialization. This setting applies globally for all your flows","title":"Serialization errors"},{"location":"admin/developer/agama/faq/#classes-added-on-the-fly","text":"","title":"Classes added on the fly"},{"location":"admin/developer/agama/faq/#a-class-is-still-available-after-removing-the-corresponding-file","text":"This is because the JVM does not support unloading: even if a given source file is removed, its corresponding class will still be accessible - it remains in the classpath. The classpath will be clean again after a service restart.","title":"A class is still available after removing the corresponding file"},{"location":"admin/developer/agama/faq/#how-to-append-data-to-a-flows-log-directly","text":"Call method log of class io.jans.agama.engine.script.LogUtils . This method receives a variable number of arguments as DSL's Log does. Thus you can do LogUtils.log(\"@w Today is Friday %th\", 13) , as in the logging examples .","title":"How to append data to a flow's log directly?"},{"location":"admin/developer/agama/faq/#what-groovy-and-java-versions-are-supported","text":"Groovy 4.0 and Java 11. The runtime is Amazon Corretto 11.","title":"What Groovy and Java versions are supported?"},{"location":"admin/developer/agama/faq/#templates","text":"","title":"Templates"},{"location":"admin/developer/agama/faq/#how-to-implement-localization","text":"This topic is covered here .","title":"How to implement localization?"},{"location":"admin/developer/agama/faq/#how-to-modify-the-built-in-error-pages","text":"Agama features some error pages out-of-the-box. They can be customized by editing the corresponding files referenced in the configuration doc page.","title":"How to modify the built-in error pages?"},{"location":"admin/developer/agama/faq/#is-javascript-supported","text":"Yes, the template engine is not concerned about the kind of contents linked in markup. It does not even care if your markup makes any sense. For FreeMarker, templates just produce a textual output.","title":"Is Javascript supported?"},{"location":"admin/developer/agama/faq/#a-flow-page-is-not-rendered-as-html-the-browser-just-shows-the-source-code-as-text","text":"This is due to lack of proper Content-Type response header. This occurs if your template has filename extension other than ftlh . If you don't want to rename your template, insert <#ftl output_format=\"HTML\"> at the beginning of the file.","title":"A flow page is not rendered as HTML, the browser just shows the source code as text"},{"location":"admin/developer/agama/faq/#how-to-produce-json-instead-of-html","text":"In your templates use <#ftl output_format=\"JSON\"> in the first line. Take a look at the templates whose name start with json_ in folder /opt/jans/jetty/jans-auth/agama . Particularly check how JSON content can be escaped - unfortunately FreeMarker does not support escaping for JSON out-of-the-box.","title":"How to produce JSON instead of HTML?"},{"location":"admin/developer/agama/faq/#development-tools","text":"","title":"Development tools"},{"location":"admin/developer/agama/faq/#are-there-any-ide-or-editor-plugins-available-for-coding-flows-and-manage-projects","text":"Not plugins but you can use Agama Lab for projects and flows authoring.","title":"Are there any IDE or editor plugins available for coding flows and manage projects?"},{"location":"admin/developer/agama/faq/#how-to-debug-flows","text":"We plan to offer a debugger in the future. In the meantime, you can do printf -like debugging using the Log instruction. See Agama logging .","title":"How to debug flows?"},{"location":"admin/developer/agama/faq/#miscellaneous","text":"","title":"Miscellaneous"},{"location":"admin/developer/agama/faq/#does-the-engine-support-ajax","text":"If you require a flow with no page refreshes, it could be implemented using AJAX calls as long as they align to the POST-REDIRECT-GET pattern, where a form is submitted, and as response a 302/303 HTTP redirection is obtained. Your Javascript code must also render UI elements in accordance with the data obtained by following the redirect (GET). Also, care must be taken in order to process server errors, timeouts, etc. In general, this requires a considerable amount of effort. If you require AJAX to consume a resource (service) residing in the same domain of your server, there is no restriction - the engine is not involved. Interaction with external domains may require to setup CORS configuration appropriately in the authentication server.","title":"Does the engine support AJAX?"},{"location":"admin/developer/agama/faq/#how-to-launch-a-flow","text":"A flow is launched by issuing an authentication request in a browser as explained here .","title":"How to launch a flow?"},{"location":"admin/developer/agama/faq/#does-flow-execution-timeout","text":"Yes. The maximum amount of time an end-user can take to fully complete a flow is driven by the configuration of the authentication server and can be constrained even more in the flow itself. Read about timeouts here .","title":"Does flow execution timeout?"},{"location":"admin/developer/agama/faq/#how-to-prevent-launching-a-flow-directly-from-the-browser","text":"This can be configured in the project's metadata file .","title":"How to prevent launching a flow directly from the browser?"},{"location":"admin/developer/agama/faq/#updates-in-a-flows-code-are-not-reflected-in-its-execution","text":"When a project is re-deployed, a flow remains unchanged if it comes with errors in the provided .gama file. The response obtained by the deployment API will let you know which flows have errors and their descriptions.","title":"Updates in a flow's code are not reflected in its execution"},{"location":"admin/developer/agama/faq/#why-are-the-contents-of-a-list-or-map-logged-partially","text":"This is to avoid traversing big structures fully. You can increase the value of maxItemsLoggedInCollections in the engine configuration .","title":"Why are the contents of a list or map logged partially?"},{"location":"admin/developer/agama/faq/#how-to-add-two-numbers-or-compare-numeric-values-in-agama","text":"Agama only provides operators for equality check in conditional statements. The structure of an authentication flow will rarely have to deal with computations/comparisons of numbers, strings, etc. In case this is needed, developers have to resort to Java. Hint : some methods like addExact , incrementExact , etc. in java.lang.Math might help.","title":"How to add two numbers or compare numeric values in Agama?"},{"location":"admin/developer/agama/faq/#how-to-concatenate-strings-in-agama","text":"See the previous answer. A two-lines solution could be: strings = [ s1, s2, ... ] Call java.lang.String#join \"\" strings","title":"How to concatenate strings in Agama?"},{"location":"admin/developer/agama/faq/#how-to-know-the-index-of-a-given-loop-iteration","text":"See the examples in the Looping section of the language reference .","title":"How to know the index of a given loop iteration?"},{"location":"admin/developer/agama/faq/#how-to-know-the-number-of-iterations-carried-out-by-a-loop-once-it-has-finished","text":"You can assign this value to a variable at the top of your loop declaration. See the examples in the Looping section of the language reference .","title":"How to know the number of iterations carried out by a loop once it has finished?"},{"location":"admin/developer/agama/faq/#can-agama-code-be-called-from-java","text":"No. These two languages are supposed to play roles that should not be mixed, check here .","title":"Can Agama code be called from Java?"},{"location":"admin/developer/agama/flows-navigation-ui/","tags":["administration","developer","agama"],"text":"Flows navigation, UI pages and assets # RRF is a powerful construct in Agama. Its syntax follows this pattern: ( assignment-var =)? RRF \"path-to-UI-template\" map-variable ? Execution involves several steps which can be summarized as: location of template, rendering, and user-data retrieval. The process is explained in the following. Template location # Note For convenience, references to the server directory /opt/jans/jetty/jans-auth/agama will be replaced by <AGAMA-DIR> from here onwards. A path is built by concatenating the Basepath of the flow this RRF belongs to and the actual template path, i.e. path-to-UI-template as in the introductory parapraph. Then the engine's templates path root is prepended to it. The \"root\" is the value set in the engine configuration for the property templatesPath . Thus, in a default installation, the value to prepend would be <AGAMA-DIR>/ftl . If there is no such file, the flow will crash right away, otherwise, processing continues. How to build templates? # Templates are expected to be written using Apache FreeMarker . This is a simple and highly productive language to produce HTML and other forms of output. By convention templates generating HTML markup in Agama should have the extension ftlh . Practically they will look and behave as regular HTML files. Developers are encouraged to take a peep at the FreeMarker manual before trying to write their first pages. It usually boils down to produce the desired markup plus adding some placeholders for information that is dynamic. The key concept there is Template + data-model = output which is pretty natural. The sumation in this equation is generally referred to as \"rendering a template\" in this documentation. Rendering # Rendering is the process of \"injecting\" the variable passed ( map-variable in the above) into a template. If no variable is present in the instruction, it is assumed an empty map was passed, i.e. { } . The variable injected (\"data model\" in FreeMarker terms) always has to be an Agama map , Java bean or object implementing the java.util.Map interface. This will allow access to the contents of such variable from within the template. Here is a simple example. Suppose you want to ask for a username and password in a page called login.ftl and that such page will be stored in <AGAMA-DIR>/ftl/myflow/pages/login.ftl . Assume the flow has the header directive Basepath \"myflow\" . Also, let's say we want to pass a custom salutation message to be shown at the top of the page. Here is how the Agama code would look like: ... obj = { message: \"Hey ho!, let's go\" } RRF \"pages/login.ftl\" obj ... And here the UI page contents: <!doctype html> <html xmlns=\"http://www.w3.org/1999/xhtml\"> ... <body> <h1>${message}</h1> <form method=\"post\" enctype=\"application/x-www-form-urlencoded\"> <div> <label for=\"username\">Username</label> <input type=\"text\" name=\"username\"> </div> <div> <label for=\"password\">Password</label> <input type=\"password\" name=\"password\"> </div> <input type=\"submit\" value=\"Login\"> </form> </body> </html> Extended data model # The data model (injected map ) is attached a couple of additional keys for developer's convenience: webCtx . It gives easy access to often needed bits like current path, locale, etc. This is a Java object you can inspect here . Take a look at the getters; writing ${webCtx.contextPath} in a template will insert the result of calling method getContextPath - normally the string /jans-auth . msgs . It gives access to the localized messages of jans-auth application. Some developers might know this as the \"internationalization labels\" or \"resource bundle\" of an application. This is a collection of .properties files where common UI-related messages in different languages can be found. A message (label) is identified by a key, so in a template ${msgs.<KEY>} could be used. As most keys in resource bundles have dot characters, the alternative notation ${webCtx[\"KEY\"]} works better for FreeMarker, for example ${msgs[\"login.errorMessage\"]} . Assets handling # Clearly, templates can link other local web resources like Javascript code, images, etc. The location of this kind of files is expected to be in the filesystem under <AGAMA-DIR>/fl directory. Note this is not the same directory of templates. Doing so would allow users to retrieve the code of templates by simple URL manipulation. As an example, suppose your flow Basepath is foo and you have the instructions RRF index.ftlh and RRF bar/index2.ftlh somewhere in your code. Then your local <AGAMA-DIR>/ftl would look like: foo |- index.ftlh +- bar \\- index2.ftlh Say index.ftlh has markup like <img src=\"bar/me.png\"> and index2.ftlh has <link href=\"my/style.css\" rel=\"stylesheet\"> somewhere. This is how <AGAMA-DIR>/fl would look like: foo +- bar |- me.png \\- my \\- style.css User-data retrieval # Once the rendered page is shown in the browser, the flow execution is literally paused. If the user stands idly at this page, nothing will happen. To make the flow proceed, an HTTP POST must be made to the current URL. This is exactly what login.ftl of the above example tries to do: it provides a button that submits the form via POST for the flow to resume execution. Once the flow continues, an Agama map is built using all form fields received at the server and bound to the variable used in the assignment of the RRF instruction (the variable referred as assignment-var in the introduction of this page). This only applies when RRF has an assignment associated, of course. If the earlier example is modified to ... obj = { message: \"Hey ho!, let's go\" } credentials = RRF \"pages/login.ftl\" obj ... the form values can then be referenced as credentials.username and credentials.password in the flow. In other words, the keys of the resulting map will correspond to the form field names. The values will all be strings . 3-param variant # In the Jans Agama engine, RRF can be passed a third parameter: RRF templatePath variable boolean . When the boolean value is true the callback URL will be available while RRF is in execution (as in RFAC ). In this case, if the callback is visited, data passed to it will be set as the result of the RRF . If a POST to the current URL is received first, i.e. callback not hit, behavior will be as in the two-param RRF invocation. This is also the case when a false value is passed for the third parameter. The three-param variant of RRF can be useful when: The decision to redirect to an external site can only be done from the browser itself The external site expects to receive an HTTP POST. In this case, the rendered template may contain a form with fields as needed plus auto-submission logic in Javascript to perform the actual POST. This typically occurs in inbound-identity flows where identity providers require authentication requests serialized in application/x-www-form-urlencoded format as is the case of SAML HTTP POST binding, for example","title":"Navigation, UI pages and assets"},{"location":"admin/developer/agama/flows-navigation-ui/#flows-navigation-ui-pages-and-assets","text":"RRF is a powerful construct in Agama. Its syntax follows this pattern: ( assignment-var =)? RRF \"path-to-UI-template\" map-variable ? Execution involves several steps which can be summarized as: location of template, rendering, and user-data retrieval. The process is explained in the following.","title":"Flows navigation, UI pages and assets"},{"location":"admin/developer/agama/flows-navigation-ui/#template-location","text":"Note For convenience, references to the server directory /opt/jans/jetty/jans-auth/agama will be replaced by <AGAMA-DIR> from here onwards. A path is built by concatenating the Basepath of the flow this RRF belongs to and the actual template path, i.e. path-to-UI-template as in the introductory parapraph. Then the engine's templates path root is prepended to it. The \"root\" is the value set in the engine configuration for the property templatesPath . Thus, in a default installation, the value to prepend would be <AGAMA-DIR>/ftl . If there is no such file, the flow will crash right away, otherwise, processing continues.","title":"Template location"},{"location":"admin/developer/agama/flows-navigation-ui/#how-to-build-templates","text":"Templates are expected to be written using Apache FreeMarker . This is a simple and highly productive language to produce HTML and other forms of output. By convention templates generating HTML markup in Agama should have the extension ftlh . Practically they will look and behave as regular HTML files. Developers are encouraged to take a peep at the FreeMarker manual before trying to write their first pages. It usually boils down to produce the desired markup plus adding some placeholders for information that is dynamic. The key concept there is Template + data-model = output which is pretty natural. The sumation in this equation is generally referred to as \"rendering a template\" in this documentation.","title":"How to build templates?"},{"location":"admin/developer/agama/flows-navigation-ui/#rendering","text":"Rendering is the process of \"injecting\" the variable passed ( map-variable in the above) into a template. If no variable is present in the instruction, it is assumed an empty map was passed, i.e. { } . The variable injected (\"data model\" in FreeMarker terms) always has to be an Agama map , Java bean or object implementing the java.util.Map interface. This will allow access to the contents of such variable from within the template. Here is a simple example. Suppose you want to ask for a username and password in a page called login.ftl and that such page will be stored in <AGAMA-DIR>/ftl/myflow/pages/login.ftl . Assume the flow has the header directive Basepath \"myflow\" . Also, let's say we want to pass a custom salutation message to be shown at the top of the page. Here is how the Agama code would look like: ... obj = { message: \"Hey ho!, let's go\" } RRF \"pages/login.ftl\" obj ... And here the UI page contents: <!doctype html> <html xmlns=\"http://www.w3.org/1999/xhtml\"> ... <body> <h1>${message}</h1> <form method=\"post\" enctype=\"application/x-www-form-urlencoded\"> <div> <label for=\"username\">Username</label> <input type=\"text\" name=\"username\"> </div> <div> <label for=\"password\">Password</label> <input type=\"password\" name=\"password\"> </div> <input type=\"submit\" value=\"Login\"> </form> </body> </html>","title":"Rendering"},{"location":"admin/developer/agama/flows-navigation-ui/#extended-data-model","text":"The data model (injected map ) is attached a couple of additional keys for developer's convenience: webCtx . It gives easy access to often needed bits like current path, locale, etc. This is a Java object you can inspect here . Take a look at the getters; writing ${webCtx.contextPath} in a template will insert the result of calling method getContextPath - normally the string /jans-auth . msgs . It gives access to the localized messages of jans-auth application. Some developers might know this as the \"internationalization labels\" or \"resource bundle\" of an application. This is a collection of .properties files where common UI-related messages in different languages can be found. A message (label) is identified by a key, so in a template ${msgs.<KEY>} could be used. As most keys in resource bundles have dot characters, the alternative notation ${webCtx[\"KEY\"]} works better for FreeMarker, for example ${msgs[\"login.errorMessage\"]} .","title":"Extended data model"},{"location":"admin/developer/agama/flows-navigation-ui/#assets-handling","text":"Clearly, templates can link other local web resources like Javascript code, images, etc. The location of this kind of files is expected to be in the filesystem under <AGAMA-DIR>/fl directory. Note this is not the same directory of templates. Doing so would allow users to retrieve the code of templates by simple URL manipulation. As an example, suppose your flow Basepath is foo and you have the instructions RRF index.ftlh and RRF bar/index2.ftlh somewhere in your code. Then your local <AGAMA-DIR>/ftl would look like: foo |- index.ftlh +- bar \\- index2.ftlh Say index.ftlh has markup like <img src=\"bar/me.png\"> and index2.ftlh has <link href=\"my/style.css\" rel=\"stylesheet\"> somewhere. This is how <AGAMA-DIR>/fl would look like: foo +- bar |- me.png \\- my \\- style.css","title":"Assets handling"},{"location":"admin/developer/agama/flows-navigation-ui/#user-data-retrieval","text":"Once the rendered page is shown in the browser, the flow execution is literally paused. If the user stands idly at this page, nothing will happen. To make the flow proceed, an HTTP POST must be made to the current URL. This is exactly what login.ftl of the above example tries to do: it provides a button that submits the form via POST for the flow to resume execution. Once the flow continues, an Agama map is built using all form fields received at the server and bound to the variable used in the assignment of the RRF instruction (the variable referred as assignment-var in the introduction of this page). This only applies when RRF has an assignment associated, of course. If the earlier example is modified to ... obj = { message: \"Hey ho!, let's go\" } credentials = RRF \"pages/login.ftl\" obj ... the form values can then be referenced as credentials.username and credentials.password in the flow. In other words, the keys of the resulting map will correspond to the form field names. The values will all be strings .","title":"User-data retrieval"},{"location":"admin/developer/agama/flows-navigation-ui/#3-param-variant","text":"In the Jans Agama engine, RRF can be passed a third parameter: RRF templatePath variable boolean . When the boolean value is true the callback URL will be available while RRF is in execution (as in RFAC ). In this case, if the callback is visited, data passed to it will be set as the result of the RRF . If a POST to the current URL is received first, i.e. callback not hit, behavior will be as in the two-param RRF invocation. This is also the case when a false value is passed for the third parameter. The three-param variant of RRF can be useful when: The decision to redirect to an external site can only be done from the browser itself The external site expects to receive an HTTP POST. In this case, the rendered template may contain a form with fields as needed plus auto-submission logic in Javascript to perform the actual POST. This typically occurs in inbound-identity flows where identity providers require authentication requests serialized in application/x-www-form-urlencoded format as is the case of SAML HTTP POST binding, for example","title":"3-param variant"},{"location":"admin/developer/agama/jans-agama-engine/","tags":["administration","developer","agama"],"text":"Janssen Agama Engine # Introduction # The Janssen Server implements the Agama framework through several components bundled in its authentication server (AS): The engine: the piece of software that actually runs the flows and interacts with the user's browser - sort of a small web application. As expected, these flows are mainly targetted at user authentication A transpiler: code written in Agama language is transpiled to an intermediate representation which can then be interpreted at runtime by the engine The bridge: since the engine itself does not implement an authentication protocol, another piece is required to put flows in the context of a standard authorization framework like OpenId Connect. This is what the bridge does The deployer: a piece of software capable of deploying Agama projects to the engine. The rest of this document describes implementation-specific details of the engine bundled with the Jans Server. These details give shape to the requirements abstractly defined for an Agama-compliant engine . Note Ensure both the Agama engine and the bridge are enabled in the Janssen server to effectively use engine's features Launching flows # Flows can be launched by sending an (OpenId Connect) authentication request to the user's browser. This usually boils down to make a redirection to a URL looking like https://<jans-server-name>/jans-auth/restv1/authorize?acr_values=agama&agama_flow=flow-qname&scope=...&response_type=...&redirect_uri=https...&client_id=...&state=... . Check the OpenId Connect spec for more details. Note Jans Server is spec-compliant. Things to highlight: The acr_values parameter must be equal to agama The qualified name (identifier) of the flow to launch is passed using the parameter referenced in property cust_param_name of the Agama bridge script. agama_flow will most likely work since this is the default value employed by the Jans installer, e.g. agama_flow=test.acme.co If the flow to call receives input parameters, their values can be passed in the custom parameter as well. Use a hyphen to separate the flow name and the parameters expressed in JSON object format. For example, if the flow had inputs height and color , you can use test.acme.co-{\"height\": 190, \"color\": \"blue\"} for the value of agama_flow . Ensure to apply proper URL-encoding beforehand. In this case, the actual value would be test-%7B%22height%22%3A+190%2C+%22color%22%3A+%22blue%22%7D . If certain inputs are not provided, null values will be assigned for them If for some reason you are not able to set the given custom parameter in the authorization request, you can set its value in the configuration property default_flow_name of the bridge script. Note this will launch the same fixed flow at all times Authentication and Finish # When a top-level flow (i.e. one with no parents) finishes successfully, the selection of the user to authenticate is driven by the userId passed in data , as in obj = { success: true, data: { userId: \"john_doe\" } } // map literals cannot be passed directly to Finish - a variable can be used instead Finish obj By default userId maps to the uid attribute that generally all user entries already have in the database of Jans Server, in other words, the \"user name\". This attribute is configurable though via property finish_userid_db_attribute of the bridge script . In some cases, you would like to change that to mail in order to pass things like { success: true, data: { userId: \"john_doe@jd.me\" } } for instance. Important If the database lookup does not produce exactly one user entry, this is treated as a failed authentication attempt by the authentication server. When the authentication succeeds, the whole contents of data are stored in the authentication server's session of the given user under the key agamaData . Contents are serialized to a JSON string previously. Crashes, timeouts, and failures # Execution rules define several possible flow states . For crashed, timed out, and finished failed flows, the engine will present proper error pages to users. These are configurable by properties crashErrorPage , interruptionErrorPage , and finishedFlowPage respectively, of the engine-configuration . How timeouts work # Authentication flows are normally short-lived. They usually span no more than a few minutes. In Agama, the maximum amount of time an end-user can take to fully complete a flow is driven by the configuration of the authentication server , specifically the sessionIdUnauthenticatedUnusedLifetime property which is measured in seconds. As an example, if this value is 120, any attempt to authenticate taking more than two minutes will throw the given error page. Moreover, when a flow specifies its own timeout in the header the effective timeout is the smallest value between sessionIdUnauthenticatedUnusedLifetime and the value in the header. Depending on specific needs, sessionIdUnauthenticatedUnusedLifetime may have to be set to a higher value than the server's default. This may be the case where flows send e-mail notifications with temporary codes, for instance. Logging # There are three relevant sources of log data: The engine. It emits information related to flows transpilation, projects deployment, and flow crashes - generally low-level information Log instructions. These are statements originated directly from the Agama code Call directives. Foreign code can issue logging statements as well as any other code a Call may depend on The following table details the location of log data. Paths are relative to directory /opt/jans/jetty/jans-auth/log : Source Destination file Notes Engine jans-auth.log Log instructions jans-auth_script.log This log also contains the output of print statements used in standard Jython custom scripts of Jans Server Foreign code jans-auth.log Usage of slf4j recommended. Proper visualization of logging statements may require customization of the server loggers (Log4j2 descriptor) Depending on the specificity required, you may have to change the logging level so more or less details appear in the logs. This can be done by altering the loggingLevel property of the auth server configuration . DEBUG usually suffices for troubleshooting. The available levels for statements issued with the Log instruction are: Level name shortcut error e warn w info i debug d trace t For instance, these two instructions are equivalent: Log \"@e Universe collapsed\" and Log \"@error Universe collapsed\" The engine will use info when the level is not specified explicitly, as in Log \"ahoy, ahoy\" . RFAC and Callback URL # Engine's callback URL is https://<your-server-name>/jans-auth/fl/callback . This resource is only be available for a given browser session while RFAC is in execution. Once the callback is visited or the flow times out (whichever occurs first), subsequent requests will respond with an HTTP 404 error. The mechanism used for redirection is a \"302 Found\" HTTP redirect that entails a subsequent GET request to the external site. In cases where a POST is expected, the 3-param version of RRF can be useful. RRF, navigation, and assets handling # Understanding how RRF works in the engine is key to writing meaningful flows. This topic is fully covered here . Foreign calls # In the Jans Agama engine, Java or Groovy code can be called by means of the Call instruction. Specifically, public methods from public classes or static methods from public interfaces. Note Java language background is required for this section. The following exemplifies different kind of usages of Java from Agama code: Example Notes Call java.lang.Integer#parseInt \"FF\" 16 Invokes the parseInt method of Integer class passing the given arguments (i.e. conversion of hexadecimal string to a primitive int ). The returned value is ignored numbers = [ 2, -2, 0, 3, -3, 4 ] small = Call java.util.Collections#min numbers Invokes the min method of the Collections class. Supplies a list of numbers as argument. The smallest number is stored in variable small jLocale = Call java.util.Locale#getDefault localeName = jLocale.displayName Computes the display name of the JVM default locale car = { brand: \"Ford\", model: 1963 } sidecar = Call java.util.Map#copyOf car Makes a deep clone of a map number | E = Call java.lang.Integer#parseInt \"AGA\" 16 When E is not null Log \"An error occurred:\" E.message Similar to the first example. If an exception is thrown by the invocation, it's caught and assigned to variable E . Note both checked and unchecked exceptions are caught | E = Call com.acme.Worker#notifyExternalSystem //Do something with E //... If exception catching is required when calling a method that returns void , there is no need to put a variable before the pipe p1 = Call java.awt.Point#new p2 = Call java.awt.Point#new 1 3 Call p2 translate -1 1 Creates instances of class java.awt.Point with different constructors. For p1 the no-args constructor is used. Method translate is invoked on the p2 instance. Note usage of a space here instead of hash ( # ) cls1 = Call java.lang.CharSequence#class cls2 = Call java.lang.Integer#class Call cls2 parseInt \"FF\" 16 Stores in cls1 a reference to interface class CharSequence.class . Stores in cls2 a reference to Integer.class . The 3rd line statement achieves the same effect of Call java.lang.Integer#parseInt \"FF\" 16 L = [ \"A\", \"B\", \"C\" ] S = Call java.util.Set#of 0 2 4 6 map = { numbers: S, letters: L } hasOne = Call map.numbers contains 1 Calls the contains method of the java.util.Set object stored in map.numbers passing 1 as argument and storing the result in hasOne The usage of a hash sign (or spaces) before a method name helps disambiguate whether the invocation is on a static class method or an object method. This is so because an expression like hey.You may reference the class You on package hey , or the value of key You in a map named hey . Highlights # Any method that meets the conditions mentioned (public or interface static) and that is reachable in the JVM classpath can be called; developers are not restricted solely to java.* packages. When using Call , the method to execute is picked based on the name (e.g. after the # sign) and the number of arguments supplied. If a class/interface exhibits several methods with the same name and arity (number of parameters), there is no way to know which of the available variants will be called. The java.util.Arrays class has several methods of this kind for instance. For non-static method invocations, i.e. no hash sign, the class used for method lookup is that of the instance passed (the first parameter in the Call directive). When the instance does not hold a Java but an Agama value, the following is used to pick a class: Agama type Java class for method lookup string String boolean Boolean number Double list java.util.List map java.util.Map Once a concrete method is selected, a best effort is made to convert (if required) the values passed as arguments so that they match the expected parameter types in the method signature. If a conversion fails, this will degenerate in an IllegalArgumentException . More on conversions here . Limitations: list and map literals cannot be passed as arguments to method calls directly. This means the following is illegal: Call co.Utils#myMethod { key: [ 1, 2 , 3] } [ \"Yeeha!\" ] . To achieve the same effect assign the literal value to a variable and pass that instead Call ing a method that mutates one or more of the arguments passed will not work properly if the corresponding parameters in the method signature have type information attached. For example, copying a list into another using java.util.Collections#copy\u200b(List<? super T> dest, List<? extends T> src) may not behave as expected. Conversely, calling java.lang.reflect.Array#set\u200b(Object array, int index, Object value) works fine because array does not have a parameterized type. The practice of mutating passed arguments is unusual and sometimes discouraged in programming Exception handling # As seen in the examples Agama engine can deal with Java exceptions, however, this feature should be used sparingly. When exception handling adds undesired complexity to your code, create wrapper methods in Java and do the processing there instead of delegating that to the DSL. Arguments conversion # Agama types do not match Java types. This means passing a \"native\" Agama value as parameter in a method Call requires some form of compatibility with the target (Java) type in the method signature. An argument (Agama value) is compatible with a method parameter if it can be \"converted\" successfully. As we'll see, conversion feels pretty natural in practice. If this process fails a java.lang.IllegalArgumentException is thrown and the flow will crash unless the exception is caught. Note however the recommended practice is to let flows crash . The following lists some of the most common successful conversions: Agama value Can be converted to string String or char[] boolean Boolean or primitive equivalent number Double / Float / Integer / Long / Short / Byte or primitive equivalent null Any non-primitive list Array or class implementing Collection<T> as long as items can be converted to type T map Class implementing Map<K, V> as long as keys and values can be converted to types K and V , respectively map Java bean. Unrecognized properties in Agama value are ignored The below table shows some examples of interesting and handy conversions: Agama value Param data type in target Java method Argument value (Agama) Received param value (in method) Notes Positive number having fractional part Integer / Long / Short / Byte or primitive equivalent 2.6 2 Integer part kept Negative number having fractional part Integer / Long / Short / Byte or primitive equivalent -2.4 2 Integer part kept Integer number Float / Double or primitive equivalent 1 1.0 list of number s List<Integer> [1, 2.0, 3.1, -4.2] [1, 2, 3, -4] Only integer parts kept list of integer number s List<Float> / List<Double> [1, 2, 3, -4] [1.0, 2.0, 3.0, -4.0] string of length 1 Character or primitive equivalent a a Passing a zero, two, or more lengthed string will make the call fail When the argument is not an Agama but a Java object/primitive, the following rules apply: If the value can be cast to the target type, no conversion is needed, otherwise If it is an instance of java.lang.Number and the type is a numeric primitive or wrapper (e.g. Integer ), the value is truncated if required, otherwise The value is serialized to JSON - if possible - and then an attempt to create a Java instance based on the given JSON contents is made. For this purpose, the FasterXML Jackson library is used This is powerful because it allows to send data of similar shape/structure when data types do not necessarily match. Consider the following example: s = \"a man's gotta do what a man's gotta do\" jStrArr = Call s split \" \" words = Call java.util.Collections#unmodifiableSet jStrArr This Agama snippet creates the (Java) Set of different words found in a given (Agama) string . Note jStrArr is of type String[] and is passed directly to method unmodifiableSet which originally expects an instance of Set as parameter. From Java to Agama # We just saw how Agama values are treated in Java code. Here we make an analysis in the reverse direction: from Java to Agama where Java values are obtained through Call invocations. The following table relates Java types to Agama types: Java value ( x ) Agama equivalent Notes x is a Java array or implements java.util.List list Changing the list contents (includes updates on x.length) can only be achieved if the Java list is modifiable x implements java.util.Map and keys are of type java.lang.String map Changing the map contents can only be achieved if the Java map is modifiable x is a java.lang.(Double|Float|Long|Integer|Short|Byte) or an equivalent primitive number x is a (non-null) java.lang.Boolean or equivalent primitive boolean x is a java.lang.String string (limited) Neither indexing nor x.length can be used null null Except for maps, the following holds for a value x obtained through a Java Call : If x 's class has getters and/or setters for some fields, they can be called. As an example if age and name are available fields, x.age can be used to get the value of age Likewise, setting a value is possible too: x.name = \"Larry\" (if a suitable setter exists) In general, a no-args method starting with get or is can be invoked. This is useful for instance to get the (Java) class name of your object ( x.class.name ) or determine if a list has no elements ( x.empty ) Classpath # A class/interface is accessible to Agama code as long as it is part of: jans-auth.war > WEB-INF/lib/*.jar or, jans-auth.war > WEB-INF/classes or, /opt/jans/jetty/jans-auth/custom/libs/*.jar (may require edition of jans-auth.xml descriptor) Additionally, it is possible to upload source code on the fly to augment the classpath. Any valid Java or Groovy file is accepted and must be located under /opt/jans/jetty/jans-auth/agama/scripts . For instance, a class named com.acme.Person must reside in folder /opt/jans/jetty/jans-auth/agama/scripts/com/acme . Important Only files with extensions .java or .groovy are accounted The scripts directory provides automatic \"hot\" reloading. This is a valuable time saver for developers because there is no need to restart the jans-auth webapp when sources are modified. This feature has some limitations which are explained in the following. Limitations of code added \"on the fly\" # Classes in scripts directory can only be accessed through Call directives. As an example suppose you added classes A and B to scripts , and A depends on B . Call s using class A will work and any change to files A and/or B will be picked automatically. On the contrary, trying to load this kind of classes using Class.forName either from a jar file in custom/libs or from Agama itself will degenerate in ClassNotFoundException . Note A and B can also depend on classes found at any of the locations listed at the beginning of this section. Note Java sources are actually interpreted as Groovy code. 99% of times this is not a concern since Groovy can be considered a superset of Java, however, there are some minor discrepancies that may exhibit unexpected behaviors. These differences are described here . We consider the following to be remarkable: Array literals in shorthand syntax not allowed, e.g. int[] array = {1, 2, 3} . Use int[] array = new int[] {1, 2, 3} instead String interpolation: \"hello $mark\" evaluates the value of variable mark and prepends hello to it!. To avoid this use a backslash, like in \"hello \\$mark\" . Learn more about interpolation here . In general, prepend ocurrences of $ in your string literals with a \\ Usage of == operator actually calls the equals method. Most of times this is fine but can be a problem when you are overriding equals in your class and make use of == . This will introduce a recursive call in your implementation and may degenerate in a stack overflow. If possible, use the === operator or the is method in these cases OOP prose warning # See the recommended practices to learn more about this topic.","title":"Agama engine"},{"location":"admin/developer/agama/jans-agama-engine/#janssen-agama-engine","text":"","title":"Janssen Agama Engine"},{"location":"admin/developer/agama/jans-agama-engine/#introduction","text":"The Janssen Server implements the Agama framework through several components bundled in its authentication server (AS): The engine: the piece of software that actually runs the flows and interacts with the user's browser - sort of a small web application. As expected, these flows are mainly targetted at user authentication A transpiler: code written in Agama language is transpiled to an intermediate representation which can then be interpreted at runtime by the engine The bridge: since the engine itself does not implement an authentication protocol, another piece is required to put flows in the context of a standard authorization framework like OpenId Connect. This is what the bridge does The deployer: a piece of software capable of deploying Agama projects to the engine. The rest of this document describes implementation-specific details of the engine bundled with the Jans Server. These details give shape to the requirements abstractly defined for an Agama-compliant engine . Note Ensure both the Agama engine and the bridge are enabled in the Janssen server to effectively use engine's features","title":"Introduction"},{"location":"admin/developer/agama/jans-agama-engine/#launching-flows","text":"Flows can be launched by sending an (OpenId Connect) authentication request to the user's browser. This usually boils down to make a redirection to a URL looking like https://<jans-server-name>/jans-auth/restv1/authorize?acr_values=agama&agama_flow=flow-qname&scope=...&response_type=...&redirect_uri=https...&client_id=...&state=... . Check the OpenId Connect spec for more details. Note Jans Server is spec-compliant. Things to highlight: The acr_values parameter must be equal to agama The qualified name (identifier) of the flow to launch is passed using the parameter referenced in property cust_param_name of the Agama bridge script. agama_flow will most likely work since this is the default value employed by the Jans installer, e.g. agama_flow=test.acme.co If the flow to call receives input parameters, their values can be passed in the custom parameter as well. Use a hyphen to separate the flow name and the parameters expressed in JSON object format. For example, if the flow had inputs height and color , you can use test.acme.co-{\"height\": 190, \"color\": \"blue\"} for the value of agama_flow . Ensure to apply proper URL-encoding beforehand. In this case, the actual value would be test-%7B%22height%22%3A+190%2C+%22color%22%3A+%22blue%22%7D . If certain inputs are not provided, null values will be assigned for them If for some reason you are not able to set the given custom parameter in the authorization request, you can set its value in the configuration property default_flow_name of the bridge script. Note this will launch the same fixed flow at all times","title":"Launching flows"},{"location":"admin/developer/agama/jans-agama-engine/#authentication-and-finish","text":"When a top-level flow (i.e. one with no parents) finishes successfully, the selection of the user to authenticate is driven by the userId passed in data , as in obj = { success: true, data: { userId: \"john_doe\" } } // map literals cannot be passed directly to Finish - a variable can be used instead Finish obj By default userId maps to the uid attribute that generally all user entries already have in the database of Jans Server, in other words, the \"user name\". This attribute is configurable though via property finish_userid_db_attribute of the bridge script . In some cases, you would like to change that to mail in order to pass things like { success: true, data: { userId: \"john_doe@jd.me\" } } for instance. Important If the database lookup does not produce exactly one user entry, this is treated as a failed authentication attempt by the authentication server. When the authentication succeeds, the whole contents of data are stored in the authentication server's session of the given user under the key agamaData . Contents are serialized to a JSON string previously.","title":"Authentication and Finish"},{"location":"admin/developer/agama/jans-agama-engine/#crashes-timeouts-and-failures","text":"Execution rules define several possible flow states . For crashed, timed out, and finished failed flows, the engine will present proper error pages to users. These are configurable by properties crashErrorPage , interruptionErrorPage , and finishedFlowPage respectively, of the engine-configuration .","title":"Crashes, timeouts, and failures"},{"location":"admin/developer/agama/jans-agama-engine/#how-timeouts-work","text":"Authentication flows are normally short-lived. They usually span no more than a few minutes. In Agama, the maximum amount of time an end-user can take to fully complete a flow is driven by the configuration of the authentication server , specifically the sessionIdUnauthenticatedUnusedLifetime property which is measured in seconds. As an example, if this value is 120, any attempt to authenticate taking more than two minutes will throw the given error page. Moreover, when a flow specifies its own timeout in the header the effective timeout is the smallest value between sessionIdUnauthenticatedUnusedLifetime and the value in the header. Depending on specific needs, sessionIdUnauthenticatedUnusedLifetime may have to be set to a higher value than the server's default. This may be the case where flows send e-mail notifications with temporary codes, for instance.","title":"How timeouts work"},{"location":"admin/developer/agama/jans-agama-engine/#logging","text":"There are three relevant sources of log data: The engine. It emits information related to flows transpilation, projects deployment, and flow crashes - generally low-level information Log instructions. These are statements originated directly from the Agama code Call directives. Foreign code can issue logging statements as well as any other code a Call may depend on The following table details the location of log data. Paths are relative to directory /opt/jans/jetty/jans-auth/log : Source Destination file Notes Engine jans-auth.log Log instructions jans-auth_script.log This log also contains the output of print statements used in standard Jython custom scripts of Jans Server Foreign code jans-auth.log Usage of slf4j recommended. Proper visualization of logging statements may require customization of the server loggers (Log4j2 descriptor) Depending on the specificity required, you may have to change the logging level so more or less details appear in the logs. This can be done by altering the loggingLevel property of the auth server configuration . DEBUG usually suffices for troubleshooting. The available levels for statements issued with the Log instruction are: Level name shortcut error e warn w info i debug d trace t For instance, these two instructions are equivalent: Log \"@e Universe collapsed\" and Log \"@error Universe collapsed\" The engine will use info when the level is not specified explicitly, as in Log \"ahoy, ahoy\" .","title":"Logging"},{"location":"admin/developer/agama/jans-agama-engine/#rfac-and-callback-url","text":"Engine's callback URL is https://<your-server-name>/jans-auth/fl/callback . This resource is only be available for a given browser session while RFAC is in execution. Once the callback is visited or the flow times out (whichever occurs first), subsequent requests will respond with an HTTP 404 error. The mechanism used for redirection is a \"302 Found\" HTTP redirect that entails a subsequent GET request to the external site. In cases where a POST is expected, the 3-param version of RRF can be useful.","title":"RFAC and Callback URL"},{"location":"admin/developer/agama/jans-agama-engine/#rrf-navigation-and-assets-handling","text":"Understanding how RRF works in the engine is key to writing meaningful flows. This topic is fully covered here .","title":"RRF, navigation, and assets handling"},{"location":"admin/developer/agama/jans-agama-engine/#foreign-calls","text":"In the Jans Agama engine, Java or Groovy code can be called by means of the Call instruction. Specifically, public methods from public classes or static methods from public interfaces. Note Java language background is required for this section. The following exemplifies different kind of usages of Java from Agama code: Example Notes Call java.lang.Integer#parseInt \"FF\" 16 Invokes the parseInt method of Integer class passing the given arguments (i.e. conversion of hexadecimal string to a primitive int ). The returned value is ignored numbers = [ 2, -2, 0, 3, -3, 4 ] small = Call java.util.Collections#min numbers Invokes the min method of the Collections class. Supplies a list of numbers as argument. The smallest number is stored in variable small jLocale = Call java.util.Locale#getDefault localeName = jLocale.displayName Computes the display name of the JVM default locale car = { brand: \"Ford\", model: 1963 } sidecar = Call java.util.Map#copyOf car Makes a deep clone of a map number | E = Call java.lang.Integer#parseInt \"AGA\" 16 When E is not null Log \"An error occurred:\" E.message Similar to the first example. If an exception is thrown by the invocation, it's caught and assigned to variable E . Note both checked and unchecked exceptions are caught | E = Call com.acme.Worker#notifyExternalSystem //Do something with E //... If exception catching is required when calling a method that returns void , there is no need to put a variable before the pipe p1 = Call java.awt.Point#new p2 = Call java.awt.Point#new 1 3 Call p2 translate -1 1 Creates instances of class java.awt.Point with different constructors. For p1 the no-args constructor is used. Method translate is invoked on the p2 instance. Note usage of a space here instead of hash ( # ) cls1 = Call java.lang.CharSequence#class cls2 = Call java.lang.Integer#class Call cls2 parseInt \"FF\" 16 Stores in cls1 a reference to interface class CharSequence.class . Stores in cls2 a reference to Integer.class . The 3rd line statement achieves the same effect of Call java.lang.Integer#parseInt \"FF\" 16 L = [ \"A\", \"B\", \"C\" ] S = Call java.util.Set#of 0 2 4 6 map = { numbers: S, letters: L } hasOne = Call map.numbers contains 1 Calls the contains method of the java.util.Set object stored in map.numbers passing 1 as argument and storing the result in hasOne The usage of a hash sign (or spaces) before a method name helps disambiguate whether the invocation is on a static class method or an object method. This is so because an expression like hey.You may reference the class You on package hey , or the value of key You in a map named hey .","title":"Foreign calls"},{"location":"admin/developer/agama/jans-agama-engine/#highlights","text":"Any method that meets the conditions mentioned (public or interface static) and that is reachable in the JVM classpath can be called; developers are not restricted solely to java.* packages. When using Call , the method to execute is picked based on the name (e.g. after the # sign) and the number of arguments supplied. If a class/interface exhibits several methods with the same name and arity (number of parameters), there is no way to know which of the available variants will be called. The java.util.Arrays class has several methods of this kind for instance. For non-static method invocations, i.e. no hash sign, the class used for method lookup is that of the instance passed (the first parameter in the Call directive). When the instance does not hold a Java but an Agama value, the following is used to pick a class: Agama type Java class for method lookup string String boolean Boolean number Double list java.util.List map java.util.Map Once a concrete method is selected, a best effort is made to convert (if required) the values passed as arguments so that they match the expected parameter types in the method signature. If a conversion fails, this will degenerate in an IllegalArgumentException . More on conversions here . Limitations: list and map literals cannot be passed as arguments to method calls directly. This means the following is illegal: Call co.Utils#myMethod { key: [ 1, 2 , 3] } [ \"Yeeha!\" ] . To achieve the same effect assign the literal value to a variable and pass that instead Call ing a method that mutates one or more of the arguments passed will not work properly if the corresponding parameters in the method signature have type information attached. For example, copying a list into another using java.util.Collections#copy\u200b(List<? super T> dest, List<? extends T> src) may not behave as expected. Conversely, calling java.lang.reflect.Array#set\u200b(Object array, int index, Object value) works fine because array does not have a parameterized type. The practice of mutating passed arguments is unusual and sometimes discouraged in programming","title":"Highlights"},{"location":"admin/developer/agama/jans-agama-engine/#exception-handling","text":"As seen in the examples Agama engine can deal with Java exceptions, however, this feature should be used sparingly. When exception handling adds undesired complexity to your code, create wrapper methods in Java and do the processing there instead of delegating that to the DSL.","title":"Exception handling"},{"location":"admin/developer/agama/jans-agama-engine/#arguments-conversion","text":"Agama types do not match Java types. This means passing a \"native\" Agama value as parameter in a method Call requires some form of compatibility with the target (Java) type in the method signature. An argument (Agama value) is compatible with a method parameter if it can be \"converted\" successfully. As we'll see, conversion feels pretty natural in practice. If this process fails a java.lang.IllegalArgumentException is thrown and the flow will crash unless the exception is caught. Note however the recommended practice is to let flows crash . The following lists some of the most common successful conversions: Agama value Can be converted to string String or char[] boolean Boolean or primitive equivalent number Double / Float / Integer / Long / Short / Byte or primitive equivalent null Any non-primitive list Array or class implementing Collection<T> as long as items can be converted to type T map Class implementing Map<K, V> as long as keys and values can be converted to types K and V , respectively map Java bean. Unrecognized properties in Agama value are ignored The below table shows some examples of interesting and handy conversions: Agama value Param data type in target Java method Argument value (Agama) Received param value (in method) Notes Positive number having fractional part Integer / Long / Short / Byte or primitive equivalent 2.6 2 Integer part kept Negative number having fractional part Integer / Long / Short / Byte or primitive equivalent -2.4 2 Integer part kept Integer number Float / Double or primitive equivalent 1 1.0 list of number s List<Integer> [1, 2.0, 3.1, -4.2] [1, 2, 3, -4] Only integer parts kept list of integer number s List<Float> / List<Double> [1, 2, 3, -4] [1.0, 2.0, 3.0, -4.0] string of length 1 Character or primitive equivalent a a Passing a zero, two, or more lengthed string will make the call fail When the argument is not an Agama but a Java object/primitive, the following rules apply: If the value can be cast to the target type, no conversion is needed, otherwise If it is an instance of java.lang.Number and the type is a numeric primitive or wrapper (e.g. Integer ), the value is truncated if required, otherwise The value is serialized to JSON - if possible - and then an attempt to create a Java instance based on the given JSON contents is made. For this purpose, the FasterXML Jackson library is used This is powerful because it allows to send data of similar shape/structure when data types do not necessarily match. Consider the following example: s = \"a man's gotta do what a man's gotta do\" jStrArr = Call s split \" \" words = Call java.util.Collections#unmodifiableSet jStrArr This Agama snippet creates the (Java) Set of different words found in a given (Agama) string . Note jStrArr is of type String[] and is passed directly to method unmodifiableSet which originally expects an instance of Set as parameter.","title":"Arguments conversion"},{"location":"admin/developer/agama/jans-agama-engine/#from-java-to-agama","text":"We just saw how Agama values are treated in Java code. Here we make an analysis in the reverse direction: from Java to Agama where Java values are obtained through Call invocations. The following table relates Java types to Agama types: Java value ( x ) Agama equivalent Notes x is a Java array or implements java.util.List list Changing the list contents (includes updates on x.length) can only be achieved if the Java list is modifiable x implements java.util.Map and keys are of type java.lang.String map Changing the map contents can only be achieved if the Java map is modifiable x is a java.lang.(Double|Float|Long|Integer|Short|Byte) or an equivalent primitive number x is a (non-null) java.lang.Boolean or equivalent primitive boolean x is a java.lang.String string (limited) Neither indexing nor x.length can be used null null Except for maps, the following holds for a value x obtained through a Java Call : If x 's class has getters and/or setters for some fields, they can be called. As an example if age and name are available fields, x.age can be used to get the value of age Likewise, setting a value is possible too: x.name = \"Larry\" (if a suitable setter exists) In general, a no-args method starting with get or is can be invoked. This is useful for instance to get the (Java) class name of your object ( x.class.name ) or determine if a list has no elements ( x.empty )","title":"From Java to Agama"},{"location":"admin/developer/agama/jans-agama-engine/#classpath","text":"A class/interface is accessible to Agama code as long as it is part of: jans-auth.war > WEB-INF/lib/*.jar or, jans-auth.war > WEB-INF/classes or, /opt/jans/jetty/jans-auth/custom/libs/*.jar (may require edition of jans-auth.xml descriptor) Additionally, it is possible to upload source code on the fly to augment the classpath. Any valid Java or Groovy file is accepted and must be located under /opt/jans/jetty/jans-auth/agama/scripts . For instance, a class named com.acme.Person must reside in folder /opt/jans/jetty/jans-auth/agama/scripts/com/acme . Important Only files with extensions .java or .groovy are accounted The scripts directory provides automatic \"hot\" reloading. This is a valuable time saver for developers because there is no need to restart the jans-auth webapp when sources are modified. This feature has some limitations which are explained in the following.","title":"Classpath"},{"location":"admin/developer/agama/jans-agama-engine/#limitations-of-code-added-on-the-fly","text":"Classes in scripts directory can only be accessed through Call directives. As an example suppose you added classes A and B to scripts , and A depends on B . Call s using class A will work and any change to files A and/or B will be picked automatically. On the contrary, trying to load this kind of classes using Class.forName either from a jar file in custom/libs or from Agama itself will degenerate in ClassNotFoundException . Note A and B can also depend on classes found at any of the locations listed at the beginning of this section. Note Java sources are actually interpreted as Groovy code. 99% of times this is not a concern since Groovy can be considered a superset of Java, however, there are some minor discrepancies that may exhibit unexpected behaviors. These differences are described here . We consider the following to be remarkable: Array literals in shorthand syntax not allowed, e.g. int[] array = {1, 2, 3} . Use int[] array = new int[] {1, 2, 3} instead String interpolation: \"hello $mark\" evaluates the value of variable mark and prepends hello to it!. To avoid this use a backslash, like in \"hello \\$mark\" . Learn more about interpolation here . In general, prepend ocurrences of $ in your string literals with a \\ Usage of == operator actually calls the equals method. Most of times this is fine but can be a problem when you are overriding equals in your class and make use of == . This will introduce a recursive call in your implementation and may degenerate in a stack overflow. If possible, use the === operator or the is method in these cases","title":"Limitations of code added \"on the fly\""},{"location":"admin/developer/agama/jans-agama-engine/#oop-prose-warning","text":"See the recommended practices to learn more about this topic.","title":"OOP prose warning"},{"location":"admin/developer/agama/projects-deployment/","tags":["administration","developer","agama"],"text":"Agama projects deployment # The Agama framework defines a file format to package and distribute Agama projects. Here we describe the process of deployment in the Jans Agama engine. Workflow # Deployment occurs through a REST API. Here is a typical workflow once a .gama file is ready: Send (POST) the archive contents to the deployment endpoint. Normally a 202 response should be obtained meaning a task has been queued for processing Poll (via GET) the status of the deployment. When the archive has been effectively deployed a status of 200 should be obtained. It may take up to 30 seconds for the process to complete once the archive is sent. This time may extend if there is another deployment in course Optionally supply configuration parameters for flows if needed. This is done via PUT to the /configs endpoint. The response of the previous step may contain descriptive/sample configurations that can be used as a guide Test the deployed flows and adjust the archive for any changes required Go to point 1 if needed If desired, a request can be sent to undeploy the flows (via DELETE) The following tables summarize the available endpoints. All URLs are relative to /jans-config-api/api/v1 . An OpenAPI document is also available here . Endpoint -> /agama-deployment Purpose Retrieve a list of deployments in the server. This is not a search, just a paged listing Method GET Query params start and count helps paginating results. start is 0-index based. Both params optional Output Existing deployments (regardless they are thoroughly processed or still being deployed). They are listed and sorted by deployment date Sample output {\"start\":...,\"totalEntriesCount\":...,\"entriesCount\":...,\"entries\":[ ... ]} Status 200 (OK) Endpoint -> /agama-deployment/{name} Purpose Retrieve details of a single deployment by name Method GET Path params name Sample output The structure of a deployment is explained below Status 200 (deployment task is finished), 204 (task still in course), 404 (project unknown) Deployment structure Notes Example dn Distinguished name jansId=123,ou=deployments,ou=agama,o=jans id Identifier of deployment (generated automatically) 115276 createdAt Datetime (in UTC) of the instant the deployment task was created (POSTed) 2022-12-07T21:47:42 taskActive Boolean value indicating if the deployment task is being currently processed, ie. the gama file is being scanned, flows analysed, etc. false finishedAt Datetime (in UTC) representing the instant when the deployment task was finished, or null if it hasn't ended 2022-12-07T21:48:42 details Extra details, see below Deployment details structure Notes Example projectMetadata Includes author, type, description, project's name, and example configuration - as supplied when the deployment task was created error A general description of the error (if presented) when processing the task, otherwise null Archive missing web and/or code subdirectories flowsError A mapping of the errors obtained per flow found in the archive. The keys correspond to qualified names. A null value indicates the flow was successfully added { \"co.acme.example\": \"Syntax error on line 4\", \"io.jans.test\": null } libs A listing of paths to java , groovy , or jar files included in the project archive Endpoint -> /agama-deployment/{name} Purpose Add or replace an Agama project to the server Method POST Path params name (the project's name) Body The binary contents of a .gama file; example here . Ensure to use header Content-Type: application/zip Output Textual explanation, e.g. A deployment task for project XXX has been queued. Use the GET endpoint to poll status Status 202 (the task was created and scheduled for deployment), 409 (there is a task already for this project and it hasn't finished yet), 400 (a param is missing) Endpoint -> /agama-deployment/configs/{name} Purpose Retrieve the configurations associated to flows that belong to the project of interest. The project must have been already processed fully Method GET Path params name (the project's name) Output A JSON object whose properties are flow names and values correspond to configuration properties defined (JSON objects too) Status 200 (successful response), 204 (this project is still in course of deployment), 404 (unknown project) Endpoint -> /agama-deployment/configs/{name} Purpose Set or replace the configurations associated to flows that belong to the project of interest. The project must have been already processed fully Method PUT Path params name (the project's name) Body JSON payload Output A JSON object whose properties are flow names and values correspond to a boolean indicating the success of the update for the given flow Status 200 (successful response), 204 (this project is still in course of deployment), 404 (unknown project), 400 (a param is missing) Endpoint -> /agama-deployment/{name} Purpose Undeploy an Agama project from the server. Entails removing flows and assets initally supplied Method DELETE Path params name (the project's name) Status 204 (scheduled for removal), 409 (the project is being deployed currently), 404 (unknown project) Endpoints access # API operations are protected by Oauth2 scopes this way: GET: https://jans.io/oauth/config/agama.readonly POST: https://jans.io/oauth/config/agama.write DELETE: https://jans.io/oauth/config/agama.delete Internals of deployment # This section offers details on how the server deploys a .gama file. In summary five steps take place once the deployment task is picked up: Input payload validation Flows transpilation Transfer of libraries Transfer of assets and source files Task finalization After the initial validation of structure takes place, the code directory is scanned for flow files and every flow is transpiled and added to the database if its transpilation was successful. Next, jar files found are transferred to the server's custom libs directory - this only applies for VM-based installations. Then a transfer of templates and assets from web directory followed by copying Groovy/Java sources (from lib ) takes place. Finally the deployment task is marked as finalized and a status summary saved to database for later retrieval. Notes: Developers are required to restart the authentication server and possibly edit the server's XML descriptor for the classes in the jar files to be effectively picked up Steps 3 and 4 are carried out only if all flows passed transpilation successfully In Cloud Native environments only one node takes charge of processing a given deployment thoroughly. Other nodes will automatically sync with regards to the files of step 4. The API also offers undeployment capabilities. Here is how it works: Directories holding templates and assets are removed Source files and jar files are removed, if any Flows are removed from database The above applies only for the artifacts originally part of the deployment, of course. Again, nodes in Cloud Native installations will sync accordingly.","title":"Projects deployment"},{"location":"admin/developer/agama/projects-deployment/#agama-projects-deployment","text":"The Agama framework defines a file format to package and distribute Agama projects. Here we describe the process of deployment in the Jans Agama engine.","title":"Agama projects deployment"},{"location":"admin/developer/agama/projects-deployment/#workflow","text":"Deployment occurs through a REST API. Here is a typical workflow once a .gama file is ready: Send (POST) the archive contents to the deployment endpoint. Normally a 202 response should be obtained meaning a task has been queued for processing Poll (via GET) the status of the deployment. When the archive has been effectively deployed a status of 200 should be obtained. It may take up to 30 seconds for the process to complete once the archive is sent. This time may extend if there is another deployment in course Optionally supply configuration parameters for flows if needed. This is done via PUT to the /configs endpoint. The response of the previous step may contain descriptive/sample configurations that can be used as a guide Test the deployed flows and adjust the archive for any changes required Go to point 1 if needed If desired, a request can be sent to undeploy the flows (via DELETE) The following tables summarize the available endpoints. All URLs are relative to /jans-config-api/api/v1 . An OpenAPI document is also available here . Endpoint -> /agama-deployment Purpose Retrieve a list of deployments in the server. This is not a search, just a paged listing Method GET Query params start and count helps paginating results. start is 0-index based. Both params optional Output Existing deployments (regardless they are thoroughly processed or still being deployed). They are listed and sorted by deployment date Sample output {\"start\":...,\"totalEntriesCount\":...,\"entriesCount\":...,\"entries\":[ ... ]} Status 200 (OK) Endpoint -> /agama-deployment/{name} Purpose Retrieve details of a single deployment by name Method GET Path params name Sample output The structure of a deployment is explained below Status 200 (deployment task is finished), 204 (task still in course), 404 (project unknown) Deployment structure Notes Example dn Distinguished name jansId=123,ou=deployments,ou=agama,o=jans id Identifier of deployment (generated automatically) 115276 createdAt Datetime (in UTC) of the instant the deployment task was created (POSTed) 2022-12-07T21:47:42 taskActive Boolean value indicating if the deployment task is being currently processed, ie. the gama file is being scanned, flows analysed, etc. false finishedAt Datetime (in UTC) representing the instant when the deployment task was finished, or null if it hasn't ended 2022-12-07T21:48:42 details Extra details, see below Deployment details structure Notes Example projectMetadata Includes author, type, description, project's name, and example configuration - as supplied when the deployment task was created error A general description of the error (if presented) when processing the task, otherwise null Archive missing web and/or code subdirectories flowsError A mapping of the errors obtained per flow found in the archive. The keys correspond to qualified names. A null value indicates the flow was successfully added { \"co.acme.example\": \"Syntax error on line 4\", \"io.jans.test\": null } libs A listing of paths to java , groovy , or jar files included in the project archive Endpoint -> /agama-deployment/{name} Purpose Add or replace an Agama project to the server Method POST Path params name (the project's name) Body The binary contents of a .gama file; example here . Ensure to use header Content-Type: application/zip Output Textual explanation, e.g. A deployment task for project XXX has been queued. Use the GET endpoint to poll status Status 202 (the task was created and scheduled for deployment), 409 (there is a task already for this project and it hasn't finished yet), 400 (a param is missing) Endpoint -> /agama-deployment/configs/{name} Purpose Retrieve the configurations associated to flows that belong to the project of interest. The project must have been already processed fully Method GET Path params name (the project's name) Output A JSON object whose properties are flow names and values correspond to configuration properties defined (JSON objects too) Status 200 (successful response), 204 (this project is still in course of deployment), 404 (unknown project) Endpoint -> /agama-deployment/configs/{name} Purpose Set or replace the configurations associated to flows that belong to the project of interest. The project must have been already processed fully Method PUT Path params name (the project's name) Body JSON payload Output A JSON object whose properties are flow names and values correspond to a boolean indicating the success of the update for the given flow Status 200 (successful response), 204 (this project is still in course of deployment), 404 (unknown project), 400 (a param is missing) Endpoint -> /agama-deployment/{name} Purpose Undeploy an Agama project from the server. Entails removing flows and assets initally supplied Method DELETE Path params name (the project's name) Status 204 (scheduled for removal), 409 (the project is being deployed currently), 404 (unknown project)","title":"Workflow"},{"location":"admin/developer/agama/projects-deployment/#endpoints-access","text":"API operations are protected by Oauth2 scopes this way: GET: https://jans.io/oauth/config/agama.readonly POST: https://jans.io/oauth/config/agama.write DELETE: https://jans.io/oauth/config/agama.delete","title":"Endpoints access"},{"location":"admin/developer/agama/projects-deployment/#internals-of-deployment","text":"This section offers details on how the server deploys a .gama file. In summary five steps take place once the deployment task is picked up: Input payload validation Flows transpilation Transfer of libraries Transfer of assets and source files Task finalization After the initial validation of structure takes place, the code directory is scanned for flow files and every flow is transpiled and added to the database if its transpilation was successful. Next, jar files found are transferred to the server's custom libs directory - this only applies for VM-based installations. Then a transfer of templates and assets from web directory followed by copying Groovy/Java sources (from lib ) takes place. Finally the deployment task is marked as finalized and a status summary saved to database for later retrieval. Notes: Developers are required to restart the authentication server and possibly edit the server's XML descriptor for the classes in the jar files to be effectively picked up Steps 3 and 4 are carried out only if all flows passed transpilation successfully In Cloud Native environments only one node takes charge of processing a given deployment thoroughly. Other nodes will automatically sync with regards to the files of step 4. The API also offers undeployment capabilities. Here is how it works: Directories holding templates and assets are removed Source files and jar files are removed, if any Flows are removed from database The above applies only for the artifacts originally part of the deployment, of course. Again, nodes in Cloud Native installations will sync accordingly.","title":"Internals of deployment"},{"location":"admin/developer/agama/quick-start-using-agama-lab/","tags":["administration","developer","agama","agama lab"],"text":"Quick Start Using Agama Lab # In this quick start guide, we will build, deploy and test a simple password-based authentication flow using Agama and Agama Lab . Agama Lab is an online visual editor to build authentication flows. A flow built on Agama Lab is packaged as a .gama project file. .gama package needs to be manually deployed on Janssen Server where the Agama engine will execute the flow when an authentication request is received. Major Steps involved in this process are: Create Agama project using Agama Lab Deploying .gama package on Janssen Server Testing the authentication flow This guide covers these steps in the following sections. Prerequisites # Janssen Server instance A public GitHub repository with at least one prior commit Create Agama Project # We will use Agama Lab to create a simple username-password based user authentication flow. This involves defining the authentication steps, designing the user interface to capture user inputs, and lastly, releasing the flow as an Agama project. Defining The Authentication Flow # Log Into Agama Lab # Go to Agama Lab login page. Authenticate on the GitHub authentication page. Input the name of the repository where Agama Lab should release the project artifacts. Click Next Project listing page will be shown. All the existing projects for your GitHub user are listed here. Projects can be created, edited, and deleted from the project listing page. Create A New Project # To create a new project, click on the New Project button on the project listing page above. Enter the name and the description for the new project and click the Create button. This will create a new project and it'll be listed on the project listing page. Create The Authentication Flow # Create A Flow File Click on The flow authoring view will open with a blank canvas. To start creating the flow, we need to create a Flow File . To do that, Right-click on code and then select New > Flow File Give name and description for the flow file and then click Create A newly created flow file has one block in it by default. Clicking on the block will allow you to add further blocks using or to edit the existing block using . Create AuthenticationService Call block Click on the block and then . Then select call A new Call block should appear with a link to Start block Click Call block and then click to open the configuration screen. Add configuration values as shown below. This will create a new instance of AuthenticationService class. This instance will be used to authenticate the user. The new instance will be stored in a variable called authService . Create CdiUtil Call block To perform authentication we will also need a bean instance of CdiUtil class. This bean instance takes AuthenticationService instance that we created in the previous step as an argument. Click the New Authentication Service block and then click on . Then click Call Click on the newly created Call block and by clicking open the configuration page. Input values as shown below in the configuration screen Create Assignment(s) block Next, we need to create an empty variable that the flow will use in the future to store authentication results. Click on New CdiUtil Object and then click . Select Assignment(s) Click on the newly created Assign block. Click . Input values as shown below in the configuration screen Create repeat block Repeat block represents the Repeat instruction of Agama DSL. Repeat block creates a loop to iterate over certain steps(blocks). We will create a repeat loop that allows 3 retries if the authentication fails. Click on the Result Object block and then click . Select Repeat . Click on the newly created Repeat block. Click . Input values as shown below in the configuration screen Create An RRF block RRF block represents the RRF instruction of Agama DSL. Click on the Repeat block. Click . Check the In Repeat Block and then click on RRF . Click on the newly created Repeat block. Click . Input values as shown below in the configuration screen Since we have checked the In Repeat Block at the time of adding the RRF block, the RRF block as well as all the blocks that we add to the RRF block iterated blocks. At this stage, let's save the flow. Click Save on the flow canvas. Create a CdiUtil Call block Create a Call block to process the username and password received from the user (in RRF) and validate them. The result of validation should be stored in a variable. Click on the RRF block. Click . Click on Call . Click on the newly created Call block. Click . Input values as shown below in the configuration screen Create An Assignment block In case of authentication failure, we want to show the username to the user while reentering the password on the web page. For this, we will save the username in a variable using the Assignment(s) block. Click on the Call block. Click . Click on Assignment(s) . Click on the newly created Call block. Click . Input values as shown below in the configuration screen Create A Conditional When block When block represents the When instruction of Agama DSL. Create a conditional check using the When block to check if the authentication (validated in validate credentials block) has been successful. Click on Assignment(s) block. Click . Click on When . Click on the newly created When block. Click . Input values as shown below in the configuration screen Create finish blocks The Finish block represents the Flow finish instruction of Agama DSL. If the authentication was successful then the flow should finish and return the username. This will be achieved by adding a Finish block to the When block. And if authentication fails after 3 attempts, we need another Finish block following the Repeat block. Click on the When block. Click . Click on Condition met and then click Finish Click on the newly created Finish block. Click . Input values as shown below in the configuration screen Click on the Repeat block. Click . Click Finish Click on the newly created Finish block. Click . Input values as shown below in the configuration screen and click Save . Save the flow using the Save button on flow canvas. The completed flow looks like below: Check Generated code Agama Lab flow gets translated in Agama DSL . Click the Code button to see the code generated by the flow. Flow co.acme.password Basepath \"\" authService = Call io.jans.as.server.service.AuthenticationService#class cdiUtil = Call io.jans.service.cdi.util.CdiUtil#bean authService authResult = {} Repeat 3 times max creds = RRF \"login.ftlh\" authResult authResult.success = Call cdiUtil authenticate creds.username creds.password authResult.uid = creds.username When authResult.success is true Finish authResult.uid Finish false Design User Interface # In the RRF configuration step, we mentioned login.ftlh to render the login page elements. We need to add login.ftlh to the Agama project so that the flow can use during the flow execution. Use the steps below to create the page. Create a template file On the left project explorer menu, click on web > New > Freemarker Template Select + Create under the New Blank Template Give Name and Description as shown below and click Create Use the visual editor This opens a visual editor to create a freemarker template. Use this visual editor to create a template as per the need. For this article, we will use the code below. Click Edit HTML . This opens a text editor. Remove existing code in the editor and paste the code shown below. <!doctype html> < html xmlns = \"http://www.w3.org/1999/xhtml\" > < head > < title > Jans Agama Basic Auth flow </ title > </ head > < body > < h2 > Welcome </ h2 > < hr /> [#if !(success!true)] < p class = \"fs-6 text-danger mb-3\" > ${msgs[\"login.errorMessage\"]} </ p > [/#if] < hr /> < form method = \"post\" enctype = \"application/x-www-form-urlencoded\" > < div > Username: < input type = \"text\" class = \"form-control\" name = \"username\" id = \"username\" value = \"${uid!}\" required > </ div > < div > Password: < input type = \"password\" class = \"form-control\" id = \"password\" name = \"password\" > </ div > < div > < input type = \"submit\" class = \"btn btn-success px-4\" value = \"Login\" > </ div > </ form > </ body > < style > input { border : 1 px solid #000000 ; } </ style > </ html > Click Save changes This will render the page in the visual editor . Release The Project # To use the flow for authentication in the Janssen Server, the flow needs to be released. Agama Lab releases the flow and the related artifacts (like template) in the form of a .gama file in the GitHub repository. To release the project, click on any of the files in the left project explorer, and click Release Project . Enter a desired version number and click Save Upon successful release, Agama Lab Releases dashboard is shown. It lists all projects that are released. Click on the project name to go to the GitHub repository release page where .gama file has been released Download the .gama file from here to deploy on to the Janssen Server. Deploy Agama Project # Note Please ensure that Agama engine and scripts are enabled in Janssen Server deployment Download the .gama file from the GitHub repository Open TUI using following commands on Janssen Server cd /opt/jans/jans-cli python3 jans_cli_tui.py Navigate to Auth Server > Agama > Upload Project . Select the .gama file to upload. Test # Setup Janssen Tent Change the configuration as given below in config.py ACR_VALUES = \"agama\" ADDITIONAL_PARAMS = {'agama_flow': 'co.acme.password.flow'} 3. Run the Tent test by accessing it via the browser","title":"Quick Start Using Agama Lab"},{"location":"admin/developer/agama/quick-start-using-agama-lab/#quick-start-using-agama-lab","text":"In this quick start guide, we will build, deploy and test a simple password-based authentication flow using Agama and Agama Lab . Agama Lab is an online visual editor to build authentication flows. A flow built on Agama Lab is packaged as a .gama project file. .gama package needs to be manually deployed on Janssen Server where the Agama engine will execute the flow when an authentication request is received. Major Steps involved in this process are: Create Agama project using Agama Lab Deploying .gama package on Janssen Server Testing the authentication flow This guide covers these steps in the following sections.","title":"Quick Start Using Agama Lab"},{"location":"admin/developer/agama/quick-start-using-agama-lab/#prerequisites","text":"Janssen Server instance A public GitHub repository with at least one prior commit","title":"Prerequisites"},{"location":"admin/developer/agama/quick-start-using-agama-lab/#create-agama-project","text":"We will use Agama Lab to create a simple username-password based user authentication flow. This involves defining the authentication steps, designing the user interface to capture user inputs, and lastly, releasing the flow as an Agama project.","title":"Create Agama Project"},{"location":"admin/developer/agama/quick-start-using-agama-lab/#defining-the-authentication-flow","text":"","title":"Defining The Authentication Flow"},{"location":"admin/developer/agama/quick-start-using-agama-lab/#log-into-agama-lab","text":"Go to Agama Lab login page. Authenticate on the GitHub authentication page. Input the name of the repository where Agama Lab should release the project artifacts. Click Next Project listing page will be shown. All the existing projects for your GitHub user are listed here. Projects can be created, edited, and deleted from the project listing page.","title":"Log Into Agama Lab"},{"location":"admin/developer/agama/quick-start-using-agama-lab/#create-a-new-project","text":"To create a new project, click on the New Project button on the project listing page above. Enter the name and the description for the new project and click the Create button. This will create a new project and it'll be listed on the project listing page.","title":"Create A New Project"},{"location":"admin/developer/agama/quick-start-using-agama-lab/#create-the-authentication-flow","text":"Create A Flow File Click on The flow authoring view will open with a blank canvas. To start creating the flow, we need to create a Flow File . To do that, Right-click on code and then select New > Flow File Give name and description for the flow file and then click Create A newly created flow file has one block in it by default. Clicking on the block will allow you to add further blocks using or to edit the existing block using . Create AuthenticationService Call block Click on the block and then . Then select call A new Call block should appear with a link to Start block Click Call block and then click to open the configuration screen. Add configuration values as shown below. This will create a new instance of AuthenticationService class. This instance will be used to authenticate the user. The new instance will be stored in a variable called authService . Create CdiUtil Call block To perform authentication we will also need a bean instance of CdiUtil class. This bean instance takes AuthenticationService instance that we created in the previous step as an argument. Click the New Authentication Service block and then click on . Then click Call Click on the newly created Call block and by clicking open the configuration page. Input values as shown below in the configuration screen Create Assignment(s) block Next, we need to create an empty variable that the flow will use in the future to store authentication results. Click on New CdiUtil Object and then click . Select Assignment(s) Click on the newly created Assign block. Click . Input values as shown below in the configuration screen Create repeat block Repeat block represents the Repeat instruction of Agama DSL. Repeat block creates a loop to iterate over certain steps(blocks). We will create a repeat loop that allows 3 retries if the authentication fails. Click on the Result Object block and then click . Select Repeat . Click on the newly created Repeat block. Click . Input values as shown below in the configuration screen Create An RRF block RRF block represents the RRF instruction of Agama DSL. Click on the Repeat block. Click . Check the In Repeat Block and then click on RRF . Click on the newly created Repeat block. Click . Input values as shown below in the configuration screen Since we have checked the In Repeat Block at the time of adding the RRF block, the RRF block as well as all the blocks that we add to the RRF block iterated blocks. At this stage, let's save the flow. Click Save on the flow canvas. Create a CdiUtil Call block Create a Call block to process the username and password received from the user (in RRF) and validate them. The result of validation should be stored in a variable. Click on the RRF block. Click . Click on Call . Click on the newly created Call block. Click . Input values as shown below in the configuration screen Create An Assignment block In case of authentication failure, we want to show the username to the user while reentering the password on the web page. For this, we will save the username in a variable using the Assignment(s) block. Click on the Call block. Click . Click on Assignment(s) . Click on the newly created Call block. Click . Input values as shown below in the configuration screen Create A Conditional When block When block represents the When instruction of Agama DSL. Create a conditional check using the When block to check if the authentication (validated in validate credentials block) has been successful. Click on Assignment(s) block. Click . Click on When . Click on the newly created When block. Click . Input values as shown below in the configuration screen Create finish blocks The Finish block represents the Flow finish instruction of Agama DSL. If the authentication was successful then the flow should finish and return the username. This will be achieved by adding a Finish block to the When block. And if authentication fails after 3 attempts, we need another Finish block following the Repeat block. Click on the When block. Click . Click on Condition met and then click Finish Click on the newly created Finish block. Click . Input values as shown below in the configuration screen Click on the Repeat block. Click . Click Finish Click on the newly created Finish block. Click . Input values as shown below in the configuration screen and click Save . Save the flow using the Save button on flow canvas. The completed flow looks like below: Check Generated code Agama Lab flow gets translated in Agama DSL . Click the Code button to see the code generated by the flow. Flow co.acme.password Basepath \"\" authService = Call io.jans.as.server.service.AuthenticationService#class cdiUtil = Call io.jans.service.cdi.util.CdiUtil#bean authService authResult = {} Repeat 3 times max creds = RRF \"login.ftlh\" authResult authResult.success = Call cdiUtil authenticate creds.username creds.password authResult.uid = creds.username When authResult.success is true Finish authResult.uid Finish false","title":"Create The Authentication Flow"},{"location":"admin/developer/agama/quick-start-using-agama-lab/#design-user-interface","text":"In the RRF configuration step, we mentioned login.ftlh to render the login page elements. We need to add login.ftlh to the Agama project so that the flow can use during the flow execution. Use the steps below to create the page. Create a template file On the left project explorer menu, click on web > New > Freemarker Template Select + Create under the New Blank Template Give Name and Description as shown below and click Create Use the visual editor This opens a visual editor to create a freemarker template. Use this visual editor to create a template as per the need. For this article, we will use the code below. Click Edit HTML . This opens a text editor. Remove existing code in the editor and paste the code shown below. <!doctype html> < html xmlns = \"http://www.w3.org/1999/xhtml\" > < head > < title > Jans Agama Basic Auth flow </ title > </ head > < body > < h2 > Welcome </ h2 > < hr /> [#if !(success!true)] < p class = \"fs-6 text-danger mb-3\" > ${msgs[\"login.errorMessage\"]} </ p > [/#if] < hr /> < form method = \"post\" enctype = \"application/x-www-form-urlencoded\" > < div > Username: < input type = \"text\" class = \"form-control\" name = \"username\" id = \"username\" value = \"${uid!}\" required > </ div > < div > Password: < input type = \"password\" class = \"form-control\" id = \"password\" name = \"password\" > </ div > < div > < input type = \"submit\" class = \"btn btn-success px-4\" value = \"Login\" > </ div > </ form > </ body > < style > input { border : 1 px solid #000000 ; } </ style > </ html > Click Save changes This will render the page in the visual editor .","title":"Design User Interface"},{"location":"admin/developer/agama/quick-start-using-agama-lab/#release-the-project","text":"To use the flow for authentication in the Janssen Server, the flow needs to be released. Agama Lab releases the flow and the related artifacts (like template) in the form of a .gama file in the GitHub repository. To release the project, click on any of the files in the left project explorer, and click Release Project . Enter a desired version number and click Save Upon successful release, Agama Lab Releases dashboard is shown. It lists all projects that are released. Click on the project name to go to the GitHub repository release page where .gama file has been released Download the .gama file from here to deploy on to the Janssen Server.","title":"Release The Project"},{"location":"admin/developer/agama/quick-start-using-agama-lab/#deploy-agama-project","text":"Note Please ensure that Agama engine and scripts are enabled in Janssen Server deployment Download the .gama file from the GitHub repository Open TUI using following commands on Janssen Server cd /opt/jans/jans-cli python3 jans_cli_tui.py Navigate to Auth Server > Agama > Upload Project . Select the .gama file to upload.","title":"Deploy Agama Project"},{"location":"admin/developer/agama/quick-start-using-agama-lab/#test","text":"Setup Janssen Tent Change the configuration as given below in config.py ACR_VALUES = \"agama\" ADDITIONAL_PARAMS = {'agama_flow': 'co.acme.password.flow'} 3. Run the Tent test by accessing it via the browser","title":"Test"},{"location":"admin/developer/agama/recommended-practices/","tags":["administration","developer","agama"],"text":"Recommended practices in Agama development # About flow design # It is up to developers how to design a flow. This will normally require identifying the several \"steps\" that make up the \"journey\" and the conditions upon which \"branching\" takes place. Also it is important to check already existing flows in the server that may be reused for the purpose. Agama language was made to structure flows only, not for doing general purpose programming. This means developers have to use Java for doing low-level computations in the Janssen engine. This way, the resulting implementation (in DSL) serves as a depiction of the flow itself, hiding most of the internal details. About crashes # As a flow executes things can go wrong for reasons that developers cannot foresee. A database may have crashed, a connection to an external system may have failed, the flow itself may have some bug, etc. When an abnormal situation is presented, a flow simply crashes. If a flow crashes, its parent flows (or flow) if they exist, crash as well. Trying to handle crashes involves a lot of planning and work which is too costly and will unlikely account for the so many things that might fail in a real setting. Thus, coding defensively is not recommended. While it is possible to deal with Java exceptions (product of Call s) and other abnormalities when Trigger ing flows, these features should be used sparingly. OOP prose warning # Java support adds the ability to execute pieces of business logic required to build up a flow. These \u201cpieces of logic\u201d match well to Java methods, however situations like this must be avoided: x = \u2026 // A java object obtained in some way y = \u2026 // A java object obtained in some way Call x methodA arg1 arg2 \u2026 Call x methodB arg1 arg2 arg3 \u2026 z = Call y methodC \u2026 Call x methodD \u2026 z \u2026 If all those calls represent a meaningful unit of work they should be abstracted out and grouped into a single method invocation which should be thoroughly implemented in Java. Note Agama should not be used to do object-oriented programming but to make a clear, concise representation of a flow. As a rule of thumb, let Java do the heavy work; this is wiser, safer, and faster. Variable naming # Camel case is recommended. Also, in real-world flows developers would like to prefix a variable name with j when its value originates from a Java call and does not match any of Agama types directly. Example: jCustomerDetail . Finishing flows # Carefully decide how use the Finish directive in a flow. Specially when terminating sucessfully, many times developers would like to attach the identity of the user in question, as in Finish userId . This results in a successful authentication event and makes sense, but this is not always desired. Sometimes due to decomposition practices (in order to favor re-use and better organization), small flows can arise that should not carry the user identifier. As an example, suppose several flows exist for OTP (one-time passcode) authentication, like SMS, e-mail, token-based, etc. These would receive the user identifier as an input and act accordingly by verifying the passcode the user has entered at the browser. A parent flow can be used to prompt for a username and password first, and then forward the user to the OTP flow that better matches the user's preferences. This sounds fine, however, since any flow can be triggered by means of an authentication request by default, a skilled individual might try to launch one of the OTP flows directly passing proper parameters. This would result in authentications using a single factor (i.e. no password) which is undesirable. Thus, it is recommended to include userId in Finish only when there is a reason to do so, that is, when the authentication carried out by the flow is strong enough. This largely depends on the defined organization policies, but using a two-factor authentication is often a good sign of strength. Another approach is explicitly state which flows should not be triggered from a browser directly. This can be done in the Agama project descriptor , project.json . Recall the simplest way to express a positive authentication outcome is just Finish true .","title":"Recommended practices"},{"location":"admin/developer/agama/recommended-practices/#recommended-practices-in-agama-development","text":"","title":"Recommended practices in Agama development"},{"location":"admin/developer/agama/recommended-practices/#about-flow-design","text":"It is up to developers how to design a flow. This will normally require identifying the several \"steps\" that make up the \"journey\" and the conditions upon which \"branching\" takes place. Also it is important to check already existing flows in the server that may be reused for the purpose. Agama language was made to structure flows only, not for doing general purpose programming. This means developers have to use Java for doing low-level computations in the Janssen engine. This way, the resulting implementation (in DSL) serves as a depiction of the flow itself, hiding most of the internal details.","title":"About flow design"},{"location":"admin/developer/agama/recommended-practices/#about-crashes","text":"As a flow executes things can go wrong for reasons that developers cannot foresee. A database may have crashed, a connection to an external system may have failed, the flow itself may have some bug, etc. When an abnormal situation is presented, a flow simply crashes. If a flow crashes, its parent flows (or flow) if they exist, crash as well. Trying to handle crashes involves a lot of planning and work which is too costly and will unlikely account for the so many things that might fail in a real setting. Thus, coding defensively is not recommended. While it is possible to deal with Java exceptions (product of Call s) and other abnormalities when Trigger ing flows, these features should be used sparingly.","title":"About crashes"},{"location":"admin/developer/agama/recommended-practices/#oop-prose-warning","text":"Java support adds the ability to execute pieces of business logic required to build up a flow. These \u201cpieces of logic\u201d match well to Java methods, however situations like this must be avoided: x = \u2026 // A java object obtained in some way y = \u2026 // A java object obtained in some way Call x methodA arg1 arg2 \u2026 Call x methodB arg1 arg2 arg3 \u2026 z = Call y methodC \u2026 Call x methodD \u2026 z \u2026 If all those calls represent a meaningful unit of work they should be abstracted out and grouped into a single method invocation which should be thoroughly implemented in Java. Note Agama should not be used to do object-oriented programming but to make a clear, concise representation of a flow. As a rule of thumb, let Java do the heavy work; this is wiser, safer, and faster.","title":"OOP prose warning"},{"location":"admin/developer/agama/recommended-practices/#variable-naming","text":"Camel case is recommended. Also, in real-world flows developers would like to prefix a variable name with j when its value originates from a Java call and does not match any of Agama types directly. Example: jCustomerDetail .","title":"Variable naming"},{"location":"admin/developer/agama/recommended-practices/#finishing-flows","text":"Carefully decide how use the Finish directive in a flow. Specially when terminating sucessfully, many times developers would like to attach the identity of the user in question, as in Finish userId . This results in a successful authentication event and makes sense, but this is not always desired. Sometimes due to decomposition practices (in order to favor re-use and better organization), small flows can arise that should not carry the user identifier. As an example, suppose several flows exist for OTP (one-time passcode) authentication, like SMS, e-mail, token-based, etc. These would receive the user identifier as an input and act accordingly by verifying the passcode the user has entered at the browser. A parent flow can be used to prompt for a username and password first, and then forward the user to the OTP flow that better matches the user's preferences. This sounds fine, however, since any flow can be triggered by means of an authentication request by default, a skilled individual might try to launch one of the OTP flows directly passing proper parameters. This would result in authentications using a single factor (i.e. no password) which is undesirable. Thus, it is recommended to include userId in Finish only when there is a reason to do so, that is, when the authentication carried out by the flow is strong enough. This largely depends on the defined organization policies, but using a two-factor authentication is often a good sign of strength. Another approach is explicitly state which flows should not be triggered from a browser directly. This can be done in the Agama project descriptor , project.json . Recall the simplest way to express a positive authentication outcome is just Finish true .","title":"Finishing flows"},{"location":"admin/developer/customization/","tags":["administration","developer","customization"],"text":"Overview # Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/developer/customization/#overview","text":"Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/developer/customization/custom-client-logs/","tags":["administration","developer","customization"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Custom client logs"},{"location":"admin/developer/customization/custom-client-logs/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/developer/customization/custom-client-logs/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/developer/customization/custom-client-logs/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/developer/customization/customize-web-pages/","tags":["administration","developer","customization","internationalization","i18n","locale","css","images","header","footer","template"],"text":"All web pages are xhtml files. Default pages bundled in the jans-auth.war are: # Login page: login.xhtml Authorization page: authorize.xhtml Logout page: logout.xhtml Error page: error.xhtml To override default pages listed above: # Put a modified login.xhtml or authorize.xhtml or error.xhtml or logout.xhtml under /opt/jans/jetty/jans-auth/custom/pages/ Directory structure for customization # /opt/jans/jetty/jans-auth/ |-- custom | |-- i18n (resource bundles) | |-- libs (library files used by custom script) | |-- pages (web pages) | |-- static (images and css files) Adding a new web page for Person Authentication scripts # If enterOTP.xhtml is your webpage for step 2 of authentication, place under /opt/jans/jetty/jans-auth/custom/pages/auth/enterOTP.xhtml Reference it in the custom script as follows: def getPageForStep(self, configurationAttributes, step): # Used to specify the page you want to return for a given step if (step == 1): return \"/auth/login.xhtml\" if (step == 2) return \"/auth/enterOTP.xhtml\" Reference login pages: # Here you will find several login pages for different authentication methods. Customized resource bundles: # Resource bundles that are present in the jans-auth.war are present in this folder To override the defaults, custom .properties files should be placed in the following file under this path : /opt/jans/jetty/jans-auth/custom/i18n/jans-auth.properties Resource bundle names to support other languages should be placed under the same folder /opt/jans/jetty/jans-auth/custom/i18n/ . Some examples of file names are : jans-auth_en.properties jans-auth_bg.properties jans-auth_de.properties jans-auth_es.properties jans-auth_fr.properties jans-auth_it.properties jans-auth_ru.properties jans-auth_tr.properties To add translation for a language that is not yet supported, create new properties file in resource folder and name it jans-auth_[language_code].properties, then add language code as supported-locale to the faces-config.xml present in the same folder. Custom CSS files: # Place the file in /opt/jans/jetty/jans-auth/custom/static/stylesheet/theme.css Reference it in .xhtml file using the URL https://your.jans.server/jans-auth/ext/resources/stylesheet/theme.css or /jans-auth/ext/resources/stylesheet/theme.css Custom image files: # All images should be placed under /opt/jans/jetty/jans-auth/custom/static/img Reference it in .xhtml file using the URL https://your.jans.server/jans-auth/ext/resources/img/fileName.png or /jans-auth/ext/resources/img/fileName.jpg Page layout, header, footer (xhtml Template) customization # Templates refers to the common interface layout and style. For example, a banner, logo in common header and copyright information in footer. mkdir -p /opt/jans/jetty/jans-auth/custom/pages/WEB-INF/incl/layout/ Place a modified template.xhtml in the above location which will override the default template file from the war","title":"Customize Web pages"},{"location":"admin/developer/customization/customize-web-pages/#default-pages-bundled-in-the-jans-authwar-are","text":"Login page: login.xhtml Authorization page: authorize.xhtml Logout page: logout.xhtml Error page: error.xhtml","title":"Default pages bundled in the jans-auth.war are:"},{"location":"admin/developer/customization/customize-web-pages/#to-override-default-pages-listed-above","text":"Put a modified login.xhtml or authorize.xhtml or error.xhtml or logout.xhtml under /opt/jans/jetty/jans-auth/custom/pages/","title":"To override default pages listed above:"},{"location":"admin/developer/customization/customize-web-pages/#directory-structure-for-customization","text":"/opt/jans/jetty/jans-auth/ |-- custom | |-- i18n (resource bundles) | |-- libs (library files used by custom script) | |-- pages (web pages) | |-- static (images and css files)","title":"Directory structure for customization"},{"location":"admin/developer/customization/customize-web-pages/#adding-a-new-web-page-for-person-authentication-scripts","text":"If enterOTP.xhtml is your webpage for step 2 of authentication, place under /opt/jans/jetty/jans-auth/custom/pages/auth/enterOTP.xhtml Reference it in the custom script as follows: def getPageForStep(self, configurationAttributes, step): # Used to specify the page you want to return for a given step if (step == 1): return \"/auth/login.xhtml\" if (step == 2) return \"/auth/enterOTP.xhtml\"","title":"Adding a new web page for Person Authentication scripts"},{"location":"admin/developer/customization/customize-web-pages/#reference-login-pages","text":"Here you will find several login pages for different authentication methods.","title":"Reference login pages:"},{"location":"admin/developer/customization/customize-web-pages/#customized-resource-bundles","text":"Resource bundles that are present in the jans-auth.war are present in this folder To override the defaults, custom .properties files should be placed in the following file under this path : /opt/jans/jetty/jans-auth/custom/i18n/jans-auth.properties Resource bundle names to support other languages should be placed under the same folder /opt/jans/jetty/jans-auth/custom/i18n/ . Some examples of file names are : jans-auth_en.properties jans-auth_bg.properties jans-auth_de.properties jans-auth_es.properties jans-auth_fr.properties jans-auth_it.properties jans-auth_ru.properties jans-auth_tr.properties To add translation for a language that is not yet supported, create new properties file in resource folder and name it jans-auth_[language_code].properties, then add language code as supported-locale to the faces-config.xml present in the same folder.","title":"Customized resource bundles:"},{"location":"admin/developer/customization/customize-web-pages/#custom-css-files","text":"Place the file in /opt/jans/jetty/jans-auth/custom/static/stylesheet/theme.css Reference it in .xhtml file using the URL https://your.jans.server/jans-auth/ext/resources/stylesheet/theme.css or /jans-auth/ext/resources/stylesheet/theme.css","title":"Custom CSS files:"},{"location":"admin/developer/customization/customize-web-pages/#custom-image-files","text":"All images should be placed under /opt/jans/jetty/jans-auth/custom/static/img Reference it in .xhtml file using the URL https://your.jans.server/jans-auth/ext/resources/img/fileName.png or /jans-auth/ext/resources/img/fileName.jpg","title":"Custom image files:"},{"location":"admin/developer/customization/customize-web-pages/#page-layout-header-footer-xhtml-template-customization","text":"Templates refers to the common interface layout and style. For example, a banner, logo in common header and copyright information in footer. mkdir -p /opt/jans/jetty/jans-auth/custom/pages/WEB-INF/incl/layout/ Place a modified template.xhtml in the above location which will override the default template file from the war","title":"Page layout, header, footer (xhtml Template) customization"},{"location":"admin/developer/scripts/","tags":["administration","developer","scripts"],"text":"Overview # Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/developer/scripts/#overview","text":"Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/developer/scripts/application-session/","tags":["administration","developer","scripts"],"text":"Application Session Script Guide # Overview # This is an introduction to the script and what it's used for. Interface # Methods # A definition of each method used in the script Objects # Definitions of all objects used in the script Common Use Cases # Descriptions of common use cases for this script, including a code snippet for each","title":"Application Session"},{"location":"admin/developer/scripts/application-session/#application-session-script-guide","text":"","title":"Application Session Script Guide"},{"location":"admin/developer/scripts/application-session/#overview","text":"This is an introduction to the script and what it's used for.","title":"Overview"},{"location":"admin/developer/scripts/application-session/#interface","text":"","title":"Interface"},{"location":"admin/developer/scripts/application-session/#methods","text":"A definition of each method used in the script","title":"Methods"},{"location":"admin/developer/scripts/application-session/#objects","text":"Definitions of all objects used in the script","title":"Objects"},{"location":"admin/developer/scripts/application-session/#common-use-cases","text":"Descriptions of common use cases for this script, including a code snippet for each","title":"Common Use Cases"},{"location":"admin/developer/scripts/ciba/","tags":["administration","developer","scripts"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"CIBA End User Notification"},{"location":"admin/developer/scripts/ciba/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/developer/scripts/ciba/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/developer/scripts/ciba/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/developer/scripts/client-registration/","tags":["administration","developer","scripts"],"text":"Client Registration scripts # Overview # The Jans-Auth server implements the OpenID Connect Dynamic Client Registration specification. This allows developers to register a client with the Authorization Server (AS) without any intervention from the administrator. By default, all clients are given the same default scopes and attributes. Through the use of an interception script, this behavior can be modified. These scripts can be used to analyze the registration request and apply customizations to the registered client. For example, a client can be given specific scopes by analyzing the Software Statement that is sent with the registration request. Behavior # By default, Jans server has no dynamic client registration scripts enabled, and all clients are given the same attributes. When a script is added and enabled, the script will run and return a boolean after applying logic to the registration request. If true , the client is registered and client credentials are returned. Generally, the script is global for all registration requests, and only one script is enabled at a time. Registration flow # sequenceDiagram title Client Registration script autonumber 1 RP->>Jans AS: /register request Jans AS->>Jans AS: Is there a client registration script enabled? Jans AS->>Jans AS: run script note right of Jans AS: Apply custom logic e.g <br/> Add scopes <br/> Set attributes <br/> validate SSA Jans AS->>RP: return client credentials Interface # The client registration script implements the ClientRegistrationType interface. This extends methods from the base script type in addition to adding new methods: Inherited Methods # Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10 New methods # Method header Method description def createClient(self, context) Called when the dynamic client registration request is received. def updateClient(self, context) Called when the PUT method is called on registration endpoint to update client details. def getSoftwareStatementHmacSecret(self, context) Returns secret key which will be used to validate Software Statement if HMAC algorithm is used (e.g. HS256, HS512) def getSoftwareStatementJwks(self, context) Returns JWKS which will be used to validate Software Statement if keys are used (e.g. RS256) def modifyPutResponse(self, responseAsJsonObject, executionContext) Modifies the response from the PUT request to registration endpoint def modifyReadResponse(self, responseAsJsonObject, executionContext) Modifies the response from the GET request to registration endpoint def modifyPostResponse(self, responseAsJsonObject, executionContext) Modifies the response from the POST request to registration endpoint Objects # Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes SimpleCustomProperty Map of configuration properties. Reference context Reference responseAsJsonObject Java JSONObject. Reference executionContext Reference Common Use Case: Adding scopes defined in the script configuration parameters # Script Type: Python # from io.jans.model.custom.script.type.client import ClientRegistrationType from io.jans.service.cdi.util import CdiUtil from io.jans.orm.util import StringHelper , ArrayHelper from io.jans.as.server.service import ScopeService import json class ClientRegistration ( ClientRegistrationType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"Client registration. Initialization\" if ( not configurationAttributes . containsKey ( \"scope_list\" )): print \"Client registration. Initialization failed. Scope List not defined.\" return False else : self . scope_list = configurationAttributes . get ( \"scope_list\" ) . getValue2 () print \"Client registration. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"Client registration. Destroy\" print \"Client registration. Destroyed successfully\" return True def createClient ( self , context ): scopeService = CdiUtil . bean ( ScopeService ) currentScopes = client . getScopes () for newScope in self . scope_list : foundScope = scopeService . getScopeById ( newScope ) if foundScope is None : print \"Client Registration. New scope(s) not found.\" return False newScopes = ArrayHelper . addItemToStringArray ( currentScopes , foundScope . getDn ()) client . setScopes ( newScopes ) return True def updateClient ( self , context ): print \"SSA Client registration. UpdateClient method\" pass def getApiVersion ( self ): return 11 # Returns secret key which will be used to validate Software Statement if HMAC algorithm is used (e.g. HS256, HS512). Invoked if oxauth conf property softwareStatementValidationType=SCRIPT which is default/fallback value. def getSoftwareStatementHmacSecret ( self , context ): pass # Returns JWKS which will be used to validate Software Statement if keys are used (e.g. RS256). Invoked if oxauth conf property softwareStatementValidationType=SCRIPT which is default/fallback value. def getSoftwareStatementJwks ( self , context ): pass def modifyPutResponse ( self , responseAsJsonObject , executionContext ): return False def modifyReadResponse ( self , responseAsJsonObject , executionContext ): return False def modifyPostResponse ( self , responseAsJsonObject , executionContext ): return False Script Type: Java # import io.jans.as.common.model.registration.Client ; import io.jans.as.persistence.model.Scope ; import io.jans.as.server.service.ScopeService ; import io.jans.as.server.service.external.context.DynamicClientRegistrationContext ; import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.model.custom.script.type.client.ClientRegistrationType ; import io.jans.orm.util.ArrayHelper ; import io.jans.service.cdi.util.CdiUtil ; import org.json.JSONArray ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; import java.util.Map ; public class ClientRegistration implements ClientRegistrationType { private static final Logger log = LoggerFactory . getLogger ( ClientRegistration . class ); JSONArray json_array = null ; @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { if ( ! configurationAttributes . containsKey ( \"scope_list\" )) { log . info ( \"Client registration. Initialization failed. Scope List not found.\" ); return false ; } String scope_list = configurationAttributes . get ( \"scope_list\" ). getValue2 (); json_array = new JSONArray ( scope_list ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Client registration. Initialization.\" ); log . info ( configurationAttributes . toString ()); if ( ! configurationAttributes . containsKey ( \"scope_list\" )) { log . info ( \"Client registration. Initialization failed. Scope List not found.\" ); return false ; } String scope_list = configurationAttributes . get ( \"scope_list\" ). getValue2 (); json_array = new JSONArray ( scope_list ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Client registration. Destroy.\" ); return true ; } @Override public int getApiVersion () { return 11 ; } @Override public boolean createClient ( Object context ) { log . info ( \"Client registration. CreateClient method\" ); DynamicClientRegistrationContext regContext = ( DynamicClientRegistrationContext ) context ; Client client = regContext . getClient (); ScopeService scopeService = CdiUtil . bean ( ScopeService . class ); String [] currentScopes = client . getScopes (); String [] newScopes = currentScopes . clone (); for ( int i = 0 ; i < json_array . length (); i ++ ) { String scopeName = ( String ) json_array . get ( i ); Scope foundScope = scopeService . getScopeById ( scopeName ); if ( foundScope == null ) { log . info ( \"Client registration. Scope not found\" ); return false ; } newScopes = ArrayHelper . addItemToStringArray ( newScopes , foundScope . getDn ()); } client . setScopes ( newScopes ); log . info ( \"Client registration. Scopes added.\" ); return true ; } @Override public boolean updateClient ( Object context ) { return true ; } // This method needs to be overridden if client is providing an SSA with HMAC @Override public String getSoftwareStatementHmacSecret ( Object context ) { return \"\" ; } // This method needs to be overridden if client is providing an SSA and RS256 validation @Override public String getSoftwareStatementJwks ( Object context ) { return \"\" ; } @Override public String getDcrHmacSecret ( Object o ) { return \"\" ; } @Override public String getDcrJwks ( Object o ) { return \"\" ; } @Override public boolean isCertValidForClient ( Object o , Object o1 ) { return false ; } @Override public boolean modifyPutResponse ( Object responseAsJsonObject , Object executionContext ) { return true ; } @Override public boolean modifyReadResponse ( Object responseAsJsonObject , Object executionContext ) { return true ; } @Override public boolean modifyPostResponse ( Object responseAsJsonObject , Object executionContext ) { return true ; } } Sample Scripts # OpenBanking","title":"Client Registration"},{"location":"admin/developer/scripts/client-registration/#client-registration-scripts","text":"","title":"Client Registration scripts"},{"location":"admin/developer/scripts/client-registration/#overview","text":"The Jans-Auth server implements the OpenID Connect Dynamic Client Registration specification. This allows developers to register a client with the Authorization Server (AS) without any intervention from the administrator. By default, all clients are given the same default scopes and attributes. Through the use of an interception script, this behavior can be modified. These scripts can be used to analyze the registration request and apply customizations to the registered client. For example, a client can be given specific scopes by analyzing the Software Statement that is sent with the registration request.","title":"Overview"},{"location":"admin/developer/scripts/client-registration/#behavior","text":"By default, Jans server has no dynamic client registration scripts enabled, and all clients are given the same attributes. When a script is added and enabled, the script will run and return a boolean after applying logic to the registration request. If true , the client is registered and client credentials are returned. Generally, the script is global for all registration requests, and only one script is enabled at a time.","title":"Behavior"},{"location":"admin/developer/scripts/client-registration/#registration-flow","text":"sequenceDiagram title Client Registration script autonumber 1 RP->>Jans AS: /register request Jans AS->>Jans AS: Is there a client registration script enabled? Jans AS->>Jans AS: run script note right of Jans AS: Apply custom logic e.g <br/> Add scopes <br/> Set attributes <br/> validate SSA Jans AS->>RP: return client credentials","title":"Registration flow"},{"location":"admin/developer/scripts/client-registration/#interface","text":"The client registration script implements the ClientRegistrationType interface. This extends methods from the base script type in addition to adding new methods:","title":"Interface"},{"location":"admin/developer/scripts/client-registration/#inherited-methods","text":"Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10","title":"Inherited Methods"},{"location":"admin/developer/scripts/client-registration/#new-methods","text":"Method header Method description def createClient(self, context) Called when the dynamic client registration request is received. def updateClient(self, context) Called when the PUT method is called on registration endpoint to update client details. def getSoftwareStatementHmacSecret(self, context) Returns secret key which will be used to validate Software Statement if HMAC algorithm is used (e.g. HS256, HS512) def getSoftwareStatementJwks(self, context) Returns JWKS which will be used to validate Software Statement if keys are used (e.g. RS256) def modifyPutResponse(self, responseAsJsonObject, executionContext) Modifies the response from the PUT request to registration endpoint def modifyReadResponse(self, responseAsJsonObject, executionContext) Modifies the response from the GET request to registration endpoint def modifyPostResponse(self, responseAsJsonObject, executionContext) Modifies the response from the POST request to registration endpoint","title":"New methods"},{"location":"admin/developer/scripts/client-registration/#objects","text":"Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes SimpleCustomProperty Map of configuration properties. Reference context Reference responseAsJsonObject Java JSONObject. Reference executionContext Reference","title":"Objects"},{"location":"admin/developer/scripts/client-registration/#common-use-case-adding-scopes-defined-in-the-script-configuration-parameters","text":"","title":"Common Use Case: Adding scopes defined in the script configuration parameters"},{"location":"admin/developer/scripts/client-registration/#script-type-python","text":"from io.jans.model.custom.script.type.client import ClientRegistrationType from io.jans.service.cdi.util import CdiUtil from io.jans.orm.util import StringHelper , ArrayHelper from io.jans.as.server.service import ScopeService import json class ClientRegistration ( ClientRegistrationType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"Client registration. Initialization\" if ( not configurationAttributes . containsKey ( \"scope_list\" )): print \"Client registration. Initialization failed. Scope List not defined.\" return False else : self . scope_list = configurationAttributes . get ( \"scope_list\" ) . getValue2 () print \"Client registration. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"Client registration. Destroy\" print \"Client registration. Destroyed successfully\" return True def createClient ( self , context ): scopeService = CdiUtil . bean ( ScopeService ) currentScopes = client . getScopes () for newScope in self . scope_list : foundScope = scopeService . getScopeById ( newScope ) if foundScope is None : print \"Client Registration. New scope(s) not found.\" return False newScopes = ArrayHelper . addItemToStringArray ( currentScopes , foundScope . getDn ()) client . setScopes ( newScopes ) return True def updateClient ( self , context ): print \"SSA Client registration. UpdateClient method\" pass def getApiVersion ( self ): return 11 # Returns secret key which will be used to validate Software Statement if HMAC algorithm is used (e.g. HS256, HS512). Invoked if oxauth conf property softwareStatementValidationType=SCRIPT which is default/fallback value. def getSoftwareStatementHmacSecret ( self , context ): pass # Returns JWKS which will be used to validate Software Statement if keys are used (e.g. RS256). Invoked if oxauth conf property softwareStatementValidationType=SCRIPT which is default/fallback value. def getSoftwareStatementJwks ( self , context ): pass def modifyPutResponse ( self , responseAsJsonObject , executionContext ): return False def modifyReadResponse ( self , responseAsJsonObject , executionContext ): return False def modifyPostResponse ( self , responseAsJsonObject , executionContext ): return False","title":"Script Type: Python"},{"location":"admin/developer/scripts/client-registration/#script-type-java","text":"import io.jans.as.common.model.registration.Client ; import io.jans.as.persistence.model.Scope ; import io.jans.as.server.service.ScopeService ; import io.jans.as.server.service.external.context.DynamicClientRegistrationContext ; import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.model.custom.script.type.client.ClientRegistrationType ; import io.jans.orm.util.ArrayHelper ; import io.jans.service.cdi.util.CdiUtil ; import org.json.JSONArray ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; import java.util.Map ; public class ClientRegistration implements ClientRegistrationType { private static final Logger log = LoggerFactory . getLogger ( ClientRegistration . class ); JSONArray json_array = null ; @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { if ( ! configurationAttributes . containsKey ( \"scope_list\" )) { log . info ( \"Client registration. Initialization failed. Scope List not found.\" ); return false ; } String scope_list = configurationAttributes . get ( \"scope_list\" ). getValue2 (); json_array = new JSONArray ( scope_list ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Client registration. Initialization.\" ); log . info ( configurationAttributes . toString ()); if ( ! configurationAttributes . containsKey ( \"scope_list\" )) { log . info ( \"Client registration. Initialization failed. Scope List not found.\" ); return false ; } String scope_list = configurationAttributes . get ( \"scope_list\" ). getValue2 (); json_array = new JSONArray ( scope_list ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Client registration. Destroy.\" ); return true ; } @Override public int getApiVersion () { return 11 ; } @Override public boolean createClient ( Object context ) { log . info ( \"Client registration. CreateClient method\" ); DynamicClientRegistrationContext regContext = ( DynamicClientRegistrationContext ) context ; Client client = regContext . getClient (); ScopeService scopeService = CdiUtil . bean ( ScopeService . class ); String [] currentScopes = client . getScopes (); String [] newScopes = currentScopes . clone (); for ( int i = 0 ; i < json_array . length (); i ++ ) { String scopeName = ( String ) json_array . get ( i ); Scope foundScope = scopeService . getScopeById ( scopeName ); if ( foundScope == null ) { log . info ( \"Client registration. Scope not found\" ); return false ; } newScopes = ArrayHelper . addItemToStringArray ( newScopes , foundScope . getDn ()); } client . setScopes ( newScopes ); log . info ( \"Client registration. Scopes added.\" ); return true ; } @Override public boolean updateClient ( Object context ) { return true ; } // This method needs to be overridden if client is providing an SSA with HMAC @Override public String getSoftwareStatementHmacSecret ( Object context ) { return \"\" ; } // This method needs to be overridden if client is providing an SSA and RS256 validation @Override public String getSoftwareStatementJwks ( Object context ) { return \"\" ; } @Override public String getDcrHmacSecret ( Object o ) { return \"\" ; } @Override public String getDcrJwks ( Object o ) { return \"\" ; } @Override public boolean isCertValidForClient ( Object o , Object o1 ) { return false ; } @Override public boolean modifyPutResponse ( Object responseAsJsonObject , Object executionContext ) { return true ; } @Override public boolean modifyReadResponse ( Object responseAsJsonObject , Object executionContext ) { return true ; } @Override public boolean modifyPostResponse ( Object responseAsJsonObject , Object executionContext ) { return true ; } }","title":"Script Type: Java"},{"location":"admin/developer/scripts/client-registration/#sample-scripts","text":"OpenBanking","title":"Sample Scripts"},{"location":"admin/developer/scripts/config-api/","tags":["administration","developer","scripts"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Config API"},{"location":"admin/developer/scripts/config-api/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/developer/scripts/config-api/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/developer/scripts/config-api/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/developer/scripts/consent-gathering/","tags":["administration","developer","scripts","ConsentGathering"],"text":"Overview # OAuth 2.0 allows providers to prompt users for consent before releasing their personal information to a client (application). The standard consent process is binary: approve or deny. Using the consent gathering interception script, the consent flow can be customized to meet unique business requirements, for instance to support payment authorization, where you need to present transactional information, or where you need to step-up authentication to add security. Interface # The consent gathering script implements the ConsentGathering interface. This extends methods from the base script type in addition to adding new methods: Inherited Methods # Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10 New Methods # Method header Method description def authorize(self, step, consentContext) Main consent-gather method. Must return True (if consent gathered successfully) or False (if failed). def getNextStep(self, step, context) def getStepsCount(self, context) Return total number of consent gathering steps def getPageForStep(self, step, context) Returns the consent page corresponding to the current step of consent gathering Objects # Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes SimpleCustomProperty Map of configuration properties. Reference context Reference Use case: Dummy Consent Gathering Form # This script has been adapted from the Gluu Server sample consent gathering script . Script Type: Python # from io.jans.model.custom.script.type.authz import ConsentGatheringType import random class ConsentGathering ( ConsentGatheringType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"Consent-Gathering. Initializing ...\" print \"Consent-Gathering. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"Consent-Gathering. Destroying ...\" print \"Consent-Gathering. Destroyed successfully\" return True def getAuthenticationMethodClaims ( self , requestParameters ): return None def getApiVersion ( self ): return 11 # All user entered values can be access via Map<String, String> context.getPageAttributes() def authorize ( self , step , context ): print \"Consent-Gathering. Authorizing...\" if step == 1 : allowButton = context . getRequestParameters () . get ( \"authorizeForm:allowButton\" ) if ( allowButton != None ) and ( len ( allowButton ) > 0 ): print \"Consent-Gathering. Authorization success for step 1\" return True print \"Consent-Gathering. Authorization declined for step 1\" elif step == 2 : allowButton = context . getRequestParameters () . get ( \"authorizeForm:allowButton\" ) if ( allowButton != None ) and ( len ( allowButton ) > 0 ): print \"Consent-Gathering. Authorization success for step 2\" return True print \"Consent-Gathering. Authorization declined for step 2\" return False def getNextStep ( self , step , context ): return - 1 def prepareForStep ( self , step , context ): if not context . isAuthenticated (): print \"User is not authenticated. Aborting authorization flow ...\" return False if step == 2 : pageAttributes = context . getPageAttributes () # Generate random consent gathering request consentRequest = \"Requested transaction # %s approval for the amount of sum $ %s .00\" % ( random . randint ( 100000 , 1000000 ), random . randint ( 1 , 100 ) ) pageAttributes . put ( \"consent_request\" , consentRequest ) return True return True def getStepsCount ( self , context ): return 2 def getPageForStep ( self , step , context ): if step == 1 : return \"/authz/authorize.xhtml\" elif step == 2 : return \"/authz/transaction.xhtml\" return \"\" Script Type: Java # import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.model.custom.script.type.authz.ConsentGatheringType ; import io.jans.service.custom.script.CustomScriptManager ; import io.jans.as.server.service.external.context.ConsentGatheringContext ; import java.util.Map ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class ConsentGathering implements ConsentGatheringType { private static final Logger log = LoggerFactory . getLogger ( CustomScriptManager . class ); @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Consent gathering. Initializing...\" ); log . info ( \"Consent gathering. Initialized\" ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Consent gathering. Initializing...\" ); log . info ( \"Consent gathering. Initialized\" ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Consent gathering. Destroying...\" ); log . info ( \"Consent gathering. Destroyed.\" ); return true ; } @Override public int getApiVersion () { return 11 ; } @Override public boolean authorize ( int step , Object consentContext ) { log . info ( \"Consent gathering. Authorizing...\" ); ConsentGatheringContext gatheringContext = ( ConsentGatheringContext ) consentContext ; String [] allowButton = gatheringContext . getRequestParameters (). get ( \"authorizeForm:allowButton\" ); if ( step == 1 ) { if ( allowButton != null && allowButton . length > 0 ) { log . info ( \"Consent gathering. Authorization success for step 1\" ); return true ; } log . info ( \"Consent gathering. Authorization declined for step 1\" ); } else if ( step == 2 ) { if ( allowButton != null && allowButton . length > 0 ) { log . info ( \"Consent gathering. Authorization success for step 2\" ); return true ; } log . info ( \"Consent gathering. Authorization declined for step 2\" ); } return false ; } @Override public int getNextStep ( int step , Object consentContext ) { return - 1 ; } @Override public boolean prepareForStep ( int step , Object consentContext ) { ConsentGatheringContext gatheringContext = ( ConsentGatheringContext ) consentContext ; if ( ! gatheringContext . isAuthenticated ()) { log . info ( \"User is not authenticated. Aborting authorization flow...\" ); return false ; } if ( step == 2 ) { Map < String , String > pageAttributes = gatheringContext . getPageAttributes (); String consentRequest = \"This is a random consent request\" ; pageAttributes . put ( \"consent_request\" , consentRequest ); return true ; } return false ; } @Override public int getStepsCount ( Object consentContext ) { return 2 ; } @Override public String getPageForStep ( int step , Object consentContext ) { if ( step == 1 ) { return \"/authz/authorize.xhtml\" ; } else if ( step == 2 ) { return \"return \\\"/authz/transaction.xhtml\\\"\" ; } return \"\" ; } }","title":"Consent Gathering"},{"location":"admin/developer/scripts/consent-gathering/#overview","text":"OAuth 2.0 allows providers to prompt users for consent before releasing their personal information to a client (application). The standard consent process is binary: approve or deny. Using the consent gathering interception script, the consent flow can be customized to meet unique business requirements, for instance to support payment authorization, where you need to present transactional information, or where you need to step-up authentication to add security.","title":"Overview"},{"location":"admin/developer/scripts/consent-gathering/#interface","text":"The consent gathering script implements the ConsentGathering interface. This extends methods from the base script type in addition to adding new methods:","title":"Interface"},{"location":"admin/developer/scripts/consent-gathering/#inherited-methods","text":"Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10","title":"Inherited Methods"},{"location":"admin/developer/scripts/consent-gathering/#new-methods","text":"Method header Method description def authorize(self, step, consentContext) Main consent-gather method. Must return True (if consent gathered successfully) or False (if failed). def getNextStep(self, step, context) def getStepsCount(self, context) Return total number of consent gathering steps def getPageForStep(self, step, context) Returns the consent page corresponding to the current step of consent gathering","title":"New Methods"},{"location":"admin/developer/scripts/consent-gathering/#objects","text":"Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes SimpleCustomProperty Map of configuration properties. Reference context Reference","title":"Objects"},{"location":"admin/developer/scripts/consent-gathering/#use-case-dummy-consent-gathering-form","text":"This script has been adapted from the Gluu Server sample consent gathering script .","title":"Use case: Dummy Consent Gathering Form"},{"location":"admin/developer/scripts/consent-gathering/#script-type-python","text":"from io.jans.model.custom.script.type.authz import ConsentGatheringType import random class ConsentGathering ( ConsentGatheringType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"Consent-Gathering. Initializing ...\" print \"Consent-Gathering. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"Consent-Gathering. Destroying ...\" print \"Consent-Gathering. Destroyed successfully\" return True def getAuthenticationMethodClaims ( self , requestParameters ): return None def getApiVersion ( self ): return 11 # All user entered values can be access via Map<String, String> context.getPageAttributes() def authorize ( self , step , context ): print \"Consent-Gathering. Authorizing...\" if step == 1 : allowButton = context . getRequestParameters () . get ( \"authorizeForm:allowButton\" ) if ( allowButton != None ) and ( len ( allowButton ) > 0 ): print \"Consent-Gathering. Authorization success for step 1\" return True print \"Consent-Gathering. Authorization declined for step 1\" elif step == 2 : allowButton = context . getRequestParameters () . get ( \"authorizeForm:allowButton\" ) if ( allowButton != None ) and ( len ( allowButton ) > 0 ): print \"Consent-Gathering. Authorization success for step 2\" return True print \"Consent-Gathering. Authorization declined for step 2\" return False def getNextStep ( self , step , context ): return - 1 def prepareForStep ( self , step , context ): if not context . isAuthenticated (): print \"User is not authenticated. Aborting authorization flow ...\" return False if step == 2 : pageAttributes = context . getPageAttributes () # Generate random consent gathering request consentRequest = \"Requested transaction # %s approval for the amount of sum $ %s .00\" % ( random . randint ( 100000 , 1000000 ), random . randint ( 1 , 100 ) ) pageAttributes . put ( \"consent_request\" , consentRequest ) return True return True def getStepsCount ( self , context ): return 2 def getPageForStep ( self , step , context ): if step == 1 : return \"/authz/authorize.xhtml\" elif step == 2 : return \"/authz/transaction.xhtml\" return \"\"","title":"Script Type: Python"},{"location":"admin/developer/scripts/consent-gathering/#script-type-java","text":"import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.model.custom.script.type.authz.ConsentGatheringType ; import io.jans.service.custom.script.CustomScriptManager ; import io.jans.as.server.service.external.context.ConsentGatheringContext ; import java.util.Map ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class ConsentGathering implements ConsentGatheringType { private static final Logger log = LoggerFactory . getLogger ( CustomScriptManager . class ); @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Consent gathering. Initializing...\" ); log . info ( \"Consent gathering. Initialized\" ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Consent gathering. Initializing...\" ); log . info ( \"Consent gathering. Initialized\" ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Consent gathering. Destroying...\" ); log . info ( \"Consent gathering. Destroyed.\" ); return true ; } @Override public int getApiVersion () { return 11 ; } @Override public boolean authorize ( int step , Object consentContext ) { log . info ( \"Consent gathering. Authorizing...\" ); ConsentGatheringContext gatheringContext = ( ConsentGatheringContext ) consentContext ; String [] allowButton = gatheringContext . getRequestParameters (). get ( \"authorizeForm:allowButton\" ); if ( step == 1 ) { if ( allowButton != null && allowButton . length > 0 ) { log . info ( \"Consent gathering. Authorization success for step 1\" ); return true ; } log . info ( \"Consent gathering. Authorization declined for step 1\" ); } else if ( step == 2 ) { if ( allowButton != null && allowButton . length > 0 ) { log . info ( \"Consent gathering. Authorization success for step 2\" ); return true ; } log . info ( \"Consent gathering. Authorization declined for step 2\" ); } return false ; } @Override public int getNextStep ( int step , Object consentContext ) { return - 1 ; } @Override public boolean prepareForStep ( int step , Object consentContext ) { ConsentGatheringContext gatheringContext = ( ConsentGatheringContext ) consentContext ; if ( ! gatheringContext . isAuthenticated ()) { log . info ( \"User is not authenticated. Aborting authorization flow...\" ); return false ; } if ( step == 2 ) { Map < String , String > pageAttributes = gatheringContext . getPageAttributes (); String consentRequest = \"This is a random consent request\" ; pageAttributes . put ( \"consent_request\" , consentRequest ); return true ; } return false ; } @Override public int getStepsCount ( Object consentContext ) { return 2 ; } @Override public String getPageForStep ( int step , Object consentContext ) { if ( step == 1 ) { return \"/authz/authorize.xhtml\" ; } else if ( step == 2 ) { return \"return \\\"/authz/transaction.xhtml\\\"\" ; } return \"\" ; } }","title":"Script Type: Java"},{"location":"admin/developer/scripts/dynamic-scope/","tags":["administration","developer","scripts","DynamicScope"],"text":"Overview # The dynamic scope custom script allows the authorization server to generate a list of claims (and their values) on the fly, depending on circumstances such as the ID of the client requesting it, authenticated user's session parameters, values of other users' attributes, results of some calculations implementing specific business logic and/or requests to remote APIs or databases. Claims are then returned the usual way in a response to a call to the /userinfo endpoint. Interface # The dynamic scope script implements the DynamicScopeType interface. This extends methods from the base script type in addition to adding new methods: Inherited Methods # Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10 New Methods # Method header Method description def update(self, dynamicScopeContext, configurationAttributes) Main dynamic scope method. Peforms any needed logic, updates JSON Web Token and returns True if dynamic scope was added successfully, false otherwise. def getSupportedClaims(self, configurationAttributes) Returns an array of claims that are allowed to be added by the custom script Objects # Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes SimpleCustomProperty Map of configuration properties. Reference dynamicScopeContext Reference Use case: Add dynamic scope with the org_name claim # This script has been adapted from the Gluu Server sample dynamic scope script Script Type: Python # from java.util import Arrays , ArrayList from io.jans.model.custom.script.type.scope import DynamicScopeType class DynamicScope ( DynamicScopeType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , configurationAttributes ): print \"Dynamic scope. Initialization\" print \"Dynamic scope. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"Dynamic scope. Destroy\" print \"Dynamic scope. Destroyed successfully\" return True def update ( self , dynamicScopeContext , configurationAttributes ): print \"Dynamic scope. Update method\" dynamicScopes = dynamicScopeContext . getDynamicScopes () user = dynamicScopeContext . getUser () jsonToken = dynamicScopeContext . getJsonToken () claims = jsonToken . getClaims () # Iterate through list of dynamic scopes in order to add custom scopes if needed print \"Dynamic scope. Dynamic scopes:\" , dynamicScopes for dynamicScope in dynamicScopes : # Add organization name if there is scope = org_name if ( StringHelper . equalsIgnoreCase ( dynamicScope , \"org_name\" )): claims . setClaim ( \"org_name\" , \"Test Value\" ) continue # Add work phone if there is scope = work_phone return True def getApiVersion ( self ): return 1 def getSupportedClaims ( self , configurationAttributes ): return Arrays . asList ( \"org_name\" ) Script Type: Java # import java.util.List ; import java.util.Map ; import java.util.Arrays ; import java.util.ArrayList ; import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.service.custom.script.CustomScriptManager ; import io.jans.model.custom.script.type.scope.DynamicScopeType ; import io.jans.as.server.service.external.context.DynamicScopeExternalContext ; import io.jans.as.model.token.JsonWebResponse ; import io.jans.as.model.jwt.JwtClaims ; import io.jans.util.StringHelper ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class DynamicScope implements DynamicScopeType { private static final Logger log = LoggerFactory . getLogger ( CustomScriptManager . class ); @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Dynamic Scope. Initializing...\" ); log . info ( \"Dynamic Scope. Initialized\" ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Dynamic Scope. Initializing...\" ); log . info ( \"Dynamic Scope. Initialized\" ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Dynamic Scope. Destroying...\" ); log . info ( \"Dynamic Scope. Destroyed.\" ); return true ; } @Override public int getApiVersion () { return 11 ; } @Override public boolean update ( Object dynamicScopeContext , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Dynamic Scope. Updating...\" ); DynamicScopeExternalContext dynamicContext = ( DynamicScopeExternalContext ) dynamicScopeContext ; ArrayList < String > dynamicScopes = ( ArrayList < String > ) dynamicContext . getDynamicScopes (); JsonWebResponse jwt = dynamicContext . getJsonWebResponse (); JwtClaims claims = jwt . getClaims (); log . info ( \"Dynamic Scope. Dynamic scopes: \" + dynamicScopes . toString ()); for ( String dynamicScope : dynamicScopes ) { if ( StringHelper . equalsIgnoreCase ( dynamicScope , \"org_name\" )) { claims . setClaim ( \"org_name\" , \"Test Value\" ); continue ; } } return true ; } @Override public List < String > getSupportedClaims ( Map < String , SimpleCustomProperty > configurationAttributes ) { return Arrays . asList ( \"org_name\" ); } } Sample Scripts # Dynamic Permission MemberOf Attribute Organization Name Session Parameter Work Phone","title":"Dynamic Scope"},{"location":"admin/developer/scripts/dynamic-scope/#overview","text":"The dynamic scope custom script allows the authorization server to generate a list of claims (and their values) on the fly, depending on circumstances such as the ID of the client requesting it, authenticated user's session parameters, values of other users' attributes, results of some calculations implementing specific business logic and/or requests to remote APIs or databases. Claims are then returned the usual way in a response to a call to the /userinfo endpoint.","title":"Overview"},{"location":"admin/developer/scripts/dynamic-scope/#interface","text":"The dynamic scope script implements the DynamicScopeType interface. This extends methods from the base script type in addition to adding new methods:","title":"Interface"},{"location":"admin/developer/scripts/dynamic-scope/#inherited-methods","text":"Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10","title":"Inherited Methods"},{"location":"admin/developer/scripts/dynamic-scope/#new-methods","text":"Method header Method description def update(self, dynamicScopeContext, configurationAttributes) Main dynamic scope method. Peforms any needed logic, updates JSON Web Token and returns True if dynamic scope was added successfully, false otherwise. def getSupportedClaims(self, configurationAttributes) Returns an array of claims that are allowed to be added by the custom script","title":"New Methods"},{"location":"admin/developer/scripts/dynamic-scope/#objects","text":"Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes SimpleCustomProperty Map of configuration properties. Reference dynamicScopeContext Reference","title":"Objects"},{"location":"admin/developer/scripts/dynamic-scope/#use-case-add-dynamic-scope-with-the-org_name-claim","text":"This script has been adapted from the Gluu Server sample dynamic scope script","title":"Use case: Add dynamic scope with the org_name claim"},{"location":"admin/developer/scripts/dynamic-scope/#script-type-python","text":"from java.util import Arrays , ArrayList from io.jans.model.custom.script.type.scope import DynamicScopeType class DynamicScope ( DynamicScopeType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , configurationAttributes ): print \"Dynamic scope. Initialization\" print \"Dynamic scope. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"Dynamic scope. Destroy\" print \"Dynamic scope. Destroyed successfully\" return True def update ( self , dynamicScopeContext , configurationAttributes ): print \"Dynamic scope. Update method\" dynamicScopes = dynamicScopeContext . getDynamicScopes () user = dynamicScopeContext . getUser () jsonToken = dynamicScopeContext . getJsonToken () claims = jsonToken . getClaims () # Iterate through list of dynamic scopes in order to add custom scopes if needed print \"Dynamic scope. Dynamic scopes:\" , dynamicScopes for dynamicScope in dynamicScopes : # Add organization name if there is scope = org_name if ( StringHelper . equalsIgnoreCase ( dynamicScope , \"org_name\" )): claims . setClaim ( \"org_name\" , \"Test Value\" ) continue # Add work phone if there is scope = work_phone return True def getApiVersion ( self ): return 1 def getSupportedClaims ( self , configurationAttributes ): return Arrays . asList ( \"org_name\" )","title":"Script Type: Python"},{"location":"admin/developer/scripts/dynamic-scope/#script-type-java","text":"import java.util.List ; import java.util.Map ; import java.util.Arrays ; import java.util.ArrayList ; import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.service.custom.script.CustomScriptManager ; import io.jans.model.custom.script.type.scope.DynamicScopeType ; import io.jans.as.server.service.external.context.DynamicScopeExternalContext ; import io.jans.as.model.token.JsonWebResponse ; import io.jans.as.model.jwt.JwtClaims ; import io.jans.util.StringHelper ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class DynamicScope implements DynamicScopeType { private static final Logger log = LoggerFactory . getLogger ( CustomScriptManager . class ); @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Dynamic Scope. Initializing...\" ); log . info ( \"Dynamic Scope. Initialized\" ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Dynamic Scope. Initializing...\" ); log . info ( \"Dynamic Scope. Initialized\" ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Dynamic Scope. Destroying...\" ); log . info ( \"Dynamic Scope. Destroyed.\" ); return true ; } @Override public int getApiVersion () { return 11 ; } @Override public boolean update ( Object dynamicScopeContext , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Dynamic Scope. Updating...\" ); DynamicScopeExternalContext dynamicContext = ( DynamicScopeExternalContext ) dynamicScopeContext ; ArrayList < String > dynamicScopes = ( ArrayList < String > ) dynamicContext . getDynamicScopes (); JsonWebResponse jwt = dynamicContext . getJsonWebResponse (); JwtClaims claims = jwt . getClaims (); log . info ( \"Dynamic Scope. Dynamic scopes: \" + dynamicScopes . toString ()); for ( String dynamicScope : dynamicScopes ) { if ( StringHelper . equalsIgnoreCase ( dynamicScope , \"org_name\" )) { claims . setClaim ( \"org_name\" , \"Test Value\" ); continue ; } } return true ; } @Override public List < String > getSupportedClaims ( Map < String , SimpleCustomProperty > configurationAttributes ) { return Arrays . asList ( \"org_name\" ); } }","title":"Script Type: Java"},{"location":"admin/developer/scripts/dynamic-scope/#sample-scripts","text":"Dynamic Permission MemberOf Attribute Organization Name Session Parameter Work Phone","title":"Sample Scripts"},{"location":"admin/developer/scripts/end-session/","tags":["administration","developer","scripts","EndSession"],"text":"Overview # End Session scripts allows the administrator to modify HTML response for OpenID Connect Frontchannel logout ( spec ). Interface # The end session script implements the EndSessionType interface. This extends methods from the base script type in addition to adding new methods: Inherited Methods # Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10 New Methods # Method header Method description def getFrontchannelHtml(self, context) Returns string, it must be valid HTML (with iframes according to specification ). This method is called on /end_session after actual session is killed and authorization server constructs HTML to return to RP. Objects # Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes context Reference Use case: Dummy Logout Page # This script has been adapted from the Gluu Server sample end session script . Note The example script is a proof of concept, as the getFrontchannelHtml() must return an actual HTML string. Script Type: Python # from io.jans.model.custom.script.type.logout import EndSessionType from java.lang import String class EndSession ( EndSessionType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"EndSession script. Initializing ...\" print \"EndSession script. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"EndSession script. Destroying ...\" print \"EndSession script. Destroyed successfully\" return True def getApiVersion ( self ): return 11 # Must return an HTML string def getFrontchannelHtml ( self , context ): return \"\" Script Type: Java # import java.util.Map ; import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.model.custom.script.type.logout.EndSessionType ; import io.jans.service.custom.script.CustomScriptManager ; import io.jans.as.server.service.external.context.EndSessionContext ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class EndSession implements EndSessionType { private static final Logger log = LoggerFactory . getLogger ( CustomScriptManager . class ); @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"ROPC Script. Initializing...\" ); log . info ( \"ROPC Script. Initialized\" ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"ROPC Script. Initializing...\" ); log . info ( \"ROPC Script. Initialized\" ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"ROPC Script. Destroying...\" ); log . info ( \"ROPC Script. Destroyed.\" ); return true ; } @Override public int getApiVersion () { return 11 ; } @Override public String getFrontchannelHtml ( Object context ) { EndSessionContext endSessionContext = ( EndSessionContext ) context ; // Must return a real HTML string as per OIDC front channel logout spec return \"\" ; } }","title":"End Session"},{"location":"admin/developer/scripts/end-session/#overview","text":"End Session scripts allows the administrator to modify HTML response for OpenID Connect Frontchannel logout ( spec ).","title":"Overview"},{"location":"admin/developer/scripts/end-session/#interface","text":"The end session script implements the EndSessionType interface. This extends methods from the base script type in addition to adding new methods:","title":"Interface"},{"location":"admin/developer/scripts/end-session/#inherited-methods","text":"Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10","title":"Inherited Methods"},{"location":"admin/developer/scripts/end-session/#new-methods","text":"Method header Method description def getFrontchannelHtml(self, context) Returns string, it must be valid HTML (with iframes according to specification ). This method is called on /end_session after actual session is killed and authorization server constructs HTML to return to RP.","title":"New Methods"},{"location":"admin/developer/scripts/end-session/#objects","text":"Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes context Reference","title":"Objects"},{"location":"admin/developer/scripts/end-session/#use-case-dummy-logout-page","text":"This script has been adapted from the Gluu Server sample end session script . Note The example script is a proof of concept, as the getFrontchannelHtml() must return an actual HTML string.","title":"Use case: Dummy Logout Page"},{"location":"admin/developer/scripts/end-session/#script-type-python","text":"from io.jans.model.custom.script.type.logout import EndSessionType from java.lang import String class EndSession ( EndSessionType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"EndSession script. Initializing ...\" print \"EndSession script. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"EndSession script. Destroying ...\" print \"EndSession script. Destroyed successfully\" return True def getApiVersion ( self ): return 11 # Must return an HTML string def getFrontchannelHtml ( self , context ): return \"\"","title":"Script Type: Python"},{"location":"admin/developer/scripts/end-session/#script-type-java","text":"import java.util.Map ; import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.model.custom.script.type.logout.EndSessionType ; import io.jans.service.custom.script.CustomScriptManager ; import io.jans.as.server.service.external.context.EndSessionContext ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class EndSession implements EndSessionType { private static final Logger log = LoggerFactory . getLogger ( CustomScriptManager . class ); @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"ROPC Script. Initializing...\" ); log . info ( \"ROPC Script. Initialized\" ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"ROPC Script. Initializing...\" ); log . info ( \"ROPC Script. Initialized\" ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"ROPC Script. Destroying...\" ); log . info ( \"ROPC Script. Destroyed.\" ); return true ; } @Override public int getApiVersion () { return 11 ; } @Override public String getFrontchannelHtml ( Object context ) { EndSessionContext endSessionContext = ( EndSessionContext ) context ; // Must return a real HTML string as per OIDC front channel logout spec return \"\" ; } }","title":"Script Type: Java"},{"location":"admin/developer/scripts/fido2-extension/","tags":["administration","developer","scripts","fido2","Fido2Interception"],"text":"Overview # FIDO2 implements attestation and assertion with next endpoints: https://<myjans-server>/jans-fido2/restv1/attestation/options (register) https://<myjans-server>/jans-fido2/restv1/attestation/result (verify registration) https://<myjans-server>/jans-fido2/restv1/assertion/options (authenticate) https://<myjans-server>/jans-fido2/restv1/assertion/result (verify authentication) each one can be customized just in the moment the endpoint is called, just before to execute the method as usual. You could execute validations, verifications, and modify the params received. Interface # The Fido2 extension script implements the Fido2ExtensionType interface. This extends methods from the base script type in addition to adding new methods: Inherited Methods # Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10 New Methods # Method header Method description def registerAttestationStart(self, paramAsJsonNode, context) This method is called in Attestation register endpoint before start the registration process. Method 'throwBadRequestException' could be used to create a BadRequest Exception Response. def registerAttestationFinish(self, paramAsJsonNode, context) This method is called in Attestation register endpoint after start the registration process. Method 'throwBadRequestException' could be used to create a BadRequest Exception Response. def verifyAttestationStart(self, paramAsJsonNode, context) This method is called in Attestation verify endpoint before finish the registration verification process. Method 'throwBadRequestException' could be used to create a BadRequest Exception Response. def verifyAttestationFinish(self, paramAsJsonNode, context) This method is called in Attestation verify endpoint after finish the registration verification process. Method 'throwBadRequestException' could be used to create a BadRequest Exception Response. def authenticateAssertionStart(self, paramAsJsonNode, context) This method is called in Assertion authenticate endpoint before start the authentication process. Method 'throwBadRequestException' could be used to create a BadRequest Exception Response. def authenticateAssertionFinish(self, paramAsJsonNode, context) This method is called in Assertion authenticate endpoint after start the authentication process. Method 'throwBadRequestException' could be used to create a BadRequest Exception Response. def verifyAssertionStart(self, paramAsJsonNode, context) This method is called in Assertion verify endpoint before finish the authentication verification process. Method 'throwBadRequestException' could be used to create a BadRequest Exception Response. def verifyAssertionFinish(self, paramAsJsonNode, context) This method is called in Assertion verify endpoint after finish the authentication verification process. Method 'throwBadRequestException' could be used to create a BadRequest Exception Response. Objects # Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes SimpleCustomProperty Map of configuration properties. Reference context Reference Use case: Dummy Fido2 Interception Form # This script has been adapted from the Jans Server sample fido2 interception script . Script Type: Python # # Janssen Project software is available under the Apache 2.0 License (2004). See http://www.apache.org/licenses/ for full text. # Copyright (c) 2023, Janssen Project # # Author: Jorge Munoz # Author: Yuriy Movchan # from io.jans.service.cdi.util import CdiUtil from io.jans.model.custom.script.type.fido2 import Fido2ExtensionType from io.jans.fido2.service.operation import AttestationService from io.jans.fido2.service.operation import AssertionService from io.jans.util import StringHelper from org.json import JSONObject from com.fasterxml.jackson.databind import JsonNode from org.apache.logging.log4j import ThreadContext from io.jans.fido2.model.u2f.error import Fido2ErrorResponseFactory from io.jans.fido2.model.u2f.error import Fido2ErrorResponseType from io.jans.as.model.config import Constants from java.lang import String class Fido2Extension ( Fido2ExtensionType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"Fido2Extension. Initialization\" print \"Fido2Extension. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"Fido2Extension. Destroy\" print \"Fido2Extension. Destroyed successfully\" return True def getApiVersion ( self ): return 11 # To generate a bad request WebApplicationException giving a message. This method is to be called inside (interceptRegisterAttestation, interceptVerifyAttestation, interceptAuthenticateAssertion, interceptVerifyAssertion) def throwBadRequestException ( self , title , message , context ): print \"Fido2Extension. Setting Bad request exception\" errorClaimException = Fido2ErrorResponseFactory . createBadRequestException ( Fido2ErrorResponseType . BAD_REQUEST_INTERCEPTION , title , message , ThreadContext . get ( Constants . CORRELATION_ID_HEADER )) context . setWebApplicationException ( errorClaimException ) # This method is called in Attestation register endpoint before start the registration process def registerAttestationStart ( self , paramAsJsonNode , context ): print \"Fido2Extension. registerAttestationStart\" attestationService = CdiUtil . bean ( AttestationService ) return True # This method is called in Attestation register endpoint after start the registration process def registerAttestationFinish ( self , paramAsJsonNode , context ): print \"Fido2Extension. registerAttestationFinish\" attestationService = CdiUtil . bean ( AttestationService ) return True # This method is called in Attestation verify endpoint before finish the registration verification process def verifyAttestationStart ( self , paramAsJsonNode , context ): print \"Fido2Extension. verifyAttestationStart\" attestationService = CdiUtil . bean ( AttestationService ) return True # This method is called in Attestation verify endpoint after finish the registration verification process def verifyAttestationFinish ( self , paramAsJsonNode , context ): print \"Fido2Extension. verifyAttestationFinish\" attestationService = CdiUtil . bean ( AttestationService ) return True # This method is called in Assertion authenticate endpoint before start the authentication process def authenticateAssertionStart ( self , paramAsJsonNode , context ): print \"Fido2Extension. authenticateAssertionStart\" assertionService = CdiUtil . bean ( AssertionService ) if paramAsJsonNode . hasNonNull ( \"username\" ): print \"Fido2Extension. Username: ' %s '\" % paramAsJsonNode . get ( \"username\" ) . asText () if paramAsJsonNode . get ( \"username\" ) . asText () == 'test_user' : self . throwBadRequestException ( \"Fido2Extension authenticateAssertionStart : test_user\" , \"Description Error from script : test_user\" , context ) else : self . throwBadRequestException ( \"Fido2Extension authenticateAssertionStart. Username is missing.\" , \"Description Error from script. Username is missing.\" , context ) return True # This method is called in Assertion authenticate endpoint after start the authentication process def authenticateAssertionFinish ( self , paramAsJsonNode , context ): print \"Fido2Extension. authenticateAssertionFinish\" assertionService = CdiUtil . bean ( AssertionService ) return True # This method is called in Assertion verify endpoint before finish the authentication verification process def verifyAssertionStart ( self , paramAsJsonNode , context ): print \"Fido2Extension. verifyAssertionStart\" assertionService = CdiUtil . bean ( AssertionService ) return True # This method is called in Assertion verify endpoint after finish the authentication verification process def verifyAssertionFinish ( self , paramAsJsonNode , context ): print \"Fido2Extension. verifyAssertionFinish\" assertionService = CdiUtil . bean ( AssertionService ) return True Script Type: Java # import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.model.custom.script.type.fido2.Fido2ExtensionType ; import io.jans.service.custom.script.CustomScriptManager ; import io.jans.fido2.service.external.context.ExternalFido2Context ; import com.fasterxml.jackson.databind.JsonNode ; import org.apache.logging.log4j.ThreadContext ; import org.jboss.resteasy.spi.NoLogWebApplicationException ; import java.util.Map ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class Fido2Extension implements Fido2ExtensionType { private static final Logger log = LoggerFactory . getLogger ( CustomScriptManager . class ); @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Fido2Interception Script. Initializing...\" ); log . info ( \"Fido2Interception Script. Initialized\" ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Fido2Interception Script. Initializing...\" ); log . info ( \"Fido2Interception Script. Initialized\" ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Fido2Interception Script. Destroying...\" ); log . info ( \"Fido2Interception Script. Destroyed.\" ); return true ; } @Override public int getApiVersion () { return 11 ; } @Override public boolean registerAttestationStart ( JsonNode paramsAsJsonNode , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception Script. Attestation Register (start)...\" ); return true ; } @Override public boolean registerAttestationFinish ( JsonNode paramsAsJsonNode , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception Script. Attestation Register (finish)...\" ); return true ; } @Override public boolean verifyAttestationStart ( JsonNode paramsAsJsonNode , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception Script. Attestation Verify (start)...\" ); return true ; } @Override public boolean verifyAttestationFinish ( JsonNode paramsAsJsonNode , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception Script. Attestation Verify (finish)...\" ); return true ; } @Override public boolean authenticateAssertionStart ( JsonNode paramsAsJsonNode , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception Script. Assertion Authenticate (start)...\" ); JsonNode jsonNodeUser = paramsAsJsonNode . get ( \"username\" ); if ( jsonNodeUser != null ) { log . info ( \"Fido2Interception. printing username: {}\" , jsonNodeUser . asText ()); if ( jsonNodeUser . asText (). equals ( \"test_user\" )) { throwBadRequestException ( \"Fido2Interception interceptAuthenticateAssertion : test_user\" , \"Description Error from script : test_user\" , context ); } } return true ; } @Override public boolean authenticateAssertionFinish ( JsonNode paramsAsJsonNode , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception Script. Assertion Authenticate (finish)...\" ); return true ; } @Override public boolean verifyAssertionStart ( JsonNode paramsAsJsonNode , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception Script. Assertion Verify (start)...\" ); return true ; } @Override public boolean verifyAssertionFinish ( JsonNode paramsAsJsonNode , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception Script. Assertion Verify (finish)...\" ); return true ; } private void throwBadRequestException ( String title , String message , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception. setting Bad request exception\" ); WebApplicationException errorClaimException = Fido2ErrorResponseFactory . createBadRequestException ( Fido2ErrorResponseType . BAD_REQUEST_INTERCEPTION , title , message , ThreadContext . get ( Constants . CORRELATION_ID_HEADER )); context . setWebApplicationException (( NoLogWebApplicationException ) errorClaimException ); } }","title":"Fido2 extension"},{"location":"admin/developer/scripts/fido2-extension/#overview","text":"FIDO2 implements attestation and assertion with next endpoints: https://<myjans-server>/jans-fido2/restv1/attestation/options (register) https://<myjans-server>/jans-fido2/restv1/attestation/result (verify registration) https://<myjans-server>/jans-fido2/restv1/assertion/options (authenticate) https://<myjans-server>/jans-fido2/restv1/assertion/result (verify authentication) each one can be customized just in the moment the endpoint is called, just before to execute the method as usual. You could execute validations, verifications, and modify the params received.","title":"Overview"},{"location":"admin/developer/scripts/fido2-extension/#interface","text":"The Fido2 extension script implements the Fido2ExtensionType interface. This extends methods from the base script type in addition to adding new methods:","title":"Interface"},{"location":"admin/developer/scripts/fido2-extension/#inherited-methods","text":"Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10","title":"Inherited Methods"},{"location":"admin/developer/scripts/fido2-extension/#new-methods","text":"Method header Method description def registerAttestationStart(self, paramAsJsonNode, context) This method is called in Attestation register endpoint before start the registration process. Method 'throwBadRequestException' could be used to create a BadRequest Exception Response. def registerAttestationFinish(self, paramAsJsonNode, context) This method is called in Attestation register endpoint after start the registration process. Method 'throwBadRequestException' could be used to create a BadRequest Exception Response. def verifyAttestationStart(self, paramAsJsonNode, context) This method is called in Attestation verify endpoint before finish the registration verification process. Method 'throwBadRequestException' could be used to create a BadRequest Exception Response. def verifyAttestationFinish(self, paramAsJsonNode, context) This method is called in Attestation verify endpoint after finish the registration verification process. Method 'throwBadRequestException' could be used to create a BadRequest Exception Response. def authenticateAssertionStart(self, paramAsJsonNode, context) This method is called in Assertion authenticate endpoint before start the authentication process. Method 'throwBadRequestException' could be used to create a BadRequest Exception Response. def authenticateAssertionFinish(self, paramAsJsonNode, context) This method is called in Assertion authenticate endpoint after start the authentication process. Method 'throwBadRequestException' could be used to create a BadRequest Exception Response. def verifyAssertionStart(self, paramAsJsonNode, context) This method is called in Assertion verify endpoint before finish the authentication verification process. Method 'throwBadRequestException' could be used to create a BadRequest Exception Response. def verifyAssertionFinish(self, paramAsJsonNode, context) This method is called in Assertion verify endpoint after finish the authentication verification process. Method 'throwBadRequestException' could be used to create a BadRequest Exception Response.","title":"New Methods"},{"location":"admin/developer/scripts/fido2-extension/#objects","text":"Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes SimpleCustomProperty Map of configuration properties. Reference context Reference","title":"Objects"},{"location":"admin/developer/scripts/fido2-extension/#use-case-dummy-fido2-interception-form","text":"This script has been adapted from the Jans Server sample fido2 interception script .","title":"Use case: Dummy Fido2 Interception Form"},{"location":"admin/developer/scripts/fido2-extension/#script-type-python","text":"# Janssen Project software is available under the Apache 2.0 License (2004). See http://www.apache.org/licenses/ for full text. # Copyright (c) 2023, Janssen Project # # Author: Jorge Munoz # Author: Yuriy Movchan # from io.jans.service.cdi.util import CdiUtil from io.jans.model.custom.script.type.fido2 import Fido2ExtensionType from io.jans.fido2.service.operation import AttestationService from io.jans.fido2.service.operation import AssertionService from io.jans.util import StringHelper from org.json import JSONObject from com.fasterxml.jackson.databind import JsonNode from org.apache.logging.log4j import ThreadContext from io.jans.fido2.model.u2f.error import Fido2ErrorResponseFactory from io.jans.fido2.model.u2f.error import Fido2ErrorResponseType from io.jans.as.model.config import Constants from java.lang import String class Fido2Extension ( Fido2ExtensionType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"Fido2Extension. Initialization\" print \"Fido2Extension. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"Fido2Extension. Destroy\" print \"Fido2Extension. Destroyed successfully\" return True def getApiVersion ( self ): return 11 # To generate a bad request WebApplicationException giving a message. This method is to be called inside (interceptRegisterAttestation, interceptVerifyAttestation, interceptAuthenticateAssertion, interceptVerifyAssertion) def throwBadRequestException ( self , title , message , context ): print \"Fido2Extension. Setting Bad request exception\" errorClaimException = Fido2ErrorResponseFactory . createBadRequestException ( Fido2ErrorResponseType . BAD_REQUEST_INTERCEPTION , title , message , ThreadContext . get ( Constants . CORRELATION_ID_HEADER )) context . setWebApplicationException ( errorClaimException ) # This method is called in Attestation register endpoint before start the registration process def registerAttestationStart ( self , paramAsJsonNode , context ): print \"Fido2Extension. registerAttestationStart\" attestationService = CdiUtil . bean ( AttestationService ) return True # This method is called in Attestation register endpoint after start the registration process def registerAttestationFinish ( self , paramAsJsonNode , context ): print \"Fido2Extension. registerAttestationFinish\" attestationService = CdiUtil . bean ( AttestationService ) return True # This method is called in Attestation verify endpoint before finish the registration verification process def verifyAttestationStart ( self , paramAsJsonNode , context ): print \"Fido2Extension. verifyAttestationStart\" attestationService = CdiUtil . bean ( AttestationService ) return True # This method is called in Attestation verify endpoint after finish the registration verification process def verifyAttestationFinish ( self , paramAsJsonNode , context ): print \"Fido2Extension. verifyAttestationFinish\" attestationService = CdiUtil . bean ( AttestationService ) return True # This method is called in Assertion authenticate endpoint before start the authentication process def authenticateAssertionStart ( self , paramAsJsonNode , context ): print \"Fido2Extension. authenticateAssertionStart\" assertionService = CdiUtil . bean ( AssertionService ) if paramAsJsonNode . hasNonNull ( \"username\" ): print \"Fido2Extension. Username: ' %s '\" % paramAsJsonNode . get ( \"username\" ) . asText () if paramAsJsonNode . get ( \"username\" ) . asText () == 'test_user' : self . throwBadRequestException ( \"Fido2Extension authenticateAssertionStart : test_user\" , \"Description Error from script : test_user\" , context ) else : self . throwBadRequestException ( \"Fido2Extension authenticateAssertionStart. Username is missing.\" , \"Description Error from script. Username is missing.\" , context ) return True # This method is called in Assertion authenticate endpoint after start the authentication process def authenticateAssertionFinish ( self , paramAsJsonNode , context ): print \"Fido2Extension. authenticateAssertionFinish\" assertionService = CdiUtil . bean ( AssertionService ) return True # This method is called in Assertion verify endpoint before finish the authentication verification process def verifyAssertionStart ( self , paramAsJsonNode , context ): print \"Fido2Extension. verifyAssertionStart\" assertionService = CdiUtil . bean ( AssertionService ) return True # This method is called in Assertion verify endpoint after finish the authentication verification process def verifyAssertionFinish ( self , paramAsJsonNode , context ): print \"Fido2Extension. verifyAssertionFinish\" assertionService = CdiUtil . bean ( AssertionService ) return True","title":"Script Type: Python"},{"location":"admin/developer/scripts/fido2-extension/#script-type-java","text":"import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.model.custom.script.type.fido2.Fido2ExtensionType ; import io.jans.service.custom.script.CustomScriptManager ; import io.jans.fido2.service.external.context.ExternalFido2Context ; import com.fasterxml.jackson.databind.JsonNode ; import org.apache.logging.log4j.ThreadContext ; import org.jboss.resteasy.spi.NoLogWebApplicationException ; import java.util.Map ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class Fido2Extension implements Fido2ExtensionType { private static final Logger log = LoggerFactory . getLogger ( CustomScriptManager . class ); @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Fido2Interception Script. Initializing...\" ); log . info ( \"Fido2Interception Script. Initialized\" ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Fido2Interception Script. Initializing...\" ); log . info ( \"Fido2Interception Script. Initialized\" ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Fido2Interception Script. Destroying...\" ); log . info ( \"Fido2Interception Script. Destroyed.\" ); return true ; } @Override public int getApiVersion () { return 11 ; } @Override public boolean registerAttestationStart ( JsonNode paramsAsJsonNode , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception Script. Attestation Register (start)...\" ); return true ; } @Override public boolean registerAttestationFinish ( JsonNode paramsAsJsonNode , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception Script. Attestation Register (finish)...\" ); return true ; } @Override public boolean verifyAttestationStart ( JsonNode paramsAsJsonNode , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception Script. Attestation Verify (start)...\" ); return true ; } @Override public boolean verifyAttestationFinish ( JsonNode paramsAsJsonNode , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception Script. Attestation Verify (finish)...\" ); return true ; } @Override public boolean authenticateAssertionStart ( JsonNode paramsAsJsonNode , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception Script. Assertion Authenticate (start)...\" ); JsonNode jsonNodeUser = paramsAsJsonNode . get ( \"username\" ); if ( jsonNodeUser != null ) { log . info ( \"Fido2Interception. printing username: {}\" , jsonNodeUser . asText ()); if ( jsonNodeUser . asText (). equals ( \"test_user\" )) { throwBadRequestException ( \"Fido2Interception interceptAuthenticateAssertion : test_user\" , \"Description Error from script : test_user\" , context ); } } return true ; } @Override public boolean authenticateAssertionFinish ( JsonNode paramsAsJsonNode , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception Script. Assertion Authenticate (finish)...\" ); return true ; } @Override public boolean verifyAssertionStart ( JsonNode paramsAsJsonNode , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception Script. Assertion Verify (start)...\" ); return true ; } @Override public boolean verifyAssertionFinish ( JsonNode paramsAsJsonNode , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception Script. Assertion Verify (finish)...\" ); return true ; } private void throwBadRequestException ( String title , String message , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception. setting Bad request exception\" ); WebApplicationException errorClaimException = Fido2ErrorResponseFactory . createBadRequestException ( Fido2ErrorResponseType . BAD_REQUEST_INTERCEPTION , title , message , ThreadContext . get ( Constants . CORRELATION_ID_HEADER )); context . setWebApplicationException (( NoLogWebApplicationException ) errorClaimException ); } }","title":"Script Type: Java"},{"location":"admin/developer/scripts/id-generator/","tags":["administration","developer","scripts","IdGenerator"],"text":"Overview # By default Janssen Auth Server uses an internal method to generate unique identifiers for new person/client, etc. entries. In most cases the format of the ID is: '!' + idType.getInum() + '!' + four_random_HEX_characters + '.' + four_random_HEX_characters. The ID generation script enables an admin to implement custom ID generation rules. Interface # The ID Generator script implements the IdGeneratorType interface. This extends methods from the base script type in addition to adding new methods: Inherited Methods # Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10 New Methods # Method header Method description def generateId(self, appId, idType, idPrefix, configurationAttributes) appId is application ID, idType is ID Type, idPrefix is ID Prefix Objects # Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes Use case: Sample ID generator # This script has been adapted from the Gluu Server sample ID generator script . Script Type: Python # from io.jans.model.custom.script.type.id import IdGeneratorType import java class IdGenerator ( IdGeneratorType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , configurationAttributes ): print \"Id generator. Initialization\" print \"Id generator. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"Id generator. Destroy\" print \"Id generator. Destroyed successfully\" return True def getApiVersion ( self ): return 1 # Id generator init method # appId is application Id # idType is Id Type # idPrefix is Id Prefix def generateId ( self , appId , idType , idPrefix , configurationAttributes ): print \"Id generator. Generate Id\" print \"Id generator. Generate Id. AppId: '\" , appId , \"', IdType: '\" , idType , \"', IdPrefix: '\" , idPrefix , \"'\" # Return None or empty string to trigger default Id generation method return None Script Type: Java # import java.util.Map ; import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.model.custom.script.type.id.IdGeneratorType ; import io.jans.service.custom.script.CustomScriptManager ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class EndSession implements EndSessionType { private static final Logger log = LoggerFactory . getLogger ( CustomScriptManager . class ); @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"ID Generator. Initializing...\" ); log . info ( \"ID Generator. Initialized\" ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"ID Generator. Initializing...\" ); log . info ( \"ID Generator. Initialized\" ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"ID Generator. Destroying...\" ); log . info ( \"ID Generator. Destroyed.\" ); return true ; } @Override public int getApiVersion () { return 11 ; } @Override public String generateId ( String appId , String idType , String idPrefix , Map < String SimpleCustomProperty > configurationAttributes ) { log . info ( \"ID Generator. Generate Id\" ); // Return None or empty string to trigger default Id generation method return \"\" ; } }","title":"ID Generator"},{"location":"admin/developer/scripts/id-generator/#overview","text":"By default Janssen Auth Server uses an internal method to generate unique identifiers for new person/client, etc. entries. In most cases the format of the ID is: '!' + idType.getInum() + '!' + four_random_HEX_characters + '.' + four_random_HEX_characters. The ID generation script enables an admin to implement custom ID generation rules.","title":"Overview"},{"location":"admin/developer/scripts/id-generator/#interface","text":"The ID Generator script implements the IdGeneratorType interface. This extends methods from the base script type in addition to adding new methods:","title":"Interface"},{"location":"admin/developer/scripts/id-generator/#inherited-methods","text":"Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10","title":"Inherited Methods"},{"location":"admin/developer/scripts/id-generator/#new-methods","text":"Method header Method description def generateId(self, appId, idType, idPrefix, configurationAttributes) appId is application ID, idType is ID Type, idPrefix is ID Prefix","title":"New Methods"},{"location":"admin/developer/scripts/id-generator/#objects","text":"Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes","title":"Objects"},{"location":"admin/developer/scripts/id-generator/#use-case-sample-id-generator","text":"This script has been adapted from the Gluu Server sample ID generator script .","title":"Use case: Sample ID generator"},{"location":"admin/developer/scripts/id-generator/#script-type-python","text":"from io.jans.model.custom.script.type.id import IdGeneratorType import java class IdGenerator ( IdGeneratorType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , configurationAttributes ): print \"Id generator. Initialization\" print \"Id generator. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"Id generator. Destroy\" print \"Id generator. Destroyed successfully\" return True def getApiVersion ( self ): return 1 # Id generator init method # appId is application Id # idType is Id Type # idPrefix is Id Prefix def generateId ( self , appId , idType , idPrefix , configurationAttributes ): print \"Id generator. Generate Id\" print \"Id generator. Generate Id. AppId: '\" , appId , \"', IdType: '\" , idType , \"', IdPrefix: '\" , idPrefix , \"'\" # Return None or empty string to trigger default Id generation method return None","title":"Script Type: Python"},{"location":"admin/developer/scripts/id-generator/#script-type-java","text":"import java.util.Map ; import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.model.custom.script.type.id.IdGeneratorType ; import io.jans.service.custom.script.CustomScriptManager ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class EndSession implements EndSessionType { private static final Logger log = LoggerFactory . getLogger ( CustomScriptManager . class ); @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"ID Generator. Initializing...\" ); log . info ( \"ID Generator. Initialized\" ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"ID Generator. Initializing...\" ); log . info ( \"ID Generator. Initialized\" ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"ID Generator. Destroying...\" ); log . info ( \"ID Generator. Destroyed.\" ); return true ; } @Override public int getApiVersion () { return 11 ; } @Override public String generateId ( String appId , String idType , String idPrefix , Map < String SimpleCustomProperty > configurationAttributes ) { log . info ( \"ID Generator. Generate Id\" ); // Return None or empty string to trigger default Id generation method return \"\" ; } }","title":"Script Type: Java"},{"location":"admin/developer/scripts/id-token/","tags":["administration","developer","scripts"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Id token"},{"location":"admin/developer/scripts/id-token/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/developer/scripts/id-token/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/developer/scripts/id-token/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/developer/scripts/introspection/","tags":["administration","developer","scripts","Introspection"],"text":"Introspection Script Guide # Overview # In OAuth 2.0 [RFC6749], the contents of tokens are opaque to clients. However, there is still a large amount of metadata that may be attached to a token, such as its current validity, approved scopes, and information about the context in which the token was issued. These pieces of information are often vital to protected resources making authorization decisions based on the tokens being presented. Token introspection allows a protected resource to query this information. Introspection scripts allows to modify response of Introspection Endpoint spec and present additional meta information surrounding the token. Interface # Introspection script should be associated with client (used for obtaining the token) in order to be run. Otherwise it's possible to set introspectionScriptBackwardCompatibility global AS configuration property to true, in this case AS will run all scripts (ignoring client configuration). Methods # The introspection interception script extends the base script type with the init , destroy and getApiVersion methods: Inherited Methods Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10 The configurationAttributes parameter is java.util.Map<String, SimpleCustomProperty> . The introspection interception script also adds the following method(s): Method def modifyResponse(self, responseAsJsonObject, context) Method Paramater responseAsJsonObject is org.codehaus.jettison.json.JSONObject context is io.jans.as.service.external.context.ExternalIntrospectionContext Snippet # # Returns boolean , true - apply introspection method , false - ignore it . # This method is called after introspection response is ready . This method can modify introspection response . # Note : # responseAsJsonObject - is org . codehaus . jettison . json . JSONObject , you can use any method to manipulate json # context is reference of io . jans . as . server . service . external . context . ExternalIntrospectionContext ( in https : // github . com / JanssenProject project ) def modifyResponse ( self , responseAsJsonObject , context ) : responseAsJsonObject . accumulate ( \"key_from_script\" , \"value_from_script\" ) return True It is also possible to run introspection script during access_token creation as JWT. It can be controlled by run_introspection_script_before_jwt_creation client property which is set to false by default. If run_introspection_script_before_jwt_creation set to true and access_token_as_jwt set to true then introspection script will be run before JWT ( access_token ) is created and all JSON values will be transfered to JWT. Also context inside script has additional method which allows to cancel transfering of claims if needed context.setTranferIntrospectionPropertiesIntoJwtClaims(false) Common Use Cases # Script Type: Python # Retrieve Grant, Session and User Details from Access Token # Following sample code snippet shows how to work backwards from an AccessToken to Grant, Session and User information. from io.jans.model.custom.script.type.introspection import IntrospectionType from io.jans.as.server.service import SessionIdService from io.jans.service.cdi.util import CdiUtil class Introspection ( IntrospectionType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"Introspection script. Initializing ...\" print \"Introspection script. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"Introspection script. Destroying ...\" print \"Introspection script. Destroyed successfully\" return True def getApiVersion ( self ): return 11 # Returns boolean, true - apply introspection method, false - ignore it. # This method is called after introspection response is ready. This method can modify introspection response. # Note : # responseAsJsonObject - is org.codehaus.jettison.json.JSONObject, you can use any method to manipulate json # context is reference of io.jans.as.server.service.external.context.ExternalIntrospectionContext (in https://github.com/JanssenProject project, ) def modifyResponse ( self , responseAsJsonObject , context ): authorizationGrant = context . getTokenGrant () if authorizationGrant is None : print \"Introspection. Failed to load authorization grant by context\" return False # Put user_id into response responseAsJsonObject . accumulate ( \"user_id\" , authorizationGrant . getUser () . getUserId ()) # Put custom parameters into response sessionDn = authorizationGrant . getSessionDn () if sessionDn is None : # There is no session print \"Introspection. Failed to load session DN\" return True # Return session_id responseAsJsonObject . accumulate ( \"session_id\" , sessionDn ) sessionIdService = CdiUtil . bean ( SessionIdService ) session = sessionIdService . getSessionById ( sessionDn , False ) if session is None : print \"Introspection. Failed to load session ' %s '\" % sessionDn return True sessionAttributes = session . getSessionAttributes () if sessionAttributes is None : # There is no session attributes return True # Append custom claims if sessionAttributes . containsKey ( \"custom1\" ): responseAsJsonObject . accumulate ( \"custom1\" , sessionAttributes . get ( \"custom1\" )) if sessionAttributes . containsKey ( \"custom2\" ): responseAsJsonObject . accumulate ( \"custom2\" , sessionAttributes . get ( \"custom2\" )) return True Script Type: Java # Retrieve Grant, Session and User Details from Access Token # Following sample code snippet shows how to work backwards from an AccessToken to Grant, Session and User information. import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.model.custom.script.type.introspection.IntrospectionType ; import io.jans.service.custom.script.CustomScriptManager ; import io.jans.as.server.service.external.context.ExternalIntrospectionContext ; import io.jans.as.server.model.common.AuthorizationGrant ; import io.jans.as.server.service.SessionIdService ; import io.jans.service.cdi.util.CdiUtil ; import io.jans.as.server.model.common.SessionId ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; import org.json.JSONObject ; import java.util.Map ; public class Introspection implements IntrospectionType { private static final Logger log = LoggerFactory . getLogger ( Introspection . class ); private static final Logger scriptLogger = LoggerFactory . getLogger ( CustomScriptManager . class ); @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Init of Introspection Java custom script\" ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Init of Introspection Java custom script\" ); scriptLogger . info ( \"Introspection Java script. Initializing ...\" ); scriptLogger . info ( \"Introspection Java script. Initialized successfully\" ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Destroy of Introspection Java custom script\" ); scriptLogger . info ( \"Introspection Java script. Destroying ...\" ); scriptLogger . info ( \"Introspection Java script. Destroyed successfully\" ); return true ; } @Override public int getApiVersion () { return 11 ; } // Returns boolean , true - apply introspection method , false - ignore it . // This method is called after introspection response is ready . This method can modify introspection response . // Note : // responseAsJsonObject - is org . json . JSONObject , you can use any method to manipulate json // context is reference of io . jans . as . server . service . external . context . ExternalIntrospectionContext ( in https : // github . com / JanssenProject project , ) @Override public boolean modifyResponse ( Object responseAsJsonObject , Object context ) { JSONObject response = ( JSONObject ) responseAsJsonObject ; ExternalIntrospectionContext ctx = ( ExternalIntrospectionContext ) context ; response . accumulate ( \"key_from_java\" , \"value_from_script_on_java\" ); AuthorizationGrant authorizationGrant = ctx . getTokenGrant (); if ( authorizationGrant == null ) { scriptLogger . info ( \"Introspection Java script. Failed to load authorization grant by context\" ); return false ; } // Put user_id into response response . accumulate ( \"user_id\" , authorizationGrant . getUser () . getUserId ()); // Put custom parameters into response String sessionDn = authorizationGrant . getSessionDn (); if ( sessionDn == null ) { // There is no session scriptLogger . info ( \"Introspection Java script. Failed to load session DN\" ); return true ; } // Return session_id response . accumulate ( \"session_id\" , sessionDn ); SessionIdService sessionIdService = CdiUtil . bean ( SessionIdService . class ); SessionId session = sessionIdService . getSessionById ( sessionDn , false ); if ( session == null ) { scriptLogger . info ( \"Introspection Java script. Failed to load session\" ); return true ; } Map < String , String > sessionAttributes = session . getSessionAttributes (); if ( sessionAttributes == null ) { // There is no session attributes return true ; } // Append custom claims if ( sessionAttributes . containsKey ( \"custom1\" )) { response . accumulate ( \"custom1\" , sessionAttributes . get ( \"custom1\" )); } if ( sessionAttributes . containsKey ( \"custom2\" )) { response . accumulate ( \"custom2\" , sessionAttributes . get ( \"custom2\" )); } return true ; } }","title":"Introspection"},{"location":"admin/developer/scripts/introspection/#introspection-script-guide","text":"","title":"Introspection Script Guide"},{"location":"admin/developer/scripts/introspection/#overview","text":"In OAuth 2.0 [RFC6749], the contents of tokens are opaque to clients. However, there is still a large amount of metadata that may be attached to a token, such as its current validity, approved scopes, and information about the context in which the token was issued. These pieces of information are often vital to protected resources making authorization decisions based on the tokens being presented. Token introspection allows a protected resource to query this information. Introspection scripts allows to modify response of Introspection Endpoint spec and present additional meta information surrounding the token.","title":"Overview"},{"location":"admin/developer/scripts/introspection/#interface","text":"Introspection script should be associated with client (used for obtaining the token) in order to be run. Otherwise it's possible to set introspectionScriptBackwardCompatibility global AS configuration property to true, in this case AS will run all scripts (ignoring client configuration).","title":"Interface"},{"location":"admin/developer/scripts/introspection/#methods","text":"The introspection interception script extends the base script type with the init , destroy and getApiVersion methods: Inherited Methods Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10 The configurationAttributes parameter is java.util.Map<String, SimpleCustomProperty> . The introspection interception script also adds the following method(s): Method def modifyResponse(self, responseAsJsonObject, context) Method Paramater responseAsJsonObject is org.codehaus.jettison.json.JSONObject context is io.jans.as.service.external.context.ExternalIntrospectionContext","title":"Methods"},{"location":"admin/developer/scripts/introspection/#snippet","text":"# Returns boolean , true - apply introspection method , false - ignore it . # This method is called after introspection response is ready . This method can modify introspection response . # Note : # responseAsJsonObject - is org . codehaus . jettison . json . JSONObject , you can use any method to manipulate json # context is reference of io . jans . as . server . service . external . context . ExternalIntrospectionContext ( in https : // github . com / JanssenProject project ) def modifyResponse ( self , responseAsJsonObject , context ) : responseAsJsonObject . accumulate ( \"key_from_script\" , \"value_from_script\" ) return True It is also possible to run introspection script during access_token creation as JWT. It can be controlled by run_introspection_script_before_jwt_creation client property which is set to false by default. If run_introspection_script_before_jwt_creation set to true and access_token_as_jwt set to true then introspection script will be run before JWT ( access_token ) is created and all JSON values will be transfered to JWT. Also context inside script has additional method which allows to cancel transfering of claims if needed context.setTranferIntrospectionPropertiesIntoJwtClaims(false)","title":"Snippet"},{"location":"admin/developer/scripts/introspection/#common-use-cases","text":"","title":"Common Use Cases"},{"location":"admin/developer/scripts/introspection/#script-type-python","text":"","title":"Script Type: Python"},{"location":"admin/developer/scripts/introspection/#retrieve-grant-session-and-user-details-from-access-token","text":"Following sample code snippet shows how to work backwards from an AccessToken to Grant, Session and User information. from io.jans.model.custom.script.type.introspection import IntrospectionType from io.jans.as.server.service import SessionIdService from io.jans.service.cdi.util import CdiUtil class Introspection ( IntrospectionType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"Introspection script. Initializing ...\" print \"Introspection script. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"Introspection script. Destroying ...\" print \"Introspection script. Destroyed successfully\" return True def getApiVersion ( self ): return 11 # Returns boolean, true - apply introspection method, false - ignore it. # This method is called after introspection response is ready. This method can modify introspection response. # Note : # responseAsJsonObject - is org.codehaus.jettison.json.JSONObject, you can use any method to manipulate json # context is reference of io.jans.as.server.service.external.context.ExternalIntrospectionContext (in https://github.com/JanssenProject project, ) def modifyResponse ( self , responseAsJsonObject , context ): authorizationGrant = context . getTokenGrant () if authorizationGrant is None : print \"Introspection. Failed to load authorization grant by context\" return False # Put user_id into response responseAsJsonObject . accumulate ( \"user_id\" , authorizationGrant . getUser () . getUserId ()) # Put custom parameters into response sessionDn = authorizationGrant . getSessionDn () if sessionDn is None : # There is no session print \"Introspection. Failed to load session DN\" return True # Return session_id responseAsJsonObject . accumulate ( \"session_id\" , sessionDn ) sessionIdService = CdiUtil . bean ( SessionIdService ) session = sessionIdService . getSessionById ( sessionDn , False ) if session is None : print \"Introspection. Failed to load session ' %s '\" % sessionDn return True sessionAttributes = session . getSessionAttributes () if sessionAttributes is None : # There is no session attributes return True # Append custom claims if sessionAttributes . containsKey ( \"custom1\" ): responseAsJsonObject . accumulate ( \"custom1\" , sessionAttributes . get ( \"custom1\" )) if sessionAttributes . containsKey ( \"custom2\" ): responseAsJsonObject . accumulate ( \"custom2\" , sessionAttributes . get ( \"custom2\" )) return True","title":"Retrieve Grant, Session and User Details from Access Token"},{"location":"admin/developer/scripts/introspection/#script-type-java","text":"","title":"Script Type: Java"},{"location":"admin/developer/scripts/introspection/#retrieve-grant-session-and-user-details-from-access-token_1","text":"Following sample code snippet shows how to work backwards from an AccessToken to Grant, Session and User information. import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.model.custom.script.type.introspection.IntrospectionType ; import io.jans.service.custom.script.CustomScriptManager ; import io.jans.as.server.service.external.context.ExternalIntrospectionContext ; import io.jans.as.server.model.common.AuthorizationGrant ; import io.jans.as.server.service.SessionIdService ; import io.jans.service.cdi.util.CdiUtil ; import io.jans.as.server.model.common.SessionId ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; import org.json.JSONObject ; import java.util.Map ; public class Introspection implements IntrospectionType { private static final Logger log = LoggerFactory . getLogger ( Introspection . class ); private static final Logger scriptLogger = LoggerFactory . getLogger ( CustomScriptManager . class ); @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Init of Introspection Java custom script\" ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Init of Introspection Java custom script\" ); scriptLogger . info ( \"Introspection Java script. Initializing ...\" ); scriptLogger . info ( \"Introspection Java script. Initialized successfully\" ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Destroy of Introspection Java custom script\" ); scriptLogger . info ( \"Introspection Java script. Destroying ...\" ); scriptLogger . info ( \"Introspection Java script. Destroyed successfully\" ); return true ; } @Override public int getApiVersion () { return 11 ; } // Returns boolean , true - apply introspection method , false - ignore it . // This method is called after introspection response is ready . This method can modify introspection response . // Note : // responseAsJsonObject - is org . json . JSONObject , you can use any method to manipulate json // context is reference of io . jans . as . server . service . external . context . ExternalIntrospectionContext ( in https : // github . com / JanssenProject project , ) @Override public boolean modifyResponse ( Object responseAsJsonObject , Object context ) { JSONObject response = ( JSONObject ) responseAsJsonObject ; ExternalIntrospectionContext ctx = ( ExternalIntrospectionContext ) context ; response . accumulate ( \"key_from_java\" , \"value_from_script_on_java\" ); AuthorizationGrant authorizationGrant = ctx . getTokenGrant (); if ( authorizationGrant == null ) { scriptLogger . info ( \"Introspection Java script. Failed to load authorization grant by context\" ); return false ; } // Put user_id into response response . accumulate ( \"user_id\" , authorizationGrant . getUser () . getUserId ()); // Put custom parameters into response String sessionDn = authorizationGrant . getSessionDn (); if ( sessionDn == null ) { // There is no session scriptLogger . info ( \"Introspection Java script. Failed to load session DN\" ); return true ; } // Return session_id response . accumulate ( \"session_id\" , sessionDn ); SessionIdService sessionIdService = CdiUtil . bean ( SessionIdService . class ); SessionId session = sessionIdService . getSessionById ( sessionDn , false ); if ( session == null ) { scriptLogger . info ( \"Introspection Java script. Failed to load session\" ); return true ; } Map < String , String > sessionAttributes = session . getSessionAttributes (); if ( sessionAttributes == null ) { // There is no session attributes return true ; } // Append custom claims if ( sessionAttributes . containsKey ( \"custom1\" )) { response . accumulate ( \"custom1\" , sessionAttributes . get ( \"custom1\" )); } if ( sessionAttributes . containsKey ( \"custom2\" )) { response . accumulate ( \"custom2\" , sessionAttributes . get ( \"custom2\" )); } return true ; } }","title":"Retrieve Grant, Session and User Details from Access Token"},{"location":"admin/developer/scripts/openid-config/","tags":["administration","developer","scripts"],"text":"OpenID Configuration Script Guide # Overview # This is an introduction to the script and what it's used for. Interface # Methods # A definition of each method used in the script Objects # Definitions of all objects used in the script Common Use Cases # Descriptions of common use cases for this script, including a code snippet for each","title":"OpenID Configuration"},{"location":"admin/developer/scripts/openid-config/#openid-configuration-script-guide","text":"","title":"OpenID Configuration Script Guide"},{"location":"admin/developer/scripts/openid-config/#overview","text":"This is an introduction to the script and what it's used for.","title":"Overview"},{"location":"admin/developer/scripts/openid-config/#interface","text":"","title":"Interface"},{"location":"admin/developer/scripts/openid-config/#methods","text":"A definition of each method used in the script","title":"Methods"},{"location":"admin/developer/scripts/openid-config/#objects","text":"Definitions of all objects used in the script","title":"Objects"},{"location":"admin/developer/scripts/openid-config/#common-use-cases","text":"Descriptions of common use cases for this script, including a code snippet for each","title":"Common Use Cases"},{"location":"admin/developer/scripts/persistence/","tags":["administration","developer","scripts","Hashed Passwords","Entry manager","Persistence Extension"],"text":"By overriding the interface methods in PersistenceType inside a custom script you can Load initialization data from DB or initialize services after the creation of Entry Manager. Release resources, terminate services etc. after the destruction of Entry Manager. Create hashed passwords Compare hashed passwords !!! Information: What is Entry Manager? The Janssen server's Peristence Layer can be any one of LDAP, MySQL database, Postgres database, Couchbase etc. Information about an entity (person, session, client, scripts etc) constitutes an Entry. The Entry Manager (CRUD operations) implementation for each type of Persistence is available in the Janssen server and the relevant Entry Manager ( LDAPEntryManager, SQLEntryManager, etc.) is created when the server starts up. Usage: # The Jans-Auth server contains a PeristenceType script. Hashed Passwords # Hashed passwords can be created using any method from this enum , instead of the native/default SSHA256. The ORM module of the Janssen server does the following: 1. When User entry is persisted and userPassword is specified, ORM calls createHashedPassword 2. User authenticates and the password is checked, the ORM module invokes compareHashedPasswords 3. We need to specify which one to use in /etc/gluu/conf/jans-couchbase.properties password.encryption.method: SSHA-256 4. Implementation `createHashedPassword` and `compareHashedPasswords` the script: - Creation def createHashedPassword(self, credential): hashed_password= PasswordEncryptionHelper.createStoragePassword(credential, PasswordEncryptionMethod.HASH_METHOD_PKCS5S2) return hashed_password - Comparing Hashed Password: def compareHashedPasswords(self, credential, storedCredential): auth_result = PasswordEncryptionHelper.compareCredentials(credential, storedCredential) return auth_result","title":"Persistence"},{"location":"admin/developer/scripts/persistence/#usage","text":"The Jans-Auth server contains a PeristenceType script.","title":"Usage:"},{"location":"admin/developer/scripts/persistence/#hashed-passwords","text":"Hashed passwords can be created using any method from this enum , instead of the native/default SSHA256. The ORM module of the Janssen server does the following: 1. When User entry is persisted and userPassword is specified, ORM calls createHashedPassword 2. User authenticates and the password is checked, the ORM module invokes compareHashedPasswords 3. We need to specify which one to use in /etc/gluu/conf/jans-couchbase.properties password.encryption.method: SSHA-256 4. Implementation `createHashedPassword` and `compareHashedPasswords` the script: - Creation def createHashedPassword(self, credential): hashed_password= PasswordEncryptionHelper.createStoragePassword(credential, PasswordEncryptionMethod.HASH_METHOD_PKCS5S2) return hashed_password - Comparing Hashed Password: def compareHashedPasswords(self, credential, storedCredential): auth_result = PasswordEncryptionHelper.compareCredentials(credential, storedCredential) return auth_result","title":"Hashed Passwords"},{"location":"admin/developer/scripts/person-authentication-interface/","tags":["administration","developer","scripts","PersonAuthenticationType","authentication","authentication workflow"],"text":"Person Authentication interface # The PersonAuthenticationType script is described by a java interface whose methods should be overridden to implement an authentication workflow. Inherited Methods # Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10 Objects # Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes SimpleCustomProperty Map of configuration properties. Reference Pseudo code: def init(self, customScript, configurationAttributes): # an example of initializing global variables from script configuration if configurationAttributes.containsKey(\"registration_uri\"): self.registrationUri = configurationAttributes.get(\"registration_uri\").getValue2() return True def destroy(self, configurationAttributes): print \"ACR_NAME. Destroy\" # cleanup code here return True def getApiVersion(self): return 11 Person Authentication interface Methods # Method header Method description 1. prepareForStep(self, configurationAttributes, requestParameters, step) This method can be used to prepare variables needed to render the UI page and store them in a suitable context. 2. authenticate(self, configurationAttributes, requestParameters, step) The most important method which will encapsulate the logic for user credential verification / validation 3. getExtraParametersForStep Used to save session variables between steps. The Jans-auth Server persists these variables to support stateless, two-step authentications even in a clustered environment. 4. getCountAuthenticationSteps This method normally just returns 1, 2, or 3. In some cases, depending on the context like based on the user's country or department, you can decide to go for multistep or single step authentication. 5. getPageForStep Used to specify the UI page you want to show for a given step. 6. getNextStep Steps usually go incrementally as 1, 2, 3... unless you specify a case where it can be reset to a previous step, or skip a particular step based on business case. 7. getAuthenticationMethodClaims Array of strings that are identifiers for authentication methods used in the authentication. In OpenID Connect, if the identity provider supplies an \"amr\" claim in the ID Token resulting from a successful authentication, the relying party can inspect the values returned and thereby learn details about how the authentication was performed. 8. isValidAuthenticationMethod This method is used to check if the authentication method is in a valid state. For example we can check there if a 3rd party mechanism is available to authenticate users. As a result it should either return True or False. 9. getAlternativeAuthenticationMethod This method is called only if the current authentication method is in an invalid state. Hence authenticator calls it only if isValidAuthenticationMethod returns False. As a result it should return the reserved authentication method name. 10. getLogoutExternalUrl Returns the 3rd-party URL that is used to end session routines. The control from this Third party URL should re-direct user back to /oxauth/logout.htm again with empty URL query string. Jans-Auth server will then continue of the extended logout flow, restore the original URL query string, and send user to /jans-auth/end_session to complete it. 11. logout This method is not mandatory. It can be used in cases when you need to execute specific logout logic in the authentication script when jans-auth receives an end session request to the /oxauth/logout.htm endpoint (which receives the same set of parameters than the usual end_session endpoint). This method should return True or False; when False jans-auth stops processing the end session request workflow. Objects # Object name Object description configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes SimpleCustomProperty Map of configuration properties. Reference usageType AuthenticationScriptUsageType step Integer indicating step number requestParameters Request parameters stored as Map Pseudocode: def prepareForStep(self, configurationAttributes, requestParameters, step): if (step == 1): # do this if (step == 2): # do something else return True # or False def authenticate(self, configurationAttributes, requestParameters, step): authenticationService = CdiUtil.bean(AuthenticationService) if (step == 1): # 1. obtain user name and password from UI # 2. verify if entry exists in database # 3. authenticationService.authenticate(user_name, user_password) # 4. return True or False elif step == 2: # 1. obtain credentials from UI # 2. validate the credentials # 3. return True or False def getExtraParametersForStep(self, configurationAttributes, step): return Arrays.asList(\"paramName1\", \"paramName2\", \"paramName3\") def getCountAuthenticationSteps(self, configurationAttributes): return 1 def getPageForStep(self, configurationAttributes, step): # Used to specify the page you want to return for a given step if (step == 1): return \"/auth/login.xhtml\" if (step == 2) return \"/auth/enterOTP.xhtml\" def getNextStep(self, configurationAttributes, requestParameters, step): # steps usually are incremented 1, 2, 3... unless you specify a case where it can be reset to a previous step, or skip a particular step based on business case. return -1 def getAuthenticationMethodClaims(self, requestParameters): return Arrays.asList(\"pwd\", \"otp\") def isValidAuthenticationMethod(self, usageType, configurationAttributes): return True def getAlternativeAuthenticationMethod(self, usageType, configurationAttributes): return None def getLogoutExternalUrl(self, configurationAttributes, requestParameters): return None def logout(self, configurationAttributes, requestParameters): return True Example scripts: # Basic script Script catalog","title":"Person authentication interface"},{"location":"admin/developer/scripts/person-authentication-interface/#person-authentication-interface","text":"The PersonAuthenticationType script is described by a java interface whose methods should be overridden to implement an authentication workflow.","title":"Person Authentication interface"},{"location":"admin/developer/scripts/person-authentication-interface/#inherited-methods","text":"Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10","title":"Inherited Methods"},{"location":"admin/developer/scripts/person-authentication-interface/#objects","text":"Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes SimpleCustomProperty Map of configuration properties. Reference Pseudo code: def init(self, customScript, configurationAttributes): # an example of initializing global variables from script configuration if configurationAttributes.containsKey(\"registration_uri\"): self.registrationUri = configurationAttributes.get(\"registration_uri\").getValue2() return True def destroy(self, configurationAttributes): print \"ACR_NAME. Destroy\" # cleanup code here return True def getApiVersion(self): return 11","title":"Objects"},{"location":"admin/developer/scripts/person-authentication-interface/#person-authentication-interface-methods","text":"Method header Method description 1. prepareForStep(self, configurationAttributes, requestParameters, step) This method can be used to prepare variables needed to render the UI page and store them in a suitable context. 2. authenticate(self, configurationAttributes, requestParameters, step) The most important method which will encapsulate the logic for user credential verification / validation 3. getExtraParametersForStep Used to save session variables between steps. The Jans-auth Server persists these variables to support stateless, two-step authentications even in a clustered environment. 4. getCountAuthenticationSteps This method normally just returns 1, 2, or 3. In some cases, depending on the context like based on the user's country or department, you can decide to go for multistep or single step authentication. 5. getPageForStep Used to specify the UI page you want to show for a given step. 6. getNextStep Steps usually go incrementally as 1, 2, 3... unless you specify a case where it can be reset to a previous step, or skip a particular step based on business case. 7. getAuthenticationMethodClaims Array of strings that are identifiers for authentication methods used in the authentication. In OpenID Connect, if the identity provider supplies an \"amr\" claim in the ID Token resulting from a successful authentication, the relying party can inspect the values returned and thereby learn details about how the authentication was performed. 8. isValidAuthenticationMethod This method is used to check if the authentication method is in a valid state. For example we can check there if a 3rd party mechanism is available to authenticate users. As a result it should either return True or False. 9. getAlternativeAuthenticationMethod This method is called only if the current authentication method is in an invalid state. Hence authenticator calls it only if isValidAuthenticationMethod returns False. As a result it should return the reserved authentication method name. 10. getLogoutExternalUrl Returns the 3rd-party URL that is used to end session routines. The control from this Third party URL should re-direct user back to /oxauth/logout.htm again with empty URL query string. Jans-Auth server will then continue of the extended logout flow, restore the original URL query string, and send user to /jans-auth/end_session to complete it. 11. logout This method is not mandatory. It can be used in cases when you need to execute specific logout logic in the authentication script when jans-auth receives an end session request to the /oxauth/logout.htm endpoint (which receives the same set of parameters than the usual end_session endpoint). This method should return True or False; when False jans-auth stops processing the end session request workflow.","title":"Person Authentication interface Methods"},{"location":"admin/developer/scripts/person-authentication-interface/#objects_1","text":"Object name Object description configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes SimpleCustomProperty Map of configuration properties. Reference usageType AuthenticationScriptUsageType step Integer indicating step number requestParameters Request parameters stored as Map Pseudocode: def prepareForStep(self, configurationAttributes, requestParameters, step): if (step == 1): # do this if (step == 2): # do something else return True # or False def authenticate(self, configurationAttributes, requestParameters, step): authenticationService = CdiUtil.bean(AuthenticationService) if (step == 1): # 1. obtain user name and password from UI # 2. verify if entry exists in database # 3. authenticationService.authenticate(user_name, user_password) # 4. return True or False elif step == 2: # 1. obtain credentials from UI # 2. validate the credentials # 3. return True or False def getExtraParametersForStep(self, configurationAttributes, step): return Arrays.asList(\"paramName1\", \"paramName2\", \"paramName3\") def getCountAuthenticationSteps(self, configurationAttributes): return 1 def getPageForStep(self, configurationAttributes, step): # Used to specify the page you want to return for a given step if (step == 1): return \"/auth/login.xhtml\" if (step == 2) return \"/auth/enterOTP.xhtml\" def getNextStep(self, configurationAttributes, requestParameters, step): # steps usually are incremented 1, 2, 3... unless you specify a case where it can be reset to a previous step, or skip a particular step based on business case. return -1 def getAuthenticationMethodClaims(self, requestParameters): return Arrays.asList(\"pwd\", \"otp\") def isValidAuthenticationMethod(self, usageType, configurationAttributes): return True def getAlternativeAuthenticationMethod(self, usageType, configurationAttributes): return None def getLogoutExternalUrl(self, configurationAttributes, requestParameters): return None def logout(self, configurationAttributes, requestParameters): return True","title":"Objects"},{"location":"admin/developer/scripts/person-authentication-interface/#example-scripts","text":"Basic script Script catalog","title":"Example scripts:"},{"location":"admin/developer/scripts/person-authentication/","tags":["administration","developer","scripts","acr_values_supported","2FA","PersonAuthenticationType","acr","weld"],"text":"Person Authentication scripts # The Jans-Auth Server leverages interception scripts of PersonAuthenticationType which when implemented can facilitate complex multi-step, multi-factor authentication workflows. The authentication flow in the Jans Server is driven by the openID spec. The authorization request to the OP (Jans server) contains an optional query parameter called acr_values which is used by the OP to pick an interception script which will be run when /authorize endpoint (Authentication flow) is invoked. Each authentication method, whose name is the acr value, is tied to a PersonAuthenticationType script which offers the authentication workflow. Typically, a PersonAuthenticationType script can be used to: 1. introduce a new 2FA authentication mechanism 2. customize multistep authentication 3. offer Social logins 4. proactively perform fraud detection and block a fraudulent user. Authentication mechanisms offered by Jans can be confirmed by checking the Janssen OP configuration URL, https://<hostname>/.well-known/openid-configuration , and finding the acr_values_supported . Building blocks of an authentication workflow # Jans-auth server comprises of a number of beans, configuration files and Facelets (JSF) views, packaged as a WAR module. That means custom scripts and custom pages (JSF facelets) can make use of business logic already encapsulated in the Weld managed beans. The following sections explain how authentication flow can be built using a custom script. A. Custom script # The PersonAuthenticationType script is described by a java interface whose methods should be overridden to implement an authentication workflow. The article talks about these methods in detail and the psuedo code for each method. B. UI pages: # All web pages are xhtml files. The Command-Action offering by JSF framework is used by the Jans-auth server to implement authentication flows. a. Server-side actions implemented by custom script: # The custom script's authenticate and prepareForStep implementations are called by the following java class - Authenticator . These methods are mapped as command actions and view actions respectively in the web page. Relevant methods: Signature Description boolean authenticate() Makes the authentication flow proceed by calling the authenticate method of the custom script String prepareAuthenticationForStep() Makes the authentication flow proceed by calling the prepareForStep method of the custom script b. Web page in xhtml: # The f:metadata and f:viewAction tags are used to load variables (prepared in the prepareForStep method of the custom script). These variables are rendered on the UI page. <f:metadata> <f:viewAction action=\"#{authenticator.prepareAuthenticationForStep}\" if=\"#{not identity.loggedIn}\" /> </f:metadata> A form submit takes the flow to the authenticate() method of the custom script. <h:commandButton id=\"updateButton\" value=\"Update\" styleClass=\"btn btn-primary col-sm-4\" action=\"#{authenticator.authenticate}\" style=\"margin:5px;\" /> c. Page customizations: # The Jans-auth server comes with a default set of pages for login, logout, errors, authorizations. You can easily override these pages or write new ones. You can easily apply your own stylesheet, images and resouce-bundles to your pages. This article covers all the details you need to write your own web page. C. Business logic in Custom script: # Jans-auth server uses Weld 3.0 (JSR-365 aka CDI 2.0) for managed beans. The most important aspects of business logic are implemented through a set of beans. Details and examples of this can be found in this article D. Third party libraries for use in the custom script # Java or Python libraries to be imported and used very easily. Remember, you can import a python library only if it has been written in \"pure python\". More details of this mentioned here E. Configuring the acr parameter in the Jans-auth server: # The acr parameter can be configured in the following ways : 1. Default authentication method: # default_acr : This is the default authentication mechanism exposed to all applications that send users to the Janssen Server for sign-in. Unless an app specifically requests a different form of authentication using the OpenID Connect acr_values parameter (as specified below), users will receive the form of authentication specified in this field. Internal ACR # If a default ACR is not specified, Janssen will determine it based on enabled scripts and the internal user/password ACR. This internal ACR, simple_password_auth , is set to level -1. This means that it has lower priority than any scripts, so Janssen server will use it only if no other authentication method is set. Use the jans-cli to update / look-up the default authentication method . Authentication method for a client (RP): # A client may also specify default_acr_values during registration (and omit the parameter acr_values while making an authentication request). Multiple Authentication Mechanisms # The Jans Server can concurrently support multiple authentication mechanisms, enabling Web and mobile apps (clients) to request a specific type of authentication using the standard OpenID Connect request parameter: acr_values . Learn more about acr_values in the OpenID Connect core spec . Enabling an authentication mechanism # An Authentication method is offered by the AS if its ACR value i.e. its corresponding custom script is enabled . By default, users will get the default authentication mechanism as specified above. However, using the OpenID Connect acr_values parameter, web and mobile clients can request any enabled authentication mechanism . Obtain the json contents of a custom script by using a jans-cli command like get-config-scripts-by-type , get-config-scripts-by-inum etc. Example : /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-type --url-suffix type:PERSON_AUTHENTICATION /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-inum --url-suffix inum:6122281b-b55d-4dd0-8115-b098eeeee2b7 Update the custom script and change the enabled attribute to true Level (rank) of an Authentication mechanism : # Each authentication mechanism (script) has a \"Level\" assigned to it which describes how secure and reliable it is. The higher the \"Level\", higher is the reliability represented by the script. Though several mechanisms can be enabled at the same Janssen server instance at the same time, for any specific user's session only one of them can be set as the current one (and will be returned as acr claim of id_token for them). If after initial session is created a new authorization request from a RP comes in specifying another authentication method, its \"Level\" will be compared to that of the method currently associated with this session. If requested method's \"Level\" is lower or equal to it, nothing is changed and the usual SSO behavior is observed. If it's higher (i.e. a more secure method is requested), it's not possible to serve such request using the existing session's context, and user must re-authenticate themselves to continue. If they succeed, a new session becomes associated with that requested mechanism instead. Usage scenarios # A. Implementing 2FA authentication mechanisms # FIDO2 : Authentications using platform authenticators embedded into a person's device or physical USB, NFC or Bluetooth security keys that are inserted into a USB slot of a computer OTP authentication : Authentication mechanism using an app like Google authenticator , FreeOTP or Authy that implements the open standards HOTP and TOTP SMS OTP : Email OTP: B. Implementing Multistep authentication # Redirect to previous step : The script here an example of how the number of steps can be varied depending on the context or business requirement. C. Implementing Social logins # You can use a PersonAuthenticationType script to allow users to sign using credentials from popular Social Identity providers or Inbound Identity Providers like Facebook, Google and Apple. After users authenticate, thier Social Identity Provider credentials are provisioned into the Jans-auth server. More on this topic in this article D. Proactively perform fraud detection # Impossible travel Testing an authentication flow # An example of a complete URL looks like this - ``` https://<your.jans.server>/jans-auth/authorize.htm? \\ response_type=code&redirect_uri=https://<your.jans.server>/admin \\ &client_id=17b8b82e-b3ec-42a2-bd90-097028a37f3 \\ &scope=openid+profile+email+user_name \\ &state=faad2cdjfdddjfkdf&nonce=dajdffdfsdcfff ``` To test , enter the complete URL for authorization in a browser or create a simple webmapage with a link that simulates the user sign-in attempt. If the server is configured properly, the first page for the selected authentication method will be displayed to the user. FAQs # 1. How can error messages be displayed on a web page? # FacesMessage bean is used for this purpose. from org.jans.jsf2.message import FacesMessages from org.jans.service.cdi.util import CdiUtil from javax.faces.application import FacesMessage ... facesMessages = CdiUtil.bean(FacesMessages) facesMessages.setKeepMessages() facesMessages.add(FacesMessage.SEVERITY_ERROR, \"Please enter a valid username\") The error will appear in the associated template using the following markup: ... <h:messages /> ... See an example here 2. How is redirection to a third party application for authentication handled in a script? # For user authentication or consent gathering, there might be a need to redirect to a third party application to perform some operation and return the control back to authentication steps of the custom script. Please apply these steps to a person authentication script in such a scenario: Return from def getPageForStep(self, step, context), a page /auth/method_name/redirect.html ; with content similar to the code snippet below - def getPageForStep(self, step, context): return \"/auth/method_name/redirect.html\" Contents of redirect.xhtml should take the flow to prepareForStep method ... <f:metadata> <f:viewAction action=\"#{authenticator.prepareForStep}\" if=\"#{not identity.loggedIn}\" /> </f:metadata> In method prepareForStep prepare data needed for redirect and perform the redirection to the external service. def prepareForStep(self, step, context): ..... facesService = CdiUtil.bean(FacesService) facesService.redirectToExternalURL(third_party_URL ) return True In order to resume flow after the redirection, invoke a similar URL to https://my.gluu.server/postlogin.htm?param=123 from the third party app which takes the flow back to the authenticate method of the custom script. So create an xhtml page postlogin.xhtml which will look like this : <!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"> <html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:f=\"http://xmlns.jcp.org/jsf/core\"> <f:view transient=\"true\" contentType=\"text/html\"> <f:metadata> <f:viewAction action=\"#{authenticator.authenticateWithOutcome}\" /> </f:metadata> </f:view> </html> The <f:viewAction action=\"#{authenticator.authenticateWithOutcome}\" /> in step 4 takes us to the authenticate method inside the custom script def authenticate(self, configurationAttributes, requestParameters, step): . Here you can use parameters from request param = ServerUtil.getFirstValue(requestParameters, \"param-name\")) perform the state check (state : Opaque value used to maintain state between the request and the callback.) finally, return true or false from this method.","title":"Person Authentication"},{"location":"admin/developer/scripts/person-authentication/#person-authentication-scripts","text":"The Jans-Auth Server leverages interception scripts of PersonAuthenticationType which when implemented can facilitate complex multi-step, multi-factor authentication workflows. The authentication flow in the Jans Server is driven by the openID spec. The authorization request to the OP (Jans server) contains an optional query parameter called acr_values which is used by the OP to pick an interception script which will be run when /authorize endpoint (Authentication flow) is invoked. Each authentication method, whose name is the acr value, is tied to a PersonAuthenticationType script which offers the authentication workflow. Typically, a PersonAuthenticationType script can be used to: 1. introduce a new 2FA authentication mechanism 2. customize multistep authentication 3. offer Social logins 4. proactively perform fraud detection and block a fraudulent user. Authentication mechanisms offered by Jans can be confirmed by checking the Janssen OP configuration URL, https://<hostname>/.well-known/openid-configuration , and finding the acr_values_supported .","title":"Person Authentication scripts"},{"location":"admin/developer/scripts/person-authentication/#building-blocks-of-an-authentication-workflow","text":"Jans-auth server comprises of a number of beans, configuration files and Facelets (JSF) views, packaged as a WAR module. That means custom scripts and custom pages (JSF facelets) can make use of business logic already encapsulated in the Weld managed beans. The following sections explain how authentication flow can be built using a custom script.","title":"Building blocks of an authentication workflow"},{"location":"admin/developer/scripts/person-authentication/#a-custom-script","text":"The PersonAuthenticationType script is described by a java interface whose methods should be overridden to implement an authentication workflow. The article talks about these methods in detail and the psuedo code for each method.","title":"A. Custom script"},{"location":"admin/developer/scripts/person-authentication/#b-ui-pages","text":"All web pages are xhtml files. The Command-Action offering by JSF framework is used by the Jans-auth server to implement authentication flows.","title":"B. UI pages:"},{"location":"admin/developer/scripts/person-authentication/#a-server-side-actions-implemented-by-custom-script","text":"The custom script's authenticate and prepareForStep implementations are called by the following java class - Authenticator . These methods are mapped as command actions and view actions respectively in the web page. Relevant methods: Signature Description boolean authenticate() Makes the authentication flow proceed by calling the authenticate method of the custom script String prepareAuthenticationForStep() Makes the authentication flow proceed by calling the prepareForStep method of the custom script","title":"a. Server-side actions implemented by custom script:"},{"location":"admin/developer/scripts/person-authentication/#b-web-page-in-xhtml","text":"The f:metadata and f:viewAction tags are used to load variables (prepared in the prepareForStep method of the custom script). These variables are rendered on the UI page. <f:metadata> <f:viewAction action=\"#{authenticator.prepareAuthenticationForStep}\" if=\"#{not identity.loggedIn}\" /> </f:metadata> A form submit takes the flow to the authenticate() method of the custom script. <h:commandButton id=\"updateButton\" value=\"Update\" styleClass=\"btn btn-primary col-sm-4\" action=\"#{authenticator.authenticate}\" style=\"margin:5px;\" />","title":"b. Web page in xhtml:"},{"location":"admin/developer/scripts/person-authentication/#c-page-customizations","text":"The Jans-auth server comes with a default set of pages for login, logout, errors, authorizations. You can easily override these pages or write new ones. You can easily apply your own stylesheet, images and resouce-bundles to your pages. This article covers all the details you need to write your own web page.","title":"c. Page customizations:"},{"location":"admin/developer/scripts/person-authentication/#c-business-logic-in-custom-script","text":"Jans-auth server uses Weld 3.0 (JSR-365 aka CDI 2.0) for managed beans. The most important aspects of business logic are implemented through a set of beans. Details and examples of this can be found in this article","title":"C. Business logic in Custom script:"},{"location":"admin/developer/scripts/person-authentication/#d-third-party-libraries-for-use-in-the-custom-script","text":"Java or Python libraries to be imported and used very easily. Remember, you can import a python library only if it has been written in \"pure python\". More details of this mentioned here","title":"D. Third party libraries for use in the custom script"},{"location":"admin/developer/scripts/person-authentication/#e-configuring-the-acr-parameter-in-the-jans-auth-server","text":"The acr parameter can be configured in the following ways :","title":"E. Configuring the acr parameter in the Jans-auth server:"},{"location":"admin/developer/scripts/person-authentication/#1-default-authentication-method","text":"default_acr : This is the default authentication mechanism exposed to all applications that send users to the Janssen Server for sign-in. Unless an app specifically requests a different form of authentication using the OpenID Connect acr_values parameter (as specified below), users will receive the form of authentication specified in this field.","title":"1. Default authentication method:"},{"location":"admin/developer/scripts/person-authentication/#internal-acr","text":"If a default ACR is not specified, Janssen will determine it based on enabled scripts and the internal user/password ACR. This internal ACR, simple_password_auth , is set to level -1. This means that it has lower priority than any scripts, so Janssen server will use it only if no other authentication method is set. Use the jans-cli to update / look-up the default authentication method .","title":"Internal ACR"},{"location":"admin/developer/scripts/person-authentication/#authentication-method-for-a-client-rp","text":"A client may also specify default_acr_values during registration (and omit the parameter acr_values while making an authentication request).","title":"Authentication method for a client (RP):"},{"location":"admin/developer/scripts/person-authentication/#multiple-authentication-mechanisms","text":"The Jans Server can concurrently support multiple authentication mechanisms, enabling Web and mobile apps (clients) to request a specific type of authentication using the standard OpenID Connect request parameter: acr_values . Learn more about acr_values in the OpenID Connect core spec .","title":"Multiple Authentication Mechanisms"},{"location":"admin/developer/scripts/person-authentication/#enabling-an-authentication-mechanism","text":"An Authentication method is offered by the AS if its ACR value i.e. its corresponding custom script is enabled . By default, users will get the default authentication mechanism as specified above. However, using the OpenID Connect acr_values parameter, web and mobile clients can request any enabled authentication mechanism . Obtain the json contents of a custom script by using a jans-cli command like get-config-scripts-by-type , get-config-scripts-by-inum etc. Example : /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-type --url-suffix type:PERSON_AUTHENTICATION /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-inum --url-suffix inum:6122281b-b55d-4dd0-8115-b098eeeee2b7 Update the custom script and change the enabled attribute to true","title":"Enabling an authentication mechanism"},{"location":"admin/developer/scripts/person-authentication/#level-rank-of-an-authentication-mechanism","text":"Each authentication mechanism (script) has a \"Level\" assigned to it which describes how secure and reliable it is. The higher the \"Level\", higher is the reliability represented by the script. Though several mechanisms can be enabled at the same Janssen server instance at the same time, for any specific user's session only one of them can be set as the current one (and will be returned as acr claim of id_token for them). If after initial session is created a new authorization request from a RP comes in specifying another authentication method, its \"Level\" will be compared to that of the method currently associated with this session. If requested method's \"Level\" is lower or equal to it, nothing is changed and the usual SSO behavior is observed. If it's higher (i.e. a more secure method is requested), it's not possible to serve such request using the existing session's context, and user must re-authenticate themselves to continue. If they succeed, a new session becomes associated with that requested mechanism instead.","title":"Level (rank) of an Authentication mechanism :"},{"location":"admin/developer/scripts/person-authentication/#usage-scenarios","text":"","title":"Usage scenarios"},{"location":"admin/developer/scripts/person-authentication/#a-implementing-2fa-authentication-mechanisms","text":"FIDO2 : Authentications using platform authenticators embedded into a person's device or physical USB, NFC or Bluetooth security keys that are inserted into a USB slot of a computer OTP authentication : Authentication mechanism using an app like Google authenticator , FreeOTP or Authy that implements the open standards HOTP and TOTP SMS OTP : Email OTP:","title":"A. Implementing 2FA authentication mechanisms"},{"location":"admin/developer/scripts/person-authentication/#b-implementing-multistep-authentication","text":"Redirect to previous step : The script here an example of how the number of steps can be varied depending on the context or business requirement.","title":"B. Implementing Multistep authentication"},{"location":"admin/developer/scripts/person-authentication/#c-implementing-social-logins","text":"You can use a PersonAuthenticationType script to allow users to sign using credentials from popular Social Identity providers or Inbound Identity Providers like Facebook, Google and Apple. After users authenticate, thier Social Identity Provider credentials are provisioned into the Jans-auth server. More on this topic in this article","title":"C. Implementing Social logins"},{"location":"admin/developer/scripts/person-authentication/#d-proactively-perform-fraud-detection","text":"Impossible travel","title":"D. Proactively perform fraud detection"},{"location":"admin/developer/scripts/person-authentication/#testing-an-authentication-flow","text":"An example of a complete URL looks like this - ``` https://<your.jans.server>/jans-auth/authorize.htm? \\ response_type=code&redirect_uri=https://<your.jans.server>/admin \\ &client_id=17b8b82e-b3ec-42a2-bd90-097028a37f3 \\ &scope=openid+profile+email+user_name \\ &state=faad2cdjfdddjfkdf&nonce=dajdffdfsdcfff ``` To test , enter the complete URL for authorization in a browser or create a simple webmapage with a link that simulates the user sign-in attempt. If the server is configured properly, the first page for the selected authentication method will be displayed to the user.","title":"Testing an authentication flow"},{"location":"admin/developer/scripts/person-authentication/#faqs","text":"","title":"FAQs"},{"location":"admin/developer/scripts/person-authentication/#1-how-can-error-messages-be-displayed-on-a-web-page","text":"FacesMessage bean is used for this purpose. from org.jans.jsf2.message import FacesMessages from org.jans.service.cdi.util import CdiUtil from javax.faces.application import FacesMessage ... facesMessages = CdiUtil.bean(FacesMessages) facesMessages.setKeepMessages() facesMessages.add(FacesMessage.SEVERITY_ERROR, \"Please enter a valid username\") The error will appear in the associated template using the following markup: ... <h:messages /> ... See an example here","title":"1. How can error messages be displayed on a web page?"},{"location":"admin/developer/scripts/person-authentication/#2-how-is-redirection-to-a-third-party-application-for-authentication-handled-in-a-script","text":"For user authentication or consent gathering, there might be a need to redirect to a third party application to perform some operation and return the control back to authentication steps of the custom script. Please apply these steps to a person authentication script in such a scenario: Return from def getPageForStep(self, step, context), a page /auth/method_name/redirect.html ; with content similar to the code snippet below - def getPageForStep(self, step, context): return \"/auth/method_name/redirect.html\" Contents of redirect.xhtml should take the flow to prepareForStep method ... <f:metadata> <f:viewAction action=\"#{authenticator.prepareForStep}\" if=\"#{not identity.loggedIn}\" /> </f:metadata> In method prepareForStep prepare data needed for redirect and perform the redirection to the external service. def prepareForStep(self, step, context): ..... facesService = CdiUtil.bean(FacesService) facesService.redirectToExternalURL(third_party_URL ) return True In order to resume flow after the redirection, invoke a similar URL to https://my.gluu.server/postlogin.htm?param=123 from the third party app which takes the flow back to the authenticate method of the custom script. So create an xhtml page postlogin.xhtml which will look like this : <!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"> <html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:f=\"http://xmlns.jcp.org/jsf/core\"> <f:view transient=\"true\" contentType=\"text/html\"> <f:metadata> <f:viewAction action=\"#{authenticator.authenticateWithOutcome}\" /> </f:metadata> </f:view> </html> The <f:viewAction action=\"#{authenticator.authenticateWithOutcome}\" /> in step 4 takes us to the authenticate method inside the custom script def authenticate(self, configurationAttributes, requestParameters, step): . Here you can use parameters from request param = ServerUtil.getFirstValue(requestParameters, \"param-name\")) perform the state check (state : Opaque value used to maintain state between the request and the callback.) finally, return true or false from this method.","title":"2. How is redirection to a third party application for authentication handled in a script?"},{"location":"admin/developer/scripts/post-authentication/","tags":["administration","developer","scripts","PostAuthn"],"text":"Overview # After the browser has a session, if a person visits the website, the requesting party can obtain a code without the user having to authenticate or authorize. In some cases, it is desirable to insert custom business logic before granting the code or tokens from the authorization endpoint. Post Authentication script allows to force re-authentication or re-authorization (even if client is \"Pre-authorized\" or client authorization persistence is on). Interface # The post authentication script implements the PostAuthnType interface. This extends methods from the base script type in addition to adding new methods: Inherited Methods # Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10 New Methods # Method header Method description def forceReAuthentication(self, context) This method is called during Authorization Request at Authorization Endpoint. If True is returned, session is set as unauthenticated and user is send for authentication. def forceAuthorization(self, context) This method is called during Authorization Request at Authorization Endpoint. If True is returned user is send for Authorization. By default if client is \"Pre-Authorized\" or \"Client Persist Authorizations\" is on, authorization is skipped. This script has higher priority and can cancel Pre-Authorization and persisted authorizations. Objects # Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes SimpleCustomProperty Map of configuration properties. Reference context Reference Use case: Dummy Post Authentication script (does not force re-authentication) # This was adapted from Gluu Post Authentication script example . Script Type: Python # from io.jans.model.custom.script.type.postauthn import PostAuthnType class PostAuthn ( PostAuthnType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"Post Authn script. Initializing ...\" print \"Post Authn script. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"Post Authn script. Destroying ...\" print \"Post Authn script. Destroyed successfully\" return True def getApiVersion ( self ): return 11 def forceReAuthentication ( self , context ): return False def forceAuthorization ( self , context ): return False Script Type: Java # import java.util.Map ; import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.model.custom.script.type.postauthn.PostAuthnType ; import io.jans.service.custom.script.CustomScriptManager ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class PostAuthn implements PostAuthnType { private static final Logger log = LoggerFactory . getLogger ( CustomScriptManager . class ); @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Post Authentication. Initializing...\" ); log . info ( \"Post Authentication. Initialized\" ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Post Authentication. Initializing...\" ); log . info ( \"Post Authentication. Initialized\" ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Post Authentication. Destroying...\" ); log . info ( \"Post Authentication. Destroyed.\" ); return true ; } @Override public int getApiVersion () { return 11 ; } @Override public boolean forceReAuthentication ( Object context ) { return false ; } @Override public boolean forceAuthorization ( Object context ) { return false ; } }","title":"Post Authentication"},{"location":"admin/developer/scripts/post-authentication/#overview","text":"After the browser has a session, if a person visits the website, the requesting party can obtain a code without the user having to authenticate or authorize. In some cases, it is desirable to insert custom business logic before granting the code or tokens from the authorization endpoint. Post Authentication script allows to force re-authentication or re-authorization (even if client is \"Pre-authorized\" or client authorization persistence is on).","title":"Overview"},{"location":"admin/developer/scripts/post-authentication/#interface","text":"The post authentication script implements the PostAuthnType interface. This extends methods from the base script type in addition to adding new methods:","title":"Interface"},{"location":"admin/developer/scripts/post-authentication/#inherited-methods","text":"Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10","title":"Inherited Methods"},{"location":"admin/developer/scripts/post-authentication/#new-methods","text":"Method header Method description def forceReAuthentication(self, context) This method is called during Authorization Request at Authorization Endpoint. If True is returned, session is set as unauthenticated and user is send for authentication. def forceAuthorization(self, context) This method is called during Authorization Request at Authorization Endpoint. If True is returned user is send for Authorization. By default if client is \"Pre-Authorized\" or \"Client Persist Authorizations\" is on, authorization is skipped. This script has higher priority and can cancel Pre-Authorization and persisted authorizations.","title":"New Methods"},{"location":"admin/developer/scripts/post-authentication/#objects","text":"Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes SimpleCustomProperty Map of configuration properties. Reference context Reference","title":"Objects"},{"location":"admin/developer/scripts/post-authentication/#use-case-dummy-post-authentication-script-does-not-force-re-authentication","text":"This was adapted from Gluu Post Authentication script example .","title":"Use case: Dummy Post Authentication script (does not force re-authentication)"},{"location":"admin/developer/scripts/post-authentication/#script-type-python","text":"from io.jans.model.custom.script.type.postauthn import PostAuthnType class PostAuthn ( PostAuthnType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"Post Authn script. Initializing ...\" print \"Post Authn script. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"Post Authn script. Destroying ...\" print \"Post Authn script. Destroyed successfully\" return True def getApiVersion ( self ): return 11 def forceReAuthentication ( self , context ): return False def forceAuthorization ( self , context ): return False","title":"Script Type: Python"},{"location":"admin/developer/scripts/post-authentication/#script-type-java","text":"import java.util.Map ; import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.model.custom.script.type.postauthn.PostAuthnType ; import io.jans.service.custom.script.CustomScriptManager ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class PostAuthn implements PostAuthnType { private static final Logger log = LoggerFactory . getLogger ( CustomScriptManager . class ); @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Post Authentication. Initializing...\" ); log . info ( \"Post Authentication. Initialized\" ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Post Authentication. Initializing...\" ); log . info ( \"Post Authentication. Initialized\" ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Post Authentication. Destroying...\" ); log . info ( \"Post Authentication. Destroyed.\" ); return true ; } @Override public int getApiVersion () { return 11 ; } @Override public boolean forceReAuthentication ( Object context ) { return false ; } @Override public boolean forceAuthorization ( Object context ) { return false ; } }","title":"Script Type: Java"},{"location":"admin/developer/scripts/revoke-token/","tags":["administration","developer","scripts","RevokeToken"],"text":"Overview # Revoke Token scripts allow injecting custom logic during token revocation. Interface # The revoke token script implements the RevokeTokenType interface. This extends methods from the base script type in addition to adding new method: Inherited Methods # Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10 New Methods # Method header Method description def revoke(self, context) Token is revoked if this method returns True, skipped otherwise Objects # Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes context Reference Use Case: Basic Token Revocation # This script has been adapted from the Gluu Server sample revoke token script . Script Type: Python # from io.jans.model.custom.script.type.revoke import RevokeTokenType from java.lang import String class RevokeToken ( RevokeTokenType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"Revoke Token script. Initializing ...\" print \"Revoke Token script. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"Revoke Token script. Destroying ...\" print \"Revoke Token script. Destroyed successfully\" return True def getApiVersion ( self ): return 11 # This method is called during Revoke Token call. # If True is returned, token is revoked. If False is returned, revoking is skipped. def revoke ( self , context ): return True Script Type: Java # import java.util.Map ; import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.model.custom.script.type.revoke.RevokeTokenType ; import io.jans.service.custom.script.CustomScriptManager ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class RevokeToken implements RevokeTokenType { private static final Logger log = LoggerFactory . getLogger ( CustomScriptManager . class ); @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Token Revoke. Initializing...\" ); log . info ( \"Token Revoke. Initialized\" ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Token Revoke. Initializing...\" ); log . info ( \"Token Revoke. Initialized\" ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Token Revoke. Destroying...\" ); log . info ( \"Token Revoke. Destroyed.\" ); return true ; } @Override public int getApiVersion () { return 11 ; } @Override public boolean revoke ( Object context ) { return true ; } }","title":"Revoke Token"},{"location":"admin/developer/scripts/revoke-token/#overview","text":"Revoke Token scripts allow injecting custom logic during token revocation.","title":"Overview"},{"location":"admin/developer/scripts/revoke-token/#interface","text":"The revoke token script implements the RevokeTokenType interface. This extends methods from the base script type in addition to adding new method:","title":"Interface"},{"location":"admin/developer/scripts/revoke-token/#inherited-methods","text":"Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10","title":"Inherited Methods"},{"location":"admin/developer/scripts/revoke-token/#new-methods","text":"Method header Method description def revoke(self, context) Token is revoked if this method returns True, skipped otherwise","title":"New Methods"},{"location":"admin/developer/scripts/revoke-token/#objects","text":"Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes context Reference","title":"Objects"},{"location":"admin/developer/scripts/revoke-token/#use-case-basic-token-revocation","text":"This script has been adapted from the Gluu Server sample revoke token script .","title":"Use Case: Basic Token Revocation"},{"location":"admin/developer/scripts/revoke-token/#script-type-python","text":"from io.jans.model.custom.script.type.revoke import RevokeTokenType from java.lang import String class RevokeToken ( RevokeTokenType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"Revoke Token script. Initializing ...\" print \"Revoke Token script. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"Revoke Token script. Destroying ...\" print \"Revoke Token script. Destroyed successfully\" return True def getApiVersion ( self ): return 11 # This method is called during Revoke Token call. # If True is returned, token is revoked. If False is returned, revoking is skipped. def revoke ( self , context ): return True","title":"Script Type: Python"},{"location":"admin/developer/scripts/revoke-token/#script-type-java","text":"import java.util.Map ; import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.model.custom.script.type.revoke.RevokeTokenType ; import io.jans.service.custom.script.CustomScriptManager ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class RevokeToken implements RevokeTokenType { private static final Logger log = LoggerFactory . getLogger ( CustomScriptManager . class ); @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Token Revoke. Initializing...\" ); log . info ( \"Token Revoke. Initialized\" ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Token Revoke. Initializing...\" ); log . info ( \"Token Revoke. Initialized\" ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Token Revoke. Destroying...\" ); log . info ( \"Token Revoke. Destroyed.\" ); return true ; } @Override public int getApiVersion () { return 11 ; } @Override public boolean revoke ( Object context ) { return true ; } }","title":"Script Type: Java"},{"location":"admin/developer/scripts/ropc/","tags":["administration","developer","scripts","ResourceOwnerPasswordCredentials"],"text":"Overview # Resource Owner Password Credentials script allows modifying the behavior of Resource Owner Password Credentials Grant ( RFC 6749 ). The script is invoked after normal authentication and can either leave current result or change it - authenticate if not authenticated - it should return True and optionally set user (via context.setUser(user) ). Interface # The ROPC script implements the ResourceOwnerPasswordCredentialsType interface. This extends methods from the base script type in addition to adding new method: Inherited Methods # Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10 New Methods # Method header Method description def authenticate(self, context) This method is called after normal ROPC authentication. This method can cancel normal authentication if it returns false and sets context.setUser(null) Objects # Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes SimpleCustomProperty Map of configuration properties. Reference context Reference Use case: Basic ROPC authentication script # This script has been adapted from the Gluu Server sample ROPC script Script Type: Python # from io.jans.model.custom.script.type.owner import ResourceOwnerPasswordCredentialsType from io.jans.as.server.service import AuthenticationService from io.jans.service.cdi.util import CdiUtil from java.lang import String class ResourceOwnerPasswordCredentials ( ResourceOwnerPasswordCredentialsType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"ROPC script. Initializing ...\" self . usernameParamName = \"username\" self . passwordParamName = \"password\" print \"ROPC script. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"ROPC script. Destroying ...\" print \"ROPC script. Destroyed successfully\" return True def getApiVersion ( self ): return 11 # Returns True and set user into context when user authenticated succesfully # Returns False when user not authenticated or it's needed to cancel notmal flow def authenticate ( self , context ): print \"ROPC script. Authenticate\" deviceIdParam = context . getHttpRequest () . getParameterValues ( \"device_id\" ) if deviceIdParam != None and ( deviceIdParam . length > 0 ): result = deviceIdParam [ 0 ] == \"device_id_1\" if not result : return False # Set authenticated user in context # context.setUser(user) return True # Do generic authentication in other cases authService = CdiUtil . bean ( AuthenticationService ) username = context . getHttpRequest () . getParameter ( self . usernameParamName ) password = context . getHttpRequest () . getParameter ( self . passwordParamName ) result = authService . authenticate ( username , password ) if not result : print \"ROPC script. Authenticate. Could not authenticate user ' %s ' \" % username return False context . setUser ( authService . getAuthenticatedUser ()) return True Script Type: Java # import java.util.Map ; import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.model.custom.script.type.owner.ResourceOwnerPasswordCredentialsType ; import io.jans.service.custom.script.CustomScriptManager ; import io.jans.as.server.service.AuthenticationService ; import io.jans.service.cdi.util.CdiUtil ; import io.jans.as.server.service.external.context.ExternalResourceOwnerPasswordCredentialsContext ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class ResourceOwnerPasswordCredentials implements ResourceOwnerPasswordCredentialsType { private static final Logger log = LoggerFactory . getLogger ( CustomScriptManager . class ); private final String usernameParamName = \"username\" ; private final String passwordParamName = \"password\" ; @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"ROPC Script. Initializing...\" ); log . info ( \"ROPC Script. Initialized\" ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"ROPC Script. Initializing...\" ); log . info ( \"ROPC Script. Initialized\" ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"ROPC Script. Destroying...\" ); log . info ( \"ROPC Script. Destroyed.\" ); return true ; } @Override public int getApiVersion () { return 11 ; } @Override public boolean authenticate ( Object context ) { log . info ( \"ROPC script. Authenticate\" ); ExternalResourceOwnerPasswordCredentialsContext ropcContext = ( ExternalResourceOwnerPasswordCredentialsContext ) context ; String [] deviceIdParam = ropcContext . getHttpRequest (). getParameterValues ( \"device_id\" ); if ( deviceIdParam != null && deviceIdParam . length > 0 ) { boolean result = deviceIdParam [ 0 ] == \"device_id_1\" ; if ( ! result ) { return false ; } // Set authenticated user in context // context.setUser(user) return true ; } // generic authentication in other cases AuthenticationService authService = CdiUtil . bean ( AuthenticationService . class ); String username = ropcContext . getHttpRequest (). getParameter ( usernameParamName ); String password = ropcContext . getHttpRequest (). getParameter ( passwordParamName ); boolean result = authService . authenticate ( username , password ); if ( ! result ) { log . info ( \"ROPC script. Authenticate. Could not authenticate \" + username ); return false ; } ropcContext . setUser ( authService . getAuthenticatedUser ()); return true ; } } Sample Scripts # Super Gluu ROPW Script 3 Step ROPW Script","title":"Resource Owner Password Credentials"},{"location":"admin/developer/scripts/ropc/#overview","text":"Resource Owner Password Credentials script allows modifying the behavior of Resource Owner Password Credentials Grant ( RFC 6749 ). The script is invoked after normal authentication and can either leave current result or change it - authenticate if not authenticated - it should return True and optionally set user (via context.setUser(user) ).","title":"Overview"},{"location":"admin/developer/scripts/ropc/#interface","text":"The ROPC script implements the ResourceOwnerPasswordCredentialsType interface. This extends methods from the base script type in addition to adding new method:","title":"Interface"},{"location":"admin/developer/scripts/ropc/#inherited-methods","text":"Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10","title":"Inherited Methods"},{"location":"admin/developer/scripts/ropc/#new-methods","text":"Method header Method description def authenticate(self, context) This method is called after normal ROPC authentication. This method can cancel normal authentication if it returns false and sets context.setUser(null)","title":"New Methods"},{"location":"admin/developer/scripts/ropc/#objects","text":"Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes SimpleCustomProperty Map of configuration properties. Reference context Reference","title":"Objects"},{"location":"admin/developer/scripts/ropc/#use-case-basic-ropc-authentication-script","text":"This script has been adapted from the Gluu Server sample ROPC script","title":"Use case: Basic ROPC authentication script"},{"location":"admin/developer/scripts/ropc/#script-type-python","text":"from io.jans.model.custom.script.type.owner import ResourceOwnerPasswordCredentialsType from io.jans.as.server.service import AuthenticationService from io.jans.service.cdi.util import CdiUtil from java.lang import String class ResourceOwnerPasswordCredentials ( ResourceOwnerPasswordCredentialsType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"ROPC script. Initializing ...\" self . usernameParamName = \"username\" self . passwordParamName = \"password\" print \"ROPC script. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"ROPC script. Destroying ...\" print \"ROPC script. Destroyed successfully\" return True def getApiVersion ( self ): return 11 # Returns True and set user into context when user authenticated succesfully # Returns False when user not authenticated or it's needed to cancel notmal flow def authenticate ( self , context ): print \"ROPC script. Authenticate\" deviceIdParam = context . getHttpRequest () . getParameterValues ( \"device_id\" ) if deviceIdParam != None and ( deviceIdParam . length > 0 ): result = deviceIdParam [ 0 ] == \"device_id_1\" if not result : return False # Set authenticated user in context # context.setUser(user) return True # Do generic authentication in other cases authService = CdiUtil . bean ( AuthenticationService ) username = context . getHttpRequest () . getParameter ( self . usernameParamName ) password = context . getHttpRequest () . getParameter ( self . passwordParamName ) result = authService . authenticate ( username , password ) if not result : print \"ROPC script. Authenticate. Could not authenticate user ' %s ' \" % username return False context . setUser ( authService . getAuthenticatedUser ()) return True","title":"Script Type: Python"},{"location":"admin/developer/scripts/ropc/#script-type-java","text":"import java.util.Map ; import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.model.custom.script.type.owner.ResourceOwnerPasswordCredentialsType ; import io.jans.service.custom.script.CustomScriptManager ; import io.jans.as.server.service.AuthenticationService ; import io.jans.service.cdi.util.CdiUtil ; import io.jans.as.server.service.external.context.ExternalResourceOwnerPasswordCredentialsContext ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class ResourceOwnerPasswordCredentials implements ResourceOwnerPasswordCredentialsType { private static final Logger log = LoggerFactory . getLogger ( CustomScriptManager . class ); private final String usernameParamName = \"username\" ; private final String passwordParamName = \"password\" ; @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"ROPC Script. Initializing...\" ); log . info ( \"ROPC Script. Initialized\" ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"ROPC Script. Initializing...\" ); log . info ( \"ROPC Script. Initialized\" ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"ROPC Script. Destroying...\" ); log . info ( \"ROPC Script. Destroyed.\" ); return true ; } @Override public int getApiVersion () { return 11 ; } @Override public boolean authenticate ( Object context ) { log . info ( \"ROPC script. Authenticate\" ); ExternalResourceOwnerPasswordCredentialsContext ropcContext = ( ExternalResourceOwnerPasswordCredentialsContext ) context ; String [] deviceIdParam = ropcContext . getHttpRequest (). getParameterValues ( \"device_id\" ); if ( deviceIdParam != null && deviceIdParam . length > 0 ) { boolean result = deviceIdParam [ 0 ] == \"device_id_1\" ; if ( ! result ) { return false ; } // Set authenticated user in context // context.setUser(user) return true ; } // generic authentication in other cases AuthenticationService authService = CdiUtil . bean ( AuthenticationService . class ); String username = ropcContext . getHttpRequest (). getParameter ( usernameParamName ); String password = ropcContext . getHttpRequest (). getParameter ( passwordParamName ); boolean result = authService . authenticate ( username , password ); if ( ! result ) { log . info ( \"ROPC script. Authenticate. Could not authenticate \" + username ); return false ; } ropcContext . setUser ( authService . getAuthenticatedUser ()); return true ; } }","title":"Script Type: Java"},{"location":"admin/developer/scripts/ropc/#sample-scripts","text":"Super Gluu ROPW Script 3 Step ROPW Script","title":"Sample Scripts"},{"location":"admin/developer/scripts/scim/","tags":["administration","developer","scripts"],"text":"SCIM Guide # Overview # SCIM script allows you to execute custom logic when certain SCIM API operations are invoked. With SCIM scripts, custom business logic can be executed when several of the SCIM API operations are invoked. This is useful in many situations, for example: Trigger notifications to external systems when certain resources are deleted Alter the actual responses the service produces Attach additional information to resources when they are created or updated Implement a fine-grained level of access to resources so different callers have permission to handle only a restricted number of resources Notes: # In this document, the term resources refer to those \"entities\" the service can manage, for instance, users or groups The term operation refers to any SCIM functionality accessible through its HTTP endpoints Basic development skills are assumed. Some grasp of Java and Python are required as well as understanding of the SCIM protocol. Interface # Methods # API Overview Custom scripts adhere to a simple API (ie. a well-defined collection of methods/routines) that is described in the following. It is advised to check the dummy script provided here as you read this section. Scripts' config properties All methods contain a configurationAttributes parameter, this gives access to the configuration properties of the script itself. This is a relevant aspect of Gluu scripts: they are all parameterizable!. configurationAttributes is a java.util.Map<String, SimpleCustomProperty> and here is how SimpleCustomProperty looks. Basic Methods These are methods not related to SCIM operations but still play key roles: |Method Name|Description|Return Value| |:---|:---|:---| | init |Called when the (SCIM) service starts and every time the script properties or code changes|A boolean value describing success or failure| | destroy |Called every time the script properties or code changes (called before init )|A boolean value describing success or failure| | getApiVersion |Determines what methods are effectively called when SCIM endpoints are invoked|A positive integer| Pre-resource Modification They are called when the resource is about to be persisted. The second parameter in these methods hold the object that will be persisted to permanent storage, thus any change or manipulation upon the object will be reflected in the underlying database (as well as in the output of the SCIM operation call itself). These methods are called regardless of the API version used. Names are self explanatory: Methods 2nd param 2nd param Class/Link createUser , updateUser , deleteUser user ScimCustomPerson createGroup , updateGroup , deleteGroup group GluuGroup Pre-resource modification methods return a boolean. A False value aborts the corresponding SCIM operation and a 500 error is returned. The same applies if the method execution crashes at runtime. Note that update* methods are called for both SCIM PUT and PATCH operations. Post-resource Modification They are called after the resource is persisted. The second parameter in these methods hold the object that was saved. Any change or manipulation upon the object will not be reflected in the underlying database, but may still modify the service response. These methods are called if getApiVersion returns a number >= 2. Methods 2nd param 2nd param Class/Link postCreateUser , postUpdateUser , postDeleteUser user ScimCustomPerson postCreateGroup , postUpdateGroup , postDeleteGroup group GluuGroup Post-resource modification methods return a boolean. A False value aborts the corresponding SCIM operation and a 500 error is returned. The same applies if the method execution crashes at runtime. Note that postUpdate* methods are called for both SCIM PUT and PATCH operations. Single Resource Retrieval These apply for SCIM operations that retrieve a resource by ID. They are called after the resource has been obtained from the database. The second parameter in these methods hold a reference to such object. Any change or manipulation upon the object will not be reflected in the underlying database, but may still modify the service response. These methods are called if getApiVersion returns a number >= 3. Methods 2nd param 2nd param Class/Link getUser user ScimCustomPerson getGroup group GluuGroup Single resource retrieval methods return a boolean. A False value aborts the whole SCIM operation and a 500 error is returned. The same applies if the method execution crashes at runtime. Multiple Resources Retrieval These apply for SCIM search operations. They are called after the results have been obtained from the database. The second parameter in these methods hold a reference to such result set. Any change or manipulation upon the object will not be reflected in the underlying database, but may still modify the service response. These methods are called if getApiVersion returns a number >= 4. Methods 2nd param 2nd param Class/Link postSearchUsers results PagedResult postSearchGroups results PagedResult Multiple resources retrieval methods return a boolean. A False value aborts the whole SCIM operation and a 500 error is returned. The same applies if the method execution crashes at runtime. Note that searching using the root .search SCIM endpoint will trigger calls to both of the methods listed. Advanced control These are alternative methods that allow to tweak the response the service produces. They can be employed to introduce complex business rules when operations are executed. These methods are called if getApiVersion returns a number >= 5. Methods manageResourceOperation manageSearchOperation Example: Modifying Search Results # SCIM spec defines the concept of attribute returnability where some attributes should never be part of a response (like passwords), always be returned (like resource identifiers), or be returned by default unless otherwise stated by the excludedAttributes parameter. Assume you are maintaining a user base of secret agents that work for your company and need to avoid exposing information such as their physical addresses for safety reasons. To keep it simple let's restrict the scope to user searches only. In practice you should take steps to hide this data on user retrieval and update. Let's alter postSearchUsers 's second parameter ( results ) to ensure addresses are not leaked: for user in results . getEntries () : user . setAttribute ( \"jansAddres\" , None ) This is very straightforward code except for the usage of jansAddres . Shouldn't it be simply addresses as the known SCIM attribute? Scripts work with entities that are about to be persisted or have already been saved so they kind of resemble the database structure (schema in LDAP terms). It turns out that database attribute names rarely match with SCIM names. While it is easy to know the SCIM name of a database attribute, the converse requires checking the code, however since you already have the skill this shouldn't be a problem: in this Java class you'll find the representation of a user resource in SCIM spec terms. Pay attention to the addresses field and its associated StoreReference annotation that contains the attribute where addresses are actually stored. With that said, save your modifications. You may like the idea of adding some prints for enlightment like: print \"%d entries returned of %d\" % ( results . getEntriesCount () , results . getTotalEntriesCount ()) for user in results . getEntries () : print \"Flushing addresses for user %s\" % user . getUid () user . setAttribute ( \"jansAddres\" , None ) Ensure no addresses are returned anymore in your SCIM user searches. Happy testing! Controlling execution of SCIM operations # With the manageResourceOperation and manageSearchOperation methods you can make complex decisions on how processing should take place based on contextual data and the incoming payload. manageResourceOperation This method is invoked when any following operations are executed: resource creation, modification, removal and retrieval by ID. In case of bulks, the method is called for every operation that fits into these categories. Parameters are described in the table below: Name Description Class/Link context Provides contextual information about the SCIM operation being called such as type of resource involved, HTTP verb, request headers, query params, etc. OperationContext entity A non-null object representing the resource involved A descendant of Entry . If the resource is a user, it will be an instance of ScimCustomPerson . In case of a group, it will be a GluuGroup payload The payload sent in the invocation; null when the operation is removal or retrieval by ID The datatype depends on the operation called. Check the interface that suits best and inspect the first parameter's datatype. The class will belong to some subpackage inside io.jans.scim.model.scim2 This method is expected to return an instance of javax.ws.rs.core.Response that supersedes the output of the operation itself. In other words, the actual processing of the operation is skipped in favor of the code supplied here. However note that minor validations may take place in the payload before your code is actually called. Returning None transfers the control of the operation for normal processing (default Jans implementation). If the method execution crashes at runtime, a 500 HTTP error is sent. Notes: Possible values for context.getResourceType() are: User, Group, FidoDevice, Fido2Device context.getTokenDetails().getValue() is a shortcut that will give you the access token the caller employed to issue the service call Both context.getTokenDetails().getTokenType() and context.getTokenDetails().getScope() return non null values when the protection mechanism of the API is OAuth or test mode Note that for resource creation operation, entity basically contains the same data supplied in the POST payload . In this case, entity has not originated from the database and has not been persisted either For the case of modification, retrieval and removal, entity contains the data currently stored in the database for the resource in question Since many values come from Java code, you can always do getClass().getName() to get an idea of what type of variables you are dealing with To build custom error responses your can reuse some of the getErrorResponse methods of class BaseScimWebService This method offers a high degree of flexibility. Perform careful testing of your code and account all potential scenarios. manageSearchOperation This method is invoked when resource searches are performed. Parameters are described in the table below: name Description Class/Link context Provides contextual information about the SCIM operation being called such as type of resource involved, HTTP verb, request headers, query params, etc. OperationContext searchRequest An object representing the search parameters provided in the call (applies for both GET and POST) SearchRequest Unlike manageResourceOperation , no entity parameter is passed. This is so because making decisions based on already executed searches would have a performance impact. Instead you can use context.setFilterPrepend(...) to help restrict the search against the database: here you can pass a String value that will be interpreted as an SCIM filter expression (see section 3.4.2.2 of RFC 7644). When the search being performed already contains a search filter (i.e. searchRequest.getFilter() is non-empty), a new filter is created by appending both \"subfilters\" with an and operator. As in the case of manageResourceOperation this method is expected to return an instance of javax.ws.rs.core.Response . Returning None transfers the control of the operation for normal processing (the Jans implementation). If the method execution crashes at runtime, a 500 HTTP error is sent. The same recommendations given for manageResourceOperation apply here. If you build filter expressions in your method, ensure they are syntactically valid to avoid your callers getting unexpected \"invalidFilter\" 400 errors. Example: segmenting the user base Let's assume you make use of the SCIM attribute userType so that your user base is partitioned into three disjoint segments according to such attribute and you have designated its possible values to be: Contractor, Employee, or Intern. Suppose your company has three different applications that make management of users in every category, that is, only one application is devoted to manage contractors, another employees, and other interns. You are interested in consistently granting access so that no application can create, query or modify users that don't belong to its focus. To properly handle this multi-tenancy scenario, you decide to use the contextual information coming from every request to determine if the operation should be allowed or not. For this purpose you communicate every application developer to send an additional HTTP header in their call with a value that only you (the administrator) and the developer knows. Let's call it the \"secret\". For the sake of simplicity let's assume developers are external to the company and only you know their identities. They don't know each other so they cannot exchange secrets. The strategy to implement segmentation is rather simple: Alter the default SCIM script by supplying a custom implementation for the methods that control execution Make the HTTP header name be a configuration property of the script so that it is not hard-coded Add a configuration property that contains the mapping of userType value vs. expected header value in JSON format Adding and parsing config properties Using Jans Config CLI update the SCIM script and add properties: custom_header with value USER-SEGMENT-SECRET access_map with value { \"<random_string>\":\"Contractor\", \"<random_string>\":\"Employee\", \"<random_string>\":\"Intern\" } Save the changes. In the init method this properties should be parsed. To start, let's add some imports: from io.jans.scim.ws.rs.scim2 import BaseScimWebService import json Here is how init would look like: def init ( self , configurationAttributes ): self . custom_header = configurationAttributes . get ( \"custom_header\" ) . getValue2 () access_map_json = configurationAttributes . get ( \"access_map\" ) . getValue2 () self . access_map = json . loads ( access_map_json ) print \"ScimEventHandler (init): Initialized successfully\" return True Note no validations took place here: we assumed the script contains the properties, that they are non empty and have sensible values. Allow/Deny resource operations The first step is to know the kind of application that is calling our service. For this purpose let's create a method that given incoming request headers returns the matching userType # headers params is an instance of javax . ws . rs . core . MultivaluedMap < String , String > def getUserType ( self , headers ) : secret = headers . getFirst ( self . custom_header ) if secret in self . access_map : return self . access_map [ secret ] else : return None Now let's code manageResourceOperation . We should allow access only under the following conditions: The getUserType method does not return None The entity object ( ScimCustomPerson instance) has a proper userType value. This means that for user creation, the incoming payload comes with a matching userType and for the other cases, the already stored attribute matches as well Assume that if the operation invoked is not user-related, we should allow access freely. Here is how the implementation might look: def manageResourceOperation ( self , context , entity , payload , configurationAttributes ): print \"manageResourceOperation. SCIM endpoint invoked is %s (HTTP %s )\" % ( context . getPath (), context . getMethod ()) if context . getResourceType () != \"User\" : return None expected_user_type = self . getUserType ( context . getRequestHeaders ()) if expected_user_type != None and entity . getAttribute ( \"jansUsrTyp\" ) == expected_user_type : return None else : return BaseScimWebService . getErrorResponse ( 403 , None , \"Attempt to handle a not allowed user type\" ) Note no usage of the payload took place. A case you may like to evaluate is where mistakenly using an update operation, the userType is set to an unexpected value. Allow/Deny searches This time instead of inspecting an entity, we ought to make a filter expression to restrict the search when the database is queried. For your reference, a valid filter expression is for instance userType eq \"Contractor\" . def manageSearchOperation ( self , context , searchRequest , configurationAttributes ) : print \"manageSearchOperation. SCIM endpoint invoked is %s (HTTP %s)\" % ( context . getPath () , context . getMethod ()) resource_type = context . getResourceType () print \"manageSearchOperation. This is a search over %s resources\" % resource_type if resource_type != \"User\" : return None expected_user_type = self . getUserType ( context . getRequestHeaders ()) if expected_user_type != None : context . setFilterPrepend ( \"userType eq \\\" % s \\ \"\" % expected_user_type ) return None else : return BaseScimWebService . getErrorResponse ( 403 , None , \"Attempt to handle a not allowed user type\" ) The manageSearchOperation must return a javax.ws.rs.core.Response . A None value makes continue the operation processing normally. Working with more than one script # You may have already noticed that it is possible to have several scripts under the SCIM type. This is how execution takes place when there are several scripts enabled: The applicable method is called in the first script. If the return value was True , the method is called again but this time in the subsequent script. If at any point a False return value is encountered, the SCIM operation is aborted with error 500. This means that a normal operation execution requires all involved methods across different scripts to be successful. There is an important exception to the above and is related to the manage* methods. In this case, only one script takes effect (the first script found). Note that in most cases having a single SCIM script suffices for all needs. Common Use Cases # Script Type: Python # Custom SCIM Event Handler # Find the script here The sample code snippet shows how to - 1. Modify Search Results 2. Segment the user base 3. Allow/Deny resource operations 4. Allow/Deny searches Script Type: Java # Custom SCIM Event Handler # Find the code here The sample code snippet shows how to - 1. Modify Search Results 2. Segment the user base 3. Allow/Deny resource operations 4. Allow/Deny searches","title":"SCIM"},{"location":"admin/developer/scripts/scim/#scim-guide","text":"","title":"SCIM Guide"},{"location":"admin/developer/scripts/scim/#overview","text":"SCIM script allows you to execute custom logic when certain SCIM API operations are invoked. With SCIM scripts, custom business logic can be executed when several of the SCIM API operations are invoked. This is useful in many situations, for example: Trigger notifications to external systems when certain resources are deleted Alter the actual responses the service produces Attach additional information to resources when they are created or updated Implement a fine-grained level of access to resources so different callers have permission to handle only a restricted number of resources","title":"Overview"},{"location":"admin/developer/scripts/scim/#notes","text":"In this document, the term resources refer to those \"entities\" the service can manage, for instance, users or groups The term operation refers to any SCIM functionality accessible through its HTTP endpoints Basic development skills are assumed. Some grasp of Java and Python are required as well as understanding of the SCIM protocol.","title":"Notes:"},{"location":"admin/developer/scripts/scim/#interface","text":"","title":"Interface"},{"location":"admin/developer/scripts/scim/#methods","text":"API Overview Custom scripts adhere to a simple API (ie. a well-defined collection of methods/routines) that is described in the following. It is advised to check the dummy script provided here as you read this section. Scripts' config properties All methods contain a configurationAttributes parameter, this gives access to the configuration properties of the script itself. This is a relevant aspect of Gluu scripts: they are all parameterizable!. configurationAttributes is a java.util.Map<String, SimpleCustomProperty> and here is how SimpleCustomProperty looks. Basic Methods These are methods not related to SCIM operations but still play key roles: |Method Name|Description|Return Value| |:---|:---|:---| | init |Called when the (SCIM) service starts and every time the script properties or code changes|A boolean value describing success or failure| | destroy |Called every time the script properties or code changes (called before init )|A boolean value describing success or failure| | getApiVersion |Determines what methods are effectively called when SCIM endpoints are invoked|A positive integer| Pre-resource Modification They are called when the resource is about to be persisted. The second parameter in these methods hold the object that will be persisted to permanent storage, thus any change or manipulation upon the object will be reflected in the underlying database (as well as in the output of the SCIM operation call itself). These methods are called regardless of the API version used. Names are self explanatory: Methods 2nd param 2nd param Class/Link createUser , updateUser , deleteUser user ScimCustomPerson createGroup , updateGroup , deleteGroup group GluuGroup Pre-resource modification methods return a boolean. A False value aborts the corresponding SCIM operation and a 500 error is returned. The same applies if the method execution crashes at runtime. Note that update* methods are called for both SCIM PUT and PATCH operations. Post-resource Modification They are called after the resource is persisted. The second parameter in these methods hold the object that was saved. Any change or manipulation upon the object will not be reflected in the underlying database, but may still modify the service response. These methods are called if getApiVersion returns a number >= 2. Methods 2nd param 2nd param Class/Link postCreateUser , postUpdateUser , postDeleteUser user ScimCustomPerson postCreateGroup , postUpdateGroup , postDeleteGroup group GluuGroup Post-resource modification methods return a boolean. A False value aborts the corresponding SCIM operation and a 500 error is returned. The same applies if the method execution crashes at runtime. Note that postUpdate* methods are called for both SCIM PUT and PATCH operations. Single Resource Retrieval These apply for SCIM operations that retrieve a resource by ID. They are called after the resource has been obtained from the database. The second parameter in these methods hold a reference to such object. Any change or manipulation upon the object will not be reflected in the underlying database, but may still modify the service response. These methods are called if getApiVersion returns a number >= 3. Methods 2nd param 2nd param Class/Link getUser user ScimCustomPerson getGroup group GluuGroup Single resource retrieval methods return a boolean. A False value aborts the whole SCIM operation and a 500 error is returned. The same applies if the method execution crashes at runtime. Multiple Resources Retrieval These apply for SCIM search operations. They are called after the results have been obtained from the database. The second parameter in these methods hold a reference to such result set. Any change or manipulation upon the object will not be reflected in the underlying database, but may still modify the service response. These methods are called if getApiVersion returns a number >= 4. Methods 2nd param 2nd param Class/Link postSearchUsers results PagedResult postSearchGroups results PagedResult Multiple resources retrieval methods return a boolean. A False value aborts the whole SCIM operation and a 500 error is returned. The same applies if the method execution crashes at runtime. Note that searching using the root .search SCIM endpoint will trigger calls to both of the methods listed. Advanced control These are alternative methods that allow to tweak the response the service produces. They can be employed to introduce complex business rules when operations are executed. These methods are called if getApiVersion returns a number >= 5. Methods manageResourceOperation manageSearchOperation","title":"Methods"},{"location":"admin/developer/scripts/scim/#example-modifying-search-results","text":"SCIM spec defines the concept of attribute returnability where some attributes should never be part of a response (like passwords), always be returned (like resource identifiers), or be returned by default unless otherwise stated by the excludedAttributes parameter. Assume you are maintaining a user base of secret agents that work for your company and need to avoid exposing information such as their physical addresses for safety reasons. To keep it simple let's restrict the scope to user searches only. In practice you should take steps to hide this data on user retrieval and update. Let's alter postSearchUsers 's second parameter ( results ) to ensure addresses are not leaked: for user in results . getEntries () : user . setAttribute ( \"jansAddres\" , None ) This is very straightforward code except for the usage of jansAddres . Shouldn't it be simply addresses as the known SCIM attribute? Scripts work with entities that are about to be persisted or have already been saved so they kind of resemble the database structure (schema in LDAP terms). It turns out that database attribute names rarely match with SCIM names. While it is easy to know the SCIM name of a database attribute, the converse requires checking the code, however since you already have the skill this shouldn't be a problem: in this Java class you'll find the representation of a user resource in SCIM spec terms. Pay attention to the addresses field and its associated StoreReference annotation that contains the attribute where addresses are actually stored. With that said, save your modifications. You may like the idea of adding some prints for enlightment like: print \"%d entries returned of %d\" % ( results . getEntriesCount () , results . getTotalEntriesCount ()) for user in results . getEntries () : print \"Flushing addresses for user %s\" % user . getUid () user . setAttribute ( \"jansAddres\" , None ) Ensure no addresses are returned anymore in your SCIM user searches. Happy testing!","title":"Example: Modifying Search Results"},{"location":"admin/developer/scripts/scim/#controlling-execution-of-scim-operations","text":"With the manageResourceOperation and manageSearchOperation methods you can make complex decisions on how processing should take place based on contextual data and the incoming payload. manageResourceOperation This method is invoked when any following operations are executed: resource creation, modification, removal and retrieval by ID. In case of bulks, the method is called for every operation that fits into these categories. Parameters are described in the table below: Name Description Class/Link context Provides contextual information about the SCIM operation being called such as type of resource involved, HTTP verb, request headers, query params, etc. OperationContext entity A non-null object representing the resource involved A descendant of Entry . If the resource is a user, it will be an instance of ScimCustomPerson . In case of a group, it will be a GluuGroup payload The payload sent in the invocation; null when the operation is removal or retrieval by ID The datatype depends on the operation called. Check the interface that suits best and inspect the first parameter's datatype. The class will belong to some subpackage inside io.jans.scim.model.scim2 This method is expected to return an instance of javax.ws.rs.core.Response that supersedes the output of the operation itself. In other words, the actual processing of the operation is skipped in favor of the code supplied here. However note that minor validations may take place in the payload before your code is actually called. Returning None transfers the control of the operation for normal processing (default Jans implementation). If the method execution crashes at runtime, a 500 HTTP error is sent. Notes: Possible values for context.getResourceType() are: User, Group, FidoDevice, Fido2Device context.getTokenDetails().getValue() is a shortcut that will give you the access token the caller employed to issue the service call Both context.getTokenDetails().getTokenType() and context.getTokenDetails().getScope() return non null values when the protection mechanism of the API is OAuth or test mode Note that for resource creation operation, entity basically contains the same data supplied in the POST payload . In this case, entity has not originated from the database and has not been persisted either For the case of modification, retrieval and removal, entity contains the data currently stored in the database for the resource in question Since many values come from Java code, you can always do getClass().getName() to get an idea of what type of variables you are dealing with To build custom error responses your can reuse some of the getErrorResponse methods of class BaseScimWebService This method offers a high degree of flexibility. Perform careful testing of your code and account all potential scenarios. manageSearchOperation This method is invoked when resource searches are performed. Parameters are described in the table below: name Description Class/Link context Provides contextual information about the SCIM operation being called such as type of resource involved, HTTP verb, request headers, query params, etc. OperationContext searchRequest An object representing the search parameters provided in the call (applies for both GET and POST) SearchRequest Unlike manageResourceOperation , no entity parameter is passed. This is so because making decisions based on already executed searches would have a performance impact. Instead you can use context.setFilterPrepend(...) to help restrict the search against the database: here you can pass a String value that will be interpreted as an SCIM filter expression (see section 3.4.2.2 of RFC 7644). When the search being performed already contains a search filter (i.e. searchRequest.getFilter() is non-empty), a new filter is created by appending both \"subfilters\" with an and operator. As in the case of manageResourceOperation this method is expected to return an instance of javax.ws.rs.core.Response . Returning None transfers the control of the operation for normal processing (the Jans implementation). If the method execution crashes at runtime, a 500 HTTP error is sent. The same recommendations given for manageResourceOperation apply here. If you build filter expressions in your method, ensure they are syntactically valid to avoid your callers getting unexpected \"invalidFilter\" 400 errors. Example: segmenting the user base Let's assume you make use of the SCIM attribute userType so that your user base is partitioned into three disjoint segments according to such attribute and you have designated its possible values to be: Contractor, Employee, or Intern. Suppose your company has three different applications that make management of users in every category, that is, only one application is devoted to manage contractors, another employees, and other interns. You are interested in consistently granting access so that no application can create, query or modify users that don't belong to its focus. To properly handle this multi-tenancy scenario, you decide to use the contextual information coming from every request to determine if the operation should be allowed or not. For this purpose you communicate every application developer to send an additional HTTP header in their call with a value that only you (the administrator) and the developer knows. Let's call it the \"secret\". For the sake of simplicity let's assume developers are external to the company and only you know their identities. They don't know each other so they cannot exchange secrets. The strategy to implement segmentation is rather simple: Alter the default SCIM script by supplying a custom implementation for the methods that control execution Make the HTTP header name be a configuration property of the script so that it is not hard-coded Add a configuration property that contains the mapping of userType value vs. expected header value in JSON format Adding and parsing config properties Using Jans Config CLI update the SCIM script and add properties: custom_header with value USER-SEGMENT-SECRET access_map with value { \"<random_string>\":\"Contractor\", \"<random_string>\":\"Employee\", \"<random_string>\":\"Intern\" } Save the changes. In the init method this properties should be parsed. To start, let's add some imports: from io.jans.scim.ws.rs.scim2 import BaseScimWebService import json Here is how init would look like: def init ( self , configurationAttributes ): self . custom_header = configurationAttributes . get ( \"custom_header\" ) . getValue2 () access_map_json = configurationAttributes . get ( \"access_map\" ) . getValue2 () self . access_map = json . loads ( access_map_json ) print \"ScimEventHandler (init): Initialized successfully\" return True Note no validations took place here: we assumed the script contains the properties, that they are non empty and have sensible values. Allow/Deny resource operations The first step is to know the kind of application that is calling our service. For this purpose let's create a method that given incoming request headers returns the matching userType # headers params is an instance of javax . ws . rs . core . MultivaluedMap < String , String > def getUserType ( self , headers ) : secret = headers . getFirst ( self . custom_header ) if secret in self . access_map : return self . access_map [ secret ] else : return None Now let's code manageResourceOperation . We should allow access only under the following conditions: The getUserType method does not return None The entity object ( ScimCustomPerson instance) has a proper userType value. This means that for user creation, the incoming payload comes with a matching userType and for the other cases, the already stored attribute matches as well Assume that if the operation invoked is not user-related, we should allow access freely. Here is how the implementation might look: def manageResourceOperation ( self , context , entity , payload , configurationAttributes ): print \"manageResourceOperation. SCIM endpoint invoked is %s (HTTP %s )\" % ( context . getPath (), context . getMethod ()) if context . getResourceType () != \"User\" : return None expected_user_type = self . getUserType ( context . getRequestHeaders ()) if expected_user_type != None and entity . getAttribute ( \"jansUsrTyp\" ) == expected_user_type : return None else : return BaseScimWebService . getErrorResponse ( 403 , None , \"Attempt to handle a not allowed user type\" ) Note no usage of the payload took place. A case you may like to evaluate is where mistakenly using an update operation, the userType is set to an unexpected value. Allow/Deny searches This time instead of inspecting an entity, we ought to make a filter expression to restrict the search when the database is queried. For your reference, a valid filter expression is for instance userType eq \"Contractor\" . def manageSearchOperation ( self , context , searchRequest , configurationAttributes ) : print \"manageSearchOperation. SCIM endpoint invoked is %s (HTTP %s)\" % ( context . getPath () , context . getMethod ()) resource_type = context . getResourceType () print \"manageSearchOperation. This is a search over %s resources\" % resource_type if resource_type != \"User\" : return None expected_user_type = self . getUserType ( context . getRequestHeaders ()) if expected_user_type != None : context . setFilterPrepend ( \"userType eq \\\" % s \\ \"\" % expected_user_type ) return None else : return BaseScimWebService . getErrorResponse ( 403 , None , \"Attempt to handle a not allowed user type\" ) The manageSearchOperation must return a javax.ws.rs.core.Response . A None value makes continue the operation processing normally.","title":"Controlling execution of SCIM operations"},{"location":"admin/developer/scripts/scim/#working-with-more-than-one-script","text":"You may have already noticed that it is possible to have several scripts under the SCIM type. This is how execution takes place when there are several scripts enabled: The applicable method is called in the first script. If the return value was True , the method is called again but this time in the subsequent script. If at any point a False return value is encountered, the SCIM operation is aborted with error 500. This means that a normal operation execution requires all involved methods across different scripts to be successful. There is an important exception to the above and is related to the manage* methods. In this case, only one script takes effect (the first script found). Note that in most cases having a single SCIM script suffices for all needs.","title":"Working with more than one script"},{"location":"admin/developer/scripts/scim/#common-use-cases","text":"","title":"Common Use Cases"},{"location":"admin/developer/scripts/scim/#script-type-python","text":"","title":"Script Type: Python"},{"location":"admin/developer/scripts/scim/#custom-scim-event-handler","text":"Find the script here The sample code snippet shows how to - 1. Modify Search Results 2. Segment the user base 3. Allow/Deny resource operations 4. Allow/Deny searches","title":"Custom SCIM Event Handler"},{"location":"admin/developer/scripts/scim/#script-type-java","text":"","title":"Script Type: Java"},{"location":"admin/developer/scripts/scim/#custom-scim-event-handler_1","text":"Find the code here The sample code snippet shows how to - 1. Modify Search Results 2. Segment the user base 3. Allow/Deny resource operations 4. Allow/Deny searches","title":"Custom SCIM Event Handler"},{"location":"admin/developer/scripts/select-account/","tags":["administration","developer","scripts","SelectAccount"],"text":"Overview # A person may have several accounts on a single Jans Auth Server instance. For example, it is common to have several Gmail accounts. Jans Auth Server uses two cookies to track which accounts are associated with a browser: session_id and current_sessions . Please check Multiple Sessions In One Browser Overview Select Account interception script can be used to customize account selection behavior. E.g. redirect to external page or change text representation of sessions on page. Interface # The select account script implements the SelectAccountType interface. This extends methods from the base script type in addition to adding new methods: Inherited Methods # Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10 New Methods # Method header Method description def getSelectAccountPage(self, context) This method is called to return path to custom select account page (e.g. /customs/page/path/myselectaccount.xhtml) def prepare(self, context) This method is called before select account page is loaded. It can be used to prevent loading or redirect to external url. def getAccountDisplayName(self, context) This method is used to customize text representation of the session shown on the page. Returns display name for given session id (https://github.com/JanssenProject/jans/blob/main/jans-auth-server/common/src/main/java/io/jans/as/common/model/session/SessionId.java). def onSelect(self, context) This method is called on session selection and can be used to forbid selection. Objects # Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes SimpleCustomProperty Map of configuration properties. Reference context Execution Context Reference Use case: Dummy Select Account example script (does not have impact on built-in account selection) # Select Account script example . Script Type: Python # # oxAuth is available under the MIT License (2008). See http://opensource.org/licenses/MIT for full text. # Copyright (c) 2020, Janssen # # Author: Yuriy Z # from io.jans.model.custom.script.type.selectaccount import SelectAccountType from java.lang import String class SelectAccount ( SelectAccountType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"SelectAccount script. Initializing ...\" print \"SelectAccount script. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"SelectAccount script. Destroying ...\" print \"SelectAccount script. Destroyed successfully\" return True def getApiVersion ( self ): return 11 # Returns path to select account page (e.g. /customs/page/path/myselectaccount.xhtml) # If none or empty string is returned, AS uses built-in page. # (Note: Custom page can be also put into `custom/pages/selectAccount.xhtml` and used without custom script.) # context is reference of io.jans.as.server.model.common.ExecutionContext( https://github.com/JanssenProject/jans/blob/main/jans-auth-server/server/src/main/java/io/jans/as/server/model/common/ExecutionContext.java ) def getSelectAccountPage ( self , context ): return \"\" # This method is called before select account page is loaded. # It is good place to make preparation processing. # E.g. check whether it is ok to land on select account page or maybe redirect to external page. # Return True - continue loading of the page # Return False - stop loading and show error page # context is reference of io.jans.as.server.model.common.ExecutionContext( https://github.com/JanssenProject/jans/blob/main/jans-auth-server/server/src/main/java/io/jans/as/server/model/common/ExecutionContext.java ) def prepare ( self , context ): return True # Returns display name for given session id (https://github.com/JanssenProject/jans/blob/main/jans-auth-server/common/src/main/java/io/jans/as/common/model/session/SessionId.java). # Session can be accessed via context.getSessionId() # Typical use is: context.getSessionId().getUser().getAttribute(\"myDisplayName\") # Returns string. If blank string is returned, AS will return built-in implementation to return display name # which is context.getSessionId().getUser().getAttribute(\"displayName\") # context is reference of io.jans.as.server.model.common.ExecutionContext( https://github.com/JanssenProject/jans/blob/main/jans-auth-server/server/src/main/java/io/jans/as/server/model/common/ExecutionContext.java ) def getAccountDisplayName ( self , context ): return \"\" # This method is called on session selection. # Selected session can be accessed as context.getSessionId() # Return True - continue session selection # Return False - stop session selection (forbid it) # context is reference of io.jans.as.server.model.common.ExecutionContext( https://github.com/JanssenProject/jans/blob/main/jans-auth-server/server/src/main/java/io/jans/as/server/model/common/ExecutionContext.java ) def onSelect ( self , context ): return True Script Type: Java # import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import java.util.Map ; /** * @author Yuriy Z */ public class DummySelectAccountType implements SelectAccountType { @Override public String getSelectAccountPage ( Object context ) { return \"\" ; } @Override public boolean prepare ( Object context ) { return true ; } @Override public String getAccountDisplayName ( Object context ) { return \"\" ; } @Override public boolean onSelect ( Object context ) { return false ; } @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { return true ; } @Override public int getApiVersion () { return 1 ; } }","title":"Select Account"},{"location":"admin/developer/scripts/select-account/#overview","text":"A person may have several accounts on a single Jans Auth Server instance. For example, it is common to have several Gmail accounts. Jans Auth Server uses two cookies to track which accounts are associated with a browser: session_id and current_sessions . Please check Multiple Sessions In One Browser Overview Select Account interception script can be used to customize account selection behavior. E.g. redirect to external page or change text representation of sessions on page.","title":"Overview"},{"location":"admin/developer/scripts/select-account/#interface","text":"The select account script implements the SelectAccountType interface. This extends methods from the base script type in addition to adding new methods:","title":"Interface"},{"location":"admin/developer/scripts/select-account/#inherited-methods","text":"Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10","title":"Inherited Methods"},{"location":"admin/developer/scripts/select-account/#new-methods","text":"Method header Method description def getSelectAccountPage(self, context) This method is called to return path to custom select account page (e.g. /customs/page/path/myselectaccount.xhtml) def prepare(self, context) This method is called before select account page is loaded. It can be used to prevent loading or redirect to external url. def getAccountDisplayName(self, context) This method is used to customize text representation of the session shown on the page. Returns display name for given session id (https://github.com/JanssenProject/jans/blob/main/jans-auth-server/common/src/main/java/io/jans/as/common/model/session/SessionId.java). def onSelect(self, context) This method is called on session selection and can be used to forbid selection.","title":"New Methods"},{"location":"admin/developer/scripts/select-account/#objects","text":"Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes SimpleCustomProperty Map of configuration properties. Reference context Execution Context Reference","title":"Objects"},{"location":"admin/developer/scripts/select-account/#use-case-dummy-select-account-example-script-does-not-have-impact-on-built-in-account-selection","text":"Select Account script example .","title":"Use case: Dummy Select Account example script (does not have impact on built-in account selection)"},{"location":"admin/developer/scripts/select-account/#script-type-python","text":"# oxAuth is available under the MIT License (2008). See http://opensource.org/licenses/MIT for full text. # Copyright (c) 2020, Janssen # # Author: Yuriy Z # from io.jans.model.custom.script.type.selectaccount import SelectAccountType from java.lang import String class SelectAccount ( SelectAccountType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"SelectAccount script. Initializing ...\" print \"SelectAccount script. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"SelectAccount script. Destroying ...\" print \"SelectAccount script. Destroyed successfully\" return True def getApiVersion ( self ): return 11 # Returns path to select account page (e.g. /customs/page/path/myselectaccount.xhtml) # If none or empty string is returned, AS uses built-in page. # (Note: Custom page can be also put into `custom/pages/selectAccount.xhtml` and used without custom script.) # context is reference of io.jans.as.server.model.common.ExecutionContext( https://github.com/JanssenProject/jans/blob/main/jans-auth-server/server/src/main/java/io/jans/as/server/model/common/ExecutionContext.java ) def getSelectAccountPage ( self , context ): return \"\" # This method is called before select account page is loaded. # It is good place to make preparation processing. # E.g. check whether it is ok to land on select account page or maybe redirect to external page. # Return True - continue loading of the page # Return False - stop loading and show error page # context is reference of io.jans.as.server.model.common.ExecutionContext( https://github.com/JanssenProject/jans/blob/main/jans-auth-server/server/src/main/java/io/jans/as/server/model/common/ExecutionContext.java ) def prepare ( self , context ): return True # Returns display name for given session id (https://github.com/JanssenProject/jans/blob/main/jans-auth-server/common/src/main/java/io/jans/as/common/model/session/SessionId.java). # Session can be accessed via context.getSessionId() # Typical use is: context.getSessionId().getUser().getAttribute(\"myDisplayName\") # Returns string. If blank string is returned, AS will return built-in implementation to return display name # which is context.getSessionId().getUser().getAttribute(\"displayName\") # context is reference of io.jans.as.server.model.common.ExecutionContext( https://github.com/JanssenProject/jans/blob/main/jans-auth-server/server/src/main/java/io/jans/as/server/model/common/ExecutionContext.java ) def getAccountDisplayName ( self , context ): return \"\" # This method is called on session selection. # Selected session can be accessed as context.getSessionId() # Return True - continue session selection # Return False - stop session selection (forbid it) # context is reference of io.jans.as.server.model.common.ExecutionContext( https://github.com/JanssenProject/jans/blob/main/jans-auth-server/server/src/main/java/io/jans/as/server/model/common/ExecutionContext.java ) def onSelect ( self , context ): return True","title":"Script Type: Python"},{"location":"admin/developer/scripts/select-account/#script-type-java","text":"import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import java.util.Map ; /** * @author Yuriy Z */ public class DummySelectAccountType implements SelectAccountType { @Override public String getSelectAccountPage ( Object context ) { return \"\" ; } @Override public boolean prepare ( Object context ) { return true ; } @Override public String getAccountDisplayName ( Object context ) { return \"\" ; } @Override public boolean onSelect ( Object context ) { return false ; } @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { return true ; } @Override public int getApiVersion () { return 1 ; } }","title":"Script Type: Java"},{"location":"admin/developer/scripts/spontaneous-scope/","tags":["administration","developer","scripts"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Spontaneous Scope"},{"location":"admin/developer/scripts/spontaneous-scope/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/developer/scripts/spontaneous-scope/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/developer/scripts/spontaneous-scope/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/developer/scripts/uma-claims-jwt/","tags":["administration","developer","scripts"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"UMA Claims (JWT Transformation)"},{"location":"admin/developer/scripts/uma-claims-jwt/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/developer/scripts/uma-claims-jwt/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/developer/scripts/uma-claims-jwt/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/developer/scripts/uma-claims-web/","tags":["administration","developer","scripts"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"UMA Claims Gathering (Web Flow)"},{"location":"admin/developer/scripts/uma-claims-web/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/developer/scripts/uma-claims-web/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/developer/scripts/uma-claims-web/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/developer/scripts/uma-rpt/","tags":["administration","developer","scripts","UmaRptPolicy"],"text":"Overview # This is a special script for UMA. It allows an admin to protect UMA scopes with policies. It is possible to add more than one UMA policy to an UMA scope. On requesting access to a specified resource, the application should call specified UMA policies in order to grant or deny access. Interface # The UMA RPT Authorization Policy script implements the UmaRptPolicyType interface. This extends methods from the base script type in addition to adding new method: Inherited Methods # Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10 New Methods # Method header Method description def getRequiredClaims(self, authorizationContext) Returns required claims definitions. This method must provide definition of all claims that is used in 'authorize' method. Return empty array [] if no claims should be gathered. Note : name in both places must match. %1$s - placeholder for issuer. It uses standard Java Formatter, docs : https://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html def authorize(self, authorizationContext) Main authorization method. Must return True or False. def getClaimsGatheringScriptName(self, authorizationContext) Returns name of the Claims-Gathering script which will be invoked if need_info error is returned. Return blank/empty string if claims gathering flow is not involved. Objects # Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes SimpleCustomProperty Map of configuration properties. Reference context Reference ClaimDefinition Reference Use case: Request Country and City Policies # This script was adapted from the Gluu Server UMA RPT Authorization Script . Script Type: Python # from io.jans.model.custom.script.type.uma import UmaRptPolicyType from io.jans.model.uma import ClaimDefinitionBuilder from java.lang import String class UmaRptPolicy ( UmaRptPolicyType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , configurationAttributes ): print \"RPT Policy. Initializing ...\" print \"RPT Policy. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"RPT Policy. Destroying ...\" print \"RPT Policy. Destroyed successfully\" return True def getApiVersion ( self ): return 1 # Returns required claims definitions. # This method must provide definition of all claims that is used in 'authorize' method. # Return empty array `[]` if no claims should be gathered. # Note : name in both places must match. # %1$s - placeholder for issuer. It uses standard Java Formatter, docs : https://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html def getRequiredClaims ( self , context ): json = \"\"\"[ { \"issuer\" : [ \"%1$s\" ], \"name\" : \"country\", \"claim_token_format\" : [ \"http://openid.net/specs/openid-connect-core-1_0.html#IDToken\" ], \"claim_type\" : \"string\", \"friendly_name\" : \"country\" }, { \"issuer\" : [ \"%1$s\" ], \"name\" : \"city\", \"claim_token_format\" : [ \"http://openid.net/specs/openid-connect-core-1_0.html#IDToken\" ], \"claim_type\" : \"string\", \"friendly_name\" : \"city\" } ]\"\"\" context . addRedirectUserParam ( \"customUserParam1\" , \"value1\" ) # pass some custom parameters to need_info uri. It can be removed if you don't need custom parameters. return ClaimDefinitionBuilder . build ( String . format ( json , context . getIssuer ())) # Main authorization method. Must return True or False. def authorize ( self , context ): print \"RPT Policy. Authorizing ...\" if context . getClaim ( \"country\" ) == 'US' and context . getClaim ( \"city\" ) == 'NY' : print \"Authorized successfully!\" return True return False # Returns name of the Claims-Gathering script which will be invoked if need_info error is returned. Return blank/empty string if claims gathering flow is not involved. def getClaimsGatheringScriptName ( self , context ): context . addRedirectUserParam ( \"customUserParam2\" , \"value2\" ) # pass some custom parameters to need_info uri. It can be removed if you don't need custom parameters. return \"sampleClaimsGathering\" Script Type: Java # import java.util.List ; import java.util.Map ; import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.model.custom.script.type.uma.UmaRptPolicyType ; import io.jans.model.uma.ClaimDefinition ; import io.jans.service.custom.script.CustomScriptManager ; import io.jans.as.server.uma.authorization.UmaAuthorizationContext ; import io.jans.model.uma.ClaimDefinitionBuilder ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class UmaRptPolicy implements UmaRptPolicyType { private static final Logger log = LoggerFactory . getLogger ( CustomScriptManager . class ); @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"UMA RPT Policy Authorization. Initializing...\" ); log . info ( \"UMA RPT Policy Authorization. Initialized\" ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"UMA RPT Policy Authorization. Initializing...\" ); log . info ( \"UMA RPT Policy Authorization. Initialized\" ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"UMA RPT Policy Authorization. Destroying...\" ); log . info ( \"UMA RPT Policy Authorization. Destroyed.\" ); return true ; } @Override public int getApiVersion () { return 11 ; } @Override public List < ClaimDefinition > getRequiredClaims ( Object authorizationContext ) { /* needs to be a valid JSON string * Sample: [ { \"issuer\" : [ \"https://example.com\" ], \"name\" : * \"country\", \"claim_token_format\" : [ * \"http://openid.net/specs/openid-connect-core-1_0.html#IDToken\" ], * \"claim_type\" : \"string\", \"friendly_name\" : \"country\" } ] * */ String json = \"\" ; UmaAuthorizationContext authContext = ( UmaAuthorizationContext ) authorizationContext ; authContext . addRedirectUserParam ( \"customUserParam1\" , \"value1\" ); return ClaimDefinitionBuilder . build ( String . format ( json , authContext . getIssuer ())); } @Override public boolean authorize ( Object authorizationContext ) { log . info ( \"UMA RPT Policy Authorization. Authorizing...\" ); UmaAuthorizationContext authContext = ( UmaAuthorizationContext ) authorizationContext ; if ( authContext . getClaim ( \"country\" ). equals ( \"US\" ) && authContext . getClaim ( \"city\" ). equals ( \"NY\" )) { log . info ( \"Authorized successfully!\" ); return true ; } return false ; } @Override public String getClaimsGatheringScriptName ( Object authorizationContext ) { UmaAuthorizationContext authContext = ( UmaAuthorizationContext ) authorizationContext ; // pass some custom parameters to need_info uri. It can be removed if you don't need custom parameters. authContext . addRedirectUserParam ( \"customUserParam2\" , \"value2\" ); return \"sampleClaimsGathering\" ; } }","title":"UMA RPT Policies"},{"location":"admin/developer/scripts/uma-rpt/#overview","text":"This is a special script for UMA. It allows an admin to protect UMA scopes with policies. It is possible to add more than one UMA policy to an UMA scope. On requesting access to a specified resource, the application should call specified UMA policies in order to grant or deny access.","title":"Overview"},{"location":"admin/developer/scripts/uma-rpt/#interface","text":"The UMA RPT Authorization Policy script implements the UmaRptPolicyType interface. This extends methods from the base script type in addition to adding new method:","title":"Interface"},{"location":"admin/developer/scripts/uma-rpt/#inherited-methods","text":"Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10","title":"Inherited Methods"},{"location":"admin/developer/scripts/uma-rpt/#new-methods","text":"Method header Method description def getRequiredClaims(self, authorizationContext) Returns required claims definitions. This method must provide definition of all claims that is used in 'authorize' method. Return empty array [] if no claims should be gathered. Note : name in both places must match. %1$s - placeholder for issuer. It uses standard Java Formatter, docs : https://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html def authorize(self, authorizationContext) Main authorization method. Must return True or False. def getClaimsGatheringScriptName(self, authorizationContext) Returns name of the Claims-Gathering script which will be invoked if need_info error is returned. Return blank/empty string if claims gathering flow is not involved.","title":"New Methods"},{"location":"admin/developer/scripts/uma-rpt/#objects","text":"Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes SimpleCustomProperty Map of configuration properties. Reference context Reference ClaimDefinition Reference","title":"Objects"},{"location":"admin/developer/scripts/uma-rpt/#use-case-request-country-and-city-policies","text":"This script was adapted from the Gluu Server UMA RPT Authorization Script .","title":"Use case: Request Country and City Policies"},{"location":"admin/developer/scripts/uma-rpt/#script-type-python","text":"from io.jans.model.custom.script.type.uma import UmaRptPolicyType from io.jans.model.uma import ClaimDefinitionBuilder from java.lang import String class UmaRptPolicy ( UmaRptPolicyType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , configurationAttributes ): print \"RPT Policy. Initializing ...\" print \"RPT Policy. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"RPT Policy. Destroying ...\" print \"RPT Policy. Destroyed successfully\" return True def getApiVersion ( self ): return 1 # Returns required claims definitions. # This method must provide definition of all claims that is used in 'authorize' method. # Return empty array `[]` if no claims should be gathered. # Note : name in both places must match. # %1$s - placeholder for issuer. It uses standard Java Formatter, docs : https://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html def getRequiredClaims ( self , context ): json = \"\"\"[ { \"issuer\" : [ \"%1$s\" ], \"name\" : \"country\", \"claim_token_format\" : [ \"http://openid.net/specs/openid-connect-core-1_0.html#IDToken\" ], \"claim_type\" : \"string\", \"friendly_name\" : \"country\" }, { \"issuer\" : [ \"%1$s\" ], \"name\" : \"city\", \"claim_token_format\" : [ \"http://openid.net/specs/openid-connect-core-1_0.html#IDToken\" ], \"claim_type\" : \"string\", \"friendly_name\" : \"city\" } ]\"\"\" context . addRedirectUserParam ( \"customUserParam1\" , \"value1\" ) # pass some custom parameters to need_info uri. It can be removed if you don't need custom parameters. return ClaimDefinitionBuilder . build ( String . format ( json , context . getIssuer ())) # Main authorization method. Must return True or False. def authorize ( self , context ): print \"RPT Policy. Authorizing ...\" if context . getClaim ( \"country\" ) == 'US' and context . getClaim ( \"city\" ) == 'NY' : print \"Authorized successfully!\" return True return False # Returns name of the Claims-Gathering script which will be invoked if need_info error is returned. Return blank/empty string if claims gathering flow is not involved. def getClaimsGatheringScriptName ( self , context ): context . addRedirectUserParam ( \"customUserParam2\" , \"value2\" ) # pass some custom parameters to need_info uri. It can be removed if you don't need custom parameters. return \"sampleClaimsGathering\"","title":"Script Type: Python"},{"location":"admin/developer/scripts/uma-rpt/#script-type-java","text":"import java.util.List ; import java.util.Map ; import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.model.custom.script.type.uma.UmaRptPolicyType ; import io.jans.model.uma.ClaimDefinition ; import io.jans.service.custom.script.CustomScriptManager ; import io.jans.as.server.uma.authorization.UmaAuthorizationContext ; import io.jans.model.uma.ClaimDefinitionBuilder ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class UmaRptPolicy implements UmaRptPolicyType { private static final Logger log = LoggerFactory . getLogger ( CustomScriptManager . class ); @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"UMA RPT Policy Authorization. Initializing...\" ); log . info ( \"UMA RPT Policy Authorization. Initialized\" ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"UMA RPT Policy Authorization. Initializing...\" ); log . info ( \"UMA RPT Policy Authorization. Initialized\" ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"UMA RPT Policy Authorization. Destroying...\" ); log . info ( \"UMA RPT Policy Authorization. Destroyed.\" ); return true ; } @Override public int getApiVersion () { return 11 ; } @Override public List < ClaimDefinition > getRequiredClaims ( Object authorizationContext ) { /* needs to be a valid JSON string * Sample: [ { \"issuer\" : [ \"https://example.com\" ], \"name\" : * \"country\", \"claim_token_format\" : [ * \"http://openid.net/specs/openid-connect-core-1_0.html#IDToken\" ], * \"claim_type\" : \"string\", \"friendly_name\" : \"country\" } ] * */ String json = \"\" ; UmaAuthorizationContext authContext = ( UmaAuthorizationContext ) authorizationContext ; authContext . addRedirectUserParam ( \"customUserParam1\" , \"value1\" ); return ClaimDefinitionBuilder . build ( String . format ( json , authContext . getIssuer ())); } @Override public boolean authorize ( Object authorizationContext ) { log . info ( \"UMA RPT Policy Authorization. Authorizing...\" ); UmaAuthorizationContext authContext = ( UmaAuthorizationContext ) authorizationContext ; if ( authContext . getClaim ( \"country\" ). equals ( \"US\" ) && authContext . getClaim ( \"city\" ). equals ( \"NY\" )) { log . info ( \"Authorized successfully!\" ); return true ; } return false ; } @Override public String getClaimsGatheringScriptName ( Object authorizationContext ) { UmaAuthorizationContext authContext = ( UmaAuthorizationContext ) authorizationContext ; // pass some custom parameters to need_info uri. It can be removed if you don't need custom parameters. authContext . addRedirectUserParam ( \"customUserParam2\" , \"value2\" ); return \"sampleClaimsGathering\" ; } }","title":"Script Type: Java"},{"location":"admin/developer/scripts/update-token/","text":"Overview # By overriding the interface methods in UpdateTokenType inside a custom script you can Enable transformation of claims and values in id_token and Access token e.g. add a custom claim to an id_token , change a token expiry, change the sub value, or remove the nonce . Example use-case: * As per the open banking standard, the id_token should contain claim openbanking_intent_id and the same value should also reflect in the sub claim. * As specified in the FAPI Baseline Specification the sub claim should have the user id. Set a specific token lifetime Perform extra business logic like adding or removing scopes. Add an extra audit log for each token response. Flow # sequenceDiagram title UpdateToken script autonumber 1 RP->>Jans AS: Request token Jans AS->>Jans AS: Is UpdateToken script is associated with client? <br/>(or is there a script that applies to all clients? ) Jans AS->>Jans AS: do stuff note right of Jans AS: do stuff<br/>1. Enable transformation of claims and values in id_token <br/> OR 2. set token expiry <br/> or 3. add / remove scopes. <br/> or 4. perform audit logs Jans AS->>RP: return token(s) (Access token, ID token or Refresh Token) reflecting step 3 Adding the custom script to Jans server # Create cs.json with the contents of a CUSTOM script. To do that, run the following command. /opt/jans/jans-cli/config-cli.py --schema CustomScript > /tmp/cs.json Edit the file's contents to reflect the addition of the UpdateToken custom script. Set enabled flag true Configure any parameters that the script may use. name field should reflect the use case script_type should be UPDATE_TOKEN script.py can have contents similar to Sample Script ) and is present in jans-cli's host machine. { \"dn\": null, \"inum\": null, \"name\": \"update_token\", \"aliases\": [], \"description\": \"Update token custom script\", \"script\": \"_file /root/script.py\", \"scriptType\": \"UPDATE_TOKEN\", \"programmingLanguage\": \"JYTHON\", \"moduleProperties\": { \"value1\": null, \"value2\": null, \"description\": null }, \"configurationProperties\": [ { \"value1\": \"param_name\", \"value2\": \"DI3ICTTJKLL8PPPNGH7YI\", \"description\": \"This is just an example\", \"hide\": true }, { \"value1\": \"param_name_2\", \"value2\": \"eEbJdi3hg42zxyFYbHArU5RuioPP\", \"description\": \"yet another example\", \"hide\": true } ] , \"level\": \"integer\", \"revision\": 0, \"enabled\": true, \"scriptError\": { \"raisedAt\": null, \"stackTrace\": null }, \"modified\": false, \"internal\": false } Add the custom script. Save the response, it will contain the inum of the newly added script. /opt/jans/jans-cli/config-cli.py --operation-id post-config-scripts --data /tmp/cs.json Associate an Update Token script to a client (RP) [optional step] # \ud83d\udcdd Note: If the Update token script is not associated with a client, then it will be applicable to all clients registered in the Jans Server. Which implies that all tokens obtained using the Jans server will reflect modifications as per the script. To Associate an Update Token script to a client (RP), execute the command below with appropriate values for: - inum of the client - inum of the update_token script /opt/jans/jans-cli/config-cli.py --operation-id patch-oauth-openid-clients-by-inum --url-suffix inum:inum_of_client --data '[ { \"op\": \"add\", \"path\": \"updateTokenScriptDns\", \"value\": [\"inum={SCRIPT_ID},ou=scripts,o=jans\"] } ]' Writing an Update token script (Pseudo code for potential usecases) # Mandatory methods # class UpdateToken(UpdateTokenType): def __init__(self, currentTimeMillis): self.currentTimeMillis = currentTimeMillis def init(self, customScript, configurationAttributes): return True def destroy(self, configurationAttributes): return True def getApiVersion(self): return 11 modifyIdToken () : Used to modify claims in an ID token # Pseudocode and example : # Returns boolean, true - indicates that script applied changes # jsonWebResponse - is JwtHeader, you can use any method to manipulate JWT # context is reference of io.jans.oxauth.service.external.context.ExternalUpdateTokenContext def modifyIdToken(self, jsonWebResponse, context): # header claims jsonWebResponse.getHeader().setClaim(\"header_name\", \"header_value\") #custom claims jsonWebResponse.getClaims().setClaim(\"openbanking_intent_id\", openbanking_intent_id_value) #regular claims jsonWebResponse.getClaims().setClaim(\"sub\", claimValue) return True modifyAccessToken() # Granularity of access control # An UpdateTokenType script is great for adding scopes or removing scopes to/from the Access token. By doing so you can tailor build the granularity of access control according to business need. context.overwriteAccessTokenScopes is ready to use method of the context variable def modifyAccessToken(self, accessToken, context): context.overwriteAccessTokenScopes(accessToken, Sets.newHashSet(\"openid\", \"mynewscope\")) Perform business check before returning AT # Pseudocode and example - Issue Access token only if account balance is greater than 0 # Returns boolean, true - indicates that script applied changes # accessToken - is JwtHeader, you can use any method to manipulate JWT # context is reference of io.jans.oxauth.service.external.context.ExternalUpdateTokenContext def modifyAccessToken(self, accessToken, context): #read from session sessionIdService = CdiUtil.bean(SessionIdService) sessionId = sessionIdService.getSessionByDn(context.getGrant().getSessionDn()) # fetch from persistence org_id = sessionId.getSessionAttributes().get(\"org_id\") balance = thirdPartyApi.checkBalance(org_id) if balance > 0 : return True else: return False # forbid the creation of AT Modify claims in an access token # # Returns boolean, true - indicates that script applied changes. If false is returned token will not be created. # accessToken is reference of io.jans.as.server.model.common.AccessToken (note authorization grant can be taken as context.getGrant()) # context is reference of io.jans.oxauth.service.external.context.ExternalUpdateTokenContext def modifyAccessToken(self, accessToken, context): # header claims accessToken.getHeader().setClaim(\"header_name\", \"header_value\") #custom claims accessToken.getClaims().setClaim(\"claim_name\", \"claimValue\") #regular claims accessToken.getClaims().setClaim(\"sub\", claimValue) return True Modify a specific token lifetime based on the context # Refresh token lifetime: def getRefreshTokenLifetimeInSeconds(self, context): return 24 * 60 * 60 # one day ID token lifetime: def getIdTokenLifetimeInSeconds(self, context): return 10 * 60 * 60 # 10 hours Access token lifetime: def getAccessTokenLifetimeInSeconds(self, context): return 10 * 60 * 60 # 10 hours modifyRefreshToken() : # Used to modify claims in a Refresh Token # Returns boolean, true - indicates that script applied changes. If false is returned token will not be created. # refreshToken is reference of io.jans.as.server.model.common.RefreshToken (note authorization grant can be taken as context.getGrant()) # context is reference of io.jans.as.server.service.external.context.ExternalUpdateTokenContext (in https://github.com/JanssenProject/jans-auth-server project, ) def modifyRefreshToken(self, refreshToken, context): return True IntrospectionType script vs UpdateTokenType script # IntrospectionType UpdateTokenType Client configuration parameter Introspection script is invoked only when accessTokenAsJwt = true Update token script is invoked irrespective of whether accessTokenAsJwt is true or false Core Purpose Used to return access token meta information like current validity, approved scopes, and information about the context in which the token was issued when a Resource Server which queries the Introspection endpoint used to enable transformation of claims and values in id_token and Access token, set a specific token lifetime, change granularity of access control (up-scoping, down-scoping), audit logging for each token response, forbid the creation of AT based on a criteria. Functionality 1. Can be used to modify claims of an Access token as JWT, however this it is recommended to use UpdateToken script instead. 1. Used to modify id_token, refresh token and access token 2. Introspection script cannot change scope of AT 2. UpdateToken can change scope of AT and modify AT object in persistence irrespective of the value of accessTokenAsJwt as true or false Script Invocation sequence 2. After an Access token is generated 2. Before the creation of AT, id_token and refresh_token Testing # Use this: Reference for testing Inspect the tokens. Use jwt.io to inspect the contents of a JWT. FAQ # How can I add a dict type object as a claim value? from io.jans.as.model.uti import JwtUtil from org.json import JSONObject; def modifyIdToken(self, jsonWebResponse, context): datas = {'country': 'ID', 'sponsor': '7022952467', 'role': 'BusinessOwner', 'salesplanaff': '220', 'acctsubtype': 'BusinessOwner', 'accttype': 'AmBCBusiness', 'abo': '7022953754', 'aboname': 'NEW', 'lclpartyid': '119700175', 'email': None, 'status': 'Active'} string_rep = json.dumps(datas) jsonObject = JwtUtil.fromJson(string_rep) jsonWebResponse.getClaims().setClaim(\"test\", jsonObject) print \"Update token script. Modify idToken: %s\" % jsonWebResponse return True 2. How can I set integer value in id token claim? jsonWebResponse.getClaims().setClaim(\"claimY\", Integer.valueOf(124456191)) Get it as integer, via getClaims().getClaimAsInteger(\"claimY\")","title":"Update Token"},{"location":"admin/developer/scripts/update-token/#overview","text":"By overriding the interface methods in UpdateTokenType inside a custom script you can Enable transformation of claims and values in id_token and Access token e.g. add a custom claim to an id_token , change a token expiry, change the sub value, or remove the nonce . Example use-case: * As per the open banking standard, the id_token should contain claim openbanking_intent_id and the same value should also reflect in the sub claim. * As specified in the FAPI Baseline Specification the sub claim should have the user id. Set a specific token lifetime Perform extra business logic like adding or removing scopes. Add an extra audit log for each token response.","title":"Overview"},{"location":"admin/developer/scripts/update-token/#flow","text":"sequenceDiagram title UpdateToken script autonumber 1 RP->>Jans AS: Request token Jans AS->>Jans AS: Is UpdateToken script is associated with client? <br/>(or is there a script that applies to all clients? ) Jans AS->>Jans AS: do stuff note right of Jans AS: do stuff<br/>1. Enable transformation of claims and values in id_token <br/> OR 2. set token expiry <br/> or 3. add / remove scopes. <br/> or 4. perform audit logs Jans AS->>RP: return token(s) (Access token, ID token or Refresh Token) reflecting step 3","title":"Flow"},{"location":"admin/developer/scripts/update-token/#adding-the-custom-script-to-jans-server","text":"Create cs.json with the contents of a CUSTOM script. To do that, run the following command. /opt/jans/jans-cli/config-cli.py --schema CustomScript > /tmp/cs.json Edit the file's contents to reflect the addition of the UpdateToken custom script. Set enabled flag true Configure any parameters that the script may use. name field should reflect the use case script_type should be UPDATE_TOKEN script.py can have contents similar to Sample Script ) and is present in jans-cli's host machine. { \"dn\": null, \"inum\": null, \"name\": \"update_token\", \"aliases\": [], \"description\": \"Update token custom script\", \"script\": \"_file /root/script.py\", \"scriptType\": \"UPDATE_TOKEN\", \"programmingLanguage\": \"JYTHON\", \"moduleProperties\": { \"value1\": null, \"value2\": null, \"description\": null }, \"configurationProperties\": [ { \"value1\": \"param_name\", \"value2\": \"DI3ICTTJKLL8PPPNGH7YI\", \"description\": \"This is just an example\", \"hide\": true }, { \"value1\": \"param_name_2\", \"value2\": \"eEbJdi3hg42zxyFYbHArU5RuioPP\", \"description\": \"yet another example\", \"hide\": true } ] , \"level\": \"integer\", \"revision\": 0, \"enabled\": true, \"scriptError\": { \"raisedAt\": null, \"stackTrace\": null }, \"modified\": false, \"internal\": false } Add the custom script. Save the response, it will contain the inum of the newly added script. /opt/jans/jans-cli/config-cli.py --operation-id post-config-scripts --data /tmp/cs.json","title":"Adding the custom script to Jans server"},{"location":"admin/developer/scripts/update-token/#associate-an-update-token-script-to-a-client-rp-optional-step","text":"\ud83d\udcdd Note: If the Update token script is not associated with a client, then it will be applicable to all clients registered in the Jans Server. Which implies that all tokens obtained using the Jans server will reflect modifications as per the script. To Associate an Update Token script to a client (RP), execute the command below with appropriate values for: - inum of the client - inum of the update_token script /opt/jans/jans-cli/config-cli.py --operation-id patch-oauth-openid-clients-by-inum --url-suffix inum:inum_of_client --data '[ { \"op\": \"add\", \"path\": \"updateTokenScriptDns\", \"value\": [\"inum={SCRIPT_ID},ou=scripts,o=jans\"] } ]'","title":"Associate an Update Token script to a client (RP) [optional step]"},{"location":"admin/developer/scripts/update-token/#writing-an-update-token-script-pseudo-code-for-potential-usecases","text":"","title":"Writing an Update token script (Pseudo code for potential usecases)"},{"location":"admin/developer/scripts/update-token/#mandatory-methods","text":"class UpdateToken(UpdateTokenType): def __init__(self, currentTimeMillis): self.currentTimeMillis = currentTimeMillis def init(self, customScript, configurationAttributes): return True def destroy(self, configurationAttributes): return True def getApiVersion(self): return 11","title":"Mandatory methods"},{"location":"admin/developer/scripts/update-token/#modifyidtoken-used-to-modify-claims-in-an-id-token","text":"Pseudocode and example : # Returns boolean, true - indicates that script applied changes # jsonWebResponse - is JwtHeader, you can use any method to manipulate JWT # context is reference of io.jans.oxauth.service.external.context.ExternalUpdateTokenContext def modifyIdToken(self, jsonWebResponse, context): # header claims jsonWebResponse.getHeader().setClaim(\"header_name\", \"header_value\") #custom claims jsonWebResponse.getClaims().setClaim(\"openbanking_intent_id\", openbanking_intent_id_value) #regular claims jsonWebResponse.getClaims().setClaim(\"sub\", claimValue) return True","title":"modifyIdToken () : Used to modify claims in an ID token"},{"location":"admin/developer/scripts/update-token/#modifyaccesstoken","text":"","title":"modifyAccessToken()"},{"location":"admin/developer/scripts/update-token/#granularity-of-access-control","text":"An UpdateTokenType script is great for adding scopes or removing scopes to/from the Access token. By doing so you can tailor build the granularity of access control according to business need. context.overwriteAccessTokenScopes is ready to use method of the context variable def modifyAccessToken(self, accessToken, context): context.overwriteAccessTokenScopes(accessToken, Sets.newHashSet(\"openid\", \"mynewscope\"))","title":"Granularity of access control"},{"location":"admin/developer/scripts/update-token/#perform-business-check-before-returning-at","text":"Pseudocode and example - Issue Access token only if account balance is greater than 0 # Returns boolean, true - indicates that script applied changes # accessToken - is JwtHeader, you can use any method to manipulate JWT # context is reference of io.jans.oxauth.service.external.context.ExternalUpdateTokenContext def modifyAccessToken(self, accessToken, context): #read from session sessionIdService = CdiUtil.bean(SessionIdService) sessionId = sessionIdService.getSessionByDn(context.getGrant().getSessionDn()) # fetch from persistence org_id = sessionId.getSessionAttributes().get(\"org_id\") balance = thirdPartyApi.checkBalance(org_id) if balance > 0 : return True else: return False # forbid the creation of AT","title":"Perform business check before returning AT"},{"location":"admin/developer/scripts/update-token/#modify-claims-in-an-access-token","text":"# Returns boolean, true - indicates that script applied changes. If false is returned token will not be created. # accessToken is reference of io.jans.as.server.model.common.AccessToken (note authorization grant can be taken as context.getGrant()) # context is reference of io.jans.oxauth.service.external.context.ExternalUpdateTokenContext def modifyAccessToken(self, accessToken, context): # header claims accessToken.getHeader().setClaim(\"header_name\", \"header_value\") #custom claims accessToken.getClaims().setClaim(\"claim_name\", \"claimValue\") #regular claims accessToken.getClaims().setClaim(\"sub\", claimValue) return True","title":"Modify claims in an access token"},{"location":"admin/developer/scripts/update-token/#modify-a-specific-token-lifetime-based-on-the-context","text":"Refresh token lifetime: def getRefreshTokenLifetimeInSeconds(self, context): return 24 * 60 * 60 # one day ID token lifetime: def getIdTokenLifetimeInSeconds(self, context): return 10 * 60 * 60 # 10 hours Access token lifetime: def getAccessTokenLifetimeInSeconds(self, context): return 10 * 60 * 60 # 10 hours","title":"Modify a specific token lifetime based on the context"},{"location":"admin/developer/scripts/update-token/#modifyrefreshtoken","text":"Used to modify claims in a Refresh Token # Returns boolean, true - indicates that script applied changes. If false is returned token will not be created. # refreshToken is reference of io.jans.as.server.model.common.RefreshToken (note authorization grant can be taken as context.getGrant()) # context is reference of io.jans.as.server.service.external.context.ExternalUpdateTokenContext (in https://github.com/JanssenProject/jans-auth-server project, ) def modifyRefreshToken(self, refreshToken, context): return True","title":"modifyRefreshToken() :"},{"location":"admin/developer/scripts/update-token/#introspectiontype-script-vs-updatetokentype-script","text":"IntrospectionType UpdateTokenType Client configuration parameter Introspection script is invoked only when accessTokenAsJwt = true Update token script is invoked irrespective of whether accessTokenAsJwt is true or false Core Purpose Used to return access token meta information like current validity, approved scopes, and information about the context in which the token was issued when a Resource Server which queries the Introspection endpoint used to enable transformation of claims and values in id_token and Access token, set a specific token lifetime, change granularity of access control (up-scoping, down-scoping), audit logging for each token response, forbid the creation of AT based on a criteria. Functionality 1. Can be used to modify claims of an Access token as JWT, however this it is recommended to use UpdateToken script instead. 1. Used to modify id_token, refresh token and access token 2. Introspection script cannot change scope of AT 2. UpdateToken can change scope of AT and modify AT object in persistence irrespective of the value of accessTokenAsJwt as true or false Script Invocation sequence 2. After an Access token is generated 2. Before the creation of AT, id_token and refresh_token","title":"IntrospectionType script vs UpdateTokenType script"},{"location":"admin/developer/scripts/update-token/#testing","text":"Use this: Reference for testing Inspect the tokens. Use jwt.io to inspect the contents of a JWT.","title":"Testing"},{"location":"admin/developer/scripts/update-token/#faq","text":"How can I add a dict type object as a claim value? from io.jans.as.model.uti import JwtUtil from org.json import JSONObject; def modifyIdToken(self, jsonWebResponse, context): datas = {'country': 'ID', 'sponsor': '7022952467', 'role': 'BusinessOwner', 'salesplanaff': '220', 'acctsubtype': 'BusinessOwner', 'accttype': 'AmBCBusiness', 'abo': '7022953754', 'aboname': 'NEW', 'lclpartyid': '119700175', 'email': None, 'status': 'Active'} string_rep = json.dumps(datas) jsonObject = JwtUtil.fromJson(string_rep) jsonWebResponse.getClaims().setClaim(\"test\", jsonObject) print \"Update token script. Modify idToken: %s\" % jsonWebResponse return True 2. How can I set integer value in id token claim? jsonWebResponse.getClaims().setClaim(\"claimY\", Integer.valueOf(124456191)) Get it as integer, via getClaims().getClaimAsInteger(\"claimY\")","title":"FAQ"},{"location":"admin/fido/","tags":["administration","fido"],"text":"Overview # Janssen's FIDO2 server # FIDO2 as an open standard for authentication is based on public key cryptography. Janssen's FIDO2 server - a component inside the Janssen project enables users of RPs to enroll and authenticate themselves using U2F keys, FIDO2 keys or inbuilt platform authenticator. The FIDO2 server uses REST endpoints to communicate with an RP via an https connection. The FIDO2 server implements the FIDO Metadata Service (MDS3) defined by FIDO Alliance. The FIDO2 server stores user data into the same persistence store as the Jans-Auth server. (LDAP, MYSQL, Couchbase etc.) Janssen's FIDO server is a standalone server communicates with the RP using an API which can be obtained by querying the following URL : https://<myjans-server>/.well-known/fido2-configuration Response: { \"version\": \"1.1\", \"issuer\": \"https://<myjans-server>\", \"attestation\": { \"base_path\": \"https://<myjans-server>/jans-fido2/restv1/attestation\", \"options_enpoint\": \"https://<myjans-server>/jans-fido2/restv1/attestation/options\", \"result_enpoint\": \"https://<myjans-server>/jans-fido2/restv1/attestation/result\" }, \"assertion\": { \"base_path\": \"https://<myjans-server>/jans-fido2/restv1/assertion\", \"options_enpoint\": \"https://<myjans-server>/jans-fido2/restv1/assertion/options\", \"result_enpoint\": \"https://<myjans-server>/jans-fido2/restv1/assertion/result\" } } Customization authentication flow using Interception script # In the Janssen ecosystem, the authentication flow that comprises of the calls to WebAuthn API and the FIDO server is achieved using an interception script, details of it can be found here . References # https://www.w3.org/TR/webauthn-2/ http://fidoalliance.org/specs/mds/fido-metadata-statement-v3.0-ps-20210518.html Tools # https://jwt.io/ \u2013 For JWT decoding and debugging https://www.base64decode.org/ \u2013 For Decoding Base64 to UTF8 https://fidoalliance.org/certification/fido-certified-products/ - To browse authenticators listed with FIDO Alliance","title":"Overview"},{"location":"admin/fido/#overview","text":"","title":"Overview"},{"location":"admin/fido/#janssens-fido2-server","text":"FIDO2 as an open standard for authentication is based on public key cryptography. Janssen's FIDO2 server - a component inside the Janssen project enables users of RPs to enroll and authenticate themselves using U2F keys, FIDO2 keys or inbuilt platform authenticator. The FIDO2 server uses REST endpoints to communicate with an RP via an https connection. The FIDO2 server implements the FIDO Metadata Service (MDS3) defined by FIDO Alliance. The FIDO2 server stores user data into the same persistence store as the Jans-Auth server. (LDAP, MYSQL, Couchbase etc.) Janssen's FIDO server is a standalone server communicates with the RP using an API which can be obtained by querying the following URL : https://<myjans-server>/.well-known/fido2-configuration Response: { \"version\": \"1.1\", \"issuer\": \"https://<myjans-server>\", \"attestation\": { \"base_path\": \"https://<myjans-server>/jans-fido2/restv1/attestation\", \"options_enpoint\": \"https://<myjans-server>/jans-fido2/restv1/attestation/options\", \"result_enpoint\": \"https://<myjans-server>/jans-fido2/restv1/attestation/result\" }, \"assertion\": { \"base_path\": \"https://<myjans-server>/jans-fido2/restv1/assertion\", \"options_enpoint\": \"https://<myjans-server>/jans-fido2/restv1/assertion/options\", \"result_enpoint\": \"https://<myjans-server>/jans-fido2/restv1/assertion/result\" } }","title":"Janssen's FIDO2 server"},{"location":"admin/fido/#customization-authentication-flow-using-interception-script","text":"In the Janssen ecosystem, the authentication flow that comprises of the calls to WebAuthn API and the FIDO server is achieved using an interception script, details of it can be found here .","title":"Customization authentication flow using Interception script"},{"location":"admin/fido/#references","text":"https://www.w3.org/TR/webauthn-2/ http://fidoalliance.org/specs/mds/fido-metadata-statement-v3.0-ps-20210518.html","title":"References"},{"location":"admin/fido/#tools","text":"https://jwt.io/ \u2013 For JWT decoding and debugging https://www.base64decode.org/ \u2013 For Decoding Base64 to UTF8 https://fidoalliance.org/certification/fido-certified-products/ - To browse authenticators listed with FIDO Alliance","title":"Tools"},{"location":"admin/fido/bluetooth-authn/","tags":["administration","fido"],"text":"Troubleshooting notes: # Enable the Bluetooth Device Permissions in Chrome Settings https://support.google.com/accounts/answer/9289445?hl=en&co=GENIE.Platform%3DAndroid","title":"Bluetooth Authenticator Support"},{"location":"admin/fido/bluetooth-authn/#troubleshooting-notes","text":"Enable the Bluetooth Device Permissions in Chrome Settings https://support.google.com/accounts/answer/9289445?hl=en&co=GENIE.Platform%3DAndroid","title":"Troubleshooting notes:"},{"location":"admin/fido/config/","tags":["administration","fido2"],"text":"Configuration Parameters of Janssen's FIDO2 server: # Field named Example Description issuer https://my-jans-server.jans.io URL using the https scheme with no query or fragment component. The OP asserts this as its Issuer Identifier baseEndpoint https://my-jans-server/jans-fido2/restv1 Base URL of the FIDO2 server Endpoints cleanServiceInterval 60 Time interval for the Clean Service in seconds. cleanServiceBatchChunkSize 10000 Each clean up iteration fetches chunk of expired data per base dn and removes it from storage. useLocalCache true Boolean value specifying whether to enable local in-memory cache for attributes, scopes, clients and organization configuration disableJdkLogger true Boolean value specifying whether to enable JDK Loggers loggingLevel \"INFO\" or \"TRACE\" or \"DEBUG\" Logging level for FIDO2 server loggingLayout \"text\" or \"json\" Contents of logs as plain text or json format externalLoggerConfiguration Path to external log4j2 logging configuration metricReporterInterval 300 The interval for metric reporter in seconds. metricReporterKeepDataDays 15 The number of days to retain metric reported data in the system metricReporterEnabled true Boolean value specifying whether to enable Metric Reporter personCustomObjectClassList [\"jansCustomPerson\", \"jansPerson\" ] LDAP custom object class list for dynamic person enrollment. fido2Configuration See JSON contents in the below example FIDO2 Configuration Fido2Configuration structure # Field named Example Description authenticatorCertsFolder /etc/jans/conf/fido2/authenticator_cert Authenticators certificates fodler. mdsCertsFolder /etc/jans/conf/fido2/mds/cert MDS TOC root certificates folder. mdsTocsFolder /etc/jans/conf/fido2/mds/toc MDS TOC files folder. serverMetadataFolder /etc/jans/conf/fido2/server_metadata Authenticators metadata in json format. Example: virtual devices. metadataUrlsProvider https://mds3.fido.tools String value to provide source of URLs with external metadata. requestedCredentialTypes [\"RS256\",\"ES256\"] requestedParties [{\"name\":\"https://my-jans-server.jans.io\",\"domains\":[\"my-jans-server.jans.io\"]}] Requested party name. userAutoEnrollment false Allow to enroll users on enrollment/authentication requests. (Useful while running tests) unfinishedRequestExpiration 180 Expiration time in seconds for pending enrollment/authentication requests authenticationHistoryExpiration 1296000 Expiration time in seconds for approved authentication requests. Configuring the FIDO2 server: # 1. Read Configuration parameters: # Use the following command to obtain configuration parameters: /opt/jans/jans-cli/config-cli.py --operation-id get-properties-fido2 Response: { \"issuer\": \"https://my.jans.server\", \"baseEndpoint\": \"https://my.jans.server/jans-fido2/restv1\", \"cleanServiceInterval\": 60, \"cleanServiceBatchChunkSize\": 10000, \"useLocalCache\": true, \"disableJdkLogger\": true, \"loggingLevel\": \"DEBUG\", \"loggingLayout\": \"text\", \"metricReporterInterval\": 300, \"metricReporterKeepDataDays\": 15, \"metricReporterEnabled\": true, \"personCustomObjectClassList\": [ \"jansCustomPerson\", \"jansPerson\" ], \"superGluuEnabled\": true, \"oldU2fMigrationEnabled\": true, \"fido2Configuration\": { \"authenticatorCertsFolder\": \"/etc/jans/conf/fido2/authenticator_cert\", \"mdsCertsFolder\": \"/etc/jans/conf/fido2/mds/cert\", \"mdsTocsFolder\": \"/etc/jans/conf/fido2/mds/toc\", \"checkU2fAttestations\": false, \"userAutoEnrollment\": false, \"unfinishedRequestExpiration\": 180, \"authenticationHistoryExpiration\": 1296000, \"serverMetadataFolder\": \"/etc/jans/conf/fido2/server_metadata\", \"metadataUrlsProvider\": \"\", \"requestedCredentialTypes\": [ \"RS256\", \"ES256\" ], \"requestedParties\": [ { \"name\": \"https://my.jans.server\", \"domains\": [ \"my.jans.server\" ] } ] } } 2. Update configuration parameters: # Steps: A. Create a JSON file say /tmp/config_values.json by editing the JSON from Point 1 B. Use the following command /opt/jans/jans-cli/config-cli.py --operation-id post-config-scripts --data /tmp/config_values.json 3. Change log level of FIDO2 server # Steps: A. Create a JSON file say /tmp/config_values.json by editing the JSON from Point 1. Edit loggingLevel to TRACE or DEBUG or INFO B. Use the following command /opt/jans/jans-cli/config-cli.py --operation-id put-properties-fido --data /tmp/config_values.json 4. Locating FIDO2 configuration in Persistence Layer # While it is not recommended that an administrator directly edits a configuration at the persistence layer, it may be useful information for a developer. A. MySQL # erDiagram jansAppConf { string doc_id PK \"\" string ou \"jans-fido2\" string jansConfDyn \"json configuration for the app\" } B. LDAP # graph LR A[ou=jans] --> V(ou=configuration) V --> V5[ou=jans-fido2]","title":"Configuration"},{"location":"admin/fido/config/#configuration-parameters-of-janssens-fido2-server","text":"Field named Example Description issuer https://my-jans-server.jans.io URL using the https scheme with no query or fragment component. The OP asserts this as its Issuer Identifier baseEndpoint https://my-jans-server/jans-fido2/restv1 Base URL of the FIDO2 server Endpoints cleanServiceInterval 60 Time interval for the Clean Service in seconds. cleanServiceBatchChunkSize 10000 Each clean up iteration fetches chunk of expired data per base dn and removes it from storage. useLocalCache true Boolean value specifying whether to enable local in-memory cache for attributes, scopes, clients and organization configuration disableJdkLogger true Boolean value specifying whether to enable JDK Loggers loggingLevel \"INFO\" or \"TRACE\" or \"DEBUG\" Logging level for FIDO2 server loggingLayout \"text\" or \"json\" Contents of logs as plain text or json format externalLoggerConfiguration Path to external log4j2 logging configuration metricReporterInterval 300 The interval for metric reporter in seconds. metricReporterKeepDataDays 15 The number of days to retain metric reported data in the system metricReporterEnabled true Boolean value specifying whether to enable Metric Reporter personCustomObjectClassList [\"jansCustomPerson\", \"jansPerson\" ] LDAP custom object class list for dynamic person enrollment. fido2Configuration See JSON contents in the below example FIDO2 Configuration","title":"Configuration Parameters of Janssen's FIDO2 server:"},{"location":"admin/fido/config/#fido2configuration-structure","text":"Field named Example Description authenticatorCertsFolder /etc/jans/conf/fido2/authenticator_cert Authenticators certificates fodler. mdsCertsFolder /etc/jans/conf/fido2/mds/cert MDS TOC root certificates folder. mdsTocsFolder /etc/jans/conf/fido2/mds/toc MDS TOC files folder. serverMetadataFolder /etc/jans/conf/fido2/server_metadata Authenticators metadata in json format. Example: virtual devices. metadataUrlsProvider https://mds3.fido.tools String value to provide source of URLs with external metadata. requestedCredentialTypes [\"RS256\",\"ES256\"] requestedParties [{\"name\":\"https://my-jans-server.jans.io\",\"domains\":[\"my-jans-server.jans.io\"]}] Requested party name. userAutoEnrollment false Allow to enroll users on enrollment/authentication requests. (Useful while running tests) unfinishedRequestExpiration 180 Expiration time in seconds for pending enrollment/authentication requests authenticationHistoryExpiration 1296000 Expiration time in seconds for approved authentication requests.","title":"Fido2Configuration structure"},{"location":"admin/fido/config/#configuring-the-fido2-server","text":"","title":"Configuring the FIDO2 server:"},{"location":"admin/fido/config/#1-read-configuration-parameters","text":"Use the following command to obtain configuration parameters: /opt/jans/jans-cli/config-cli.py --operation-id get-properties-fido2 Response: { \"issuer\": \"https://my.jans.server\", \"baseEndpoint\": \"https://my.jans.server/jans-fido2/restv1\", \"cleanServiceInterval\": 60, \"cleanServiceBatchChunkSize\": 10000, \"useLocalCache\": true, \"disableJdkLogger\": true, \"loggingLevel\": \"DEBUG\", \"loggingLayout\": \"text\", \"metricReporterInterval\": 300, \"metricReporterKeepDataDays\": 15, \"metricReporterEnabled\": true, \"personCustomObjectClassList\": [ \"jansCustomPerson\", \"jansPerson\" ], \"superGluuEnabled\": true, \"oldU2fMigrationEnabled\": true, \"fido2Configuration\": { \"authenticatorCertsFolder\": \"/etc/jans/conf/fido2/authenticator_cert\", \"mdsCertsFolder\": \"/etc/jans/conf/fido2/mds/cert\", \"mdsTocsFolder\": \"/etc/jans/conf/fido2/mds/toc\", \"checkU2fAttestations\": false, \"userAutoEnrollment\": false, \"unfinishedRequestExpiration\": 180, \"authenticationHistoryExpiration\": 1296000, \"serverMetadataFolder\": \"/etc/jans/conf/fido2/server_metadata\", \"metadataUrlsProvider\": \"\", \"requestedCredentialTypes\": [ \"RS256\", \"ES256\" ], \"requestedParties\": [ { \"name\": \"https://my.jans.server\", \"domains\": [ \"my.jans.server\" ] } ] } }","title":"1. Read Configuration parameters:"},{"location":"admin/fido/config/#2-update-configuration-parameters","text":"Steps: A. Create a JSON file say /tmp/config_values.json by editing the JSON from Point 1 B. Use the following command /opt/jans/jans-cli/config-cli.py --operation-id post-config-scripts --data /tmp/config_values.json","title":"2. Update configuration parameters:"},{"location":"admin/fido/config/#3-change-log-level-of-fido2-server","text":"Steps: A. Create a JSON file say /tmp/config_values.json by editing the JSON from Point 1. Edit loggingLevel to TRACE or DEBUG or INFO B. Use the following command /opt/jans/jans-cli/config-cli.py --operation-id put-properties-fido --data /tmp/config_values.json","title":"3. Change log level of FIDO2 server"},{"location":"admin/fido/config/#4-locating-fido2-configuration-in-persistence-layer","text":"While it is not recommended that an administrator directly edits a configuration at the persistence layer, it may be useful information for a developer.","title":"4. Locating FIDO2 configuration in Persistence Layer"},{"location":"admin/fido/config/#a-mysql","text":"erDiagram jansAppConf { string doc_id PK \"\" string ou \"jans-fido2\" string jansConfDyn \"json configuration for the app\" }","title":"A. MySQL"},{"location":"admin/fido/config/#b-ldap","text":"graph LR A[ou=jans] --> V(ou=configuration) V --> V5[ou=jans-fido2]","title":"B. LDAP"},{"location":"admin/fido/key-mgt/","tags":["administration","fido"],"text":"Attestation types # Basic attestation:","title":"Key Management/Rotation"},{"location":"admin/fido/key-mgt/#attestation-types","text":"Basic attestation:","title":"Attestation types"},{"location":"admin/fido/logs/","tags":["administration","fido"],"text":"Log level and Logging Layout Parameters of Janssen's FIDO2 server: # Field named Example Description loggingLevel \"INFO\" or \"TRACE\" or \"DEBUG\" Logging level for FIDO2 server loggingLayout \"text\" or \"json\" Contents of logs as plain text or json format 1. Read Configuration parameters: # Use the following command to obtain configuration parameters: /opt/jans/jans-cli/config-cli.py --operation-id get-properties-fido2 Response: { \"issuer\":\"https://.jans.io\", \"baseEndpoint\":\"https://my-jans-server.jans.io/jans-fido2/restv1\", \"cleanServiceInterval\":60, \"cleanServiceBatchChunkSize\":10000, \"useLocalCache\":true, \"disableJdkLogger\":true, \"loggingLevel\":\"INFO\", \"loggingLayout\":\"text\", \"externalLoggerConfiguration\":\"\", \"metricReporterInterval\":300, \"metricReporterKeepDataDays\":15, \"metricReporterEnabled\":true, \"personCustomObjectClassList\":[ \"jansCustomPerson\", \"jansPerson\" ], \"fido2Configuration\":{ \"authenticatorCertsFolder\":\"/etc/jans/conf/fido2/authenticator_cert\", \"mdsCertsFolder\":\"/etc/jans/conf/fido2/mds/cert\", \"mdsTocsFolder\":\"/etc/jans/conf/fido2/mds/toc\", \"serverMetadataFolder\":\"/etc/jans/conf/fido2/server_metadata\", \"requestedCredentialTypes\":[ \"RS256\", \"ES256\" ], \"requestedParties\":[ { \"name\":\"https://my-jans-server.jans.io\", \"domains\":[ \"my-jans-server.jans.io\" ] } ], \"userAutoEnrollment\":false, \"unfinishedRequestExpiration\":180, \"authenticationHistoryExpiration\":1296000 } } 2. Update loggingLevel or loggingLayout : # Steps: A. Create a JSON file say /tmp/config_values.json by editing the JSON from Point 1 and - edit loggingLevel to TRACE or DEBUG or INFO - edit loggingLayout to text or json B. Use the following command to update the logging level /opt/jans/jans-cli/config-cli.py --operation-id post-config-scripts --data /tmp/config_values.json C. restart jans-fido2 service fido2 restart or systemctl restart fido2 Location of logs in FIDO2 server: # Logs can be found at /opt/jans/jetty/jans-fido2/logs","title":"Logs"},{"location":"admin/fido/logs/#log-level-and-logging-layout-parameters-of-janssens-fido2-server","text":"Field named Example Description loggingLevel \"INFO\" or \"TRACE\" or \"DEBUG\" Logging level for FIDO2 server loggingLayout \"text\" or \"json\" Contents of logs as plain text or json format","title":"Log level and Logging Layout Parameters of Janssen's FIDO2 server:"},{"location":"admin/fido/logs/#1-read-configuration-parameters","text":"Use the following command to obtain configuration parameters: /opt/jans/jans-cli/config-cli.py --operation-id get-properties-fido2 Response: { \"issuer\":\"https://.jans.io\", \"baseEndpoint\":\"https://my-jans-server.jans.io/jans-fido2/restv1\", \"cleanServiceInterval\":60, \"cleanServiceBatchChunkSize\":10000, \"useLocalCache\":true, \"disableJdkLogger\":true, \"loggingLevel\":\"INFO\", \"loggingLayout\":\"text\", \"externalLoggerConfiguration\":\"\", \"metricReporterInterval\":300, \"metricReporterKeepDataDays\":15, \"metricReporterEnabled\":true, \"personCustomObjectClassList\":[ \"jansCustomPerson\", \"jansPerson\" ], \"fido2Configuration\":{ \"authenticatorCertsFolder\":\"/etc/jans/conf/fido2/authenticator_cert\", \"mdsCertsFolder\":\"/etc/jans/conf/fido2/mds/cert\", \"mdsTocsFolder\":\"/etc/jans/conf/fido2/mds/toc\", \"serverMetadataFolder\":\"/etc/jans/conf/fido2/server_metadata\", \"requestedCredentialTypes\":[ \"RS256\", \"ES256\" ], \"requestedParties\":[ { \"name\":\"https://my-jans-server.jans.io\", \"domains\":[ \"my-jans-server.jans.io\" ] } ], \"userAutoEnrollment\":false, \"unfinishedRequestExpiration\":180, \"authenticationHistoryExpiration\":1296000 } }","title":"1. Read Configuration parameters:"},{"location":"admin/fido/logs/#2-update-logginglevel-or-logginglayout","text":"Steps: A. Create a JSON file say /tmp/config_values.json by editing the JSON from Point 1 and - edit loggingLevel to TRACE or DEBUG or INFO - edit loggingLayout to text or json B. Use the following command to update the logging level /opt/jans/jans-cli/config-cli.py --operation-id post-config-scripts --data /tmp/config_values.json C. restart jans-fido2 service fido2 restart or systemctl restart fido2","title":"2. Update loggingLevel or loggingLayout:"},{"location":"admin/fido/logs/#location-of-logs-in-fido2-server","text":"Logs can be found at /opt/jans/jetty/jans-fido2/logs","title":"Location of logs in FIDO2 server:"},{"location":"admin/fido/monitoring/","tags":["administration","fido"],"text":"This page will be the landing page for the Janssen Project admin documentation","title":"Monitoring"},{"location":"admin/fido/platform-authn/","tags":["administration","fido"],"text":"Apple Anonymous Attestation is first of its kind, providing a service like an Anonymization CA, where the authenticator works with a cloud operated CA owned by its manufacturer to dynamically generate per-credential attestation certificates such that no identification information of the authenticator will be revealed to websites in the attestation statement. Furthermore, among data relevant to the registration ceremony, only the public key of the credential along with a hash of the concatenated authenticator data and client data are sent to the CA for attestation, and the CA will not store any of these. This approach makes the whole attestation process privacy preserving. In addition, this approach avoids the security pitfall of Basic Attestation that the compromising of a single device results in revoking certificates from all devices with the same attestation certificate. https://medium.com/webauthnworks/webauthn-fido2-verifying-apple-anonymous-attestation-5eaff334c849","title":"Platform Authenticator Support"},{"location":"admin/fido/scim/","tags":["administration","fido"],"text":"This page will be the landing page for the Janssen Project admin documentation","title":"SCIM Extension"},{"location":"admin/fido/usb-authn/","tags":["administration","fido"],"text":"This page will be the landing page for the Janssen Project admin documentation","title":"USB Authenticator Support"},{"location":"admin/fido/vendor-metadata/","tags":["administration","fido2","metadata Service","attestation"],"text":"Metadata Service: # The metadata service is a centralized, trusted database of FIDO authenticators. It is used by the Relying Party to validate authenticators i.e. attest the genuine-ness of a device. If implemented in organizations like government, federal agencies, banking and healthcare organizations for example) and/or organizations handling sensitive data (media companies, R&D institutions, corporations, etc), this information can help protect organizations against security vulnerabilities. 1. Local metadata service: # Janssen's FIDO server has a configuration parameter called serverMetadataFolder which by default points to a directory location /etc/jans/conf/fido2/server_metadata where the administrator can (obtain from a vendor and ) place authenticator metadata in json format. Example of authenticator metadata: { \"aaguid\": \"83c44309-....-8be444b573cb\", \"metadataStatement\": { \"legalHeader\": \"Submission of this statement and retrieval and use of this statement indicates acceptance of the appropriate agreement located at https://fidoalliance.org/metadata/metadata-legal-terms/.\", \"aaguid\": \"83c44309-....-8be444b573cb\", \"description\": \"Just an example\", \"authenticatorVersion\": 448962, \"protocolFamily\": \"fido2\", \"schema\": 3, \"upv\": [ { \"major\": 1, \"minor\": 0 }, { \"major\": 1, \"minor\": 1 } ], \"authenticationAlgorithms\": [ \"ed25519_eddsa_sha512_raw\", \"secp256r1_ecdsa_sha256_raw\" ], \"publicKeyAlgAndEncodings\": [ \"cose\" ], \"attestationTypes\": [ \"basic_full\" ], \"userVerificationDetails\": [ [ { \"userVerificationMethod\": \"passcode_external\", \"caDesc\": { \"base\": 64, \"minLength\": 4, \"maxRetries\": 8, \"blockSlowdown\": 0 } }, { \"userVerificationMethod\": \"presence_internal\" } ], [ { \"userVerificationMethod\": \"passcode_external\", \"caDesc\": { \"base\": 64, \"minLength\": 4, \"maxRetries\": 8, \"blockSlowdown\": 0 } } ], [ { \"userVerificationMethod\": \"fingerprint_internal\", \"baDesc\": { \"selfAttestedFRR\": 0, \"selfAttestedFAR\": 0, \"maxTemplates\": 5, \"maxRetries\": 5, \"blockSlowdown\": 0 } }, { \"userVerificationMethod\": \"presence_internal\" } ], [ { \"userVerificationMethod\": \"none\" } ], [ { \"userVerificationMethod\": \"fingerprint_internal\", \"baDesc\": { \"selfAttestedFRR\": 0, \"selfAttestedFAR\": 0, \"maxTemplates\": 5, \"maxRetries\": 5, \"blockSlowdown\": 0 } } ], [ { \"userVerificationMethod\": \"presence_internal\" } ] ], \"keyProtection\": [ \"hardware\", \"secure_element\" ], \"matcherProtection\": [ \"on_chip\" ], \"cryptoStrength\": 128, \"attachmentHint\": [ \"external\", \"wired\" ], \"tcDisplay\": [], \"attestationRootCertificates\": [ \"MII....psmyPzK+Vsgw2jeRQ5JlKDyqE0hebfC1tvFu0CCrJFcw==\" ], \"icon\": \"data:image/png;base64,iVBORw0KGgoAAAA....k5+36hF7vXAAAAAElFTkSuQmCC\", \"authenticatorGetInfo\": { \"versions\": [ \"FIDO_2_0\", \"FIDO_2_1_PRE\", \"FIDO_2_1\" ], \"extensions\": [ \"credProtect\", \"hmac-secret\", \"largeBlobKey\", \"credBlob\", \"minPinLength\" ], \"aaguid\": \"83c.....73cb\", \"options\": { \"plat\": false, \"rk\": true, \"clientPin\": true, \"up\": true, \"uv\": false, \"pinUvAuthToken\": true, \"largeBlobs\": true, \"ep\": false, \"bioEnroll\": false, \"userVerificationMgmtPreview\": false, \"authnrCfg\": true, \"credMgmt\": true, \"credentialMgmtPreview\": true, \"setMinPINLength\": true, \"makeCredUvNotRqd\": false, \"alwaysUv\": true }, \"maxMsgSize\": 1200, \"pinUvAuthProtocols\": [ 2, 1 ], \"maxCredentialCountInList\": 8, \"maxCredentialIdLength\": 128, \"transports\": [ \"usb\" ], \"algorithms\": [ { \"type\": \"public-key\", \"alg\": -7 }, { \"type\": \"public-key\", \"alg\": -8 } ], \"maxSerializedLargeBlobArray\": 1024, \"forcePINChange\": false, \"minPINLength\": 4, \"firmwareVersion\": 328965, \"maxCredBlobLength\": 32, \"maxRPIDsForSetMinPINLength\": 1, \"preferredPlatformUvAttempts\": 3, \"uvModality\": 2, \"remainingDiscoverableCredentials\": 25 } }, \"statusReports\": [ { \"status\": \"FIDO_CERTIFIED_L1\", \"effectiveDate\": \"2021-08-06\", \"url\": \"www.yubico.com\", \"certificationDescriptor\": \"An example\", \"certificateNumber\": \"FIDO2.....001\", \"certificationPolicyVersion\": \"1.3\", \"certificationRequirementsVersion\": \"1.4\" }, { \"status\": \"FIDO_CERTIFIED\", \"effectiveDate\": \"2021-08-06\" } ], \"timeOfLastStatusChange\": \"2021-08-16\" } 2. Metadata service for authenticators approved by FIDO Alliance (MDS3) # Metadata entries for trusted authenticators registered with FIDO Alliance can be found on - https://fidoalliance.org/certification/fido-certified-products/ Draw.io reference for image: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <mxfile host=\"app.diagrams.net\" modified=\"2022-11-03T13:17:35.619Z\" agent=\"5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36 Edg/106.0.1370.52\" etag=\"MPAHjBuOoBSpVro-BGSI\" version=\"20.5.1\" type=\"google\"><diagram id=\"An1oD0C01MiJfx2t8ul6\" name=\"Page-1\">7Vlbc6M2FP41nrYPyXAx2Hl07HUv052kdWe7fVRAAU0EokLEdn/9noOEsQBnva6ZnZ3ZJ3M+ISG+79yEJ/4y2/0sSZG+FzHlE8+JdxN/NfE8158F8IPIXiOzYKqBRLLY3NQCG/YfNaBj0IrFtLRuVEJwxQobjESe00hZGJFSbO3bngW3n1qQhPaATUR4H/2bxSrV6DxwWvwXypK0ebLrmJGMNDcboExJLLZHkP9u4i+lEEpfZbsl5Uhew4uetz4xetiYpLk6Z0L6cRW7f/0ZB+E2cD9U+8dy+ceNUeeV8Mq88G8kL2/Wv64eEN9Q+Uql2b/aN6SUW5ZxkoN1/yxyZVRz52Cb9ahUdHdyo+7h9cFvqMioknu4xUyY+oYx4zJzY25b/g9Yesx9aEBiNE8OS7e0wIVh5gtY8nssIUGALDhnJI/oDyUY76kiMVGk5ooomuH7wm7yGJ1WVqW2olQMMJqSAi9zoZDVbcoU3RQkQmwLkQVYqjKOLMPlE4leEimqPH6oFGc5NXhM5MsDzGIKqXNuneBcRU47x0mZvMBSaRr0VLoL+iLNg5E0mvY0+l1AGNu6bFpdvn0B3FlHgbCnwGxAgdlYCsx6CvRYpnm8wKQMVsRJWbLI5rWmlOJDnJO5hca9jH0ZjUc8BQPppMEk5USxV/uZQ+SZJzwKVsf9zqbbiORNO0mqFJWMqJl0nL7fXsf1O+soIhOqeuvUSh5e+nJxwy9NgVg6GISPF3KFEQM5L0zw6sdUKSzeC9yjt35msSBmjVshE9zdYZX1Tz0Xsl3kM3E6QnUKHLs6+d655amr/NUCbz4QeJp1fH+LvvDfSjQDN2XNDOjguF6xq+lpxhuxoGPJuSBIOPZYBWw2JBmynD+Vhb6R6wlr/TA9rycbEK5sbQhnSY6JAIiHHsO/R1kYpOyFGchYHOP0e0lhp+SpXgpFL9DJaxKD+0mwwrUqJUqjM5ilkuKFLgWHSospXXcqjPMuNL57eGHfPVxvwD1G8467/+8d8xPe0aSASqVAD2insLU5zyEujmPvOkK5ri3UoXE/Fmo2FMfeWEo1OxqvggI3cv/RDNbGP3WfEjTmanc8uNo31o4pnObeOk5obD0TD3jabqeicTzzkUoGDGGQ19gZddxAuji+RZlpzXX1+1z9+lo9gD/r1Iy7C5uAqddZqJs1Ru4CXHd0D208zfKyt33siv5091XdZN6pHe6lbtI5QfdOxmO7iTdeR7JQiuLxmon8e+9hlzS/W9L8fkkb6kxHaz3c/oeTq/UenabD+QB559vpPuzDnD/UJA4pNR9Nqf7nk6tFLLCiyAvFLUDIOsNNoxNhBD6jeRTZ7amxe+7QX9UkTViJEYzUAXOH1ZsT5fcU0el65x3PG/q4OlTiLvi2Cmb7dVuXlvY/Av/dJw==</diagram></mxfile> Janssen's FIDO2 server - Downloads, verifies and caches metadata BLOBs from the FIDO Metadata Service. Re-downloads the metadata BLOB when it expires. Provides trust root certificates for verifying attestation statements during credential registrations. 3. Skip metadata validation # Metadata validation is recommended but not mandatory as per FIDO2 specifications. As per the current implementation, there is no provision in the jans-fido2 server to turn this feature off. However, the intention is to implement it in the future. 4. How Apple does it differently # If you check attStmt and it contains x5c , it is a FULL attestation. FULL basically means that it is a certificate that is chained to the vendor. It's signed by a batch private key whose public key is in a batch certificate that is chained to the Apple attestation root certificate. Usually certificates have an authorityInfoAccess extension that helps locate the root, but Apple chose not to do that. Nevertheless, a quick google give us the needed root certificate https://www.apple.com/certificateauthority/Apple_WebAuthn_Root_CA.pem. This certificate is downloaded to the path /etc/jans/conf/fido2/authenticator_cert . You can see more details of the implementation in this link from https://medium.com/webauthnworks/webauthn-fido2-verifying-apple-anonymous-attestation-5eaff334c849. References: # https://fidoalliance.org/announcing-the-new-streamlined-and-simplified-metadata-service-for-authenticator-vendors-and-customers/","title":"Vendor Metadata Management"},{"location":"admin/fido/vendor-metadata/#metadata-service","text":"The metadata service is a centralized, trusted database of FIDO authenticators. It is used by the Relying Party to validate authenticators i.e. attest the genuine-ness of a device. If implemented in organizations like government, federal agencies, banking and healthcare organizations for example) and/or organizations handling sensitive data (media companies, R&D institutions, corporations, etc), this information can help protect organizations against security vulnerabilities.","title":"Metadata Service:"},{"location":"admin/fido/vendor-metadata/#1-local-metadata-service","text":"Janssen's FIDO server has a configuration parameter called serverMetadataFolder which by default points to a directory location /etc/jans/conf/fido2/server_metadata where the administrator can (obtain from a vendor and ) place authenticator metadata in json format. Example of authenticator metadata: { \"aaguid\": \"83c44309-....-8be444b573cb\", \"metadataStatement\": { \"legalHeader\": \"Submission of this statement and retrieval and use of this statement indicates acceptance of the appropriate agreement located at https://fidoalliance.org/metadata/metadata-legal-terms/.\", \"aaguid\": \"83c44309-....-8be444b573cb\", \"description\": \"Just an example\", \"authenticatorVersion\": 448962, \"protocolFamily\": \"fido2\", \"schema\": 3, \"upv\": [ { \"major\": 1, \"minor\": 0 }, { \"major\": 1, \"minor\": 1 } ], \"authenticationAlgorithms\": [ \"ed25519_eddsa_sha512_raw\", \"secp256r1_ecdsa_sha256_raw\" ], \"publicKeyAlgAndEncodings\": [ \"cose\" ], \"attestationTypes\": [ \"basic_full\" ], \"userVerificationDetails\": [ [ { \"userVerificationMethod\": \"passcode_external\", \"caDesc\": { \"base\": 64, \"minLength\": 4, \"maxRetries\": 8, \"blockSlowdown\": 0 } }, { \"userVerificationMethod\": \"presence_internal\" } ], [ { \"userVerificationMethod\": \"passcode_external\", \"caDesc\": { \"base\": 64, \"minLength\": 4, \"maxRetries\": 8, \"blockSlowdown\": 0 } } ], [ { \"userVerificationMethod\": \"fingerprint_internal\", \"baDesc\": { \"selfAttestedFRR\": 0, \"selfAttestedFAR\": 0, \"maxTemplates\": 5, \"maxRetries\": 5, \"blockSlowdown\": 0 } }, { \"userVerificationMethod\": \"presence_internal\" } ], [ { \"userVerificationMethod\": \"none\" } ], [ { \"userVerificationMethod\": \"fingerprint_internal\", \"baDesc\": { \"selfAttestedFRR\": 0, \"selfAttestedFAR\": 0, \"maxTemplates\": 5, \"maxRetries\": 5, \"blockSlowdown\": 0 } } ], [ { \"userVerificationMethod\": \"presence_internal\" } ] ], \"keyProtection\": [ \"hardware\", \"secure_element\" ], \"matcherProtection\": [ \"on_chip\" ], \"cryptoStrength\": 128, \"attachmentHint\": [ \"external\", \"wired\" ], \"tcDisplay\": [], \"attestationRootCertificates\": [ \"MII....psmyPzK+Vsgw2jeRQ5JlKDyqE0hebfC1tvFu0CCrJFcw==\" ], \"icon\": \"data:image/png;base64,iVBORw0KGgoAAAA....k5+36hF7vXAAAAAElFTkSuQmCC\", \"authenticatorGetInfo\": { \"versions\": [ \"FIDO_2_0\", \"FIDO_2_1_PRE\", \"FIDO_2_1\" ], \"extensions\": [ \"credProtect\", \"hmac-secret\", \"largeBlobKey\", \"credBlob\", \"minPinLength\" ], \"aaguid\": \"83c.....73cb\", \"options\": { \"plat\": false, \"rk\": true, \"clientPin\": true, \"up\": true, \"uv\": false, \"pinUvAuthToken\": true, \"largeBlobs\": true, \"ep\": false, \"bioEnroll\": false, \"userVerificationMgmtPreview\": false, \"authnrCfg\": true, \"credMgmt\": true, \"credentialMgmtPreview\": true, \"setMinPINLength\": true, \"makeCredUvNotRqd\": false, \"alwaysUv\": true }, \"maxMsgSize\": 1200, \"pinUvAuthProtocols\": [ 2, 1 ], \"maxCredentialCountInList\": 8, \"maxCredentialIdLength\": 128, \"transports\": [ \"usb\" ], \"algorithms\": [ { \"type\": \"public-key\", \"alg\": -7 }, { \"type\": \"public-key\", \"alg\": -8 } ], \"maxSerializedLargeBlobArray\": 1024, \"forcePINChange\": false, \"minPINLength\": 4, \"firmwareVersion\": 328965, \"maxCredBlobLength\": 32, \"maxRPIDsForSetMinPINLength\": 1, \"preferredPlatformUvAttempts\": 3, \"uvModality\": 2, \"remainingDiscoverableCredentials\": 25 } }, \"statusReports\": [ { \"status\": \"FIDO_CERTIFIED_L1\", \"effectiveDate\": \"2021-08-06\", \"url\": \"www.yubico.com\", \"certificationDescriptor\": \"An example\", \"certificateNumber\": \"FIDO2.....001\", \"certificationPolicyVersion\": \"1.3\", \"certificationRequirementsVersion\": \"1.4\" }, { \"status\": \"FIDO_CERTIFIED\", \"effectiveDate\": \"2021-08-06\" } ], \"timeOfLastStatusChange\": \"2021-08-16\" }","title":"1. Local metadata service:"},{"location":"admin/fido/vendor-metadata/#2-metadata-service-for-authenticators-approved-by-fido-alliance-mds3","text":"Metadata entries for trusted authenticators registered with FIDO Alliance can be found on - https://fidoalliance.org/certification/fido-certified-products/ Draw.io reference for image: <?xml version=\"1.0\" encoding=\"UTF-8\"?> <mxfile host=\"app.diagrams.net\" modified=\"2022-11-03T13:17:35.619Z\" agent=\"5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36 Edg/106.0.1370.52\" etag=\"MPAHjBuOoBSpVro-BGSI\" version=\"20.5.1\" type=\"google\"><diagram id=\"An1oD0C01MiJfx2t8ul6\" name=\"Page-1\">7Vlbc6M2FP41nrYPyXAx2Hl07HUv052kdWe7fVRAAU0EokLEdn/9noOEsQBnva6ZnZ3ZJ3M+ISG+79yEJ/4y2/0sSZG+FzHlE8+JdxN/NfE8158F8IPIXiOzYKqBRLLY3NQCG/YfNaBj0IrFtLRuVEJwxQobjESe00hZGJFSbO3bngW3n1qQhPaATUR4H/2bxSrV6DxwWvwXypK0ebLrmJGMNDcboExJLLZHkP9u4i+lEEpfZbsl5Uhew4uetz4xetiYpLk6Z0L6cRW7f/0ZB+E2cD9U+8dy+ceNUeeV8Mq88G8kL2/Wv64eEN9Q+Uql2b/aN6SUW5ZxkoN1/yxyZVRz52Cb9ahUdHdyo+7h9cFvqMioknu4xUyY+oYx4zJzY25b/g9Yesx9aEBiNE8OS7e0wIVh5gtY8nssIUGALDhnJI/oDyUY76kiMVGk5ooomuH7wm7yGJ1WVqW2olQMMJqSAi9zoZDVbcoU3RQkQmwLkQVYqjKOLMPlE4leEimqPH6oFGc5NXhM5MsDzGIKqXNuneBcRU47x0mZvMBSaRr0VLoL+iLNg5E0mvY0+l1AGNu6bFpdvn0B3FlHgbCnwGxAgdlYCsx6CvRYpnm8wKQMVsRJWbLI5rWmlOJDnJO5hca9jH0ZjUc8BQPppMEk5USxV/uZQ+SZJzwKVsf9zqbbiORNO0mqFJWMqJl0nL7fXsf1O+soIhOqeuvUSh5e+nJxwy9NgVg6GISPF3KFEQM5L0zw6sdUKSzeC9yjt35msSBmjVshE9zdYZX1Tz0Xsl3kM3E6QnUKHLs6+d655amr/NUCbz4QeJp1fH+LvvDfSjQDN2XNDOjguF6xq+lpxhuxoGPJuSBIOPZYBWw2JBmynD+Vhb6R6wlr/TA9rycbEK5sbQhnSY6JAIiHHsO/R1kYpOyFGchYHOP0e0lhp+SpXgpFL9DJaxKD+0mwwrUqJUqjM5ilkuKFLgWHSospXXcqjPMuNL57eGHfPVxvwD1G8467/+8d8xPe0aSASqVAD2insLU5zyEujmPvOkK5ri3UoXE/Fmo2FMfeWEo1OxqvggI3cv/RDNbGP3WfEjTmanc8uNo31o4pnObeOk5obD0TD3jabqeicTzzkUoGDGGQ19gZddxAuji+RZlpzXX1+1z9+lo9gD/r1Iy7C5uAqddZqJs1Ru4CXHd0D208zfKyt33siv5091XdZN6pHe6lbtI5QfdOxmO7iTdeR7JQiuLxmon8e+9hlzS/W9L8fkkb6kxHaz3c/oeTq/UenabD+QB559vpPuzDnD/UJA4pNR9Nqf7nk6tFLLCiyAvFLUDIOsNNoxNhBD6jeRTZ7amxe+7QX9UkTViJEYzUAXOH1ZsT5fcU0el65x3PG/q4OlTiLvi2Cmb7dVuXlvY/Av/dJw==</diagram></mxfile> Janssen's FIDO2 server - Downloads, verifies and caches metadata BLOBs from the FIDO Metadata Service. Re-downloads the metadata BLOB when it expires. Provides trust root certificates for verifying attestation statements during credential registrations.","title":"2. Metadata service for authenticators approved by FIDO Alliance (MDS3)"},{"location":"admin/fido/vendor-metadata/#3-skip-metadata-validation","text":"Metadata validation is recommended but not mandatory as per FIDO2 specifications. As per the current implementation, there is no provision in the jans-fido2 server to turn this feature off. However, the intention is to implement it in the future.","title":"3. Skip metadata validation"},{"location":"admin/fido/vendor-metadata/#4-how-apple-does-it-differently","text":"If you check attStmt and it contains x5c , it is a FULL attestation. FULL basically means that it is a certificate that is chained to the vendor. It's signed by a batch private key whose public key is in a batch certificate that is chained to the Apple attestation root certificate. Usually certificates have an authorityInfoAccess extension that helps locate the root, but Apple chose not to do that. Nevertheless, a quick google give us the needed root certificate https://www.apple.com/certificateauthority/Apple_WebAuthn_Root_CA.pem. This certificate is downloaded to the path /etc/jans/conf/fido2/authenticator_cert . You can see more details of the implementation in this link from https://medium.com/webauthnworks/webauthn-fido2-verifying-apple-anonymous-attestation-5eaff334c849.","title":"4. How Apple does it differently"},{"location":"admin/fido/vendor-metadata/#references","text":"https://fidoalliance.org/announcing-the-new-streamlined-and-simplified-metadata-service-for-authenticator-vendors-and-customers/","title":"References:"},{"location":"admin/install/","tags":["administration","installation"],"text":"Installation Overview # The goal of Janssen Project is to give you a lot of deployment options. This is a challenge--the more ways to install, the more ways for things to go wrong! But to build a large community, we need to provide ways to install the software in enough different ways to make at least the bulk of the community happy. Currently, that means the following installation options: VM packages for Ubuntu, SUSE and Red Hat Helm deployments for Amazon, Google, Microsoft and Rancher Docker monolith deployment for development / testing (not production) Minimal Configuration # It turns out that just installing the Janssen binary object code (i.e. the bits), is totally useless. That's because in order to do anything useful with the Janssen Project, you need a minimal amount of configuration. For example, you need to generate cryptographic key pairs, you need to generate a minimal amount of data in the database, you need to generate some web server TLS certificates. For this reason, for most of the platforms, installation is a three step process. Step 1, install the bits. Step 2, run \"setup\" and answer some basic question (like the hostname of your IDP). Step 3, fire up a configuration tool to perform any other last mile configuration. Databases # The Janssen Project gives you a few options to store data: LDAP, MySQL, Postgres, Couchbase, Amazon Aurora, and Spanner. You can also configure an in-memory cache server like Redis. Sometimes installation and configuration of this database is included in the setup process. Sometimes, you need to setup the database ahead of time. Please refer to the database instructions specific for your choice. And of course, you may need to refer to the database documentation itself--we don't want to duplicate any of that third party content. Optimization # Remember, installation is just a starting point. To get peak performance, you may need to tweak some of the configuration dials for your system or the database. If you intend to deploy a Janssen Server in production for high concurrency, make sure you benchmark the exact flows you expect to serve in production. SELinux Policy # Janssen Server installs and uses the Apache web server as a reverse proxy . While the Janssen Server itself will bind to localhost , the Apache reverse proxy listens to external interfaces and forwards the request to the Janssen Server. If you have SELinux enabled VM, then the Apache web server can't forward the request to Janssen Server. Therefore setup script adds the following SELinux policy: httpd_can_network_connect 1 -P","title":"Installation Overview"},{"location":"admin/install/#installation-overview","text":"The goal of Janssen Project is to give you a lot of deployment options. This is a challenge--the more ways to install, the more ways for things to go wrong! But to build a large community, we need to provide ways to install the software in enough different ways to make at least the bulk of the community happy. Currently, that means the following installation options: VM packages for Ubuntu, SUSE and Red Hat Helm deployments for Amazon, Google, Microsoft and Rancher Docker monolith deployment for development / testing (not production)","title":"Installation Overview"},{"location":"admin/install/#minimal-configuration","text":"It turns out that just installing the Janssen binary object code (i.e. the bits), is totally useless. That's because in order to do anything useful with the Janssen Project, you need a minimal amount of configuration. For example, you need to generate cryptographic key pairs, you need to generate a minimal amount of data in the database, you need to generate some web server TLS certificates. For this reason, for most of the platforms, installation is a three step process. Step 1, install the bits. Step 2, run \"setup\" and answer some basic question (like the hostname of your IDP). Step 3, fire up a configuration tool to perform any other last mile configuration.","title":"Minimal Configuration"},{"location":"admin/install/#databases","text":"The Janssen Project gives you a few options to store data: LDAP, MySQL, Postgres, Couchbase, Amazon Aurora, and Spanner. You can also configure an in-memory cache server like Redis. Sometimes installation and configuration of this database is included in the setup process. Sometimes, you need to setup the database ahead of time. Please refer to the database instructions specific for your choice. And of course, you may need to refer to the database documentation itself--we don't want to duplicate any of that third party content.","title":"Databases"},{"location":"admin/install/#optimization","text":"Remember, installation is just a starting point. To get peak performance, you may need to tweak some of the configuration dials for your system or the database. If you intend to deploy a Janssen Server in production for high concurrency, make sure you benchmark the exact flows you expect to serve in production.","title":"Optimization"},{"location":"admin/install/#selinux-policy","text":"Janssen Server installs and uses the Apache web server as a reverse proxy . While the Janssen Server itself will bind to localhost , the Apache reverse proxy listens to external interfaces and forwards the request to the Janssen Server. If you have SELinux enabled VM, then the Apache web server can't forward the request to Janssen Server. Therefore setup script adds the following SELinux policy: httpd_can_network_connect 1 -P","title":"SELinux Policy"},{"location":"admin/install/install-faq/","tags":["administration","installation","faq"],"text":"Janssen Server Installation FAQs # After installation, how do I verify that the Janssen Server is up and running? # Health and status of Janssen Server and its various processes can be verified in multiple ways: Use the Janssen Server Health Check endpoint # Janssen Server provides a health check endpoint for Authentication module. It can be invoked from commandline using CURL as below: curl -k https://janssen-host-name/jans-auth/sys/health-check For a healthy server, this option will return output as below: Please wait while retrieving data ... { \"status\": \"running\", \"db_status\": \"online\" } Access .well-known endpoints # Janssen Server exposes .well-known endpoint for openid configuration as per the OpenIDConnect RFC . Successful response from this endpoint is also an indicator of healthy authentication module. From command-line interface, use CURL to access this endpoint. For example: curl https://janssen-host-name/jans-auth/.well-known/openid-configuration This should return JSON response from Janssen Server as per OpenId specification. Sample below: { \"request_parameter_supported\" : true, \"pushed_authorization_request_endpoint\" : \"https://janssen-host-name/jans-auth/restv1/par\", \"introspection_endpoint\" : \"https://janssen-host-name/jans-auth/restv1/introspection\", \"claims_parameter_supported\" : false, \"issuer\" : \"https://janssen-host-name\", \"userinfo_encryption_enc_values_supported\" : [ \"RSA1_5\", \"RSA-OAEP\", \"A128KW\", \"A256KW\" ], \"id_token_encryption_enc_values_supported\" : [ \"A128CBC+HS256\", \"A256CBC+HS512\", \"A128GCM\", \"A256GCM\" ], \"authorization_endpoint\" : \"https://janssen-host-name/jans-auth/restv1/authorize\", \"service_documentation\" : \"http://jans.org/docs\", \"authorization_encryption_alg_values_supported\" : [ \"RSA1_5\", \"RSA-OAEP\", \"A128KW\", \"A256KW\" ], \"claims_supported\" : [ \"street_address\", \"country\", \"zoneinfo\", \"birthdate\", \"role\", \"gender\", \"user_name\", \"formatted\", \"phone_mobile_number\", \"preferred_username\", \"inum\", \"locale\", \"updated_at\", \"post_office_box\", \"nickname\", \"preferred_language\", \"email\", \"website\", \"email_verified\", \"profile\", \"locality\", \"room_number\", \"phone_number_verified\", \"given_name\", \"middle_name\", \"picture\", \"name\", \"phone_number\", \"postal_code\", \"region\", \"family_name\", \"jansAdminUIRole\" ], \"token_endpoint_auth_methods_supported\" : [ \"client_secret_basic\", \"client_secret_post\", \"client_secret_jwt\", \"private_key_jwt\", \"tls_client_auth\", \"self_signed_tls_client_auth\" ], \"tls_client_certificate_bound_access_tokens\" : true, \"response_modes_supported\" : [ \"FORM_POST\", \"QUERY_JWT\", \"FRAGMENT_JWT\", \"FORM_POST_JWT\", \"QUERY\", \"FRAGMENT\", \"JWT\" ], \"backchannel_logout_session_supported\" : true, \"token_endpoint\" : \"https://janssen-host-name/jans-auth/restv1/token\", \"response_types_supported\" : [ \"id_token token\", \"id_token\", \"code\", \"code token\", \"id_token code token\", \"id_token code\", \"token\" ], \"authorization_encryption_enc_values_supported\" : [ \"A128CBC+HS256\", \"A256CBC+HS512\", \"A128GCM\", \"A256GCM\" ], \"backchannel_token_delivery_modes_supported\" : [ \"poll\", \"ping\", \"push\" ], \"dpop_signing_alg_values_supported\" : [ \"RS256\", \"RS384\", \"RS512\", \"ES256\", \"ES384\", \"ES512\", \"ES512\", \"PS256\", \"PS384\", \"PS512\" ], \"request_uri_parameter_supported\" : true, \"backchannel_user_code_parameter_supported\" : false, \"grant_types_supported\" : [ \"RESOURCE_OWNER_PASSWORD_CREDENTIALS\", \"CLIENT_CREDENTIALS\", \"OXAUTH_UMA_TICKET\", \"AUTHORIZATION_CODE\", \"DEVICE_CODE\", \"REFRESH_TOKEN\", \"IMPLICIT\" ], \"ui_locales_supported\" : [ \"en\", \"bg\", \"de\", \"es\", \"fr\", \"it\", \"ru\", \"tr\" ], \"userinfo_endpoint\" : \"https://janssen-host-name/jans-auth/restv1/userinfo\", \"op_tos_uri\" : \"http://www.jans.io/doku.php?id=jans:tos\", \"require_request_uri_registration\" : false, \"id_token_encryption_alg_values_supported\" : [ \"RSA1_5\", \"RSA-OAEP\", \"A128KW\", \"A256KW\" ], \"frontchannel_logout_session_supported\" : true, \"authorization_signing_alg_values_supported\" : [ \"HS256\", \"HS384\", \"HS512\", \"RS256\", \"RS384\", \"RS512\", \"ES256\", \"ES384\", \"ES512\", \"ES512\", \"PS256\", \"PS384\", \"PS512\" ], \"claims_locales_supported\" : [ \"en\" ], \"clientinfo_endpoint\" : \"https://janssen-host-name/jans-auth/restv1/clientinfo\", \"request_object_signing_alg_values_supported\" : [ \"none\", \"HS256\", \"HS384\", \"HS512\", \"RS256\", \"RS384\", \"RS512\", \"ES256\", \"ES384\", \"ES512\", \"ES512\", \"PS256\", \"PS384\", \"PS512\" ], \"request_object_encryption_alg_values_supported\" : [ \"RSA1_5\", \"RSA-OAEP\", \"A128KW\", \"A256KW\" ], \"session_revocation_endpoint\" : \"https://janssen-host-name/jans-auth/restv1/revoke_session\", \"check_session_iframe\" : \"https://janssen-host-name/jans-auth/opiframe.htm\", \"scopes_supported\" : [ \"https://jans.io/scim/all-resources.search\", \"address\", \"user_name\", \"clientinfo\", \"openid\", \"https://jans.io/scim/fido2.write\", \"profile\", \"uma_protection\", \"permission\", \"https://jans.io/scim/fido.read\", \"https://jans.io/scim/users.write\", \"https://jans.io/scim/groups.read\", \"revoke_session\", \"https://jans.io/scim/fido.write\", \"https://jans.io/scim/bulk\", \"https://jans.io/scim/users.read\", \"phone\", \"mobile_phone\", \"offline_access\", \"https://jans.io/scim/groups.write\", \"email\", \"https://jans.io/scim/fido2.read\", \"jans_client_api\" ], \"backchannel_logout_supported\" : true, \"acr_values_supported\" : [ \"simple_password_auth\" ], \"request_object_encryption_enc_values_supported\" : [ \"A128CBC+HS256\", \"A256CBC+HS512\", \"A128GCM\", \"A256GCM\" ], ... ... Check OS Services # Check the OS platform Janssen Services and their status Check Logs # Check logs for errors How can I see status of Janssen OS platform services? # Ubuntu # systemctl list-units --all \"jans*\" Command above should list services along with its current status. UNIT LOAD ACTIVE SUB DESCRIPTION jans-auth.service loaded active running Janssen OAauth service jans-config-api.service loaded active running Janssen Config API service jans-fido2.service loaded active running Janssen Fido2 Service jans-scim.service loaded active running Janssen Scim service LOAD = Reflects whether the unit definition was properly loaded. ACTIVE = The high-level unit activation state, i.e. generalization of SUB. SUB = The low-level unit activation state, values depend on unit type. 5 loaded units listed. Note Some process listed above may not be available in every installation based on options selected during installation. Where can I find Janssen Server logs? # During installation, Janssen Server produces setup logs under following location: /opt/jans/jans-setup/logs/ Individual modules of the Janssen Server will continue to write their operational logs under respective directory at path below: /opt/jans/jetty/<module-name>/logs/ How do I check the version of Janssen server? # /opt/jans/bin/show_version.py After installation, what's next? # After successful installation of the Janssen Server, move on to the configuration steps in the Command Line Interface documentation to align Janssen with your organizational requirements.","title":"FAQ"},{"location":"admin/install/install-faq/#janssen-server-installation-faqs","text":"","title":"Janssen Server Installation FAQs"},{"location":"admin/install/install-faq/#after-installation-how-do-i-verify-that-the-janssen-server-is-up-and-running","text":"Health and status of Janssen Server and its various processes can be verified in multiple ways:","title":"After installation, how do I verify that the Janssen Server is up and running?"},{"location":"admin/install/install-faq/#use-the-janssen-server-health-check-endpoint","text":"Janssen Server provides a health check endpoint for Authentication module. It can be invoked from commandline using CURL as below: curl -k https://janssen-host-name/jans-auth/sys/health-check For a healthy server, this option will return output as below: Please wait while retrieving data ... { \"status\": \"running\", \"db_status\": \"online\" }","title":"Use the Janssen Server Health Check endpoint"},{"location":"admin/install/install-faq/#access-well-known-endpoints","text":"Janssen Server exposes .well-known endpoint for openid configuration as per the OpenIDConnect RFC . Successful response from this endpoint is also an indicator of healthy authentication module. From command-line interface, use CURL to access this endpoint. For example: curl https://janssen-host-name/jans-auth/.well-known/openid-configuration This should return JSON response from Janssen Server as per OpenId specification. Sample below: { \"request_parameter_supported\" : true, \"pushed_authorization_request_endpoint\" : \"https://janssen-host-name/jans-auth/restv1/par\", \"introspection_endpoint\" : \"https://janssen-host-name/jans-auth/restv1/introspection\", \"claims_parameter_supported\" : false, \"issuer\" : \"https://janssen-host-name\", \"userinfo_encryption_enc_values_supported\" : [ \"RSA1_5\", \"RSA-OAEP\", \"A128KW\", \"A256KW\" ], \"id_token_encryption_enc_values_supported\" : [ \"A128CBC+HS256\", \"A256CBC+HS512\", \"A128GCM\", \"A256GCM\" ], \"authorization_endpoint\" : \"https://janssen-host-name/jans-auth/restv1/authorize\", \"service_documentation\" : \"http://jans.org/docs\", \"authorization_encryption_alg_values_supported\" : [ \"RSA1_5\", \"RSA-OAEP\", \"A128KW\", \"A256KW\" ], \"claims_supported\" : [ \"street_address\", \"country\", \"zoneinfo\", \"birthdate\", \"role\", \"gender\", \"user_name\", \"formatted\", \"phone_mobile_number\", \"preferred_username\", \"inum\", \"locale\", \"updated_at\", \"post_office_box\", \"nickname\", \"preferred_language\", \"email\", \"website\", \"email_verified\", \"profile\", \"locality\", \"room_number\", \"phone_number_verified\", \"given_name\", \"middle_name\", \"picture\", \"name\", \"phone_number\", \"postal_code\", \"region\", \"family_name\", \"jansAdminUIRole\" ], \"token_endpoint_auth_methods_supported\" : [ \"client_secret_basic\", \"client_secret_post\", \"client_secret_jwt\", \"private_key_jwt\", \"tls_client_auth\", \"self_signed_tls_client_auth\" ], \"tls_client_certificate_bound_access_tokens\" : true, \"response_modes_supported\" : [ \"FORM_POST\", \"QUERY_JWT\", \"FRAGMENT_JWT\", \"FORM_POST_JWT\", \"QUERY\", \"FRAGMENT\", \"JWT\" ], \"backchannel_logout_session_supported\" : true, \"token_endpoint\" : \"https://janssen-host-name/jans-auth/restv1/token\", \"response_types_supported\" : [ \"id_token token\", \"id_token\", \"code\", \"code token\", \"id_token code token\", \"id_token code\", \"token\" ], \"authorization_encryption_enc_values_supported\" : [ \"A128CBC+HS256\", \"A256CBC+HS512\", \"A128GCM\", \"A256GCM\" ], \"backchannel_token_delivery_modes_supported\" : [ \"poll\", \"ping\", \"push\" ], \"dpop_signing_alg_values_supported\" : [ \"RS256\", \"RS384\", \"RS512\", \"ES256\", \"ES384\", \"ES512\", \"ES512\", \"PS256\", \"PS384\", \"PS512\" ], \"request_uri_parameter_supported\" : true, \"backchannel_user_code_parameter_supported\" : false, \"grant_types_supported\" : [ \"RESOURCE_OWNER_PASSWORD_CREDENTIALS\", \"CLIENT_CREDENTIALS\", \"OXAUTH_UMA_TICKET\", \"AUTHORIZATION_CODE\", \"DEVICE_CODE\", \"REFRESH_TOKEN\", \"IMPLICIT\" ], \"ui_locales_supported\" : [ \"en\", \"bg\", \"de\", \"es\", \"fr\", \"it\", \"ru\", \"tr\" ], \"userinfo_endpoint\" : \"https://janssen-host-name/jans-auth/restv1/userinfo\", \"op_tos_uri\" : \"http://www.jans.io/doku.php?id=jans:tos\", \"require_request_uri_registration\" : false, \"id_token_encryption_alg_values_supported\" : [ \"RSA1_5\", \"RSA-OAEP\", \"A128KW\", \"A256KW\" ], \"frontchannel_logout_session_supported\" : true, \"authorization_signing_alg_values_supported\" : [ \"HS256\", \"HS384\", \"HS512\", \"RS256\", \"RS384\", \"RS512\", \"ES256\", \"ES384\", \"ES512\", \"ES512\", \"PS256\", \"PS384\", \"PS512\" ], \"claims_locales_supported\" : [ \"en\" ], \"clientinfo_endpoint\" : \"https://janssen-host-name/jans-auth/restv1/clientinfo\", \"request_object_signing_alg_values_supported\" : [ \"none\", \"HS256\", \"HS384\", \"HS512\", \"RS256\", \"RS384\", \"RS512\", \"ES256\", \"ES384\", \"ES512\", \"ES512\", \"PS256\", \"PS384\", \"PS512\" ], \"request_object_encryption_alg_values_supported\" : [ \"RSA1_5\", \"RSA-OAEP\", \"A128KW\", \"A256KW\" ], \"session_revocation_endpoint\" : \"https://janssen-host-name/jans-auth/restv1/revoke_session\", \"check_session_iframe\" : \"https://janssen-host-name/jans-auth/opiframe.htm\", \"scopes_supported\" : [ \"https://jans.io/scim/all-resources.search\", \"address\", \"user_name\", \"clientinfo\", \"openid\", \"https://jans.io/scim/fido2.write\", \"profile\", \"uma_protection\", \"permission\", \"https://jans.io/scim/fido.read\", \"https://jans.io/scim/users.write\", \"https://jans.io/scim/groups.read\", \"revoke_session\", \"https://jans.io/scim/fido.write\", \"https://jans.io/scim/bulk\", \"https://jans.io/scim/users.read\", \"phone\", \"mobile_phone\", \"offline_access\", \"https://jans.io/scim/groups.write\", \"email\", \"https://jans.io/scim/fido2.read\", \"jans_client_api\" ], \"backchannel_logout_supported\" : true, \"acr_values_supported\" : [ \"simple_password_auth\" ], \"request_object_encryption_enc_values_supported\" : [ \"A128CBC+HS256\", \"A256CBC+HS512\", \"A128GCM\", \"A256GCM\" ], ... ...","title":"Access .well-known endpoints"},{"location":"admin/install/install-faq/#check-os-services","text":"Check the OS platform Janssen Services and their status","title":"Check OS Services"},{"location":"admin/install/install-faq/#check-logs","text":"Check logs for errors","title":"Check Logs"},{"location":"admin/install/install-faq/#how-can-i-see-status-of-janssen-os-platform-services","text":"","title":"How can I see status of Janssen OS platform services?"},{"location":"admin/install/install-faq/#ubuntu","text":"systemctl list-units --all \"jans*\" Command above should list services along with its current status. UNIT LOAD ACTIVE SUB DESCRIPTION jans-auth.service loaded active running Janssen OAauth service jans-config-api.service loaded active running Janssen Config API service jans-fido2.service loaded active running Janssen Fido2 Service jans-scim.service loaded active running Janssen Scim service LOAD = Reflects whether the unit definition was properly loaded. ACTIVE = The high-level unit activation state, i.e. generalization of SUB. SUB = The low-level unit activation state, values depend on unit type. 5 loaded units listed. Note Some process listed above may not be available in every installation based on options selected during installation.","title":"Ubuntu"},{"location":"admin/install/install-faq/#where-can-i-find-janssen-server-logs","text":"During installation, Janssen Server produces setup logs under following location: /opt/jans/jans-setup/logs/ Individual modules of the Janssen Server will continue to write their operational logs under respective directory at path below: /opt/jans/jetty/<module-name>/logs/","title":"Where can I find Janssen Server logs?"},{"location":"admin/install/install-faq/#how-do-i-check-the-version-of-janssen-server","text":"/opt/jans/bin/show_version.py","title":"How do I check the version of Janssen server?"},{"location":"admin/install/install-faq/#after-installation-whats-next","text":"After successful installation of the Janssen Server, move on to the configuration steps in the Command Line Interface documentation to align Janssen with your organizational requirements.","title":"After installation, what's next?"},{"location":"admin/install/setup/","tags":["administration","installation","setup"],"text":"Janssen Setup Script # Running Setup # After installation, executing setup.py will launch the SETUP Command Line by default. To run the script, run the following command: python3 /opt/jans/jans-setup/setup.py A warning will pop up if the free disk space is less than the recommended 40 GB. The installer will check that all dependant packages are installed or not, and if missing it will ask to install. When prompted Y/y at the command prompt will install all required packages. The installer will detect which operating system, init type, and Apache version are currently on the server. The setup script will bring up a prompt to provide information for certificates as well as the IP Address and the hostname for the Gluu Server. Hit Enter to accept the default values. Enter IP Address: Enter hostname: Enter your city or locality: Enter your state or province two letter code: Enter two letter Country Code Enter Organization name: Enter email address for support at your organization: Enter maximum RAM for applications in MB: Enter Password for Admin User: Next, pick a persistence mechanism. Choose from openDJ, MySQL ,PGSql, an LDAP that can be installed locally or remotely, or Couchbase, an enterprise NoSQL cloud database. Next, pick which services should be installed for this deployment: Install Jans Config API? [ Yes ] : Install SCIM Server? [ Yes ] : Install Fido2 Server? [ Yes ] : Finally, review the summary screen that gives an overview of the selections made during the setup process. Avoiding common issues # Avoid setup issues by acknowledging the following: IP Address: Do not use localhost for either the IP address or hostname. Hostname: Make sure to choose the hostname carefully. Changing the hostname after installation is not a simple task. Use a real hostname--this can always be managed via host file entries if adding a DNS entry is too much work for testing. For clustered deployments, use the hostname of the cluster that will be used by applications connecting to Gluu. Warning Use a FQDN (fully qualified domain name) as hostname and refrain from using 127.0.0.1 as IP address or usage of private IP is not supported and not recommended. Script Command Line Options # To check usage of this script run help command python3 /opt/jans/jans-setup/setup.py --help usage: jans_setup.py [-h] [--version] [-c] [-d D] [-f F] [-n] [-N] [-u] [-csx] [-remote-rdbm {mysql,pgsql,spanner} | -local-rdbm {mysql,pgsql}] [-ip-address IP_ADDRESS] [-host-name HOST_NAME] [-org-name ORG_NAME] [-email EMAIL] [-city CITY] [-state STATE] [-country COUNTRY] [-rdbm-user RDBM_USER] [-rdbm-password RDBM_PASSWORD] [-rdbm-port RDBM_PORT] [-rdbm-db RDBM_DB] [-rdbm-host RDBM_HOST] [--reset-rdbm-db] [--shell] [--dump-config-on-error] [--no-progress] [-admin-password ADMIN_PASSWORD] [-jans-max-mem JANS_MAX_MEM] [-properties-password PROPERTIES_PASSWORD] [-approved-issuer APPROVED_ISSUER] [--force-download] [--download-exit] [-jans-app-version JANS_APP_VERSION] [-jans-build JANS_BUILD] [-setup-branch SETUP_BRANCH] [--disable-config-api-security] [--cli-test-client] [--import-ldif IMPORT_LDIF] [-enable-script ENABLE_SCRIPT] [-disable-script DISABLE_SCRIPT] [-stm] [-w] [-t] [-x] [--allow-pre-released-features] [--listen_all_interfaces] [--remote-ldap | --disable-local-ldap] [--remote-couchbase] [--local-couchbase] [-couchbase-admin-user COUCHBASE_ADMIN_USER] [-couchbase-admin-password COUCHBASE_ADMIN_PASSWORD] [-couchbase-bucket-prefix COUCHBASE_BUCKET_PREFIX] [-couchbase-hostname COUCHBASE_HOSTNAME] [--no-data] [--no-jsauth] [-ldap-admin-password LDAP_ADMIN_PASSWORD] [--no-config-api] [--no-scim] [--no-fido2] [--install-eleven] [--install-jans-link] [--with-casa] [--load-config-api-test] [-config-patch-creds CONFIG_PATCH_CREDS] [-spanner-project SPANNER_PROJECT] [-spanner-instance SPANNER_INSTANCE] [-spanner-database SPANNER_DATABASE] [-spanner-emulator-host SPANNER_EMULATOR_HOST | -google-application-credentials GOOGLE_APPLICATION_CREDENTIALS] [-test-client-id TEST_CLIENT_ID] [-test-client-pw TEST_CLIENT_PW] [-test-client-redirect-uri TEST_CLIENT_REDIRECT_URI] [--test-client-trusted] Use this script to configure your Jans Server and to add initial data required for oxAuth and oxTrust to start. If setup.properties is found in this folder, these properties will automatically be used instead of the interactive setup. Below are the optional arguments: Argument Description -h, --help show this help message and exit --version show program's version number and exit -c Use command line instead of TUI -d D Installation directory -f F Specify setup.properties file -n No interactive prompt before install starts. Run with -f -N, --no-httpd No apache httpd server -u Update hosts file with IP address / hostname -csx Collect setup properties, save and exit -remote-rdbm Enables using remote RDBM server -local-rdbm Enables installing/configuring local RDBM server -ip-address IP_ADDRESS Used primarily by Apache httpd for the Listen directive -host-name HOST_NAME Internet-facing FQDN that is used to generate certificates and metadata. -org-name ORG_NAME Organization name field used for generating X.509 certificates -email EMAIL Email address for support at your organization used for generating X.509 certificates -city CITY City field used for generating X.509 certificates -state STATE State field used for generating X.509 certificates -country COUNTRY Two letters country coude used for generating X.509 certificates -rdbm-user RDBM_USER RDBM username -rdbm-password RDBM_PASSWORD RDBM password -rdbm-port RDBM_PORT RDBM port -rdbm-db RDBM_DB RDBM database -rdbm-host RDBM_HOST RDBM host --reset-rdbm-db Deletes all tables on target database. Warning! You will lose all data on target database. --shell Drop into interactive shell before starting installation --dump-config-on-error Dump configuration on error --no-progress Use simple progress -admin-password ADMIN_PASSWORD Used as the Administrator password -jans-max-mem JANS_MAX_MEM Total memory (in KB) to be used by Jannsen Server -properties-password PROPERTIES_PASSWORD Encoded setup.properties file password -approved-issuer APPROVED_ISSUER Api Approved Issuer --force-download Force downloading files --download-exit Download files and exits -jans-app-version JANS_APP_VERSION Version for Jannsen applications -jans-build JANS_BUILD Build version for Janssen applications -setup-branch SETUP_BRANCH Jannsen setup github branch --disable-config-api-security Turn off oauth2 security validation for jans-config-api --cli-test-client Use config api test client for CLI --import-ldif IMPORT_LDIF Render ldif templates from directory and import them in Database -enable-script ENABLE_SCRIPT inum of script to enable -disable-script DISABLE_SCRIPT inum of script to disable -disable-selinux Disable SELinux -stm, --enable-scim-test-mode Enable Scim Test Mode -w Get the development head war files -t Load test data -x Load test data and exit --allow-pre-released-features Enable options to install experimental features, not yet officially supported --listen_all_interfaces Allow the LDAP server to listen on all server interfaces --remote-ldap Enables using remote LDAP server --disable-local-ldap Disables installing local LDAP server --remote-couchbase Enables using remote couchbase server --local-couchbase Enables installing couchbase server -couchbase-admin-user COUCHBASE_ADMIN_USER Couchbase admin user -couchbase-admin-password COUCHBASE_ADMIN_PASSWORD Couchbase admin user password -couchbase-bucket-prefix COUCHBASE_BUCKET_PREFIX Set prefix for couchbase buckets -couchbase-hostname COUCHBASE_HOSTNAME Remote couchbase server hostname --no-data Do not import any data to database backend, used for clustering --no-jsauth Do not install OAuth2 Authorization Server -ldap-admin-password LDAP_ADMIN_PASSWORD Used as the LDAP directory manager password --no-config-api Do not install Jans Auth Config Api --no-scim Do not install Scim Server --no-fido2 Do not install Fido2 Server --install-eleven Install Eleven Server --install-jans-link Install Link Server --with-casa Install Gluu/Flex Casa Server --load-config-api-test Load Config Api Test Data --install-cache-refresh Install Cache Refresh Server -config-patch-creds CONFIG_PATCH_CREDS password:username for downloading auto test ciba password -spanner-project SPANNER_PROJECT Spanner project name -spanner-instance SPANNER_INSTANCE Spanner instance name -spanner-database SPANNER_DATABASE Spanner database name -spanner-emulator-host SPANNER_EMULATOR_HOST Use Spanner emulator host -google-application-credentials GOOGLE_APPLICATION_CREDENTIALS Path to Google application credentials json file -test-client-id TEST_CLIENT_ID ID of test client which has all available scopes. Must be in UUID format. -test-client-pw TEST_CLIENT_PW Secret for test client -test-client-redirect-uri TEST_CLIENT_REDIRECT_URI Redirect URI for test client --test-client-trusted Make test client trusted","title":"Setup Instructions"},{"location":"admin/install/setup/#janssen-setup-script","text":"","title":"Janssen Setup Script"},{"location":"admin/install/setup/#running-setup","text":"After installation, executing setup.py will launch the SETUP Command Line by default. To run the script, run the following command: python3 /opt/jans/jans-setup/setup.py A warning will pop up if the free disk space is less than the recommended 40 GB. The installer will check that all dependant packages are installed or not, and if missing it will ask to install. When prompted Y/y at the command prompt will install all required packages. The installer will detect which operating system, init type, and Apache version are currently on the server. The setup script will bring up a prompt to provide information for certificates as well as the IP Address and the hostname for the Gluu Server. Hit Enter to accept the default values. Enter IP Address: Enter hostname: Enter your city or locality: Enter your state or province two letter code: Enter two letter Country Code Enter Organization name: Enter email address for support at your organization: Enter maximum RAM for applications in MB: Enter Password for Admin User: Next, pick a persistence mechanism. Choose from openDJ, MySQL ,PGSql, an LDAP that can be installed locally or remotely, or Couchbase, an enterprise NoSQL cloud database. Next, pick which services should be installed for this deployment: Install Jans Config API? [ Yes ] : Install SCIM Server? [ Yes ] : Install Fido2 Server? [ Yes ] : Finally, review the summary screen that gives an overview of the selections made during the setup process.","title":"Running Setup"},{"location":"admin/install/setup/#avoiding-common-issues","text":"Avoid setup issues by acknowledging the following: IP Address: Do not use localhost for either the IP address or hostname. Hostname: Make sure to choose the hostname carefully. Changing the hostname after installation is not a simple task. Use a real hostname--this can always be managed via host file entries if adding a DNS entry is too much work for testing. For clustered deployments, use the hostname of the cluster that will be used by applications connecting to Gluu. Warning Use a FQDN (fully qualified domain name) as hostname and refrain from using 127.0.0.1 as IP address or usage of private IP is not supported and not recommended.","title":"Avoiding common issues"},{"location":"admin/install/setup/#script-command-line-options","text":"To check usage of this script run help command python3 /opt/jans/jans-setup/setup.py --help usage: jans_setup.py [-h] [--version] [-c] [-d D] [-f F] [-n] [-N] [-u] [-csx] [-remote-rdbm {mysql,pgsql,spanner} | -local-rdbm {mysql,pgsql}] [-ip-address IP_ADDRESS] [-host-name HOST_NAME] [-org-name ORG_NAME] [-email EMAIL] [-city CITY] [-state STATE] [-country COUNTRY] [-rdbm-user RDBM_USER] [-rdbm-password RDBM_PASSWORD] [-rdbm-port RDBM_PORT] [-rdbm-db RDBM_DB] [-rdbm-host RDBM_HOST] [--reset-rdbm-db] [--shell] [--dump-config-on-error] [--no-progress] [-admin-password ADMIN_PASSWORD] [-jans-max-mem JANS_MAX_MEM] [-properties-password PROPERTIES_PASSWORD] [-approved-issuer APPROVED_ISSUER] [--force-download] [--download-exit] [-jans-app-version JANS_APP_VERSION] [-jans-build JANS_BUILD] [-setup-branch SETUP_BRANCH] [--disable-config-api-security] [--cli-test-client] [--import-ldif IMPORT_LDIF] [-enable-script ENABLE_SCRIPT] [-disable-script DISABLE_SCRIPT] [-stm] [-w] [-t] [-x] [--allow-pre-released-features] [--listen_all_interfaces] [--remote-ldap | --disable-local-ldap] [--remote-couchbase] [--local-couchbase] [-couchbase-admin-user COUCHBASE_ADMIN_USER] [-couchbase-admin-password COUCHBASE_ADMIN_PASSWORD] [-couchbase-bucket-prefix COUCHBASE_BUCKET_PREFIX] [-couchbase-hostname COUCHBASE_HOSTNAME] [--no-data] [--no-jsauth] [-ldap-admin-password LDAP_ADMIN_PASSWORD] [--no-config-api] [--no-scim] [--no-fido2] [--install-eleven] [--install-jans-link] [--with-casa] [--load-config-api-test] [-config-patch-creds CONFIG_PATCH_CREDS] [-spanner-project SPANNER_PROJECT] [-spanner-instance SPANNER_INSTANCE] [-spanner-database SPANNER_DATABASE] [-spanner-emulator-host SPANNER_EMULATOR_HOST | -google-application-credentials GOOGLE_APPLICATION_CREDENTIALS] [-test-client-id TEST_CLIENT_ID] [-test-client-pw TEST_CLIENT_PW] [-test-client-redirect-uri TEST_CLIENT_REDIRECT_URI] [--test-client-trusted] Use this script to configure your Jans Server and to add initial data required for oxAuth and oxTrust to start. If setup.properties is found in this folder, these properties will automatically be used instead of the interactive setup. Below are the optional arguments: Argument Description -h, --help show this help message and exit --version show program's version number and exit -c Use command line instead of TUI -d D Installation directory -f F Specify setup.properties file -n No interactive prompt before install starts. Run with -f -N, --no-httpd No apache httpd server -u Update hosts file with IP address / hostname -csx Collect setup properties, save and exit -remote-rdbm Enables using remote RDBM server -local-rdbm Enables installing/configuring local RDBM server -ip-address IP_ADDRESS Used primarily by Apache httpd for the Listen directive -host-name HOST_NAME Internet-facing FQDN that is used to generate certificates and metadata. -org-name ORG_NAME Organization name field used for generating X.509 certificates -email EMAIL Email address for support at your organization used for generating X.509 certificates -city CITY City field used for generating X.509 certificates -state STATE State field used for generating X.509 certificates -country COUNTRY Two letters country coude used for generating X.509 certificates -rdbm-user RDBM_USER RDBM username -rdbm-password RDBM_PASSWORD RDBM password -rdbm-port RDBM_PORT RDBM port -rdbm-db RDBM_DB RDBM database -rdbm-host RDBM_HOST RDBM host --reset-rdbm-db Deletes all tables on target database. Warning! You will lose all data on target database. --shell Drop into interactive shell before starting installation --dump-config-on-error Dump configuration on error --no-progress Use simple progress -admin-password ADMIN_PASSWORD Used as the Administrator password -jans-max-mem JANS_MAX_MEM Total memory (in KB) to be used by Jannsen Server -properties-password PROPERTIES_PASSWORD Encoded setup.properties file password -approved-issuer APPROVED_ISSUER Api Approved Issuer --force-download Force downloading files --download-exit Download files and exits -jans-app-version JANS_APP_VERSION Version for Jannsen applications -jans-build JANS_BUILD Build version for Janssen applications -setup-branch SETUP_BRANCH Jannsen setup github branch --disable-config-api-security Turn off oauth2 security validation for jans-config-api --cli-test-client Use config api test client for CLI --import-ldif IMPORT_LDIF Render ldif templates from directory and import them in Database -enable-script ENABLE_SCRIPT inum of script to enable -disable-script DISABLE_SCRIPT inum of script to disable -disable-selinux Disable SELinux -stm, --enable-scim-test-mode Enable Scim Test Mode -w Get the development head war files -t Load test data -x Load test data and exit --allow-pre-released-features Enable options to install experimental features, not yet officially supported --listen_all_interfaces Allow the LDAP server to listen on all server interfaces --remote-ldap Enables using remote LDAP server --disable-local-ldap Disables installing local LDAP server --remote-couchbase Enables using remote couchbase server --local-couchbase Enables installing couchbase server -couchbase-admin-user COUCHBASE_ADMIN_USER Couchbase admin user -couchbase-admin-password COUCHBASE_ADMIN_PASSWORD Couchbase admin user password -couchbase-bucket-prefix COUCHBASE_BUCKET_PREFIX Set prefix for couchbase buckets -couchbase-hostname COUCHBASE_HOSTNAME Remote couchbase server hostname --no-data Do not import any data to database backend, used for clustering --no-jsauth Do not install OAuth2 Authorization Server -ldap-admin-password LDAP_ADMIN_PASSWORD Used as the LDAP directory manager password --no-config-api Do not install Jans Auth Config Api --no-scim Do not install Scim Server --no-fido2 Do not install Fido2 Server --install-eleven Install Eleven Server --install-jans-link Install Link Server --with-casa Install Gluu/Flex Casa Server --load-config-api-test Load Config Api Test Data --install-cache-refresh Install Cache Refresh Server -config-patch-creds CONFIG_PATCH_CREDS password:username for downloading auto test ciba password -spanner-project SPANNER_PROJECT Spanner project name -spanner-instance SPANNER_INSTANCE Spanner instance name -spanner-database SPANNER_DATABASE Spanner database name -spanner-emulator-host SPANNER_EMULATOR_HOST Use Spanner emulator host -google-application-credentials GOOGLE_APPLICATION_CREDENTIALS Path to Google application credentials json file -test-client-id TEST_CLIENT_ID ID of test client which has all available scopes. Must be in UUID format. -test-client-pw TEST_CLIENT_PW Secret for test client -test-client-redirect-uri TEST_CLIENT_REDIRECT_URI Redirect URI for test client --test-client-trusted Make test client trusted","title":"Script Command Line Options"},{"location":"admin/install/docker-install/compose/","tags":["administration","installation","quick-start","docker compose","docker image"],"text":"Warning This image is for testing and development purposes only. Use Janssen helm charts for production setups. Overview # Docker monolith image packaging for Janssen. This image packs janssen services including the auth-server, config-api, fido2, and scim. Pre-requisites # Docker Docker compose Environment Variables # Installation depends on the set of environment variables shown below. These environment variables can be set to customize installation as per the need. If not set, the installer uses default values. ENV Description Default CN_HOSTNAME Hostname to install janssen with. demoexample.jans.io CN_ADMIN_PASS Password of the admin user. 1t5Fin3#security CN_ORG_NAME Organization name. Used for ssl cert generation. Janssen CN_EMAIL Email. Used for ssl cert generation. support@jans.io CN_CITY City. Used for ssl cert generation. Austin CN_STATE State. Used for ssl cert generation TX CN_COUNTRY Country. Used for ssl cert generation. US CN_INSTALL_LDAP NOT SUPPORRTED YET false CN_INSTALL_MYSQL Install jans with mysql as the backend false CN_INSTALL_PGSQL Install jans with Postgres as the backend false CN_INSTALL_CONFIG_API Installs the Config API service. true CN_INSTALL_SCIM Installs the SCIM API service. true CN_INSTALL_FIDO2 Installs the FIDO2 API service. true RDBMS_DATABASE RDBMS jans database for MySQL or Postgres. jans RDBMS_USER RDBMS database user for MySQL or Postgres. jans RDBMS_PASSWORD RDBMS database user password for MySQL or Postgres. 1t5Fin3#security RDBMS_HOST RDBMS host for MySQL or Postgres. mysql which is the docker compose service name TEST_CLIENT_ID ID of test client in UUID which has all available scopes to access any jans API 9876baac-de39-4c23-8a78-674b59df8c09 TEST_CLIENT_SECRET Secret for test client 1t5Fin3#security TEST_CLIENT_TRUSTED Trust test client true TEST_CLIENT_REDIRECT_URI Not Implemented yet Redirect URI for test client. Multiple uri's with comma may be provided, if not provided redirect uris will be same as the config-api-client `` How to run # Download the compose file wget https://raw.githubusercontent.com/JanssenProject/jans/main/docker-jans-monolith/jans-mysql-compose.yml This docker compose file runs two containers, the janssen monolith container and mysql container. docker compose -f jans-mysql-compose.yml up -d To view the containers running docker compose -f jans-mysql-compose.yml ps Configure Janssen Server # docker compose -f jans-mysql-compose.yml exec jans sh #This opens a bash terminal in the running container /opt/jans/jans-cli/config-cli.py #configure using the config-cli /opt/jans/jans-cli/scim-cli.py #configure using the scim-cli Access endpoints externally # Add to your /etc/hosts file the ip domain record which should be the ip of the instance docker is installed at and the domain used in the env above CN_HOSTNAME . # For-example 172 .22.0.3 demoexample.jans.io After adding the record you can hit endpoints such as https://demoexample.jans.io/.well-known/openid-configuration Clean up # Remove setup and volumes docker compose -f jans-mysql-compose.yml down","title":"Docker compose"},{"location":"admin/install/docker-install/compose/#overview","text":"Docker monolith image packaging for Janssen. This image packs janssen services including the auth-server, config-api, fido2, and scim.","title":"Overview"},{"location":"admin/install/docker-install/compose/#pre-requisites","text":"Docker Docker compose","title":"Pre-requisites"},{"location":"admin/install/docker-install/compose/#environment-variables","text":"Installation depends on the set of environment variables shown below. These environment variables can be set to customize installation as per the need. If not set, the installer uses default values. ENV Description Default CN_HOSTNAME Hostname to install janssen with. demoexample.jans.io CN_ADMIN_PASS Password of the admin user. 1t5Fin3#security CN_ORG_NAME Organization name. Used for ssl cert generation. Janssen CN_EMAIL Email. Used for ssl cert generation. support@jans.io CN_CITY City. Used for ssl cert generation. Austin CN_STATE State. Used for ssl cert generation TX CN_COUNTRY Country. Used for ssl cert generation. US CN_INSTALL_LDAP NOT SUPPORRTED YET false CN_INSTALL_MYSQL Install jans with mysql as the backend false CN_INSTALL_PGSQL Install jans with Postgres as the backend false CN_INSTALL_CONFIG_API Installs the Config API service. true CN_INSTALL_SCIM Installs the SCIM API service. true CN_INSTALL_FIDO2 Installs the FIDO2 API service. true RDBMS_DATABASE RDBMS jans database for MySQL or Postgres. jans RDBMS_USER RDBMS database user for MySQL or Postgres. jans RDBMS_PASSWORD RDBMS database user password for MySQL or Postgres. 1t5Fin3#security RDBMS_HOST RDBMS host for MySQL or Postgres. mysql which is the docker compose service name TEST_CLIENT_ID ID of test client in UUID which has all available scopes to access any jans API 9876baac-de39-4c23-8a78-674b59df8c09 TEST_CLIENT_SECRET Secret for test client 1t5Fin3#security TEST_CLIENT_TRUSTED Trust test client true TEST_CLIENT_REDIRECT_URI Not Implemented yet Redirect URI for test client. Multiple uri's with comma may be provided, if not provided redirect uris will be same as the config-api-client ``","title":"Environment Variables"},{"location":"admin/install/docker-install/compose/#how-to-run","text":"Download the compose file wget https://raw.githubusercontent.com/JanssenProject/jans/main/docker-jans-monolith/jans-mysql-compose.yml This docker compose file runs two containers, the janssen monolith container and mysql container. docker compose -f jans-mysql-compose.yml up -d To view the containers running docker compose -f jans-mysql-compose.yml ps","title":"How to run"},{"location":"admin/install/docker-install/compose/#configure-janssen-server","text":"docker compose -f jans-mysql-compose.yml exec jans sh #This opens a bash terminal in the running container /opt/jans/jans-cli/config-cli.py #configure using the config-cli /opt/jans/jans-cli/scim-cli.py #configure using the scim-cli","title":"Configure Janssen Server"},{"location":"admin/install/docker-install/compose/#access-endpoints-externally","text":"Add to your /etc/hosts file the ip domain record which should be the ip of the instance docker is installed at and the domain used in the env above CN_HOSTNAME . # For-example 172 .22.0.3 demoexample.jans.io After adding the record you can hit endpoints such as https://demoexample.jans.io/.well-known/openid-configuration","title":"Access endpoints externally"},{"location":"admin/install/docker-install/compose/#clean-up","text":"Remove setup and volumes docker compose -f jans-mysql-compose.yml down","title":"Clean up"},{"location":"admin/install/docker-install/quick-start/","tags":["administration","installation","quick-start","docker"],"text":"Warning This image is for testing and development purposes only. Use Janssen helm charts for production setups. Overview # The quickest way to get a Janssen Server up and running is to install a Docker container-based fully featured Janssen Server. System Requirements # System should meet minimum VM system requirements Install # Installation depends on a set of environment variables . These environment variables can be set to customize installation as per the need. If not set, the installer uses default values. Run this command to start the installation: wget https://raw.githubusercontent.com/JanssenProject/jans/v1.0.17.nightly/automation/startjanssenmonolithdemo.sh && chmod u+x startjanssenmonolithdemo.sh && sudo bash startjanssenmonolithdemo.sh demoexample.jans.io MYSQL Console messages like below confirms the successful installation: [+] Running 3/3 \u283f Network docker-jans-monolith_cloud_bridge Created 0.0s \u283f Container docker-jans-monolith-mysql-1 Started 0.6s \u283f Container docker-jans-monolith-jans-1 Started 0.9s Waiting for the Janssen server to come up. Depending on the resources it may take 3-5 mins for the services to be up. Testing openid-configuration endpoint.. As can be seen, the install script also accesses the well-known endpoints to varify that Janssen Server is responsive. Verify Installation By Accessing Standard Endpoints # To access Janssen Server standard endpoints from outside of the Docker container, systems /etc/hosts file needs to be updated. Open the file and add the IP domain record which should be the IP of the instance docker is installed. And the domain used in the env above CN_HOSTNAME . # For-example 172 .22.0.3 demoexample.jans.io After adding the record, hit the standard endpoints such as https://demoexample.jans.io/.well-known/openid-configuration Configure Janssen Server # Access the Docker container shell using: docker exec -ti docker-jans-monolith-jans-1 bash And then use CLI tools to configure Janssen Server as needed. /opt/jans/jans-cli/config-cli.py #or /opt/jans/jans-cli/scim-cli.py Administrative password can be collected from setup.properties.last file. - find / -name 'setup.properties.last' - cat /var/lib/docker/overlay2/xxxxxx/diff/opt/jans/jans-setup/setup.properties.last | grep -i password - ` admin_password ` value is the password Uninstall / Remove the Janssen Server # This docker based installation uses docker compose under the hood to create containers. Hence uninstalling Janssen server involves invoking docker compose with appropriate yml file. Run command below to stop and remove containers. docker compose -f /tmp/jans/docker-jans-monolith/jans-mysql-compose.yml down && rm -rf jans-* Console messages like below confirms the successful removal: [+] Running 3/3 \u283f Container docker-jans-monolith-jans-1 Removed 10.5s \u283f Container docker-jans-monolith-mysql-1 Removed 0.9s \u283f Network docker-jans-monolith_cloud_bridge Removed 0.1s","title":"Quick Start"},{"location":"admin/install/docker-install/quick-start/#overview","text":"The quickest way to get a Janssen Server up and running is to install a Docker container-based fully featured Janssen Server.","title":"Overview"},{"location":"admin/install/docker-install/quick-start/#system-requirements","text":"System should meet minimum VM system requirements","title":"System Requirements"},{"location":"admin/install/docker-install/quick-start/#install","text":"Installation depends on a set of environment variables . These environment variables can be set to customize installation as per the need. If not set, the installer uses default values. Run this command to start the installation: wget https://raw.githubusercontent.com/JanssenProject/jans/v1.0.17.nightly/automation/startjanssenmonolithdemo.sh && chmod u+x startjanssenmonolithdemo.sh && sudo bash startjanssenmonolithdemo.sh demoexample.jans.io MYSQL Console messages like below confirms the successful installation: [+] Running 3/3 \u283f Network docker-jans-monolith_cloud_bridge Created 0.0s \u283f Container docker-jans-monolith-mysql-1 Started 0.6s \u283f Container docker-jans-monolith-jans-1 Started 0.9s Waiting for the Janssen server to come up. Depending on the resources it may take 3-5 mins for the services to be up. Testing openid-configuration endpoint.. As can be seen, the install script also accesses the well-known endpoints to varify that Janssen Server is responsive.","title":"Install"},{"location":"admin/install/docker-install/quick-start/#verify-installation-by-accessing-standard-endpoints","text":"To access Janssen Server standard endpoints from outside of the Docker container, systems /etc/hosts file needs to be updated. Open the file and add the IP domain record which should be the IP of the instance docker is installed. And the domain used in the env above CN_HOSTNAME . # For-example 172 .22.0.3 demoexample.jans.io After adding the record, hit the standard endpoints such as https://demoexample.jans.io/.well-known/openid-configuration","title":"Verify Installation By Accessing Standard Endpoints"},{"location":"admin/install/docker-install/quick-start/#configure-janssen-server","text":"Access the Docker container shell using: docker exec -ti docker-jans-monolith-jans-1 bash And then use CLI tools to configure Janssen Server as needed. /opt/jans/jans-cli/config-cli.py #or /opt/jans/jans-cli/scim-cli.py Administrative password can be collected from setup.properties.last file. - find / -name 'setup.properties.last' - cat /var/lib/docker/overlay2/xxxxxx/diff/opt/jans/jans-setup/setup.properties.last | grep -i password - ` admin_password ` value is the password","title":"Configure Janssen Server"},{"location":"admin/install/docker-install/quick-start/#uninstall-remove-the-janssen-server","text":"This docker based installation uses docker compose under the hood to create containers. Hence uninstalling Janssen server involves invoking docker compose with appropriate yml file. Run command below to stop and remove containers. docker compose -f /tmp/jans/docker-jans-monolith/jans-mysql-compose.yml down && rm -rf jans-* Console messages like below confirms the successful removal: [+] Running 3/3 \u283f Container docker-jans-monolith-jans-1 Removed 10.5s \u283f Container docker-jans-monolith-mysql-1 Removed 0.9s \u283f Network docker-jans-monolith_cloud_bridge Removed 0.1s","title":"Uninstall / Remove the Janssen Server"},{"location":"admin/install/helm-install/","tags":["administration","installation","helm"],"text":"Overview # Janssen enables organizations to build a scalable centralized authentication and authorization service using free open source software. The components of the project include client and server implementations of the OAuth, OpenID Connect, SCIM and FIDO standards. All these components are deployed using janssen helm chart . You can check the reference guide to view the list of the chart components and values. Looking for older helm charts? # If you are looking for older helm charts, you need to build them from the janssen repository. We only keep the last 5 versions of the chart up. We support auto-upgrade using helm upgrade and hence want everyone to stay up to date with our charts. To build older charts manually from the janssen repository, you can use the following example which assumes we are building for janssen version v1.0.0 : git clone --filter blob:none --no-checkout https://github.com/JanssenProject/jans.git /tmp/jans \\ && cd /tmp/jans \\ && git sparse-checkout init --cone \\ && git checkout v1.0.0 \\ && git sparse-checkout add charts/janssen \\ && cd charts/janssen \\ && helm dependency update \\ && helm package .","title":"Overview"},{"location":"admin/install/helm-install/#overview","text":"Janssen enables organizations to build a scalable centralized authentication and authorization service using free open source software. The components of the project include client and server implementations of the OAuth, OpenID Connect, SCIM and FIDO standards. All these components are deployed using janssen helm chart . You can check the reference guide to view the list of the chart components and values.","title":"Overview"},{"location":"admin/install/helm-install/#looking-for-older-helm-charts","text":"If you are looking for older helm charts, you need to build them from the janssen repository. We only keep the last 5 versions of the chart up. We support auto-upgrade using helm upgrade and hence want everyone to stay up to date with our charts. To build older charts manually from the janssen repository, you can use the following example which assumes we are building for janssen version v1.0.0 : git clone --filter blob:none --no-checkout https://github.com/JanssenProject/jans.git /tmp/jans \\ && cd /tmp/jans \\ && git sparse-checkout init --cone \\ && git checkout v1.0.0 \\ && git sparse-checkout add charts/janssen \\ && cd charts/janssen \\ && helm dependency update \\ && helm package .","title":"Looking for older helm charts?"},{"location":"admin/install/helm-install/amazon-eks/","tags":["administration","installation","helm","EKS","Amazon Web Services","AWS"],"text":"Install Janssen on EKS # System Requirements # The resources may be set to the minimum as below: 8 GiB RAM 8 CPU cores 50GB hard-disk Use the listing below for detailed estimation of minimum required resources. Table contains the default resources recommendations per service. Depending on the use of each service the resources needs may be increase or decrease. Service CPU Unit RAM Disk Space Processor Type Required Auth server 2.5 2.5GB N/A 64 Bit Yes LDAP (OpenDJ) 1.5 2GB 10GB 64 Bit Only if couchbase is not installed fido2 0.5 0.5GB N/A 64 Bit No scim 1.0 1.0GB N/A 64 Bit No config - job 0.5 0.5GB N/A 64 Bit Yes on fresh installs persistence - job 0.5 0.5GB N/A 64 Bit Yes on fresh installs nginx 1 1GB N/A 64 Bit Yes if not ALB auth-key-rotation 0.3 0.3GB N/A 64 Bit No [Strongly recommended] config-api 1 1GB N/A 64 Bit No Releases of images are in style 1.0.0-beta.0, 1.0.0-0 Initial Setup # Install aws cli Configure your AWS user account using aws configure command. This makes you able to authenticate before creating the cluster. Note that this user account must have permissions to work with Amazon EKS IAM roles and service linked roles, AWS CloudFormation, and a VPC and related resources Install kubectl Install eksctl Create cluster using eksctl such as the following example: eksctl create cluster --name janssen-cluster --nodegroup-name jans-nodes --node-type NODE_TYPE --nodes 2 --managed --region REGION_CODE You can adjust node-type and nodes number as per your desired cluster size Install Helm3 Create jans namespace where our resources will reside kubectl create namespace jans Jans Installation using Helm # Install Nginx-Ingress , if you are not using Istio ingress helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx helm repo add stable https://charts.helm.sh/stable helm repo update helm install nginx ingress-nginx/ingress-nginx Create a file named override.yaml and add changes as per your desired configuration: FQDN/domain is not registered: Get the Loadbalancer address: kubectl get svc nginx-ingress-nginx-controller --output jsonpath='{.status.loadBalancer.ingress[0].hostname}' Add the following yaml snippet to your override.yaml file: global : isFqdnRegistered : false config : configmap : lbAddr : http:// #Add LB address from previous command FQDN/domain is registered: Add the following yaml snippet to your override.yaml file`: global : isFqdnRegistered : true fqdn : demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans config : configmap : lbAddr : http:// #Add LB address from previous command nginx : ingress : enabled : true path : / hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans tls : - secretName : tls-certificate hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans LDAP/Opendj for persistence storage Add the following yaml snippet to your override.yaml file: global : cnPersistenceType : ldap storageClass : provisioner : kubernetes.io/aws-ebs opendj : enabled : true So if your desired configuration has no-FQDN and LDAP, the final override.yaml file will look something like that: global : cnPersistenceType : ldap isFqdnRegistered : false storageClass : provisioner : kubernetes.io/aws-ebs opendj : enabled : true config : configmap : lbAddr : http:// #Add LB address from previous command nginx-ingress : ingress : path : / hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans tls : - secretName : tls-certificate hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans Couchbase for pesistence storage Add the following yaml snippet to your override.yaml file: global : cnPersistenceType : couchbase config : configmap : # The prefix of couchbase buckets. This helps with separation in between different environments and allows for the same couchbase cluster to be used by different setups of Janssen. cnCouchbaseBucketPrefix : jans # -- Couchbase certificate authority string. This must be encoded using base64. This can also be found in your couchbase UI Security > Root Certificate. In mTLS setups this is not required. cnCouchbaseCrt : SWFtTm90YVNlcnZpY2VBY2NvdW50Q2hhbmdlTWV0b09uZQo= # -- The number of replicas per index created. Please note that the number of index nodes must be one greater than the number of index replicas. That means if your couchbase cluster only has 2 index nodes you cannot place the number of replicas to be higher than 1. cnCouchbaseIndexNumReplica : 0 # -- Couchbase password for the restricted user config.configmap.cnCouchbaseUser that is often used inside the services. The password must contain one digit, one uppercase letter, one lower case letter and one symbol cnCouchbasePassword : P@ssw0rd # -- The Couchbase super user (admin) username. This user is used during initialization only. cnCouchbaseSuperUser : admin # -- Couchbase password for the superuser config.configmap.cnCouchbaseSuperUser that is used during the initialization process. The password must contain one digit, one uppercase letter, one lower case letter and one symbol cnCouchbaseSuperUserPassword : Test1234# # -- Couchbase URL. This should be in FQDN format for either remote or local Couchbase clusters. The address can be an internal address inside the kubernetes cluster cnCouchbaseUrl : cbjanssen.default.svc.cluster.local # -- Couchbase restricted user cnCouchbaseUser : janssen MySQL for persistence storage In a production environment, a production grade MySQL server should be used such as Amazon RDS For testing purposes, you can deploy it on the EKS cluster using the following commands: helm repo add bitnami https://charts.bitnami.com/bitnami helm install my-release --set auth.rootPassword=Test1234#,auth.database=jans bitnami/mysql -n jans Add the following yaml snippet to your override.yaml file: global : cnPersistenceType : sql config : configmap : cnSqlDbName : jans cnSqlDbPort : 3306 cnSqlDbDialect : mysql cnSqlDbHost : my-release-mysql.jans.svc cnSqlDbUser : root cnSqlDbTimezone : UTC cnSqldbUserPassword : Test1234# So if your desired configuration has FQDN and MySQL, the final override.yaml file will look something like that: global : cnPersistenceType : sql isFqdnRegistered : true fqdn : demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans nginx-ingress : ingress : path : / hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans tls : - secretName : tls-certificate hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans config : configmap : lbAddr : http:// #Add LB address from previous command cnSqlDbName : jans cnSqlDbPort : 3306 cnSqlDbDialect : mysql cnSqlDbHost : my-release-mysql.jans.svc cnSqlDbUser : root cnSqlDbTimezone : UTC cnSqldbUserPassword : Test1234# Install Jans After finishing all the tweaks to the override.yaml file, we can use it to install jans. helm repo add janssen https://docs.jans.io/charts helm repo update helm install janssen janssen/janssen -n jans -f override.yaml","title":"Amazon EKS"},{"location":"admin/install/helm-install/amazon-eks/#install-janssen-on-eks","text":"","title":"Install Janssen on EKS"},{"location":"admin/install/helm-install/amazon-eks/#system-requirements","text":"The resources may be set to the minimum as below: 8 GiB RAM 8 CPU cores 50GB hard-disk Use the listing below for detailed estimation of minimum required resources. Table contains the default resources recommendations per service. Depending on the use of each service the resources needs may be increase or decrease. Service CPU Unit RAM Disk Space Processor Type Required Auth server 2.5 2.5GB N/A 64 Bit Yes LDAP (OpenDJ) 1.5 2GB 10GB 64 Bit Only if couchbase is not installed fido2 0.5 0.5GB N/A 64 Bit No scim 1.0 1.0GB N/A 64 Bit No config - job 0.5 0.5GB N/A 64 Bit Yes on fresh installs persistence - job 0.5 0.5GB N/A 64 Bit Yes on fresh installs nginx 1 1GB N/A 64 Bit Yes if not ALB auth-key-rotation 0.3 0.3GB N/A 64 Bit No [Strongly recommended] config-api 1 1GB N/A 64 Bit No Releases of images are in style 1.0.0-beta.0, 1.0.0-0","title":"System Requirements"},{"location":"admin/install/helm-install/amazon-eks/#initial-setup","text":"Install aws cli Configure your AWS user account using aws configure command. This makes you able to authenticate before creating the cluster. Note that this user account must have permissions to work with Amazon EKS IAM roles and service linked roles, AWS CloudFormation, and a VPC and related resources Install kubectl Install eksctl Create cluster using eksctl such as the following example: eksctl create cluster --name janssen-cluster --nodegroup-name jans-nodes --node-type NODE_TYPE --nodes 2 --managed --region REGION_CODE You can adjust node-type and nodes number as per your desired cluster size Install Helm3 Create jans namespace where our resources will reside kubectl create namespace jans","title":"Initial Setup"},{"location":"admin/install/helm-install/amazon-eks/#jans-installation-using-helm","text":"Install Nginx-Ingress , if you are not using Istio ingress helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx helm repo add stable https://charts.helm.sh/stable helm repo update helm install nginx ingress-nginx/ingress-nginx Create a file named override.yaml and add changes as per your desired configuration: FQDN/domain is not registered: Get the Loadbalancer address: kubectl get svc nginx-ingress-nginx-controller --output jsonpath='{.status.loadBalancer.ingress[0].hostname}' Add the following yaml snippet to your override.yaml file: global : isFqdnRegistered : false config : configmap : lbAddr : http:// #Add LB address from previous command FQDN/domain is registered: Add the following yaml snippet to your override.yaml file`: global : isFqdnRegistered : true fqdn : demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans config : configmap : lbAddr : http:// #Add LB address from previous command nginx : ingress : enabled : true path : / hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans tls : - secretName : tls-certificate hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans LDAP/Opendj for persistence storage Add the following yaml snippet to your override.yaml file: global : cnPersistenceType : ldap storageClass : provisioner : kubernetes.io/aws-ebs opendj : enabled : true So if your desired configuration has no-FQDN and LDAP, the final override.yaml file will look something like that: global : cnPersistenceType : ldap isFqdnRegistered : false storageClass : provisioner : kubernetes.io/aws-ebs opendj : enabled : true config : configmap : lbAddr : http:// #Add LB address from previous command nginx-ingress : ingress : path : / hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans tls : - secretName : tls-certificate hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans Couchbase for pesistence storage Add the following yaml snippet to your override.yaml file: global : cnPersistenceType : couchbase config : configmap : # The prefix of couchbase buckets. This helps with separation in between different environments and allows for the same couchbase cluster to be used by different setups of Janssen. cnCouchbaseBucketPrefix : jans # -- Couchbase certificate authority string. This must be encoded using base64. This can also be found in your couchbase UI Security > Root Certificate. In mTLS setups this is not required. cnCouchbaseCrt : SWFtTm90YVNlcnZpY2VBY2NvdW50Q2hhbmdlTWV0b09uZQo= # -- The number of replicas per index created. Please note that the number of index nodes must be one greater than the number of index replicas. That means if your couchbase cluster only has 2 index nodes you cannot place the number of replicas to be higher than 1. cnCouchbaseIndexNumReplica : 0 # -- Couchbase password for the restricted user config.configmap.cnCouchbaseUser that is often used inside the services. The password must contain one digit, one uppercase letter, one lower case letter and one symbol cnCouchbasePassword : P@ssw0rd # -- The Couchbase super user (admin) username. This user is used during initialization only. cnCouchbaseSuperUser : admin # -- Couchbase password for the superuser config.configmap.cnCouchbaseSuperUser that is used during the initialization process. The password must contain one digit, one uppercase letter, one lower case letter and one symbol cnCouchbaseSuperUserPassword : Test1234# # -- Couchbase URL. This should be in FQDN format for either remote or local Couchbase clusters. The address can be an internal address inside the kubernetes cluster cnCouchbaseUrl : cbjanssen.default.svc.cluster.local # -- Couchbase restricted user cnCouchbaseUser : janssen MySQL for persistence storage In a production environment, a production grade MySQL server should be used such as Amazon RDS For testing purposes, you can deploy it on the EKS cluster using the following commands: helm repo add bitnami https://charts.bitnami.com/bitnami helm install my-release --set auth.rootPassword=Test1234#,auth.database=jans bitnami/mysql -n jans Add the following yaml snippet to your override.yaml file: global : cnPersistenceType : sql config : configmap : cnSqlDbName : jans cnSqlDbPort : 3306 cnSqlDbDialect : mysql cnSqlDbHost : my-release-mysql.jans.svc cnSqlDbUser : root cnSqlDbTimezone : UTC cnSqldbUserPassword : Test1234# So if your desired configuration has FQDN and MySQL, the final override.yaml file will look something like that: global : cnPersistenceType : sql isFqdnRegistered : true fqdn : demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans nginx-ingress : ingress : path : / hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans tls : - secretName : tls-certificate hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans config : configmap : lbAddr : http:// #Add LB address from previous command cnSqlDbName : jans cnSqlDbPort : 3306 cnSqlDbDialect : mysql cnSqlDbHost : my-release-mysql.jans.svc cnSqlDbUser : root cnSqlDbTimezone : UTC cnSqldbUserPassword : Test1234# Install Jans After finishing all the tweaks to the override.yaml file, we can use it to install jans. helm repo add janssen https://docs.jans.io/charts helm repo update helm install janssen janssen/janssen -n jans -f override.yaml","title":"Jans Installation using Helm"},{"location":"admin/install/helm-install/digitalocean-dok/","tags":["administration","installation","helm"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Digitalocean dok"},{"location":"admin/install/helm-install/digitalocean-dok/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/install/helm-install/digitalocean-dok/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/install/helm-install/digitalocean-dok/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/install/helm-install/google-gke/","tags":["administration","installation","helm","GKE","Google Cloud","GCP"],"text":"Install Janssen on GKE # System Requirements # The resources may be set to the minimum as below: 8 GiB RAM 8 CPU cores 50GB hard-disk Use the listing below for detailed estimation of minimum required resources. Table contains the default resources recommendations per service. Depending on the use of each service the resources needs may be increase or decrease. Service CPU Unit RAM Disk Space Processor Type Required Auth server 2.5 2.5GB N/A 64 Bit Yes LDAP (OpenDJ) 1.5 2GB 10GB 64 Bit Only if couchbase is not installed fido2 0.5 0.5GB N/A 64 Bit No scim 1.0 1.0GB N/A 64 Bit No config - job 0.5 0.5GB N/A 64 Bit Yes on fresh installs persistence - job 0.5 0.5GB N/A 64 Bit Yes on fresh installs nginx 1 1GB N/A 64 Bit Yes if not ALB auth-key-rotation 0.3 0.3GB N/A 64 Bit No [Strongly recommended] config-api 1 1GB N/A 64 Bit No Releases of images are in style 1.0.0-beta.0, 1.0.0-0 Initial Setup # Enable GKE API if not enabled yet. If you are using Cloud Shell , you can skip to step 4. Install gcloud . Install kubectl using gcloud components install kubectl command. Install Helm3 . Create cluster using a command such as the following example: gcloud container clusters create janssen-cluster --num-nodes 2 --machine-type e2-highcpu-8 --zone us-west1-a You can adjust num-nodes and machine-type as per your desired cluster size Create jans namespace where our resources will reside kubectl create namespace jans Jans Installation using Helm # Install Nginx-Ingress , if you are not using Istio ingress helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx helm repo add stable https://charts.helm.sh/stable helm repo update helm install nginx ingress-nginx/ingress-nginx Create a file named override.yaml and add changes as per your desired configuration: FQDN/domain is not registered: Get the Loadbalancer IP: kubectl get svc nginx-ingress-nginx-controller --output jsonpath='{.status.loadBalancer.ingress[0].ip}' Add the following yaml snippet to your override.yaml file: global : lbIp : #Add the Loadbalance IP from the previous command isFqdnRegistered : false FQDN/domain is registered: Add the following yaml snippet to your override.yaml file`: global : lbIp : #Add the LoadBalancer IP from the previous command isFqdnRegistered : true fqdn : demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans nginx-ingress : ingress : path : / hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans tls : - secretName : tls-certificate hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans LDAP/Opendj for persistence storage Add the following yaml snippet to your override.yaml file: global : cnPersistenceType : ldap storageClass : provisioner : kubernetes.io/gce-pd opendj : enabled : true So if your desired configuration has no-FQDN and LDAP, the final override.yaml file will look something like that: global : cnPersistenceType : ldap lbIp : #Add the Loadbalancer IP from the previous command isFqdnRegistered : false storageClass : provisioner : kubernetes.io/gce-pd opendj : enabled : true nginx-ingress : ingress : path : / hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans tls : - secretName : tls-certificate hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans Couchbase for pesistence storage Add the following yaml snippet to your override.yaml` file: ```yaml global: cnPersistenceType: couchbase config: configmap: # -- The prefix of couchbase buckets. This helps with separation in between different environments and allows for the same couchbase cluster to be used by different setups of Janssen. cnCouchbaseBucketPrefix: jans # -- Couchbase certificate authority string. This must be encoded using base64. This can also be found in your couchbase UI Security > Root Certificate. In mTLS setups this is not required. cnCouchbaseCrt: SWFtTm90YVNlcnZpY2VBY2NvdW50Q2hhbmdlTWV0b09uZQo= # -- The number of replicas per index created. Please note that the number of index nodes must be one greater than the number of index replicas. That means if your couchbase cluster only has 2 index nodes you cannot place the number of replicas to be higher than 1. cnCouchbaseIndexNumReplica: 0 # -- Couchbase password for the restricted user config.configmap.cnCouchbaseUser that is often used inside the services. The password must contain one digit, one uppercase letter, one lower case letter and one symbol cnCouchbasePassword: P@ssw0rd # -- The Couchbase super user (admin) username. This user is used during initialization only. cnCouchbaseSuperUser: admin # -- Couchbase password for the superuser config.configmap.cnCouchbaseSuperUser that is used during the initialization process. The password must contain one digit, one uppercase letter, one lower case letter and one symbol cnCouchbaseSuperUserPassword: Test1234# # -- Couchbase URL. This should be in FQDN format for either remote or local Couchbase clusters. The address can be an internal address inside the kubernetes cluster cnCouchbaseUrl: cbjanssen.default.svc.cluster.local # -- Couchbase restricted user cnCouchbaseUser: janssen ```` MySQL for persistence storage In a production environment, a production grade MySQL server should be used such as Cloud SQL For testing purposes, you can deploy it on the GKE cluster using the following commands: helm repo add bitnami https://charts.bitnami.com/bitnami helm install my-release --set auth.rootPassword=Test1234#,auth.database=jans bitnami/mysql -n jans Add the following yaml snippet to your override.yaml file: global : cnPersistenceType : sql config : configmap : cnSqlDbName : jans cnSqlDbPort : 3306 cnSqlDbDialect : mysql cnSqlDbHost : my-release-mysql.jans.svc cnSqlDbUser : root cnSqlDbTimezone : UTC cnSqldbUserPassword : Test1234# So if your desired configuration has FQDN and MySQL, the final override.yaml file will look something like that: global : cnPersistenceType : sql lbIp : \"\" #Add the LoadBalancer IP from previous command isFqdnRegistered : true fqdn : demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans nginx-ingress : ingress : path : / hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans tls : - secretName : tls-certificate hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans config : configmap : cnSqlDbName : jans cnSqlDbPort : 3306 cnSqlDbDialect : mysql cnSqlDbHost : my-release-mysql.jans.svc cnSqlDbUser : root cnSqlDbTimezone : UTC cnSqldbUserPassword : Test1234# Install Jans After finishing all the tweaks to the override.yaml file, we can use it to install jans. helm repo add janssen https://docs.jans.io/charts helm repo update helm install janssen janssen/janssen -n jans -f override.yaml","title":"Google GKE"},{"location":"admin/install/helm-install/google-gke/#install-janssen-on-gke","text":"","title":"Install Janssen on GKE"},{"location":"admin/install/helm-install/google-gke/#system-requirements","text":"The resources may be set to the minimum as below: 8 GiB RAM 8 CPU cores 50GB hard-disk Use the listing below for detailed estimation of minimum required resources. Table contains the default resources recommendations per service. Depending on the use of each service the resources needs may be increase or decrease. Service CPU Unit RAM Disk Space Processor Type Required Auth server 2.5 2.5GB N/A 64 Bit Yes LDAP (OpenDJ) 1.5 2GB 10GB 64 Bit Only if couchbase is not installed fido2 0.5 0.5GB N/A 64 Bit No scim 1.0 1.0GB N/A 64 Bit No config - job 0.5 0.5GB N/A 64 Bit Yes on fresh installs persistence - job 0.5 0.5GB N/A 64 Bit Yes on fresh installs nginx 1 1GB N/A 64 Bit Yes if not ALB auth-key-rotation 0.3 0.3GB N/A 64 Bit No [Strongly recommended] config-api 1 1GB N/A 64 Bit No Releases of images are in style 1.0.0-beta.0, 1.0.0-0","title":"System Requirements"},{"location":"admin/install/helm-install/google-gke/#initial-setup","text":"Enable GKE API if not enabled yet. If you are using Cloud Shell , you can skip to step 4. Install gcloud . Install kubectl using gcloud components install kubectl command. Install Helm3 . Create cluster using a command such as the following example: gcloud container clusters create janssen-cluster --num-nodes 2 --machine-type e2-highcpu-8 --zone us-west1-a You can adjust num-nodes and machine-type as per your desired cluster size Create jans namespace where our resources will reside kubectl create namespace jans","title":"Initial Setup"},{"location":"admin/install/helm-install/google-gke/#jans-installation-using-helm","text":"Install Nginx-Ingress , if you are not using Istio ingress helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx helm repo add stable https://charts.helm.sh/stable helm repo update helm install nginx ingress-nginx/ingress-nginx Create a file named override.yaml and add changes as per your desired configuration: FQDN/domain is not registered: Get the Loadbalancer IP: kubectl get svc nginx-ingress-nginx-controller --output jsonpath='{.status.loadBalancer.ingress[0].ip}' Add the following yaml snippet to your override.yaml file: global : lbIp : #Add the Loadbalance IP from the previous command isFqdnRegistered : false FQDN/domain is registered: Add the following yaml snippet to your override.yaml file`: global : lbIp : #Add the LoadBalancer IP from the previous command isFqdnRegistered : true fqdn : demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans nginx-ingress : ingress : path : / hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans tls : - secretName : tls-certificate hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans LDAP/Opendj for persistence storage Add the following yaml snippet to your override.yaml file: global : cnPersistenceType : ldap storageClass : provisioner : kubernetes.io/gce-pd opendj : enabled : true So if your desired configuration has no-FQDN and LDAP, the final override.yaml file will look something like that: global : cnPersistenceType : ldap lbIp : #Add the Loadbalancer IP from the previous command isFqdnRegistered : false storageClass : provisioner : kubernetes.io/gce-pd opendj : enabled : true nginx-ingress : ingress : path : / hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans tls : - secretName : tls-certificate hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans Couchbase for pesistence storage Add the following yaml snippet to your override.yaml` file: ```yaml global: cnPersistenceType: couchbase config: configmap: # -- The prefix of couchbase buckets. This helps with separation in between different environments and allows for the same couchbase cluster to be used by different setups of Janssen. cnCouchbaseBucketPrefix: jans # -- Couchbase certificate authority string. This must be encoded using base64. This can also be found in your couchbase UI Security > Root Certificate. In mTLS setups this is not required. cnCouchbaseCrt: SWFtTm90YVNlcnZpY2VBY2NvdW50Q2hhbmdlTWV0b09uZQo= # -- The number of replicas per index created. Please note that the number of index nodes must be one greater than the number of index replicas. That means if your couchbase cluster only has 2 index nodes you cannot place the number of replicas to be higher than 1. cnCouchbaseIndexNumReplica: 0 # -- Couchbase password for the restricted user config.configmap.cnCouchbaseUser that is often used inside the services. The password must contain one digit, one uppercase letter, one lower case letter and one symbol cnCouchbasePassword: P@ssw0rd # -- The Couchbase super user (admin) username. This user is used during initialization only. cnCouchbaseSuperUser: admin # -- Couchbase password for the superuser config.configmap.cnCouchbaseSuperUser that is used during the initialization process. The password must contain one digit, one uppercase letter, one lower case letter and one symbol cnCouchbaseSuperUserPassword: Test1234# # -- Couchbase URL. This should be in FQDN format for either remote or local Couchbase clusters. The address can be an internal address inside the kubernetes cluster cnCouchbaseUrl: cbjanssen.default.svc.cluster.local # -- Couchbase restricted user cnCouchbaseUser: janssen ```` MySQL for persistence storage In a production environment, a production grade MySQL server should be used such as Cloud SQL For testing purposes, you can deploy it on the GKE cluster using the following commands: helm repo add bitnami https://charts.bitnami.com/bitnami helm install my-release --set auth.rootPassword=Test1234#,auth.database=jans bitnami/mysql -n jans Add the following yaml snippet to your override.yaml file: global : cnPersistenceType : sql config : configmap : cnSqlDbName : jans cnSqlDbPort : 3306 cnSqlDbDialect : mysql cnSqlDbHost : my-release-mysql.jans.svc cnSqlDbUser : root cnSqlDbTimezone : UTC cnSqldbUserPassword : Test1234# So if your desired configuration has FQDN and MySQL, the final override.yaml file will look something like that: global : cnPersistenceType : sql lbIp : \"\" #Add the LoadBalancer IP from previous command isFqdnRegistered : true fqdn : demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans nginx-ingress : ingress : path : / hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans tls : - secretName : tls-certificate hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans config : configmap : cnSqlDbName : jans cnSqlDbPort : 3306 cnSqlDbDialect : mysql cnSqlDbHost : my-release-mysql.jans.svc cnSqlDbUser : root cnSqlDbTimezone : UTC cnSqldbUserPassword : Test1234# Install Jans After finishing all the tweaks to the override.yaml file, we can use it to install jans. helm repo add janssen https://docs.jans.io/charts helm repo update helm install janssen janssen/janssen -n jans -f override.yaml","title":"Jans Installation using Helm"},{"location":"admin/install/helm-install/local/","tags":["administration","installation","helm"],"text":"Install Janssen Server Locally with minikube and MicroK8s # System Requirements # For local deployments like minikube and MicroK8s or cloud installations in demo mode, resources may be set to the minimum as below: 8GB RAM 4 CPU cores 50GB hard-disk Use the listing below for detailed estimation of minimum required resources. Table contains the default resources recommendations per service. Depending on the use of each service the resources needs may be increase or decrease. Service CPU Unit RAM Disk Space Processor Type Required Auth server 2.5 2.5GB N/A 64 Bit Yes LDAP (OpenDJ) 1.5 2GB 10GB 64 Bit Only if couchbase is not installed fido2 0.5 0.5GB N/A 64 Bit No scim 1.0 1.0GB N/A 64 Bit No config - job 0.5 0.5GB N/A 64 Bit Yes on fresh installs persistence - job 0.5 0.5GB N/A 64 Bit Yes on fresh installs nginx 1 1GB N/A 64 Bit Yes if not ALB auth-key-rotation 0.3 0.3GB N/A 64 Bit No [Strongly recommended] config-api 1 1GB N/A 64 Bit No Releases of images are in style 1.0.0-beta.0, 1.0.0-0 Installation Steps # Start a fresh ubuntu 18.04 or 20.04 4 CPU, 16 GB RAM, and 50GB SSD VM with ports 443 and 80 open. Then execute the following sudo su - wget https://raw.githubusercontent.com/JanssenProject/jans/v1.0.17.nightly/automation/startjanssendemo.sh && chmod u+x startjanssendemo.sh && ./startjanssendemo.sh This will install docker, microk8s, helm and Janssen with the default settings that can be found inside values.yaml . The installer will automatically add a record to your hosts record in the VM but if you want access the endpoints outside the VM you must map the ip of the instance running ubuntu to the FQDN you provided and then access the endpoints at your browser such in the example in the table below. Service Example endpoint Auth server https://FQDN/.well-known/openid-configuration fido2 https://FQDN/.well-known/fido2-configuration scim https://FQDN/.well-known/scim-configuration","title":"Local Kubernetes Cluster"},{"location":"admin/install/helm-install/local/#install-janssen-server-locally-with-minikube-and-microk8s","text":"","title":"Install Janssen Server Locally with minikube and MicroK8s"},{"location":"admin/install/helm-install/local/#system-requirements","text":"For local deployments like minikube and MicroK8s or cloud installations in demo mode, resources may be set to the minimum as below: 8GB RAM 4 CPU cores 50GB hard-disk Use the listing below for detailed estimation of minimum required resources. Table contains the default resources recommendations per service. Depending on the use of each service the resources needs may be increase or decrease. Service CPU Unit RAM Disk Space Processor Type Required Auth server 2.5 2.5GB N/A 64 Bit Yes LDAP (OpenDJ) 1.5 2GB 10GB 64 Bit Only if couchbase is not installed fido2 0.5 0.5GB N/A 64 Bit No scim 1.0 1.0GB N/A 64 Bit No config - job 0.5 0.5GB N/A 64 Bit Yes on fresh installs persistence - job 0.5 0.5GB N/A 64 Bit Yes on fresh installs nginx 1 1GB N/A 64 Bit Yes if not ALB auth-key-rotation 0.3 0.3GB N/A 64 Bit No [Strongly recommended] config-api 1 1GB N/A 64 Bit No Releases of images are in style 1.0.0-beta.0, 1.0.0-0","title":"System Requirements"},{"location":"admin/install/helm-install/local/#installation-steps","text":"Start a fresh ubuntu 18.04 or 20.04 4 CPU, 16 GB RAM, and 50GB SSD VM with ports 443 and 80 open. Then execute the following sudo su - wget https://raw.githubusercontent.com/JanssenProject/jans/v1.0.17.nightly/automation/startjanssendemo.sh && chmod u+x startjanssendemo.sh && ./startjanssendemo.sh This will install docker, microk8s, helm and Janssen with the default settings that can be found inside values.yaml . The installer will automatically add a record to your hosts record in the VM but if you want access the endpoints outside the VM you must map the ip of the instance running ubuntu to the FQDN you provided and then access the endpoints at your browser such in the example in the table below. Service Example endpoint Auth server https://FQDN/.well-known/openid-configuration fido2 https://FQDN/.well-known/fido2-configuration scim https://FQDN/.well-known/scim-configuration","title":"Installation Steps"},{"location":"admin/install/helm-install/microsoft-azure/","tags":["administration","installation","helm","AKS","Microsoft","Azure"],"text":"Install Janssen on AKS # System Requirements # The resources may be set to the minimum as below: 8 GiB RAM 8 CPU cores 50GB hard-disk Use the listing below for detailed estimation of minimum required resources. Table contains the default resources recommendations per service. Depending on the use of each service the resources needs may be increase or decrease. Service CPU Unit RAM Disk Space Processor Type Required Auth server 2.5 2.5GB N/A 64 Bit Yes LDAP (OpenDJ) 1.5 2GB 10GB 64 Bit Only if couchbase is not installed fido2 0.5 0.5GB N/A 64 Bit No scim 1.0 1.0GB N/A 64 Bit No config - job 0.5 0.5GB N/A 64 Bit Yes on fresh installs persistence - job 0.5 0.5GB N/A 64 Bit Yes on fresh installs nginx 1 1GB N/A 64 Bit Yes if not ALB auth-key-rotation 0.3 0.3GB N/A 64 Bit No [Strongly recommended] config-api 1 1GB N/A 64 Bit No Releases of images are in style 1.0.0-beta.0, 1.0.0-0 Initial Setup # Install Azure CLI Create a Resource Group az group create --name janssen-resource-group --location eastus Create an AKS cluster such as the following example: az aks create -g janssen-resource-group -n janssen-cluster --enable-managed-identity --node-vm-size NODE_TYPE --node-count 2 --enable-addons monitoring --enable-msi-auth-for-monitoring --generate-ssh-keys You can adjust node-count and node-vm-size as per your desired cluster size Connect to the cluster az aks install-cli az aks get-credentials --resource-group janssen-resource-group --name janssen-cluster Install Helm3 Create jans namespace where our resources will reside kubectl create namespace jans Jans Installation using Helm # Install Nginx-Ingress , if you are not using Istio ingress helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx helm repo add stable https://charts.helm.sh/stable helm repo update helm install nginx ingress-nginx/ingress-nginx Create a file named override.yaml and add changes as per your desired configuration: FQDN/domain is not registered: Get the Loadbalancer IP: kubectl get svc nginx-ingress-nginx-controller --output jsonpath='{.status.loadBalancer.ingress[0].ip}' Add the following yaml snippet to your override.yaml file: global : lbIp : #Add the Loadbalance IP from the previous command isFqdnRegistered : false FQDN/domain is registered: Add the following yaml snippet to your override.yaml file`: global : lbIp : #Add the LoadBalancer IP from the previous command isFqdnRegistered : true fqdn : demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans nginx-ingress : ingress : path : / hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans tls : - secretName : tls-certificate hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans LDAP/Opendj for persistence storage Add the following yaml snippet to your override.yaml file: global : cnPersistenceType : ldap storageClass : provisioner : disk.csi.azure.com opendj : enabled : true So if your desired configuration has no-FQDN and LDAP, the final override.yaml file will look something like that: global : cnPersistenceType : ldap lbIp : #Add the Loadbalancer IP from the previous command isFqdnRegistered : false storageClass : provisioner : disk.csi.azure.com opendj : enabled : true nginx-ingress : ingress : path : / hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans tls : - secretName : tls-certificate hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans Couchbase for pesistence storage Add the following yaml snippet to your override.yaml file: global : cnPersistenceType : couchbase config : configmap : # The prefix of couchbase buckets. This helps with separation in between different environments and allows for the same couchbase cluster to be used by different setups of Janssen. cnCouchbaseBucketPrefix : jans # -- Couchbase certificate authority string. This must be encoded using base64. This can also be found in your couchbase UI Security > Root Certificate. In mTLS setups this is not required. cnCouchbaseCrt : SWFtTm90YVNlcnZpY2VBY2NvdW50Q2hhbmdlTWV0b09uZQo= # -- The number of replicas per index created. Please note that the number of index nodes must be one greater than the number of index replicas. That means if your couchbase cluster only has 2 index nodes you cannot place the number of replicas to be higher than 1. cnCouchbaseIndexNumReplica : 0 # -- Couchbase password for the restricted user config.configmap.cnCouchbaseUser that is often used inside the services. The password must contain one digit, one uppercase letter, one lower case letter and one symbol cnCouchbasePassword : P@ssw0rd # -- The Couchbase super user (admin) username. This user is used during initialization only. cnCouchbaseSuperUser : admin # -- Couchbase password for the superuser config.configmap.cnCouchbaseSuperUser that is used during the initialization process. The password must contain one digit, one uppercase letter, one lower case letter and one symbol cnCouchbaseSuperUserPassword : Test1234# # -- Couchbase URL. This should be in FQDN format for either remote or local Couchbase clusters. The address can be an internal address inside the kubernetes cluster cnCouchbaseUrl : cbjanssen.default.svc.cluster.local # -- Couchbase restricted user cnCouchbaseUser : janssen MySQL for persistence storage In a production environment, a production grade MySQL server should be used such as Azure Database for MySQL For testing purposes, you can deploy it on the AKS cluster using the following commands: helm repo add bitnami https://charts.bitnami.com/bitnami helm install my-release --set auth.rootPassword=Test1234#,auth.database=jans bitnami/mysql -n jans Add the following yaml snippet to your override.yaml file: global : cnPersistenceType : sql config : configmap : cnSqlDbName : jans cnSqlDbPort : 3306 cnSqlDbDialect : mysql cnSqlDbHost : my-release-mysql.jans.svc cnSqlDbUser : root cnSqlDbTimezone : UTC cnSqldbUserPassword : Test1234# So if your desired configuration has FQDN and MySQL, the final override.yaml file will look something like that: global : cnPersistenceType : sql lbIp : \"\" #Add the LoadBalancer IP from previous command isFqdnRegistered : true fqdn : demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans nginx-ingress : ingress : path : / hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans tls : - secretName : tls-certificate hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans config : configmap : cnSqlDbName : jans cnSqlDbPort : 3306 cnSqlDbDialect : mysql cnSqlDbHost : my-release-mysql.jans.svc cnSqlDbUser : root cnSqlDbTimezone : UTC cnSqldbUserPassword : Test1234# Install Jans After finishing all the tweaks to the override.yaml file, we can use it to install jans. helm repo add janssen https://docs.jans.io/charts helm repo update helm install janssen janssen/janssen -n jans -f override.yaml","title":"Microsoft Azure AKS"},{"location":"admin/install/helm-install/microsoft-azure/#install-janssen-on-aks","text":"","title":"Install Janssen on AKS"},{"location":"admin/install/helm-install/microsoft-azure/#system-requirements","text":"The resources may be set to the minimum as below: 8 GiB RAM 8 CPU cores 50GB hard-disk Use the listing below for detailed estimation of minimum required resources. Table contains the default resources recommendations per service. Depending on the use of each service the resources needs may be increase or decrease. Service CPU Unit RAM Disk Space Processor Type Required Auth server 2.5 2.5GB N/A 64 Bit Yes LDAP (OpenDJ) 1.5 2GB 10GB 64 Bit Only if couchbase is not installed fido2 0.5 0.5GB N/A 64 Bit No scim 1.0 1.0GB N/A 64 Bit No config - job 0.5 0.5GB N/A 64 Bit Yes on fresh installs persistence - job 0.5 0.5GB N/A 64 Bit Yes on fresh installs nginx 1 1GB N/A 64 Bit Yes if not ALB auth-key-rotation 0.3 0.3GB N/A 64 Bit No [Strongly recommended] config-api 1 1GB N/A 64 Bit No Releases of images are in style 1.0.0-beta.0, 1.0.0-0","title":"System Requirements"},{"location":"admin/install/helm-install/microsoft-azure/#initial-setup","text":"Install Azure CLI Create a Resource Group az group create --name janssen-resource-group --location eastus Create an AKS cluster such as the following example: az aks create -g janssen-resource-group -n janssen-cluster --enable-managed-identity --node-vm-size NODE_TYPE --node-count 2 --enable-addons monitoring --enable-msi-auth-for-monitoring --generate-ssh-keys You can adjust node-count and node-vm-size as per your desired cluster size Connect to the cluster az aks install-cli az aks get-credentials --resource-group janssen-resource-group --name janssen-cluster Install Helm3 Create jans namespace where our resources will reside kubectl create namespace jans","title":"Initial Setup"},{"location":"admin/install/helm-install/microsoft-azure/#jans-installation-using-helm","text":"Install Nginx-Ingress , if you are not using Istio ingress helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx helm repo add stable https://charts.helm.sh/stable helm repo update helm install nginx ingress-nginx/ingress-nginx Create a file named override.yaml and add changes as per your desired configuration: FQDN/domain is not registered: Get the Loadbalancer IP: kubectl get svc nginx-ingress-nginx-controller --output jsonpath='{.status.loadBalancer.ingress[0].ip}' Add the following yaml snippet to your override.yaml file: global : lbIp : #Add the Loadbalance IP from the previous command isFqdnRegistered : false FQDN/domain is registered: Add the following yaml snippet to your override.yaml file`: global : lbIp : #Add the LoadBalancer IP from the previous command isFqdnRegistered : true fqdn : demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans nginx-ingress : ingress : path : / hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans tls : - secretName : tls-certificate hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans LDAP/Opendj for persistence storage Add the following yaml snippet to your override.yaml file: global : cnPersistenceType : ldap storageClass : provisioner : disk.csi.azure.com opendj : enabled : true So if your desired configuration has no-FQDN and LDAP, the final override.yaml file will look something like that: global : cnPersistenceType : ldap lbIp : #Add the Loadbalancer IP from the previous command isFqdnRegistered : false storageClass : provisioner : disk.csi.azure.com opendj : enabled : true nginx-ingress : ingress : path : / hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans tls : - secretName : tls-certificate hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans Couchbase for pesistence storage Add the following yaml snippet to your override.yaml file: global : cnPersistenceType : couchbase config : configmap : # The prefix of couchbase buckets. This helps with separation in between different environments and allows for the same couchbase cluster to be used by different setups of Janssen. cnCouchbaseBucketPrefix : jans # -- Couchbase certificate authority string. This must be encoded using base64. This can also be found in your couchbase UI Security > Root Certificate. In mTLS setups this is not required. cnCouchbaseCrt : SWFtTm90YVNlcnZpY2VBY2NvdW50Q2hhbmdlTWV0b09uZQo= # -- The number of replicas per index created. Please note that the number of index nodes must be one greater than the number of index replicas. That means if your couchbase cluster only has 2 index nodes you cannot place the number of replicas to be higher than 1. cnCouchbaseIndexNumReplica : 0 # -- Couchbase password for the restricted user config.configmap.cnCouchbaseUser that is often used inside the services. The password must contain one digit, one uppercase letter, one lower case letter and one symbol cnCouchbasePassword : P@ssw0rd # -- The Couchbase super user (admin) username. This user is used during initialization only. cnCouchbaseSuperUser : admin # -- Couchbase password for the superuser config.configmap.cnCouchbaseSuperUser that is used during the initialization process. The password must contain one digit, one uppercase letter, one lower case letter and one symbol cnCouchbaseSuperUserPassword : Test1234# # -- Couchbase URL. This should be in FQDN format for either remote or local Couchbase clusters. The address can be an internal address inside the kubernetes cluster cnCouchbaseUrl : cbjanssen.default.svc.cluster.local # -- Couchbase restricted user cnCouchbaseUser : janssen MySQL for persistence storage In a production environment, a production grade MySQL server should be used such as Azure Database for MySQL For testing purposes, you can deploy it on the AKS cluster using the following commands: helm repo add bitnami https://charts.bitnami.com/bitnami helm install my-release --set auth.rootPassword=Test1234#,auth.database=jans bitnami/mysql -n jans Add the following yaml snippet to your override.yaml file: global : cnPersistenceType : sql config : configmap : cnSqlDbName : jans cnSqlDbPort : 3306 cnSqlDbDialect : mysql cnSqlDbHost : my-release-mysql.jans.svc cnSqlDbUser : root cnSqlDbTimezone : UTC cnSqldbUserPassword : Test1234# So if your desired configuration has FQDN and MySQL, the final override.yaml file will look something like that: global : cnPersistenceType : sql lbIp : \"\" #Add the LoadBalancer IP from previous command isFqdnRegistered : true fqdn : demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans nginx-ingress : ingress : path : / hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans tls : - secretName : tls-certificate hosts : - demoexample.jans.org #CHANGE-THIS to the FQDN used for Jans config : configmap : cnSqlDbName : jans cnSqlDbPort : 3306 cnSqlDbDialect : mysql cnSqlDbHost : my-release-mysql.jans.svc cnSqlDbUser : root cnSqlDbTimezone : UTC cnSqldbUserPassword : Test1234# Install Jans After finishing all the tweaks to the override.yaml file, we can use it to install jans. helm repo add janssen https://docs.jans.io/charts helm repo update helm install janssen janssen/janssen -n jans -f override.yaml","title":"Jans Installation using Helm"},{"location":"admin/install/helm-install/rancher/","tags":["administration","installation","helm","rancher"],"text":"Install Janssen Server Using Rancher Marketplace # For this quick start we will use a single node Kubernetes install in docker with a self-signed certificate . Note For a more generic setup, use Rancher UI to deploy the setup. For more options please follow this link . Installation Steps # Provision a Linux 4 CPU, 16 GB RAM, and 50GB SSD VM with ports 443 and 80 open. Save the VM IP address. For development environments, the VM can be set up using VMWare Workstation Player or VirtualBox with Ubuntu 20.0.4 operating system running on VM. Install Docker . Execute docker run -d --restart = unless-stopped -p 80 :80 -p 443 :443 --privileged rancher/rancher:latest The final line of the returned text is the container-id , which you'll need for the next step. Execute the following command to get the boostrap password for login. docker logs <container-id> 2 > & 1 | grep \"Bootstrap Password:\" Head to https://<VM-IP-ADDRESS-FROM-FIRST-STEP> and log in with the username admin and the password from the previous step. If you are logging into Rancher for the first time, you'll need to enter just the password, and on the next step, Rancher will ask you to reset your current password. Next you'll see the Rancher home page with a list of existing clusters. By default, the name of the newly created cluster would be local . Click on the cluster name to go to the dashboard. From the top-left menu expand Apps and click Charts . Search for Gluu and begin your installation. During Step 1 of installation, be sure to select the Customize Helm options before install options. In Step 2, customize the settings for the Janssen installation. Specifically Optional Services from where you can enable Janssen modules. In Step 3, unselect the Wait option and start the installation.","title":"Using Rancher Marketplace"},{"location":"admin/install/helm-install/rancher/#install-janssen-server-using-rancher-marketplace","text":"For this quick start we will use a single node Kubernetes install in docker with a self-signed certificate . Note For a more generic setup, use Rancher UI to deploy the setup. For more options please follow this link .","title":"Install Janssen Server Using Rancher Marketplace"},{"location":"admin/install/helm-install/rancher/#installation-steps","text":"Provision a Linux 4 CPU, 16 GB RAM, and 50GB SSD VM with ports 443 and 80 open. Save the VM IP address. For development environments, the VM can be set up using VMWare Workstation Player or VirtualBox with Ubuntu 20.0.4 operating system running on VM. Install Docker . Execute docker run -d --restart = unless-stopped -p 80 :80 -p 443 :443 --privileged rancher/rancher:latest The final line of the returned text is the container-id , which you'll need for the next step. Execute the following command to get the boostrap password for login. docker logs <container-id> 2 > & 1 | grep \"Bootstrap Password:\" Head to https://<VM-IP-ADDRESS-FROM-FIRST-STEP> and log in with the username admin and the password from the previous step. If you are logging into Rancher for the first time, you'll need to enter just the password, and on the next step, Rancher will ask you to reset your current password. Next you'll see the Rancher home page with a list of existing clusters. By default, the name of the newly created cluster would be local . Click on the cluster name to go to the dashboard. From the top-left menu expand Apps and click Charts . Search for Gluu and begin your installation. During Step 1 of installation, be sure to select the Customize Helm options before install options. In Step 2, customize the settings for the Janssen installation. Specifically Optional Services from where you can enable Janssen modules. In Step 3, unselect the Wait option and start the installation.","title":"Installation Steps"},{"location":"admin/install/helm-install/red-hat-open-shift/","tags":["administration","installation","helm"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Red hat open shift"},{"location":"admin/install/helm-install/red-hat-open-shift/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/install/helm-install/red-hat-open-shift/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/install/helm-install/red-hat-open-shift/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/install/vm-install/","tags":["administration","installation","vm"],"text":"Overview # Installing the Janssen software on a VM is a three step process: Check: VM requirements Install: package or docker container Run: setup.py to configure After this process, you should have the Janssen Project software running, and you'll be ready to start registering OAUTH clients, customizing your login pages, and doing all the other stuff that Janssen enables. You can check Github for the latest Releases . The instructions for the various packages also give you a shortcut using wget and curl to get the latest bits for your distro. Use the left navigation to get started and pick the Janssen Project VM flavor of your choice! Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/install/vm-install/#overview","text":"Installing the Janssen software on a VM is a three step process: Check: VM requirements Install: package or docker container Run: setup.py to configure After this process, you should have the Janssen Project software running, and you'll be ready to start registering OAUTH clients, customizing your login pages, and doing all the other stuff that Janssen enables. You can check Github for the latest Releases . The instructions for the various packages also give you a shortcut using wget and curl to get the latest bits for your distro. Use the left navigation to get started and pick the Janssen Project VM flavor of your choice! Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/install/vm-install/disa-stig/","tags":["administration","installation","vm","disa","stig"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Disa stig"},{"location":"admin/install/vm-install/disa-stig/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/install/vm-install/disa-stig/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/install/vm-install/disa-stig/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/install/vm-install/dynamic-download/","tags":["administration","installation","vm","dynamic"],"text":"Install Janssen Server using Dynamic Download # The dynamic download installs the latest development version of the Janssen Server. Note This method of installation is suitable only for testing, development, or feature exploration purposes. Not for production deployments. System Requirements # System should meet minimum VM system requirements Prerequisites # curl should be installed Install # Download the installer curl https://raw.githubusercontent.com/JanssenProject/jans/v1.0.17.nightly/jans-linux-setup/jans_setup/install.py > install.py Execute Installer The installer can be invoked using various options to tailor the installation process. Invoke the commands below to know about all the available options. install.py --help setup.py --help One particularly useful option for development environments is the one below which installs the Janssen Server with test data loaded. python3 install.py --args=\"-t\" To install without test data loaded, run the command below: python3 install.py Uninstall # Use the command below to uninstall the Janssen Server python3 install.py -uninstall","title":"Dynamic Download"},{"location":"admin/install/vm-install/dynamic-download/#install-janssen-server-using-dynamic-download","text":"The dynamic download installs the latest development version of the Janssen Server. Note This method of installation is suitable only for testing, development, or feature exploration purposes. Not for production deployments.","title":"Install Janssen Server using Dynamic Download"},{"location":"admin/install/vm-install/dynamic-download/#system-requirements","text":"System should meet minimum VM system requirements","title":"System Requirements"},{"location":"admin/install/vm-install/dynamic-download/#prerequisites","text":"curl should be installed","title":"Prerequisites"},{"location":"admin/install/vm-install/dynamic-download/#install","text":"Download the installer curl https://raw.githubusercontent.com/JanssenProject/jans/v1.0.17.nightly/jans-linux-setup/jans_setup/install.py > install.py Execute Installer The installer can be invoked using various options to tailor the installation process. Invoke the commands below to know about all the available options. install.py --help setup.py --help One particularly useful option for development environments is the one below which installs the Janssen Server with test data loaded. python3 install.py --args=\"-t\" To install without test data loaded, run the command below: python3 install.py","title":"Install"},{"location":"admin/install/vm-install/dynamic-download/#uninstall","text":"Use the command below to uninstall the Janssen Server python3 install.py -uninstall","title":"Uninstall"},{"location":"admin/install/vm-install/rhel/","tags":["administration","installation","vm","RHEL"],"text":"Red Hat EL Janssen Installation # Before you install, check the VM system requirements . Supported versions # Red Hat Enterprise Linux 8 (RHEL 8) Install the Package # Install EPEL and mod-auth-openidc as dependencies sudo yum -y install https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm sudo yum -y module enable mod_auth_openidc Download the GPG key zip file , unzip and import GPG key wget https://github.com/JanssenProject/jans/files/11814522/automation-jans-public-gpg.zip unzip automation-jans-public-gpg.zip sudo rpm -import automation-jans-public-gpg.asc Download the release package from the Github Janssen Project Releases wget https://github.com/JanssenProject/jans/releases/download/v1.0.17.nightly/jans-1.0.17.nightly-el8.x86_64.rpm -P ~/ Verify integrity of the downloaded package using published sha256sum . Download sha256sum file for the package wget https://github.com/JanssenProject/jans/releases/download/v1.0.17.nightly/jans-1.0.17.nightly-el8.x86_64.rpm.sha256sum -P ~/ Check the hash if it is matching. sha256sum -c jans-1.0.17.nightly-el8.x86_64.rpm.sha256sum Output similar to below should confirm the integrity of the downloaded package. jans-1.0.17.nightly-el8.x86_64.rpm: OK Install the package sudo yum install ~/jans-1.0.17.nightly-el8.x86_64.rpm Run the setup script # Run the setup script in interactive mode: sudo python3 /opt/jans/jans-setup/setup.py The installer should confirm successful installation with a message similar to the one shown below: See more detailed instructions on the setup script if you're confused how to answer any of the questions, for details about command line arguments, or you would prefer to use a properties file instead of interactive mode. Verify the Installation # After the successful completion of setup process, verify the system health . Log in to Text User Interface (TUI) # Begin configuration by accessing the TUI with the following command: sudo /opt/jans/jans-cli/jans_cli_tui.py Full TUI documentation can be found here Uninstall # Removing Janssen is a two step process: Delete files installed by Janssen Remove and purge the jans package Use the command below to uninstall the Janssen server sudo python3 /opt/jans/jans-setup/install.py -uninstall Console output like below will confirm the successful uninstallation of the Janssen Server This process is irreversible. You will lose all data related to Janssen Server. Are you sure to uninstall Janssen Server? [yes/N] yes Uninstalling Jannsen Server... Removing /etc/default/jans-config-api Stopping jans-config-api Removing /etc/default/jans-scim Stopping jans-scim Removing /etc/default/jans-fido2 Stopping jans-fido2 Removing /etc/default/jans-auth Stopping jans-auth Removing /etc/default/jans-client-api Stopping jans-client-api Stopping OpenDj Server Executing rm -r -f /etc/certs Executing rm -r -f /etc/jans Executing rm -r -f /opt/jans Executing rm -r -f /opt/amazon-corretto* Executing rm -r -f /opt/jre Executing rm -r -f /opt/node* Executing rm -r -f /opt/jetty* Executing rm -r -f /opt/jython* Executing rm -r -f /opt/opendj Executing rm -r -f /opt/dist Removing /etc/apache2/sites-enabled/https_jans.conf Removing /etc/apache2/sites-available/https_jans.conf Remove the linux package Use the command below to remove and purge jans package yum remove jans.x86_64 Successful removal will remove the Janssen Server package along with the removal of all the unused dependencies.","title":"RHEL"},{"location":"admin/install/vm-install/rhel/#red-hat-el-janssen-installation","text":"Before you install, check the VM system requirements .","title":"Red Hat EL Janssen Installation"},{"location":"admin/install/vm-install/rhel/#supported-versions","text":"Red Hat Enterprise Linux 8 (RHEL 8)","title":"Supported versions"},{"location":"admin/install/vm-install/rhel/#install-the-package","text":"Install EPEL and mod-auth-openidc as dependencies sudo yum -y install https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm sudo yum -y module enable mod_auth_openidc Download the GPG key zip file , unzip and import GPG key wget https://github.com/JanssenProject/jans/files/11814522/automation-jans-public-gpg.zip unzip automation-jans-public-gpg.zip sudo rpm -import automation-jans-public-gpg.asc Download the release package from the Github Janssen Project Releases wget https://github.com/JanssenProject/jans/releases/download/v1.0.17.nightly/jans-1.0.17.nightly-el8.x86_64.rpm -P ~/ Verify integrity of the downloaded package using published sha256sum . Download sha256sum file for the package wget https://github.com/JanssenProject/jans/releases/download/v1.0.17.nightly/jans-1.0.17.nightly-el8.x86_64.rpm.sha256sum -P ~/ Check the hash if it is matching. sha256sum -c jans-1.0.17.nightly-el8.x86_64.rpm.sha256sum Output similar to below should confirm the integrity of the downloaded package. jans-1.0.17.nightly-el8.x86_64.rpm: OK Install the package sudo yum install ~/jans-1.0.17.nightly-el8.x86_64.rpm","title":"Install the Package"},{"location":"admin/install/vm-install/rhel/#run-the-setup-script","text":"Run the setup script in interactive mode: sudo python3 /opt/jans/jans-setup/setup.py The installer should confirm successful installation with a message similar to the one shown below: See more detailed instructions on the setup script if you're confused how to answer any of the questions, for details about command line arguments, or you would prefer to use a properties file instead of interactive mode.","title":"Run the setup script"},{"location":"admin/install/vm-install/rhel/#verify-the-installation","text":"After the successful completion of setup process, verify the system health .","title":"Verify the Installation"},{"location":"admin/install/vm-install/rhel/#log-in-to-text-user-interface-tui","text":"Begin configuration by accessing the TUI with the following command: sudo /opt/jans/jans-cli/jans_cli_tui.py Full TUI documentation can be found here","title":"Log in to Text User Interface (TUI)"},{"location":"admin/install/vm-install/rhel/#uninstall","text":"Removing Janssen is a two step process: Delete files installed by Janssen Remove and purge the jans package Use the command below to uninstall the Janssen server sudo python3 /opt/jans/jans-setup/install.py -uninstall Console output like below will confirm the successful uninstallation of the Janssen Server This process is irreversible. You will lose all data related to Janssen Server. Are you sure to uninstall Janssen Server? [yes/N] yes Uninstalling Jannsen Server... Removing /etc/default/jans-config-api Stopping jans-config-api Removing /etc/default/jans-scim Stopping jans-scim Removing /etc/default/jans-fido2 Stopping jans-fido2 Removing /etc/default/jans-auth Stopping jans-auth Removing /etc/default/jans-client-api Stopping jans-client-api Stopping OpenDj Server Executing rm -r -f /etc/certs Executing rm -r -f /etc/jans Executing rm -r -f /opt/jans Executing rm -r -f /opt/amazon-corretto* Executing rm -r -f /opt/jre Executing rm -r -f /opt/node* Executing rm -r -f /opt/jetty* Executing rm -r -f /opt/jython* Executing rm -r -f /opt/opendj Executing rm -r -f /opt/dist Removing /etc/apache2/sites-enabled/https_jans.conf Removing /etc/apache2/sites-available/https_jans.conf Remove the linux package Use the command below to remove and purge jans package yum remove jans.x86_64 Successful removal will remove the Janssen Server package along with the removal of all the unused dependencies.","title":"Uninstall"},{"location":"admin/install/vm-install/suse/","tags":["administration","installation","vm","SUSE","SLES","Leap"],"text":"SUSE Janssen Installation # Before you install, check the VM system requirements . Supported versions # SUSE Linux Enterprise Server (SLES) 15 openSUSE Leap 15.4 Install the Package # If the server firewall is running, make sure you allow https , which is needed for OpenID and FIDO. firewall-cmd --permanent --zone = public --add-service = https firewall-cmd --reload for SLES, we need to enable PackageHub as per OSversion and architecture sudo SUSEConnect -p PackageHub/15.4/x86_64 Download the GPG key zip file , unzip and import GPG key wget https://github.com/JanssenProject/jans/files/11814522/automation-jans-public-gpg.zip unzip automation-jans-public-gpg.zip sudo rpm -import automation-jans-public-gpg.asc Download the release package from the GitHub Janssen Project Releases wget https://github.com/JanssenProject/jans/releases/download/v1.0.17.nightly/jans-1.0.17.nightly-suse15.x86_64.rpm Verify integrity of the downloaded package using published sha256sum . Download sha256sum file for the package wget https://github.com/JanssenProject/jans/releases/download/v1.0.17.nightly/jans-1.0.17.nightly-suse15.x86_64.rpm.sha256sum Check the hash if it is matching. You may need to change your working directory to where both the rpm and sha256sum file are located. sha256sum -c jans-1.0.17.nightly-suse15.x86_64.rpm.sha256sum Output similar to below should confirm the integrity of the downloaded package. <package-name>: OK Install the package sudo zypper install ~/jans-1.0.17.nightly-suse15.x86_64.rpm Run the setup script # Run the setup script in interactive mode: sudo python3 /opt/jans/jans-setup/setup.py See more detailed instructions on the setup script if you're confused how to answer any of the questions, for details about command line arguments, or you would prefer to use a properties file instead of interactive mode. Verify the Installation # After the successful completion of setup process, verify the system health . Log in to Text User Interface (TUI) # Begin configuration by accessing the TUI with the following command: sudo /opt/jans/jans-cli/jans_cli_tui.py Full TUI documentation can be found here Uninstall # Uninstall process involves two steps Uninstall Janssen Server Remove and purge the jans package If you have not run the Jans setup script, you can skip step 1 and just remove the package. First, run command below to uninstall the Janssen server sudo python3 /opt/jans/jans-setup/install.py -uninstall You'll see the following confirmation: This process is irreversible. You will lose all data related to Janssen Server. Are you sure to uninstall Janssen Server? [yes/N] yes Uninstalling Jannsen Server... Removing /etc/default/jans-config-api Stopping jans-config-api Removing /etc/default/jans-scim Stopping jans-scim Removing /etc/default/jans-fido2 Stopping jans-fido2 Removing /etc/default/jans-auth Stopping jans-auth Removing /etc/default/jans-client-api Stopping jans-client-api Stopping OpenDj Server Executing rm -r -f /etc/certs Executing rm -r -f /etc/jans Executing rm -r -f /opt/jans Executing rm -r -f /opt/amazon-corretto* Executing rm -r -f /opt/jre Executing rm -r -f /opt/node* Executing rm -r -f /opt/jetty* Executing rm -r -f /opt/jython* Executing rm -r -f /opt/opendj Executing rm -r -f /opt/dist Removing /etc/apache2/sites-enabled/https_jans.conf Removing /etc/apache2/sites-available/https_jans.conf Second uninstall the package: rpm -qa | grep jans And then use zypper remove <package>","title":"Suse"},{"location":"admin/install/vm-install/suse/#suse-janssen-installation","text":"Before you install, check the VM system requirements .","title":"SUSE Janssen Installation"},{"location":"admin/install/vm-install/suse/#supported-versions","text":"SUSE Linux Enterprise Server (SLES) 15 openSUSE Leap 15.4","title":"Supported versions"},{"location":"admin/install/vm-install/suse/#install-the-package","text":"If the server firewall is running, make sure you allow https , which is needed for OpenID and FIDO. firewall-cmd --permanent --zone = public --add-service = https firewall-cmd --reload for SLES, we need to enable PackageHub as per OSversion and architecture sudo SUSEConnect -p PackageHub/15.4/x86_64 Download the GPG key zip file , unzip and import GPG key wget https://github.com/JanssenProject/jans/files/11814522/automation-jans-public-gpg.zip unzip automation-jans-public-gpg.zip sudo rpm -import automation-jans-public-gpg.asc Download the release package from the GitHub Janssen Project Releases wget https://github.com/JanssenProject/jans/releases/download/v1.0.17.nightly/jans-1.0.17.nightly-suse15.x86_64.rpm Verify integrity of the downloaded package using published sha256sum . Download sha256sum file for the package wget https://github.com/JanssenProject/jans/releases/download/v1.0.17.nightly/jans-1.0.17.nightly-suse15.x86_64.rpm.sha256sum Check the hash if it is matching. You may need to change your working directory to where both the rpm and sha256sum file are located. sha256sum -c jans-1.0.17.nightly-suse15.x86_64.rpm.sha256sum Output similar to below should confirm the integrity of the downloaded package. <package-name>: OK Install the package sudo zypper install ~/jans-1.0.17.nightly-suse15.x86_64.rpm","title":"Install the Package"},{"location":"admin/install/vm-install/suse/#run-the-setup-script","text":"Run the setup script in interactive mode: sudo python3 /opt/jans/jans-setup/setup.py See more detailed instructions on the setup script if you're confused how to answer any of the questions, for details about command line arguments, or you would prefer to use a properties file instead of interactive mode.","title":"Run the setup script"},{"location":"admin/install/vm-install/suse/#verify-the-installation","text":"After the successful completion of setup process, verify the system health .","title":"Verify the Installation"},{"location":"admin/install/vm-install/suse/#log-in-to-text-user-interface-tui","text":"Begin configuration by accessing the TUI with the following command: sudo /opt/jans/jans-cli/jans_cli_tui.py Full TUI documentation can be found here","title":"Log in to Text User Interface (TUI)"},{"location":"admin/install/vm-install/suse/#uninstall","text":"Uninstall process involves two steps Uninstall Janssen Server Remove and purge the jans package If you have not run the Jans setup script, you can skip step 1 and just remove the package. First, run command below to uninstall the Janssen server sudo python3 /opt/jans/jans-setup/install.py -uninstall You'll see the following confirmation: This process is irreversible. You will lose all data related to Janssen Server. Are you sure to uninstall Janssen Server? [yes/N] yes Uninstalling Jannsen Server... Removing /etc/default/jans-config-api Stopping jans-config-api Removing /etc/default/jans-scim Stopping jans-scim Removing /etc/default/jans-fido2 Stopping jans-fido2 Removing /etc/default/jans-auth Stopping jans-auth Removing /etc/default/jans-client-api Stopping jans-client-api Stopping OpenDj Server Executing rm -r -f /etc/certs Executing rm -r -f /etc/jans Executing rm -r -f /opt/jans Executing rm -r -f /opt/amazon-corretto* Executing rm -r -f /opt/jre Executing rm -r -f /opt/node* Executing rm -r -f /opt/jetty* Executing rm -r -f /opt/jython* Executing rm -r -f /opt/opendj Executing rm -r -f /opt/dist Removing /etc/apache2/sites-enabled/https_jans.conf Removing /etc/apache2/sites-available/https_jans.conf Second uninstall the package: rpm -qa | grep jans And then use zypper remove <package>","title":"Uninstall"},{"location":"admin/install/vm-install/ubuntu/","tags":["administration","installation","vm","ubuntu"],"text":"Ubuntu Janssen Installation # Supported Versions # Ubuntu 22.04 Ubuntu 20.04 Before you install, check the VM system requirements . Download the GPG key zip file , unzip and import GPG key wget https://github.com/JanssenProject/jans/files/11814522/automation-jans-public-gpg.zip unzip automation-jans-public-gpg.zip sudo gpg --import automation-jans-public-gpg.asc ; Install the Package # Ubuntu 22.04 # Download the release package from the Github Janssen Project Releases wget https://github.com/JanssenProject/jans/releases/download/v1.0.17.nightly/jans_1.0.17.nightly.ubuntu22.04_amd64.deb -P /tmp Verify integrity of the downloaded package by verifying published sha256sum . Download sha256sum file for the package wget https://github.com/JanssenProject/jans/releases/download/v1.0.17.nightly/jans_1.0.17.nightly.ubuntu22.04_amd64.deb.sha256sum -P /tmp Check the hash if it is matching. cd /tmp sha256sum -c jans_1.0.17.nightly.ubuntu22.04_amd64.deb.sha256sum Output similar to below should confirm the integrity of the downloaded package. jans_1.0.17.nightly.ubuntu22.04_amd64.deb.sha256sum: OK Install the package sudo apt install ./jans_1.0.17.nightly.ubuntu22.04_amd64.deb Ubuntu 20.04 # Download the release package from the Github Janssen Project Releases wget https://github.com/JanssenProject/jans/releases/download/v1.0.17.nightly/jans_1.0.17.nightly.ubuntu20.04_amd64.deb -P /tmp Verify integrity of the downloaded package by verifying published sha256sum . Download sha256sum file for the package wget https://github.com/JanssenProject/jans/releases/download/v1.0.17.nightly/jans_1.0.17.nightly.ubuntu20.04_amd64.deb.sha256sum -P /tmp Check the hash if it is matching. cd /tmp sha256sum -c jans_1.0.17.nightly.ubuntu20.04_amd64.deb.sha256sum Output similar to below should confirm the integrity of the downloaded package. jans_1.0.17.nightly.ubuntu20.04_amd64.deb.sha256sum: OK Install the package sudo apt install ./jans_1.0.17.nightly.ubuntu20.04_amd64.deb Run the setup script # Run the setup script in interactive mode: sudo python3 /opt/jans/jans-setup/setup.py See more detailed instructions on the setup script if you're confused how to answer any of the questions, for details about command line arguments, or you would prefer to use a properties file instead of interactive mode. Verify the Installation # After the successful completion of setup process, verify the system health . Log in to Text User Interface (TUI) # Begin configuration by accessing the TUI with the following command: sudo /opt/jans/jans-cli/jans_cli_tui.py Full TUI documentation can be found here Uninstall # Removing Janssen is a two step process: Delete files installed by Janssen Remove and purge the jans package Use the command below to uninstall the Janssen server sudo python3 /opt/jans/jans-setup/install.py -uninstall You'll see the following confirmation: This process is irreversible. You will lose all data related to Janssen Server. Are you sure to uninstall Janssen Server? [yes/N] yes Uninstalling Jannsen Server... Removing /etc/default/jans-config-api Stopping jans-config-api Removing /etc/default/jans-scim Stopping jans-scim Removing /etc/default/jans-fido2 Stopping jans-fido2 Removing /etc/default/jans-auth Stopping jans-auth Removing /etc/default/jans-client-api Stopping jans-client-api Stopping OpenDj Server Executing rm -r -f /etc/certs Executing rm -r -f /etc/jans Executing rm -r -f /opt/jans Executing rm -r -f /opt/amazon-corretto* Executing rm -r -f /opt/jre Executing rm -r -f /opt/node* Executing rm -r -f /opt/jetty* Executing rm -r -f /opt/jython* Executing rm -r -f /opt/opendj Executing rm -r -f /opt/dist Removing /etc/apache2/sites-enabled/https_jans.conf Removing /etc/apache2/sites-available/https_jans.conf The command below removes and purges the jans package apt-get --purge remove jans Which should result in the following: Reading package lists... Done Building dependency tree Reading state information... Done The following packages were automatically installed and are no longer required: apache2 apache2-bin apache2-data apache2-utils libapr1 libaprutil1 libaprutil1-dbd-sqlite3 libaprutil1-ldap liblua5.2-0 python3-distutils python3-ldap3 python3-lib2to3 python3-prompt-toolkit python3-pyasn1 python3-pygments python3-pymysql python3-ruamel.yaml python3-wcwidth Use 'sudo apt autoremove' to remove them. The following packages will be REMOVED: jans* 0 upgraded, 0 newly installed, 1 to remove and 124 not upgraded. After this operation, 1,257 MB disk space will be freed. Do you want to continue? [Y/n] y (Reading database ... 166839 files and directories currently installed.) Removing jans (1.0.17.nightly~ubuntu20.04) ... Checking to make sure service is down...","title":"Ubuntu"},{"location":"admin/install/vm-install/ubuntu/#ubuntu-janssen-installation","text":"","title":"Ubuntu Janssen Installation"},{"location":"admin/install/vm-install/ubuntu/#supported-versions","text":"Ubuntu 22.04 Ubuntu 20.04 Before you install, check the VM system requirements . Download the GPG key zip file , unzip and import GPG key wget https://github.com/JanssenProject/jans/files/11814522/automation-jans-public-gpg.zip unzip automation-jans-public-gpg.zip sudo gpg --import automation-jans-public-gpg.asc ;","title":"Supported Versions"},{"location":"admin/install/vm-install/ubuntu/#install-the-package","text":"","title":"Install the Package"},{"location":"admin/install/vm-install/ubuntu/#ubuntu-2204","text":"Download the release package from the Github Janssen Project Releases wget https://github.com/JanssenProject/jans/releases/download/v1.0.17.nightly/jans_1.0.17.nightly.ubuntu22.04_amd64.deb -P /tmp Verify integrity of the downloaded package by verifying published sha256sum . Download sha256sum file for the package wget https://github.com/JanssenProject/jans/releases/download/v1.0.17.nightly/jans_1.0.17.nightly.ubuntu22.04_amd64.deb.sha256sum -P /tmp Check the hash if it is matching. cd /tmp sha256sum -c jans_1.0.17.nightly.ubuntu22.04_amd64.deb.sha256sum Output similar to below should confirm the integrity of the downloaded package. jans_1.0.17.nightly.ubuntu22.04_amd64.deb.sha256sum: OK Install the package sudo apt install ./jans_1.0.17.nightly.ubuntu22.04_amd64.deb","title":"Ubuntu 22.04"},{"location":"admin/install/vm-install/ubuntu/#ubuntu-2004","text":"Download the release package from the Github Janssen Project Releases wget https://github.com/JanssenProject/jans/releases/download/v1.0.17.nightly/jans_1.0.17.nightly.ubuntu20.04_amd64.deb -P /tmp Verify integrity of the downloaded package by verifying published sha256sum . Download sha256sum file for the package wget https://github.com/JanssenProject/jans/releases/download/v1.0.17.nightly/jans_1.0.17.nightly.ubuntu20.04_amd64.deb.sha256sum -P /tmp Check the hash if it is matching. cd /tmp sha256sum -c jans_1.0.17.nightly.ubuntu20.04_amd64.deb.sha256sum Output similar to below should confirm the integrity of the downloaded package. jans_1.0.17.nightly.ubuntu20.04_amd64.deb.sha256sum: OK Install the package sudo apt install ./jans_1.0.17.nightly.ubuntu20.04_amd64.deb","title":"Ubuntu 20.04"},{"location":"admin/install/vm-install/ubuntu/#run-the-setup-script","text":"Run the setup script in interactive mode: sudo python3 /opt/jans/jans-setup/setup.py See more detailed instructions on the setup script if you're confused how to answer any of the questions, for details about command line arguments, or you would prefer to use a properties file instead of interactive mode.","title":"Run the setup script"},{"location":"admin/install/vm-install/ubuntu/#verify-the-installation","text":"After the successful completion of setup process, verify the system health .","title":"Verify the Installation"},{"location":"admin/install/vm-install/ubuntu/#log-in-to-text-user-interface-tui","text":"Begin configuration by accessing the TUI with the following command: sudo /opt/jans/jans-cli/jans_cli_tui.py Full TUI documentation can be found here","title":"Log in to Text User Interface (TUI)"},{"location":"admin/install/vm-install/ubuntu/#uninstall","text":"Removing Janssen is a two step process: Delete files installed by Janssen Remove and purge the jans package Use the command below to uninstall the Janssen server sudo python3 /opt/jans/jans-setup/install.py -uninstall You'll see the following confirmation: This process is irreversible. You will lose all data related to Janssen Server. Are you sure to uninstall Janssen Server? [yes/N] yes Uninstalling Jannsen Server... Removing /etc/default/jans-config-api Stopping jans-config-api Removing /etc/default/jans-scim Stopping jans-scim Removing /etc/default/jans-fido2 Stopping jans-fido2 Removing /etc/default/jans-auth Stopping jans-auth Removing /etc/default/jans-client-api Stopping jans-client-api Stopping OpenDj Server Executing rm -r -f /etc/certs Executing rm -r -f /etc/jans Executing rm -r -f /opt/jans Executing rm -r -f /opt/amazon-corretto* Executing rm -r -f /opt/jre Executing rm -r -f /opt/node* Executing rm -r -f /opt/jetty* Executing rm -r -f /opt/jython* Executing rm -r -f /opt/opendj Executing rm -r -f /opt/dist Removing /etc/apache2/sites-enabled/https_jans.conf Removing /etc/apache2/sites-available/https_jans.conf The command below removes and purges the jans package apt-get --purge remove jans Which should result in the following: Reading package lists... Done Building dependency tree Reading state information... Done The following packages were automatically installed and are no longer required: apache2 apache2-bin apache2-data apache2-utils libapr1 libaprutil1 libaprutil1-dbd-sqlite3 libaprutil1-ldap liblua5.2-0 python3-distutils python3-ldap3 python3-lib2to3 python3-prompt-toolkit python3-pyasn1 python3-pygments python3-pymysql python3-ruamel.yaml python3-wcwidth Use 'sudo apt autoremove' to remove them. The following packages will be REMOVED: jans* 0 upgraded, 0 newly installed, 1 to remove and 124 not upgraded. After this operation, 1,257 MB disk space will be freed. Do you want to continue? [Y/n] y (Reading database ... 166839 files and directories currently installed.) Removing jans (1.0.17.nightly~ubuntu20.04) ... Checking to make sure service is down...","title":"Uninstall"},{"location":"admin/install/vm-install/vm-requirements/","tags":["requirements","installation","vm","hardware"],"text":"VM System Requirements # The Janssen Project currently provides packages for these Linux distros: Ubuntu (versions: 20.04) SUSE (SLES or LEAP) (version: 15) RedHat Enterprise Linux (version: 8) Hardware Requirements # A single-VM deployment is where all services are running on one server. Although, the requirements can vary based on the size of the data and the required concurrency, the following guidelines can help you plan: Development and Test Environments # 4 GB RAM 2 CPU 20 GB Disk Production Environment Recommendation: # 8 GB RAM 4 CPU 4 GB swap space 50 GB Disk Port Configuration # Janssen Server requires the following ports to be open for incoming connections. Port Protocol Notes 443 TCP TLS/HTTP You may want to use a redirect on port 80 to 443, although it is not required. Of course you will also need some way to login to your server, but that is out of scope of these docs. Check your server firewall documentation to configure your firewall to allow https . Hostname / IP Address Configuration # It is recommended that you use a static ip address for your Janssen Server. Your server should also return the hostname for the hostname command, it's recommended that you add the hostname to the /etc/hosts file. File Descriptor Configuration (FD) # Like most database and Internet servers, you must have at least 65k file descriptors. If you don't, your server will hang. First, check the current file descriptor limit using command below. If the existing FD limit exceeds 65535, then you're good. # cat /proc/sys/fs/file-max If FD limit is less than 65535 (e.g. 1024), then follow the steps below to increase the value. 1) Set soft and hard limits by adding the following lines in the /etc/security/limits.conf file * soft nofile 65535 * hard nofile 262144 2) Add the following lines to /etc/pam.d/login if not already present session required pam_limits.so 3) Increase the FD limit in /proc/sys/fs/file-max echo 65535 > /proc/sys/fs/file-max** 4) Use the ulimit command to set the FD limit to the hard limit specified in /etc/security/limits.conf . If setting to hard limit doesn't work, then try to set it to the soft limit. ulimit -n 262144 5) Restart the system","title":"VM Requirements"},{"location":"admin/install/vm-install/vm-requirements/#vm-system-requirements","text":"The Janssen Project currently provides packages for these Linux distros: Ubuntu (versions: 20.04) SUSE (SLES or LEAP) (version: 15) RedHat Enterprise Linux (version: 8)","title":"VM System Requirements"},{"location":"admin/install/vm-install/vm-requirements/#hardware-requirements","text":"A single-VM deployment is where all services are running on one server. Although, the requirements can vary based on the size of the data and the required concurrency, the following guidelines can help you plan:","title":"Hardware Requirements"},{"location":"admin/install/vm-install/vm-requirements/#development-and-test-environments","text":"4 GB RAM 2 CPU 20 GB Disk","title":"Development and Test Environments"},{"location":"admin/install/vm-install/vm-requirements/#production-environment-recommendation","text":"8 GB RAM 4 CPU 4 GB swap space 50 GB Disk","title":"Production Environment Recommendation:"},{"location":"admin/install/vm-install/vm-requirements/#port-configuration","text":"Janssen Server requires the following ports to be open for incoming connections. Port Protocol Notes 443 TCP TLS/HTTP You may want to use a redirect on port 80 to 443, although it is not required. Of course you will also need some way to login to your server, but that is out of scope of these docs. Check your server firewall documentation to configure your firewall to allow https .","title":"Port Configuration"},{"location":"admin/install/vm-install/vm-requirements/#hostname-ip-address-configuration","text":"It is recommended that you use a static ip address for your Janssen Server. Your server should also return the hostname for the hostname command, it's recommended that you add the hostname to the /etc/hosts file.","title":"Hostname / IP Address Configuration"},{"location":"admin/install/vm-install/vm-requirements/#file-descriptor-configuration-fd","text":"Like most database and Internet servers, you must have at least 65k file descriptors. If you don't, your server will hang. First, check the current file descriptor limit using command below. If the existing FD limit exceeds 65535, then you're good. # cat /proc/sys/fs/file-max If FD limit is less than 65535 (e.g. 1024), then follow the steps below to increase the value. 1) Set soft and hard limits by adding the following lines in the /etc/security/limits.conf file * soft nofile 65535 * hard nofile 262144 2) Add the following lines to /etc/pam.d/login if not already present session required pam_limits.so 3) Increase the FD limit in /proc/sys/fs/file-max echo 65535 > /proc/sys/fs/file-max** 4) Use the ulimit command to set the FD limit to the hard limit specified in /etc/security/limits.conf . If setting to hard limit doesn't work, then try to set it to the soft limit. ulimit -n 262144 5) Restart the system","title":"File Descriptor Configuration (FD)"},{"location":"admin/kubernetes-ops/","tags":["administration","kubernetes","operations"],"text":"Overview # This Operation guide helps you learn about the common operations for Janssen on Kubernetes. Prerequisite # Review the Janssen components and architecture Complete the installation of janssen on your desired Kubernetes provider. Common Operations # Upgrade Scaling Backup and Restore Certificate Management Customization Start Order Logs External Secrets and Configmaps Health Check FAQ","title":"Overview"},{"location":"admin/kubernetes-ops/#overview","text":"This Operation guide helps you learn about the common operations for Janssen on Kubernetes.","title":"Overview"},{"location":"admin/kubernetes-ops/#prerequisite","text":"Review the Janssen components and architecture Complete the installation of janssen on your desired Kubernetes provider.","title":"Prerequisite"},{"location":"admin/kubernetes-ops/#common-operations","text":"Upgrade Scaling Backup and Restore Certificate Management Customization Start Order Logs External Secrets and Configmaps Health Check FAQ","title":"Common Operations"},{"location":"admin/kubernetes-ops/backup-restore/","tags":["administration","kubernetes","operations","backup","restore"],"text":"The Jans Server should be backed up frequently, we recommend once daily . There are multiple methods for backing up jans server. One way is manually using imperative commands. The other is automatically using open source tools. Manual Backup and Restore # Manual Backup # Configmap backup: kubectl get configmap cn -n <namespace> -o yaml > configmap-backup.yaml Secret backup: kubectl get secret cn -n <namespace> -o yaml > secret-backup.yaml Get the user supplied values: Save the values.yaml that was used in the initial jans installation using helm. In the event that the user supplied or override values yaml was lost, you can obtain it by executing the following command: helm get values <release name> -n <namespace> Keep note of installed chart version: helm list -n <namespace> Keep note of the chart version. For example: 1.0.17.nightly Manual Restore # Create namespace kubectl create namespace <namespace> Configmap restore: kubectl create -f configmap-backup.yaml Secret restore: kubectl create -f secret-backup.yaml Insall jans using the override or user supplied values with the same chart version: helm install <release-name> janssen/janssen -f values.yaml --version = <1.0.17.nightly> -n <namespace> Automatic Backup and Restore # There are several tools that helps in automatic backups and restore, like Kasten K10 . You can follow online guides to deploy it and using it to configure automatic backups.","title":"Backup and Restore"},{"location":"admin/kubernetes-ops/backup-restore/#manual-backup-and-restore","text":"","title":"Manual Backup and Restore"},{"location":"admin/kubernetes-ops/backup-restore/#manual-backup","text":"Configmap backup: kubectl get configmap cn -n <namespace> -o yaml > configmap-backup.yaml Secret backup: kubectl get secret cn -n <namespace> -o yaml > secret-backup.yaml Get the user supplied values: Save the values.yaml that was used in the initial jans installation using helm. In the event that the user supplied or override values yaml was lost, you can obtain it by executing the following command: helm get values <release name> -n <namespace> Keep note of installed chart version: helm list -n <namespace> Keep note of the chart version. For example: 1.0.17.nightly","title":"Manual Backup"},{"location":"admin/kubernetes-ops/backup-restore/#manual-restore","text":"Create namespace kubectl create namespace <namespace> Configmap restore: kubectl create -f configmap-backup.yaml Secret restore: kubectl create -f secret-backup.yaml Insall jans using the override or user supplied values with the same chart version: helm install <release-name> janssen/janssen -f values.yaml --version = <1.0.17.nightly> -n <namespace>","title":"Manual Restore"},{"location":"admin/kubernetes-ops/backup-restore/#automatic-backup-and-restore","text":"There are several tools that helps in automatic backups and restore, like Kasten K10 . You can follow online guides to deploy it and using it to configure automatic backups.","title":"Automatic Backup and Restore"},{"location":"admin/kubernetes-ops/cert-management/","tags":["administration","kubernetes","operations","certificate management","certification and key rotation"],"text":"Overview # Rotating Certificates and Keys in Kubernetes setup Note janssen-config-cm in all examples refer to jans installation configuration parameters where janssen is the helm-release-name . Web (Ingress) # Associated certificates and keys /etc/certs/web_https.crt /etc/certs/web_https.key Rotate # Create a file named web-key-rotation.yaml with the following contents : apiVersion : batch/v1 kind : Job metadata : name : web-key-rotation spec : template : metadata : annotations : sidecar.istio.io/inject : \"false\" spec : restartPolicy : Never containers : - name : web-key-rotation image : ghcr.io/janssenproject/jans/certmanager:1.0.17.nightly-1 envFrom : - configMapRef : name : janssen-config-cm # This may be differnet in Helm args : [ \"patch\" , \"web\" , \"--opts\" , \"valid-to:365\" ] Apply job kubectl apply -f web-key-rotation.yaml -n <jans-namespace> Load from existing source # Note This will load web_https.crt and web_https.key from /etc/certs . Create a secret with web_https.crt and web_https.key . Note that this may already exist in your deployment. kubectl create secret generic web-cert-key --from-file = web_https.crt --from-file = web_https.key -n <jans-namespace> ` Create a file named load-web-key-rotation.yaml with the following contents : apiVersion : batch/v1 kind : Job metadata : name : load-web-key-rotation spec : template : metadata : annotations : sidecar.istio.io/inject : \"false\" spec : restartPolicy : Never volumes : - name : web-cert secret : secretName : web-cert-key items : - key : web_https.crt path : web_https.crt - name : web-key secret : secretName : web-cert-key items : - key : web_https.key path : web_https.key containers : - name : load-web-key-rotation image : ghcr.io/janssenproject/jans/certmanager:1.0.17.nightly-1 envFrom : - configMapRef : name : janssen-config-cm #This may be differnet in Helm volumeMounts : - name : web-cert mountPath : /etc/certs/web_https.crt subPath : web_https.crt - name : web-key mountPath : /etc/certs/web_https.key subPath : web_https.key args : [ \"patch\" , \"web\" , \"--opts\" , \"source:from-files\" ] Apply job kubectl apply -f load-web-key-rotation.yaml -n <jans-namespace> Auth-server # Warning key rotation CronJob is usually installed with jans. Please make sure before deploying using kubectl get cronjobs -n <jans-namespace> Associated certificates and keys /etc/certs/auth-keys.json /etc/certs/auth-keys.jks Create a file named auth-key-rotation.yaml with the following contents : kind : CronJob apiVersion : batch/v1 metadata : name : auth-key-rotation spec : schedule : \"0 */48 * * *\" concurrencyPolicy : Forbid jobTemplate : spec : template : metadata : annotations : sidecar.istio.io/inject : \"false\" spec : containers : - name : auth-key-rotation image : ghcr.io/janssenproject/jans/certmanager:1.0.17.nightly-1 resources : requests : memory : \"300Mi\" cpu : \"300m\" limits : memory : \"300Mi\" cpu : \"300m\" envFrom : - configMapRef : name : janssen-config-cm args : [ \"patch\" , \"auth\" , \"--opts\" , \"interval:48\" , \"--opts\" , \"key-strategy:OLDER\" , \"--opts\" , \"privkey-push-delay:300\" , \"--opts\" , \"privkey-push-strategy:NEWER\" ] restartPolicy : Never Apply cron job kubectl apply -f auth-key-rotation.yaml -n <jans-namespace> LDAP # Note Subject Alt Name must match opendj service. Associated certificates and keys /etc/certs/opendj.crt /etc/certs/opendj.key /etc/certs/opendj.pem /etc/certs/opendj.pkcs12 Create a file named ldap-key-rotation.yaml with the following contents : apiVersion : batch/v1 kind : Job metadata : name : ldap-key-rotation spec : template : metadata : annotations : sidecar.istio.io/inject : \"false\" spec : restartPolicy : Never containers : - name : ldap-key-rotation image : ghcr.io/janssenproject/jans/certmanager:1.0.17.nightly-1 envFrom : - configMapRef : name : janssen-config-cm args : [ \"patch\" , \"ldap\" , \"--opts\" , \"subj-alt-name:opendj\" , \"--opts\" , \"valid-to:365\" ] Apply job kubectl apply -f ldap-key-rotation.yaml -n <jans-namespace>","title":"Certificate Management"},{"location":"admin/kubernetes-ops/cert-management/#overview","text":"Rotating Certificates and Keys in Kubernetes setup Note janssen-config-cm in all examples refer to jans installation configuration parameters where janssen is the helm-release-name .","title":"Overview"},{"location":"admin/kubernetes-ops/cert-management/#web-ingress","text":"Associated certificates and keys /etc/certs/web_https.crt /etc/certs/web_https.key","title":"Web (Ingress)"},{"location":"admin/kubernetes-ops/cert-management/#rotate","text":"Create a file named web-key-rotation.yaml with the following contents : apiVersion : batch/v1 kind : Job metadata : name : web-key-rotation spec : template : metadata : annotations : sidecar.istio.io/inject : \"false\" spec : restartPolicy : Never containers : - name : web-key-rotation image : ghcr.io/janssenproject/jans/certmanager:1.0.17.nightly-1 envFrom : - configMapRef : name : janssen-config-cm # This may be differnet in Helm args : [ \"patch\" , \"web\" , \"--opts\" , \"valid-to:365\" ] Apply job kubectl apply -f web-key-rotation.yaml -n <jans-namespace>","title":"Rotate"},{"location":"admin/kubernetes-ops/cert-management/#load-from-existing-source","text":"Note This will load web_https.crt and web_https.key from /etc/certs . Create a secret with web_https.crt and web_https.key . Note that this may already exist in your deployment. kubectl create secret generic web-cert-key --from-file = web_https.crt --from-file = web_https.key -n <jans-namespace> ` Create a file named load-web-key-rotation.yaml with the following contents : apiVersion : batch/v1 kind : Job metadata : name : load-web-key-rotation spec : template : metadata : annotations : sidecar.istio.io/inject : \"false\" spec : restartPolicy : Never volumes : - name : web-cert secret : secretName : web-cert-key items : - key : web_https.crt path : web_https.crt - name : web-key secret : secretName : web-cert-key items : - key : web_https.key path : web_https.key containers : - name : load-web-key-rotation image : ghcr.io/janssenproject/jans/certmanager:1.0.17.nightly-1 envFrom : - configMapRef : name : janssen-config-cm #This may be differnet in Helm volumeMounts : - name : web-cert mountPath : /etc/certs/web_https.crt subPath : web_https.crt - name : web-key mountPath : /etc/certs/web_https.key subPath : web_https.key args : [ \"patch\" , \"web\" , \"--opts\" , \"source:from-files\" ] Apply job kubectl apply -f load-web-key-rotation.yaml -n <jans-namespace>","title":"Load from existing source"},{"location":"admin/kubernetes-ops/cert-management/#auth-server","text":"Warning key rotation CronJob is usually installed with jans. Please make sure before deploying using kubectl get cronjobs -n <jans-namespace> Associated certificates and keys /etc/certs/auth-keys.json /etc/certs/auth-keys.jks Create a file named auth-key-rotation.yaml with the following contents : kind : CronJob apiVersion : batch/v1 metadata : name : auth-key-rotation spec : schedule : \"0 */48 * * *\" concurrencyPolicy : Forbid jobTemplate : spec : template : metadata : annotations : sidecar.istio.io/inject : \"false\" spec : containers : - name : auth-key-rotation image : ghcr.io/janssenproject/jans/certmanager:1.0.17.nightly-1 resources : requests : memory : \"300Mi\" cpu : \"300m\" limits : memory : \"300Mi\" cpu : \"300m\" envFrom : - configMapRef : name : janssen-config-cm args : [ \"patch\" , \"auth\" , \"--opts\" , \"interval:48\" , \"--opts\" , \"key-strategy:OLDER\" , \"--opts\" , \"privkey-push-delay:300\" , \"--opts\" , \"privkey-push-strategy:NEWER\" ] restartPolicy : Never Apply cron job kubectl apply -f auth-key-rotation.yaml -n <jans-namespace>","title":"Auth-server"},{"location":"admin/kubernetes-ops/cert-management/#ldap","text":"Note Subject Alt Name must match opendj service. Associated certificates and keys /etc/certs/opendj.crt /etc/certs/opendj.key /etc/certs/opendj.pem /etc/certs/opendj.pkcs12 Create a file named ldap-key-rotation.yaml with the following contents : apiVersion : batch/v1 kind : Job metadata : name : ldap-key-rotation spec : template : metadata : annotations : sidecar.istio.io/inject : \"false\" spec : restartPolicy : Never containers : - name : ldap-key-rotation image : ghcr.io/janssenproject/jans/certmanager:1.0.17.nightly-1 envFrom : - configMapRef : name : janssen-config-cm args : [ \"patch\" , \"ldap\" , \"--opts\" , \"subj-alt-name:opendj\" , \"--opts\" , \"valid-to:365\" ] Apply job kubectl apply -f ldap-key-rotation.yaml -n <jans-namespace>","title":"LDAP"},{"location":"admin/kubernetes-ops/customization/","tags":["administration","developer","operations","kubernetes","customization"],"text":"Most organizations will want to edit and customize the look and feel of public-facing jans server pages to match their own corporate branding. The following documentation provides the file locations of public facing pages, as well as instructions for adding custom HTML, CSS, and Javascript files to your jans server. Overview # All web pages are xhtml files. Default pages bundled in the jans-auth.war are: # Login page: login.xhtml Authorization page: authorize.xhtml Logout page: logout.xhtml Error page: error.xhtml To override default pages listed above: # Put a modified login.xhtml or authorize.xhtml or error.xhtml or logout.xhtml under /opt/jans/jetty/jans-auth/custom/pages/ Directory structure for customization # /opt/jans/jetty/jans-auth/ |-- custom | |-- i18n (resource bundles) | |-- libs (library files used by custom script) | |-- pages (web pages) | |-- static (images and css files) Adding a new web page for Person Authentication scripts # If enterOTP.xhtml is your webpage for step 2 of authentication, place it under /opt/jans/jetty/jans-auth/custom/pages/auth/enterOTP.xhtml Reference it in the custom script as follows: def getPageForStep(self, configurationAttributes, step): # Used to specify the page you want to return for a given step if (step == 1): return \"/auth/login.xhtml\" if (step == 2) return \"/auth/enterOTP.xhtml\" Reference login pages # Here you will find several login pages for different authentication methods. Customized resource bundles # Resource bundles that are present in the jans-auth.war are present in this folder To override the defaults, custom .properties files should be placed in the following file under this path : /opt/jans/jetty/jans-auth/custom/i18n/jans-auth.properties Resource bundle names to support other languages should be placed under the same folder /opt/jans/jetty/jans-auth/custom/i18n/ . Some examples of file names are : jans-auth_en.properties jans-auth_bg.properties jans-auth_de.properties jans-auth_es.properties jans-auth_fr.properties jans-auth_it.properties jans-auth_ru.properties jans-auth_tr.properties To add translation for a language that is not yet supported, create new properties file in resource folder and name it jans-auth_[language_code].properties, then add language code as supported-locale to the faces-config.xml present in the same folder. Custom CSS files # Place the file in /opt/jans/jetty/jans-auth/custom/static/stylesheet/theme.css Reference it in .xhtml file using the URL https://your.jans.server/jans-auth/ext/resources/stylesheet/theme.css or /jans-auth/ext/resources/stylesheet/theme.css Custom image files # All images should be placed under /opt/jans/jetty/jans-auth/custom/static/img Reference it in .xhtml file using the URL https://your.jans.server/jans-auth/ext/resources/img/fileName.png or /jans-auth/ext/resources/img/fileName.jpg Page layout, header, footer (xhtml Template) customization # Templates refers to the common interface layout and style. For example, a banner, logo in common header and copyright information in footer. All templates should be placed under /opt/jans/jetty/jans-auth/custom/pages/WEB-INF/incl/layout/ Place a modified template.xhtml in the above location which will override the default template file from the war Customized pages examples # Custom Login page # This guide will demonstrate how to customize the html and css of the default login page. Here's a screenshot of the default login page. As an example, we will add text to the top of the form and change the color of the button using the following steps: Locate the directory that contains exploded auth-server WAR kubectl exec -n <namespace> <auth-server-pod-name> -- ls /tmp Output example: jetty-0_0_0_0-8080-jans-auth_war-_jans-auth-any-15449359106458251753 Get the login.xhtml from the auth-server pod: kubectl -n jans cp <auth-server-pod-name>:tmp/jetty-0_0_0_0-8080-jans-auth_war-_jans-auth-any-15449359106458251753/webapp/login.xhtml login.xhtml Modify the file locally: < h:form id = \"loginForm\" style = \"padding:30px;\" > <!-- customization --> < div class = \"row\" >< p id = \"creds-title\" > Enter Credentials </ p ></ div > <!-- end of customization --> < div class = \"row\" > < div class = \"col-sm-3 col-md-3\" > < h:outputText value = \"#{msgs['login.username']}\" /> </ div > Get the login-template.xhtml from the auth-server pod: kubectl -n jans cp <auth-server-pod-name>:tmp/jetty-0_0_0_0-8080-jans-auth_war-_jans-auth-any-15449359106458251753/webapp/WEB-INF/incl/layout/login-template.xhtml login-template.xhtml Modify the file locally: < h:head > < link type = \"text/css\" rel = \"stylesheet\" href = \"https://fonts.googleapis.com/css?family=Open+Sans:300,400,600\" /> <!-- customization --> < link rel = \"stylesheet\" href = \"/jans-auth/ext/resources/stylesheet/custom.css\" /> <!-- end of customization --> </ h:head > Copy the following text and save it as custom.css : # creds-title { font-style : italic ; font-weight : bolder ; } Create configmaps to store the content of login.xhtml , login-template.xhtml and custom.css . kubectl -n <namespace> create cm auth-server-custom-html --from-file = login.xhtml kubectl -n <namespace> create cm auth-server-custom-layout-html --from-file = login-template.xhtml kubectl -n <namespace> create cm auth-server-custom-css --from-file = custom.css Mount the configmaps in your values.yaml under auth-server.volumes and auth-server.volumeMounts : auth-server : volumeMounts : - name : auth-server-pages-volume mountPath : /opt/jans/jetty/jans-auth/custom/pages # login.xthml will be mounted under this directory - name : auth-server-layout-volume mountPath : /opt/jans/jetty/jans-auth/custom/pages/WEB-INF/incl/layout # login-template.xthml will be mounted under this directory - name : auth-server-static-volume mountPath : /tmp/static #custom.css will be mounted in the temporary location lifecycle : postStart : exec : command : [ \"sh\" , \"-c\" , \"mkdir /opt/jans/jetty/jans-auth/custom/static/stylesheet/ && cp /tmp/static/custom.css /opt/jans/jetty/jans-auth/custom/static/stylesheet/\" ] # custom.css will be copied from the temporary to the desired location volumes : - name : auth-server-pages-volume configMap : name : auth-server-custom-html - name : auth-server-layout-volume configMap : name : auth-server-custom-layout-html - name : auth-server-static-volume configMap : name : auth-server-custom-css Run helm install or helm upgrade if Jans has been already installed. helm upgrade <helm-release-name> janssen/janssen -n <namespace> -f values.yaml --version = 1 .0.x Here's a screenshot of the customized login page. Custom Device-code page # This guide will demonstrate how to customize the html and css of the device-code page. Here's a screenshot of the device-code page. As an example, we will change the color of the button to blue using the following steps: Locate the directory that contains exploded auth-server WAR kubectl exec -n <namespace> <auth-server-pod-name> -- ls /tmp Output example: jetty-0_0_0_0-8080-jans-auth_war-_jans-auth-any-15449359106458251753 Get the device_authorization.xhtml from the auth-server pod: kubectl -n jans cp <auth-server-pod-name>:tmp/jetty-0_0_0_0-8080-jans-auth_war-_jans-auth-any-15449359106458251753/webapp/device_authorization.xhtml device_authorization.xhtml Modify the file locally: < div class = \"col-sm-8 col-md-6\" > <!-- customization --> < h:commandButton id = \"continueButton\" style = \"background-color: red; color:white;\" styleClass = \"btn col-sm-12\" value = \"#{msgs['device.authorization.confirm.button']}\" iconAwesome = \"fa-sign-in\" > <!-- end of customization --> < f:ajax execute = \"@form\" render = \"@form messages\" listener = \"#{deviceAuthorizationAction.processUserCodeVerification}\" /> </ h:commandButton > </ div > Create a configmap to store the content of device_authorization.xhtml . kubectl -n <namespace> create cm device-code-custom-html --from-file = device_authorization.xhtml Mount the configmap in your values.yaml under auth-server.volumes and auth-server.volumeMounts : auth-server : volumeMounts : - name : device-code-pages-volume mountPath : /opt/jans/jetty/jans-auth/custom/pages # device_authorization.xthml will be mounted under this directory volumes : - name : device-code-pages-volume configMap : name : device-code-custom-html Run helm install or helm upgrade if Jans has been already installed. helm upgrade <helm-release-name> janssen/janssen -n <namespace> -f values.yaml --version = 1 .0.x Here's a screenshot of the customized device-code page. Custom Error page # This guide will demonstrate how to customize the html and css of the error page. Here's a screenshot of the default Error page. As an example, we will change the color of the text at the top of the error page: Locate the directory that contains exploded auth-server WAR kubectl exec -n <namespace> <auth-server-pod-name> -- ls /tmp Output example: jetty-0_0_0_0-8080-jans-auth_war-_jans-auth-any-15449359106458251753 Get the error.xhtml from the auth-server pod: kubectl -n jans cp <auth-server-pod-name>:tmp/jetty-0_0_0_0-8080-jans-auth_war-_jans-auth-any-15449359106458251753/webapp/error.xhtml error.xhtml Modify the file locally: < div class = \"section\" > <!-- customization --> < h1 style = \"color: red; font-size: 3em; font-weight: bold; font-family: Arial\" > OOPS </ h1 > <!-- end of customization --> </ div > Create a configmap to store the content of error.xhtml . kubectl -n <namespace> create cm error-custom-html --from-file = error.xhtml Mount the configmap in your values.yaml under auth-server.volumes and auth-server.volumeMounts : auth-server : volumeMounts : - name : error-pages-volume mountPath : /opt/jans/jetty/jans-auth/custom/pages # error.xthml will be mounted under this directory volumes : - name : error-pages-volume configMap : name : error-custom-html Run helm install or helm upgrade if Jans has been already installed. helm upgrade <helm-release-name> janssen/janssen -n <namespace> -f values.yaml --version = 1 .0.x Here's a screenshot of the customized error page.","title":"Customization"},{"location":"admin/kubernetes-ops/customization/#overview","text":"All web pages are xhtml files.","title":"Overview"},{"location":"admin/kubernetes-ops/customization/#default-pages-bundled-in-the-jans-authwar-are","text":"Login page: login.xhtml Authorization page: authorize.xhtml Logout page: logout.xhtml Error page: error.xhtml","title":"Default pages bundled in the jans-auth.war are:"},{"location":"admin/kubernetes-ops/customization/#to-override-default-pages-listed-above","text":"Put a modified login.xhtml or authorize.xhtml or error.xhtml or logout.xhtml under /opt/jans/jetty/jans-auth/custom/pages/","title":"To override default pages listed above:"},{"location":"admin/kubernetes-ops/customization/#directory-structure-for-customization","text":"/opt/jans/jetty/jans-auth/ |-- custom | |-- i18n (resource bundles) | |-- libs (library files used by custom script) | |-- pages (web pages) | |-- static (images and css files)","title":"Directory structure for customization"},{"location":"admin/kubernetes-ops/customization/#adding-a-new-web-page-for-person-authentication-scripts","text":"If enterOTP.xhtml is your webpage for step 2 of authentication, place it under /opt/jans/jetty/jans-auth/custom/pages/auth/enterOTP.xhtml Reference it in the custom script as follows: def getPageForStep(self, configurationAttributes, step): # Used to specify the page you want to return for a given step if (step == 1): return \"/auth/login.xhtml\" if (step == 2) return \"/auth/enterOTP.xhtml\"","title":"Adding a new web page for Person Authentication scripts"},{"location":"admin/kubernetes-ops/customization/#reference-login-pages","text":"Here you will find several login pages for different authentication methods.","title":"Reference login pages"},{"location":"admin/kubernetes-ops/customization/#customized-resource-bundles","text":"Resource bundles that are present in the jans-auth.war are present in this folder To override the defaults, custom .properties files should be placed in the following file under this path : /opt/jans/jetty/jans-auth/custom/i18n/jans-auth.properties Resource bundle names to support other languages should be placed under the same folder /opt/jans/jetty/jans-auth/custom/i18n/ . Some examples of file names are : jans-auth_en.properties jans-auth_bg.properties jans-auth_de.properties jans-auth_es.properties jans-auth_fr.properties jans-auth_it.properties jans-auth_ru.properties jans-auth_tr.properties To add translation for a language that is not yet supported, create new properties file in resource folder and name it jans-auth_[language_code].properties, then add language code as supported-locale to the faces-config.xml present in the same folder.","title":"Customized resource bundles"},{"location":"admin/kubernetes-ops/customization/#custom-css-files","text":"Place the file in /opt/jans/jetty/jans-auth/custom/static/stylesheet/theme.css Reference it in .xhtml file using the URL https://your.jans.server/jans-auth/ext/resources/stylesheet/theme.css or /jans-auth/ext/resources/stylesheet/theme.css","title":"Custom CSS files"},{"location":"admin/kubernetes-ops/customization/#custom-image-files","text":"All images should be placed under /opt/jans/jetty/jans-auth/custom/static/img Reference it in .xhtml file using the URL https://your.jans.server/jans-auth/ext/resources/img/fileName.png or /jans-auth/ext/resources/img/fileName.jpg","title":"Custom image files"},{"location":"admin/kubernetes-ops/customization/#page-layout-header-footer-xhtml-template-customization","text":"Templates refers to the common interface layout and style. For example, a banner, logo in common header and copyright information in footer. All templates should be placed under /opt/jans/jetty/jans-auth/custom/pages/WEB-INF/incl/layout/ Place a modified template.xhtml in the above location which will override the default template file from the war","title":"Page layout, header, footer (xhtml Template) customization"},{"location":"admin/kubernetes-ops/customization/#customized-pages-examples","text":"","title":"Customized pages examples"},{"location":"admin/kubernetes-ops/customization/#custom-login-page","text":"This guide will demonstrate how to customize the html and css of the default login page. Here's a screenshot of the default login page. As an example, we will add text to the top of the form and change the color of the button using the following steps: Locate the directory that contains exploded auth-server WAR kubectl exec -n <namespace> <auth-server-pod-name> -- ls /tmp Output example: jetty-0_0_0_0-8080-jans-auth_war-_jans-auth-any-15449359106458251753 Get the login.xhtml from the auth-server pod: kubectl -n jans cp <auth-server-pod-name>:tmp/jetty-0_0_0_0-8080-jans-auth_war-_jans-auth-any-15449359106458251753/webapp/login.xhtml login.xhtml Modify the file locally: < h:form id = \"loginForm\" style = \"padding:30px;\" > <!-- customization --> < div class = \"row\" >< p id = \"creds-title\" > Enter Credentials </ p ></ div > <!-- end of customization --> < div class = \"row\" > < div class = \"col-sm-3 col-md-3\" > < h:outputText value = \"#{msgs['login.username']}\" /> </ div > Get the login-template.xhtml from the auth-server pod: kubectl -n jans cp <auth-server-pod-name>:tmp/jetty-0_0_0_0-8080-jans-auth_war-_jans-auth-any-15449359106458251753/webapp/WEB-INF/incl/layout/login-template.xhtml login-template.xhtml Modify the file locally: < h:head > < link type = \"text/css\" rel = \"stylesheet\" href = \"https://fonts.googleapis.com/css?family=Open+Sans:300,400,600\" /> <!-- customization --> < link rel = \"stylesheet\" href = \"/jans-auth/ext/resources/stylesheet/custom.css\" /> <!-- end of customization --> </ h:head > Copy the following text and save it as custom.css : # creds-title { font-style : italic ; font-weight : bolder ; } Create configmaps to store the content of login.xhtml , login-template.xhtml and custom.css . kubectl -n <namespace> create cm auth-server-custom-html --from-file = login.xhtml kubectl -n <namespace> create cm auth-server-custom-layout-html --from-file = login-template.xhtml kubectl -n <namespace> create cm auth-server-custom-css --from-file = custom.css Mount the configmaps in your values.yaml under auth-server.volumes and auth-server.volumeMounts : auth-server : volumeMounts : - name : auth-server-pages-volume mountPath : /opt/jans/jetty/jans-auth/custom/pages # login.xthml will be mounted under this directory - name : auth-server-layout-volume mountPath : /opt/jans/jetty/jans-auth/custom/pages/WEB-INF/incl/layout # login-template.xthml will be mounted under this directory - name : auth-server-static-volume mountPath : /tmp/static #custom.css will be mounted in the temporary location lifecycle : postStart : exec : command : [ \"sh\" , \"-c\" , \"mkdir /opt/jans/jetty/jans-auth/custom/static/stylesheet/ && cp /tmp/static/custom.css /opt/jans/jetty/jans-auth/custom/static/stylesheet/\" ] # custom.css will be copied from the temporary to the desired location volumes : - name : auth-server-pages-volume configMap : name : auth-server-custom-html - name : auth-server-layout-volume configMap : name : auth-server-custom-layout-html - name : auth-server-static-volume configMap : name : auth-server-custom-css Run helm install or helm upgrade if Jans has been already installed. helm upgrade <helm-release-name> janssen/janssen -n <namespace> -f values.yaml --version = 1 .0.x Here's a screenshot of the customized login page.","title":"Custom Login page"},{"location":"admin/kubernetes-ops/customization/#custom-device-code-page","text":"This guide will demonstrate how to customize the html and css of the device-code page. Here's a screenshot of the device-code page. As an example, we will change the color of the button to blue using the following steps: Locate the directory that contains exploded auth-server WAR kubectl exec -n <namespace> <auth-server-pod-name> -- ls /tmp Output example: jetty-0_0_0_0-8080-jans-auth_war-_jans-auth-any-15449359106458251753 Get the device_authorization.xhtml from the auth-server pod: kubectl -n jans cp <auth-server-pod-name>:tmp/jetty-0_0_0_0-8080-jans-auth_war-_jans-auth-any-15449359106458251753/webapp/device_authorization.xhtml device_authorization.xhtml Modify the file locally: < div class = \"col-sm-8 col-md-6\" > <!-- customization --> < h:commandButton id = \"continueButton\" style = \"background-color: red; color:white;\" styleClass = \"btn col-sm-12\" value = \"#{msgs['device.authorization.confirm.button']}\" iconAwesome = \"fa-sign-in\" > <!-- end of customization --> < f:ajax execute = \"@form\" render = \"@form messages\" listener = \"#{deviceAuthorizationAction.processUserCodeVerification}\" /> </ h:commandButton > </ div > Create a configmap to store the content of device_authorization.xhtml . kubectl -n <namespace> create cm device-code-custom-html --from-file = device_authorization.xhtml Mount the configmap in your values.yaml under auth-server.volumes and auth-server.volumeMounts : auth-server : volumeMounts : - name : device-code-pages-volume mountPath : /opt/jans/jetty/jans-auth/custom/pages # device_authorization.xthml will be mounted under this directory volumes : - name : device-code-pages-volume configMap : name : device-code-custom-html Run helm install or helm upgrade if Jans has been already installed. helm upgrade <helm-release-name> janssen/janssen -n <namespace> -f values.yaml --version = 1 .0.x Here's a screenshot of the customized device-code page.","title":"Custom Device-code page"},{"location":"admin/kubernetes-ops/customization/#custom-error-page","text":"This guide will demonstrate how to customize the html and css of the error page. Here's a screenshot of the default Error page. As an example, we will change the color of the text at the top of the error page: Locate the directory that contains exploded auth-server WAR kubectl exec -n <namespace> <auth-server-pod-name> -- ls /tmp Output example: jetty-0_0_0_0-8080-jans-auth_war-_jans-auth-any-15449359106458251753 Get the error.xhtml from the auth-server pod: kubectl -n jans cp <auth-server-pod-name>:tmp/jetty-0_0_0_0-8080-jans-auth_war-_jans-auth-any-15449359106458251753/webapp/error.xhtml error.xhtml Modify the file locally: < div class = \"section\" > <!-- customization --> < h1 style = \"color: red; font-size: 3em; font-weight: bold; font-family: Arial\" > OOPS </ h1 > <!-- end of customization --> </ div > Create a configmap to store the content of error.xhtml . kubectl -n <namespace> create cm error-custom-html --from-file = error.xhtml Mount the configmap in your values.yaml under auth-server.volumes and auth-server.volumeMounts : auth-server : volumeMounts : - name : error-pages-volume mountPath : /opt/jans/jetty/jans-auth/custom/pages # error.xthml will be mounted under this directory volumes : - name : error-pages-volume configMap : name : error-custom-html Run helm install or helm upgrade if Jans has been already installed. helm upgrade <helm-release-name> janssen/janssen -n <namespace> -f values.yaml --version = 1 .0.x Here's a screenshot of the customized error page.","title":"Custom Error page"},{"location":"admin/kubernetes-ops/external-secrets-configmaps/","text":"Overview # This guide shows how to store and retrieve jans configmaps and secrets externally in AWS Secrets Manager and GCP Secret Manager . Note Configmaps and Secrets are stored as a collection of key-value pairs. A secret in AWS/GCP Secret Manager has a max size of 65536 bytes. So the collection of key-value pairs is splitted between secrets, and thus note that during secrets retrieval it's possible that a single key-value pair is to be splitted between 2 AWS/GCP secrets. Create Secrets # AWS # There are 2 types of Secrets in AWS: String Secret where the secret can be created and retrieved from the console. Binary Secret where the secret is binary-encoded and can be created and retrieved only using the CLI/SDK. Configmaps are stored in a single String Secret . It follows the naming convention of janssen_configs Secrets are splitted and stored in multiple Binary Secrets due to the max size limitation. Secrets follows the naming convention of janssen_secrets , janssen_secrets_1 , janssen_secrets_2 ..etc Every single secret doesn't have to be a valid json, but instead the collection of all secrets should have a valid json. For example: janssen_secrets : {\"key1\":\"value1\", janssen_secrets_1 : \"key2\":\"value2\", janssen_secrets_2 : \"key3\":\"value3\"} Fresh Installation # You will need the ACCESS_KEY_ID and SECRET_ACCESS_KEY of an IAM user with a SecretsManagerReadWrite policy attached. Add the following configuration to your override.yaml : global : configAdapterName : aws configSecretAdapter : aws config : configmap : cnAwsAccessKeyId : L30E10OME18S1220S221 cnAwsSecretAccessKey : Z1A1M9A1L1EKALIeHHN~o cnAwsDefaultRegion : us-east-1 #Choose based on the desired region cnAwsSecretsEndpointUrl : https://secretsmanager.us-east-1.amazonaws.com #Choose based on the desired region cnAwsSecretsNamePrefix : janssen cnAwsProfile : janssen #Choose based on your aws named profile cnAwsSecretsReplicaRegions : [] #Optional if you want secrets to be replicated. [{\"Region\": \"us-west-1\"}, {\"Region\": \"us-west-2\"}] Run helm install or helm upgrade if Janssen is already installed: helm upgrade <helm-release-name> janssen/janssen -f override.yaml -n <namespace> Export/Migration # Configmaps # Get the json of the configmap kubectl get configmap -n <namespace> cn -o json Configmaps in AWS are stored as StringSecret , they can be created and retrieved from the console: Click Create Secret > Choose Other type of Secret > Click on Plaintext tab > Paste the json of the key-value pairs. Secrets # Get the json of the secret kubectl get secret -n <namespace> cn -o json Secrets in AWS are splitted across multiple BinarySecrets which is created and retrieved using the CLI/SDK Assuming the json is stored in a file named binary-secrets.json : aws secretsmanager create-secret --name <secret-name> --secret-binary fileb://binary-secrets.json --region <secret-region> GCP # Fresh Installation # Make sure you enabled Secret Manager API . You will need a Service account with the roles/secretmanager.admin role. This service account json should then be base64 encoded. Add the following configuration to your override.yaml : global : configAdapterName : google configSecretAdapter : google config : configmap : cnGoogleSecretManagerServiceAccount : SWFtTm90YVNlcnZpY2VBY2NvdW50Q2hhbmdlTWV0b09uZQo= #base64 encoded service account json cnGoogleProjectId : google-project-to-save-config-and-secrets-to cnSecretGoogleSecretVersionId : \"latest\" # Secret version to be used for secret configuration. Defaults to latest and should normally always stay that way. cnSecretGoogleSecretNamePrefix : janssen cnGoogleSecretManagerPassPhrase : Test1234# #Passphrase for Janssen secret in Google Secret Manager. Used for encrypting and decrypting data from Google's Secret Manager. cnConfigGoogleSecretVersionId : \"latest\" #Secret version to be used for configuration. Defaults to latest and should normally always stay that way. cnConfigGoogleSecretNamePrefix : janssen Run helm install or helm upgrade if Janssen is already installed: helm upgrade <helm-release-name> janssen/janssen -f override.yaml -n <namespace> Export/Migration # Get the json of the secret/configmap kubectl get configmap -n <namespace> cn -o json From the console, Go to Secret Manager > Click on Create Secret > Add a name > Upload a json file or add the json to the Secret value field > Create Retrieve Secrets # AWS # String Secret : To retrieve the secret value from the Console, click on the secret name and then click on Retrieve Secret Value Binary Secret : To retrieve the secret value using the cli aws secretsmanager get-secret-value --secret-id <secret-name> --query 'SecretBinary' --output text --region <secret-region> Note that the secret is binary encoded, so in order to have a decoded value, you can run the following aws secretsmanager get-secret-value --secret-id <secret-name> --query 'SecretBinary' --output text --region <secret-region> | base64 --decode Repeat these commands across all the secrets, to get the full key-value pairs. GCP # Review this to check multiple ways to retrieve secrets stored in GCP Secret Manager.","title":"External Secrets and Configmaps"},{"location":"admin/kubernetes-ops/external-secrets-configmaps/#overview","text":"This guide shows how to store and retrieve jans configmaps and secrets externally in AWS Secrets Manager and GCP Secret Manager . Note Configmaps and Secrets are stored as a collection of key-value pairs. A secret in AWS/GCP Secret Manager has a max size of 65536 bytes. So the collection of key-value pairs is splitted between secrets, and thus note that during secrets retrieval it's possible that a single key-value pair is to be splitted between 2 AWS/GCP secrets.","title":"Overview"},{"location":"admin/kubernetes-ops/external-secrets-configmaps/#create-secrets","text":"","title":"Create Secrets"},{"location":"admin/kubernetes-ops/external-secrets-configmaps/#aws","text":"There are 2 types of Secrets in AWS: String Secret where the secret can be created and retrieved from the console. Binary Secret where the secret is binary-encoded and can be created and retrieved only using the CLI/SDK. Configmaps are stored in a single String Secret . It follows the naming convention of janssen_configs Secrets are splitted and stored in multiple Binary Secrets due to the max size limitation. Secrets follows the naming convention of janssen_secrets , janssen_secrets_1 , janssen_secrets_2 ..etc Every single secret doesn't have to be a valid json, but instead the collection of all secrets should have a valid json. For example: janssen_secrets : {\"key1\":\"value1\", janssen_secrets_1 : \"key2\":\"value2\", janssen_secrets_2 : \"key3\":\"value3\"}","title":"AWS"},{"location":"admin/kubernetes-ops/external-secrets-configmaps/#fresh-installation","text":"You will need the ACCESS_KEY_ID and SECRET_ACCESS_KEY of an IAM user with a SecretsManagerReadWrite policy attached. Add the following configuration to your override.yaml : global : configAdapterName : aws configSecretAdapter : aws config : configmap : cnAwsAccessKeyId : L30E10OME18S1220S221 cnAwsSecretAccessKey : Z1A1M9A1L1EKALIeHHN~o cnAwsDefaultRegion : us-east-1 #Choose based on the desired region cnAwsSecretsEndpointUrl : https://secretsmanager.us-east-1.amazonaws.com #Choose based on the desired region cnAwsSecretsNamePrefix : janssen cnAwsProfile : janssen #Choose based on your aws named profile cnAwsSecretsReplicaRegions : [] #Optional if you want secrets to be replicated. [{\"Region\": \"us-west-1\"}, {\"Region\": \"us-west-2\"}] Run helm install or helm upgrade if Janssen is already installed: helm upgrade <helm-release-name> janssen/janssen -f override.yaml -n <namespace>","title":"Fresh Installation"},{"location":"admin/kubernetes-ops/external-secrets-configmaps/#exportmigration","text":"","title":"Export/Migration"},{"location":"admin/kubernetes-ops/external-secrets-configmaps/#configmaps","text":"Get the json of the configmap kubectl get configmap -n <namespace> cn -o json Configmaps in AWS are stored as StringSecret , they can be created and retrieved from the console: Click Create Secret > Choose Other type of Secret > Click on Plaintext tab > Paste the json of the key-value pairs.","title":"Configmaps"},{"location":"admin/kubernetes-ops/external-secrets-configmaps/#secrets","text":"Get the json of the secret kubectl get secret -n <namespace> cn -o json Secrets in AWS are splitted across multiple BinarySecrets which is created and retrieved using the CLI/SDK Assuming the json is stored in a file named binary-secrets.json : aws secretsmanager create-secret --name <secret-name> --secret-binary fileb://binary-secrets.json --region <secret-region>","title":"Secrets"},{"location":"admin/kubernetes-ops/external-secrets-configmaps/#gcp","text":"","title":"GCP"},{"location":"admin/kubernetes-ops/external-secrets-configmaps/#fresh-installation_1","text":"Make sure you enabled Secret Manager API . You will need a Service account with the roles/secretmanager.admin role. This service account json should then be base64 encoded. Add the following configuration to your override.yaml : global : configAdapterName : google configSecretAdapter : google config : configmap : cnGoogleSecretManagerServiceAccount : SWFtTm90YVNlcnZpY2VBY2NvdW50Q2hhbmdlTWV0b09uZQo= #base64 encoded service account json cnGoogleProjectId : google-project-to-save-config-and-secrets-to cnSecretGoogleSecretVersionId : \"latest\" # Secret version to be used for secret configuration. Defaults to latest and should normally always stay that way. cnSecretGoogleSecretNamePrefix : janssen cnGoogleSecretManagerPassPhrase : Test1234# #Passphrase for Janssen secret in Google Secret Manager. Used for encrypting and decrypting data from Google's Secret Manager. cnConfigGoogleSecretVersionId : \"latest\" #Secret version to be used for configuration. Defaults to latest and should normally always stay that way. cnConfigGoogleSecretNamePrefix : janssen Run helm install or helm upgrade if Janssen is already installed: helm upgrade <helm-release-name> janssen/janssen -f override.yaml -n <namespace>","title":"Fresh Installation"},{"location":"admin/kubernetes-ops/external-secrets-configmaps/#exportmigration_1","text":"Get the json of the secret/configmap kubectl get configmap -n <namespace> cn -o json From the console, Go to Secret Manager > Click on Create Secret > Add a name > Upload a json file or add the json to the Secret value field > Create","title":"Export/Migration"},{"location":"admin/kubernetes-ops/external-secrets-configmaps/#retrieve-secrets","text":"","title":"Retrieve Secrets"},{"location":"admin/kubernetes-ops/external-secrets-configmaps/#aws_1","text":"String Secret : To retrieve the secret value from the Console, click on the secret name and then click on Retrieve Secret Value Binary Secret : To retrieve the secret value using the cli aws secretsmanager get-secret-value --secret-id <secret-name> --query 'SecretBinary' --output text --region <secret-region> Note that the secret is binary encoded, so in order to have a decoded value, you can run the following aws secretsmanager get-secret-value --secret-id <secret-name> --query 'SecretBinary' --output text --region <secret-region> | base64 --decode Repeat these commands across all the secrets, to get the full key-value pairs.","title":"AWS"},{"location":"admin/kubernetes-ops/external-secrets-configmaps/#gcp_1","text":"Review this to check multiple ways to retrieve secrets stored in GCP Secret Manager.","title":"GCP"},{"location":"admin/kubernetes-ops/faq/","tags":["administration","kubernetes","operations","faq"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Faq"},{"location":"admin/kubernetes-ops/faq/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/kubernetes-ops/faq/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/kubernetes-ops/faq/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/kubernetes-ops/health-check/","tags":["administration","kubernetes","operations","health-checks"],"text":"Overview # Health checks are used to determine if a container is working as it should or not. This is done in Kubernetes using probes. Jans deployed components uses two types of probes: Readiness probes : used to know when a container is ready to start accepting traffic Liveness probes : used to know when to restart a container Jans Liveness and Readiness probes # Here is a list of the liveness and readiness probes of the deployed jans components Opendj # Opendj uses healthcheck.py in liveness probe. This python script connects to opendj to test its liveness. livenessProbe : # Executes the python3 healthcheck. exec : command : - python3 - /app/scripts/healthcheck.py # Configure the liveness healthcheck for the OpenDJ if needed. initialDelaySeconds : 30 periodSeconds : 30 timeoutSeconds : 5 failureThreshold : 20 readinessProbe : tcpSocket : port : 1636 # Configure the readiness healthcheck for the OpenDJ if needed. initialDelaySeconds : 60 timeoutSeconds : 5 periodSeconds : 25 failureThreshold : 20 auth-server # Auth-sever executes the python3 healthcheck.py in liveness and readiness probes. This python scripts parses the healthcheck endpoint to make sure the status is up. livenessProbe : # Executes the python3 healthcheck. exec : command : - python3 - /app/scripts/healthcheck.py # Configure the liveness healthcheck for the auth-server if needed. initialDelaySeconds : 30 periodSeconds : 30 timeoutSeconds : 5 readinessProbe : # Executes the python3 healthcheck. exec : command : - python3 - /app/scripts/healthcheck.py # Configure the readiness healthcheck for the auth-server if needed. initialDelaySeconds : 25 periodSeconds : 25 timeoutSeconds : 5 config-api # The health check of liveness and readiness probes is a HTTP GET request against a config-api endpoint livenessProbe : # http liveness probe endpoint httpGet : path : /jans-config-api/api/v1/health/live port : 8074 # Configure the liveness healthcheck for the config-api if needed. initialDelaySeconds : 30 periodSeconds : 30 timeoutSeconds : 5 readinessProbe : # http readiness probe endpoint httpGet : path : jans-config-api/api/v1/health/ready port : 8074 # Configure the readiness healthcheck for the config-api if needed. initialDelaySeconds : 25 periodSeconds : 25 timeoutSeconds : 5 fido2 # The health check of liveness and readiness probes is a HTTP GET request against a fido2 endpoint livenessProbe : # http liveness probe endpoint httpGet : path : /jans-fido2/sys/health-check port : http-fido2 # Configure the liveness healthcheck for the fido2 if needed. initialDelaySeconds : 25 periodSeconds : 25 timeoutSeconds : 5 readinessProbe : # http readiness probe endpoint httpGet : path : /jans-fido2/sys/health-check port : http-fido2 # Configure the readiness healthcheck for the fido2 if needed. initialDelaySeconds : 30 periodSeconds : 30 timeoutSeconds : 5 scim # The health check of liveness and readiness probes is a HTTP GET request against a scim endpoint livenessProbe : httpGet : # http liveness probe endpoint path : /jans-scim/sys/health-check port : 8080 # Configure the liveness healthcheck for the SCIM if needed. initialDelaySeconds : 30 periodSeconds : 30 timeoutSeconds : 5 readinessProbe : httpGet : # http readiness probe endpoint path : /jans-scim/sys/health-check port : 8080 # Configure the readiness healthcheck for the SCIM if needed. initialDelaySeconds : 25 periodSeconds : 25 timeoutSeconds : 5","title":"Health Check"},{"location":"admin/kubernetes-ops/health-check/#overview","text":"Health checks are used to determine if a container is working as it should or not. This is done in Kubernetes using probes. Jans deployed components uses two types of probes: Readiness probes : used to know when a container is ready to start accepting traffic Liveness probes : used to know when to restart a container","title":"Overview"},{"location":"admin/kubernetes-ops/health-check/#jans-liveness-and-readiness-probes","text":"Here is a list of the liveness and readiness probes of the deployed jans components","title":"Jans Liveness and Readiness probes"},{"location":"admin/kubernetes-ops/health-check/#opendj","text":"Opendj uses healthcheck.py in liveness probe. This python script connects to opendj to test its liveness. livenessProbe : # Executes the python3 healthcheck. exec : command : - python3 - /app/scripts/healthcheck.py # Configure the liveness healthcheck for the OpenDJ if needed. initialDelaySeconds : 30 periodSeconds : 30 timeoutSeconds : 5 failureThreshold : 20 readinessProbe : tcpSocket : port : 1636 # Configure the readiness healthcheck for the OpenDJ if needed. initialDelaySeconds : 60 timeoutSeconds : 5 periodSeconds : 25 failureThreshold : 20","title":"Opendj"},{"location":"admin/kubernetes-ops/health-check/#auth-server","text":"Auth-sever executes the python3 healthcheck.py in liveness and readiness probes. This python scripts parses the healthcheck endpoint to make sure the status is up. livenessProbe : # Executes the python3 healthcheck. exec : command : - python3 - /app/scripts/healthcheck.py # Configure the liveness healthcheck for the auth-server if needed. initialDelaySeconds : 30 periodSeconds : 30 timeoutSeconds : 5 readinessProbe : # Executes the python3 healthcheck. exec : command : - python3 - /app/scripts/healthcheck.py # Configure the readiness healthcheck for the auth-server if needed. initialDelaySeconds : 25 periodSeconds : 25 timeoutSeconds : 5","title":"auth-server"},{"location":"admin/kubernetes-ops/health-check/#config-api","text":"The health check of liveness and readiness probes is a HTTP GET request against a config-api endpoint livenessProbe : # http liveness probe endpoint httpGet : path : /jans-config-api/api/v1/health/live port : 8074 # Configure the liveness healthcheck for the config-api if needed. initialDelaySeconds : 30 periodSeconds : 30 timeoutSeconds : 5 readinessProbe : # http readiness probe endpoint httpGet : path : jans-config-api/api/v1/health/ready port : 8074 # Configure the readiness healthcheck for the config-api if needed. initialDelaySeconds : 25 periodSeconds : 25 timeoutSeconds : 5","title":"config-api"},{"location":"admin/kubernetes-ops/health-check/#fido2","text":"The health check of liveness and readiness probes is a HTTP GET request against a fido2 endpoint livenessProbe : # http liveness probe endpoint httpGet : path : /jans-fido2/sys/health-check port : http-fido2 # Configure the liveness healthcheck for the fido2 if needed. initialDelaySeconds : 25 periodSeconds : 25 timeoutSeconds : 5 readinessProbe : # http readiness probe endpoint httpGet : path : /jans-fido2/sys/health-check port : http-fido2 # Configure the readiness healthcheck for the fido2 if needed. initialDelaySeconds : 30 periodSeconds : 30 timeoutSeconds : 5","title":"fido2"},{"location":"admin/kubernetes-ops/health-check/#scim","text":"The health check of liveness and readiness probes is a HTTP GET request against a scim endpoint livenessProbe : httpGet : # http liveness probe endpoint path : /jans-scim/sys/health-check port : 8080 # Configure the liveness healthcheck for the SCIM if needed. initialDelaySeconds : 30 periodSeconds : 30 timeoutSeconds : 5 readinessProbe : httpGet : # http readiness probe endpoint path : /jans-scim/sys/health-check port : 8080 # Configure the readiness healthcheck for the SCIM if needed. initialDelaySeconds : 25 periodSeconds : 25 timeoutSeconds : 5","title":"scim"},{"location":"admin/kubernetes-ops/logs/","tags":["administration","kubernetes","operations","logs"],"text":"Overview # The Janssen logs can be viewed using the following command: kubectl logs <pod-name> -n <namespace> Log Levels # The following log levels can be configured through the configuration CLI: Log Level Messages Logged Trace All messages Debug Debug level and above Info Informational level and above Warn Warning level and above Error Error level and above Fatal Only fatal errors Off Logging is disabled Configuring Log Levels # To get the current log level of any component, run the following command: kubectl get configmap -n <namespace> <helm-release-name>-config-cm -o yaml | grep CN_<service-name>_APP_LOGGERS auth-server # To get the current log level of auth-server: kubectl get configmap -n <namespace> <helm-release-name>-config-cm -o yaml | grep CN_AUTH_APP_LOGGERS Example output: CN_AUTH_APP_LOGGERS : '{ \"audit_log_level\":\"INFO\", \"audit_log_target\":\"FILE\", \"auth_log_level\":\"INFO\", \"auth_log_target\":\"STDOUT\", \"http_log_level\":\"INFO\", \"http_log_target\":\"FILE\", \"ldap_stats_log_level\":\"INFO\", \"ldap_stats_log_target\":\"FILE\", \"persistence_duration_log_level\":\"INFO\", \"persistence_duration_log_target\":\"FILE\", \"persistence_log_level\":\"INFO\", \"persistence_log_target\":\"FILE\", \"script_log_level\":\"INFO\", \"script_log_target\":\"FILE\" }' To override the current logging level in auth-server, you can either add the desired changes to a yaml file and apply it using helm , or change it directly using kubectl edit command: Add changes to yaml: add these changes to your override.yaml file: ............ ............ global : auth-server : appLoggers : authLogLevel : \"TRACE\" httpLogLevel : \"TRACE\" persistenceLogLevel : \"TRACE\" persistenceDurationLogLevel : \"TRACE\" ldapStatsLogLevel : \"TRACE\" scriptLogLevel : \"TRACE\" auditStatsLogLevel : \"TRACE\" ............ ............ Apply the changes: helm upgrade <helm-release-name> janssen/janssen -f override.yaml -n <namespace> View the logs of auth-server: kubectl logs -f deployment/<helm-release-name>-auth-server -n <namespace> config-api # To get the current log level of config-api: kubectl get configmap -n <namspace> <helm-release-name>-config-cm -o yaml | grep CN_CONFIG_API_APP_LOGGERS Example output: CN_CONFIG_API_APP_LOGGERS : '{\" config_api_log_level\":\"INFO\", \"config_api_log_target\":\"STDOUT\", \"ldap_stats_log_level\":\"INFO\", \"ldap_stats_log_target\":\"FILE\", \"persistence_duration_log_level\":\"INFO\", \"persistence_duration_log_target\":\"FILE\", \"persistence_log_level\":\"INFO\", \"persistence_log_target\":\"FILE\", \"script_log_level\":\"INFO\", \"script_log_target\":\"FILE\"}' To override the current logging level in config-api, you can either add the desired changes to a yaml file and apply it using helm , or change it directly using kubectl edit command: Add changes to yaml: add these changes to your override.yaml file: ............ ............ global : config-api : appLoggers : configApiLogLevel : \"TRACE\" persistenceLogLevel : \"TRACE\" persistenceDurationLogLevel : \"TRACE\" ldapStatsLogLevel : \"TRACE\" scriptLogLevel : \"TRACE\" ............ ............ Apply the changes: helm upgrade <helm-release-name> janssen/janssen -f override.yaml -n <namespace> View the logs of config-api: kubectl logs -f deployment/<helm-release-name>-config-api -n <namespace> fido2 # To get the current log level of fido2: kubectl get configmap -n <namespace> <helm-release-name>-config-cm -o yaml | grep CN_FIDO2_APP_LOGGERS Example output: CN_FIDO2_APP_LOGGERS : '{\" fido2_log_level\":\"INFO\", \"fido2_log_target\":\"STDOUT\", \"persistence_log_level\":\"INFO\", \"persistence_log_target\":\"FILE\"}' To override the current logging level in fido2, you can either add the desired changes to a yaml file and apply it using helm , or change it directly using kubectl edit command: Add changes to yaml: add these changes to your override.yaml file: ............ ............ global : fido2 : appLoggers : fido2LogLevel : \"TRACE\" persistenceLogLevel : \"TRACE\" ............ ............ Apply the changes: helm upgrade <helm-release-name> janssen/janssen -f override.yaml -n <namespace> View the logs of fido2: kubectl logs -f deployment/<helm-release-name>-fido2 -n <namespace> scim # To get the current log level of scim: kubectl get configmap -n <namespace> <helm-release-name>-config-cm -o yaml | grep CN_SCIM_APP_LOGGERS Example output: CN_SCIM_APP_LOGGERS : '{\" ldap_stats_log_level\":\"INFO\", \"ldap_stats_log_target\":\"FILE\", \"persistence_duration_log_level\":\"INFO\", \"persistence_duration_log_target\":\"FILE\", \"persistence_log_level\":\"INFO\", \"persistence_log_target\":\"FILE\", \"scim_log_level\":\"INFO\", \"scim_log_target\":\"STDOUT\", \"script_log_level\":\"INFO\", \"script_log_target\":\"FILE\"}' To override the current logging level in scim, you can either add the desired changes to a yaml file and apply it using helm , or change it directly using kubectl edit command: Add changes to yaml: add these changes to your override.yaml file: ............ ............ global : scim : appLoggers : scimLogLevel : \"TRACE\" persistenceLogLevel : \"TRACE\" persistenceDurationLogLevel : \"TRACE\" ldapStatsLogLevel : \"TRACE\" scriptLogLevel : \"TRACE\" ............ ............ Apply the changes: helm upgrade <helm-release-name> janssen/janssen -f override.yaml -n <namespace> View the logs of scim: kubectl logs -f deployment/<helm-release-name>-scim -n <namespace> Hack it # Warning This can cause deployments to break, but if you wish you may edit it directly and restart the wanted deployment Edit using the following command: kubectl edit configmap <helm-release-name>-config-cm -n <namespace> Restart the wanted deployment: kubectl rollout restart deployment <deployment-name> -n <namespace>","title":"Logs"},{"location":"admin/kubernetes-ops/logs/#overview","text":"The Janssen logs can be viewed using the following command: kubectl logs <pod-name> -n <namespace>","title":"Overview"},{"location":"admin/kubernetes-ops/logs/#log-levels","text":"The following log levels can be configured through the configuration CLI: Log Level Messages Logged Trace All messages Debug Debug level and above Info Informational level and above Warn Warning level and above Error Error level and above Fatal Only fatal errors Off Logging is disabled","title":"Log Levels"},{"location":"admin/kubernetes-ops/logs/#configuring-log-levels","text":"To get the current log level of any component, run the following command: kubectl get configmap -n <namespace> <helm-release-name>-config-cm -o yaml | grep CN_<service-name>_APP_LOGGERS","title":"Configuring Log Levels"},{"location":"admin/kubernetes-ops/logs/#auth-server","text":"To get the current log level of auth-server: kubectl get configmap -n <namespace> <helm-release-name>-config-cm -o yaml | grep CN_AUTH_APP_LOGGERS Example output: CN_AUTH_APP_LOGGERS : '{ \"audit_log_level\":\"INFO\", \"audit_log_target\":\"FILE\", \"auth_log_level\":\"INFO\", \"auth_log_target\":\"STDOUT\", \"http_log_level\":\"INFO\", \"http_log_target\":\"FILE\", \"ldap_stats_log_level\":\"INFO\", \"ldap_stats_log_target\":\"FILE\", \"persistence_duration_log_level\":\"INFO\", \"persistence_duration_log_target\":\"FILE\", \"persistence_log_level\":\"INFO\", \"persistence_log_target\":\"FILE\", \"script_log_level\":\"INFO\", \"script_log_target\":\"FILE\" }' To override the current logging level in auth-server, you can either add the desired changes to a yaml file and apply it using helm , or change it directly using kubectl edit command: Add changes to yaml: add these changes to your override.yaml file: ............ ............ global : auth-server : appLoggers : authLogLevel : \"TRACE\" httpLogLevel : \"TRACE\" persistenceLogLevel : \"TRACE\" persistenceDurationLogLevel : \"TRACE\" ldapStatsLogLevel : \"TRACE\" scriptLogLevel : \"TRACE\" auditStatsLogLevel : \"TRACE\" ............ ............ Apply the changes: helm upgrade <helm-release-name> janssen/janssen -f override.yaml -n <namespace> View the logs of auth-server: kubectl logs -f deployment/<helm-release-name>-auth-server -n <namespace>","title":"auth-server"},{"location":"admin/kubernetes-ops/logs/#config-api","text":"To get the current log level of config-api: kubectl get configmap -n <namspace> <helm-release-name>-config-cm -o yaml | grep CN_CONFIG_API_APP_LOGGERS Example output: CN_CONFIG_API_APP_LOGGERS : '{\" config_api_log_level\":\"INFO\", \"config_api_log_target\":\"STDOUT\", \"ldap_stats_log_level\":\"INFO\", \"ldap_stats_log_target\":\"FILE\", \"persistence_duration_log_level\":\"INFO\", \"persistence_duration_log_target\":\"FILE\", \"persistence_log_level\":\"INFO\", \"persistence_log_target\":\"FILE\", \"script_log_level\":\"INFO\", \"script_log_target\":\"FILE\"}' To override the current logging level in config-api, you can either add the desired changes to a yaml file and apply it using helm , or change it directly using kubectl edit command: Add changes to yaml: add these changes to your override.yaml file: ............ ............ global : config-api : appLoggers : configApiLogLevel : \"TRACE\" persistenceLogLevel : \"TRACE\" persistenceDurationLogLevel : \"TRACE\" ldapStatsLogLevel : \"TRACE\" scriptLogLevel : \"TRACE\" ............ ............ Apply the changes: helm upgrade <helm-release-name> janssen/janssen -f override.yaml -n <namespace> View the logs of config-api: kubectl logs -f deployment/<helm-release-name>-config-api -n <namespace>","title":"config-api"},{"location":"admin/kubernetes-ops/logs/#fido2","text":"To get the current log level of fido2: kubectl get configmap -n <namespace> <helm-release-name>-config-cm -o yaml | grep CN_FIDO2_APP_LOGGERS Example output: CN_FIDO2_APP_LOGGERS : '{\" fido2_log_level\":\"INFO\", \"fido2_log_target\":\"STDOUT\", \"persistence_log_level\":\"INFO\", \"persistence_log_target\":\"FILE\"}' To override the current logging level in fido2, you can either add the desired changes to a yaml file and apply it using helm , or change it directly using kubectl edit command: Add changes to yaml: add these changes to your override.yaml file: ............ ............ global : fido2 : appLoggers : fido2LogLevel : \"TRACE\" persistenceLogLevel : \"TRACE\" ............ ............ Apply the changes: helm upgrade <helm-release-name> janssen/janssen -f override.yaml -n <namespace> View the logs of fido2: kubectl logs -f deployment/<helm-release-name>-fido2 -n <namespace>","title":"fido2"},{"location":"admin/kubernetes-ops/logs/#scim","text":"To get the current log level of scim: kubectl get configmap -n <namespace> <helm-release-name>-config-cm -o yaml | grep CN_SCIM_APP_LOGGERS Example output: CN_SCIM_APP_LOGGERS : '{\" ldap_stats_log_level\":\"INFO\", \"ldap_stats_log_target\":\"FILE\", \"persistence_duration_log_level\":\"INFO\", \"persistence_duration_log_target\":\"FILE\", \"persistence_log_level\":\"INFO\", \"persistence_log_target\":\"FILE\", \"scim_log_level\":\"INFO\", \"scim_log_target\":\"STDOUT\", \"script_log_level\":\"INFO\", \"script_log_target\":\"FILE\"}' To override the current logging level in scim, you can either add the desired changes to a yaml file and apply it using helm , or change it directly using kubectl edit command: Add changes to yaml: add these changes to your override.yaml file: ............ ............ global : scim : appLoggers : scimLogLevel : \"TRACE\" persistenceLogLevel : \"TRACE\" persistenceDurationLogLevel : \"TRACE\" ldapStatsLogLevel : \"TRACE\" scriptLogLevel : \"TRACE\" ............ ............ Apply the changes: helm upgrade <helm-release-name> janssen/janssen -f override.yaml -n <namespace> View the logs of scim: kubectl logs -f deployment/<helm-release-name>-scim -n <namespace>","title":"scim"},{"location":"admin/kubernetes-ops/logs/#hack-it","text":"Warning This can cause deployments to break, but if you wish you may edit it directly and restart the wanted deployment Edit using the following command: kubectl edit configmap <helm-release-name>-config-cm -n <namespace> Restart the wanted deployment: kubectl rollout restart deployment <deployment-name> -n <namespace>","title":"Hack it"},{"location":"admin/kubernetes-ops/scaling/","tags":["administration","kubernetes","operations","scaling"],"text":"Overview # Scaling is the ability to handle the increase in usage by expanding the existing resources(nodes/pods). Scaling types # Scaling in Kubernetes can be done automatically and manually . Automatic Scaling # Kubernetes has the capability to provision resources automatically in order to match the needed demand. Horizontal Pod Autoscaler (HPA) # HPA automatically resizes the number of pods to match demand. In order for hpa to work, you have to: Install metrics server kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml Define requests for the metric used It is configured and enabled by default in the deployed jans components. The default configuration scales in and out based on the CPU utilization of the pods. <component-name> : hpa : enabled : true minReplicas : 1 maxReplicas : 10 targetCPUUtilizationPercentage : 50 # -- metrics if targetCPUUtilizationPercentage is not set metrics : [] # -- Scaling Policies behavior : {} Cluster Autoscaler # Cluster Autoscaler automatically resizes the number of nodes in a given node pool, based on the demands of your workloads. Cluster Autoscaler is available in AWS , GCP , and Azure . Manual Scaling # Kubernetes also offers the option to manually scale your resources. For example, you can increase manually the pod replicas of auth-server deployment using the following command: kubectl scale --replicas = 3 deployment/auth-server -n <namespace>","title":"Scaling"},{"location":"admin/kubernetes-ops/scaling/#overview","text":"Scaling is the ability to handle the increase in usage by expanding the existing resources(nodes/pods).","title":"Overview"},{"location":"admin/kubernetes-ops/scaling/#scaling-types","text":"Scaling in Kubernetes can be done automatically and manually .","title":"Scaling types"},{"location":"admin/kubernetes-ops/scaling/#automatic-scaling","text":"Kubernetes has the capability to provision resources automatically in order to match the needed demand.","title":"Automatic Scaling"},{"location":"admin/kubernetes-ops/scaling/#horizontal-pod-autoscaler-hpa","text":"HPA automatically resizes the number of pods to match demand. In order for hpa to work, you have to: Install metrics server kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml Define requests for the metric used It is configured and enabled by default in the deployed jans components. The default configuration scales in and out based on the CPU utilization of the pods. <component-name> : hpa : enabled : true minReplicas : 1 maxReplicas : 10 targetCPUUtilizationPercentage : 50 # -- metrics if targetCPUUtilizationPercentage is not set metrics : [] # -- Scaling Policies behavior : {}","title":"Horizontal Pod Autoscaler (HPA)"},{"location":"admin/kubernetes-ops/scaling/#cluster-autoscaler","text":"Cluster Autoscaler automatically resizes the number of nodes in a given node pool, based on the demands of your workloads. Cluster Autoscaler is available in AWS , GCP , and Azure .","title":"Cluster Autoscaler"},{"location":"admin/kubernetes-ops/scaling/#manual-scaling","text":"Kubernetes also offers the option to manually scale your resources. For example, you can increase manually the pod replicas of auth-server deployment using the following command: kubectl scale --replicas = 3 deployment/auth-server -n <namespace>","title":"Manual Scaling"},{"location":"admin/kubernetes-ops/start-order/","tags":["administration","kubernetes","operations","start-order"],"text":"Service Start Order #","title":"Start Order"},{"location":"admin/kubernetes-ops/start-order/#service-start-order","text":"","title":"Service Start Order"},{"location":"admin/kubernetes-ops/upgrade/","tags":["administration","kubernetes","operations","helm","upgrade"],"text":"This guide shows how to upgrade a Janssen helm deployment. helm ls -n <namepsace> Keep note of the helm release version Add your changes to override.yaml Apply your upgrade: helm upgrade <janssen-release-name> janssen/janssen -n <namespace> -f override.yaml --version=1.0.17.nightly","title":"Upgrade"},{"location":"admin/link/","tags":["administration","link"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Link Guide"},{"location":"admin/link/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/link/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/link/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/planning/","tags":["administration","planning","deployment"],"text":"Overview # This Deployment Guide will help you to plan how to launch a digital identity service for your organization. It will hopefully answer many of the \"why\" questions, not just the \"how\" questions, setting the stage for what challenges are in scope for Janssen--and where you may need to use other software. It addresses some common questions that don't quite fit into other parts of the Janssen docs. By covering the key features and designs, hopefully, this guide will help you understand the different deployment options available, when to use each, and how to right-size your Janssen identity services. The audience for this deployment guide includes technical architects, designers, developers and Janssen administrators. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/planning/#overview","text":"This Deployment Guide will help you to plan how to launch a digital identity service for your organization. It will hopefully answer many of the \"why\" questions, not just the \"how\" questions, setting the stage for what challenges are in scope for Janssen--and where you may need to use other software. It addresses some common questions that don't quite fit into other parts of the Janssen docs. By covering the key features and designs, hopefully, this guide will help you understand the different deployment options available, when to use each, and how to right-size your Janssen identity services. The audience for this deployment guide includes technical architects, designers, developers and Janssen administrators. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/planning/application-portal/","tags":["administration","planning","portal"],"text":"An application portal (\"portal\") is a website which displays all the protected applications available for an end user to access. The Janssen Project does not provide a portal. But you can build your own. Each application that you want in your portal should be configured as an OpenID Connect RP. Build a simple website (any CMS will do) that is also an RP. The OP can provide the roles of the user, or another claim, which will enable your portal to determine which websites to display. Iterate and display the websites (or icons) with the respective URLs.","title":"Application Portal"},{"location":"admin/planning/benchmarking/","tags":["administration","planning","benchmarking"],"text":"Want confidence that your Janssen platform will perform with the latency and concurrency you need in production? If so, then you MUST benchmark properly. It's critical that your test data and transactions mock what you need to prove in production. For cloud native deployments, benchmarking is also essential to test auto-scaling and failover. Ideally, you'll test the same hardware and network. Remember that OAuth has different flows, which have a different number of steps, and different requirements for compute and persistence. For example, the OAuth Client Credential Grant is very short: there is one token request, and one token response. The OpenID Code Flow has many more steps: it has a request/response to the authorization, token, Userinfo and logout endpoints. It's really important to test the exact flow you intend to use in production. Benchmarking also has the benefit of testing the index configuration in your database. Every database trades disk space for performance by using indexes. If you miss an index, performance sometimes comes to a grinding halt. Your service may even crash. Having confidence that all potential index scenario's get executed in your benchmarking is essential. Auth Server publishes JUnit tests and some tools for generating test data. Because each page rendered by Auth Server has a state, you cannot use a static load generation page tool. Don't forget to gather data on compute, storage, and memory. Also watch the resources consumed by the each web service and system service (e.g. database). You can't find the bottleneck without this data. System libraries and hardware choices may also impact your results. Benchmarking is an iterative process. Inevitably, things never go exactly how you guessed they would. And you make changes to your environment and run the benchmarking tests again-- ad naseum . Leave enough time for benchmarking. How ever much time you think it will take, triple your estimate. Make sure you look at both short tests and long running tests. A slow memory leak may only present after many hours of high load. Also, run some crazy tests, just so you know what happens. Some organizations benchmark for ten times normal volume. But when an incident happens, they see 1,000 times normal volume. Think outside-the-box. It's tricky load testing some newer two-factor authentication services, especially if they rely on new features of the browser. Hopefully the tools to benchmark these will evolve. Janssen Auth Server supports a number of deployment models--both VM and cloud native. While cloud native architecture enables true horizontal scalability, it comes at a cost. Benchmarking can help you understand if that cost is justified. Load test # In cloud native architecture, the load testing is executed via k8s pods. Authorization Code Flow jmeter load test # For load testing with Authorization Code Flow jmeter test, the following script is used. See Authorization code flow recipe for details. Resource Owner Password Grant (ROPC) Flow jmeter load test # For load testing with Resource Owner Password Grant (ROPC) Flow jmeter test, the following script is used. See ROPC flow recipe for details.","title":"Benchmarking"},{"location":"admin/planning/benchmarking/#load-test","text":"In cloud native architecture, the load testing is executed via k8s pods.","title":"Load test"},{"location":"admin/planning/benchmarking/#authorization-code-flow-jmeter-load-test","text":"For load testing with Authorization Code Flow jmeter test, the following script is used. See Authorization code flow recipe for details.","title":"Authorization Code Flow jmeter load test"},{"location":"admin/planning/benchmarking/#resource-owner-password-grant-ropc-flow-jmeter-load-test","text":"For load testing with Resource Owner Password Grant (ROPC) Flow jmeter test, the following script is used. See ROPC flow recipe for details.","title":"Resource Owner Password Grant (ROPC) Flow jmeter load test"},{"location":"admin/planning/caching/","tags":["administration","planning","caching","Redis","Couchbase","Memcached"],"text":"There are two reasons to use caching. First, to improve performance by reducing the number of writes to the disk. Second, to share session data in a clustered deployment. Janssen supports a few different options for caching, as controlled by the cacheProviderType . Also keep in mind that unless the sessionIdPersistInCache is set to True , Auth Server will store sessions in the database. In-Memory If you only have one server, you can use RAM as the cache. Watch the memory usage of Auth Server--if it gets too high you may want to switch to another cache mechanism. Database A \"database cache\" is an oxymoron. But in cases where you don't want another component or service, but you need the session replication for a cluster, it may be convenient to persist the \"cache\" data in the database. Couchbase If you are already using Couchbase for persistence, then Janssen Auth Server can use \"ephemeral buckets\", which exist only in memory, for caching. Redis The best choice if you need a cache service for LDAP, RDBMS, or Spanner. Great performance and low cache miss rate. Commercial Redis supports TLS, which is a good option if you need secure communication. Memcached Still a good choice, especially if that's what you already run for other applications. We have observed a slightly higher cache miss rate under high load, which is fairly atypical for most login applications. Cloud Cache Amazon ElastiCache or Google Memorystore offer both Redis and Memcached managed services. They work fine.","title":"Caching"},{"location":"admin/planning/central-auth-service/","tags":["administration","planning","integration"],"text":"Older monolithic web access management platforms from the 2000's had features to allow central policy management--what users can access what resources. But modern federated digital identity platforms generally do not. That's true for two reasons. First implementing all the OAuth and OpenID features is already a wide swath of requirements. Second, policy management, or authorization, has itself become a nice market. Note the policy management platforms list in the RBAC planning guide page. With that said, if the number of policies is low, there are some ways to use Jans Auth Server as a central policy decision point. You could use the presence of OAuth scopes to signal to the policy enforcement point the extent of access. In this case, policies could be implemented as code in the Update Token interception script. A similar strategy is to use UMA access tokens (\"RPT tokens\"), in which case you would use either the RPT interception script or the claims gathering interception script to implement your policies (or a combination of both). But this approach should be used with caution. Most of the policy management tools today use a declarative language for policies. Maintaining policies in code does not scale as well.","title":"Central Authorization Service Integration"},{"location":"admin/planning/certificates-keys/","tags":["administration","planning","certificates","keys","cryptography","JCE","HSM","FIPS"],"text":"JSON Signing and Encryption # Janssen uses keys for signing and encryption, primarily concerning JSON documents. There are six IETF RFCs that provide considerable detail: RFC 7515 JSON Web Signing (JWE) RFC 7516 JSON Web Encryption (JWE) RFC 7517 JSON Web Key (JWK) RFC 7518 JSON Web Algorithms (JWA) RFC 7519 JSON Web Signing (JWT) RFC 7520 Examples of Protecting Content Using JSON Object Signing and Encryption (JOSE) Auth Server Supported Signing # JWT Type Algorithms DPOP RS256, RS384, RS512, ES256, ES384, ES512, PS256, PS384, PS512 Authorization HS256, HS384, HS512, RS256, RS384, RS512, ES256, ES384, ES512, ES512, PS256, PS384, PS512 Request Object HS256, HS384, HS512, RS256, RS384, RS512, ES256, ES384, ES512, PS256, PS384, PS512 Userinfo HS256, HS384, HS512, RS256, RS384, RS512, ES256, ES384, ES512, PS256, PS384, PS512 Token Endpoint Auth HS256, HS384, HS512, RS256, RS384, RS512, ES256, ES384, ES512, PS256, PS384, PS512 ID Token HS256, HS384, HS512, RS256, RS384, RS512, ES256, ES384, ES512, PS256, PS384, PS512 Auth Server Supported Encryption # Encryption Methods Algorithms Authorization A128CBC+HS256, A256CBC+HS512, A128GCM, A256GCM id_token A128CBC+HS256, A256CBC+HS512, A128GCM, A256GCM Request object A128CBC+HS256, A256CBC+HS512, A128GCM, A256GCM Userinfo A128CBC+HS256, A256CBC+HS512, A128GCM, A256GCM Encryption Algorithms Algorithms Userinfo RSA1_5, RSA-OAEP, A128KW, A256KW id_token RSA1_5, RSA-OAEP, A128KW, A256KW authorization RSA1_5, RSA-OAEP, A128KW, A256KW request object RSA1_5, RSA-OAEP, A128KW, A256KW Java Cryptographic Engine (JCE) # Janssen projects ships and tests with the Bouncy Castle Crypto API's JCE. However, you may substitute your own JCE as long as it has implementations for the algorithms used by Auth Server. Using a Hardware Security Module (HSM) # Janssen Auth Server can utilize an external REST API, Jans Eleven , which leverages an HSM that exposes a PKCS #11 interface. Key Rotation # OpenID Connect clients must support the rotation of both signing and encryption keys. The best practice is to rotate often--the default configuration in a VM installation of Auth Server is every two days . The reason for such a frequent rotation is to make sure developer account for rotation at the time they create applications--lest they forget and their software breaks a year later when rotation happens. In a single VM deployment, key rotation is controlled by Auth Server. But in a clustered deployment, key rotation has to happen centrally. Janssen includes a key rotation service for cloud deployments. Certificates # X.509 is used extensively for web server TLS. But it is also used for Mutual Transport Layer Security (MTLS), either initiated by a software client, or presented by a person (i.e. a personal certificate). MTLS is generally implemented in the web tier. FIPS # To support FIPS 140-2 conformance, you must use a FIPS approved JCE, and preferably, use an operating system that has FIPS Enforcement, like RHEL 8 .","title":"Certificates/Keys"},{"location":"admin/planning/certificates-keys/#json-signing-and-encryption","text":"Janssen uses keys for signing and encryption, primarily concerning JSON documents. There are six IETF RFCs that provide considerable detail: RFC 7515 JSON Web Signing (JWE) RFC 7516 JSON Web Encryption (JWE) RFC 7517 JSON Web Key (JWK) RFC 7518 JSON Web Algorithms (JWA) RFC 7519 JSON Web Signing (JWT) RFC 7520 Examples of Protecting Content Using JSON Object Signing and Encryption (JOSE)","title":"JSON Signing and Encryption"},{"location":"admin/planning/certificates-keys/#auth-server-supported-signing","text":"JWT Type Algorithms DPOP RS256, RS384, RS512, ES256, ES384, ES512, PS256, PS384, PS512 Authorization HS256, HS384, HS512, RS256, RS384, RS512, ES256, ES384, ES512, ES512, PS256, PS384, PS512 Request Object HS256, HS384, HS512, RS256, RS384, RS512, ES256, ES384, ES512, PS256, PS384, PS512 Userinfo HS256, HS384, HS512, RS256, RS384, RS512, ES256, ES384, ES512, PS256, PS384, PS512 Token Endpoint Auth HS256, HS384, HS512, RS256, RS384, RS512, ES256, ES384, ES512, PS256, PS384, PS512 ID Token HS256, HS384, HS512, RS256, RS384, RS512, ES256, ES384, ES512, PS256, PS384, PS512","title":"Auth Server Supported Signing"},{"location":"admin/planning/certificates-keys/#auth-server-supported-encryption","text":"Encryption Methods Algorithms Authorization A128CBC+HS256, A256CBC+HS512, A128GCM, A256GCM id_token A128CBC+HS256, A256CBC+HS512, A128GCM, A256GCM Request object A128CBC+HS256, A256CBC+HS512, A128GCM, A256GCM Userinfo A128CBC+HS256, A256CBC+HS512, A128GCM, A256GCM Encryption Algorithms Algorithms Userinfo RSA1_5, RSA-OAEP, A128KW, A256KW id_token RSA1_5, RSA-OAEP, A128KW, A256KW authorization RSA1_5, RSA-OAEP, A128KW, A256KW request object RSA1_5, RSA-OAEP, A128KW, A256KW","title":"Auth Server Supported Encryption"},{"location":"admin/planning/certificates-keys/#java-cryptographic-engine-jce","text":"Janssen projects ships and tests with the Bouncy Castle Crypto API's JCE. However, you may substitute your own JCE as long as it has implementations for the algorithms used by Auth Server.","title":"Java Cryptographic Engine (JCE)"},{"location":"admin/planning/certificates-keys/#using-a-hardware-security-module-hsm","text":"Janssen Auth Server can utilize an external REST API, Jans Eleven , which leverages an HSM that exposes a PKCS #11 interface.","title":"Using a Hardware Security Module (HSM)"},{"location":"admin/planning/certificates-keys/#key-rotation","text":"OpenID Connect clients must support the rotation of both signing and encryption keys. The best practice is to rotate often--the default configuration in a VM installation of Auth Server is every two days . The reason for such a frequent rotation is to make sure developer account for rotation at the time they create applications--lest they forget and their software breaks a year later when rotation happens. In a single VM deployment, key rotation is controlled by Auth Server. But in a clustered deployment, key rotation has to happen centrally. Janssen includes a key rotation service for cloud deployments.","title":"Key Rotation"},{"location":"admin/planning/certificates-keys/#certificates","text":"X.509 is used extensively for web server TLS. But it is also used for Mutual Transport Layer Security (MTLS), either initiated by a software client, or presented by a person (i.e. a personal certificate). MTLS is generally implemented in the web tier.","title":"Certificates"},{"location":"admin/planning/certificates-keys/#fips","text":"To support FIPS 140-2 conformance, you must use a FIPS approved JCE, and preferably, use an operating system that has FIPS Enforcement, like RHEL 8 .","title":"FIPS"},{"location":"admin/planning/components/","tags":["administration","planning","components","architecture"],"text":"This page has a brief description of the major components of a Janssen deployment. Auth Server : This component is the OAuth Authorization Server, the OpenID Connect Provider, the UMA Authorization Server--this is the main Internet facing component of Janssen. It's the service that returns tokens, JWT's and identity assertions. This service must be Internet facing. Database : Like most IAM platforms, Janssen requires some kind of persistence service to store configuration and other entity data (client, person, scope, attribute, FIDO device, etc.) As different databases are good for different deployments, Janssen supports a number of options: OpenDJ, MySQL, Postgres, Couchbase, Google Spanner, and Amazon Aurora. Other databases may be added in the future. Cache : Getting data from a disk is still the slowest part of any web platform. If you want higher transaction speeds, one strategy is to use a memory cache instead of the disk (i.e. database). Janssen was designed to store short lived objects in the cache, like the code in the OpenID code flow (which is only used one time) or access tokens, which only live for a few minutes. Currently Janssen has three options for cache: in-memory , which is suitable only for one node VM deploymetns; redis which is probably your best option; and memcached which you should use if a Redis cache service is not available (and tends to have more cache misses under high volume). Key Management Janssen does a lot of cryptographic signing and encryption. Where you store the private keys has an impact on the security of your Janssen platform. For cloud deployments, many providers are providing key storage as a service. You could also use the file system or an HSM. FIDO2 : This component provides the server side endpoints to enroll and validate devices that use FIDO. It provides both FIDO U2F (register, authenticate) and FIDO 2 (attestation, assertion) endpoints. This service must be internet facing. Config API : The API to configure the auth-server and other components is consolidated in this component. This service should not be Internet-facing. SCIM : SCIM is JSON/REST API to manage user data. Use it to add, edit and update user information. This service should not be Internet facing. CLI : While you can use curl to call the Config API, CLI is a command line tool that provides a simple single line options for configuration. In the background, it is just calling the Config API. To authenticate, you'll use the OAuth Device flow. The CLI need not be on the same server as any of the components (you can run it from your desktop). But you will need network connectivity to the Config API and the Auth Server. TUI : An menu-driven interactive tool for configuration, the \"TUI\" or \"text user interface\" might resemble an 90's BIOS configuration, but it gets the job done without the need for a web browser. Like the CLI, you can run it from anywhere, but need connectivity to the Config API and Auth Server. The TUI writes a \"CLI log\"--the one liner you could have executed to do whatever you just did in the interface. This will help you if you want to script stuff later on. Jans Core : This library has code that is shared across several janssen projects. You will most likely need this project when you build other Janssen components. Jans ORM : This is the library for persistence and caching implementations in Janssen. Currently, LDAP and Couchbase are supported. RDBMS is coming soon. Jans Eleven : Auth Server can use the Jans Eleven REST API for key operations, which in turns uses PKCS11 interface of an HSM. Basically, it's a strategy to share an HSM over a network. Agama : The Agama module offers an alternative way to build authentication flows in Janssen Server. With Agama, flows are coded in a DSL (domain specific language) designed for the sole purpose of writing web flows. Setup : Configuring a Janssen Auth Server platform is complicated. How do you generate the keys and certificates? How do you generate the minimal data set to start your system. The setup component helps you bootstrap a minimal system.","title":"Components"},{"location":"admin/planning/customization/","tags":["administration","planning","localization","international","language"],"text":"Customization and Localization # You can customize just about everything in the Janssen Platform. That's pretty much the point of running your own identity platform. This includes the look and feel of the web pages, the language of the user-facing content, the behavior of endpoints, error messages, and more. Behavior of endpoints # Almost every endpoint has an interception script, which enables you to implement custom business logic. For a more general discussion of the extensibility of the Janssen platform, see the Developer Guide . Web content # There are several front channel flows in Auth Server (front channel = web browser): OpenID User Authentication OpenID Consent Post-Authentication UMA Claims Gathering Each of these scripts contains a method which is similar to getPageForStep which fetches the respective Facelets xhtml file for that step. Facelets is very friendly to designers, as it's possible to mix content such as regular HTML with JSF components. Thus Facelets pages can have both static and dynamic content and leverage all your \"normal\" web design tools like CSS and JavaScript. Facelets also supports templates. Each .xhtml page has access to the authentication context, and you can insert data from the respective interception script. Also, each .xhtml page is unique, and has a built in state identifier, preventing Auth Server from responding to any page which it did not render. For more information, see the Developer Guide . Note, in the getPageForStep method, you can have a conditional statement to return different pages based either on the detected or requested language of the subject. Error messages # You can change the descriptions for the various front-channel Auth Server error messages, for example, what would Auth Server return for a bad request to the Authorization Endpoint. Of course you can also customize the web server error messages, like 404, by configuring your web server. Auth Server should never return a stackTrace. Localization for OpenID Connect client metadata # Because client information may be displayed via the OpenID protocol, language support is needed at the client level. For example, the client name, description, terms of service URI, or logo may differ based on the end user's language. Section 2.1 of OpenID Connect Client Registration, Metadata Languages and Scripts states: Human-readable Client Metadata values and Client Metadata values that reference human-readable values MAY be represented in multiple languages and scripts. For example, values such as client_name, tos_uri, policy_uri, logo_uri, and client_uri might have multiple locale-specific values in some Client registrations. To specify the languages and scripts, BCP47 language tags are added to Client Metadata member names, delimited by a # character. For example, the value for tos_uri#ja-Hani-JP would direct the subject to the terms of service agreement in Japanese. Janssen does not yet support languages syntax for OpenID user claims, as described in OpenID Core Section 5.2, Claims Languages and Scripts .","title":"Customization/Localization"},{"location":"admin/planning/customization/#customization-and-localization","text":"You can customize just about everything in the Janssen Platform. That's pretty much the point of running your own identity platform. This includes the look and feel of the web pages, the language of the user-facing content, the behavior of endpoints, error messages, and more.","title":"Customization and Localization"},{"location":"admin/planning/customization/#behavior-of-endpoints","text":"Almost every endpoint has an interception script, which enables you to implement custom business logic. For a more general discussion of the extensibility of the Janssen platform, see the Developer Guide .","title":"Behavior of endpoints"},{"location":"admin/planning/customization/#web-content","text":"There are several front channel flows in Auth Server (front channel = web browser): OpenID User Authentication OpenID Consent Post-Authentication UMA Claims Gathering Each of these scripts contains a method which is similar to getPageForStep which fetches the respective Facelets xhtml file for that step. Facelets is very friendly to designers, as it's possible to mix content such as regular HTML with JSF components. Thus Facelets pages can have both static and dynamic content and leverage all your \"normal\" web design tools like CSS and JavaScript. Facelets also supports templates. Each .xhtml page has access to the authentication context, and you can insert data from the respective interception script. Also, each .xhtml page is unique, and has a built in state identifier, preventing Auth Server from responding to any page which it did not render. For more information, see the Developer Guide . Note, in the getPageForStep method, you can have a conditional statement to return different pages based either on the detected or requested language of the subject.","title":"Web content"},{"location":"admin/planning/customization/#error-messages","text":"You can change the descriptions for the various front-channel Auth Server error messages, for example, what would Auth Server return for a bad request to the Authorization Endpoint. Of course you can also customize the web server error messages, like 404, by configuring your web server. Auth Server should never return a stackTrace.","title":"Error messages"},{"location":"admin/planning/customization/#localization-for-openid-connect-client-metadata","text":"Because client information may be displayed via the OpenID protocol, language support is needed at the client level. For example, the client name, description, terms of service URI, or logo may differ based on the end user's language. Section 2.1 of OpenID Connect Client Registration, Metadata Languages and Scripts states: Human-readable Client Metadata values and Client Metadata values that reference human-readable values MAY be represented in multiple languages and scripts. For example, values such as client_name, tos_uri, policy_uri, logo_uri, and client_uri might have multiple locale-specific values in some Client registrations. To specify the languages and scripts, BCP47 language tags are added to Client Metadata member names, delimited by a # character. For example, the value for tos_uri#ja-Hani-JP would direct the subject to the terms of service agreement in Japanese. Janssen does not yet support languages syntax for OpenID user claims, as described in OpenID Core Section 5.2, Claims Languages and Scripts .","title":"Localization for OpenID Connect client metadata"},{"location":"admin/planning/delegated-user-admin/","tags":["administration","planning"],"text":"Delegated user administration is normally implemented via a website where a privileged user can search / add / edit / delete people in their organization. You will not be surprised to hear that this is an identity management use case that Janssen Auth Server does not provide out of the box. But if you wanted to build a web site that performed this function, you could use the SCIM protocol to do so. In your application, you could read the user claims to find out the organization, role, or other information about the person managing data. Then your web application could use this information to make filters when making SCIM calls. Or another handy trick is to put the person's role information in an OAuth access token (using the Update Token script), and then use the SCIM interception script to add the respective filters.","title":"Delegated User Administration"},{"location":"admin/planning/discovery/","tags":["administration","planning","discovery"],"text":"In a federated identity topology, you can authenticate a person by redirecting their browser to the correct IDP. But what happens when there is more then one IDP? Before the person authenticates, how do you know to which IDP to send them? This challenge is called \"discovery\", \"where are you from\", or \"WAYF\". There are a few ways to handle discovery. Here are a few: Display a list of logos and enable the end user to pick the IDP. If you ever clicked on a social login button, you've experienced this approach. Use a different URL for each IDP, like https://customer1.saas.com or https://saas.com/customer2 . Based on which URL the person hits, you know where to send them. Prompt the person to enter something identifying, like their email address. You can use this to look up their home IDP. Use contextual information, like network address, geolocation, or browser data. Once you've figured out the person behind the browser, it may make sense to write a cookie so next time, you don't have to bother them. While it's possible to implement a discovery workflow using an Agama script or an Auth Server person authentication interception script, you also write a simple web application, and then redirect to the authorization endpoint with a hint as an extra parameter and a specific acr_values .","title":"Discovery"},{"location":"admin/planning/dns/","tags":["administration","planning","DNS","hostname","TLS","X.509"],"text":"Trust on the Internet is largely derived from TLS. Like it or not, we are highly reliant on making a secure connection from a web browser using X.509 security to ensure that we are connecting to a trusted web server. The cn of that web server certificate is the hostname of the server. There is no guarantee that a two distinct trusted root CA's have not issued duplicate certificates for the same hostname. Thus, if your DNS server is hacked, bad things may ensue. This is not a hypothetical risk. Actual attacks have been implemented by adding entries to a DNS server that look real, but point to the attacker's website. DNS attacks are very difficult for the end-user to detect. For example, https://account.acme.com v. https://accounts.acme.com --both would look ok to a typical end user. So rule number one: PROTECT DNS--the whole integrity of your identity platform is otherwise vulnerable. From a deployment perspective, remember that in most cases the hostname of your IDP points to the HTTP load balancer (unless you have a single VM deployment). In most cases, you will also terminate TLS in the load balancer. The DNS hostname is baked into the protocols. For example, the authorization endpoint may look like this: \"authorization_endpoint\" : \"https://account.acme.com/jans-auth/restv1/authorize\" Note that the hostname is built into the protocol, not just the Web TLS layer. If you were to change the hostname of your web server, your deployment would break, because you would have to update all the configuration data in the IDP that contains the hostname too. And you'd have to regenerate any X.509 certificates. For this reason, you should think carefully about the hostname before you run setup and create the base installation of your Janssen Platform. To change the hostname, we recommend you re-install. If you want to promote your configuration from development to production, you may also need to consider keeping the hostname the same--although be careful you don't hit production by mistake in your testing.","title":"DNS"},{"location":"admin/planning/identity-access-governance/","tags":["administration","planning","IAG","Identity Governance"],"text":"Janssen is not a governance platform, so it does not do any of the following: Role Management # Role Based Access Control (RBAC) is a strategy used by many organizations to authorize access to resources. However, RBAC has a dark side: if roles are used to reference each unique access requirement the number of roles can grow exponentially. In fact, some organizations have more roles than people! This is known as \"role explosion.\" Role Management is an enterprise workforce governance practice which correlates roles across all applications to reduce their number to the lowest common denominator of \"enterprise roles\". Access Certification # The role request and approval processes tend to result in a person accumulating many roles over time. However, because removal of roles no-longer-needed is often overlooked, it's important for organizations to regularly perform access certification campaigns (i.e. \"recertification\" or \"attestation\"). For example, once per year, managers may need to decide if the roles assigned to subordinate employees are still needed. Removal of a non-sensitive role is not an urgent matter. However, certain situations might require faster action, for example if an employee is moved to a different organizational unit with a different manager. The new manager assumes responsibility for the employee's roles, and should execute an ad-hoc recertification process for that specific user. Segregation of Duties # Sometimes an organization should prevent a person from having two roles simultaneously. For example, there could be an account rule that a person can't both sign and approve checks. Or a person can't perform both financial advisory and equity trading. The governance platform may enable organizations to define these Segregation of Duties to prevent such conflicts of interest.","title":"Identity Access Governance"},{"location":"admin/planning/identity-access-governance/#role-management","text":"Role Based Access Control (RBAC) is a strategy used by many organizations to authorize access to resources. However, RBAC has a dark side: if roles are used to reference each unique access requirement the number of roles can grow exponentially. In fact, some organizations have more roles than people! This is known as \"role explosion.\" Role Management is an enterprise workforce governance practice which correlates roles across all applications to reduce their number to the lowest common denominator of \"enterprise roles\".","title":"Role Management"},{"location":"admin/planning/identity-access-governance/#access-certification","text":"The role request and approval processes tend to result in a person accumulating many roles over time. However, because removal of roles no-longer-needed is often overlooked, it's important for organizations to regularly perform access certification campaigns (i.e. \"recertification\" or \"attestation\"). For example, once per year, managers may need to decide if the roles assigned to subordinate employees are still needed. Removal of a non-sensitive role is not an urgent matter. However, certain situations might require faster action, for example if an employee is moved to a different organizational unit with a different manager. The new manager assumes responsibility for the employee's roles, and should execute an ad-hoc recertification process for that specific user.","title":"Access Certification"},{"location":"admin/planning/identity-access-governance/#segregation-of-duties","text":"Sometimes an organization should prevent a person from having two roles simultaneously. For example, there could be an account rule that a person can't both sign and approve checks. Or a person can't perform both financial advisory and equity trading. The governance platform may enable organizations to define these Segregation of Duties to prevent such conflicts of interest.","title":"Segregation of Duties"},{"location":"admin/planning/identity-management/","tags":["administration","planning","IDM","Identity Management","SCIM"],"text":"Identity Management # In Janssen docs, the term Identity Management or \"IDM\" is the process of adding, editing and deleting data in various domain systems. Ideally, identity data would exist in only one place. But this ideal is currently undesirable. For performance, data joins, auditing, and many other reasons (for the foreseeable future) identity data is sprinkled across many systems. So when we update identity data, how do we keep all our infrastructure up-to-date? This task has been the realm of IDM platforms, which enable organizations to define workflows to update identity information, and through the use of \"connectors\", to push this data to all disparate databases. IDM platforms range in size and complexity. An admin could write a Python script to automate adding new users to a domain. Or large enterprises may implement a commercial IDM platform, like Sailpoint or an open source IDM platform like Evolveum Midpoint . Or you might have a human IDM--\"Hey Bob, we hired a new person. Can you add her?\" The Janssen platform does not include an IDM component. Fundamentally, Janssen is a consumer of identity data. One of the most common ways for identity data to make its way to the Janssen database is via the SCIM interface. This is an API that has a /users endpoint, to which an IDM system can send updates. For example, the IDM system may POST to the /users endpoint to add a new user to the Janssen database, or DELETE to the /users endpoint to remove a user. With that said, sometimes organizations might encode IDM business logic in the Janssen platform. This is particularly true for consumer-facing applications. In general, it only works for relatively simple requirements, particularly when the Janssen platform is the authoritative source of identity data. Using the various interception scripts, it's possible to send identity data from the Janssen platform to external systems. For example, let's say an organization has only two silos of identity data: Jans Auth Server and a MongoDB database record. In a case like this, when a person registers through a Person Authn Interception Script or Agama flow, you could call an API which updates the MongoDB database. It's also possible to implement approval workflows using UMA. For example, an API might require an UMA access token (i.e. an RPT token), and obtaining this token may require the consent of two different individuals. But it is worth remembering that the Janssen Platform was not purpose built for IDM, and therefore any implementation for such use cases should be tactical. You may have to build many features yourself. Especially for enterprise workforce applications, you should seriously consider using off-the-shelf software before writing too much code in Janssen.","title":"Identity Management"},{"location":"admin/planning/identity-management/#identity-management","text":"In Janssen docs, the term Identity Management or \"IDM\" is the process of adding, editing and deleting data in various domain systems. Ideally, identity data would exist in only one place. But this ideal is currently undesirable. For performance, data joins, auditing, and many other reasons (for the foreseeable future) identity data is sprinkled across many systems. So when we update identity data, how do we keep all our infrastructure up-to-date? This task has been the realm of IDM platforms, which enable organizations to define workflows to update identity information, and through the use of \"connectors\", to push this data to all disparate databases. IDM platforms range in size and complexity. An admin could write a Python script to automate adding new users to a domain. Or large enterprises may implement a commercial IDM platform, like Sailpoint or an open source IDM platform like Evolveum Midpoint . Or you might have a human IDM--\"Hey Bob, we hired a new person. Can you add her?\" The Janssen platform does not include an IDM component. Fundamentally, Janssen is a consumer of identity data. One of the most common ways for identity data to make its way to the Janssen database is via the SCIM interface. This is an API that has a /users endpoint, to which an IDM system can send updates. For example, the IDM system may POST to the /users endpoint to add a new user to the Janssen database, or DELETE to the /users endpoint to remove a user. With that said, sometimes organizations might encode IDM business logic in the Janssen platform. This is particularly true for consumer-facing applications. In general, it only works for relatively simple requirements, particularly when the Janssen platform is the authoritative source of identity data. Using the various interception scripts, it's possible to send identity data from the Janssen platform to external systems. For example, let's say an organization has only two silos of identity data: Jans Auth Server and a MongoDB database record. In a case like this, when a person registers through a Person Authn Interception Script or Agama flow, you could call an API which updates the MongoDB database. It's also possible to implement approval workflows using UMA. For example, an API might require an UMA access token (i.e. an RPT token), and obtaining this token may require the consent of two different individuals. But it is worth remembering that the Janssen Platform was not purpose built for IDM, and therefore any implementation for such use cases should be tactical. You may have to build many features yourself. Especially for enterprise workforce applications, you should seriously consider using off-the-shelf software before writing too much code in Janssen.","title":"Identity Management"},{"location":"admin/planning/kubernetes/","tags":["administration","planning","kubernetes"],"text":"Overview # This planning guide helps you learn about when to use jans with kubernetes, why to use it, an overview of best practices around it, platforms supported and important tools that can help ease the operations. The When and Why? # Whether to use kubernetes , vm or a cluster of vms depends on answering several key questions some of which are: What's the size of my organization/customer serving base? # Answering this question gives an expected load of authentications per second expected which determines if you are in the threshold of operating a VM for jans. Anything past 50 auths per second points to a cluster setup which is curerntly kuberentes. We do plan to support more cloud native setups soon. Can my organization handle min-hrs of downtime? # This ties to question 1 but even with the best operational automation vm setups restoring/patching a vm will result in downtime. Does my organization function in different regions? # If your organization works in several regions a vm setup is almost immediately ruled out. Does my organization expect to double in growth each year ? or possibly faster? # If your organization or your customer base is growing fast rule out a VM setup. What's the persistence planned to be used in my jans deployment? # If you plan to use LDAP you are almost immediately locked to a VM setup. Our kuberentes deployment supports an LDAP zonal setup only and we generally do not recommend it for a kubernetes setup. Is this an on-premise vs hybrid vs cloud deployment? # This question weighs on the current infrastructure of your organization. Operating on-premis kubernetes setups needs generally more technical resources than operating a cloud setup. Comparing that to a vm setup, operating a vm setup is much easier in on-premise setups. The more the momentum of your org pulls to cloud vs onpremise the more it pulls to kuberetnes vs a vm setup respectively. What's my organizations technical expertise level on kubernetes vs vms? # This determines the amount of investment needed to overcome the learning curve to operate a kubernetes cluster. If your kubernetes technical resources are low and the above questions point to a vm setup you should think about going with a vm setup. If you got conflicting answers above , forexample if the customer size dedicated that you should operate a kubernetes cluster you need to invest in your technical staff. If you are on the borderline invest in your kubernetes technical staff while operating a vm setup and prepare to move in the near future. Does the deployment need to be highly available(HA)? # We recommend using Kubernetes based CN deployments for situations where high availability is a critical factor. Though VM cluster can provide high availability, we do not recommend the HA setup with VMs. Primarily because effort required to upgrade multiple servers and configuring them is much more as compared to a cloud native deployment and it is error-prone. We recommend you follow the CN setup for HA as you will get automatic upgrades, patches with a single helm upgrade command. In general the kubernetes deployment offers an easy deployment strategy with a helm chart and an easy upgrade path but taking the above into account is very important. The Supported Clouds # We support several clouds managed kubernetes solutions but that doesn't mean our setup will not work with other managed kubernetes solutions. In fact, our kubernetes setup is expected to work across almost all managed solutions however those not listed below were not tested. AWS # Below are example diagrams for popular jans setups with AWS. Google # Below are example diagrams for popular jans setups with AWS. Azure # Below are example diagrams for popular jans setups with Azure. Digital Ocean # Below are example diagrams for popular jans setups with DOKS. Local/Hybrid # Rancher # Rancher UI can be deployed to several clouds / multi clouds and also be used to manage local setups. Important tools and tech to consider # Terraform Grafana and Prometheus Helm Pipeline tech such as Jenkins, ansible, cloud build ..etc","title":"Kubernetes"},{"location":"admin/planning/kubernetes/#overview","text":"This planning guide helps you learn about when to use jans with kubernetes, why to use it, an overview of best practices around it, platforms supported and important tools that can help ease the operations.","title":"Overview"},{"location":"admin/planning/kubernetes/#the-when-and-why","text":"Whether to use kubernetes , vm or a cluster of vms depends on answering several key questions some of which are:","title":"The When and Why?"},{"location":"admin/planning/kubernetes/#whats-the-size-of-my-organizationcustomer-serving-base","text":"Answering this question gives an expected load of authentications per second expected which determines if you are in the threshold of operating a VM for jans. Anything past 50 auths per second points to a cluster setup which is curerntly kuberentes. We do plan to support more cloud native setups soon.","title":"What's the size of my organization/customer serving base?"},{"location":"admin/planning/kubernetes/#can-my-organization-handle-min-hrs-of-downtime","text":"This ties to question 1 but even with the best operational automation vm setups restoring/patching a vm will result in downtime.","title":"Can my organization handle  min-hrs of downtime?"},{"location":"admin/planning/kubernetes/#does-my-organization-function-in-different-regions","text":"If your organization works in several regions a vm setup is almost immediately ruled out.","title":"Does my organization function in different regions?"},{"location":"admin/planning/kubernetes/#does-my-organization-expect-to-double-in-growth-each-year-or-possibly-faster","text":"If your organization or your customer base is growing fast rule out a VM setup.","title":"Does my organization expect to double in growth each year ? or possibly faster?"},{"location":"admin/planning/kubernetes/#whats-the-persistence-planned-to-be-used-in-my-jans-deployment","text":"If you plan to use LDAP you are almost immediately locked to a VM setup. Our kuberentes deployment supports an LDAP zonal setup only and we generally do not recommend it for a kubernetes setup.","title":"What's the persistence planned to be used in my jans deployment?"},{"location":"admin/planning/kubernetes/#is-this-an-on-premise-vs-hybrid-vs-cloud-deployment","text":"This question weighs on the current infrastructure of your organization. Operating on-premis kubernetes setups needs generally more technical resources than operating a cloud setup. Comparing that to a vm setup, operating a vm setup is much easier in on-premise setups. The more the momentum of your org pulls to cloud vs onpremise the more it pulls to kuberetnes vs a vm setup respectively.","title":"Is this an on-premise vs hybrid vs cloud deployment?"},{"location":"admin/planning/kubernetes/#whats-my-organizations-technical-expertise-level-on-kubernetes-vs-vms","text":"This determines the amount of investment needed to overcome the learning curve to operate a kubernetes cluster. If your kubernetes technical resources are low and the above questions point to a vm setup you should think about going with a vm setup. If you got conflicting answers above , forexample if the customer size dedicated that you should operate a kubernetes cluster you need to invest in your technical staff. If you are on the borderline invest in your kubernetes technical staff while operating a vm setup and prepare to move in the near future.","title":"What's my organizations technical expertise level on kubernetes vs vms?"},{"location":"admin/planning/kubernetes/#does-the-deployment-need-to-be-highly-availableha","text":"We recommend using Kubernetes based CN deployments for situations where high availability is a critical factor. Though VM cluster can provide high availability, we do not recommend the HA setup with VMs. Primarily because effort required to upgrade multiple servers and configuring them is much more as compared to a cloud native deployment and it is error-prone. We recommend you follow the CN setup for HA as you will get automatic upgrades, patches with a single helm upgrade command. In general the kubernetes deployment offers an easy deployment strategy with a helm chart and an easy upgrade path but taking the above into account is very important.","title":"Does the deployment need to be highly available(HA)?"},{"location":"admin/planning/kubernetes/#the-supported-clouds","text":"We support several clouds managed kubernetes solutions but that doesn't mean our setup will not work with other managed kubernetes solutions. In fact, our kubernetes setup is expected to work across almost all managed solutions however those not listed below were not tested.","title":"The Supported Clouds"},{"location":"admin/planning/kubernetes/#aws","text":"Below are example diagrams for popular jans setups with AWS.","title":"AWS"},{"location":"admin/planning/kubernetes/#google","text":"Below are example diagrams for popular jans setups with AWS.","title":"Google"},{"location":"admin/planning/kubernetes/#azure","text":"Below are example diagrams for popular jans setups with Azure.","title":"Azure"},{"location":"admin/planning/kubernetes/#digital-ocean","text":"Below are example diagrams for popular jans setups with DOKS.","title":"Digital Ocean"},{"location":"admin/planning/kubernetes/#localhybrid","text":"","title":"Local/Hybrid"},{"location":"admin/planning/kubernetes/#rancher","text":"Rancher UI can be deployed to several clouds / multi clouds and also be used to manage local setups.","title":"Rancher"},{"location":"admin/planning/kubernetes/#important-tools-and-tech-to-consider","text":"Terraform Grafana and Prometheus Helm Pipeline tech such as Jenkins, ansible, cloud build ..etc","title":"Important tools and tech to consider"},{"location":"admin/planning/load-balancers/","tags":["administration","planning","load balancer","nginx","apache HTTPD","istio"],"text":"Janssen Auth Server is stateless, so you can spool up as many instances as your load requires. But as there is only one hostname, you need a way to distribute the requests. Typically, this is where a load balancer comes in. The load balancer also terminates the SSL connection, which offloads the cryptographic compute from the application. In cloud native jargon, load balancing is called HTTP Ingress. In your load balancer configuration, you can use any routing algorithm. There is no need for \"sticky sessions\", or whatever the load balancer you are using calls that. For example, it's ok to use even round robin. Although modern HTTP ingress controllers enable some very flexibility routing options to do A/B testing and zero downtime updates. As Janssen Auth Server doesn't really care what load balancer you use, some options you might want to consider are: Apache HTTPD nginx istio f5 Amazon Elastic Load Balancing Google Cloud Load Balancing","title":"Load Balancers"},{"location":"admin/planning/machine-to-machine/","tags":["administration","planning"],"text":"OAuth gives us a perfect infrastructure for one machine (i.e. software) to authenticate itself while calling an API of another machine: the Client Credential Grant . The software receiving the token can validate the access token signature, or if it's a reference token, can use OAuth Introspection . For extra security, the software in question can also use mutual TLS to authenticate. The OAuth Authorization Server can also send extra security context, like scopes (which typically communicate the extent of access), or other information about the software vendor or characteristics. Of course this requires the devices in this machine-to-machine scenario to have a tcp stack (some constrained IOT devices only have a UDP stack).","title":"Machine-to-Machine Authentication"},{"location":"admin/planning/multi-tenancy/","tags":["administration","planning","multitenancy"],"text":"Multitenancy is a software architecture where several distinct customers can utilize a single software instance. For a federated identity platform, this presents a number of challenges: Privacy: Customers must only see their own user information and data Trust: Customers trust a distinct set of RP's Authorization: Customers have specific police requirements UX: Customers brand all user-facing web pages and messages Logs: Customers see only their own log Custom Business Logic: Customers have special rules, for example to authenticate users, register clients, or issue access tokens. Cryptographic Keys: Customers have their own keys URLs: Customers host the IDP using their own domain name Quality of Service: Customers control response time and concurrency Access: Customers can access systems and data directly One key decision to make with regard to multitenancy is which systems to share. You could share nothing, which lowers deployment complexity but increases operational complexity. Or you could share everything, which is easier to operate, saves money on hardware, but requires a lot more code. Or you could land somewhere between--share some systems, but not others. If you want to address all the challenges of multitenancy, then a \"shared nothing\" approach makes the most sense. And with advances in cloud native deployment, gitops, and configuration as code, you can approach the cost savings of \"shared everything\" multitenancy today, especially if you leverage serverless, just in time auto-scaling. However, you will need some cloud natiuve devops gurus to pull this off. If having one top level domain is acceptable, it is possible to add a tenant_id property to each entity (for example, client and person entities). Auth Server and SCIM interceptions scripts enable you to filter results by adding this tenant_id to queries behind the scenes. For example, you could also render different login pages by using default_acr_values for clients. It's possible in the future Jansen Project will implement some kind of support to bundle a multitenancy approach that captures some of the properties described above at the code level, but for the time being, it is not a priority.","title":"Multi-tenancy"},{"location":"admin/planning/passwordless-auth/","tags":["administration","planning"],"text":"Auth Server is not proscriptive about how an organization authenticates a person. If you want to avoid passwords, that's great. Everyone knows passwords are terrible. Modern authentication flows use a series of web pages to mitigate sufficient risk, enabling them to issue an assertion about the subject's identity. In order to perform authentication, identification is a given. This implies that all authentication flows normally start with the subject asserting some kind of identifier: username, email address, phone number, or any other identifier that uniquely identifies a person. Auth Server is not opinionated about how you do this. You could prompt the user to enter their identifier. Or for example, you could ask the user to scan a QR code, and identify a phone identified with a person. With identification done, Auth Server can present any number of additional web pages to establish that identity. These pages can ask for any \"factors\". For example, if you want to perform two factor authentication in one step, you could use a FIDO 2 credential, which combines possession with either knowledge or biometric. But in practice, you could ask for any one or more combination of credentials--none of which must include password. Net-net, \"passwordless\" is really just marketing jargon. Normally it implies some kind of risk assessment to optimize user experience. If you can imagine any such authentication flow, you can implement it in Auth Server.","title":"Passwordless Authentication"},{"location":"admin/planning/persistence/","tags":["administration","planning","persistence","LDAP","MySQL","Couchbase","Aurora","Spanner","Postgres","database"],"text":"The performance of the web tier is derived from the performance of the persistence tier. While memory-caching short lived entities to reduce persistence is an option, there are still long lived objects that need to be written to the disk. Picking the right database has a huge impact on the operational burden of a digital identity infrastructure. All database administration requires some black art--every platform has some secret knobs and levers that are critical to tuning, availability and rapid diagnosis. So beyond the performance requirements that determine the right choice for a database, you also need to consider operational concerns. Janssen's strategy is to provide optionality for persistence. There is no one size fits all solution for databases. The following section will detail some of the pros and cons of the various databases we currently support. OpenDJ (LDAP) Janssen supports Gluu's distribution of OpenDJ, and probably any other similar distributions like ForgeRock OpenDJ, Ping Directory Server, or Oracle Unified Directory. LDAP in general and OpenDJ in particular have been successfully backing authentication service for more then 20 years. People tend to think of the LDAP tree structure as fast for reads, and slow for writes. That's just not true anymore--OpenDJ is able to perform quite well for write operations as well. OpenDJ has mature replication support, excellent command line tools for administration, and excellent stability. The main disadvantage of OpenDJ is scaling large datasets for high concurrency. While you can get around this shortcoming with a global LDAP proxy, such a topology gets complicated and costly to operate, as you have to break up the data and configure multiple replicated topologies. As a rule of thumb, if concurrency of more then 120 OpenID code flow authentications per second are needed, you should consider another database. But for concurrency less then this, OpenDJ is an excellent choice. MySQL You know it... you love it. That's the biggest advantage. Performance is great out of the box. But if you have high concurrency, you'll have to figure out a plan for replication, and horizontal scaling. Postgres Same as MySQL above, but there are some great commercial distributions of Postgres like EnterpriseDB . Couchbase A JSON NoSQL database that supports automatic distribution of data for auto-scaling multi-region sharded cloud native deployments. Janssen only supports the commercial distribution--but the previously mentioned database properties are enterprise class. If you need to host your own database, and you need infinite horizontal scalability, Couchbase should be your goto choice. Aurora So you want MySQL, but you want Amazon to handle some of the care and feeding? Aurora enables you to consume database as a cloud service. Scalability is excellent and multi-region deployments are possible . The main catch is that write operations are limited to one region, with the ability failover to another region. But to accomplish this, you need a cloud engineer to implement it. Spanner Google's multi-region cloud database as a service, Spanner was purpose built for auto-scaling, multi-region persistence. It has it's own API, although recently Google added support for MySQL and Postgres drivers. MariaDB Coming soon! Similar to MySQL but more cutting edge.","title":"Persistence"},{"location":"admin/planning/platform-goal/","tags":["administration","planning","platform-goals"],"text":"Project Goals # Online trust is a fundamental challenge to our digital society. The Internet has connected us. But at the same time, it has undermined trust. Digital identity starts with a connection between a person and a digital device. Identity software conveys the integrity of that connection from the user\u2019s device to a complex web of backend services. Solving the challenge of digital identity is foundational to achieving trustworthy online security. Nothing builds trust like source code. At the Janssen Project, we believe that the software that powers the world's digital identity services must be open source. And that the open source project behind digital identity must be community governed. And that the community must have a mechanism to extend the software to solve any digital identity challenge. Functional Goals # Janssen focuses on open standards for run-time digital identity, specifically federated digital identity protocols such as OpenID Connect and modern client-side passwordless authentication like FIDO. The project may take on new digital identity standards as they are invented. Organizations can make Janssen authoritative for identity, or can configure Janssen as a consumer of identity. Janssen is not designed to act as a workforce identity management or identity governance platform. Security Goals # Janssen project seeks to tack the most challenging security requirements. This means keeping current with OpenID certifications, enabling cryptographic conformance with FIPS 140-2 and implementing best practices for software development lifecycle, including a transparent build process to enable government and non-government organizations to trust the software. Janssen Project is unapologetically Java. The reason is simple: Java has the most cryptographic implementations. Java Cryptographic Engines (JCE) are written by many companies and open source projects. It takes a long time to trust a cryptographic implementation. Not only does Java have the most options for cryptography, it also has some of the most trusted implementations, and when new algorithms are announced, it frequently has code first. Community Goals # Open source gives you the freedom to modify the code. But having your own fork of the code might make it hard to upgrade--you'll have to merge changes. Janssen provides standard interfaces that make it possible to implement custom business logic in an upgrade-friendly manner. Janssen is also the home of the Agama programming language--the world's first code specifically designed to enable developers to write secure web authentication workflows. By lowering the bar for customization, Janssen seeks to expand the community of developers and content creators far and wide. Deployment goals # Developers should have distributions to enable rapid testing for non-production instances. Linux system administrators should have packages for easy installation and update for smaller deployments. Cloud native deployments should be available for high end deployments, including high concurrency and high availability. Janssen should take advantage of auto-scaling horizontally--enabling hypothetically any concurrency by adding more compute and memory.","title":"Platform Goal"},{"location":"admin/planning/platform-goal/#project-goals","text":"Online trust is a fundamental challenge to our digital society. The Internet has connected us. But at the same time, it has undermined trust. Digital identity starts with a connection between a person and a digital device. Identity software conveys the integrity of that connection from the user\u2019s device to a complex web of backend services. Solving the challenge of digital identity is foundational to achieving trustworthy online security. Nothing builds trust like source code. At the Janssen Project, we believe that the software that powers the world's digital identity services must be open source. And that the open source project behind digital identity must be community governed. And that the community must have a mechanism to extend the software to solve any digital identity challenge.","title":"Project Goals"},{"location":"admin/planning/platform-goal/#functional-goals","text":"Janssen focuses on open standards for run-time digital identity, specifically federated digital identity protocols such as OpenID Connect and modern client-side passwordless authentication like FIDO. The project may take on new digital identity standards as they are invented. Organizations can make Janssen authoritative for identity, or can configure Janssen as a consumer of identity. Janssen is not designed to act as a workforce identity management or identity governance platform.","title":"Functional Goals"},{"location":"admin/planning/platform-goal/#security-goals","text":"Janssen project seeks to tack the most challenging security requirements. This means keeping current with OpenID certifications, enabling cryptographic conformance with FIPS 140-2 and implementing best practices for software development lifecycle, including a transparent build process to enable government and non-government organizations to trust the software. Janssen Project is unapologetically Java. The reason is simple: Java has the most cryptographic implementations. Java Cryptographic Engines (JCE) are written by many companies and open source projects. It takes a long time to trust a cryptographic implementation. Not only does Java have the most options for cryptography, it also has some of the most trusted implementations, and when new algorithms are announced, it frequently has code first.","title":"Security Goals"},{"location":"admin/planning/platform-goal/#community-goals","text":"Open source gives you the freedom to modify the code. But having your own fork of the code might make it hard to upgrade--you'll have to merge changes. Janssen provides standard interfaces that make it possible to implement custom business logic in an upgrade-friendly manner. Janssen is also the home of the Agama programming language--the world's first code specifically designed to enable developers to write secure web authentication workflows. By lowering the bar for customization, Janssen seeks to expand the community of developers and content creators far and wide.","title":"Community Goals"},{"location":"admin/planning/platform-goal/#deployment-goals","text":"Developers should have distributions to enable rapid testing for non-production instances. Linux system administrators should have packages for easy installation and update for smaller deployments. Cloud native deployments should be available for high end deployments, including high concurrency and high availability. Janssen should take advantage of auto-scaling horizontally--enabling hypothetically any concurrency by adding more compute and memory.","title":"Deployment goals"},{"location":"admin/planning/role-based-access-management/","tags":["administration","planning","RBAC","Role"],"text":"Using roles to control access to resources makes sense for lots of security use cases. One benefit of RBAC is that it's deterministic-- from an audit perspective, you can tell who had access to what at any point in time. This is harder to achieve when contextual variables play a role in determining access. An OpenID Provider / OAuth Authorization Server like Jans Auth Server certainly has a role to play in the implementation of an RBAC infrastructure, but is not capable of delivering all the functionality your organization will need for a complete solution. For example, you may need a platform to define enterprise roles or to perform role consolidation. This is normally handled by an identity governance tool. Also, Jans Auth Server is not a policy management platform, like * Styra OPA , OSO * Zanzibar , or * Hashicorp Boundary or * Apache Fortress The tools above are just a few open source policy management frameworks. There are more commercial products in this space. Although Jans Auth Server may not be a complete RBAC solution, there are still some RBAC capabilities to consider. When a person authenticates using a web browser, the client can obtain user claims via OpenID Connect. It may make sense to send the role role claim to the client. You may also send the memberOf claim, if your organization uses group membership to manage roles. But what if you need to dynamically compute roles? Or if you don't want to over-share by sending all the roles and groups associated for a person? One strategy is to use the Jans Auth Server Update Token Interception script to render the role claim, either in the OAuth access token, the id_token or the Userinfo JWT.","title":"Role Based Access Management"},{"location":"admin/planning/security-best-practices/","tags":["administration","planning","security","recommendations"],"text":"Janssen Project distributions are designed to be easy to deploy. Its default security settings may not be strict enough for certain organizations or use cases. This document highlights important security controls and offers best practices for increasing security related to your deployment. Scripts # Make sure only required scripts are enabled. It's extremely important to disable any person authentication or other scripts not in use. Keys # Use RSA keys with a minimum strength of 2048 bits and Elliptic Curve keys with a minimum of 160 bits. Also, check the key rotation policy of your Auth Server. This differs based on your deployment model. A single server can handle key rotation locally, but if you have deployed a cluster, you must manage key rotation centrally. Admin Web Services # Make sure SCIM and the config API are not Internet facing. If you do expose SCIM, you should network restrict access as much as possible. Although SCIM is protected via OAuth or UMA access tokens, because a breach of SCIM would undermine the integrity of authentications, a multi-layer security approach is warranted. There is no use case for an Internet facing Config API--you should tightly control access to this service. Make sure no services are listening on external interfaces except for those that are absolutely required-- tcp/443 for the OpenID and FIDO endpoints. On Linux servers, a list of current listeners can be obtained with netstat -nlpt (for TCP) and netstat -nlpu (for UDP). In particular, make sure the internal databases used by Gluu to store all its configuration are not Internet facing. OpenID # Review the OAuth 2.0 Security Best Current Practice IETF draft. Don't use the implicit flow. In the implicit flow, the client is not authenticated, and a token is returned from the Authorization endpoint. If the response_type in your OpenID Authentication contains token , you are using the implicit flow. Section 2.1.2 of the current OAuth Security Best Practices OAuth working group draft specifically warns against using the implicit flow. If you must use the implicit flow, Review the CORS filter configuration for Jans Auth Server. CORS restricts access to trusted domains to execute browser application requests to Auth Server endpoints. By default, the filter allows any RP to call OpenID endpoints. Review Auth Server propoerties chosen for sessionIdUnusedLifetime and sessionIdLifetime . Long sessions present higher risks of session hijacking and unauthorized access from shared devices. OAuth Client Security # The table below summarizes the default values for dynamically registered clients. Attribute Default Value applicationType web subjectType public idTokenSignedResponseAlg RS512 userInfoSignedResponseAlg RS512 userInfoEncryptedResponseAlg RSA-OAEP userInfoEncryptedResponseEnc RSA-OAEP accessTokenLifetime 3600 Consider whether support of OpenID Connect Dynamic Client Registration extension is required. If not, disable it by setting dynamicRegistrationEnabled to False . If Dynamic Client Registration is enabled, consider using software statements , and writing a Client Registration interception script to implement extra rules for software statement validation. Check the list of scopes to quickly assess which scopes the clients can potentially add to their registration entry without consent of OP's administrator. Make sure sensitive scopes are dynamicRegistrationScopesParamEnabled set to False. The Auth Server property dynamicRegistrationScopesParamEnabled controls whether default scopes are globally enabled; scopes defined as default will be automatically added to any dynamically registered client entry. For client authentication at the token endpoint, move away from shared secrets-- use either private key authentication or MTLS . A client secret is basically a password for your software application. Utilize asymmetric client authentication. Make sure your OpenID client applications check the state value, and verify that it is the same state posted in the original request. This is necessary to prevent Cross Site Request Forgery (CSRF). Also make sure that clients use a non-static value for state (i.e. a one time non-guessable value). You can also verify the state in the s_hash claim of the id_token in the authentication response. This may sound obvious, but make sure your clients verify the signature of the id_token. The location of the current public keys of the OpenID Provider can be found in the configuration endpoint ( jwks_uri ). It is also recommended that clients implement a unique redirect_uri per OP. This may also sound obvious, but make sure you trust the OpenID Connect client software library that your developers are using to authenticate users. Also make sure OpenID Connect client libraries are updated expeditiously. Suggest to web developers that they read the OpenID Connect Basic Client Implementer's Guide , which provides a more reader-friendly narrative for how to use the OpenID code flow--the main flow for relying parties. Client developers should consider using a Request Object JWT, which prevents hackers from tampering with the request parameters. Request objects can mitigate the Malicious Endpoint Attack and the IDP confusion attack. Mobile developers should read RFC 8252 OAuth 2.0 for Native Apps and follow the recommendations there. It's really important not to store any client secret or private key in the application, because hackers can decompile applications to extract these secrets. That's why RFC 8252 recommends using PKCE to prevent Authorization Code Interception Attack, and use a SHA256 as the code challenge method. Use App Auth if possible for Android , iOS , or JavaScript . If additional client security is needed, consider using the FAPI profile of OpenID Connect, which adds additional signing, encryption and security mitigations. UMA # The UMA protocol enables post-authentication authorization flows. Consider the following system-level properties: umaGrantAccessIfNoPolicies allows access to a resource even if no policies are defined for the related scopes; though it simplifies initial testing, we recommend disabling this feature in production setups umaRestrictResourceToAssociatedClient won't allow any other client except the one which registered the resource initially to acquire a RPT for it; it's recommended to have it enabled for production setups","title":"Security Best Practices"},{"location":"admin/planning/security-best-practices/#scripts","text":"Make sure only required scripts are enabled. It's extremely important to disable any person authentication or other scripts not in use.","title":"Scripts"},{"location":"admin/planning/security-best-practices/#keys","text":"Use RSA keys with a minimum strength of 2048 bits and Elliptic Curve keys with a minimum of 160 bits. Also, check the key rotation policy of your Auth Server. This differs based on your deployment model. A single server can handle key rotation locally, but if you have deployed a cluster, you must manage key rotation centrally.","title":"Keys"},{"location":"admin/planning/security-best-practices/#admin-web-services","text":"Make sure SCIM and the config API are not Internet facing. If you do expose SCIM, you should network restrict access as much as possible. Although SCIM is protected via OAuth or UMA access tokens, because a breach of SCIM would undermine the integrity of authentications, a multi-layer security approach is warranted. There is no use case for an Internet facing Config API--you should tightly control access to this service. Make sure no services are listening on external interfaces except for those that are absolutely required-- tcp/443 for the OpenID and FIDO endpoints. On Linux servers, a list of current listeners can be obtained with netstat -nlpt (for TCP) and netstat -nlpu (for UDP). In particular, make sure the internal databases used by Gluu to store all its configuration are not Internet facing.","title":"Admin Web Services"},{"location":"admin/planning/security-best-practices/#openid","text":"Review the OAuth 2.0 Security Best Current Practice IETF draft. Don't use the implicit flow. In the implicit flow, the client is not authenticated, and a token is returned from the Authorization endpoint. If the response_type in your OpenID Authentication contains token , you are using the implicit flow. Section 2.1.2 of the current OAuth Security Best Practices OAuth working group draft specifically warns against using the implicit flow. If you must use the implicit flow, Review the CORS filter configuration for Jans Auth Server. CORS restricts access to trusted domains to execute browser application requests to Auth Server endpoints. By default, the filter allows any RP to call OpenID endpoints. Review Auth Server propoerties chosen for sessionIdUnusedLifetime and sessionIdLifetime . Long sessions present higher risks of session hijacking and unauthorized access from shared devices.","title":"OpenID"},{"location":"admin/planning/security-best-practices/#oauth-client-security","text":"The table below summarizes the default values for dynamically registered clients. Attribute Default Value applicationType web subjectType public idTokenSignedResponseAlg RS512 userInfoSignedResponseAlg RS512 userInfoEncryptedResponseAlg RSA-OAEP userInfoEncryptedResponseEnc RSA-OAEP accessTokenLifetime 3600 Consider whether support of OpenID Connect Dynamic Client Registration extension is required. If not, disable it by setting dynamicRegistrationEnabled to False . If Dynamic Client Registration is enabled, consider using software statements , and writing a Client Registration interception script to implement extra rules for software statement validation. Check the list of scopes to quickly assess which scopes the clients can potentially add to their registration entry without consent of OP's administrator. Make sure sensitive scopes are dynamicRegistrationScopesParamEnabled set to False. The Auth Server property dynamicRegistrationScopesParamEnabled controls whether default scopes are globally enabled; scopes defined as default will be automatically added to any dynamically registered client entry. For client authentication at the token endpoint, move away from shared secrets-- use either private key authentication or MTLS . A client secret is basically a password for your software application. Utilize asymmetric client authentication. Make sure your OpenID client applications check the state value, and verify that it is the same state posted in the original request. This is necessary to prevent Cross Site Request Forgery (CSRF). Also make sure that clients use a non-static value for state (i.e. a one time non-guessable value). You can also verify the state in the s_hash claim of the id_token in the authentication response. This may sound obvious, but make sure your clients verify the signature of the id_token. The location of the current public keys of the OpenID Provider can be found in the configuration endpoint ( jwks_uri ). It is also recommended that clients implement a unique redirect_uri per OP. This may also sound obvious, but make sure you trust the OpenID Connect client software library that your developers are using to authenticate users. Also make sure OpenID Connect client libraries are updated expeditiously. Suggest to web developers that they read the OpenID Connect Basic Client Implementer's Guide , which provides a more reader-friendly narrative for how to use the OpenID code flow--the main flow for relying parties. Client developers should consider using a Request Object JWT, which prevents hackers from tampering with the request parameters. Request objects can mitigate the Malicious Endpoint Attack and the IDP confusion attack. Mobile developers should read RFC 8252 OAuth 2.0 for Native Apps and follow the recommendations there. It's really important not to store any client secret or private key in the application, because hackers can decompile applications to extract these secrets. That's why RFC 8252 recommends using PKCE to prevent Authorization Code Interception Attack, and use a SHA256 as the code challenge method. Use App Auth if possible for Android , iOS , or JavaScript . If additional client security is needed, consider using the FAPI profile of OpenID Connect, which adds additional signing, encryption and security mitigations.","title":"OAuth Client Security"},{"location":"admin/planning/security-best-practices/#uma","text":"The UMA protocol enables post-authentication authorization flows. Consider the following system-level properties: umaGrantAccessIfNoPolicies allows access to a resource even if no policies are defined for the related scopes; though it simplifies initial testing, we recommend disabling this feature in production setups umaRestrictResourceToAssociatedClient won't allow any other client except the one which registered the resource initially to acquire a RPT for it; it's recommended to have it enabled for production setups","title":"UMA"},{"location":"admin/planning/self-service-password-2fa/","tags":["administration","planning","2FA","self-service","Account Recovery"],"text":"If your domain offers two-factor authentication, it's a good idea to enable end users to manage their various credentials. Google does a great job in this regard. Check out 2-Step Verification . What's great about this page is that Google lets you manage all your different credentials on one page. You can build a page like Google on your own website. You need to be able to list, add, and remove 2FA credentials for a given user's account. But another good option is the Casa web application, which is an open source project from Gluu, licensed under Apache 2.0. Casa supports a number of authentication mechanism that are already available in Jans Auth Server. See the Casa Receipe and the Casa Person Authn Script for more information.","title":"Self-Service Password/2FA Portal"},{"location":"admin/planning/stepped-up-auth/","tags":["administration","planning","stepped-up authentication"],"text":"The holy grail of security policies since the introduction of RSA OTP tokens, stepped-up authentication is when the subject is presented with an additional authentication requirement, usually in response to perceived risk. As Jans How do you decide when to invoke stepped-up authentication? As Auth Server is not a policy enforcement point, or a policy management system, these two aspects are out of scope. But once you make a runtime decision that you need more evidence of identity, the OpenID Connect Authentication Request has a few features that can help you out. The first is prompt=login . This is a hint from the Relying Party to the OpenID Provider that re-authentication is needed. Not all OpenID Connect providers support this feature (for example, Google does not). However Auth Server does currently support this parameter, although there is a feature request to make it optional. The second is acr_values . In Auth Server, this provides a hint to the Auth Server to invoke a specific Person Authentication interception script. Typically, this would specify your workflow for additional authentication. If you are using Agama, you can also provide a hint for which Agama flow to invoke by adding __. Another more esoteric strategy is to use UMA claims gathering. In this flow, the subject's browser is directed to the claims gathering endpoint (i.e. front channel), at which point the claims gathering script could invoke an OpenID authentication, using the prompt and acr_values parameters mentioned above. If you want to see an example of how a client implements stepped-up authentication, you should checkout this mod_auth_openidc wiki page .","title":"Stepped-up Authentication"},{"location":"admin/planning/timeout-management/","tags":["administration","planning","timeout"],"text":"Warning: business expectations regarding timeouts may drive you crazy. There are several timeout values in Janssen Auth Server. And web application and mobile apps may have their own timeout thresholds. The holy grail of timeouts is when everything times out at the same time--IDP and applications. This is rarely attainable. Normally the application needs to handle gracefully the case when the IDP session expires first. And if the application session expires first, it may need to trigger a logout event at the OpenID Provider. Below is a list of some of the Auth Server configuration properties for timeouts that you should consider: sessionIdLifetime : serverSessionIdLifetime : sessionIdUnusedLifetime : sessionIdUnauthenticatedUnusedLifetime : spontaneousScopeLifetime : refreshTokenLifetime : idTokenLifetime : accessTokenLifetime : cleanServiceInterval : dynamicRegistrationExpirationTime : refreshTokenExtendLifetimeOnRotation : CIBA, UMA and Device Flow : have their own specific timeouts.","title":"Timeout Management"},{"location":"admin/planning/use-cases/","tags":["administration","planning","use-cases","architecture"],"text":"Browser Single Sign-On (B-SS0) # Web browser SSO is one of the main use cases for Janssen. The OpenID Connect interfaces of the Auth Server provide the identity layer that manages authentication and B-SSO. Auth Server tracks web browser sessions via a cookie. An end user may actually have several active sessions, although only one session is active. For example, below is a hypothetical session cookie: session_id: c691e83d-eb1b-41f0-b453-fab905681b5b current_sessions: [\"de510ab6-b06c-4393-86d8-12a7c501aafe\", \"c691e83d-eb1b-41f0-b453-fab905681b5b\"] To switch sessions, an RP can redirect to the Jans Auth Server OpenID Connect Provider authorization endpoint with the parameters prompt=select_account . Native Single Sign-On (N-SS0) # On most mobile platforms, mobile apps signed by the same vendor certs can share information via the system \"keychain\" (Account Manager on Android). OpenID Mobile SSO specifies a new scope, extends the token endpoint and profiles the OAuth2 Token Exchange spec allowing mobile apps to share identity between apps produced and signed by the same vendor (i.e. signed with the same vendor certificate). Single Logout (SLO) # The bane of identity engineers everywhere, Auth Server does offer some endpoints that enable SLO. Janssen Auth Server implements Back-Channel Logout and Session Management . But the most commonly used strategy is Front-Channel Logout . This works by displaying a web page with numerous iFrames, each with the respective logout URL for each application. The reason SLO is so hard is that logout is inherently an asynchronous use case. When you need a bunch of websites to receive a notification, some of those notifications may fail. Ideally, you'd replay messages that aren't received. But end users want a fast logout response, and don't want to wait for all the applications to confirm they received and acted on the notification. So making logout synchronous is a round-hole / square peg situation. But with that said, Auth Server supports it. API Access Management # Janssen Auth Server is frequently used to issue access tokens to authenticate software clients that needs to call an API. The OAuth WG has published many useful specifications about how to do this securely, and Janssen implements many of these RFCs and drafts. In OAuth parlance, Jans Auth Server is the Authorization Server; and Jans Client API is a service that helps clients with advanced features like MTLS and private key authentication. As OAuth scopes are frequently used to control the extent of access of clients, many domains are using Jans Auth Server to dynamically render scopes based on the identity of the client, or the security context. The Jans Auth Server also implements OAuth and OpenID client registration API. Finally, Jans Auth Server publishes an SSA endpoint, for OAuth software statement assertions which enables trusted services to request an SSA that specifies what type of clients can register. All of these features mean that Jans Auth Server is an essential tool as part of your API access management infrastructure. Multifactor Authentication # OpenID Connect is a web identity layer. Auth Server displays and processes a series of web pages to authenticate a person, and then shares user claims with the applications that requested them. Out of the box, Auth Server supports many MFA workflows, including FIDO, passkeys, OATH OTP (HOTP, TOTP), SMS (via Twilio or SMPP) and many more. But you're not limited to the MFA that comes out of the box. Using Person Authentication Scripts, you can implement any authentication workflow which you can imagine. You can also use the Janssen Project's Agama programming language to implement multi-step authenticaiton workflows. Mobile Authentication # One of the initial requirements for OpenID was to support mobile apps (because SAML is terrible for mobile apps). OpenID and OAuth have developed several mitigations that make mobile authentication more secure, which are desribed in RFC 8252 . However, due to the complexity of cookie sharing between the mobile phone browser SDK, and the mobile browser (assuming you are using the system browser), your results may vary if you actually want SSO. Recently, OpenID has published a new specification draft for Native SSO for Mobile Apps , which is on the roadmap . There are some other hacky ways you can implement mobile authentication, for example, using the OAuth password grant--but this is possible only for first party applications, and is generally discouraged, because there is no way to securely store a client secret in the mobile application, which hackers can easily decompile. Open Banking # You'll notice that the Gluu Open Banking Identity Platform is certified for Financial-grade API (FAPI) 1.0 Final--this is Gluu's distribution of Janssen Auth Server profiled for banking. If you want to implement an OP for open banking, Jans Auth Server is one of the few comprehensive open source platforms that will enable you to do so. Social Sign-in # This could really be covered under the MFA section. But it's not uncommon that as part of an authentication workflow, Auth Server may redirect you to an external identity provider, which then sends you back to Auth Server with some kind of reference id or assertion. Out of the box, Jans supports the top three social sites: Google, Apple, Facebook (which account for 80% of social login). But of course you can implement any social login using an Agama project. Registration # It's not that uncommon that an authentication workflow is used to create an account for a person in an identity provider. In fact, it's so common, that the OpenID working group recently created a spec to standardize a parameter in the authentication request to signal to the OpenID Provider that this is what's happening: prompt=create . As we're just displaying a series of web pages, we can display a registration form, process the form (with some kind of remote identity proofing?), send email, SMS, Telegram messages or whatever. Also, frequently social login is tied to registration--the first time you login with an external IDP, Auth Server creates an account of the fly with the user claims sent by the remote IDP. Authorization # Frequently people conflate the identity layer with the authorization layer. RBAC is still an important security paradigm. So it makes sense to people that the place where you store information about a person's roles, is where you define policies about what resources a role can access (i.e. policies). Recently, centralized authorization has had an active resurgence. Companies like Styra , Oso , and HashiCorp have introduced innovative centralized authorization software. These systems, acting as a \"policy decision point\", enable you to define policies, and can evaluate these policies at runtime. Note: they rely on \"policy enforcement points\" to call their endpoints, supplying the data which is input to policies. With that said, there are places in Auth Server that you can define or impact authorization (besides user claims). In particular, OAuth scopes are used to convey the extent of access in an access token, that when presented to an API by a software client, enables access control. However, scope is still input to policy, and may in fact be just one more piece of data considered by a policy decision point. And one more caveat... the \"authorization\" in an OAuth \"authorization server\", was originally meant to convey the authorization of the person who was trying to access something. Whether a person consented to share information, or grant a client the ability to act on their behalf, is another important consideration. So does \"Auth Server\" provide authorization? It depends! Consent Gathering # Through the \"front channel\" (i.e. the browser), Auth Server can interact with a person by displaying web pages. OpenID Connect and OAuth scopes trigger the authorization phase (after authentication). By default, the scopes requested by the client and their respective descriptions are displayed for approval. However, like all pages in Auth Server, these pages can be customized to meet your exact requirements. Auth Server also implements the User Managed Access Protocol (\"UMA\"). This profile of OAuth2 enables consent to be sought from a person even after the initial authentication has taken place. This phase is also called \"claims gathering\", but one of the claims could be whether a person consents to something. Note: Authorizations are stored relative to a person's entity in the database. How a person views and revokes consent is outside the scope of Auth Server. To view a person's consents, you need to use the config API, as this information is not shared via OpenID Connect or SCIM.","title":"Use Cases"},{"location":"admin/planning/use-cases/#browser-single-sign-on-b-ss0","text":"Web browser SSO is one of the main use cases for Janssen. The OpenID Connect interfaces of the Auth Server provide the identity layer that manages authentication and B-SSO. Auth Server tracks web browser sessions via a cookie. An end user may actually have several active sessions, although only one session is active. For example, below is a hypothetical session cookie: session_id: c691e83d-eb1b-41f0-b453-fab905681b5b current_sessions: [\"de510ab6-b06c-4393-86d8-12a7c501aafe\", \"c691e83d-eb1b-41f0-b453-fab905681b5b\"] To switch sessions, an RP can redirect to the Jans Auth Server OpenID Connect Provider authorization endpoint with the parameters prompt=select_account .","title":"Browser Single Sign-On (B-SS0)"},{"location":"admin/planning/use-cases/#native-single-sign-on-n-ss0","text":"On most mobile platforms, mobile apps signed by the same vendor certs can share information via the system \"keychain\" (Account Manager on Android). OpenID Mobile SSO specifies a new scope, extends the token endpoint and profiles the OAuth2 Token Exchange spec allowing mobile apps to share identity between apps produced and signed by the same vendor (i.e. signed with the same vendor certificate).","title":"Native Single Sign-On (N-SS0)"},{"location":"admin/planning/use-cases/#single-logout-slo","text":"The bane of identity engineers everywhere, Auth Server does offer some endpoints that enable SLO. Janssen Auth Server implements Back-Channel Logout and Session Management . But the most commonly used strategy is Front-Channel Logout . This works by displaying a web page with numerous iFrames, each with the respective logout URL for each application. The reason SLO is so hard is that logout is inherently an asynchronous use case. When you need a bunch of websites to receive a notification, some of those notifications may fail. Ideally, you'd replay messages that aren't received. But end users want a fast logout response, and don't want to wait for all the applications to confirm they received and acted on the notification. So making logout synchronous is a round-hole / square peg situation. But with that said, Auth Server supports it.","title":"Single Logout (SLO)"},{"location":"admin/planning/use-cases/#api-access-management","text":"Janssen Auth Server is frequently used to issue access tokens to authenticate software clients that needs to call an API. The OAuth WG has published many useful specifications about how to do this securely, and Janssen implements many of these RFCs and drafts. In OAuth parlance, Jans Auth Server is the Authorization Server; and Jans Client API is a service that helps clients with advanced features like MTLS and private key authentication. As OAuth scopes are frequently used to control the extent of access of clients, many domains are using Jans Auth Server to dynamically render scopes based on the identity of the client, or the security context. The Jans Auth Server also implements OAuth and OpenID client registration API. Finally, Jans Auth Server publishes an SSA endpoint, for OAuth software statement assertions which enables trusted services to request an SSA that specifies what type of clients can register. All of these features mean that Jans Auth Server is an essential tool as part of your API access management infrastructure.","title":"API Access Management"},{"location":"admin/planning/use-cases/#multifactor-authentication","text":"OpenID Connect is a web identity layer. Auth Server displays and processes a series of web pages to authenticate a person, and then shares user claims with the applications that requested them. Out of the box, Auth Server supports many MFA workflows, including FIDO, passkeys, OATH OTP (HOTP, TOTP), SMS (via Twilio or SMPP) and many more. But you're not limited to the MFA that comes out of the box. Using Person Authentication Scripts, you can implement any authentication workflow which you can imagine. You can also use the Janssen Project's Agama programming language to implement multi-step authenticaiton workflows.","title":"Multifactor Authentication"},{"location":"admin/planning/use-cases/#mobile-authentication","text":"One of the initial requirements for OpenID was to support mobile apps (because SAML is terrible for mobile apps). OpenID and OAuth have developed several mitigations that make mobile authentication more secure, which are desribed in RFC 8252 . However, due to the complexity of cookie sharing between the mobile phone browser SDK, and the mobile browser (assuming you are using the system browser), your results may vary if you actually want SSO. Recently, OpenID has published a new specification draft for Native SSO for Mobile Apps , which is on the roadmap . There are some other hacky ways you can implement mobile authentication, for example, using the OAuth password grant--but this is possible only for first party applications, and is generally discouraged, because there is no way to securely store a client secret in the mobile application, which hackers can easily decompile.","title":"Mobile Authentication"},{"location":"admin/planning/use-cases/#open-banking","text":"You'll notice that the Gluu Open Banking Identity Platform is certified for Financial-grade API (FAPI) 1.0 Final--this is Gluu's distribution of Janssen Auth Server profiled for banking. If you want to implement an OP for open banking, Jans Auth Server is one of the few comprehensive open source platforms that will enable you to do so.","title":"Open Banking"},{"location":"admin/planning/use-cases/#social-sign-in","text":"This could really be covered under the MFA section. But it's not uncommon that as part of an authentication workflow, Auth Server may redirect you to an external identity provider, which then sends you back to Auth Server with some kind of reference id or assertion. Out of the box, Jans supports the top three social sites: Google, Apple, Facebook (which account for 80% of social login). But of course you can implement any social login using an Agama project.","title":"Social Sign-in"},{"location":"admin/planning/use-cases/#registration","text":"It's not that uncommon that an authentication workflow is used to create an account for a person in an identity provider. In fact, it's so common, that the OpenID working group recently created a spec to standardize a parameter in the authentication request to signal to the OpenID Provider that this is what's happening: prompt=create . As we're just displaying a series of web pages, we can display a registration form, process the form (with some kind of remote identity proofing?), send email, SMS, Telegram messages or whatever. Also, frequently social login is tied to registration--the first time you login with an external IDP, Auth Server creates an account of the fly with the user claims sent by the remote IDP.","title":"Registration"},{"location":"admin/planning/use-cases/#authorization","text":"Frequently people conflate the identity layer with the authorization layer. RBAC is still an important security paradigm. So it makes sense to people that the place where you store information about a person's roles, is where you define policies about what resources a role can access (i.e. policies). Recently, centralized authorization has had an active resurgence. Companies like Styra , Oso , and HashiCorp have introduced innovative centralized authorization software. These systems, acting as a \"policy decision point\", enable you to define policies, and can evaluate these policies at runtime. Note: they rely on \"policy enforcement points\" to call their endpoints, supplying the data which is input to policies. With that said, there are places in Auth Server that you can define or impact authorization (besides user claims). In particular, OAuth scopes are used to convey the extent of access in an access token, that when presented to an API by a software client, enables access control. However, scope is still input to policy, and may in fact be just one more piece of data considered by a policy decision point. And one more caveat... the \"authorization\" in an OAuth \"authorization server\", was originally meant to convey the authorization of the person who was trying to access something. Whether a person consented to share information, or grant a client the ability to act on their behalf, is another important consideration. So does \"Auth Server\" provide authorization? It depends!","title":"Authorization"},{"location":"admin/planning/use-cases/#consent-gathering","text":"Through the \"front channel\" (i.e. the browser), Auth Server can interact with a person by displaying web pages. OpenID Connect and OAuth scopes trigger the authorization phase (after authentication). By default, the scopes requested by the client and their respective descriptions are displayed for approval. However, like all pages in Auth Server, these pages can be customized to meet your exact requirements. Auth Server also implements the User Managed Access Protocol (\"UMA\"). This profile of OAuth2 enables consent to be sought from a person even after the initial authentication has taken place. This phase is also called \"claims gathering\", but one of the claims could be whether a person consents to something. Note: Authorizations are stored relative to a person's entity in the database. How a person views and revokes consent is outside the scope of Auth Server. To view a person's consents, you need to use the config API, as this information is not shared via OpenID Connect or SCIM.","title":"Consent Gathering"},{"location":"admin/planning/vm-cluster/","tags":["administration","planning","vm","cluster"],"text":"Note For high availability, we recommend using the Cloud Native(CN) deployment instead of VM cluster deployments. What if you need four or five nines availability, but cloud native is not an option? You could cluster Janssen using VM's, but you'll have to do some legwork, because we don't publish tools for this task. This planning guide will cover some of the things you'll need to consider. Hostname Remember when you run the linux setup to use the hostname of the cluster,not the hostname of the individual server. This is important because the OpenID Provider metadata needs to use the public hostname (i.e. the URL's you'll find at /.well-known/openid-configuration ) Load Balancing / SSL As Auth Server and FIDO (the two Internet facing components) are stateless, you can use any load balancer routing algorithm, even round robin. You can also use the load balancer to terminate SSL. Database The web services Janssen Components share the database, so you'll have to use database replication (e.g. OpenDJ replication). You could also use a cloud database that takes care of replication for you. Cache You can't use IN-MEMORY cache which would have no way to replicate to the other nodes in the network. You could use the Database for caching, although this will impact performance, although it's only an issue for high concurrency use cases. If you are using Couchbase, it has caching built-in. But if you are another database and need high concurrency, our recommendation is to use Redis for caching, which has less cache hit misses then Memcached. Key management Where to you store the private keys? If on the file system, you'll have to make sure that they get securely copied. This is trickier then it sounds because of key rotation. OpenID Connect working group suggests key rotation every two day, to make sure developers who write OpenID applications handle key rotation properly in their code, and don't hardcode the metadata, but retrieve it from the OpenID configuration endpoint. Customizations You must copy any libraries, xhtml pages, CSS or javascript must be available on all servers.","title":"VM Cluster"},{"location":"admin/planning/vm-single-instance/","tags":["administration","planning","vm","single instance"],"text":"While an active-active cluster enables you to achieve four or five nines uptime, you may want to consider a single VM instance if simplicity of operation trumps availability. If you do a good job at monitoring, and can restore from backup quickly, it's certainly possible to meet an SLA of 99.9% availability using just one server. Janssen has linux packages available for SUSE, Red Hat and Ubuntu. One operational consideration is that you should hold the version of Jans Auth Server, to avoid update during the normal package update process. As many applications may rely on a central IDP, you want to plan updates and have a rollback plan if something goes wrong. An automated, unattended update process for the IDP is too risky. An important security tradeoffs when you run Janssen on a single VM is that services which you want to control access to are running on a server with an Internet-facing ethernet interface: the Config API, database, and SCIM server. Even though these service are running on localhost , if the Internet facing interface was compromised, network protection could be bypassed. The main advantage of running a single VM is simplicity. Your sys admins won't need any special training. And it will be easy to install, backup, monitor, and configure your deployment. If you have many autonomous domains, each with their own brand and user identity management process, the simplicity of running a single IDP might be the best solution. If three nines is acceptable to your business, the expense of deploying and operating a cluster may not be justified.","title":"VM Single Instance"},{"location":"admin/recipes/","tags":["administration","recipes"],"text":"Overview # The Janssen Authentication Server is extremely flexible, extensible, and modular. With the correct configuration, Agama, and interception scripts, a wide variety of authentication flows can be implemented. This section contains samples and tutorials to configure third party integrations, specific authentication flows, benchmarking, customizations, compliance profiles, and more.","title":"Overview"},{"location":"admin/recipes/#overview","text":"The Janssen Authentication Server is extremely flexible, extensible, and modular. With the correct configuration, Agama, and interception scripts, a wide variety of authentication flows can be implemented. This section contains samples and tutorials to configure third party integrations, specific authentication flows, benchmarking, customizations, compliance profiles, and more.","title":"Overview"},{"location":"admin/recipes/ACRouter/","text":"Janssen's authentication server can integrate with any number of authentication mechanisms from different vendors. Factoring the pros and cons of each method, organizations can offer a diverse set of options. A users can register multiple types of credentials and use any preferred credential to perform a login. An ACRouter Script is a PersonAuthenticationType script orchestrates a 2FA flow by delegating specific implementation details of authentication methods to other scripts. This allows the flow to present users with alternatives in case some credential is not working as expected or is lost. Authentication flow # sequenceDiagram autonumber title User selects authentication mechanism User agent->>Jans AS: Invoke /authorize endpoint Jans AS->>User agent: Present \"username\" only screen <br/> OR <br/>username - password screen User agent->>Jans AS: Present username <br/> OR username and password Jans AS ->> Jans AS: verify user Jans AS->>User agent: Show UI for preferred authentication method, <br>and also a link \"Alternate way to sign in\" loop n times - (enter creds or select alternate way to sign in) User agent->>Jans AS: Enter credentials (Or click on \"Alternate way to sign in\") Jans AS->>User agent: Present page for authentication <br/> or <br/> present alternate authentication mechanisms end Jans AS->Jans AS: 8. validate id_token,<br/>create internal Jans session opt if new user Jans AS->Jans AS: 9. Dynamic enrollment or registration end Jans AS->User agent: 10. write Jans session cookie An ACRouter script : # Currently, the Jans Auth server comes with 2 PersonAuthenticationType interception scripts that integrate multiple authentication methods and offer alternative options to users for sign-in. Casa Script The casa script offers a 2 steps authentication flow with login and password prompted in the first step and a user-preferred authentication mechanism in the second step. Passwordless script The passwordless script offers a 2 steps authentication flow with username prompted in the first step and a user-preferred authentication mechanism in the second step. Casa App for enrollment of a variety of credentials: # Casa is a self-service web portal for end-users can be used to 1. Enroll, delete and manage two-factor authentication (2FA) credentials for their account (e.g. FIDO security keys, mobile apps, phone numbers, etc.) 1. Turn 2FA on and off Adding a new authentication method as an \"alternative authentication method\": # Step 1: Write a custom script: # Ensure the following preconditions are met so that the authentication mehtod integrates seamlessly within flow: 1. The orchestrator script looks for authentication method scripts under /opt/jans/python/libs . Write a custom script that focuses only on authentication. The script file name should follow naming convention like orchestratorName-external_acrName e.g. casa-external_fido2 or pwdless-external_fido2 1. For step 1, prepareForStep must only return True 1. For step 1, getExtraParametersForStep must only return None 1. For step 1, the authenticate routine must check if there is already an authenticated user, and if so bypass validating the username and password. This is because a user may have previously attempted authentication with a different method. 1. Keep in mind that getPageForStep won't be called when step=1 in your script. The orchestrator script i.e. casa or passwordless script takes charge of this specific step/method combination 1. Add a hasEnrollments routine with a signature like this def hasEnrollments(self, configurationAttributes, user): hasEnrollments must return True or False , describing whether user has one or more credentials enrolled for the type you are interested in Objects: Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes SimpleCustomProperty Map of configuration properties. Reference User User object Reference Step2: Modification to web-pages: # Ensure that custom pages returned by getPageForStep for step 2 (or higher) contain the fragment: <ui:include src=\"/casa/casa.xhtml\" /> This will display a set of links for the user to navigate to alternate 2FA pages. The list will be shown when clicking on a link which should be provided this way: <a href=\"javascript:showAlternative('ELEMENT_ID')\" id=\"alter_link\" class=\"green hover-green f7-cust\">#{msgs['casa.alternative']}</a> Here ELEMENT_ID is the identifier for the HTML node that wraps all visual elements of your page (excluding casa.xhtml ). It is required to preserve alter_link as id for the a tag. Place the modified xhtml page under the path specified in getPageForStep , for e.g. /opt/jans/jetty/jans-auth/custom/pages/casa/fido2.xhtml Step3: Handle enrollment using the Casa app # Step 4: Enable the ACRouter script i.e. passwordless or casa script # Once your script is enabled in the Jans-auth server, you can test it for authentication purposes. Try your script by creating an authentication request passing casa or passwordless as acr value.","title":"User Journeys"},{"location":"admin/recipes/ACRouter/#authentication-flow","text":"sequenceDiagram autonumber title User selects authentication mechanism User agent->>Jans AS: Invoke /authorize endpoint Jans AS->>User agent: Present \"username\" only screen <br/> OR <br/>username - password screen User agent->>Jans AS: Present username <br/> OR username and password Jans AS ->> Jans AS: verify user Jans AS->>User agent: Show UI for preferred authentication method, <br>and also a link \"Alternate way to sign in\" loop n times - (enter creds or select alternate way to sign in) User agent->>Jans AS: Enter credentials (Or click on \"Alternate way to sign in\") Jans AS->>User agent: Present page for authentication <br/> or <br/> present alternate authentication mechanisms end Jans AS->Jans AS: 8. validate id_token,<br/>create internal Jans session opt if new user Jans AS->Jans AS: 9. Dynamic enrollment or registration end Jans AS->User agent: 10. write Jans session cookie","title":"Authentication flow"},{"location":"admin/recipes/ACRouter/#an-acrouter-script","text":"Currently, the Jans Auth server comes with 2 PersonAuthenticationType interception scripts that integrate multiple authentication methods and offer alternative options to users for sign-in. Casa Script The casa script offers a 2 steps authentication flow with login and password prompted in the first step and a user-preferred authentication mechanism in the second step. Passwordless script The passwordless script offers a 2 steps authentication flow with username prompted in the first step and a user-preferred authentication mechanism in the second step.","title":"An ACRouter script:"},{"location":"admin/recipes/ACRouter/#casa-app-for-enrollment-of-a-variety-of-credentials","text":"Casa is a self-service web portal for end-users can be used to 1. Enroll, delete and manage two-factor authentication (2FA) credentials for their account (e.g. FIDO security keys, mobile apps, phone numbers, etc.) 1. Turn 2FA on and off","title":"Casa App for enrollment of a variety of credentials:"},{"location":"admin/recipes/ACRouter/#adding-a-new-authentication-method-as-an-alternative-authentication-method","text":"","title":"Adding a new authentication method as an \"alternative authentication method\":"},{"location":"admin/recipes/ACRouter/#step-1-write-a-custom-script","text":"Ensure the following preconditions are met so that the authentication mehtod integrates seamlessly within flow: 1. The orchestrator script looks for authentication method scripts under /opt/jans/python/libs . Write a custom script that focuses only on authentication. The script file name should follow naming convention like orchestratorName-external_acrName e.g. casa-external_fido2 or pwdless-external_fido2 1. For step 1, prepareForStep must only return True 1. For step 1, getExtraParametersForStep must only return None 1. For step 1, the authenticate routine must check if there is already an authenticated user, and if so bypass validating the username and password. This is because a user may have previously attempted authentication with a different method. 1. Keep in mind that getPageForStep won't be called when step=1 in your script. The orchestrator script i.e. casa or passwordless script takes charge of this specific step/method combination 1. Add a hasEnrollments routine with a signature like this def hasEnrollments(self, configurationAttributes, user): hasEnrollments must return True or False , describing whether user has one or more credentials enrolled for the type you are interested in Objects: Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes SimpleCustomProperty Map of configuration properties. Reference User User object Reference","title":"Step 1: Write a custom script:"},{"location":"admin/recipes/ACRouter/#step2-modification-to-web-pages","text":"Ensure that custom pages returned by getPageForStep for step 2 (or higher) contain the fragment: <ui:include src=\"/casa/casa.xhtml\" /> This will display a set of links for the user to navigate to alternate 2FA pages. The list will be shown when clicking on a link which should be provided this way: <a href=\"javascript:showAlternative('ELEMENT_ID')\" id=\"alter_link\" class=\"green hover-green f7-cust\">#{msgs['casa.alternative']}</a> Here ELEMENT_ID is the identifier for the HTML node that wraps all visual elements of your page (excluding casa.xhtml ). It is required to preserve alter_link as id for the a tag. Place the modified xhtml page under the path specified in getPageForStep , for e.g. /opt/jans/jetty/jans-auth/custom/pages/casa/fido2.xhtml","title":"Step2: Modification to web-pages:"},{"location":"admin/recipes/ACRouter/#step3-handle-enrollment-using-the-casa-app","text":"","title":"Step3: Handle enrollment using the Casa app"},{"location":"admin/recipes/ACRouter/#step-4-enable-the-acrouter-script-ie-passwordless-or-casa-script","text":"Once your script is enabled in the Jans-auth server, you can test it for authentication purposes. Try your script by creating an authentication request passing casa or passwordless as acr value.","title":"Step 4: Enable the ACRouter script i.e. passwordless or casa script"},{"location":"admin/recipes/adaptive-authn/","tags":["administration","recipes"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Adaptive authn"},{"location":"admin/recipes/adaptive-authn/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/adaptive-authn/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/adaptive-authn/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/benchmark/","tags":["administration","helm","kubernetes","benchmarking"],"text":"Overview # The Janssen Server has been optimized with several container strategies that allow scaling microservices and orchestrating them using Kubernetes. In this tutorial we will be running a load test from three different regions on a janssen setup on three different regions. For simplicity, we will be using microk8s however we do recommend users to use the kubernetes cluster providers that they will be using in production. For instance, we run our loadtests across EKS, GKE, AKS and DOKS. With this procedure the following with a 10 million user database is expected: Results # Note The authorization code flow hits a total of 4 steps, 3 authorization steps /token , /authorize , /jans-auth/login and 1 redirect. Flow Authentications per second Authorization code flow 800-1000 Installation # As mentioned in the overview we recommend using the same Kubernetes cluster as planned in production. More guides to install on different clouds can be found here . Persistence # We recommend your persistence in production to be HA, backup supported and point in time recovery supported. Below is a table of the persistence used and resources set for this test. Persistence # of nodes RAM(GiB) CPU Total RAM (GiB) Total CPU MySQL 1 52 8 52 8 Set up the cluster # Kubernetes Cluster Load Test Resources # Note Instance type can be selected to best suit the deployment intended. Keep in mind when selecting the instance type to strive for a 10 or up to 10 network bandwidth (Gbps). Below details the exact resources needed for this tutorial. This is in addition to the persistence resources listed above. Resourcing is critical as timeouts in connections can occur, resulting in failed authentications or cutoffs. Regions # of nodes RAM(GiB) CPU Total RAM (GiB) Total CPU US-West 1 96 48 96 48 US-East 1 96 48 96 48 EU-Central 1 96 48 96 48 Grand Total 288 GB 144 A Kubernetes cluster can be created with three nodes or more in one region and that's fine as long as the nodes are in multiple zones. We will continue with the above table and using microk8s . Create three ubuntu 22.04 nodes and run on each one the following: sudo snap install microk8s --classic sudo snap alias microk8s.kubectl kubectl 2. Designate one of the nodes as the master. We will choose the us-west node to be our master. On the master node run: Execute : microk8s.enable ingress dashboard observability dns metrics-server hostpath-storage registry All the other microk8s nodes must be resolvable from within the master. If fqdns are not globally resolved (registered) open the /etc/hosts file in the master node and map each hostname of the other nodes. YThe hostname of the other nodes can be obtained by executing the command hostname . # If the hostnames are not globally resolvable on master echo \"192.123.123.123 ubuntu-us-east\" >> /etc/hosts echo \"192.124.124.124 ubuntu-eu-central\" >> /etc/hosts 3. Execute: microk8s add-node Copy the output of the command above with --worker i.e. microk8s join 192.12.12.12:25000/88687d1cc5ecdee0db5014c4df9b82cb/adedf6a730eb --worker and execute it in the other nodes (worker nodes) to join them. Step iii ( this step) needs to be repeated for each worker node. Make sure helm is installed. Prepare your override.yaml . Copy the below into a file named override.yaml. At the time of writing this we are using image tags 1.0.17.nightly_dev which are the bleeding edge images for release 1.0.17.nightly . Stable images such as 1.0.17.nightly-1 should be used. config : image : repository : ghcr.io/janssenproject/jans/configurator tag : 1.0.17.nightly_dev countryCode : US email : support@gluu.org orgName : Gluu city : Austin configmap : cnSqlDbName : test cnSqlDbPort : 3306 cnSqlDbDialect : mysql cnSqlDbHost : mycool.cloud.mysql cnSqlDbUser : root cnSqlDbTimezone : UTC cnSqldbUserPassword : Test1234# global : auth-server : enabled : true config-api : enabled : true cnPersistenceType : sql cloud : testEnviroment : false fqdn : example.gluu.info isFqdnRegistered : true # In the event the fqdn above is not resolvable from the internet comment the above line and uncomment the below two setting your lbIp to your master ndoe ip. #isFqdnRegistered: false #lbIp: 192.12.12.12 istio : enabled : false ingress : false nginx-ingress : enabled : true fido2 : enabled : false ingress : fido2ConfigEnabled : false scim : enabled : false ingress : scimConfigEnabled : false scimEnabled : false auth-server : image : pullPolicy : IfNotPresent repository : ghcr.io/janssenproject/jans/auth-server tag : 1.0.17.nightly_dev config-api : image : pullPolicy : IfNotPresent repository : ghcr.io/janssenproject/jans/config-api tag : 1.0.17.nightly_dev persistence : image : pullPolicy : IfNotPresent repository : ghcr.io/janssenproject/jans/persistence-loader tag : 1.0.17.nightly_dev nginx-ingress : ingress : path : / hosts : - example.gluu.info tls : - secretName : tls-certificate hosts : - example.gluu.info Run the following: kubectl create ns jans helm repo add janssen https://docs.jans.io/charts helm repo update helm install janssen janssen/janssen -n jans -f override.yaml Load-test # Our tests used 10 million users that were loaded. We have created a docker image to load users. That same image is also used to load test Janssen using jmeter tests for the Authorization code flow. More tests will come!. This image will load users and use a unique password for each user. Loading users # Loading users requires a hefty but temporary amount of resources. By default, the resources ask for 10 vCPU and 5 Gis. However, to speed up the process increase the number of CPUs as the job in step two below uses parallel tasks. If left as is 10 million users would load in around 17 hours or so. Create a folder called add_users . mkdir -p add_users && cd add_users Copy the following yaml into the folder under the name load_users.yaml . Open the file and modify the required parameters. Note that the following environments can be used as configmaps data to configure the pod. ENV Description Default TEST_USERS_PREFIX_STRING The user prefix string attached to the test users loaded test_user COUCHBASE_URL Couchbase URL if Couchbase is the persistence to load users in. `` COUCHBASE_PW Couchbase PW if Couchbase is the persistence to load users in. `` USER_NUMBER_STARTING_POINT The user number to start from . This is appended to the username i.e test_user0 0 USER_NUMBER_ENDING_POINT The user number to end at. 50000000 LOAD_USERS_TO_COUCHBASE Enable loading users to Couchbase persistence. true or false == `` false LOAD_USERS_TO_LDAP Enable loading users to LDAP persistence. true or false == `` false LOAD_USERS_TO_SPANNER Enable loading users to Spanner persistence. true or false == `` false LOAD_USERS_TO_RDBMS Enable loading users to RDBMS persistence. true or false == `` false USER_SPLIT_PARALLEL_THREADS The number of parallel threads to break the total number users across. This number heavily effects CPU usage. 20 GOOGLE_APPLICATION_CREDENTIALS Google Credentials JSON SA file. Used with Spanner `` GOOGLE_PROJECT_ID Google Project ID. Used with Spanner `` GOOGLE_SPANNER_INSTANCE_ID Google Spanner Instance ID. Used with Spanner `` GOOGLE_SPANNER_DATABASE_ID Google Spanner Database ID. Used with Spanner `` LDAP_URL LDAP URL if LDAP is the persistence to load users in. opendj:1636 LDAP_PW LDAP PW if LDAP is the persistence to load users in. `` LDAP_DN LDAP DN if LDAP is the persistence to load users in. cn=directory manager RDBMS_TYPE RDBMS type if mysql or pgsql is the persistence to load users in. mysql RDBMS_DB RDBMS Database name if mysql or pgsql is the persistence to load users in. jans RDBMS_USER RDBMS user if mysql or pgsql is the persistence to load users in. jans RDBMS_PASSWORD RDBMS user password if mysql or pgsql is the persistence to load users in. . `` RDBMS_HOST RDBMS host if mysql or pgsql is the persistence to load users in. localhost Tips: To speed the loading process, increase the CPU requests and limits of the pod. Create a namespace for load-testing. kubectl create ns load Create load_users.yaml kubectl create -f load_users.yaml -n load cd .. Wait until all the users are up before moving forward. Tail the logs by running kubectl logs deployment/load-users -n load . Load testing # Authorization code flow # Resources needed for Authorization code client jmeter test # The below resources were calculated when creating the nodes above. NAME # of pods RAM(GiB) CPU Total RAM(GiB) Total CPU Authorization code flow jmeter test 20 8 1.3 190 24 Grand Total 190 GiB 24 Setup Client # Create the client needed to run the test by executing the following. Make sure to change the FQDN : Create a folder called load_test . mkdir -p load_test && cd load_test Create the client json file FQDN = example.gluu.info cat << EOF > auth_code_client.json { \"dn\": null, \"inum\": null, \"displayName\": \"Auth Code Flow Load Test Client\", \"redirectUris\": [ \"https://$FQDN\" ], \"responseTypes\": [ \"id_token\", \"code\" ], \"grantTypes\": [ \"authorization_code\", \"implicit\", \"refresh_token\" ], \"tokenEndpointAuthMethod\": \"client_secret_basic\", \"scopes\": [ \"openid\", \"profile\", \"email\", \"user_name\" ], \"trustedClient\": true, \"includeClaimsInIdToken\": false, \"accessTokenAsJwt\": false, \"disabled\": false, \"deletable\": false, \"description\": \"Auth Code Flow Load Testing Client\" } EOF 3. Copy the following yaml into the folder. Download or build config-cli-tui and run: # Notice the namespace is jans here . Change it if it was changed during installation of janssen previously TUI_CLIENT_ID = $( kubectl get cm cn -o json -n jans | grep '\"tui_client_id\":' | sed -e 's#.*:\\(\\)#\\1#' | tr -d '\"' | tr -d \",\" | tr -d '[:space:]' ) TUI_CLIENT_SECRET = $( kubectl get secret cn -o json -n jans | grep '\"tui_client_pw\":' | sed -e 's#.*:\\(\\)#\\1#' | tr -d '\"' | tr -d \",\" | tr -d '[:space:]' | base64 -d ) # add -noverify if your fqdn is not registered ./config-cli-tui.pyz --host $FQDN --client-id $TUI_CLIENT_ID --client-secret $TUI_CLIENT_SECRET --no-tui --operation-id = post-oauth-openid-client --data = auth_code_client.json Save the client id and secret from the response and enter them along with your FQDN in the yaml file load_test_auth_code.yaml under AUTHZ_CLIENT_ID , AUTHZ_CLIENT_SECRET and FQDN respectively then execute : kubectl apply -f load_test_auth_code.yaml The janssen setup by default installs an HPA which will automatically scale your pods if the metrics server is installed according to traffic. To load it very quickly scale the auth-server manually: bash kubectl scale deploy janssen-auth-server -n jans --replicas=40 Finally, scale the load test. The replica number here should be manually controlled. bash kubectl scale deploy load-testing-authz -n load --replicas=20 Resource Owner Password Credentials (ROPC) flow # Resources needed for ROPC client jmeter test # The below resources were calculated when creating the nodes above. NAME # of pods RAM(GiB) CPU Total RAM(GiB) Total CPU ROPC flow jmeter test 20 8 1.3 190 24 Grand Total 190 GiB 24 Setup Client # Create the client needed to run the test by executing the following. Make sure to change the FQDN : Create a folder called load_test . mkdir -p load_test && cd load_test Create the client json file FQDN = example.gluu.info cat << EOF > ropc_client.json { \"dn\": null, \"inum\": null, \"displayName\": \"ROPC Flow Load Test Client\", \"redirectUris\": [ \"https://$FQDN\" ], \"responseTypes\": [ \"id_token\", \"code\" ], \"grantTypes\": [ \"authorization_code\", \"implicit\", \"refresh_token\", \"password\" ], \"tokenEndpointAuthMethod\": \"client_secret_basic\", \"scopes\": [ \"openid\", \"profile\", \"email\", \"user_name\" ], \"trustedClient\": true, \"includeClaimsInIdToken\": false, \"accessTokenAsJwt\": false, \"disabled\": false, \"deletable\": false, \"description\": \"ROPC Flow Load Testing Client\" } EOF Copy the following yaml into the folder. Download or build config-cli-tui and run: # Notice the namespace is jans here . Change it if it was changed during installation of janssen previously TUI_CLIENT_ID = $( kubectl get cm cn -o json -n jans | grep '\"tui_client_id\":' | sed -e 's#.*:\\(\\)#\\1#' | tr -d '\"' | tr -d \",\" | tr -d '[:space:]' ) TUI_CLIENT_SECRET = $( kubectl get secret cn -o json -n jans | grep '\"tui_client_pw\":' | sed -e 's#.*:\\(\\)#\\1#' | tr -d '\"' | tr -d \",\" | tr -d '[:space:]' | base64 -d ) # add -noverify if your fqdn is not registered ./config-cli-tui.pyz --host $FQDN --client-id $TUI_CLIENT_ID --client-secret $TUI_CLIENT_SECRET --no-tui --operation-id = post-oauth-openid-client --data = ropc_client.json Save the client id and secret from the response and enter them along with your FQDN in the yaml file load_test_ropc.yaml under ROPC_CLIENT_ID , ROPC_CLIENT_SECRET and FQDN respectively then execute : kubectl apply -f load_test_ropc.yaml The janssen setup by default installs an HPA which will automatically scale your pods if the metrics server is installed according to traffic. To load it very quickly scale the auth-server manually: bash kubectl scale deploy janssen-auth-server -n jans --replicas=40 Finally, scale the load test. The replica number here should be manually controlled. bash kubectl scale deploy load-testing-ropc -n load --replicas=20 DCR flow # Resources needed for DCR client jmeter test # The below resources were calculated when creating the nodes above. NAME # of pods RAM(GiB) CPU Total RAM(GiB) Total CPU DCR test 20 8 1.3 190 24 Grand Total 190 GiB 24 Setup Client # Create the client needed to run the test by executing the following. Make sure to change the FQDN : Create a folder called load_test . mkdir -p load_test && cd load_test Create the client json file FQDN = example.gluu.info cat << EOF > dcr_client.json { \"dn\": null, \"inum\": null, \"displayName\": \"DCR Flow Load Test Client\", \"redirectUris\": [ \"https://$FQDN\" ], \"responseTypes\": [ \"id_token\", \"code\" ], \"grantTypes\": [ \"authorization_code\", \"implicit\", \"refresh_token\", \"password\" ], \"tokenEndpointAuthMethod\": \"client_secret_basic\", \"scopes\": [ \"openid\", \"profile\", \"email\", \"user_name\" ], \"trustedClient\": true, \"includeClaimsInIdToken\": false, \"accessTokenAsJwt\": false, \"disabled\": false, \"deletable\": false, \"description\": \"DCR Flow Load Testing Client\" } EOF Copy the following yaml into the folder. Download or build config-cli-tui and run: # Notice the namespace is jans here . Change it if it was changed during installation of janssen previously TUI_CLIENT_ID = $( kubectl get cm cn -o json -n jans | grep '\"tui_client_id\":' | sed -e 's#.*:\\(\\)#\\1#' | tr -d '\"' | tr -d \",\" | tr -d '[:space:]' ) TUI_CLIENT_SECRET = $( kubectl get secret cn -o json -n jans | grep '\"tui_client_pw\":' | sed -e 's#.*:\\(\\)#\\1#' | tr -d '\"' | tr -d \",\" | tr -d '[:space:]' | base64 -d ) # add -noverify if your fqdn is not registered ./config-cli-tui.pyz --host $FQDN --client-id $TUI_CLIENT_ID --client-secret $TUI_CLIENT_SECRET --no-tui --operation-id = post-oauth-openid-client --data = dcr_client.json You will need to load the sectorIdentifier into your persistence.For MySQL that statement would be the following taking into account the FQDN : INSERT INTO jansSectorIdentifier ( doc_id , dn , jansId , jansRedirectURI , objectClass ) VALUES ( 'a55ede29-8f5a-461d-b06e-76caee8d40b5' , 'jansId=a55ede29-8f5a-461d-b06e-76caee8d40b5,ou=sector_identifiers,o=jans' , 'a55ede29-8f5a-461d-b06e-76caee8d40b5' , '{\"v\": [\"https://www.jans.org\", \"http://localhost:80/jans-auth-rp/home.htm\", \"https://localhost:8443/jans-auth-rp/home.htm\", \"https://$FQDN/jans-auth-rp/home.htm\", \"https://$FQDN/jans-auth-client/test/resources/jwks.json\", \"https://client.example.org/callback\", \"https://client.example.org/callback2\", \"https://client.other_company.example.net/callback\", \"https://client.example.com/cb\", \"https://client.example.com/cb1\", \"https://client.example.com/cb2\"]}' , 'jansSectorIdentifier' ); Save the client id and secret from the response and enter them along with your FQDN in the yaml file load_test_ropc.yaml under DCR_CLIENT_ID , DCR_CLIENT_SECRET and FQDN respectively then execute : kubectl apply -f load_test_dcr.yaml The janssen setup by default installs an HPA which will automatically scale your pods if the metrics server is installed according to traffic. To load it very quickly scale the auth-server manually: bash kubectl scale deploy janssen-auth-server -n jans --replicas=40 Finally, scale the load test. The replica number here should be manually controlled. bash kubectl scale deploy load-testing-ropc -n load --replicas=20","title":"Benchmark"},{"location":"admin/recipes/benchmark/#overview","text":"The Janssen Server has been optimized with several container strategies that allow scaling microservices and orchestrating them using Kubernetes. In this tutorial we will be running a load test from three different regions on a janssen setup on three different regions. For simplicity, we will be using microk8s however we do recommend users to use the kubernetes cluster providers that they will be using in production. For instance, we run our loadtests across EKS, GKE, AKS and DOKS. With this procedure the following with a 10 million user database is expected:","title":"Overview"},{"location":"admin/recipes/benchmark/#results","text":"Note The authorization code flow hits a total of 4 steps, 3 authorization steps /token , /authorize , /jans-auth/login and 1 redirect. Flow Authentications per second Authorization code flow 800-1000","title":"Results"},{"location":"admin/recipes/benchmark/#installation","text":"As mentioned in the overview we recommend using the same Kubernetes cluster as planned in production. More guides to install on different clouds can be found here .","title":"Installation"},{"location":"admin/recipes/benchmark/#persistence","text":"We recommend your persistence in production to be HA, backup supported and point in time recovery supported. Below is a table of the persistence used and resources set for this test. Persistence # of nodes RAM(GiB) CPU Total RAM (GiB) Total CPU MySQL 1 52 8 52 8","title":"Persistence"},{"location":"admin/recipes/benchmark/#set-up-the-cluster","text":"","title":"Set up the cluster"},{"location":"admin/recipes/benchmark/#kubernetes-cluster-load-test-resources","text":"Note Instance type can be selected to best suit the deployment intended. Keep in mind when selecting the instance type to strive for a 10 or up to 10 network bandwidth (Gbps). Below details the exact resources needed for this tutorial. This is in addition to the persistence resources listed above. Resourcing is critical as timeouts in connections can occur, resulting in failed authentications or cutoffs. Regions # of nodes RAM(GiB) CPU Total RAM (GiB) Total CPU US-West 1 96 48 96 48 US-East 1 96 48 96 48 EU-Central 1 96 48 96 48 Grand Total 288 GB 144 A Kubernetes cluster can be created with three nodes or more in one region and that's fine as long as the nodes are in multiple zones. We will continue with the above table and using microk8s . Create three ubuntu 22.04 nodes and run on each one the following: sudo snap install microk8s --classic sudo snap alias microk8s.kubectl kubectl 2. Designate one of the nodes as the master. We will choose the us-west node to be our master. On the master node run: Execute : microk8s.enable ingress dashboard observability dns metrics-server hostpath-storage registry All the other microk8s nodes must be resolvable from within the master. If fqdns are not globally resolved (registered) open the /etc/hosts file in the master node and map each hostname of the other nodes. YThe hostname of the other nodes can be obtained by executing the command hostname . # If the hostnames are not globally resolvable on master echo \"192.123.123.123 ubuntu-us-east\" >> /etc/hosts echo \"192.124.124.124 ubuntu-eu-central\" >> /etc/hosts 3. Execute: microk8s add-node Copy the output of the command above with --worker i.e. microk8s join 192.12.12.12:25000/88687d1cc5ecdee0db5014c4df9b82cb/adedf6a730eb --worker and execute it in the other nodes (worker nodes) to join them. Step iii ( this step) needs to be repeated for each worker node. Make sure helm is installed. Prepare your override.yaml . Copy the below into a file named override.yaml. At the time of writing this we are using image tags 1.0.17.nightly_dev which are the bleeding edge images for release 1.0.17.nightly . Stable images such as 1.0.17.nightly-1 should be used. config : image : repository : ghcr.io/janssenproject/jans/configurator tag : 1.0.17.nightly_dev countryCode : US email : support@gluu.org orgName : Gluu city : Austin configmap : cnSqlDbName : test cnSqlDbPort : 3306 cnSqlDbDialect : mysql cnSqlDbHost : mycool.cloud.mysql cnSqlDbUser : root cnSqlDbTimezone : UTC cnSqldbUserPassword : Test1234# global : auth-server : enabled : true config-api : enabled : true cnPersistenceType : sql cloud : testEnviroment : false fqdn : example.gluu.info isFqdnRegistered : true # In the event the fqdn above is not resolvable from the internet comment the above line and uncomment the below two setting your lbIp to your master ndoe ip. #isFqdnRegistered: false #lbIp: 192.12.12.12 istio : enabled : false ingress : false nginx-ingress : enabled : true fido2 : enabled : false ingress : fido2ConfigEnabled : false scim : enabled : false ingress : scimConfigEnabled : false scimEnabled : false auth-server : image : pullPolicy : IfNotPresent repository : ghcr.io/janssenproject/jans/auth-server tag : 1.0.17.nightly_dev config-api : image : pullPolicy : IfNotPresent repository : ghcr.io/janssenproject/jans/config-api tag : 1.0.17.nightly_dev persistence : image : pullPolicy : IfNotPresent repository : ghcr.io/janssenproject/jans/persistence-loader tag : 1.0.17.nightly_dev nginx-ingress : ingress : path : / hosts : - example.gluu.info tls : - secretName : tls-certificate hosts : - example.gluu.info Run the following: kubectl create ns jans helm repo add janssen https://docs.jans.io/charts helm repo update helm install janssen janssen/janssen -n jans -f override.yaml","title":"Kubernetes Cluster Load Test Resources"},{"location":"admin/recipes/benchmark/#load-test","text":"Our tests used 10 million users that were loaded. We have created a docker image to load users. That same image is also used to load test Janssen using jmeter tests for the Authorization code flow. More tests will come!. This image will load users and use a unique password for each user.","title":"Load-test"},{"location":"admin/recipes/benchmark/#loading-users","text":"Loading users requires a hefty but temporary amount of resources. By default, the resources ask for 10 vCPU and 5 Gis. However, to speed up the process increase the number of CPUs as the job in step two below uses parallel tasks. If left as is 10 million users would load in around 17 hours or so. Create a folder called add_users . mkdir -p add_users && cd add_users Copy the following yaml into the folder under the name load_users.yaml . Open the file and modify the required parameters. Note that the following environments can be used as configmaps data to configure the pod. ENV Description Default TEST_USERS_PREFIX_STRING The user prefix string attached to the test users loaded test_user COUCHBASE_URL Couchbase URL if Couchbase is the persistence to load users in. `` COUCHBASE_PW Couchbase PW if Couchbase is the persistence to load users in. `` USER_NUMBER_STARTING_POINT The user number to start from . This is appended to the username i.e test_user0 0 USER_NUMBER_ENDING_POINT The user number to end at. 50000000 LOAD_USERS_TO_COUCHBASE Enable loading users to Couchbase persistence. true or false == `` false LOAD_USERS_TO_LDAP Enable loading users to LDAP persistence. true or false == `` false LOAD_USERS_TO_SPANNER Enable loading users to Spanner persistence. true or false == `` false LOAD_USERS_TO_RDBMS Enable loading users to RDBMS persistence. true or false == `` false USER_SPLIT_PARALLEL_THREADS The number of parallel threads to break the total number users across. This number heavily effects CPU usage. 20 GOOGLE_APPLICATION_CREDENTIALS Google Credentials JSON SA file. Used with Spanner `` GOOGLE_PROJECT_ID Google Project ID. Used with Spanner `` GOOGLE_SPANNER_INSTANCE_ID Google Spanner Instance ID. Used with Spanner `` GOOGLE_SPANNER_DATABASE_ID Google Spanner Database ID. Used with Spanner `` LDAP_URL LDAP URL if LDAP is the persistence to load users in. opendj:1636 LDAP_PW LDAP PW if LDAP is the persistence to load users in. `` LDAP_DN LDAP DN if LDAP is the persistence to load users in. cn=directory manager RDBMS_TYPE RDBMS type if mysql or pgsql is the persistence to load users in. mysql RDBMS_DB RDBMS Database name if mysql or pgsql is the persistence to load users in. jans RDBMS_USER RDBMS user if mysql or pgsql is the persistence to load users in. jans RDBMS_PASSWORD RDBMS user password if mysql or pgsql is the persistence to load users in. . `` RDBMS_HOST RDBMS host if mysql or pgsql is the persistence to load users in. localhost Tips: To speed the loading process, increase the CPU requests and limits of the pod. Create a namespace for load-testing. kubectl create ns load Create load_users.yaml kubectl create -f load_users.yaml -n load cd .. Wait until all the users are up before moving forward. Tail the logs by running kubectl logs deployment/load-users -n load .","title":"Loading users"},{"location":"admin/recipes/benchmark/#load-testing","text":"","title":"Load testing"},{"location":"admin/recipes/benchmark/#authorization-code-flow","text":"","title":"Authorization code flow"},{"location":"admin/recipes/benchmark/#resources-needed-for-authorization-code-client-jmeter-test","text":"The below resources were calculated when creating the nodes above. NAME # of pods RAM(GiB) CPU Total RAM(GiB) Total CPU Authorization code flow jmeter test 20 8 1.3 190 24 Grand Total 190 GiB 24","title":"Resources needed for Authorization code client jmeter test"},{"location":"admin/recipes/benchmark/#setup-client","text":"Create the client needed to run the test by executing the following. Make sure to change the FQDN : Create a folder called load_test . mkdir -p load_test && cd load_test Create the client json file FQDN = example.gluu.info cat << EOF > auth_code_client.json { \"dn\": null, \"inum\": null, \"displayName\": \"Auth Code Flow Load Test Client\", \"redirectUris\": [ \"https://$FQDN\" ], \"responseTypes\": [ \"id_token\", \"code\" ], \"grantTypes\": [ \"authorization_code\", \"implicit\", \"refresh_token\" ], \"tokenEndpointAuthMethod\": \"client_secret_basic\", \"scopes\": [ \"openid\", \"profile\", \"email\", \"user_name\" ], \"trustedClient\": true, \"includeClaimsInIdToken\": false, \"accessTokenAsJwt\": false, \"disabled\": false, \"deletable\": false, \"description\": \"Auth Code Flow Load Testing Client\" } EOF 3. Copy the following yaml into the folder. Download or build config-cli-tui and run: # Notice the namespace is jans here . Change it if it was changed during installation of janssen previously TUI_CLIENT_ID = $( kubectl get cm cn -o json -n jans | grep '\"tui_client_id\":' | sed -e 's#.*:\\(\\)#\\1#' | tr -d '\"' | tr -d \",\" | tr -d '[:space:]' ) TUI_CLIENT_SECRET = $( kubectl get secret cn -o json -n jans | grep '\"tui_client_pw\":' | sed -e 's#.*:\\(\\)#\\1#' | tr -d '\"' | tr -d \",\" | tr -d '[:space:]' | base64 -d ) # add -noverify if your fqdn is not registered ./config-cli-tui.pyz --host $FQDN --client-id $TUI_CLIENT_ID --client-secret $TUI_CLIENT_SECRET --no-tui --operation-id = post-oauth-openid-client --data = auth_code_client.json Save the client id and secret from the response and enter them along with your FQDN in the yaml file load_test_auth_code.yaml under AUTHZ_CLIENT_ID , AUTHZ_CLIENT_SECRET and FQDN respectively then execute : kubectl apply -f load_test_auth_code.yaml The janssen setup by default installs an HPA which will automatically scale your pods if the metrics server is installed according to traffic. To load it very quickly scale the auth-server manually: bash kubectl scale deploy janssen-auth-server -n jans --replicas=40 Finally, scale the load test. The replica number here should be manually controlled. bash kubectl scale deploy load-testing-authz -n load --replicas=20","title":"Setup Client"},{"location":"admin/recipes/benchmark/#resource-owner-password-credentials-ropc-flow","text":"","title":"Resource Owner Password Credentials (ROPC) flow"},{"location":"admin/recipes/benchmark/#resources-needed-for-ropc-client-jmeter-test","text":"The below resources were calculated when creating the nodes above. NAME # of pods RAM(GiB) CPU Total RAM(GiB) Total CPU ROPC flow jmeter test 20 8 1.3 190 24 Grand Total 190 GiB 24","title":"Resources needed for ROPC client jmeter test"},{"location":"admin/recipes/benchmark/#setup-client_1","text":"Create the client needed to run the test by executing the following. Make sure to change the FQDN : Create a folder called load_test . mkdir -p load_test && cd load_test Create the client json file FQDN = example.gluu.info cat << EOF > ropc_client.json { \"dn\": null, \"inum\": null, \"displayName\": \"ROPC Flow Load Test Client\", \"redirectUris\": [ \"https://$FQDN\" ], \"responseTypes\": [ \"id_token\", \"code\" ], \"grantTypes\": [ \"authorization_code\", \"implicit\", \"refresh_token\", \"password\" ], \"tokenEndpointAuthMethod\": \"client_secret_basic\", \"scopes\": [ \"openid\", \"profile\", \"email\", \"user_name\" ], \"trustedClient\": true, \"includeClaimsInIdToken\": false, \"accessTokenAsJwt\": false, \"disabled\": false, \"deletable\": false, \"description\": \"ROPC Flow Load Testing Client\" } EOF Copy the following yaml into the folder. Download or build config-cli-tui and run: # Notice the namespace is jans here . Change it if it was changed during installation of janssen previously TUI_CLIENT_ID = $( kubectl get cm cn -o json -n jans | grep '\"tui_client_id\":' | sed -e 's#.*:\\(\\)#\\1#' | tr -d '\"' | tr -d \",\" | tr -d '[:space:]' ) TUI_CLIENT_SECRET = $( kubectl get secret cn -o json -n jans | grep '\"tui_client_pw\":' | sed -e 's#.*:\\(\\)#\\1#' | tr -d '\"' | tr -d \",\" | tr -d '[:space:]' | base64 -d ) # add -noverify if your fqdn is not registered ./config-cli-tui.pyz --host $FQDN --client-id $TUI_CLIENT_ID --client-secret $TUI_CLIENT_SECRET --no-tui --operation-id = post-oauth-openid-client --data = ropc_client.json Save the client id and secret from the response and enter them along with your FQDN in the yaml file load_test_ropc.yaml under ROPC_CLIENT_ID , ROPC_CLIENT_SECRET and FQDN respectively then execute : kubectl apply -f load_test_ropc.yaml The janssen setup by default installs an HPA which will automatically scale your pods if the metrics server is installed according to traffic. To load it very quickly scale the auth-server manually: bash kubectl scale deploy janssen-auth-server -n jans --replicas=40 Finally, scale the load test. The replica number here should be manually controlled. bash kubectl scale deploy load-testing-ropc -n load --replicas=20","title":"Setup Client"},{"location":"admin/recipes/benchmark/#dcr-flow","text":"","title":"DCR flow"},{"location":"admin/recipes/benchmark/#resources-needed-for-dcr-client-jmeter-test","text":"The below resources were calculated when creating the nodes above. NAME # of pods RAM(GiB) CPU Total RAM(GiB) Total CPU DCR test 20 8 1.3 190 24 Grand Total 190 GiB 24","title":"Resources needed for DCR client jmeter test"},{"location":"admin/recipes/benchmark/#setup-client_2","text":"Create the client needed to run the test by executing the following. Make sure to change the FQDN : Create a folder called load_test . mkdir -p load_test && cd load_test Create the client json file FQDN = example.gluu.info cat << EOF > dcr_client.json { \"dn\": null, \"inum\": null, \"displayName\": \"DCR Flow Load Test Client\", \"redirectUris\": [ \"https://$FQDN\" ], \"responseTypes\": [ \"id_token\", \"code\" ], \"grantTypes\": [ \"authorization_code\", \"implicit\", \"refresh_token\", \"password\" ], \"tokenEndpointAuthMethod\": \"client_secret_basic\", \"scopes\": [ \"openid\", \"profile\", \"email\", \"user_name\" ], \"trustedClient\": true, \"includeClaimsInIdToken\": false, \"accessTokenAsJwt\": false, \"disabled\": false, \"deletable\": false, \"description\": \"DCR Flow Load Testing Client\" } EOF Copy the following yaml into the folder. Download or build config-cli-tui and run: # Notice the namespace is jans here . Change it if it was changed during installation of janssen previously TUI_CLIENT_ID = $( kubectl get cm cn -o json -n jans | grep '\"tui_client_id\":' | sed -e 's#.*:\\(\\)#\\1#' | tr -d '\"' | tr -d \",\" | tr -d '[:space:]' ) TUI_CLIENT_SECRET = $( kubectl get secret cn -o json -n jans | grep '\"tui_client_pw\":' | sed -e 's#.*:\\(\\)#\\1#' | tr -d '\"' | tr -d \",\" | tr -d '[:space:]' | base64 -d ) # add -noverify if your fqdn is not registered ./config-cli-tui.pyz --host $FQDN --client-id $TUI_CLIENT_ID --client-secret $TUI_CLIENT_SECRET --no-tui --operation-id = post-oauth-openid-client --data = dcr_client.json You will need to load the sectorIdentifier into your persistence.For MySQL that statement would be the following taking into account the FQDN : INSERT INTO jansSectorIdentifier ( doc_id , dn , jansId , jansRedirectURI , objectClass ) VALUES ( 'a55ede29-8f5a-461d-b06e-76caee8d40b5' , 'jansId=a55ede29-8f5a-461d-b06e-76caee8d40b5,ou=sector_identifiers,o=jans' , 'a55ede29-8f5a-461d-b06e-76caee8d40b5' , '{\"v\": [\"https://www.jans.org\", \"http://localhost:80/jans-auth-rp/home.htm\", \"https://localhost:8443/jans-auth-rp/home.htm\", \"https://$FQDN/jans-auth-rp/home.htm\", \"https://$FQDN/jans-auth-client/test/resources/jwks.json\", \"https://client.example.org/callback\", \"https://client.example.org/callback2\", \"https://client.other_company.example.net/callback\", \"https://client.example.com/cb\", \"https://client.example.com/cb1\", \"https://client.example.com/cb2\"]}' , 'jansSectorIdentifier' ); Save the client id and secret from the response and enter them along with your FQDN in the yaml file load_test_ropc.yaml under DCR_CLIENT_ID , DCR_CLIENT_SECRET and FQDN respectively then execute : kubectl apply -f load_test_dcr.yaml The janssen setup by default installs an HPA which will automatically scale your pods if the metrics server is installed according to traffic. To load it very quickly scale the auth-server manually: bash kubectl scale deploy janssen-auth-server -n jans --replicas=40 Finally, scale the load test. The replica number here should be manually controlled. bash kubectl scale deploy load-testing-ropc -n load --replicas=20","title":"Setup Client"},{"location":"admin/recipes/casa/","text":"tags: - administration - recipe - casa Casa - Self-service MFA portal # Overview # Casa is a self-service web portal that allows end users to view, enroll, and remove MFA credentials, including hardware tokens, software tokens, commercial services (like Duo), social login, biometric, and mobile. Casa is also extensible. As new authentication technologies arise, you can download plugins to leverage them in your organization through Casa. Prerequisites # Installed Janssen Server Installing Casa # Casa gets installed as an add-on to Janssen Server and integrates with jans-auth-server module as an OpenID connect Relying Party. Casa can be installed using the command below. Currently, Casa installation is supported on CentOS 8 and Ubuntu 20. The following steps will install Casa as an add-on. Download installer wget https://raw.githubusercontent.com/GluuFederation/flex/main/flex-linux-setup/flex_linux_setup/flex_setup.py -O flex_setup.py Run the installer python3 flex_setup.py Automate install # If you have setup.properties file and want to automate installation, you can pass properties file as python3 flex_setup.py -f /path/to/setup.properties -n -c Minimal example setup.properties file: ip = 10 .146.197.201 hostname = flex.gluu.org orgName = Gluu admin_email = flex@gluu.org city = Austin state = Texas countryCode = US installLdap = True admin_password = MyAdminPassword ldapPass = MyLdapPassword casa_client_id = 3000 .7986c837-2a8f-4c31-9c63-1bd2f6abce77 casa_client_pw = MyCasaClientSecret You will be prompted: Install Admin UI [Y/n]: . Select n You will be prompted: Install Casa [Y/n]: . Select y At the end of the installation you will be presented with a URL to access the Casa portal. You can use this URL and log into the portal using the administrator credentials that you created during the Janssen Server installation. Enabling Authentication methods # Go to /opt/jans/jetty/casa folder and execute touch .administrable . Further reading Enable authentication mechanisms in Jan-auth server like otp , fido2 , email_otp . launch jans-cli-tui to enable scripts in Jans-auth server search for script, open script and navigate to enable section and press enter at enable then press save. Login to the Casa portal as an administrator Enable authentication methods by navigating to Administration console -> Enabled Authentication methods . Details about enabling authentication methods are available in Casa documentation Configuring authentication methods # At this point, users ( How to create users ) can log in to the Casa portal and enable/configure one or more authentication methods for their account. Uninstalling Casa from Janssen Server # Execute following command to uninstall Casa from Janssen Server python3 flex_setup.py -remove casa","title":"Casa"},{"location":"admin/recipes/casa/#casa-self-service-mfa-portal","text":"","title":"Casa - Self-service MFA portal"},{"location":"admin/recipes/casa/#overview","text":"Casa is a self-service web portal that allows end users to view, enroll, and remove MFA credentials, including hardware tokens, software tokens, commercial services (like Duo), social login, biometric, and mobile. Casa is also extensible. As new authentication technologies arise, you can download plugins to leverage them in your organization through Casa.","title":"Overview"},{"location":"admin/recipes/casa/#prerequisites","text":"Installed Janssen Server","title":"Prerequisites"},{"location":"admin/recipes/casa/#installing-casa","text":"Casa gets installed as an add-on to Janssen Server and integrates with jans-auth-server module as an OpenID connect Relying Party. Casa can be installed using the command below. Currently, Casa installation is supported on CentOS 8 and Ubuntu 20. The following steps will install Casa as an add-on. Download installer wget https://raw.githubusercontent.com/GluuFederation/flex/main/flex-linux-setup/flex_linux_setup/flex_setup.py -O flex_setup.py Run the installer python3 flex_setup.py","title":"Installing Casa"},{"location":"admin/recipes/casa/#automate-install","text":"If you have setup.properties file and want to automate installation, you can pass properties file as python3 flex_setup.py -f /path/to/setup.properties -n -c Minimal example setup.properties file: ip = 10 .146.197.201 hostname = flex.gluu.org orgName = Gluu admin_email = flex@gluu.org city = Austin state = Texas countryCode = US installLdap = True admin_password = MyAdminPassword ldapPass = MyLdapPassword casa_client_id = 3000 .7986c837-2a8f-4c31-9c63-1bd2f6abce77 casa_client_pw = MyCasaClientSecret You will be prompted: Install Admin UI [Y/n]: . Select n You will be prompted: Install Casa [Y/n]: . Select y At the end of the installation you will be presented with a URL to access the Casa portal. You can use this URL and log into the portal using the administrator credentials that you created during the Janssen Server installation.","title":"Automate install"},{"location":"admin/recipes/casa/#enabling-authentication-methods","text":"Go to /opt/jans/jetty/casa folder and execute touch .administrable . Further reading Enable authentication mechanisms in Jan-auth server like otp , fido2 , email_otp . launch jans-cli-tui to enable scripts in Jans-auth server search for script, open script and navigate to enable section and press enter at enable then press save. Login to the Casa portal as an administrator Enable authentication methods by navigating to Administration console -> Enabled Authentication methods . Details about enabling authentication methods are available in Casa documentation","title":"Enabling Authentication methods"},{"location":"admin/recipes/casa/#configuring-authentication-methods","text":"At this point, users ( How to create users ) can log in to the Casa portal and enable/configure one or more authentication methods for their account.","title":"Configuring authentication methods"},{"location":"admin/recipes/casa/#uninstalling-casa-from-janssen-server","text":"Execute following command to uninstall Casa from Janssen Server python3 flex_setup.py -remove casa","title":"Uninstalling Casa from Janssen Server"},{"location":"admin/recipes/faq/","tags":["administration","recipes"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Faq"},{"location":"admin/recipes/faq/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/faq/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/faq/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/forcing-reauthn/","tags":["administration","recipes"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Forcing reauthn"},{"location":"admin/recipes/forcing-reauthn/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/forcing-reauthn/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/forcing-reauthn/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/impersonation/","tags":["administration","recipes"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Impersonation"},{"location":"admin/recipes/impersonation/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/impersonation/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/impersonation/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/inbound-oidc/","tags":["administration","recipe","openid-connect","inbound","authentication"],"text":"Inbound OpenId-Connect Authentication # In this tutorial, we will see how you can integrate any inbound external oauth2 provider authentication in the Janssen server. If you are looking for social login support then check out passport module for that. We will use interception authentication script which is a PersonAuthenticationType script for whole flow. Currently, It supports Authorization Code Flow and client_secret_post token endpoint auth method. Authentication Flow # You can add any external OAuth2 server authentication option and provision authenticated users to your Janssen server A.K.A. Inbound-identity. sequenceDiagram title OIDC Inbound Identity Flow participant browser as Browser participant rp as RP participant jans as Jans Authz Server participant eidp as External Provider autonumber browser->>rp: Request page browser->>jans: Invoke /authorize endpoint jans->>browser: Present \"Login with OAuth2\" button browser->>browser: User click on button browser->>eidp: Redirect login request loop n times - (multistep authentication) eidp->>browser: Present login screen browser->>eidp: Present login credentials end eidp->>eidp: Authenticate user eidp->>jans: Redirect to callback url with success response(code) jans->>jans: Validate code, id_token, userinfo opt if new user jans->>jans: Dynamic enrollment or registration end jans->>jans: Create internal Jans session jans->>rp: Redirect with Success response rp->>rp: Validate response rp->>browser: Page is accessed Prerequisites # The external oauth2 server authentication script External OAuth2 Provider credentials: you can choose any external OP server that follows OAuth2 standards and authentication features. RP application: This is your application that will be used by your users and where you want to add this auth feature. Configure Janssen server # 1. Add Custom Script # Create cs.json with the contents of a CUSTOM script. Edit the cs.json file's contents to reflect the addition of the oidc custom script. Populate the script field with oidc-jans-script.py script. Download oidc-jans-script.py script from here. This script needs to accept one property oidc_creds_file . which is a JSON file with your external oauth2 server details: // oidc_creds_file: /opt/oidc.json { \"op_server\": \"https://your.external.oauth2.server\", \"client_id\": \"xxxxxxxxxxxxxxxx-xxxxx-external-oauth2\", \"client_secret\": \"xxxxxxxxxxxxxx-xxxxx-external-oauth2\", \"authorization_uri\": \"https://your.external.oauth2.server/xx/xxxx\", \"token_uri\": \"https://your.external.oauth2.server/oauth/xx/xxx\", \"userinfo_uri\": \"https://your.external.oauth2.server/xxx/xxx\", \"redirect_uri\": \"https://your.jans.server/jans-auth/postlogin.htm\", \"scope\": \"openid profile email\", \"auto_redirect\": false, \"title\": \"Login with OAuth2\" } Property Description op_server Your external OAuth2 server FQDN client_id Client id of your external OAuth2 server client_secret Client secret of your external OAuth2 server authorization_uri Authorization endpoint of your external OAuth2 server token_uri Token endpoint of your external OAuth2 server userinfo_uri Userinfo endpoint of your external OAuth2 server redirect_uri Sample: https://<your.jans.server>/jans-auth/postlogin.htm , This is redirect URL where your OAuth2 server redirect back with code . Use this same URL to configure redirect urls at your external OAuth2 server. scope OAuth scopes auto_redirect If true, it will automatically redirect to external OAuth2 server otherwise you will get one button on jans login page. title This property is used to set text for a button which is shown on jans login page name field should reflect the use case i.e. oidc script_type field should be PERSON_AUTHENTICATION cs.json example: { \"dn\": null, \"inum\": null, \"name\": \"oidc\", \"aliases\": [], \"description\": \"OIDC Inbound custom script\", \"script\": \"_file /root/oidc-jans-script.py\", \"scriptType\": \"PERSON_AUTHENTICATION\", \"programmingLanguage\": \"JYTHON\", \"moduleProperties\": { \"value1\": null, \"value2\": null, \"description\": null }, \"configurationProperties\": [ { \"value1\": \"oidc_creds_file\", \"value2\": \"/opt/oidc.json\", \"description\": \"External server details\", \"hide\": true } ], \"level\": \"integer\", \"revision\": 0, \"enabled\": true, \"scriptError\": { \"raisedAt\": null, \"stackTrace\": null }, \"modified\": false, \"internal\": false } Add the custom script /opt/jans/jans-cli/config-cli.py --operation-id post-config-scripts --data /tmp/cs.json 2. Login Page Setup # OIDC Script needs a login page Download oidc-jans-login.xhtml from here Place it here /opt/jans/jetty/jans-auth/custom/pages/auth/oidc/ . If folders are not there then create them in the same order. Rename it to oidc.xhtml . Restart jans-auth server service jans-auth restart Check here for more details on custom login page. Now oidc script is an available authentication mechanism for your Janssen Server. This means that using OpenID Connect acr_values , applications can now request your external auth server for authentication. !!! Note To make sure oidc script has been enabled successfully, you can check your Janssen Server's OpenID Connect configuration by navigating to the following URL: https://<hostname>/.well-known/openid-configuration . Find acr_values_supported: and you should see oidc . Test with RP Client # RP(Relying party) is an application that will be used by your users when you want to add authentication and protect resources. Once you initiate auth request from your RP Application make sure to add acr_values=oidc in the request. acr_values is your script name as configured above.","title":"Inbound OIDC"},{"location":"admin/recipes/inbound-oidc/#inbound-openid-connect-authentication","text":"In this tutorial, we will see how you can integrate any inbound external oauth2 provider authentication in the Janssen server. If you are looking for social login support then check out passport module for that. We will use interception authentication script which is a PersonAuthenticationType script for whole flow. Currently, It supports Authorization Code Flow and client_secret_post token endpoint auth method.","title":"Inbound OpenId-Connect Authentication"},{"location":"admin/recipes/inbound-oidc/#authentication-flow","text":"You can add any external OAuth2 server authentication option and provision authenticated users to your Janssen server A.K.A. Inbound-identity. sequenceDiagram title OIDC Inbound Identity Flow participant browser as Browser participant rp as RP participant jans as Jans Authz Server participant eidp as External Provider autonumber browser->>rp: Request page browser->>jans: Invoke /authorize endpoint jans->>browser: Present \"Login with OAuth2\" button browser->>browser: User click on button browser->>eidp: Redirect login request loop n times - (multistep authentication) eidp->>browser: Present login screen browser->>eidp: Present login credentials end eidp->>eidp: Authenticate user eidp->>jans: Redirect to callback url with success response(code) jans->>jans: Validate code, id_token, userinfo opt if new user jans->>jans: Dynamic enrollment or registration end jans->>jans: Create internal Jans session jans->>rp: Redirect with Success response rp->>rp: Validate response rp->>browser: Page is accessed","title":"Authentication Flow"},{"location":"admin/recipes/inbound-oidc/#prerequisites","text":"The external oauth2 server authentication script External OAuth2 Provider credentials: you can choose any external OP server that follows OAuth2 standards and authentication features. RP application: This is your application that will be used by your users and where you want to add this auth feature.","title":"Prerequisites"},{"location":"admin/recipes/inbound-oidc/#configure-janssen-server","text":"","title":"Configure Janssen server"},{"location":"admin/recipes/inbound-oidc/#1-add-custom-script","text":"Create cs.json with the contents of a CUSTOM script. Edit the cs.json file's contents to reflect the addition of the oidc custom script. Populate the script field with oidc-jans-script.py script. Download oidc-jans-script.py script from here. This script needs to accept one property oidc_creds_file . which is a JSON file with your external oauth2 server details: // oidc_creds_file: /opt/oidc.json { \"op_server\": \"https://your.external.oauth2.server\", \"client_id\": \"xxxxxxxxxxxxxxxx-xxxxx-external-oauth2\", \"client_secret\": \"xxxxxxxxxxxxxx-xxxxx-external-oauth2\", \"authorization_uri\": \"https://your.external.oauth2.server/xx/xxxx\", \"token_uri\": \"https://your.external.oauth2.server/oauth/xx/xxx\", \"userinfo_uri\": \"https://your.external.oauth2.server/xxx/xxx\", \"redirect_uri\": \"https://your.jans.server/jans-auth/postlogin.htm\", \"scope\": \"openid profile email\", \"auto_redirect\": false, \"title\": \"Login with OAuth2\" } Property Description op_server Your external OAuth2 server FQDN client_id Client id of your external OAuth2 server client_secret Client secret of your external OAuth2 server authorization_uri Authorization endpoint of your external OAuth2 server token_uri Token endpoint of your external OAuth2 server userinfo_uri Userinfo endpoint of your external OAuth2 server redirect_uri Sample: https://<your.jans.server>/jans-auth/postlogin.htm , This is redirect URL where your OAuth2 server redirect back with code . Use this same URL to configure redirect urls at your external OAuth2 server. scope OAuth scopes auto_redirect If true, it will automatically redirect to external OAuth2 server otherwise you will get one button on jans login page. title This property is used to set text for a button which is shown on jans login page name field should reflect the use case i.e. oidc script_type field should be PERSON_AUTHENTICATION cs.json example: { \"dn\": null, \"inum\": null, \"name\": \"oidc\", \"aliases\": [], \"description\": \"OIDC Inbound custom script\", \"script\": \"_file /root/oidc-jans-script.py\", \"scriptType\": \"PERSON_AUTHENTICATION\", \"programmingLanguage\": \"JYTHON\", \"moduleProperties\": { \"value1\": null, \"value2\": null, \"description\": null }, \"configurationProperties\": [ { \"value1\": \"oidc_creds_file\", \"value2\": \"/opt/oidc.json\", \"description\": \"External server details\", \"hide\": true } ], \"level\": \"integer\", \"revision\": 0, \"enabled\": true, \"scriptError\": { \"raisedAt\": null, \"stackTrace\": null }, \"modified\": false, \"internal\": false } Add the custom script /opt/jans/jans-cli/config-cli.py --operation-id post-config-scripts --data /tmp/cs.json","title":"1. Add Custom Script"},{"location":"admin/recipes/inbound-oidc/#2-login-page-setup","text":"OIDC Script needs a login page Download oidc-jans-login.xhtml from here Place it here /opt/jans/jetty/jans-auth/custom/pages/auth/oidc/ . If folders are not there then create them in the same order. Rename it to oidc.xhtml . Restart jans-auth server service jans-auth restart Check here for more details on custom login page. Now oidc script is an available authentication mechanism for your Janssen Server. This means that using OpenID Connect acr_values , applications can now request your external auth server for authentication. !!! Note To make sure oidc script has been enabled successfully, you can check your Janssen Server's OpenID Connect configuration by navigating to the following URL: https://<hostname>/.well-known/openid-configuration . Find acr_values_supported: and you should see oidc .","title":"2. Login Page Setup"},{"location":"admin/recipes/inbound-oidc/#test-with-rp-client","text":"RP(Relying party) is an application that will be used by your users when you want to add authentication and protect resources. Once you initiate auth request from your RP Application make sure to add acr_values=oidc in the request. acr_values is your script name as configured above.","title":"Test with RP Client"},{"location":"admin/recipes/inbound-saml/","tags":["administration","recipes"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Inbound saml"},{"location":"admin/recipes/inbound-saml/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/inbound-saml/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/inbound-saml/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/locking-accounts/","tags":["administration","recipes"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Locking or Disabling Accounts"},{"location":"admin/recipes/locking-accounts/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/locking-accounts/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/locking-accounts/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/mobile-apps/","tags":["administration","recipes"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Mobile apps"},{"location":"admin/recipes/mobile-apps/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/mobile-apps/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/mobile-apps/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/passportjs/","tags":["administration","recipes"],"text":"Overview # This is a guide for user authentication at any external Social Providers(Google, Apple, Facebook, etc) using Passport-JS(a.k.a \"inbound identity\"). Components # The Passport Social authentication script The Passport JS Project Authentication Flow # After users authenticate at the external social identity provider, the control flows back to Janssen Authentication server where the user is verified and the user-id is provisioned into the Janssen server. Diagram source file Role of Passport-JS project and Janssen's Authentication server # Passport-js project encrypts and signs user data before passing it to the Janssen server. Janssen Auth server verifies the received JWT, decrypts data, add/update user into LDAP, and marks the user as authenticated. Check Script Code For details. Diagram source file Setup and configurations # Setup Passport JS Project # Passport JS is very good library in Node JS which helps to add many social provider authentication in project. For this Inbound Jans Flow, You have to make a Passport Node JS project which help to generates auth request for your external social providers, get the user information, and send it to the Janssen server. Below things need to add in Passport JS Project to setup complete auth flow with Jans. Make a token endpoint which expose token with unique id. Jans will use this endpoint to get token and use this token for secur auth request. Passport Project has to validate this token in Jans request. This is just a simple strategy to protect passport endpoint from spam requests and only allow jans to request it. Code sample: // Encryption compatible with Jans EncryptionService // Salt File path: /etc/jans/conf/salt router . get ( '/token' , function ( req , res , next ) { const t = jwt . sign ( { jwt : uuidv4 () }, '<saltfilevalue>' , { expiresIn : 120 } // 2 min expiration ) res . status ( 200 ). send ({ token_ : t }) // key should be token_ } ) You need to use Salt File /etc/jans/conf/salt as a secret key. You will get this salt file after Jans intallation. Jans interception script uses this same file for decryption. Create auth request endpoints which will be request by User on Jans auth login page. For Example: Suppose you have added google strategy in your passport project. In that case you can make a endpoint like /google/:token . google is provider id in providers_json_file . token is the same token which we created in above step. After authentication Passport Project has to send encoded userinfo data to Jans https://<your.jans.server.com>/jans-auth/postlogin.htm . Below is the Node JS code sample to send POST request with data to Jans Post Login Endpoint. const postUrl = \"https://<your.jans.server.com>/jans-auth/postlogin.htm\" res . set ( 'content-type' , 'text/html;charset=UTF-8' ) return res . status ( 200 ). send ( ` <html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\"> <body onload=\"document.forms[0].submit()\"> <noscript> <p> <b>Note:</b> your browser does not support JavaScript, please press the Continue button to proceed. </p> </noscript> <form action=\" ${ postUrl } \" method=\"post\"> <div> <input type=\"hidden\" name=\"user\" value=\" ${ jwt } \"/> <noscript> <input type=\"submit\" value=\"Continue\"/> </noscript> </div> </form> </body> </html>` ) Check next step to generate jwt . To make encoded userinfo data, use jwt private key signing technique. Check below sample code: // mapped user info data with ldap attributes const user = { uid : profile . username || profile . id , mail : profile . email , cn : profile . displayName , displayName : profile . displayName , givenName : profile . name . givenName , sn : profile . name . familyName , provider : \"<your-social-provider-name>\" , // e.g. google } jwt . sign ({ iss : 'https://<your.jans.server.com>/jans-auth/postlogin.htm' , sub : user . uid , aud : 'https://<your.jans.server.com>' , jti : uuidv4 (), exp : now / 1000 + 30 , iat : now , data : encrypt ( user ) }, privateKey , defaultRpOptions ) // Check `generate Keystore` section below to generate keys const privateKey = `-----BEGIN PRIVATE KEY----- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx Your Private Key xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -----END PRIVATE KEY-----` cosnt defaultRpOptions = { algorithm : config . get ( 'keyAlg' ), header : { typ : 'JWT' , alg : config . get ( 'keyAlg' ), kid : config . get ( 'keyId' ) } } function encrypt ( obj ) { // Encryption compatible with Jans EncryptionService // Salt File path: /etc/jans/conf/salt const pt = JSON . stringify ( obj ) const encrypt = crypto . createCipheriv ( 'des-ede3-ecb' , '<saltfilevalue>' , '' ) let encrypted = encrypt . update ( pt , 'utf8' , 'base64' ) encrypted += encrypt . final ( 'base64' ) return encrypted } Follow Steps in Generate Keystore section to generate private key. You can add as many as possible passport strategies in your passport project. Above steps are little complex, use this sample code file to build your passport application. Apache proxy setup # For seamless flow, You can deploy Passport Project on Jans server and you can use an apache proxy pass to configure the passport with jans-server. Add the below configuration to the Janssen apache server and restart the apache server. <Location /passport> ProxyPass http://localhost:8090/passport retry=5 connectiontimeout=60 timeout=60 Order deny,allow Allow from all </Location> After this configurations, you need to use jans-fqdn in passport callback URL. This is optional configurations, you can deploy your passport project on another server. Add passport-social script # Download the script from here and add it to Janssen Server using jans-cli . After Janssen Server installation, you will get jans-cli . Follow this jans-cli guide to add a custom script in Janssen. The custom script has the following properties: Property Description key_store_file Keystore file path. Use these instructions to create a keystore. key_store_password Keystore file secret password providers_json_file Array of JSON Objects. Provider JSON file with social provider which you want to add for authentication. passport_fqdn Passport FQDN e.g. https://your-passport.com passport_token_endpoint_path It will use passport_fqdn as a prefix so just add path. e.g. /passport/token . Jans request this endpoint to get token for next auth request here . Check Step-1 in Setup Passport section to make token endpoint. passport_auth_endpoint_path It will use passport_fqdn as a prefix so just add path. e.g. /passport/auth . Jans request this endpoint to initiate auth request here . Check Step-2 in Setup Passport section to make passport auth endpoint. Jans will append provider and token during auth request e.g. If you have added google provider with id google in providers_json_file then jans request will be look like https://your-passport.com/passport/auth/google/<token> . Note: After adding and enabling successfully, you can check your Janssen's Auth Server OpenID Connect configuration by navigating to the following URL: https://your-jans-server.com/.well-known/openid-configuration. Find \"acr_values_supported\" and you should see passport-social . Note: Once you initiate auth request from your RP Application make sure to add acr_values=passport-social in the request. acr_values is your script name. Below is the providers_json_file format: [ { \"id\": \"google\", \"displayName\": \"google\", \"requestForEmail\": false, \"emailLinkingSafe\": false, \"logoImg\": \"img-url-or-path\" } ] Property Description id Unique string for your provider displayName This name will be shown on auth page logoImg This logo image will be shown on auth page e.g. /jans-auth/img/glu_icon.png requestForEmail It is not required to be true . If you set it to true then it will prompt a user to enter an email. emailLinkingSafe It is not required to be true . If you want to link to existing users then set it to true Customize login pages # Passport-social script uses passportlogin.xhtml and passportpostlogin.xhtml which are already comes which Janssen installation. No need to do anything. For UI Customization, you can download current page source code from here , modify UI, replace pages at path /opt/jans/jetty/jans-auth/custom/pages/auth/passport/ and restart jans-auth server. Generate Keystore # Passport sends private key sign user data jwt to janssen server, for that we need to generate Keystore. keystore is a safe and passport-protected private key container. Use the below commands: # generate Keystore keytool -genkey -keyalg RSA -keysize 2048 -v -keystore <keystore-file-name>.jks -alias <kid-unique-string> Example: keytool -genkey -keyalg RSA -keysize 2048 -v -keystore keystore.jks -alias kid-2s3d5-f5-6f5-f4dd4 This command will prompt you to enter a password. Whichever password you have entered, this same password you need to configure key_store_password at Janssen custom script configuration. <kid-unique-string> is your kid which you need for passport JWT keyId config. keystore.jks need it to configure key_store_file property at Janssen custom script configuration. # JKS to PKCS#12 keytool -importkeystore -srckeystore keystore.jks \\ -destkeystore keystore.p12 \\ -srcstoretype jks \\ -deststoretype pkcs12 # PKCS#12 to PEM openssl pkcs12 -nodes -in keystore.p12 -out keystore.pem You can see many things in keystore.pem . but we need only the private key part to make a new file and add the private key part there like in the below example: // private.pem -----BEGIN PRIVATE KEY----- MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCSETIkMkVKOwwO XkYVPaBdz+lhsXpMjMJR4dTdFzn01hvcEDUf57wLmgvBXnfWDXEyEFrsvQGePZw7 foYAdnCtSqZW+dLsh6SUxL5iK0uakiY4SBX401fpbhdCeSC1pK8K+qE3jgc/o60d oRAHLz/RCwaa8BszTwyxlLMh7xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxxxxxxxxxxxPQEK0b5mPeV84fZJlfbRv01PIrwGRZJtcWC9Ke5 xSBoh0uvpZ37z2CJC7HZSz+bYz0ZhYiX372gl7BUxbLYdCz2Z9l0DDhwCO68wCzC nualRv0U2Y5EYkekj180KnAR -----END PRIVATE KEY----- we need this file for the passport keyPath config. Testing at RP application # RP(Relying party) is an application that will be used by your users when you want to add authentication and protect resources. Once you initiate auth request from your RP Application make sure to add acr_values=passport-social in the request. acr_values is your script name as configured above.","title":"Passportjs"},{"location":"admin/recipes/passportjs/#overview","text":"This is a guide for user authentication at any external Social Providers(Google, Apple, Facebook, etc) using Passport-JS(a.k.a \"inbound identity\").","title":"Overview"},{"location":"admin/recipes/passportjs/#components","text":"The Passport Social authentication script The Passport JS Project","title":"Components"},{"location":"admin/recipes/passportjs/#authentication-flow","text":"After users authenticate at the external social identity provider, the control flows back to Janssen Authentication server where the user is verified and the user-id is provisioned into the Janssen server. Diagram source file","title":"Authentication Flow"},{"location":"admin/recipes/passportjs/#role-of-passport-js-project-and-janssens-authentication-server","text":"Passport-js project encrypts and signs user data before passing it to the Janssen server. Janssen Auth server verifies the received JWT, decrypts data, add/update user into LDAP, and marks the user as authenticated. Check Script Code For details. Diagram source file","title":"Role of Passport-JS project and Janssen's Authentication server"},{"location":"admin/recipes/passportjs/#setup-and-configurations","text":"","title":"Setup and configurations"},{"location":"admin/recipes/passportjs/#setup-passport-js-project","text":"Passport JS is very good library in Node JS which helps to add many social provider authentication in project. For this Inbound Jans Flow, You have to make a Passport Node JS project which help to generates auth request for your external social providers, get the user information, and send it to the Janssen server. Below things need to add in Passport JS Project to setup complete auth flow with Jans. Make a token endpoint which expose token with unique id. Jans will use this endpoint to get token and use this token for secur auth request. Passport Project has to validate this token in Jans request. This is just a simple strategy to protect passport endpoint from spam requests and only allow jans to request it. Code sample: // Encryption compatible with Jans EncryptionService // Salt File path: /etc/jans/conf/salt router . get ( '/token' , function ( req , res , next ) { const t = jwt . sign ( { jwt : uuidv4 () }, '<saltfilevalue>' , { expiresIn : 120 } // 2 min expiration ) res . status ( 200 ). send ({ token_ : t }) // key should be token_ } ) You need to use Salt File /etc/jans/conf/salt as a secret key. You will get this salt file after Jans intallation. Jans interception script uses this same file for decryption. Create auth request endpoints which will be request by User on Jans auth login page. For Example: Suppose you have added google strategy in your passport project. In that case you can make a endpoint like /google/:token . google is provider id in providers_json_file . token is the same token which we created in above step. After authentication Passport Project has to send encoded userinfo data to Jans https://<your.jans.server.com>/jans-auth/postlogin.htm . Below is the Node JS code sample to send POST request with data to Jans Post Login Endpoint. const postUrl = \"https://<your.jans.server.com>/jans-auth/postlogin.htm\" res . set ( 'content-type' , 'text/html;charset=UTF-8' ) return res . status ( 200 ). send ( ` <html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\"> <body onload=\"document.forms[0].submit()\"> <noscript> <p> <b>Note:</b> your browser does not support JavaScript, please press the Continue button to proceed. </p> </noscript> <form action=\" ${ postUrl } \" method=\"post\"> <div> <input type=\"hidden\" name=\"user\" value=\" ${ jwt } \"/> <noscript> <input type=\"submit\" value=\"Continue\"/> </noscript> </div> </form> </body> </html>` ) Check next step to generate jwt . To make encoded userinfo data, use jwt private key signing technique. Check below sample code: // mapped user info data with ldap attributes const user = { uid : profile . username || profile . id , mail : profile . email , cn : profile . displayName , displayName : profile . displayName , givenName : profile . name . givenName , sn : profile . name . familyName , provider : \"<your-social-provider-name>\" , // e.g. google } jwt . sign ({ iss : 'https://<your.jans.server.com>/jans-auth/postlogin.htm' , sub : user . uid , aud : 'https://<your.jans.server.com>' , jti : uuidv4 (), exp : now / 1000 + 30 , iat : now , data : encrypt ( user ) }, privateKey , defaultRpOptions ) // Check `generate Keystore` section below to generate keys const privateKey = `-----BEGIN PRIVATE KEY----- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx Your Private Key xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -----END PRIVATE KEY-----` cosnt defaultRpOptions = { algorithm : config . get ( 'keyAlg' ), header : { typ : 'JWT' , alg : config . get ( 'keyAlg' ), kid : config . get ( 'keyId' ) } } function encrypt ( obj ) { // Encryption compatible with Jans EncryptionService // Salt File path: /etc/jans/conf/salt const pt = JSON . stringify ( obj ) const encrypt = crypto . createCipheriv ( 'des-ede3-ecb' , '<saltfilevalue>' , '' ) let encrypted = encrypt . update ( pt , 'utf8' , 'base64' ) encrypted += encrypt . final ( 'base64' ) return encrypted } Follow Steps in Generate Keystore section to generate private key. You can add as many as possible passport strategies in your passport project. Above steps are little complex, use this sample code file to build your passport application.","title":"Setup Passport JS Project"},{"location":"admin/recipes/passportjs/#apache-proxy-setup","text":"For seamless flow, You can deploy Passport Project on Jans server and you can use an apache proxy pass to configure the passport with jans-server. Add the below configuration to the Janssen apache server and restart the apache server. <Location /passport> ProxyPass http://localhost:8090/passport retry=5 connectiontimeout=60 timeout=60 Order deny,allow Allow from all </Location> After this configurations, you need to use jans-fqdn in passport callback URL. This is optional configurations, you can deploy your passport project on another server.","title":"Apache proxy setup"},{"location":"admin/recipes/passportjs/#add-passport-social-script","text":"Download the script from here and add it to Janssen Server using jans-cli . After Janssen Server installation, you will get jans-cli . Follow this jans-cli guide to add a custom script in Janssen. The custom script has the following properties: Property Description key_store_file Keystore file path. Use these instructions to create a keystore. key_store_password Keystore file secret password providers_json_file Array of JSON Objects. Provider JSON file with social provider which you want to add for authentication. passport_fqdn Passport FQDN e.g. https://your-passport.com passport_token_endpoint_path It will use passport_fqdn as a prefix so just add path. e.g. /passport/token . Jans request this endpoint to get token for next auth request here . Check Step-1 in Setup Passport section to make token endpoint. passport_auth_endpoint_path It will use passport_fqdn as a prefix so just add path. e.g. /passport/auth . Jans request this endpoint to initiate auth request here . Check Step-2 in Setup Passport section to make passport auth endpoint. Jans will append provider and token during auth request e.g. If you have added google provider with id google in providers_json_file then jans request will be look like https://your-passport.com/passport/auth/google/<token> . Note: After adding and enabling successfully, you can check your Janssen's Auth Server OpenID Connect configuration by navigating to the following URL: https://your-jans-server.com/.well-known/openid-configuration. Find \"acr_values_supported\" and you should see passport-social . Note: Once you initiate auth request from your RP Application make sure to add acr_values=passport-social in the request. acr_values is your script name. Below is the providers_json_file format: [ { \"id\": \"google\", \"displayName\": \"google\", \"requestForEmail\": false, \"emailLinkingSafe\": false, \"logoImg\": \"img-url-or-path\" } ] Property Description id Unique string for your provider displayName This name will be shown on auth page logoImg This logo image will be shown on auth page e.g. /jans-auth/img/glu_icon.png requestForEmail It is not required to be true . If you set it to true then it will prompt a user to enter an email. emailLinkingSafe It is not required to be true . If you want to link to existing users then set it to true","title":"Add passport-social script"},{"location":"admin/recipes/passportjs/#customize-login-pages","text":"Passport-social script uses passportlogin.xhtml and passportpostlogin.xhtml which are already comes which Janssen installation. No need to do anything. For UI Customization, you can download current page source code from here , modify UI, replace pages at path /opt/jans/jetty/jans-auth/custom/pages/auth/passport/ and restart jans-auth server.","title":"Customize login pages"},{"location":"admin/recipes/passportjs/#generate-keystore","text":"Passport sends private key sign user data jwt to janssen server, for that we need to generate Keystore. keystore is a safe and passport-protected private key container. Use the below commands: # generate Keystore keytool -genkey -keyalg RSA -keysize 2048 -v -keystore <keystore-file-name>.jks -alias <kid-unique-string> Example: keytool -genkey -keyalg RSA -keysize 2048 -v -keystore keystore.jks -alias kid-2s3d5-f5-6f5-f4dd4 This command will prompt you to enter a password. Whichever password you have entered, this same password you need to configure key_store_password at Janssen custom script configuration. <kid-unique-string> is your kid which you need for passport JWT keyId config. keystore.jks need it to configure key_store_file property at Janssen custom script configuration. # JKS to PKCS#12 keytool -importkeystore -srckeystore keystore.jks \\ -destkeystore keystore.p12 \\ -srcstoretype jks \\ -deststoretype pkcs12 # PKCS#12 to PEM openssl pkcs12 -nodes -in keystore.p12 -out keystore.pem You can see many things in keystore.pem . but we need only the private key part to make a new file and add the private key part there like in the below example: // private.pem -----BEGIN PRIVATE KEY----- MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCSETIkMkVKOwwO XkYVPaBdz+lhsXpMjMJR4dTdFzn01hvcEDUf57wLmgvBXnfWDXEyEFrsvQGePZw7 foYAdnCtSqZW+dLsh6SUxL5iK0uakiY4SBX401fpbhdCeSC1pK8K+qE3jgc/o60d oRAHLz/RCwaa8BszTwyxlLMh7xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxxxxxxxxxxxPQEK0b5mPeV84fZJlfbRv01PIrwGRZJtcWC9Ke5 xSBoh0uvpZ37z2CJC7HZSz+bYz0ZhYiX372gl7BUxbLYdCz2Z9l0DDhwCO68wCzC nualRv0U2Y5EYkekj180KnAR -----END PRIVATE KEY----- we need this file for the passport keyPath config.","title":"Generate Keystore"},{"location":"admin/recipes/passportjs/#testing-at-rp-application","text":"RP(Relying party) is an application that will be used by your users when you want to add authentication and protect resources. Once you initiate auth request from your RP Application make sure to add acr_values=passport-social in the request. acr_values is your script name as configured above.","title":"Testing at RP application"},{"location":"admin/recipes/password-expirations/","tags":["administration","recipes"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Password Expirations"},{"location":"admin/recipes/password-expirations/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/password-expirations/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/password-expirations/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/passwordless/","tags":["administration","recipes"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Passwordless"},{"location":"admin/recipes/passwordless/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/passwordless/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/passwordless/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/registration/","tags":["administration","recipes"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Registration"},{"location":"admin/recipes/registration/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/registration/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/registration/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/returning-group/","tags":["administration","recipes"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Returning group"},{"location":"admin/recipes/returning-group/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/returning-group/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/returning-group/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/single-page-apps/","tags":["administration","recipes"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Single page apps"},{"location":"admin/recipes/single-page-apps/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/single-page-apps/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/single-page-apps/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/social-login/","tags":["administration","Social login","Google","Apple","Facebook"],"text":"Implementing Social logins # You can use a PersonAuthenticationType script to allow users to sign using credentials from popular Social Identity providers or Inbound Identity Providers like Facebook, Google and Apple. After users authenticate, we provision their Social Identity Provider credentials into the Jans-auth server. No additional username, password, credentials are needed for this user. Facebook Google Apple Following is a high-level diagram depicting a typical flow - user authentication on a Social Identity Platform and subsequent user provisioning on Jans-Auth server. You can copy paste this sequence in https://sequencediagram.org/ title Social login Jans AS<-User agent: 1. Invoke /authorize endpoint Jans AS->User agent: 2. Discovery: Present list of remote IDPs (Google, Apple, FB...) User agent->Jans AS: 3. Select IDP (e.g. click on button) Jans AS->Social login Identity Provider: 4. Redirects login request to IDP loop n times - (multistep authentication) Social login Identity Provider->User agent: 5. present login screen User agent->Social login Identity Provider: 6. present credentials end Social login Identity Provider->Jans AS: 7. return id_token, user claims Jans AS->Jans AS: 8. validate id_token,\\ncreate internal Jans session opt if new user Jans AS->Jans AS: 9. Dynamic enrollment or registration end Jans AS->User agent: 10. write Jans session cookie User provisioning # After a user has logged in at an external provider a new record is added in local LDAP - or updated if the user is known. To determine if a user was already added, a string is composed with the provider name and the user ID. For example, if user \"MrBrown123\" has logged in at Twitter, the string would look like passport-twitter:mrbrown123 . An LDAP search is performed for a match in the people branch for an entry where attribute jansExtUid equals passport-twitter:mrbrown123 . If there are no matches, an entry is added using the values received from the external provider (after having applied the corresponding attribute mapping) attaching the computed value for jansExtUid . The user profile can contain single or multivalued attributes. \ud83d\udcdd The prefix passport-<provider-name> is used to keep the code compatible with the Passport.js implementation for Inbound Identity","title":"Social Login"},{"location":"admin/recipes/social-login/#implementing-social-logins","text":"You can use a PersonAuthenticationType script to allow users to sign using credentials from popular Social Identity providers or Inbound Identity Providers like Facebook, Google and Apple. After users authenticate, we provision their Social Identity Provider credentials into the Jans-auth server. No additional username, password, credentials are needed for this user. Facebook Google Apple Following is a high-level diagram depicting a typical flow - user authentication on a Social Identity Platform and subsequent user provisioning on Jans-Auth server. You can copy paste this sequence in https://sequencediagram.org/ title Social login Jans AS<-User agent: 1. Invoke /authorize endpoint Jans AS->User agent: 2. Discovery: Present list of remote IDPs (Google, Apple, FB...) User agent->Jans AS: 3. Select IDP (e.g. click on button) Jans AS->Social login Identity Provider: 4. Redirects login request to IDP loop n times - (multistep authentication) Social login Identity Provider->User agent: 5. present login screen User agent->Social login Identity Provider: 6. present credentials end Social login Identity Provider->Jans AS: 7. return id_token, user claims Jans AS->Jans AS: 8. validate id_token,\\ncreate internal Jans session opt if new user Jans AS->Jans AS: 9. Dynamic enrollment or registration end Jans AS->User agent: 10. write Jans session cookie","title":"Implementing Social logins"},{"location":"admin/recipes/social-login/#user-provisioning","text":"After a user has logged in at an external provider a new record is added in local LDAP - or updated if the user is known. To determine if a user was already added, a string is composed with the provider name and the user ID. For example, if user \"MrBrown123\" has logged in at Twitter, the string would look like passport-twitter:mrbrown123 . An LDAP search is performed for a match in the people branch for an entry where attribute jansExtUid equals passport-twitter:mrbrown123 . If there are no matches, an entry is added using the values received from the external provider (after having applied the corresponding attribute mapping) attaching the computed value for jansExtUid . The user profile can contain single or multivalued attributes. \ud83d\udcdd The prefix passport-<provider-name> is used to keep the code compatible with the Passport.js implementation for Inbound Identity","title":"User provisioning"},{"location":"admin/recipes/stepped-up-authn/","text":"tags: - administration - recipes - stepped-up authentication - Update token - modify access token - scope What is Stepped Up Authentication ? # While navigating through an application, a user is challenged to produce an additional authentication when a certain API (of higher criticality) accessed by the client, does not have the needed scope. Consider the following sequence of events : 1. A user is logged in to an app using very basic authentication mechanism. Say login- password. 2. The user navigates through the app. 3. When the user attempts to access a critical resource, he is presented with another authentication step say otp. 4. The user, after successful authentication, has the needed access token to access the critical resource. sequenceDiagram title Stepped-up Authentication actor Person participant Browser participant Website participant Auth Server participant API autonumber Website->>API: request some endpoint API->>API: Enforce<br> presence of <br> 'otp' scope<br> in access_token API->>Website: 3. 401 Unauthorized<br>WWW-Authenticate: Bearer error=\"insufficient_user_authentication\" Website->>Browser: Enforce additional challenge on the user<br> (Enter OTP) Person->>Browser:Enter OTP Browser->>Auth Server: /authorize endpoint Note right of Auth Server: Stepped-up Authentication Auth Server->>Auth Server:Validate OTP (Person authentication script) Note right of Auth Server: Modify scope of AT Auth Server->>Auth Server: Modify scope of AT to include OTP (Update token script) Auth Server->> Website: Return Access Token with scope containing OTP Implementation details : # This implementation has been broken down to 5 parts highlighted in different colours. The details contain sample code that can be used to be build the flow using Person Authentication Scripts and Update Token Scripts sequenceDiagram title Implementation Stepped-up authn in Janssen's Authentication server actor Person participant Browser participant Website participant Auth Server participant API autonumber rect rgb(255, 223, 211) Website->>Browser: html login form Person->>Browser: Update PII Browser->>Website: POST Website->>Auth Server: login request /authorize?response_type=code id_token Auth Server->> Auth Server: UpdateTokenScript - place user info in id_token <br>e.g. encrypted inum Auth Server ->>Website: return id_token and code end rect rgb(211,211,211) Website->> Website: Extract the user info from id_token and save in website's session (not to be confused with Auth Server session) end rect rgb(212, 238, 227) Website->>API: request some endpoint API->>API: Enforce<br> presence of <br> 'otp' scope<br> in access_token API->>Website: 401 Unauthorized<br>WWW-Authenticate: <br>Bearer error=\"insufficient_user_authentication\" Website->>Browser: redirect to AS end rect rgb(186,225,255) Browser->>Auth Server: authorize?acr_values=otp<br>&client_id=1234<br>&scope=otp + other scopes<br>&response_type=code<br>&client_id=____<br>&redirect_uri=____<br>&state=_____<br>&nonce=____<br>&prompt=login&<br>login_hint=encrypted_inum Auth Server->>Auth Server: Get encrypted user inum,<br>from login_hint, and decrypt<br>return None, if inum not found<br> Auth Server->>Browser: Display OTP Page Person->>Browser: enter OTP Browser->>Auth Server: POST OTP form Auth Server->>Auth Server: validate OTP Auth Server->>Auth Server: add session variable scope_enforce= otp Auth Server->>Browser: redirect to callback Browser->>Website: callback URI Website->>Auth Server: /token + client creds Auth Server->>Auth Server: Update token script is invoked. <br> read session variable scope-enforce <br> update scope of AT to include otp Auth Server->>Website: access_token, id_token,<br>refresh_token end rect rgb(255,255,186) Website->>API: request some endpoint<br>(with new access_token) API->>API: verify the acess_token. It should contain the necessary scope i.e otp end Step A: Ensure id_token has some info to identify the user: # When the user logs in for the very first time and performs basic authentication, the Update Token script can be used to place a custom claim containing some user information like User permissions User personal information Internal user identifier. In this example, we store the encrypted inum of the user as a \"custom claim\" in the id_token. A good practice is to not put the primary key / user identifier in plain text UpdateToken script: def modifyIdToken(self, jsonWebResponse, context): print \"Update token script. Modify idToken: %s\" % jsonWebResponse sessionIdService = CdiUtil.bean(SessionIdService) session = sessionIdService.getSessionByDn(context.getGrant().getSessionDn()) # fetch from persistence userService = CdiUtil.bean(UserService) user_name = session.getSessionAttributes().get(\"auth_user\") foundUser = userService.getUserByAttribute(\"uid\", user_name) userInum = foundUser.getAttribute(\"inum\") encryptedInum = CdiUtil.bean(EncryptionService).encrypt(userInum) print encryptedInum #custom claim in id_token jsonWebResponse.getClaims().setClaim(\"someFancyName\", encryptedInum) return True Step B: Website (RP) extracts the user info from id_token: # The Website (RP / client) should extract the user info from id_token and save it in the website's session. The website's session should not be confused with the Auth Server's session. The Auth Server sessions are state-less and any session related information that the website wishes to consume can only be that which can be extracted from an id_token. Step C: Critical Resource accessed by user. # Website detects critical resource, examines the Access token presented by the client. Redirects to RP for stepped-up authentication Step D: Stepped-up authentication # Website calls /authorize endpoint with login_hint=encrypted_inum, which was previously extracted from id_token in Step B Use login_hint , id_token_hint or request -jwe to identify the user in Person Authentication script used to perform the additional authentication step. Stepped-up Authn Person Authentication script: def prepareForStep(self, configurationAttributes, requestParameters, step): print \"OTP test. Prepare for steps %s\" %step if (step ==1): try: userService = CdiUtil.bean(UserService) encryptedInum = ServerUtil.getFirstValue(requestParameters, \"login_hint\") identity = CdiUtil.bean(Identity) print encryptedInum inum = CdiUtil.bean(EncryptionService).decrypt(encryptedInum) foundUser = userService.getUserByInum(inum ) print foundUser username = foundUser.getUserId() print \"username is %s \" % username identity.setWorkingParameter(\"uusername\", username ) return True except: print \"OTP. Exception: '%s'\" % (sys.exc_info()[1]) return False else: return False 3. Validate user otp 4. \"enforce_scope=otp\", add to session def authenticate(self, configurationAttributes, requestParameters, step): print(\"OTP, authentication for step %s\" %step) authenticationService = CdiUtil.bean(AuthenticationService) identity = CdiUtil.bean(Identity) userService = CdiUtil.bean(UserService) username = identity.getWorkingParameter(\"username\") print username #Here we set hard coded otp otp = '12345' inputOtp = ServerUtil.getFirstValue(requestParameters, \"loginForm:otpCode\") print(\"Client end otp %s \" %inputOtp) print(\"Server end otp %s\" %otp) if otp == inputOtp: print \"OTP Authenticated\" print CdiUtil.bean(SessionIdService).getSessionId() authenticationService.authenticate('username') # adding to session identity.setWorkingParameter(\"enforce_scope\",\"otp\") return True else: print(\"Wrong otp\") return errorMessage(\"Wrong otp entered\") return False 5: Update AT with relevant scope * Check the session variable \"enforce_scope\" and add the \"scope\" to the Access token. * You can also modify Access token header claims and regular claims using the modifyAccessToken in the Update Token Script. Update Token script: def modifyAccessToken(self, accessToken, context): #read from session sessionIdService = CdiUtil.bean(SessionIdService) sessionId = sessionIdService.getSessionByDn(context.getGrant().getSessionDn()) # fetch from persistence enforce_scope = sessionId.getSessionAttributes().get(\"enforce_scope \") if enforce_scope not None: context.overwriteAccessTokenScopes(accessToken, Sets.newHashSet(\"existingScope1\", \"existingScope2\", \"mynewscope\")) context.getHeader().setClaim(\"custom_header_name\", \"custom_header_value\") context.getClaims().setClaim(\"claim_name\", \"claimValue\") Step E: Access the critical resource with new Access token: # The access token contains needed scope because the scopes were updated in Step D, point 5 Update token script # from io.jans.as.server.service import AuthenticationService from io.jans.as.server.service import UserService from io.jans.as.server.service import SessionIdService from io.jans.as.server.util import ServerUtil from io.jans.service.cdi.util import CdiUtil from io.jans.as.service.common import EncryptionService from io.jans.model.custom.script.type.token import UpdateTokenType class UpdateToken(UpdateTokenType): def __init__(self, currentTimeMillis): self.currentTimeMillis = currentTimeMillis def init(self, customScript, configurationAttributes): print \"Update token script. Initializing ...\" print \"Update token script. Initialized successfully\" return True def destroy(self, configurationAttributes): print \"Update token script. Destroying ...\" print \"Update token script. Destroyed successfully\" return True def getApiVersion(self): return 11 def modifyIdToken(self, jsonWebResponse, context): print \"Update token script. Modify idToken: %s\" % jsonWebResponse sessionIdService = CdiUtil.bean(SessionIdService) session = sessionIdService.getSessionByDn(context.getGrant().getSessionDn()) # fetch from persistence userService = CdiUtil.bean(UserService) user_name = session.getSessionAttributes().get(\"auth_user\") foundUser = userService.getUserByAttribute(\"uid\", user_name) userInum = foundUser.getAttribute(\"inum\") print userInum encryptedInum = CdiUtil.bean(EncryptionService).encrypt(userInum) print encryptedInum #custom claim in id_token jsonWebResponse.getClaims().setClaim(\"someFancyName\", encryptedInum) #print \"Update token script. After modify idToken: %s\" % jsonWebResponse #jsonWebResponse.getClaims().setClaim(\"someFancyName\", \"madhu\") return True def modifyAccessToken(self, accessToken, context): #read from session sessionIdService = CdiUtil.bean(SessionIdService) sessionId = sessionIdService.getSessionByDn(context.getGrant().getSessionDn()) # fetch from persistence enforce_scope = sessionId.getSessionAttributes().get(\"enforce_scope\") if enforce_scope is not None: context.overwriteAccessTokenScopes(accessToken, Sets.newHashSet(\"openid\", \"profile\", \"otp\")) return True def modifyRefreshToken(self, refreshToken, context): return True def getRefreshTokenLifetimeInSeconds(self, context): return 0 def getIdTokenLifetimeInSeconds(self, context): return 0 def getAccessTokenLifetimeInSeconds(self, context): return 0 OTP script # from io.jans.as.server.util import ServerUtil from io.jans.service.cdi.util import CdiUtil from io.jans.as.server.security import Identity from io.jans.model.custom.script.type.auth import PersonAuthenticationType from io.jans.as.server.service import AuthenticationService from io.jans.as.server.service import UserService from io.jans.as.server.service import SessionIdService from org.jans.as.server.service import CookieService from javax.faces.application import FacesMessage from org.gluu.jsf2.message import FacesMessages from org.gluu.jsf2.service import FacesService from io.jans.util import StringHelper from java.util import Arrays def errorMessage(errorInfo): facesMessages = CdiUtil.bean(FacesMessages) facesMessages.setKeepMessages() facesMessages.clear() facesMessages.add(FacesMessage.SEVERITY_ERROR, errorInfo) return False class PersonAuthentication(PersonAuthenticationType): def __init__(self, currentTimeMillis): self.currentTimeMillis = currentTimeMillis def init(self, customScript, configurationAttributes): print \"OTP test. Initialization\" self.auth_user = None self.isUserAuthenticated = False self.isValidOtp = False print \"OTP test. Initialized successfully\" return True def destroy(self, configurationAttributes): print \"OTP test. Destroy\" print \"OTP test. Destroyed successfully\" return True def getAuthenticationMethodClaims(self, requestParameters): return None def getApiVersion(self): return 11 def isValidAuthenticationMethod(self, usageType, configurationAttributes): return True def getAlternativeAuthenticationMethod(self, usageType, configurationAttributes): return None def authenticate(self, configurationAttributes, requestParameters, step): print(\"OTP test, authentication for step %s\" %step) authenticationService = CdiUtil.bean(AuthenticationService) identity = CdiUtil.bean(Identity) userService = CdiUtil.bean(UserService) username = identity.getWorkingParameter(\"uusername\") print \"username is %s \" , username if(username is not None): userAuthenticated = authenticationService.authenticate(username) print(\"User present in session\") if(not userAuthenticated): print (\"Not authenticated\") return False #Here we set hard coded otp otp = '12345' inputOtp = ServerUtil.getFirstValue(requestParameters, \"loginForm:otpCode\") print(\"Client end otp %s \" %inputOtp) print(\"Server end otp %s\" %otp) if otp == inputOtp: print \"OTP Authenticated\" print CdiUtil.bean(SessionIdService).getSessionId() authenticationService.authenticate('username') identity.setWorkingParameter(\"enforce_scope\",\"otp\") return True else: print(\"Wrong otp\") return errorMessage(\"Wrong otp entered\") return False def prepareForStep(self, configurationAttributes, requestParameters, step): print \"OTP test. Prepare for steps %s\" %step if (step ==1): try: userService = CdiUtil.bean(UserService) encryptedInum = ServerUtil.getFirstValue(requestParameters, \"login_hint\") identity = CdiUtil.bean(Identity) print encryptedInum inum = CdiUtil.bean(EncryptionService).decrypt(encryptedInum) foundUser = userService.getUserByInum(inum ) print foundUser username = foundUser.getUserId() print \"username is %s \" % username identity.setWorkingParameter(\"uusername\", username ) return True except: print \"OTP. Exception: '%s'\" % (sys.exc_info()[1]) return False else: return False def getExtraParametersForStep(self, configurationAttributes, step): return Arrays.asList(\"uusername\", \"enforce_scope\") def getCountAuthenticationSteps(self, configurationAttributes): return 1 def getPageForStep(self, configurationAttributes, step): print(\"Get page for step %s\" %step) if( step==1 ) : return \"/auth/otp/otplogin.xhtml\" else: return \"\" def getNextStep(self, configurationAttributes, requestParameters, step): return -1 def getLogoutExternalUrl(self, configurationAttributes, requestParameters): print \"Get external logout URL call\" return None def logout(self, configurationAttributes, requestParameters): print\"logout\" return True","title":"Stepped-up Authentication"},{"location":"admin/recipes/stepped-up-authn/#what-is-stepped-up-authentication","text":"While navigating through an application, a user is challenged to produce an additional authentication when a certain API (of higher criticality) accessed by the client, does not have the needed scope. Consider the following sequence of events : 1. A user is logged in to an app using very basic authentication mechanism. Say login- password. 2. The user navigates through the app. 3. When the user attempts to access a critical resource, he is presented with another authentication step say otp. 4. The user, after successful authentication, has the needed access token to access the critical resource. sequenceDiagram title Stepped-up Authentication actor Person participant Browser participant Website participant Auth Server participant API autonumber Website->>API: request some endpoint API->>API: Enforce<br> presence of <br> 'otp' scope<br> in access_token API->>Website: 3. 401 Unauthorized<br>WWW-Authenticate: Bearer error=\"insufficient_user_authentication\" Website->>Browser: Enforce additional challenge on the user<br> (Enter OTP) Person->>Browser:Enter OTP Browser->>Auth Server: /authorize endpoint Note right of Auth Server: Stepped-up Authentication Auth Server->>Auth Server:Validate OTP (Person authentication script) Note right of Auth Server: Modify scope of AT Auth Server->>Auth Server: Modify scope of AT to include OTP (Update token script) Auth Server->> Website: Return Access Token with scope containing OTP","title":"What is Stepped Up Authentication ?"},{"location":"admin/recipes/stepped-up-authn/#implementation-details","text":"This implementation has been broken down to 5 parts highlighted in different colours. The details contain sample code that can be used to be build the flow using Person Authentication Scripts and Update Token Scripts sequenceDiagram title Implementation Stepped-up authn in Janssen's Authentication server actor Person participant Browser participant Website participant Auth Server participant API autonumber rect rgb(255, 223, 211) Website->>Browser: html login form Person->>Browser: Update PII Browser->>Website: POST Website->>Auth Server: login request /authorize?response_type=code id_token Auth Server->> Auth Server: UpdateTokenScript - place user info in id_token <br>e.g. encrypted inum Auth Server ->>Website: return id_token and code end rect rgb(211,211,211) Website->> Website: Extract the user info from id_token and save in website's session (not to be confused with Auth Server session) end rect rgb(212, 238, 227) Website->>API: request some endpoint API->>API: Enforce<br> presence of <br> 'otp' scope<br> in access_token API->>Website: 401 Unauthorized<br>WWW-Authenticate: <br>Bearer error=\"insufficient_user_authentication\" Website->>Browser: redirect to AS end rect rgb(186,225,255) Browser->>Auth Server: authorize?acr_values=otp<br>&client_id=1234<br>&scope=otp + other scopes<br>&response_type=code<br>&client_id=____<br>&redirect_uri=____<br>&state=_____<br>&nonce=____<br>&prompt=login&<br>login_hint=encrypted_inum Auth Server->>Auth Server: Get encrypted user inum,<br>from login_hint, and decrypt<br>return None, if inum not found<br> Auth Server->>Browser: Display OTP Page Person->>Browser: enter OTP Browser->>Auth Server: POST OTP form Auth Server->>Auth Server: validate OTP Auth Server->>Auth Server: add session variable scope_enforce= otp Auth Server->>Browser: redirect to callback Browser->>Website: callback URI Website->>Auth Server: /token + client creds Auth Server->>Auth Server: Update token script is invoked. <br> read session variable scope-enforce <br> update scope of AT to include otp Auth Server->>Website: access_token, id_token,<br>refresh_token end rect rgb(255,255,186) Website->>API: request some endpoint<br>(with new access_token) API->>API: verify the acess_token. It should contain the necessary scope i.e otp end","title":"Implementation details :"},{"location":"admin/recipes/stepped-up-authn/#step-a-ensure-id_token-has-some-info-to-identify-the-user","text":"When the user logs in for the very first time and performs basic authentication, the Update Token script can be used to place a custom claim containing some user information like User permissions User personal information Internal user identifier. In this example, we store the encrypted inum of the user as a \"custom claim\" in the id_token. A good practice is to not put the primary key / user identifier in plain text UpdateToken script: def modifyIdToken(self, jsonWebResponse, context): print \"Update token script. Modify idToken: %s\" % jsonWebResponse sessionIdService = CdiUtil.bean(SessionIdService) session = sessionIdService.getSessionByDn(context.getGrant().getSessionDn()) # fetch from persistence userService = CdiUtil.bean(UserService) user_name = session.getSessionAttributes().get(\"auth_user\") foundUser = userService.getUserByAttribute(\"uid\", user_name) userInum = foundUser.getAttribute(\"inum\") encryptedInum = CdiUtil.bean(EncryptionService).encrypt(userInum) print encryptedInum #custom claim in id_token jsonWebResponse.getClaims().setClaim(\"someFancyName\", encryptedInum) return True","title":"Step A: Ensure id_token has some info to identify the user:"},{"location":"admin/recipes/stepped-up-authn/#step-b-website-rp-extracts-the-user-info-from-id_token","text":"The Website (RP / client) should extract the user info from id_token and save it in the website's session. The website's session should not be confused with the Auth Server's session. The Auth Server sessions are state-less and any session related information that the website wishes to consume can only be that which can be extracted from an id_token.","title":"Step B: Website (RP) extracts the user info from id_token:"},{"location":"admin/recipes/stepped-up-authn/#step-c-critical-resource-accessed-by-user","text":"Website detects critical resource, examines the Access token presented by the client. Redirects to RP for stepped-up authentication","title":"Step C: Critical Resource accessed by user."},{"location":"admin/recipes/stepped-up-authn/#step-d-stepped-up-authentication","text":"Website calls /authorize endpoint with login_hint=encrypted_inum, which was previously extracted from id_token in Step B Use login_hint , id_token_hint or request -jwe to identify the user in Person Authentication script used to perform the additional authentication step. Stepped-up Authn Person Authentication script: def prepareForStep(self, configurationAttributes, requestParameters, step): print \"OTP test. Prepare for steps %s\" %step if (step ==1): try: userService = CdiUtil.bean(UserService) encryptedInum = ServerUtil.getFirstValue(requestParameters, \"login_hint\") identity = CdiUtil.bean(Identity) print encryptedInum inum = CdiUtil.bean(EncryptionService).decrypt(encryptedInum) foundUser = userService.getUserByInum(inum ) print foundUser username = foundUser.getUserId() print \"username is %s \" % username identity.setWorkingParameter(\"uusername\", username ) return True except: print \"OTP. Exception: '%s'\" % (sys.exc_info()[1]) return False else: return False 3. Validate user otp 4. \"enforce_scope=otp\", add to session def authenticate(self, configurationAttributes, requestParameters, step): print(\"OTP, authentication for step %s\" %step) authenticationService = CdiUtil.bean(AuthenticationService) identity = CdiUtil.bean(Identity) userService = CdiUtil.bean(UserService) username = identity.getWorkingParameter(\"username\") print username #Here we set hard coded otp otp = '12345' inputOtp = ServerUtil.getFirstValue(requestParameters, \"loginForm:otpCode\") print(\"Client end otp %s \" %inputOtp) print(\"Server end otp %s\" %otp) if otp == inputOtp: print \"OTP Authenticated\" print CdiUtil.bean(SessionIdService).getSessionId() authenticationService.authenticate('username') # adding to session identity.setWorkingParameter(\"enforce_scope\",\"otp\") return True else: print(\"Wrong otp\") return errorMessage(\"Wrong otp entered\") return False 5: Update AT with relevant scope * Check the session variable \"enforce_scope\" and add the \"scope\" to the Access token. * You can also modify Access token header claims and regular claims using the modifyAccessToken in the Update Token Script. Update Token script: def modifyAccessToken(self, accessToken, context): #read from session sessionIdService = CdiUtil.bean(SessionIdService) sessionId = sessionIdService.getSessionByDn(context.getGrant().getSessionDn()) # fetch from persistence enforce_scope = sessionId.getSessionAttributes().get(\"enforce_scope \") if enforce_scope not None: context.overwriteAccessTokenScopes(accessToken, Sets.newHashSet(\"existingScope1\", \"existingScope2\", \"mynewscope\")) context.getHeader().setClaim(\"custom_header_name\", \"custom_header_value\") context.getClaims().setClaim(\"claim_name\", \"claimValue\")","title":"Step D: Stepped-up authentication"},{"location":"admin/recipes/stepped-up-authn/#step-e-access-the-critical-resource-with-new-access-token","text":"The access token contains needed scope because the scopes were updated in Step D, point 5","title":"Step E: Access the critical resource with new Access token:"},{"location":"admin/recipes/stepped-up-authn/#update-token-script","text":"from io.jans.as.server.service import AuthenticationService from io.jans.as.server.service import UserService from io.jans.as.server.service import SessionIdService from io.jans.as.server.util import ServerUtil from io.jans.service.cdi.util import CdiUtil from io.jans.as.service.common import EncryptionService from io.jans.model.custom.script.type.token import UpdateTokenType class UpdateToken(UpdateTokenType): def __init__(self, currentTimeMillis): self.currentTimeMillis = currentTimeMillis def init(self, customScript, configurationAttributes): print \"Update token script. Initializing ...\" print \"Update token script. Initialized successfully\" return True def destroy(self, configurationAttributes): print \"Update token script. Destroying ...\" print \"Update token script. Destroyed successfully\" return True def getApiVersion(self): return 11 def modifyIdToken(self, jsonWebResponse, context): print \"Update token script. Modify idToken: %s\" % jsonWebResponse sessionIdService = CdiUtil.bean(SessionIdService) session = sessionIdService.getSessionByDn(context.getGrant().getSessionDn()) # fetch from persistence userService = CdiUtil.bean(UserService) user_name = session.getSessionAttributes().get(\"auth_user\") foundUser = userService.getUserByAttribute(\"uid\", user_name) userInum = foundUser.getAttribute(\"inum\") print userInum encryptedInum = CdiUtil.bean(EncryptionService).encrypt(userInum) print encryptedInum #custom claim in id_token jsonWebResponse.getClaims().setClaim(\"someFancyName\", encryptedInum) #print \"Update token script. After modify idToken: %s\" % jsonWebResponse #jsonWebResponse.getClaims().setClaim(\"someFancyName\", \"madhu\") return True def modifyAccessToken(self, accessToken, context): #read from session sessionIdService = CdiUtil.bean(SessionIdService) sessionId = sessionIdService.getSessionByDn(context.getGrant().getSessionDn()) # fetch from persistence enforce_scope = sessionId.getSessionAttributes().get(\"enforce_scope\") if enforce_scope is not None: context.overwriteAccessTokenScopes(accessToken, Sets.newHashSet(\"openid\", \"profile\", \"otp\")) return True def modifyRefreshToken(self, refreshToken, context): return True def getRefreshTokenLifetimeInSeconds(self, context): return 0 def getIdTokenLifetimeInSeconds(self, context): return 0 def getAccessTokenLifetimeInSeconds(self, context): return 0","title":"Update token script"},{"location":"admin/recipes/stepped-up-authn/#otp-script","text":"from io.jans.as.server.util import ServerUtil from io.jans.service.cdi.util import CdiUtil from io.jans.as.server.security import Identity from io.jans.model.custom.script.type.auth import PersonAuthenticationType from io.jans.as.server.service import AuthenticationService from io.jans.as.server.service import UserService from io.jans.as.server.service import SessionIdService from org.jans.as.server.service import CookieService from javax.faces.application import FacesMessage from org.gluu.jsf2.message import FacesMessages from org.gluu.jsf2.service import FacesService from io.jans.util import StringHelper from java.util import Arrays def errorMessage(errorInfo): facesMessages = CdiUtil.bean(FacesMessages) facesMessages.setKeepMessages() facesMessages.clear() facesMessages.add(FacesMessage.SEVERITY_ERROR, errorInfo) return False class PersonAuthentication(PersonAuthenticationType): def __init__(self, currentTimeMillis): self.currentTimeMillis = currentTimeMillis def init(self, customScript, configurationAttributes): print \"OTP test. Initialization\" self.auth_user = None self.isUserAuthenticated = False self.isValidOtp = False print \"OTP test. Initialized successfully\" return True def destroy(self, configurationAttributes): print \"OTP test. Destroy\" print \"OTP test. Destroyed successfully\" return True def getAuthenticationMethodClaims(self, requestParameters): return None def getApiVersion(self): return 11 def isValidAuthenticationMethod(self, usageType, configurationAttributes): return True def getAlternativeAuthenticationMethod(self, usageType, configurationAttributes): return None def authenticate(self, configurationAttributes, requestParameters, step): print(\"OTP test, authentication for step %s\" %step) authenticationService = CdiUtil.bean(AuthenticationService) identity = CdiUtil.bean(Identity) userService = CdiUtil.bean(UserService) username = identity.getWorkingParameter(\"uusername\") print \"username is %s \" , username if(username is not None): userAuthenticated = authenticationService.authenticate(username) print(\"User present in session\") if(not userAuthenticated): print (\"Not authenticated\") return False #Here we set hard coded otp otp = '12345' inputOtp = ServerUtil.getFirstValue(requestParameters, \"loginForm:otpCode\") print(\"Client end otp %s \" %inputOtp) print(\"Server end otp %s\" %otp) if otp == inputOtp: print \"OTP Authenticated\" print CdiUtil.bean(SessionIdService).getSessionId() authenticationService.authenticate('username') identity.setWorkingParameter(\"enforce_scope\",\"otp\") return True else: print(\"Wrong otp\") return errorMessage(\"Wrong otp entered\") return False def prepareForStep(self, configurationAttributes, requestParameters, step): print \"OTP test. Prepare for steps %s\" %step if (step ==1): try: userService = CdiUtil.bean(UserService) encryptedInum = ServerUtil.getFirstValue(requestParameters, \"login_hint\") identity = CdiUtil.bean(Identity) print encryptedInum inum = CdiUtil.bean(EncryptionService).decrypt(encryptedInum) foundUser = userService.getUserByInum(inum ) print foundUser username = foundUser.getUserId() print \"username is %s \" % username identity.setWorkingParameter(\"uusername\", username ) return True except: print \"OTP. Exception: '%s'\" % (sys.exc_info()[1]) return False else: return False def getExtraParametersForStep(self, configurationAttributes, step): return Arrays.asList(\"uusername\", \"enforce_scope\") def getCountAuthenticationSteps(self, configurationAttributes): return 1 def getPageForStep(self, configurationAttributes, step): print(\"Get page for step %s\" %step) if( step==1 ) : return \"/auth/otp/otplogin.xhtml\" else: return \"\" def getNextStep(self, configurationAttributes, requestParameters, step): return -1 def getLogoutExternalUrl(self, configurationAttributes, requestParameters): print \"Get external logout URL call\" return None def logout(self, configurationAttributes, requestParameters): print\"logout\" return True","title":"OTP script"},{"location":"admin/recipes/web-apps/","tags":["administration","recipes"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Web apps"},{"location":"admin/recipes/web-apps/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/web-apps/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/web-apps/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/api-access-control/","tags":["administration","recipes","api-access-control"],"text":"Overview # Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/recipes/api-access-control/#overview","text":"Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/recipes/api-access-control/access-tokens/","tags":["administration","recipes","api-access-control"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Access tokens"},{"location":"admin/recipes/api-access-control/access-tokens/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/api-access-control/access-tokens/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/api-access-control/access-tokens/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/api-access-control/client-credential-grant-flow/","tags":["administration","recipes","api-access-control"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Client credential grant flow"},{"location":"admin/recipes/api-access-control/client-credential-grant-flow/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/api-access-control/client-credential-grant-flow/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/api-access-control/client-credential-grant-flow/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/api-access-control/oauth-api-gateway/","tags":["administration","recipes","api-access-control"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Oauth api gateway"},{"location":"admin/recipes/api-access-control/oauth-api-gateway/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/api-access-control/oauth-api-gateway/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/api-access-control/oauth-api-gateway/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/api-access-control/opa-access-tokens/","tags":["administration","recipes","api-access-control"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Opa access tokens"},{"location":"admin/recipes/api-access-control/opa-access-tokens/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/api-access-control/opa-access-tokens/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/api-access-control/opa-access-tokens/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/api-access-control/openapi-best-practice/","tags":["administration","recipes","api-access-control"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Openapi best practice"},{"location":"admin/recipes/api-access-control/openapi-best-practice/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/api-access-control/openapi-best-practice/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/api-access-control/openapi-best-practice/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/api-access-control/scope-access/","tags":["administration","recipes","api-access-control"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Scope access"},{"location":"admin/recipes/api-access-control/scope-access/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/api-access-control/scope-access/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/api-access-control/scope-access/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/api-access-control/software-statements/","tags":["administration","recipes","api-access-control"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Software statements"},{"location":"admin/recipes/api-access-control/software-statements/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/api-access-control/software-statements/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/api-access-control/software-statements/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/api-access-control/user-claims-tokens/","tags":["administration","recipes","api-access-control"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"User claims tokens"},{"location":"admin/recipes/api-access-control/user-claims-tokens/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/api-access-control/user-claims-tokens/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/api-access-control/user-claims-tokens/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/apps/","tags":["administration","recipes","applications"],"text":"Overview # Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/recipes/apps/#overview","text":"Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/recipes/apps/drupal/","tags":["administration","recipes","applications"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Drupal"},{"location":"admin/recipes/apps/drupal/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/apps/drupal/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/apps/drupal/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/apps/kafka/","tags":["administration","recipes","applications"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Kafka"},{"location":"admin/recipes/apps/kafka/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/apps/kafka/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/apps/kafka/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/apps/magento/","tags":["administration","recipes","applications"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Magento"},{"location":"admin/recipes/apps/magento/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/apps/magento/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/apps/magento/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/apps/moodle/","tags":["administration","recipes","applications"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Moodle"},{"location":"admin/recipes/apps/moodle/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/apps/moodle/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/apps/moodle/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/apps/nextcloud/","tags":["administration","recipes","applications"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Nextcloud"},{"location":"admin/recipes/apps/nextcloud/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/apps/nextcloud/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/apps/nextcloud/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/apps/rancher/","tags":["administration","recipes","applications"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Rancher"},{"location":"admin/recipes/apps/rancher/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/apps/rancher/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/apps/rancher/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/apps/rocket/","tags":["administration","recipes","applications"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Rocket"},{"location":"admin/recipes/apps/rocket/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/apps/rocket/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/apps/rocket/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/apps/teleport/","tags":["administration","recipes","applications"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Teleport"},{"location":"admin/recipes/apps/teleport/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/apps/teleport/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/apps/teleport/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/apps/wordpress/","tags":["administration","recipes","applications"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Wordpress"},{"location":"admin/recipes/apps/wordpress/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/apps/wordpress/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/apps/wordpress/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/custom-web-development/","tags":["administration","recipes","custom-web-development"],"text":"Overview # Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/recipes/custom-web-development/#overview","text":"Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/recipes/custom-web-development/angular/","tags":["administration","recipes","custom-web-development"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Angular"},{"location":"admin/recipes/custom-web-development/angular/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/custom-web-development/angular/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/custom-web-development/angular/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/custom-web-development/appauth-android/","tags":["administration","recipes","custom-web-development"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Appauth android"},{"location":"admin/recipes/custom-web-development/appauth-android/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/custom-web-development/appauth-android/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/custom-web-development/appauth-android/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/custom-web-development/appauth-ios/","tags":["administration","recipes","custom-web-development"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Appauth ios"},{"location":"admin/recipes/custom-web-development/appauth-ios/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/custom-web-development/appauth-ios/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/custom-web-development/appauth-ios/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/custom-web-development/appauth-js/","tags":["administration","recipes","custom-web-development"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Appauth js"},{"location":"admin/recipes/custom-web-development/appauth-js/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/custom-web-development/appauth-js/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/custom-web-development/appauth-js/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/custom-web-development/asp-net/","tags":["administration","recipes","custom-web-development"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Asp net"},{"location":"admin/recipes/custom-web-development/asp-net/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/custom-web-development/asp-net/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/custom-web-development/asp-net/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/custom-web-development/authn-with-apache-reverse-proxy/","tags":["administration","recipes","custom-web-development","mod-auth-openidc","apache","proxy"],"text":"Contents: # Overview Component Setup Configure Janssen server Configure Protected Resource Configure openidc module Test Complete Flow Overview # This guide describes steps to enable authentication for web applications using the Janssen server which is an OpenID Connect Provider (OP). In the process of setting up a working environment, we will see how to use the command-line tool jans-cli to manually register an OpenID Connect client with the Janssen server. We will also see how to configure Relying Party to communicate with the Janssen server. Hardware configuration # For development and POC purposes, 4GB RAM and 10 GB HDD should be available for Janssen Server. For PROD deployments, please refer installation guide . Prerequisites # Installed Apache reverse proxy that is SSL enabled Installed Janssen server. Refer to Janssen Installation Guide for instructions. Component Setup # In this setup, we have four important components. - Protected resource is a resource that we need to protect using authentication. A web application for example. - User workstation is from where the user will use a browser(i.e user agent) to access the protected resource - Apache reverse proxy with mod_auth_openidc is our reverse proxy server and relying party. - Reverse Proxy : In our setup protected resources will be accessible through the proxy's FQDN https://test.apache.rp.io . For simplicity, we will use a CGI script as a protected resource and host it on the Apache proxy itself. In a typical production setup, protected resources are usually hosted on a separate server. - Relying Party : We will use Apache module mod_auth_openidc to provide relying party(RP) functionality. RP implements authentication flows from OpenID Connect specification. For each incoming request, RP ensures that the request is authenticated. If the request is not pre-authenticated, then RP will coordinate with Janssen server to integrate authentication. - Janssen server is our open-id connect provider (OP). We will assume that the Janssen server is accessible at FQDN https://janssen.op.io/ Configure Janssen server # In this section, we will register a new OpenID Connect client on Janssen server. In our setup, the relying party (Apache with mod_auth-openidc) is the OIDC client. There are two ways you can register OIDC client with Janssen server. 1. Manual Client Registration 2. Dynamic Client Registration (DCR) Here we will use manual client registration. To register a new OpenID connect client on the Janssen server, we will use jans-cli tool provided by the Janssen server. jans-cli has a menu-driven interface that makes it easy to configure the Janssen server. Here we will use the menu-driven approach to register a new client. To further understand how to use menu-driven approach and get complete list of supported command-line operations, refer to jans-cli documentation . Run the command below on Janssen server to enter interactive mode. Note: jans-cli has to be authenticated and authorized with the respective Janssen server. If jans-cli is being executed for the first time or if there is no valid access token available, then running the command below will initiate device authentication and authorization flow. In that case, follow the steps for jans-cli authorization to continue running the command. /opt/jans/jans-cli/config-cli.py Running above command will bring up main menu as shown in sample below: To register a new OpenID Connect client, select OAuth OpenID Connect - Clients option ( 16 in above sample). Selecting an appropriate option will bring up related sub-menu. From sub-menu, select option for Create new OpenId connect client . Upon selecting this option, CLI will prompt for inputs required to register a new OpenID connect client. Provide inputs for the following properties: displayName: <name-of-choice> application Type: web includeClaimsInIdToken [false]: Populate optional fields? y clientSecret: <secret-of-your-choice> subjectType: public tokenEndpointAuthMethod: client_secret_basic redirectUris: https://test.apache.rp.io/callback scopes: email_,openid_,profile responseTypes: code grantTypes: authorization_code Once values for all the above properties are provided, input c at the prompt to instruct jans-cli to create schema using inputs provided till now. At this time, jans-cli will show the schema(JSON) that will be used to create a new OpenID Connect client on Janssen server. Verify that schema has captured all the provided inputs correctly. Now next step is for jans-cli to post this JSON schema to Janssen server to actually register new client. To do this, input y on the prompt. If the client is successfully registered then we will receive JSON data back. This data describes newly registered client. Some of these values from this JSON response, like inum and clientSecret , will be required when we configure mod_auth_openidc as a client. So keep this reponse JSON handy. See a sample of JSON response below: { \"dn\": \"inum=165bdf95-f15e-44f0-bdd7-cdac71fda8e0,ou=clients,o=jans\", \"inum\": \"165bdf95-f15e-44f0-bdd7-cdac71fda8e0\", \"displayName\": \"dm\", \"clientSecret\": \"a9894ba8-eb01-4a26-a69d-026f10a49272\", \"frontChannelLogoutUri\": null, \"frontChannelLogoutSessionRequired\": false, \"registrationAccessToken\": null, \"clientIdIssuedAt\": null, \"clientSecretExpiresAt\": null, \"redirectUris\": null, \"claimRedirectUris\": null, \"responseTypes\": null, \"grantTypes\": [], \"applicationType\": \"web\", \"contacts\": null, \"clientName\": \"dm\", \"idTokenTokenBindingCnf\": null, \"logoUri\": null, \"clientUri\": null, \"policyUri\": null, \"tosUri\": null, \"jwksUri\": null, \"jwks\": null, \"sectorIdentifierUri\": null, \"subjectType\": \"public\", \"idTokenSignedResponseAlg\": null, \"idTokenEncryptedResponseAlg\": null, \"idTokenEncryptedResponseEnc\": null, \"userInfoSignedResponseAlg\": null, \"userInfoEncryptedResponseAlg\": null, \"userInfoEncryptedResponseEnc\": null, \"requestObjectSigningAlg\": null, \"requestObjectEncryptionAlg\": null, \"requestObjectEncryptionEnc\": null, \"tokenEndpointAuthMethod\": null, \"tokenEndpointAuthSigningAlg\": null, \"defaultMaxAge\": null, \"requireAuthTime\": false, \"defaultAcrValues\": null, \"initiateLoginUri\": null, \"postLogoutRedirectUris\": null, \"requestUris\": null, \"scopes\": null, \"claims\": null, \"trustedClient\": false, \"lastAccessTime\": null, \"lastLogonTime\": null, \"persistClientAuthorizations\": false, \"includeClaimsInIdToken\": false, \"refreshTokenLifetime\": null, \"accessTokenLifetime\": null, \"customAttributes\": [], \"customObjectClasses\": null, \"rptAsJwt\": false, \"accessTokenAsJwt\": false, \"accessTokenSigningAlg\": null, \"disabled\": false, \"authorizedOrigins\": null, \"softwareId\": null, \"softwareVersion\": null, \"softwareStatement\": null, \"attributes\": { \"tlsClientAuthSubjectDn\": null, \"runIntrospectionScriptBeforeJwtCreation\": false, \"keepClientAuthorizationAfterExpiration\": false, \"allowSpontaneousScopes\": false, \"spontaneousScopes\": null, \"spontaneousScopeScriptDns\": null, \"backchannelLogoutUri\": null, \"backchannelLogoutSessionRequired\": false, \"additionalAudience\": null, \"postAuthnScripts\": null, \"consentGatheringScripts\": null, \"introspectionScripts\": null, \"rptClaimsScripts\": null }, \"backchannelTokenDeliveryMode\": null, \"backchannelClientNotificationEndpoint\": null, \"backchannelAuthenticationRequestSigningAlg\": null, \"backchannelUserCodeParameter\": null, \"expirationDate\": null, \"deletable\": false, \"jansId\": null } Configure protected resource # As mentioned under component setup , our protected resource will be hosted on Apache reverse proxy itself. It is a simple Python based cgi script that will print request header information and can be accessed through https://test.apache.rp.io/cgi-bin/printHeaders.py . Execute the steps below on Apache host to set up the protected resource: Create script file printHeaders.py vi /usr/lib/cgi-bin/printHeaders.py with content as below #!/usr/bin/python3 import os d = os.environ k = d.keys() print \"Content-type: text/html\\n\\n\" print \"<HTML><HEAD><TITLE>printHeaders.cgi</TITLE></Head><BODY>\" print \"<h1>Environment Variables</H1>\" for item in k: print \"<p><B>%s</B>: %s </p>\" % (item, d[item]) print \"</BODY></HTML>\" Add Apache cgi module to enable execution of CGI a2enmod cgi Change permissions for CGI script so that it can be executed by Apache chown www-data:www-data /usr/lib/cgi-bin/printHeaders.py chmod ug+x /usr/lib/cgi-bin/printHeaders.py At this point, printHeaders.py should be accessible at https://test.apache.rp.io/cgi-bin/printHeaders.py without requiring any authentication. Configure openidc module # Install mod-auth-openidc # On Apache reverse proxy host, add mod-auth-openidc using commands below apt-get install libapache2-mod-auth-openidc a2enmod auth_openidc service apache2 restart Configure mod-auth-openidc # Open /etc/apache2/sites-available/default-ssl.conf Add mod-auth-openidc configuration parameters given below for virtual host _default_:443 . Find more configuration options for mod-auth-openidc here . This configuration will enable authentication for any resource under / context root. OIDCProviderMetadataURL https://janssen.op.io/jans-auth/.well-known/openid-configuration OIDCClientID <inum-as-received-in-client-registration-response> OIDCClientSecret <as-provided-in-client-registration-request> OIDCResponseType code OIDCScope \"openid email profile\" OIDCProviderTokenEndpointAuth client_secret_basic OIDCSSLValidateServer Off OIDCProviderIssuer https://janssen.op.io OIDCRedirectURI https://test.apache.rp.io/callback OIDCCryptoPassphrase <crypto-passphrase-of-choice> <Location \"/\"> Require valid-user AuthType openid-connect </Location> Restart Apache service. service apache2 restart Test Complete Flow # Accessing https://test.apache.rp.io/cgi-bin/printHeaders.py should redirect to the Janssen authentication screen. Upon valid authentication, Janssen will present the user with a consent screen where the user will be able to allow user attributes that can be provided to the app If allowed, the user will be successfully taken to the printHeaders.py page. In the process, mod_auth_openidc also requests user claims (i.e attributes) from the /userinfo endpoint of the Janssen server. And makes these claims available as environment variables to the application. printHeaders.py prints all the environment variables, along with user claims received from the Janssen server. The application can use this information to identify the user and also enforce access policies. Sample output below shows some of this user information and token information printed as part of environment variables: Environment Variables OIDC_CLAIM_sub: e205be81-6a85-4d83-9126 OIDC_CLAIM_email_verified: 1 OIDC_CLAIM_name: Default myname User OIDC_CLAIM_nickname: myname OIDC_CLAIM_given_name: myname OIDC_CLAIM_middle_name: myname OIDC_CLAIM_family_name: User OIDC_CLAIM_email: myname@mydomain.io OIDC_access_token: d6a12cce-f196-4da3-ba17 OIDC_access_token_expires: 165493257 HTTPS: on SSL_TLS_SNI: test.apache.rp.io","title":"Authn with apache reverse proxy"},{"location":"admin/recipes/custom-web-development/authn-with-apache-reverse-proxy/#contents","text":"Overview Component Setup Configure Janssen server Configure Protected Resource Configure openidc module Test Complete Flow","title":"Contents:"},{"location":"admin/recipes/custom-web-development/authn-with-apache-reverse-proxy/#overview","text":"This guide describes steps to enable authentication for web applications using the Janssen server which is an OpenID Connect Provider (OP). In the process of setting up a working environment, we will see how to use the command-line tool jans-cli to manually register an OpenID Connect client with the Janssen server. We will also see how to configure Relying Party to communicate with the Janssen server.","title":"Overview"},{"location":"admin/recipes/custom-web-development/authn-with-apache-reverse-proxy/#hardware-configuration","text":"For development and POC purposes, 4GB RAM and 10 GB HDD should be available for Janssen Server. For PROD deployments, please refer installation guide .","title":"Hardware configuration"},{"location":"admin/recipes/custom-web-development/authn-with-apache-reverse-proxy/#prerequisites","text":"Installed Apache reverse proxy that is SSL enabled Installed Janssen server. Refer to Janssen Installation Guide for instructions.","title":"Prerequisites"},{"location":"admin/recipes/custom-web-development/authn-with-apache-reverse-proxy/#component-setup","text":"In this setup, we have four important components. - Protected resource is a resource that we need to protect using authentication. A web application for example. - User workstation is from where the user will use a browser(i.e user agent) to access the protected resource - Apache reverse proxy with mod_auth_openidc is our reverse proxy server and relying party. - Reverse Proxy : In our setup protected resources will be accessible through the proxy's FQDN https://test.apache.rp.io . For simplicity, we will use a CGI script as a protected resource and host it on the Apache proxy itself. In a typical production setup, protected resources are usually hosted on a separate server. - Relying Party : We will use Apache module mod_auth_openidc to provide relying party(RP) functionality. RP implements authentication flows from OpenID Connect specification. For each incoming request, RP ensures that the request is authenticated. If the request is not pre-authenticated, then RP will coordinate with Janssen server to integrate authentication. - Janssen server is our open-id connect provider (OP). We will assume that the Janssen server is accessible at FQDN https://janssen.op.io/","title":"Component Setup"},{"location":"admin/recipes/custom-web-development/authn-with-apache-reverse-proxy/#configure-janssen-server","text":"In this section, we will register a new OpenID Connect client on Janssen server. In our setup, the relying party (Apache with mod_auth-openidc) is the OIDC client. There are two ways you can register OIDC client with Janssen server. 1. Manual Client Registration 2. Dynamic Client Registration (DCR) Here we will use manual client registration. To register a new OpenID connect client on the Janssen server, we will use jans-cli tool provided by the Janssen server. jans-cli has a menu-driven interface that makes it easy to configure the Janssen server. Here we will use the menu-driven approach to register a new client. To further understand how to use menu-driven approach and get complete list of supported command-line operations, refer to jans-cli documentation . Run the command below on Janssen server to enter interactive mode. Note: jans-cli has to be authenticated and authorized with the respective Janssen server. If jans-cli is being executed for the first time or if there is no valid access token available, then running the command below will initiate device authentication and authorization flow. In that case, follow the steps for jans-cli authorization to continue running the command. /opt/jans/jans-cli/config-cli.py Running above command will bring up main menu as shown in sample below: To register a new OpenID Connect client, select OAuth OpenID Connect - Clients option ( 16 in above sample). Selecting an appropriate option will bring up related sub-menu. From sub-menu, select option for Create new OpenId connect client . Upon selecting this option, CLI will prompt for inputs required to register a new OpenID connect client. Provide inputs for the following properties: displayName: <name-of-choice> application Type: web includeClaimsInIdToken [false]: Populate optional fields? y clientSecret: <secret-of-your-choice> subjectType: public tokenEndpointAuthMethod: client_secret_basic redirectUris: https://test.apache.rp.io/callback scopes: email_,openid_,profile responseTypes: code grantTypes: authorization_code Once values for all the above properties are provided, input c at the prompt to instruct jans-cli to create schema using inputs provided till now. At this time, jans-cli will show the schema(JSON) that will be used to create a new OpenID Connect client on Janssen server. Verify that schema has captured all the provided inputs correctly. Now next step is for jans-cli to post this JSON schema to Janssen server to actually register new client. To do this, input y on the prompt. If the client is successfully registered then we will receive JSON data back. This data describes newly registered client. Some of these values from this JSON response, like inum and clientSecret , will be required when we configure mod_auth_openidc as a client. So keep this reponse JSON handy. See a sample of JSON response below: { \"dn\": \"inum=165bdf95-f15e-44f0-bdd7-cdac71fda8e0,ou=clients,o=jans\", \"inum\": \"165bdf95-f15e-44f0-bdd7-cdac71fda8e0\", \"displayName\": \"dm\", \"clientSecret\": \"a9894ba8-eb01-4a26-a69d-026f10a49272\", \"frontChannelLogoutUri\": null, \"frontChannelLogoutSessionRequired\": false, \"registrationAccessToken\": null, \"clientIdIssuedAt\": null, \"clientSecretExpiresAt\": null, \"redirectUris\": null, \"claimRedirectUris\": null, \"responseTypes\": null, \"grantTypes\": [], \"applicationType\": \"web\", \"contacts\": null, \"clientName\": \"dm\", \"idTokenTokenBindingCnf\": null, \"logoUri\": null, \"clientUri\": null, \"policyUri\": null, \"tosUri\": null, \"jwksUri\": null, \"jwks\": null, \"sectorIdentifierUri\": null, \"subjectType\": \"public\", \"idTokenSignedResponseAlg\": null, \"idTokenEncryptedResponseAlg\": null, \"idTokenEncryptedResponseEnc\": null, \"userInfoSignedResponseAlg\": null, \"userInfoEncryptedResponseAlg\": null, \"userInfoEncryptedResponseEnc\": null, \"requestObjectSigningAlg\": null, \"requestObjectEncryptionAlg\": null, \"requestObjectEncryptionEnc\": null, \"tokenEndpointAuthMethod\": null, \"tokenEndpointAuthSigningAlg\": null, \"defaultMaxAge\": null, \"requireAuthTime\": false, \"defaultAcrValues\": null, \"initiateLoginUri\": null, \"postLogoutRedirectUris\": null, \"requestUris\": null, \"scopes\": null, \"claims\": null, \"trustedClient\": false, \"lastAccessTime\": null, \"lastLogonTime\": null, \"persistClientAuthorizations\": false, \"includeClaimsInIdToken\": false, \"refreshTokenLifetime\": null, \"accessTokenLifetime\": null, \"customAttributes\": [], \"customObjectClasses\": null, \"rptAsJwt\": false, \"accessTokenAsJwt\": false, \"accessTokenSigningAlg\": null, \"disabled\": false, \"authorizedOrigins\": null, \"softwareId\": null, \"softwareVersion\": null, \"softwareStatement\": null, \"attributes\": { \"tlsClientAuthSubjectDn\": null, \"runIntrospectionScriptBeforeJwtCreation\": false, \"keepClientAuthorizationAfterExpiration\": false, \"allowSpontaneousScopes\": false, \"spontaneousScopes\": null, \"spontaneousScopeScriptDns\": null, \"backchannelLogoutUri\": null, \"backchannelLogoutSessionRequired\": false, \"additionalAudience\": null, \"postAuthnScripts\": null, \"consentGatheringScripts\": null, \"introspectionScripts\": null, \"rptClaimsScripts\": null }, \"backchannelTokenDeliveryMode\": null, \"backchannelClientNotificationEndpoint\": null, \"backchannelAuthenticationRequestSigningAlg\": null, \"backchannelUserCodeParameter\": null, \"expirationDate\": null, \"deletable\": false, \"jansId\": null }","title":"Configure Janssen server"},{"location":"admin/recipes/custom-web-development/authn-with-apache-reverse-proxy/#configure-protected-resource","text":"As mentioned under component setup , our protected resource will be hosted on Apache reverse proxy itself. It is a simple Python based cgi script that will print request header information and can be accessed through https://test.apache.rp.io/cgi-bin/printHeaders.py . Execute the steps below on Apache host to set up the protected resource: Create script file printHeaders.py vi /usr/lib/cgi-bin/printHeaders.py with content as below #!/usr/bin/python3 import os d = os.environ k = d.keys() print \"Content-type: text/html\\n\\n\" print \"<HTML><HEAD><TITLE>printHeaders.cgi</TITLE></Head><BODY>\" print \"<h1>Environment Variables</H1>\" for item in k: print \"<p><B>%s</B>: %s </p>\" % (item, d[item]) print \"</BODY></HTML>\" Add Apache cgi module to enable execution of CGI a2enmod cgi Change permissions for CGI script so that it can be executed by Apache chown www-data:www-data /usr/lib/cgi-bin/printHeaders.py chmod ug+x /usr/lib/cgi-bin/printHeaders.py At this point, printHeaders.py should be accessible at https://test.apache.rp.io/cgi-bin/printHeaders.py without requiring any authentication.","title":"Configure protected resource"},{"location":"admin/recipes/custom-web-development/authn-with-apache-reverse-proxy/#configure-openidc-module","text":"","title":"Configure openidc module"},{"location":"admin/recipes/custom-web-development/authn-with-apache-reverse-proxy/#install-mod-auth-openidc","text":"On Apache reverse proxy host, add mod-auth-openidc using commands below apt-get install libapache2-mod-auth-openidc a2enmod auth_openidc service apache2 restart","title":"Install mod-auth-openidc"},{"location":"admin/recipes/custom-web-development/authn-with-apache-reverse-proxy/#configure-mod-auth-openidc","text":"Open /etc/apache2/sites-available/default-ssl.conf Add mod-auth-openidc configuration parameters given below for virtual host _default_:443 . Find more configuration options for mod-auth-openidc here . This configuration will enable authentication for any resource under / context root. OIDCProviderMetadataURL https://janssen.op.io/jans-auth/.well-known/openid-configuration OIDCClientID <inum-as-received-in-client-registration-response> OIDCClientSecret <as-provided-in-client-registration-request> OIDCResponseType code OIDCScope \"openid email profile\" OIDCProviderTokenEndpointAuth client_secret_basic OIDCSSLValidateServer Off OIDCProviderIssuer https://janssen.op.io OIDCRedirectURI https://test.apache.rp.io/callback OIDCCryptoPassphrase <crypto-passphrase-of-choice> <Location \"/\"> Require valid-user AuthType openid-connect </Location> Restart Apache service. service apache2 restart","title":"Configure mod-auth-openidc"},{"location":"admin/recipes/custom-web-development/authn-with-apache-reverse-proxy/#test-complete-flow","text":"Accessing https://test.apache.rp.io/cgi-bin/printHeaders.py should redirect to the Janssen authentication screen. Upon valid authentication, Janssen will present the user with a consent screen where the user will be able to allow user attributes that can be provided to the app If allowed, the user will be successfully taken to the printHeaders.py page. In the process, mod_auth_openidc also requests user claims (i.e attributes) from the /userinfo endpoint of the Janssen server. And makes these claims available as environment variables to the application. printHeaders.py prints all the environment variables, along with user claims received from the Janssen server. The application can use this information to identify the user and also enforce access policies. Sample output below shows some of this user information and token information printed as part of environment variables: Environment Variables OIDC_CLAIM_sub: e205be81-6a85-4d83-9126 OIDC_CLAIM_email_verified: 1 OIDC_CLAIM_name: Default myname User OIDC_CLAIM_nickname: myname OIDC_CLAIM_given_name: myname OIDC_CLAIM_middle_name: myname OIDC_CLAIM_family_name: User OIDC_CLAIM_email: myname@mydomain.io OIDC_access_token: d6a12cce-f196-4da3-ba17 OIDC_access_token_expires: 165493257 HTTPS: on SSL_TLS_SNI: test.apache.rp.io","title":"Test Complete Flow"},{"location":"admin/recipes/custom-web-development/django/","tags":["administration","recipes","custom-web-development"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Django"},{"location":"admin/recipes/custom-web-development/django/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/custom-web-development/django/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/custom-web-development/django/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/custom-web-development/flask/","tags":["administration","recipes","custom-web-development"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Flask"},{"location":"admin/recipes/custom-web-development/flask/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/custom-web-development/flask/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/custom-web-development/flask/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/custom-web-development/mod-auth-openidc/","tags":["administration","recipes","custom-web-development"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Mod auth openidc"},{"location":"admin/recipes/custom-web-development/mod-auth-openidc/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/custom-web-development/mod-auth-openidc/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/custom-web-development/mod-auth-openidc/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/custom-web-development/node/","tags":["administration","recipes","custom-web-development"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Node"},{"location":"admin/recipes/custom-web-development/node/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/custom-web-development/node/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/custom-web-development/node/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/custom-web-development/react-native/","tags":["administration","recipes","custom-web-development"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"React native"},{"location":"admin/recipes/custom-web-development/react-native/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/custom-web-development/react-native/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/custom-web-development/react-native/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/custom-web-development/react/","tags":["administration","recipes","custom-web-development"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"React"},{"location":"admin/recipes/custom-web-development/react/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/custom-web-development/react/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/custom-web-development/react/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/custom-web-development/spring-boot/","tags":["administration","recipes","custom-web-development"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Spring boot"},{"location":"admin/recipes/custom-web-development/spring-boot/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/custom-web-development/spring-boot/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/custom-web-development/spring-boot/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/forgot-password/","tags":["administration","recipes","forgot-password"],"text":"Overview # Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/recipes/forgot-password/#overview","text":"Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/recipes/forgot-password/email/","tags":["administration","recipes","forgot-password"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Email"},{"location":"admin/recipes/forgot-password/email/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/forgot-password/email/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/forgot-password/email/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/forgot-password/sms/","tags":["administration","recipes","forgot-password"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Sms"},{"location":"admin/recipes/forgot-password/sms/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/forgot-password/sms/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/forgot-password/sms/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/open-banking/","tags":["administration","recipes","open-banking"],"text":"Overview # Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/recipes/open-banking/#overview","text":"Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/recipes/open-banking/client-registration/","tags":["administration","recipes","open-banking"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Client registration"},{"location":"admin/recipes/open-banking/client-registration/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/open-banking/client-registration/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/open-banking/client-registration/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/open-banking/fapi-authn-request/","tags":["administration","recipes","open-banking"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Fapi authn request"},{"location":"admin/recipes/open-banking/fapi-authn-request/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/open-banking/fapi-authn-request/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/open-banking/fapi-authn-request/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/open-banking/requirements/","tags":["administration","recipes","open-banking"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Requirements"},{"location":"admin/recipes/open-banking/requirements/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/open-banking/requirements/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/open-banking/requirements/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/saas/","tags":["administration","recipes","saas"],"text":"Overview # Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/recipes/saas/#overview","text":"Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/recipes/saas/aws/","tags":["administration","recipes","saas"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Aws"},{"location":"admin/recipes/saas/aws/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/saas/aws/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/saas/aws/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/saas/docusign/","tags":["administration","recipes","saas"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Docusign"},{"location":"admin/recipes/saas/docusign/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/saas/docusign/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/saas/docusign/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/saas/google/","tags":["administration","recipes","saas"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Google"},{"location":"admin/recipes/saas/google/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/saas/google/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/saas/google/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/saas/jira/","tags":["administration","recipes","saas"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Jira"},{"location":"admin/recipes/saas/jira/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/saas/jira/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/saas/jira/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/saas/office365/","tags":["administration","recipes","saas"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Office365"},{"location":"admin/recipes/saas/office365/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/saas/office365/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/saas/office365/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/saas/salesforce/","tags":["administration","recipes","saas"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Salesforce"},{"location":"admin/recipes/saas/salesforce/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/saas/salesforce/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/saas/salesforce/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/saas/webex/","tags":["administration","recipes","saas"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Webex"},{"location":"admin/recipes/saas/webex/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/saas/webex/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/saas/webex/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/saas/zoom/","tags":["administration","recipes","saas"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Zoom"},{"location":"admin/recipes/saas/zoom/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/saas/zoom/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/saas/zoom/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/saml/","tags":["administration","recipes","saml"],"text":"Overview # Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/recipes/saml/#overview","text":"Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/recipes/saml/federation/","tags":["administration","recipes","saml"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Federation"},{"location":"admin/recipes/saml/federation/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/saml/federation/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/saml/federation/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/saml/idp-init-authn/","tags":["administration","recipes","saml"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Idp init authn"},{"location":"admin/recipes/saml/idp-init-authn/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/saml/idp-init-authn/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/saml/idp-init-authn/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/recipes/saml/sso-sp/","tags":["administration","recipes","saml"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Sso sp"},{"location":"admin/recipes/saml/sso-sp/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/recipes/saml/sso-sp/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/recipes/saml/sso-sp/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/reference/","tags":["administration","reference"],"text":"Reference Guide # The purpose of the reference guide is to provide exhaustive listings that are useful for administrators and developers. This includes, for example, the listing of all the REST APIs exposed by Janssen Server modules or the listing of all the properties used to configure Janssen Server. Use the left navigation bar to traverse through sub-sections of the reference guide.","title":"Reference Guide"},{"location":"admin/reference/#reference-guide","text":"The purpose of the reference guide is to provide exhaustive listings that are useful for administrators and developers. This includes, for example, the listing of all the REST APIs exposed by Janssen Server modules or the listing of all the properties used to configure Janssen Server. Use the left navigation bar to traverse through sub-sections of the reference guide.","title":"Reference Guide"},{"location":"admin/reference/javadocs/","tags":["administration","reference"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Javadocs"},{"location":"admin/reference/javadocs/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/reference/javadocs/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/reference/javadocs/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/reference/openapi/","tags":["administration","reference","REST API","javadocs"],"text":"API Reference # Janssen Server components publish REST API using OpenAPI specification and Java API using javadoc. REST API # Follow the links below to access respective documentation. Service REST API Jans Auth Server Swagger Jans Config API Swagger Jans Core NA Jans FIDO 2 Swagger Jans SCIM API Swagger Javadocs # Javadocs for all the modules can be accessed from left side navigation bar under respective module name in Reference Guide > Javadocs / OpenAPI .","title":"API Reference"},{"location":"admin/reference/openapi/#api-reference","text":"Janssen Server components publish REST API using OpenAPI specification and Java API using javadoc.","title":"API Reference"},{"location":"admin/reference/openapi/#rest-api","text":"Follow the links below to access respective documentation. Service REST API Jans Auth Server Swagger Jans Config API Swagger Jans Core NA Jans FIDO 2 Swagger Jans SCIM API Swagger","title":"REST API"},{"location":"admin/reference/openapi/#javadocs","text":"Javadocs for all the modules can be accessed from left side navigation bar under respective module name in Reference Guide > Javadocs / OpenAPI .","title":"Javadocs"},{"location":"admin/reference/database/","tags":["administration","reference","database"],"text":"Overview # Modern systems can work with different DB. Jans is also not exception from this rule. Currently it can work with different DB types and also can work in hybrid environment where application can use the strong power of each DB. This part is based on jans-orm layer. It has pluggable architecture which allows to add support for more DB in future. One of the main target of ORM module is to provide simple lightweight layer to access DB. Also it provides abstractions which hide dependency to specific DB. Supported DB # Jans has next persistence modules out-of-the-box: LDAP Couchbase Spanner MySQL PostreSQL MariaDB Hybrid . This is virtual DB layer which allows to combine few DB types based on record type. Configuration # Type of DB layer is specified in /etc/jans/conf/ : persistence.type=ldap The list of allowed property values is next: ldap, couchbase, sql, spanner, hybrid . It's defined in this list . The corresponding list of configuration files for these persistence types are: jans-ldap.properties jans-couchbase.properties jans-spanner.properties jans-sql.properties jans-hybrid.properties These files contains DB specific properties and format of them is specified in the relevant sections of this documentation. The applications reloads configuration from these files after start up or on files date time modification after initialization. Architecture # Jans ORM has modular architecture. The are few layers in this implementation jans-orm-core : This is base layer with next functionality: define API methods to work with DB without specific DB dependency provide base implementation with reusable parts needed for DB modules implementation scan beans and work with ORM layer annotations jans-orm-annotation : Define annotations which instruct ORM about how to work with beans and properties jans-orm-filter : This module provides Filter API. The syntax is very similar to LDAP filters. The ORM layer converts them at runtime to DB query syntax: SQL/NoSQL/LDAP jans-orm-cdi : Provides reusable factory which can be used in CDI based projects jans-orm-standalone : Provides reusable factory for non CDI based application jans-orm-ldap, jans-orm-couchbase, jans-orm-spanner, jans-orm-sql : These are DB specific implementations. Sample table and ORM API # In order to work with DB ORM layer should know which data (attributes/columns) is needed for application. Most part of this information it takes from DB schema at startup but rest of it developer should define in java bean. Here is typical schema with comments: // Specify that this is Table/objectClass structure @DataEntry // Table/objectClass name is `jansPerson` @ObjectClass(value = \"jansPerson\") public class SimpleUser implements Serializable { private static final long serialVersionUID = -1634191420188575733L; // Define entry primary key. In LDAP terminology it's DN @DN private String dn; // Define text attribute with name in DB `uid`. // Consistency attribute instruct ORM that it should send query to DB and // specify that it should execute it after table index update. // This is used with Couchbase DB @AttributeName(name = \"uid\", consistency = true) private String userId; // Define date/time attribute with name in DB `updatedAt` @AttributeName private Date updatedAt; // Define date/time attribute with name in DB `jansCreationTimestamp` @AttributeName(name = \"jansCreationTimestamp\") private Date createdAt; // Define multivalued text attribute with name in DB `jansPersistentJWT` @AttributeName(name = \"jansPersistentJWT\") private String[] oxAuthPersistentJwt; // All attributes which not defined above ORM should put into the List<CustomObjectAttribute> // This is convenient for custom attributes @AttributesList(name = \"name\", value = \"values\", multiValued = \"multiValued\", sortByName = true) protected List<CustomObjectAttribute> customAttributes = new ArrayList<CustomObjectAttribute>(); // Specify additional objecClass // This is needed for LDAP only @CustomObjectClass private String[] customObjectClasses; ... Main PersistenceEntryManager API methods which applications can use: <T> boolean authenticate(String primaryKey, Class<T> entryClass, String password); <T> boolean authenticate(String baseDN, Class<T> entryClass, String userName, String password); void persist(Object entry); void merge(Object entry); <T> boolean contains(String primaryKey, Class<T> entryClass); <T> boolean contains(String primaryKey, Class<T> entryClass, Filter filter); <T> int countEntries(Object entry); <T> int countEntries(String primaryKey, Class<T> entryClass, Filter filter); <T> int countEntries(String primaryKey, Class<T> entryClass, Filter filter, SearchScope scope); <T> T find(Object primaryKey, Class<T> entryClass, String[] ldapReturnAttributes); <T> List<T> findEntries(Object entry); <T> List<T> findEntries(Object entry, int count); <T> List<T> findEntries(String primaryKey, Class<T> entryClass, Filter filter); <T> List<T> findEntries(String primaryKey, Class<T> entryClass, Filter filter, int count); <T> List<T> findEntries(String primaryKey, Class<T> entryClass, Filter filter, String[] ldapReturnAttributes); <T> List<T> findEntries(String primaryKey, Class<T> entryClass, Filter filter, String[] ldapReturnAttributes, int count); <T> List<T> findEntries(String primaryKey, Class<T> entryClass, Filter filter, SearchScope scope, String[] ldapReturnAttributes, int start, int count, int chunkSize); <T> List<T> findEntries(String primaryKey, Class<T> entryClass, Filter filter, SearchScope scope, String[] ldapReturnAttributes, BatchOperation<T> batchOperation, int start, int count, int chunkSize); <T> PagedResult<T> findPagedEntries(String primaryKey, Class<T> entryClass, Filter filter, String[] ldapReturnAttributes, String sortBy, SortOrder sortOrder, int start, int count, int chunkSize); void remove(Object entry); <T> void removeByDn(String dn, String[] objectClasses); <T> void remove(String primaryKey, Class<T> entryClass); <T> int remove(String primaryKey, Class<T> entryClass, Filter filter, int count); <T> void removeRecursively(String primaryKey, Class<T> entryClass); <T> void removeRecursivelyFromDn(String primaryKey, String[] objectClasses); boolean hasBranchesSupport(String primaryKey); boolean hasExpirationSupport(String primaryKey); String getPersistenceType(); String getPersistenceType(String primaryKey); Date decodeTime(String primaryKey, String date); String encodeTime(String primaryKey, Date date); int getHashCode(Object entry); <T> List<AttributeData> exportEntry(String dn, String objectClass); <T> void importEntry(String dn, Class<T> entryClass, List<AttributeData> data); New DB support and integrations # The ORM developed with perspective to simplify to add new DB support. New ORM implementation requires only few classes/interfaces implementations. Extend public interface DbOperationService extends PersistenceOperationService interface to define list of CRUD method which DbEntryManager can use. Implement abstract methods DbEntryManager extends BaseEntryManager<DbOperationService> . This define DB specific methods to work with DB low layer. Implement public class DbEntryManagerFactory implements PersistenceEntryManagerFactory . This CDI @ApplicationScoped needed to allow integrate new DB module into application. Put into final jar file /META-INF/beans.xml to allow CDI framework automatically find DbEntryManagerFactory from previous point. After this it's enough to put new ORM DB module into application war file or follow customization sections to add jar file to custom jetty classpath. DB Schema # The DB schema and beans definitions should match each other. During deployment setup generates schema and indexes based on rules in schema file . The data types defined in it setup map to DB SQL types based on default rules . It's possible to override default generation rules. For this case there is next file . Default indexes defined in next files: coubase_index.json , spanner_index.json , mysql_index.json , pgsql_index.json","title":"Overview"},{"location":"admin/reference/database/#overview","text":"Modern systems can work with different DB. Jans is also not exception from this rule. Currently it can work with different DB types and also can work in hybrid environment where application can use the strong power of each DB. This part is based on jans-orm layer. It has pluggable architecture which allows to add support for more DB in future. One of the main target of ORM module is to provide simple lightweight layer to access DB. Also it provides abstractions which hide dependency to specific DB.","title":"Overview"},{"location":"admin/reference/database/#supported-db","text":"Jans has next persistence modules out-of-the-box: LDAP Couchbase Spanner MySQL PostreSQL MariaDB Hybrid . This is virtual DB layer which allows to combine few DB types based on record type.","title":"Supported DB"},{"location":"admin/reference/database/#configuration","text":"Type of DB layer is specified in /etc/jans/conf/ : persistence.type=ldap The list of allowed property values is next: ldap, couchbase, sql, spanner, hybrid . It's defined in this list . The corresponding list of configuration files for these persistence types are: jans-ldap.properties jans-couchbase.properties jans-spanner.properties jans-sql.properties jans-hybrid.properties These files contains DB specific properties and format of them is specified in the relevant sections of this documentation. The applications reloads configuration from these files after start up or on files date time modification after initialization.","title":"Configuration"},{"location":"admin/reference/database/#architecture","text":"Jans ORM has modular architecture. The are few layers in this implementation jans-orm-core : This is base layer with next functionality: define API methods to work with DB without specific DB dependency provide base implementation with reusable parts needed for DB modules implementation scan beans and work with ORM layer annotations jans-orm-annotation : Define annotations which instruct ORM about how to work with beans and properties jans-orm-filter : This module provides Filter API. The syntax is very similar to LDAP filters. The ORM layer converts them at runtime to DB query syntax: SQL/NoSQL/LDAP jans-orm-cdi : Provides reusable factory which can be used in CDI based projects jans-orm-standalone : Provides reusable factory for non CDI based application jans-orm-ldap, jans-orm-couchbase, jans-orm-spanner, jans-orm-sql : These are DB specific implementations.","title":"Architecture"},{"location":"admin/reference/database/#sample-table-and-orm-api","text":"In order to work with DB ORM layer should know which data (attributes/columns) is needed for application. Most part of this information it takes from DB schema at startup but rest of it developer should define in java bean. Here is typical schema with comments: // Specify that this is Table/objectClass structure @DataEntry // Table/objectClass name is `jansPerson` @ObjectClass(value = \"jansPerson\") public class SimpleUser implements Serializable { private static final long serialVersionUID = -1634191420188575733L; // Define entry primary key. In LDAP terminology it's DN @DN private String dn; // Define text attribute with name in DB `uid`. // Consistency attribute instruct ORM that it should send query to DB and // specify that it should execute it after table index update. // This is used with Couchbase DB @AttributeName(name = \"uid\", consistency = true) private String userId; // Define date/time attribute with name in DB `updatedAt` @AttributeName private Date updatedAt; // Define date/time attribute with name in DB `jansCreationTimestamp` @AttributeName(name = \"jansCreationTimestamp\") private Date createdAt; // Define multivalued text attribute with name in DB `jansPersistentJWT` @AttributeName(name = \"jansPersistentJWT\") private String[] oxAuthPersistentJwt; // All attributes which not defined above ORM should put into the List<CustomObjectAttribute> // This is convenient for custom attributes @AttributesList(name = \"name\", value = \"values\", multiValued = \"multiValued\", sortByName = true) protected List<CustomObjectAttribute> customAttributes = new ArrayList<CustomObjectAttribute>(); // Specify additional objecClass // This is needed for LDAP only @CustomObjectClass private String[] customObjectClasses; ... Main PersistenceEntryManager API methods which applications can use: <T> boolean authenticate(String primaryKey, Class<T> entryClass, String password); <T> boolean authenticate(String baseDN, Class<T> entryClass, String userName, String password); void persist(Object entry); void merge(Object entry); <T> boolean contains(String primaryKey, Class<T> entryClass); <T> boolean contains(String primaryKey, Class<T> entryClass, Filter filter); <T> int countEntries(Object entry); <T> int countEntries(String primaryKey, Class<T> entryClass, Filter filter); <T> int countEntries(String primaryKey, Class<T> entryClass, Filter filter, SearchScope scope); <T> T find(Object primaryKey, Class<T> entryClass, String[] ldapReturnAttributes); <T> List<T> findEntries(Object entry); <T> List<T> findEntries(Object entry, int count); <T> List<T> findEntries(String primaryKey, Class<T> entryClass, Filter filter); <T> List<T> findEntries(String primaryKey, Class<T> entryClass, Filter filter, int count); <T> List<T> findEntries(String primaryKey, Class<T> entryClass, Filter filter, String[] ldapReturnAttributes); <T> List<T> findEntries(String primaryKey, Class<T> entryClass, Filter filter, String[] ldapReturnAttributes, int count); <T> List<T> findEntries(String primaryKey, Class<T> entryClass, Filter filter, SearchScope scope, String[] ldapReturnAttributes, int start, int count, int chunkSize); <T> List<T> findEntries(String primaryKey, Class<T> entryClass, Filter filter, SearchScope scope, String[] ldapReturnAttributes, BatchOperation<T> batchOperation, int start, int count, int chunkSize); <T> PagedResult<T> findPagedEntries(String primaryKey, Class<T> entryClass, Filter filter, String[] ldapReturnAttributes, String sortBy, SortOrder sortOrder, int start, int count, int chunkSize); void remove(Object entry); <T> void removeByDn(String dn, String[] objectClasses); <T> void remove(String primaryKey, Class<T> entryClass); <T> int remove(String primaryKey, Class<T> entryClass, Filter filter, int count); <T> void removeRecursively(String primaryKey, Class<T> entryClass); <T> void removeRecursivelyFromDn(String primaryKey, String[] objectClasses); boolean hasBranchesSupport(String primaryKey); boolean hasExpirationSupport(String primaryKey); String getPersistenceType(); String getPersistenceType(String primaryKey); Date decodeTime(String primaryKey, String date); String encodeTime(String primaryKey, Date date); int getHashCode(Object entry); <T> List<AttributeData> exportEntry(String dn, String objectClass); <T> void importEntry(String dn, Class<T> entryClass, List<AttributeData> data);","title":"Sample table and ORM API"},{"location":"admin/reference/database/#new-db-support-and-integrations","text":"The ORM developed with perspective to simplify to add new DB support. New ORM implementation requires only few classes/interfaces implementations. Extend public interface DbOperationService extends PersistenceOperationService interface to define list of CRUD method which DbEntryManager can use. Implement abstract methods DbEntryManager extends BaseEntryManager<DbOperationService> . This define DB specific methods to work with DB low layer. Implement public class DbEntryManagerFactory implements PersistenceEntryManagerFactory . This CDI @ApplicationScoped needed to allow integrate new DB module into application. Put into final jar file /META-INF/beans.xml to allow CDI framework automatically find DbEntryManagerFactory from previous point. After this it's enough to put new ORM DB module into application war file or follow customization sections to add jar file to custom jetty classpath.","title":"New DB support and integrations"},{"location":"admin/reference/database/#db-schema","text":"The DB schema and beans definitions should match each other. During deployment setup generates schema and indexes based on rules in schema file . The data types defined in it setup map to DB SQL types based on default rules . It's possible to override default generation rules. For this case there is next file . Default indexes defined in next files: coubase_index.json , spanner_index.json , mysql_index.json , pgsql_index.json","title":"DB Schema"},{"location":"admin/reference/database/cb-buckets/","tags":["administration","reference","database"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Couchbase Buckets"},{"location":"admin/reference/database/cb-buckets/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/reference/database/cb-buckets/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/reference/database/cb-buckets/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/reference/database/cb-config/","tags":["administration","reference","database"],"text":"Couchbase ORM persistence layer # The recommended Couchbase version is 7.x or newer. This DB should be installed before installing Jans. After running Jans setup administrator should provide user/password with role which allow to create buckets and import initial data and configuration. During installation setup generates default /etc/jans/conf/jans-couchbase.properties and creates required buckets in DB with initial data set. Configuration properties # List of specific for Couchbase default setting from jans-couchbase.properties : servers: localhost # The connect timeout is used when a Bucket is opened. # If you feel the urge to change this value to something higher, there is a good chance that your network is not properly set up. # Connecting to the server should in practice not take longer than a second on a reasonably fast network. # Default SDK connectTimeout is 10s connection.connect-timeout: 10000 # Enable/disable DNS SRV lookup for the bootstrap nodes # Default dnsSrvEnabled is true connection.dns.use-lookup: false # Key/value timeout # Default SDK kvTimeout is 2500ms connection.kv-timeout: 5000 # Query timeout # Default SDK queryTimeout is 75s connection.query-timeout: 75000 # Configures whether mutation tokens will be returned from the server for all mutation operations # Default mutationTokensEnabled is true # connection.mutation-tokens-enabled: false # At startup when connection error is occurred persistence layer can make another attempt to open buckets. # Before make next try it pause process for 5 second. If after that total connection time is less than specified # in property above new attempt will be executed connection.connection-max-wait-time: 20000 # Default scan consistency. Possible values are: not_bounded, request_plus, statement_plus connection.scan-consistency: not_bounded # Disable scan consistency in queries. Default value: false # connection.ignore-attribute-scan-consistency: true # Try to execute query with scan consitency specified in connection.scan-consistency first. # On failure execute query again with scan consistency specified in attributes defintions. Default value: true # connection.attempt-without-attribute-scan-consistency: false # Enable scopes support. Default value: false # connection.enable-scope-support: true # Disable mapping to short attribute names. Default value: false # connection.disable-attribute-mapping: true # Credentials for access Couchbase DB auth.userName: admin auth.userPassword: encrypted_password # List of used buckets buckets: jans, jans_user, jans_site, jans_cache, jans_token, jans_session # Mapping entries to buckets bucket.default: jans bucket.jans_user.mapping: people, groups, authorizations bucket.jans_site.mapping: cache-refresh bucket.jans_cache.mapping: cache bucket.jans_token.mapping: tokens bucket.jans_session.mapping: sessions # User password hashing method password.encryption.method: SSHA-256 # SSL connection trust store ssl.trustStore.enable: true ssl.trustStore.file: /etc/certs/couchbase.pkcs12 ssl.trustStore.pin: encrypted_password ssl.trustStore.type: pkcs12 tls.enable: false The rest of properties are static for all other supported DB: binaryAttributes=objectGUID certificateAttributes=userCertificate doc_id building rules # In order to support transparency for end applications and allow data migration from one DB to another ORM requires DN attribute in each entry. This attribute it also uses to build doc_id . Here is example of this DN -> doc_id conversion: In order to build unique document identifier ORM uses another unique attribute DN . doc_id is concatenated RDN list in reversed order. To join them ORM uses _ character. The root RDN is excluded. if entry has DN with only root RDN for it doc_id is _ . Buckets mapping # Couchbase supports few buckets types. Also each bucket can be tuned for specific task. For example for token operations application need fast access to such entries. ORM allows to split data by bucket with mapping specified in bucket.<bucket_name> properties. The list of allowed buckets which ORM can use should be specified in buckets property. Property bucket.default is mandatory because it's specify bucket which ORM should use if not mapping specified for entry. ORM uses next rule to determine in which bucket it should store entry: Get list of RDN from entry DN . Use second RDN from list in mapping rule. Iterate trough bucket.<bucket_name> property value and check if it in list If ORM not find bucket_name in previous step it uses bucket specified in bucket.default property value. Data mapping rules # ORM uses JSON types to store data in entries. Since there is no date time support in JSON it uses Couchbase compatible format ISO-8601. Example: For user password field ORM on persist/update operations automatically create hash. On authentication ORM compares hashes. ORM also uses Couchbase sub-document API to store attributes defined in java beans with @JsonObject annotation. Java examples # This example shows how to use ORM. It opens connection to Couchbase DB and add user entry to it: public static void main(String[] args) { // Create Couchbase entry manager CouchbaseEntryManager couchbaseEntryManager = createCouchbaseEntryManager(); // Create and fill user bean SimpleUser newUser = new SimpleUser(); newUser.setDn(String.format(\"inum=%s,ou=people,o=jans\", System.currentTimeMillis())); newUser.setUserId(\"sample_user_\" + System.currentTimeMillis()); newUser.setUserPassword(\"test\"); newUser.getCustomAttributes().add(new CustomObjectAttribute(\"jansAddres\", Arrays.asList(\"London\", \"Texas\", \"New York\"))); newUser.getCustomAttributes().add(new CustomObjectAttribute(\"jansGuid\", \"test_value\")); // Call ORM API to store entry couchbaseEntryManager.persist(newUser); couchbaseEntryManager.destroy(); } public static CouchbaseEntryManager createCouchbaseEntryManager() { CouchbaseEntryManagerFactory couchbaseEntryManagerFactory = new CouchbaseEntryManagerFactory(); couchbaseEntryManagerFactory.create(); Properties connectionProperties = getSampleConnectionProperties(); CouchbaseEntryManager couchbaseEntryManager = couchbaseEntryManagerFactory.createEntryManager(connectionProperties); return couchbaseEntryManager; } private static Properties getSampleConnectionProperties() { Properties connectionProperties = new Properties(); connectionProperties.put(\"couchbase#servers\", \"localhost\"); connectionProperties.put(\"couchbase#auth.userName\", \"admin\"); connectionProperties.put(\"couchbase#auth.userPassword\", \"secret\"); connectionProperties.put(\"couchbase#connection.dns.use-lookup\", \"false\"); connectionProperties.put(\"couchbase#buckets\", \"jans, jans_user, jans_site, jans_cache, jans_token, jans_session\"); connectionProperties.put(\"couchbase#bucket.default\", \"jans\"); connectionProperties.put(\"couchbase#bucket.jans_user.mapping\", \"people, groups, authorizations\"); connectionProperties.put(\"couchbase#bucket.jans_site.mapping\", \"cache-refresh\"); connectionProperties.put(\"couchbase#bucket.jans_cache.mapping\", \"cache\"); connectionProperties.put(\"couchbase#bucket.jans_token.mapping\", \"tokens\"); connectionProperties.put(\"couchbase#bucket.jans_session.mapping\", \"sessions\"); connectionProperties.put(\"couchbase#password.encryption.method\", \"SSHA-256\"); connectionProperties.put(\"couchbase#binaryAttributes\", \"objectGUID\"); connectionProperties.put(\"couchbase#certificateAttributes\", \"userCertificate\"); return connectionProperties; } More Couchbase ORM examples is in this sample module.","title":"Couchbase Configuration"},{"location":"admin/reference/database/cb-config/#couchbase-orm-persistence-layer","text":"The recommended Couchbase version is 7.x or newer. This DB should be installed before installing Jans. After running Jans setup administrator should provide user/password with role which allow to create buckets and import initial data and configuration. During installation setup generates default /etc/jans/conf/jans-couchbase.properties and creates required buckets in DB with initial data set.","title":"Couchbase ORM persistence layer"},{"location":"admin/reference/database/cb-config/#configuration-properties","text":"List of specific for Couchbase default setting from jans-couchbase.properties : servers: localhost # The connect timeout is used when a Bucket is opened. # If you feel the urge to change this value to something higher, there is a good chance that your network is not properly set up. # Connecting to the server should in practice not take longer than a second on a reasonably fast network. # Default SDK connectTimeout is 10s connection.connect-timeout: 10000 # Enable/disable DNS SRV lookup for the bootstrap nodes # Default dnsSrvEnabled is true connection.dns.use-lookup: false # Key/value timeout # Default SDK kvTimeout is 2500ms connection.kv-timeout: 5000 # Query timeout # Default SDK queryTimeout is 75s connection.query-timeout: 75000 # Configures whether mutation tokens will be returned from the server for all mutation operations # Default mutationTokensEnabled is true # connection.mutation-tokens-enabled: false # At startup when connection error is occurred persistence layer can make another attempt to open buckets. # Before make next try it pause process for 5 second. If after that total connection time is less than specified # in property above new attempt will be executed connection.connection-max-wait-time: 20000 # Default scan consistency. Possible values are: not_bounded, request_plus, statement_plus connection.scan-consistency: not_bounded # Disable scan consistency in queries. Default value: false # connection.ignore-attribute-scan-consistency: true # Try to execute query with scan consitency specified in connection.scan-consistency first. # On failure execute query again with scan consistency specified in attributes defintions. Default value: true # connection.attempt-without-attribute-scan-consistency: false # Enable scopes support. Default value: false # connection.enable-scope-support: true # Disable mapping to short attribute names. Default value: false # connection.disable-attribute-mapping: true # Credentials for access Couchbase DB auth.userName: admin auth.userPassword: encrypted_password # List of used buckets buckets: jans, jans_user, jans_site, jans_cache, jans_token, jans_session # Mapping entries to buckets bucket.default: jans bucket.jans_user.mapping: people, groups, authorizations bucket.jans_site.mapping: cache-refresh bucket.jans_cache.mapping: cache bucket.jans_token.mapping: tokens bucket.jans_session.mapping: sessions # User password hashing method password.encryption.method: SSHA-256 # SSL connection trust store ssl.trustStore.enable: true ssl.trustStore.file: /etc/certs/couchbase.pkcs12 ssl.trustStore.pin: encrypted_password ssl.trustStore.type: pkcs12 tls.enable: false The rest of properties are static for all other supported DB: binaryAttributes=objectGUID certificateAttributes=userCertificate","title":"Configuration properties"},{"location":"admin/reference/database/cb-config/#doc_id-building-rules","text":"In order to support transparency for end applications and allow data migration from one DB to another ORM requires DN attribute in each entry. This attribute it also uses to build doc_id . Here is example of this DN -> doc_id conversion: In order to build unique document identifier ORM uses another unique attribute DN . doc_id is concatenated RDN list in reversed order. To join them ORM uses _ character. The root RDN is excluded. if entry has DN with only root RDN for it doc_id is _ .","title":"doc_id building rules"},{"location":"admin/reference/database/cb-config/#buckets-mapping","text":"Couchbase supports few buckets types. Also each bucket can be tuned for specific task. For example for token operations application need fast access to such entries. ORM allows to split data by bucket with mapping specified in bucket.<bucket_name> properties. The list of allowed buckets which ORM can use should be specified in buckets property. Property bucket.default is mandatory because it's specify bucket which ORM should use if not mapping specified for entry. ORM uses next rule to determine in which bucket it should store entry: Get list of RDN from entry DN . Use second RDN from list in mapping rule. Iterate trough bucket.<bucket_name> property value and check if it in list If ORM not find bucket_name in previous step it uses bucket specified in bucket.default property value.","title":"Buckets mapping"},{"location":"admin/reference/database/cb-config/#data-mapping-rules","text":"ORM uses JSON types to store data in entries. Since there is no date time support in JSON it uses Couchbase compatible format ISO-8601. Example: For user password field ORM on persist/update operations automatically create hash. On authentication ORM compares hashes. ORM also uses Couchbase sub-document API to store attributes defined in java beans with @JsonObject annotation.","title":"Data mapping rules"},{"location":"admin/reference/database/cb-config/#java-examples","text":"This example shows how to use ORM. It opens connection to Couchbase DB and add user entry to it: public static void main(String[] args) { // Create Couchbase entry manager CouchbaseEntryManager couchbaseEntryManager = createCouchbaseEntryManager(); // Create and fill user bean SimpleUser newUser = new SimpleUser(); newUser.setDn(String.format(\"inum=%s,ou=people,o=jans\", System.currentTimeMillis())); newUser.setUserId(\"sample_user_\" + System.currentTimeMillis()); newUser.setUserPassword(\"test\"); newUser.getCustomAttributes().add(new CustomObjectAttribute(\"jansAddres\", Arrays.asList(\"London\", \"Texas\", \"New York\"))); newUser.getCustomAttributes().add(new CustomObjectAttribute(\"jansGuid\", \"test_value\")); // Call ORM API to store entry couchbaseEntryManager.persist(newUser); couchbaseEntryManager.destroy(); } public static CouchbaseEntryManager createCouchbaseEntryManager() { CouchbaseEntryManagerFactory couchbaseEntryManagerFactory = new CouchbaseEntryManagerFactory(); couchbaseEntryManagerFactory.create(); Properties connectionProperties = getSampleConnectionProperties(); CouchbaseEntryManager couchbaseEntryManager = couchbaseEntryManagerFactory.createEntryManager(connectionProperties); return couchbaseEntryManager; } private static Properties getSampleConnectionProperties() { Properties connectionProperties = new Properties(); connectionProperties.put(\"couchbase#servers\", \"localhost\"); connectionProperties.put(\"couchbase#auth.userName\", \"admin\"); connectionProperties.put(\"couchbase#auth.userPassword\", \"secret\"); connectionProperties.put(\"couchbase#connection.dns.use-lookup\", \"false\"); connectionProperties.put(\"couchbase#buckets\", \"jans, jans_user, jans_site, jans_cache, jans_token, jans_session\"); connectionProperties.put(\"couchbase#bucket.default\", \"jans\"); connectionProperties.put(\"couchbase#bucket.jans_user.mapping\", \"people, groups, authorizations\"); connectionProperties.put(\"couchbase#bucket.jans_site.mapping\", \"cache-refresh\"); connectionProperties.put(\"couchbase#bucket.jans_cache.mapping\", \"cache\"); connectionProperties.put(\"couchbase#bucket.jans_token.mapping\", \"tokens\"); connectionProperties.put(\"couchbase#bucket.jans_session.mapping\", \"sessions\"); connectionProperties.put(\"couchbase#password.encryption.method\", \"SSHA-256\"); connectionProperties.put(\"couchbase#binaryAttributes\", \"objectGUID\"); connectionProperties.put(\"couchbase#certificateAttributes\", \"userCertificate\"); return connectionProperties; } More Couchbase ORM examples is in this sample module.","title":"Java examples"},{"location":"admin/reference/database/cb-ops/","tags":["administration","reference","database"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Couchbase Operation"},{"location":"admin/reference/database/cb-ops/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/reference/database/cb-ops/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/reference/database/cb-ops/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/reference/database/cb-schema/","tags":["administration","reference","database"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Couchbase Schema"},{"location":"admin/reference/database/cb-schema/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/reference/database/cb-schema/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/reference/database/cb-schema/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/reference/database/converting-data/","tags":["administration","reference","database","migration"],"text":"Data Conversion # This document lists the steps required to move data from LDAP to various other persistence mechanisms supported by Janssen Server. LDAP to MySQL Migration Script # This script migrates data from LDAP to MySQL on Ubuntu Linux platform. To use this script, firt install python3-ldap module apt install python3-ldap Install MySQL Server, create a database (namely jansdb ), add a user (namely jans ) and give grant previlages to user jans on jansdb Download script to /opt/jans/jans-setup wget https://raw.githubusercontent.com/JanssenProject/jans/jans-linux-setup-ldap2mysql/jans-linux-setup/tools/ldap2mysql/ldap2mysql.py -O /opt/jans/jans-setup/ldap2mysql.py Execute cd /opt/jans/jans-setup ` python3 ldap2mysql.py -remote-rdbm = mysql -rdbm-user = jans -rdbm-password = <password> -rdbm-db = jansdb -rdbm-host = <rdbm_host> Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Converting Data"},{"location":"admin/reference/database/converting-data/#data-conversion","text":"This document lists the steps required to move data from LDAP to various other persistence mechanisms supported by Janssen Server.","title":"Data Conversion"},{"location":"admin/reference/database/converting-data/#ldap-to-mysql-migration-script","text":"This script migrates data from LDAP to MySQL on Ubuntu Linux platform. To use this script, firt install python3-ldap module apt install python3-ldap Install MySQL Server, create a database (namely jansdb ), add a user (namely jans ) and give grant previlages to user jans on jansdb Download script to /opt/jans/jans-setup wget https://raw.githubusercontent.com/JanssenProject/jans/jans-linux-setup-ldap2mysql/jans-linux-setup/tools/ldap2mysql/ldap2mysql.py -O /opt/jans/jans-setup/ldap2mysql.py Execute cd /opt/jans/jans-setup ` python3 ldap2mysql.py -remote-rdbm = mysql -rdbm-user = jans -rdbm-password = <password> -rdbm-db = jansdb -rdbm-host = <rdbm_host> Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"LDAP to MySQL Migration Script"},{"location":"admin/reference/database/ldap-config/","tags":["administration","reference","database"],"text":"LDAP ORM persistence layer # During installation the administrator can select option to install LDAP DB on same server. For this DB installation generates default /etc/jans/conf/jans-ldap.properties and creates jansdb schema with tables and initial data set. Configuration properties # List of specific for LDAP default setting from jans-ldap.properties : bindDN: cn=directory manager bindPassword: CC0NHhtXW78= servers: localhost:1636 useSSL: true ssl.trustStoreFile: /etc/certs/opendj.pkcs12 ssl.trustStorePin: CC0NHhtXW78= ssl.trustStoreFormat: pkcs12 maxconnections: 40 # Max wait 20 seconds connection.max-wait-time-millis=20000 # Force to recreate polled connections after 30 minutes connection.max-age-time-millis=1800000 # Invoke connection health check after checkout it from pool connection-pool.health-check.on-checkout.enabled=false # Interval to check connections in pool. Value is 3 minutes. Not used when onnection-pool.health-check.on-checkout.enabled=true connection-pool.health-check.interval-millis=180000 # How long to wait during connection health check. Max wait 20 seconds connection-pool.health-check.max-response-time-millis=20000 The rest of properties are static for all other supported DB: binaryAttributes=objectGUID certificateAttributes=userCertificate Generic entry type # Each entry type in o=jans LDAP schema follow next rules: has base top and one objectClass which defines attributes entry can have more additional custom attributes. It's possible to add them with additional objectClass Data mapping rules # ORM supports all LDAP types and convert them to java types at runtime. It also supports multi-valued LDAP attribute values. For user password field LDAP DB automatically create hash. The type of this hash is specified in server configuration. To store attributes defined in java beans with @JsonObject annotation ORM uses Directory String attribute. Java example # This example shows how to use ORM. It opens connection to LDAP DB and add user entry to it: public static void main(String[] args) { // Create Sql entry manager LdapEntryManager ldapEntryManager = createLdapEntryManager(); // Create and fill user bean SimpleUser newUser = new SimpleUser(); newUser.setDn(String.format(\"inum=%s,ou=people,o=jans\", System.currentTimeMillis())); newUser.setUserId(\"sample_user_\" + System.currentTimeMillis()); newUser.setUserPassword(\"test\"); newUser.getCustomAttributes().add(new CustomObjectAttribute(\"jansAddres\", Arrays.asList(\"London\", \"Texas\", \"New York\"))); newUser.getCustomAttributes().add(new CustomObjectAttribute(\"jansGuid\", \"test_value\")); // Call ORM API to store entry ldapEntryManager.persist(newUser); ldapEntryManager.destroy(); } public static LdapEntryManager createLdapEntryManager() { LdapEntryManagerFactory ldapEntryManagerFactory = new LdapEntryManagerFactory(); Properties connectionProperties = getSampleConnectionProperties(); LdapEntryManager ldapEntryManager = ldapEntryManagerFactory.createEntryManager(connectionProperties); return ldapEntryManager; } private static Properties getSampleConnectionProperties() { Properties connectionProperties = new Properties(); connectionProperties.put(\"ldap#bindDN\", \"cn=directory manager\"); connectionProperties.put(\"ldap#bindPassword\", \"secret\"); connectionProperties.put(\"ldap#servers\", \"localhost:1636\"); connectionProperties.put(\"ldap#useSSL\", \"true\"); connectionProperties.put(\"ldap#maxconnections\", \"40\"); // Max wait 20 seconds connectionProperties.put(\"ldap#connection.max-wait-time-millis\", \"20000\"); // Force to recreate polled connections after 30 minutes connectionProperties.put(\"ldap#connection.max-age-time-millis\", \"1800000\"); // Invoke connection health check after checkout it from pool connectionProperties.put(\"ldap#connection-pool.health-check.on-checkout.enabled\", \"false\"); // Interval to check connections in pool. Value is 3 minutes. Not used when onnection-pool.health-check.on-checkout.enabled=true connectionProperties.put(\"ldap#connection-pool.health-check.interval-millis\", \"180000\"); // How long to wait during connection health check. Max wait 20 seconds connectionProperties.put(\"ldap#connection-pool.health-check.max-response-time-millis\", \"20000\"); return connectionProperties; } More LDAP ORM examples is in this sample module.","title":"LDAP Configuration"},{"location":"admin/reference/database/ldap-config/#ldap-orm-persistence-layer","text":"During installation the administrator can select option to install LDAP DB on same server. For this DB installation generates default /etc/jans/conf/jans-ldap.properties and creates jansdb schema with tables and initial data set.","title":"LDAP ORM persistence layer"},{"location":"admin/reference/database/ldap-config/#configuration-properties","text":"List of specific for LDAP default setting from jans-ldap.properties : bindDN: cn=directory manager bindPassword: CC0NHhtXW78= servers: localhost:1636 useSSL: true ssl.trustStoreFile: /etc/certs/opendj.pkcs12 ssl.trustStorePin: CC0NHhtXW78= ssl.trustStoreFormat: pkcs12 maxconnections: 40 # Max wait 20 seconds connection.max-wait-time-millis=20000 # Force to recreate polled connections after 30 minutes connection.max-age-time-millis=1800000 # Invoke connection health check after checkout it from pool connection-pool.health-check.on-checkout.enabled=false # Interval to check connections in pool. Value is 3 minutes. Not used when onnection-pool.health-check.on-checkout.enabled=true connection-pool.health-check.interval-millis=180000 # How long to wait during connection health check. Max wait 20 seconds connection-pool.health-check.max-response-time-millis=20000 The rest of properties are static for all other supported DB: binaryAttributes=objectGUID certificateAttributes=userCertificate","title":"Configuration properties"},{"location":"admin/reference/database/ldap-config/#generic-entry-type","text":"Each entry type in o=jans LDAP schema follow next rules: has base top and one objectClass which defines attributes entry can have more additional custom attributes. It's possible to add them with additional objectClass","title":"Generic entry type"},{"location":"admin/reference/database/ldap-config/#data-mapping-rules","text":"ORM supports all LDAP types and convert them to java types at runtime. It also supports multi-valued LDAP attribute values. For user password field LDAP DB automatically create hash. The type of this hash is specified in server configuration. To store attributes defined in java beans with @JsonObject annotation ORM uses Directory String attribute.","title":"Data mapping rules"},{"location":"admin/reference/database/ldap-config/#java-example","text":"This example shows how to use ORM. It opens connection to LDAP DB and add user entry to it: public static void main(String[] args) { // Create Sql entry manager LdapEntryManager ldapEntryManager = createLdapEntryManager(); // Create and fill user bean SimpleUser newUser = new SimpleUser(); newUser.setDn(String.format(\"inum=%s,ou=people,o=jans\", System.currentTimeMillis())); newUser.setUserId(\"sample_user_\" + System.currentTimeMillis()); newUser.setUserPassword(\"test\"); newUser.getCustomAttributes().add(new CustomObjectAttribute(\"jansAddres\", Arrays.asList(\"London\", \"Texas\", \"New York\"))); newUser.getCustomAttributes().add(new CustomObjectAttribute(\"jansGuid\", \"test_value\")); // Call ORM API to store entry ldapEntryManager.persist(newUser); ldapEntryManager.destroy(); } public static LdapEntryManager createLdapEntryManager() { LdapEntryManagerFactory ldapEntryManagerFactory = new LdapEntryManagerFactory(); Properties connectionProperties = getSampleConnectionProperties(); LdapEntryManager ldapEntryManager = ldapEntryManagerFactory.createEntryManager(connectionProperties); return ldapEntryManager; } private static Properties getSampleConnectionProperties() { Properties connectionProperties = new Properties(); connectionProperties.put(\"ldap#bindDN\", \"cn=directory manager\"); connectionProperties.put(\"ldap#bindPassword\", \"secret\"); connectionProperties.put(\"ldap#servers\", \"localhost:1636\"); connectionProperties.put(\"ldap#useSSL\", \"true\"); connectionProperties.put(\"ldap#maxconnections\", \"40\"); // Max wait 20 seconds connectionProperties.put(\"ldap#connection.max-wait-time-millis\", \"20000\"); // Force to recreate polled connections after 30 minutes connectionProperties.put(\"ldap#connection.max-age-time-millis\", \"1800000\"); // Invoke connection health check after checkout it from pool connectionProperties.put(\"ldap#connection-pool.health-check.on-checkout.enabled\", \"false\"); // Interval to check connections in pool. Value is 3 minutes. Not used when onnection-pool.health-check.on-checkout.enabled=true connectionProperties.put(\"ldap#connection-pool.health-check.interval-millis\", \"180000\"); // How long to wait during connection health check. Max wait 20 seconds connectionProperties.put(\"ldap#connection-pool.health-check.max-response-time-millis\", \"20000\"); return connectionProperties; } More LDAP ORM examples is in this sample module.","title":"Java example"},{"location":"admin/reference/database/ldap-namespace/","tags":["administration","reference","database","ldap"],"text":"graph LR A[ou=jans] --> B(ou=agama) B --> B1[ou=flows] B1 --> B11[agFlowQname=flow_name1] B1 --> B12[agFlowQname=flow_name2] B1 --> B13[agFlowQname=flow_name3] B1 --> B14[agFlowQname=flow_name4] B --> B2[ou=runs] B2 --> B21[jansId=....] B2 --> B22[jansId=....] A[ou=jans] --> C(ou=attributes) C --> C1[inum=.....] C --> C2[inum=.....] C --> Cn[inum=.....] A[ou=jans] --> D(ou=authorizations) D --> D1[jansId=...] D --> D2[jansId=...] D --> D3[jansId=...] D --> Dn[jansId=...] A[ou=jans] --> E(ou=cache) E --> E1[uuid.....] A[ou=jans] --> F(ou=ciba) A[ou=jans] --> G(ou=clients) G --> G1[inum=....] G1 --> G12[ou=uma_permission] G12 --> G121[jansTicket=.....] G12 --> G122[jansTicket=.....] G --> G2[inum=....] G2 --> G21[ou=uma_permission] G21 --> G211[jansTicket=.....] G21 --> G212[jansTicket=.....] G --> Gn[inum=....] A[ou=jans] --> H(ou=groups) H --> H1[inum=...] H --> H2[inum=...] H --> Hn[inum=...] A[ou=jans] --> I(ou=metric) A[ou=jans] --> J(ou=par) A[ou=jans] --> K(ou=people) K --> K1[inum=....] K1 --> K11[ou=fido2_register] K11 --> K111[jansId=....] K11 --> K112[jansId=....] K11 --> K112[jansId=....] K1 --> K12[ou=fido2_auth] K12 --> K121[jansId=....] K12 --> K122[jansId=....] K12 --> K123[jansId=....] K --> K2[inum=....] K --> K3[inum=....] K --> K4[inum=....] K --> K5[inum=....] A[ou=jans] --> L(ou=push) L --> L1[ou=application] L --> L2[ou=device] A[ou=jans] --> M(ou=resetPasswordRequests) A[ou=jans] --> N(ou=scope) N --> N1[inum=...] N --> N2[inum=...] N --> N3[inum=...] A[ou=jans] --> O(ou=scripts) O --> O1[inum=...] O --> O2[inum=...] A[ou=jans] --> P(ou=sector_identifiers) A[ou=jans] --> Q(ou=sessions) Q --> Q1[jansId=....] Q --> Q2[jansId=....] Q --> Q3[jansId=....] A[ou=jans] --> R(ou=stat) R --> R1[ou=yyyymm] R --> R2[ou=yyyymm] A[ou=jans] --> S(ou=tokens) S --> S1[ou=uma_rpt] S --> S2[tknCde=....] S --> S3[tknCde=....] S --> S4[tknCde=....] A[ou=jans] --> T(ou=trustRelationships) T --> T1[inum=...] T --> T2[inum=...] T --> T3[inum=...] A[ou=jans] --> U(ou=uma) U --> W[ou=pct] W --> W1[tknCde=...] W --> W2[tknCde=...] W --> W3[tknCde=...] U --> X[ou=resources] X --> X1[jansId=...] X --> X2[jansId=...] X --> X3[jansId=...] A[ou=jans] --> V(ou=configuration) V --> V1[ou=admin-ui] V --> V2[ou=casa] V --> V3[ou=jans-auth] V --> V4[ou=jans-config-api] V --> V5[ou=jans-fido2] V --> V6[ou=jans-scim]","title":"LDAP Namespace Diagram"},{"location":"admin/reference/database/ldap-ops/","tags":["administration","reference","database"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"LDAP Operation"},{"location":"admin/reference/database/ldap-ops/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/reference/database/ldap-ops/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/reference/database/ldap-ops/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/reference/database/ldap-schema/","tags":["administration","reference","database","ldap","schema"],"text":"LDAP Schema # DN o=jans ou=people,o=jans ou=groups,o=jans ou=attributes,o=jans ou=scopes,o=jans ou=clients,o=jans ou=stat,o=jans ou=par,o=jans ou=sessions,o=jans ou=tokens,o=jans ou=authorizations,o=jans ou=scripts,o=jans ou=resetPasswordRequests,o=jans ou=uma,o=jans ou=resources,ou=uma,o=jans ou=pct,ou=uma,o=jans ou=push,o=jans ou=application,ou=push,o=jans ou=device,ou=push,o=jans ou=u2f,o=jans ou=registration_requests,ou=u2f,o=jans ou=authentication_requests,ou=u2f,o=jans ou=registered_devices,ou=u2f,o=jans ou=metric,o=jans ou=sector_identifiers,o=jans ou=ciba,o=jans ou=trustRelationships,o=jans ou=ssa,o=jans ObjectClasses # ObjectClasses agmFlow agmFlowRun jansAdminConfDyn jansAppConf jansAttr jansCache jansCibaReq jansClnt jansClntAuthz jansCustomScr jansDeviceRegistration jansDocument jansFido2AuthnEntry jansFido2RegistrationEntry jansGrant jansGrp jansInumMap jansMetric jansOrganization jansPairwiseIdentifier jansPar jansPassResetReq jansPerson jansPushApp jansPushDevice jansRp jansScope jansScr jansSectorIdentifier jansSessId jansSsa jansStatEntry jansToken jansU2fReq jansUmaPCT jansUmaRPT jansUmaResource jansUmaResourcePermission ObjectClass: agmFlow # Field Description dn objectClass agFlowQname agFlowMeta jansScr jansEnabled jansScrError agFlowTrans jansRevision jansCustomMessage agmFlowRun # Field Description jansId objectClass dn agFlowSt agFlowEncCont jansCustomMessage exp jansAdminConfDyn # Field Description inum objectClass dn c ou description displayName jansConfDyn o jansRevision jansAppConf # Field objectClass ou description displayName jansHostname jansLastUpd jansManager jansOrgProfileMgt jansScimEnabled jansEmail jansSmtpConf jansSslExpiry jansStatus jansUrl o jansAuthMode jansDbAuth jansLogViewerConfig jansLogConfigLocation jansCacheConf jansDocStoreConf jansSoftVer userPassword jansConfDyn jansConfErrors jansConfStatic jansConfWebKeys jansWebKeysSettings jansConfApp jansRevision jansAttr # Field Description Datatype Usage inum objectClass dn description displayName jansAttrEditTyp jansAttrName jansAttrOrigin jansAttrSystemEditTyp jansAttrTyp jansClaimName jansAttrUsgTyp jansAttrViewTyp jansSAML1URI jansSAML2URI jansStatus jansMultivaluedAttr jansHideOnDiscovery jansNameIdTyp jansScimCustomAttr jansSourceAttr seeAlso urn jansRegExp jansTooltip jansValidation jansCache # Field objectClass dn uuid iat exp del dat jansCibaReq # Field objectClass dn authReqId clnId usrId creationDate exp jansStatus jansClnt # Field inum objectClass dn o jansGrp displayName displayNameLocalized description jansAppTyp jansClntIdIssuedAt jansClntSecret jansClntSecretExpAt exp del jansClntURI jansClntURILocalized jansContact jansDefAcrValues jansDefMaxAge jansGrantTyp jansIdTknEncRespAlg jansIdTknEncRespEnc jansIdTknSignedRespAlg jansInitiateLoginURI jansJwksURI jansJwks jansLogoURI jansLogoURILocalized jansPolicyURI jansPolicyURILocalized jansPostLogoutRedirectURI jansRedirectURI jansRegistrationAccessTkn jansReqObjSigAlg jansReqObjEncAlg jansReqObjEncEnc jansReqURI jansRespTyp jansScope jansClaim jansSectorIdentifierURI jansSignedRespAlg jansSubjectTyp jansTknEndpointAuthMethod jansTknEndpointAuthSigAlg jansTosURI jansTosURILocalized jansTrustedClnt jansUsrInfEncRespAlg jansUsrInfEncRespEnc jansExtraConf jansClaimRedirectURI jansLastAccessTime jansLastLogonTime jansPersistClntAuthzs jansInclClaimsInIdTkn jansRefreshTknLife jansDisabled jansLogoutURI jansLogoutSessRequired jansdId jansAuthorizedOrigins tknBndCnf jansAccessTknAsJwt jansAccessTknSigAlg jansAccessTknLife jansSoftId jansSoftVer jansSoftStatement jansRptAsJwt jansAttrs jansBackchannelTknDeliveryMode jansBackchannelClntNotificationEndpoint jansBackchannelAuthnReqSigAlg jansBackchannelUsrCodeParameter jansClntAuthz # Field jansId objectClass dn jansClntId jansUsrId exp del jansScope jansCustomScr # Field inum objectClass dn displayName description jansScr jansScrTyp jansProgLng jansModuleProperty jansConfProperty jansLevel jansRevision jansEnabled jansScrError jansAlias jansDeviceRegistration # Field jansId objectClass dn displayName description jansDeviceKeyHandle jansDeviceHashCode jansApp jansDeviceRegistrationConf jansDeviceNotificationConf jansNickName jansDeviceData jansCounter jansStatus del exp personInum creationDate jansLastAccessTime jansMetaLastMod jansMetaLocation jansMetaVer jansDocument # Field inum objectClass dn ou displayName description document creationDate jansModuleProperty jansLevel jansRevision jansEnabled jansAlias jansFido2AuthnEntry # Field jansId objectClass dn creationDate jansSessStateId jansCodeChallenge personInum jansAuthData jansStatus jansFido2RegistrationEntry # Field jansId objectClass dn creationDate displayName jansSessStateId jansCodeChallenge jansCodeChallengeHash jansPublicKeyId personInum jansRegistrationData jansDeviceNotificationConf jansCounter jansStatus jansGrant # Field grtId objectClass dn iat jansGrp # Field inum objectClass dn c description displayName jansStatus member o owner seeAlso jansMetaCreated jansMetaLastMod jansMetaLocation jansMetaVer jansInumMap # Field inum objectClass dn jansStatus jansPrimaryKeyAttrName jansPrimaryKeyValue jansSecondaryKeyAttrName jansSecondaryKeyValue jansTertiaryKeyAttrName jansTertiaryKeyValue jansMetric # Field uniqueIdentifier objectClass dn jansStartDate jansEndDate jansAppTyp jansMetricTyp creationDate del exp jansData jansHost jansOrganization # Field objectClass dn c county description displayName jansCustomMessage jansFaviconImage jansLogoImage jansManager jansManagerGrp jansOrgShortName jansThemeColor inum l mail memberOf o jansCreationTimestamp jansRegistrationConf postalCode st street telephoneNumber title uid jansLogoPath jansStatus jansFaviconPath jansPairwiseIdentifier # Field jansId objectClass dn jansSectorIdentifier jansClntId jansUsrId jansPar # Field jansId objectClass dn jansAttrs exp del jansPassResetReq # Field jansGuid objectClass dn creationDate personInum jansPerson # Field inum objectClass jansAssociatedClnt c displayName givenName jansManagedOrganizations jansOptOuts jansStatus inum mail memberOf o jansPersistentJWT jansCreationTimestamp jansExtUid jansOTPCache jansLastLogonTime jansActive jansAddres jansEmail jansEntitlements jansExtId jansImsValue jansMetaCreated jansMetaLastMod jansMetaLocation jansMetaVer jansNameFormatted jansPhoneValue jansPhotos jansProfileURL jansRole jansTitle jansUsrTyp jansHonorificPrefix jansHonorificSuffix jans509Certificate jansPassExpDate persistentId middleName nickname jansPrefUsrName profile picture website emailVerified gender birthdate zoneinfo locale phoneNumberVerified address updatedAt preferredLanguage role secretAnswer secretQuestion seeAlso sn cn transientId uid userPassword st street l jansCountInvalidLogin jansEnrollmentCode jansIMAPData jansPPID jansGuid jansPreferredMethod userCertificate jansOTPDevices jansMobileDevices jansTrustedDevices jansStrongAuthPolicy jansUnlinkedExternalUids jansBackchannelDeviceRegistrationTkn jansBackchannelUsrCode telephoneNumber mobile carLicense facsimileTelephoneNumber departmentNumber employeeType manager postOfficeBox employeeNumber preferredDeliveryMethod roomNumber secretary homePostalAddress postalCode description title jansAdminUIRole jansPushApp # Field jansId objectClass dn displayName jansName jansPushAppConf jansPushDevice # Field jansId objectClass dn jansUsrId jansPushApp jansPushDeviceConf jansTyp jansRp # Field jansId objectClass dn dat jansScope # Field inum jansId objectClass dn jansDefScope description displayName jansScopeTyp creatorId creatorTyp creatorAttrs creationDate jansClaim jansScrDn jansGrpClaims jansIconUrl jansUmaPolicyScrDn jansAttrs exp del jansScr # Field inum objectClass dn inum jansScrTyp jansSectorIdentifier # Field jansId objectClass dn jansId description jansRedirectURI jansClntId jansSessId # Field jansId objectClass dn sid creationDate exp del jansLastAccessTime jansUsrDN authnTime jansState jansSessState jansPermissionGranted jansAsJwt jansJwt jansPermissionGrantedMap jansInvolvedClnts deviceSecret jansSessAttr jansSsa # Field inum objectClass dn o jansAttrs description exp del jansState creatorId creatorTyp creationDate jansStatEntry # Field jansId objectClass dn dat jansData attr jansToken # Field tknCde objectClass dn authnTime authzCode iat exp del grtId grtTyp jwtReq nnc scp tknTyp usrId jansUsrDN clnId acr uuid chlng chlngMth clms ssnId attr tknBndCnf dpop jansU2fReq # Field jansId objectClass dn jansReqId jansReq jansSessStateId del exp personInum creationDate jansUmaPCT # Field objectClass dn clnId iat exp del tknCde ssnId jansClaimValues dpop authnTime authzCode grtId grtTyp jwtReq nnc scp tknTyp usrId jansUsrDN acr uuid chlng chlngMth clms attr tknBndCnf jansUmaRPT # Field objectClass dn authnTime clnId iat exp del tknCde usrId ssnId jansUmaPermission uuid dpop authzCode grtId grtTyp jwtReq nnc scp tknTyp jansUsrDN acr chlng chlngMth clms attr tknBndCnf jansUmaResource # Field Description objectClass dn displayName inum owner jansAssociatedClnt jansUmaScope jansFaviconImage jansGrp jansId jansResource jansRevision jansTyp jansScopeExpression iat exp del description jansUmaResourcePermission # Field objectClass dn exp del jansUmaScope jansConfCode jansResourceSetId jansAttrs jansTicket jansStatus","title":"LDAP Schema"},{"location":"admin/reference/database/ldap-schema/#ldap-schema","text":"DN o=jans ou=people,o=jans ou=groups,o=jans ou=attributes,o=jans ou=scopes,o=jans ou=clients,o=jans ou=stat,o=jans ou=par,o=jans ou=sessions,o=jans ou=tokens,o=jans ou=authorizations,o=jans ou=scripts,o=jans ou=resetPasswordRequests,o=jans ou=uma,o=jans ou=resources,ou=uma,o=jans ou=pct,ou=uma,o=jans ou=push,o=jans ou=application,ou=push,o=jans ou=device,ou=push,o=jans ou=u2f,o=jans ou=registration_requests,ou=u2f,o=jans ou=authentication_requests,ou=u2f,o=jans ou=registered_devices,ou=u2f,o=jans ou=metric,o=jans ou=sector_identifiers,o=jans ou=ciba,o=jans ou=trustRelationships,o=jans ou=ssa,o=jans","title":"LDAP Schema"},{"location":"admin/reference/database/ldap-schema/#objectclasses","text":"ObjectClasses agmFlow agmFlowRun jansAdminConfDyn jansAppConf jansAttr jansCache jansCibaReq jansClnt jansClntAuthz jansCustomScr jansDeviceRegistration jansDocument jansFido2AuthnEntry jansFido2RegistrationEntry jansGrant jansGrp jansInumMap jansMetric jansOrganization jansPairwiseIdentifier jansPar jansPassResetReq jansPerson jansPushApp jansPushDevice jansRp jansScope jansScr jansSectorIdentifier jansSessId jansSsa jansStatEntry jansToken jansU2fReq jansUmaPCT jansUmaRPT jansUmaResource jansUmaResourcePermission","title":"ObjectClasses"},{"location":"admin/reference/database/ldap-schema/#objectclass-agmflow","text":"Field Description dn objectClass agFlowQname agFlowMeta jansScr jansEnabled jansScrError agFlowTrans jansRevision jansCustomMessage","title":"ObjectClass: agmFlow"},{"location":"admin/reference/database/ldap-schema/#agmflowrun","text":"Field Description jansId objectClass dn agFlowSt agFlowEncCont jansCustomMessage exp","title":"agmFlowRun"},{"location":"admin/reference/database/ldap-schema/#jansadminconfdyn","text":"Field Description inum objectClass dn c ou description displayName jansConfDyn o jansRevision","title":"jansAdminConfDyn"},{"location":"admin/reference/database/ldap-schema/#jansappconf","text":"Field objectClass ou description displayName jansHostname jansLastUpd jansManager jansOrgProfileMgt jansScimEnabled jansEmail jansSmtpConf jansSslExpiry jansStatus jansUrl o jansAuthMode jansDbAuth jansLogViewerConfig jansLogConfigLocation jansCacheConf jansDocStoreConf jansSoftVer userPassword jansConfDyn jansConfErrors jansConfStatic jansConfWebKeys jansWebKeysSettings jansConfApp jansRevision","title":"jansAppConf"},{"location":"admin/reference/database/ldap-schema/#jansattr","text":"Field Description Datatype Usage inum objectClass dn description displayName jansAttrEditTyp jansAttrName jansAttrOrigin jansAttrSystemEditTyp jansAttrTyp jansClaimName jansAttrUsgTyp jansAttrViewTyp jansSAML1URI jansSAML2URI jansStatus jansMultivaluedAttr jansHideOnDiscovery jansNameIdTyp jansScimCustomAttr jansSourceAttr seeAlso urn jansRegExp jansTooltip jansValidation","title":"jansAttr"},{"location":"admin/reference/database/ldap-schema/#janscache","text":"Field objectClass dn uuid iat exp del dat","title":"jansCache"},{"location":"admin/reference/database/ldap-schema/#janscibareq","text":"Field objectClass dn authReqId clnId usrId creationDate exp jansStatus","title":"jansCibaReq"},{"location":"admin/reference/database/ldap-schema/#jansclnt","text":"Field inum objectClass dn o jansGrp displayName displayNameLocalized description jansAppTyp jansClntIdIssuedAt jansClntSecret jansClntSecretExpAt exp del jansClntURI jansClntURILocalized jansContact jansDefAcrValues jansDefMaxAge jansGrantTyp jansIdTknEncRespAlg jansIdTknEncRespEnc jansIdTknSignedRespAlg jansInitiateLoginURI jansJwksURI jansJwks jansLogoURI jansLogoURILocalized jansPolicyURI jansPolicyURILocalized jansPostLogoutRedirectURI jansRedirectURI jansRegistrationAccessTkn jansReqObjSigAlg jansReqObjEncAlg jansReqObjEncEnc jansReqURI jansRespTyp jansScope jansClaim jansSectorIdentifierURI jansSignedRespAlg jansSubjectTyp jansTknEndpointAuthMethod jansTknEndpointAuthSigAlg jansTosURI jansTosURILocalized jansTrustedClnt jansUsrInfEncRespAlg jansUsrInfEncRespEnc jansExtraConf jansClaimRedirectURI jansLastAccessTime jansLastLogonTime jansPersistClntAuthzs jansInclClaimsInIdTkn jansRefreshTknLife jansDisabled jansLogoutURI jansLogoutSessRequired jansdId jansAuthorizedOrigins tknBndCnf jansAccessTknAsJwt jansAccessTknSigAlg jansAccessTknLife jansSoftId jansSoftVer jansSoftStatement jansRptAsJwt jansAttrs jansBackchannelTknDeliveryMode jansBackchannelClntNotificationEndpoint jansBackchannelAuthnReqSigAlg jansBackchannelUsrCodeParameter","title":"jansClnt"},{"location":"admin/reference/database/ldap-schema/#jansclntauthz","text":"Field jansId objectClass dn jansClntId jansUsrId exp del jansScope","title":"jansClntAuthz"},{"location":"admin/reference/database/ldap-schema/#janscustomscr","text":"Field inum objectClass dn displayName description jansScr jansScrTyp jansProgLng jansModuleProperty jansConfProperty jansLevel jansRevision jansEnabled jansScrError jansAlias","title":"jansCustomScr"},{"location":"admin/reference/database/ldap-schema/#jansdeviceregistration","text":"Field jansId objectClass dn displayName description jansDeviceKeyHandle jansDeviceHashCode jansApp jansDeviceRegistrationConf jansDeviceNotificationConf jansNickName jansDeviceData jansCounter jansStatus del exp personInum creationDate jansLastAccessTime jansMetaLastMod jansMetaLocation jansMetaVer","title":"jansDeviceRegistration"},{"location":"admin/reference/database/ldap-schema/#jansdocument","text":"Field inum objectClass dn ou displayName description document creationDate jansModuleProperty jansLevel jansRevision jansEnabled jansAlias","title":"jansDocument"},{"location":"admin/reference/database/ldap-schema/#jansfido2authnentry","text":"Field jansId objectClass dn creationDate jansSessStateId jansCodeChallenge personInum jansAuthData jansStatus","title":"jansFido2AuthnEntry"},{"location":"admin/reference/database/ldap-schema/#jansfido2registrationentry","text":"Field jansId objectClass dn creationDate displayName jansSessStateId jansCodeChallenge jansCodeChallengeHash jansPublicKeyId personInum jansRegistrationData jansDeviceNotificationConf jansCounter jansStatus","title":"jansFido2RegistrationEntry"},{"location":"admin/reference/database/ldap-schema/#jansgrant","text":"Field grtId objectClass dn iat","title":"jansGrant"},{"location":"admin/reference/database/ldap-schema/#jansgrp","text":"Field inum objectClass dn c description displayName jansStatus member o owner seeAlso jansMetaCreated jansMetaLastMod jansMetaLocation jansMetaVer","title":"jansGrp"},{"location":"admin/reference/database/ldap-schema/#jansinummap","text":"Field inum objectClass dn jansStatus jansPrimaryKeyAttrName jansPrimaryKeyValue jansSecondaryKeyAttrName jansSecondaryKeyValue jansTertiaryKeyAttrName jansTertiaryKeyValue","title":"jansInumMap"},{"location":"admin/reference/database/ldap-schema/#jansmetric","text":"Field uniqueIdentifier objectClass dn jansStartDate jansEndDate jansAppTyp jansMetricTyp creationDate del exp jansData jansHost","title":"jansMetric"},{"location":"admin/reference/database/ldap-schema/#jansorganization","text":"Field objectClass dn c county description displayName jansCustomMessage jansFaviconImage jansLogoImage jansManager jansManagerGrp jansOrgShortName jansThemeColor inum l mail memberOf o jansCreationTimestamp jansRegistrationConf postalCode st street telephoneNumber title uid jansLogoPath jansStatus jansFaviconPath","title":"jansOrganization"},{"location":"admin/reference/database/ldap-schema/#janspairwiseidentifier","text":"Field jansId objectClass dn jansSectorIdentifier jansClntId jansUsrId","title":"jansPairwiseIdentifier"},{"location":"admin/reference/database/ldap-schema/#janspar","text":"Field jansId objectClass dn jansAttrs exp del","title":"jansPar"},{"location":"admin/reference/database/ldap-schema/#janspassresetreq","text":"Field jansGuid objectClass dn creationDate personInum","title":"jansPassResetReq"},{"location":"admin/reference/database/ldap-schema/#jansperson","text":"Field inum objectClass jansAssociatedClnt c displayName givenName jansManagedOrganizations jansOptOuts jansStatus inum mail memberOf o jansPersistentJWT jansCreationTimestamp jansExtUid jansOTPCache jansLastLogonTime jansActive jansAddres jansEmail jansEntitlements jansExtId jansImsValue jansMetaCreated jansMetaLastMod jansMetaLocation jansMetaVer jansNameFormatted jansPhoneValue jansPhotos jansProfileURL jansRole jansTitle jansUsrTyp jansHonorificPrefix jansHonorificSuffix jans509Certificate jansPassExpDate persistentId middleName nickname jansPrefUsrName profile picture website emailVerified gender birthdate zoneinfo locale phoneNumberVerified address updatedAt preferredLanguage role secretAnswer secretQuestion seeAlso sn cn transientId uid userPassword st street l jansCountInvalidLogin jansEnrollmentCode jansIMAPData jansPPID jansGuid jansPreferredMethod userCertificate jansOTPDevices jansMobileDevices jansTrustedDevices jansStrongAuthPolicy jansUnlinkedExternalUids jansBackchannelDeviceRegistrationTkn jansBackchannelUsrCode telephoneNumber mobile carLicense facsimileTelephoneNumber departmentNumber employeeType manager postOfficeBox employeeNumber preferredDeliveryMethod roomNumber secretary homePostalAddress postalCode description title jansAdminUIRole","title":"jansPerson"},{"location":"admin/reference/database/ldap-schema/#janspushapp","text":"Field jansId objectClass dn displayName jansName jansPushAppConf","title":"jansPushApp"},{"location":"admin/reference/database/ldap-schema/#janspushdevice","text":"Field jansId objectClass dn jansUsrId jansPushApp jansPushDeviceConf jansTyp","title":"jansPushDevice"},{"location":"admin/reference/database/ldap-schema/#jansrp","text":"Field jansId objectClass dn dat","title":"jansRp"},{"location":"admin/reference/database/ldap-schema/#jansscope","text":"Field inum jansId objectClass dn jansDefScope description displayName jansScopeTyp creatorId creatorTyp creatorAttrs creationDate jansClaim jansScrDn jansGrpClaims jansIconUrl jansUmaPolicyScrDn jansAttrs exp del","title":"jansScope"},{"location":"admin/reference/database/ldap-schema/#jansscr","text":"Field inum objectClass dn inum jansScrTyp","title":"jansScr"},{"location":"admin/reference/database/ldap-schema/#janssectoridentifier","text":"Field jansId objectClass dn jansId description jansRedirectURI jansClntId","title":"jansSectorIdentifier"},{"location":"admin/reference/database/ldap-schema/#janssessid","text":"Field jansId objectClass dn sid creationDate exp del jansLastAccessTime jansUsrDN authnTime jansState jansSessState jansPermissionGranted jansAsJwt jansJwt jansPermissionGrantedMap jansInvolvedClnts deviceSecret jansSessAttr","title":"jansSessId"},{"location":"admin/reference/database/ldap-schema/#jansssa","text":"Field inum objectClass dn o jansAttrs description exp del jansState creatorId creatorTyp creationDate","title":"jansSsa"},{"location":"admin/reference/database/ldap-schema/#jansstatentry","text":"Field jansId objectClass dn dat jansData attr","title":"jansStatEntry"},{"location":"admin/reference/database/ldap-schema/#janstoken","text":"Field tknCde objectClass dn authnTime authzCode iat exp del grtId grtTyp jwtReq nnc scp tknTyp usrId jansUsrDN clnId acr uuid chlng chlngMth clms ssnId attr tknBndCnf dpop","title":"jansToken"},{"location":"admin/reference/database/ldap-schema/#jansu2freq","text":"Field jansId objectClass dn jansReqId jansReq jansSessStateId del exp personInum creationDate","title":"jansU2fReq"},{"location":"admin/reference/database/ldap-schema/#jansumapct","text":"Field objectClass dn clnId iat exp del tknCde ssnId jansClaimValues dpop authnTime authzCode grtId grtTyp jwtReq nnc scp tknTyp usrId jansUsrDN acr uuid chlng chlngMth clms attr tknBndCnf","title":"jansUmaPCT"},{"location":"admin/reference/database/ldap-schema/#jansumarpt","text":"Field objectClass dn authnTime clnId iat exp del tknCde usrId ssnId jansUmaPermission uuid dpop authzCode grtId grtTyp jwtReq nnc scp tknTyp jansUsrDN acr chlng chlngMth clms attr tknBndCnf","title":"jansUmaRPT"},{"location":"admin/reference/database/ldap-schema/#jansumaresource","text":"Field Description objectClass dn displayName inum owner jansAssociatedClnt jansUmaScope jansFaviconImage jansGrp jansId jansResource jansRevision jansTyp jansScopeExpression iat exp del description","title":"jansUmaResource"},{"location":"admin/reference/database/ldap-schema/#jansumaresourcepermission","text":"Field objectClass dn exp del jansUmaScope jansConfCode jansResourceSetId jansAttrs jansTicket jansStatus","title":"jansUmaResourcePermission"},{"location":"admin/reference/database/mariadb/","tags":["administration","reference","database"],"text":"MariaDB ORM persistence layer # The ORM module for MySQL and MariaDB is the same. There is only one difference related to JSON Attributes. MariaDB allows to use JSON keyword during table creation but it's return column type LONGTEXT when application request schema. To allow ORM scan schema at startup each JSON attribute should has specific CONSTRAINT . Example: ALTER TABLE jansPerson ADD CONSTRAINT customJsonColumn CHECK(JSON_VALID(\"customJsonColumn\")); If ORM find JSON_VALID in column definition it works with it as with JSON column. More details about this ORM is in MySQLthis documentation.","title":"MariaDB ORM persistence layer"},{"location":"admin/reference/database/mariadb/#mariadb-orm-persistence-layer","text":"The ORM module for MySQL and MariaDB is the same. There is only one difference related to JSON Attributes. MariaDB allows to use JSON keyword during table creation but it's return column type LONGTEXT when application request schema. To allow ORM scan schema at startup each JSON attribute should has specific CONSTRAINT . Example: ALTER TABLE jansPerson ADD CONSTRAINT customJsonColumn CHECK(JSON_VALID(\"customJsonColumn\")); If ORM find JSON_VALID in column definition it works with it as with JSON column. More details about this ORM is in MySQLthis documentation.","title":"MariaDB ORM persistence layer"},{"location":"admin/reference/database/mysql-config/","tags":["administration","reference","database","remote database"],"text":"MySQL ORM persistence layer # The recommended MySQL version is 8.x or newer. Before running installation the administrator can pre-install DB and provide credentials to access it or he can select option to install MySQL on same server during setup. During installation setup generates default /etc/jans/conf/jans-sql.properties and creates jansdb schema with tables and initial data set. Configuration properties # List of specific for MySQL default setting from jans-sql.properties : db.schema.name=jansdb connection.uri=jdbc:mysql://localhost:3306/jansdb?enabledTLSProtocols=TLSv1.2 connection.driver-property.serverTimezone=UTC+0000 # Prefix connection.driver-property.key=value will be coverterd to key=value JDBC driver properties #connection.driver-property.driverProperty=driverPropertyValue #connection.driver-property.useServerPrepStmts=false connection.driver-property.cachePrepStmts=false connection.driver-property.cacheResultSetMetadata=true connection.driver-property.metadataCacheSize=500 #connection.driver-property.prepStmtCacheSize=500 #connection.driver-property.prepStmtCacheSqlLimit=1024 auth.userName=jans auth.userPassword=CC0NHhtXW78= # Password hash method password.encryption.method=SSHA-256 # Connection pool size connection.pool.max-total=40 connection.pool.max-idle=15 connection.pool.min-idle=5 # Max time needed to create connection pool in milliseconds connection.pool.create-max-wait-time-millis=20000 # Max wait 20 seconds connection.pool.max-wait-time-millis=20000 # Allow to evict connection in pool after 30 minutes connection.pool.min-evictable-idle-time-millis=1800000 # Sets whether objects created for the pool will be validated before being returned from it #connection.pool.test-on-create=true # Sets whether objects borrowed from the pool will be validated when they are returned to the pool #connection.pool.test-on-return=true The rest of properties are static for all other supported DB: binaryAttributes=objectGUID certificateAttributes=userCertificate doc_id building rules # In order to support transparency for end applications and allow data migration from one DB to another ORM requires DN attribute in each entry. This attribute it also uses to build doc_id . Here is example of this DN -> doc_id conversion: doc_id is primary key. In order to build unique document identifier ORM uses another unique attribute DN . doc_id is last RDN value. Generic tables structure # Each table in jansdb MySQL schema follow next rules: one table for every LDAP objectClass has 2 mandatory column DN and doc_id Index for primary key Data mapping rules # ORM uses VARCHAR / DATETIME(3) / INT / BINARY / SMALLINT / BLOB / JSON data types. SMALLINT represents boolean attribute type. JSON it uses to store multi-valued attribute values. The generic format of such values is: {\"v\": [\"value_1\", \"value_2\", ...]} ORM add v key on top level due to MySQL limitations of indexing JSON array if they are on to level. If it's specified in schema that application can do search in multi-valued attribute setup add next indexes for each column: KEY `jansExtUid_json_1` ((cast(json_extract(`jansExtUid`,_utf8mb4'$.v') as char(128) array))), KEY `jansExtUid_json_2` ((cast(json_extract(`jansExtUid`,_utf8mb4'$.v[0]') as char(128) charset utf8mb4))), KEY `jansExtUid_json_3` ((cast(json_extract(`jansExtUid`,_utf8mb4'$.v[1]') as char(128) charset utf8mb4))), KEY `jansExtUid_json_4` ((cast(json_extract(`jansExtUid`,_utf8mb4'$.v[2]') as char(128) charset utf8mb4))), By default it creates indexes for first 3 values. Administrator should add more indexes to confrom maximum count of values. In future versions if top level JSON array indexing will work well we can review format to use simple JSON array. For user password field ORM on persist/update operations automatically create hash. On authentication ORM compares hashes. To store attributes defined in java beans with @JsonObject annotation ORM uses TEXT column type. Java example # This example shows how to use ORM. It opens connection to MySQL DB and add user entry to it: public static void main(String[] args) { // Create Sql entry manager SqlEntryManager couchbaseEntryManager = createSqlEntryManager(); // Create and fill user bean SimpleUser newUser = new SimpleUser(); newUser.setDn(String.format(\"inum=%s,ou=people,o=jans\", System.currentTimeMillis())); newUser.setUserId(\"sample_user_\" + System.currentTimeMillis()); newUser.setUserPassword(\"test\"); newUser.getCustomAttributes().add(new CustomObjectAttribute(\"jansAddres\", Arrays.asList(\"London\", \"Texas\", \"New York\"))); newUser.getCustomAttributes().add(new CustomObjectAttribute(\"jansGuid\", \"test_value\")); // Call ORM API to store entry couchbaseEntryManager.persist(newUser); couchbaseEntryManager.destroy(); } public static SqlEntryManager createSqlEntryManager() { SqlEntryManagerFactory couchbaseEntryManagerFactory = new SqlEntryManagerFactory(); couchbaseEntryManagerFactory.create(); Properties connectionProperties = getSampleConnectionProperties(); SqlEntryManager couchbaseEntryManager = couchbaseEntryManagerFactory.createEntryManager(connectionProperties); return couchbaseEntryManager; } private static Properties getSampleConnectionProperties() { Properties connectionProperties = new Properties(); connectionProperties.put(\"sql#db.schema.name\", \"jansdb\"); connectionProperties.put(\"sql#connection.uri\", \"jdbc:mysql://localhost:3306/jansdb?profileSQL=true\"); connectionProperties.put(\"sql#connection.driver-property.serverTimezone\", \"GMT+2\"); connectionProperties.put(\"sql#connection.pool.max-total\", \"300\"); connectionProperties.put(\"sql#connection.pool.max-idle\", \"300\"); connectionProperties.put(\"sql#auth.userName\", \"jans\"); connectionProperties.put(\"sql#auth.userPassword\", \"secret\"); // Password hash method connectionProperties.put(\"sql#password.encryption.method\", \"SSHA-256\"); // Max time needed to create connection pool in milliseconds connectionProperties.put(\"sql#connection.pool.create-max-wait-time-millis\", \"20000\"); // Max wait 20 seconds connectionProperties.put(\"sql#connection.pool.max-wait-time-millis\", \"20000\"); // Allow to evict connection in pool after 30 minutes connectionProperties.put(\"sql#connection.pool.min-evictable-idle-time-millis\", \"1800000\"); connectionProperties.put(\"sql#binaryAttributes\", \"objectGUID\"); connectionProperties.put(\"sql#certificateAttributes\", \"userCertificate\"); return connectionProperties; } More MySQL ORM examples is in this sample module.","title":"MySQL Configuration"},{"location":"admin/reference/database/mysql-config/#mysql-orm-persistence-layer","text":"The recommended MySQL version is 8.x or newer. Before running installation the administrator can pre-install DB and provide credentials to access it or he can select option to install MySQL on same server during setup. During installation setup generates default /etc/jans/conf/jans-sql.properties and creates jansdb schema with tables and initial data set.","title":"MySQL ORM persistence layer"},{"location":"admin/reference/database/mysql-config/#configuration-properties","text":"List of specific for MySQL default setting from jans-sql.properties : db.schema.name=jansdb connection.uri=jdbc:mysql://localhost:3306/jansdb?enabledTLSProtocols=TLSv1.2 connection.driver-property.serverTimezone=UTC+0000 # Prefix connection.driver-property.key=value will be coverterd to key=value JDBC driver properties #connection.driver-property.driverProperty=driverPropertyValue #connection.driver-property.useServerPrepStmts=false connection.driver-property.cachePrepStmts=false connection.driver-property.cacheResultSetMetadata=true connection.driver-property.metadataCacheSize=500 #connection.driver-property.prepStmtCacheSize=500 #connection.driver-property.prepStmtCacheSqlLimit=1024 auth.userName=jans auth.userPassword=CC0NHhtXW78= # Password hash method password.encryption.method=SSHA-256 # Connection pool size connection.pool.max-total=40 connection.pool.max-idle=15 connection.pool.min-idle=5 # Max time needed to create connection pool in milliseconds connection.pool.create-max-wait-time-millis=20000 # Max wait 20 seconds connection.pool.max-wait-time-millis=20000 # Allow to evict connection in pool after 30 minutes connection.pool.min-evictable-idle-time-millis=1800000 # Sets whether objects created for the pool will be validated before being returned from it #connection.pool.test-on-create=true # Sets whether objects borrowed from the pool will be validated when they are returned to the pool #connection.pool.test-on-return=true The rest of properties are static for all other supported DB: binaryAttributes=objectGUID certificateAttributes=userCertificate","title":"Configuration properties"},{"location":"admin/reference/database/mysql-config/#doc_id-building-rules","text":"In order to support transparency for end applications and allow data migration from one DB to another ORM requires DN attribute in each entry. This attribute it also uses to build doc_id . Here is example of this DN -> doc_id conversion: doc_id is primary key. In order to build unique document identifier ORM uses another unique attribute DN . doc_id is last RDN value.","title":"doc_id building rules"},{"location":"admin/reference/database/mysql-config/#generic-tables-structure","text":"Each table in jansdb MySQL schema follow next rules: one table for every LDAP objectClass has 2 mandatory column DN and doc_id Index for primary key","title":"Generic tables structure"},{"location":"admin/reference/database/mysql-config/#data-mapping-rules","text":"ORM uses VARCHAR / DATETIME(3) / INT / BINARY / SMALLINT / BLOB / JSON data types. SMALLINT represents boolean attribute type. JSON it uses to store multi-valued attribute values. The generic format of such values is: {\"v\": [\"value_1\", \"value_2\", ...]} ORM add v key on top level due to MySQL limitations of indexing JSON array if they are on to level. If it's specified in schema that application can do search in multi-valued attribute setup add next indexes for each column: KEY `jansExtUid_json_1` ((cast(json_extract(`jansExtUid`,_utf8mb4'$.v') as char(128) array))), KEY `jansExtUid_json_2` ((cast(json_extract(`jansExtUid`,_utf8mb4'$.v[0]') as char(128) charset utf8mb4))), KEY `jansExtUid_json_3` ((cast(json_extract(`jansExtUid`,_utf8mb4'$.v[1]') as char(128) charset utf8mb4))), KEY `jansExtUid_json_4` ((cast(json_extract(`jansExtUid`,_utf8mb4'$.v[2]') as char(128) charset utf8mb4))), By default it creates indexes for first 3 values. Administrator should add more indexes to confrom maximum count of values. In future versions if top level JSON array indexing will work well we can review format to use simple JSON array. For user password field ORM on persist/update operations automatically create hash. On authentication ORM compares hashes. To store attributes defined in java beans with @JsonObject annotation ORM uses TEXT column type.","title":"Data mapping rules"},{"location":"admin/reference/database/mysql-config/#java-example","text":"This example shows how to use ORM. It opens connection to MySQL DB and add user entry to it: public static void main(String[] args) { // Create Sql entry manager SqlEntryManager couchbaseEntryManager = createSqlEntryManager(); // Create and fill user bean SimpleUser newUser = new SimpleUser(); newUser.setDn(String.format(\"inum=%s,ou=people,o=jans\", System.currentTimeMillis())); newUser.setUserId(\"sample_user_\" + System.currentTimeMillis()); newUser.setUserPassword(\"test\"); newUser.getCustomAttributes().add(new CustomObjectAttribute(\"jansAddres\", Arrays.asList(\"London\", \"Texas\", \"New York\"))); newUser.getCustomAttributes().add(new CustomObjectAttribute(\"jansGuid\", \"test_value\")); // Call ORM API to store entry couchbaseEntryManager.persist(newUser); couchbaseEntryManager.destroy(); } public static SqlEntryManager createSqlEntryManager() { SqlEntryManagerFactory couchbaseEntryManagerFactory = new SqlEntryManagerFactory(); couchbaseEntryManagerFactory.create(); Properties connectionProperties = getSampleConnectionProperties(); SqlEntryManager couchbaseEntryManager = couchbaseEntryManagerFactory.createEntryManager(connectionProperties); return couchbaseEntryManager; } private static Properties getSampleConnectionProperties() { Properties connectionProperties = new Properties(); connectionProperties.put(\"sql#db.schema.name\", \"jansdb\"); connectionProperties.put(\"sql#connection.uri\", \"jdbc:mysql://localhost:3306/jansdb?profileSQL=true\"); connectionProperties.put(\"sql#connection.driver-property.serverTimezone\", \"GMT+2\"); connectionProperties.put(\"sql#connection.pool.max-total\", \"300\"); connectionProperties.put(\"sql#connection.pool.max-idle\", \"300\"); connectionProperties.put(\"sql#auth.userName\", \"jans\"); connectionProperties.put(\"sql#auth.userPassword\", \"secret\"); // Password hash method connectionProperties.put(\"sql#password.encryption.method\", \"SSHA-256\"); // Max time needed to create connection pool in milliseconds connectionProperties.put(\"sql#connection.pool.create-max-wait-time-millis\", \"20000\"); // Max wait 20 seconds connectionProperties.put(\"sql#connection.pool.max-wait-time-millis\", \"20000\"); // Allow to evict connection in pool after 30 minutes connectionProperties.put(\"sql#connection.pool.min-evictable-idle-time-millis\", \"1800000\"); connectionProperties.put(\"sql#binaryAttributes\", \"objectGUID\"); connectionProperties.put(\"sql#certificateAttributes\", \"userCertificate\"); return connectionProperties; } More MySQL ORM examples is in this sample module.","title":"Java example"},{"location":"admin/reference/database/mysql-ops/","tags":["administration","reference","database","additional claims to database","jansPerson","LDAP to MySQL Migration Script"],"text":"Change password for user jans : # ALTER USER 'jans'@'localhost' IDENTIFIED BY 'TopSecret'; GRANT ALL PRIVILEGES ON jansdb.* TO 'jans'@'localhost'; Create new user claims to jansPerson : # You can add additional attributes to jansPerson table and use them. This will be similar to LDAP where DB stores all user attributes in one entry. Additional attributes will not affect the server functionality. Ensure you restart services after DB schema modification Modify column size of jansPerson : # Say we want to increase the size of mail field to 144. Do the following: * a. Modify column size - ALTER TABLE `jansdb`.`jansPerson` CHANGE COLUMN `mail` `mail` VARCHAR(144) NULL DEFAULT NULL ; * b. Drop indexes and re-create - ALTER TABLE jansdb.jansPerson DROP INDEX `jansPerson_CustomIdx2`; ALTER TABLE jansdb.jansPerson ADD INDEX `jansPerson_CustomIdx2` ((lower(`mail`))); * c. Ensure you restart services after DB schema modification LDAP to MySQL Migration Script # Please refer to these steps . Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"MySQL Operation"},{"location":"admin/reference/database/mysql-ops/#change-password-for-user-jans","text":"ALTER USER 'jans'@'localhost' IDENTIFIED BY 'TopSecret'; GRANT ALL PRIVILEGES ON jansdb.* TO 'jans'@'localhost';","title":"Change password for user jans :"},{"location":"admin/reference/database/mysql-ops/#create-new-user-claims-to-jansperson","text":"You can add additional attributes to jansPerson table and use them. This will be similar to LDAP where DB stores all user attributes in one entry. Additional attributes will not affect the server functionality. Ensure you restart services after DB schema modification","title":"Create new user claims to jansPerson:"},{"location":"admin/reference/database/mysql-ops/#modify-column-size-of-jansperson","text":"Say we want to increase the size of mail field to 144. Do the following: * a. Modify column size - ALTER TABLE `jansdb`.`jansPerson` CHANGE COLUMN `mail` `mail` VARCHAR(144) NULL DEFAULT NULL ; * b. Drop indexes and re-create - ALTER TABLE jansdb.jansPerson DROP INDEX `jansPerson_CustomIdx2`; ALTER TABLE jansdb.jansPerson ADD INDEX `jansPerson_CustomIdx2` ((lower(`mail`))); * c. Ensure you restart services after DB schema modification","title":"Modify column size of jansPerson :"},{"location":"admin/reference/database/mysql-ops/#ldap-to-mysql-migration-script","text":"Please refer to these steps . Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"LDAP to MySQL Migration Script"},{"location":"admin/reference/database/mysql-schema-ERdiagram/","tags":["administration","reference","database","mysql","schema","er-diagram"],"text":"erDiagram jansAppConf { string doc_id PK \"\" string ou \"casa,jans-conf-api,jans-scim, jans-fido2\" string jansConfDyn \"json configuration for the app\" } jansPerson { string doc_id PK \"eg - username1 username2\" string dn \"eg: inum=username1,ou=person,o=jans\" string displayName string inum string memberOf FK \"JSON array of dn from jansGrp\" string mail string uid string userPassword string jansAdminUIRole FK \"....\" } jansPerson ||--o{ jansGrp: belongs-to jansGrp ||--o{ jansPerson : contains jansGrp { string doc_id PK \"60B7\" string dn \"inum=60B7,ou=groups,o=jans\" string displayName string member FK \"json array of dn from jansPerson\" string inum \"inum=60B7\" string owner FK \"dn from jansPerson\" } jansCustomScr { string doc_id PK \"eg : 031C-4A65\" string dn \"inum=031C-4A65, ou=script,o=jans\" string inum \"same as doc_id\" string displayName string jansScr \"the entire script content\" string jansScrType \"person_authentication,update_token\" boolean jansEnabled \"0/1\" } jansScr { string doc_id PK string dn string inum string jansScr string jansScrTyp } jansFido2AuthnEntry { string doc_id PK string dn string jansId datetime creationDate string jansSessStateId string jansCodeChallenge string personInum FK \"inum from jansPerson\" string jansAuthData string jansStatus string jansCodeChallengeHash } jansPerson ||--o{ jansFido2AuthnEntry : contains jansFido2RegistrationEntry { string doc_id PK string dn string jansId datetime creationDate string displayName string jansSessStateId string jansCodeChallenge string jansCodeChallengeHash string jansPublicKeyId string personInum FK \"inum from jansPerson\" string jansRegistrationData string jansDeviceNotificationConf string jansCounter string jansStatus } jansPerson ||--o{ jansFido2RegistrationEntry : contains jansClnt { string doc_id PK \"fd46d193-bca6-4343-b49f-6e0b020197c3\" string dn \"inum=fd46d193-bca6-4343-b49f-6e0b020197c3,ou=clients,o=jans\" string displayName \"some name\" string inum \"same as doc_id\" string jansScope FK \"json array containing inum values from jansScope\" string jansClaim FK \"json array containing inum from jansAttr\" } jansClnt ||--o{ jansScope : contains jansClnt ||--o{ jansSectorIdentifier : contains jansClnt ||--o{ jansAttr : contains jansClntAuthz ||--|{ jansClnt : linked-with jansClntAuthz ||--|{ jansPerson : linked-with jansClntAuthz ||--|{ jansScope : linked-with jansClntAuthz{ string doc_id PK \"86ff3d19-4885-4f36-b536-17efcc802a27_2000.efad6d0e-c17b-4694-aedf-b322d10476ce\" string dn \"jansId=86ff3d19-4885-4f36-b536-17efcc802a27_2000.efad6d0e-c17b-4694-aedf-b322d10476ce,ou=authorizations,o=jans\" string jansId \"same as docId\" string jansClntId FK \"JSON array of 1 or more client-s doc_id\" string jansUserId FK \"doc_id from jansPerson\" string jansScope FK \"JSON array of 1 or more scopes from jansScope\" } jansScope{ string doc_id PK \"1200.ABCB46\" string dn \"inum=1200.ABCB46,ou=scope,o=jans\" string displayName string inum \"same as doc_id\" string jansScopeTyp \"openid, oauth\" string jansClaim FK \"JSON array of 0 or more inums from jansAttr\" } jansScope ||--o{ jansAttr : mapped-to jansAttr{ string doc_id PK \"11AA\" string dn \"inum=11AA,ou=attributes,o=jans\" string displayName string jansAttrName string inum \"same as doc_id\" } jansCache { string doc_id PK \"7934d59de2bd01746b7\" string uuid \"same as doc_id\" string dn \"uuid=7934d59de...,ou=cache,o=jans\" string dat \"rO0ABXNyAB.......\" } jansSectorIdentifier{ } jansCibaReq{ string doc_id PK string dn string authReqId FK \"\" string clnId FK \"\" string usrId FK \"doc_id from jansPerson\" datetime creationDate datetime exp string jansStatus \"active or inactive\" } jansToken ||--o{ jansClnt : mapped-to jansToken{ string doc_id PK string dn string usrId FK \"doc_id from jansPerson\" string ssnId FK \"\" string uuid string tknCde string clnId FK \"JSOn array containing dn of jansClnt\" } jansUmaPCT { string doc_id PK string dn string clnId FK \"json array of multiple inums from jansClnt\" string iat string tknCde FK \"\" string ssnId FK string jansClaimValues FK \"\" string dpop string authzCode string grtId FK \"... from jansGrant\" string grtTyp string jwtReq string nnc string scp FK \"\" string tknTyp string usrId FK \"doc_id from jansPerson\" string jansUsrDN FK \"dn from jansPerson\" strin acr string uuid string chlng string chlngMth string clms string attr FK \"\" string tknBndCnf } jansUmaRPT { string doc_id PK string dn string clnId FK \"\" string tknCde FK \"\" string usrId FK \"doc_id from jansPerson\" string ssnId FK \"\" string jansUmaPermission FK \"\" string uuid string dpop string authzCode string grtId FK \"\" string grtTyp FK \"\" string jwtReq string nnc string scp FK \"\" string tknTyp string jansUsrDN FK \"doc_id from jansPerson\" string acr string chlng string chlngMth string clms FK \"\" string attr FK \"\" string tknBndCnf } jansUmaResource { string doc_id PK string objectClass string dn string displayName string inum string owner FK \"\" string jansAssociatedClnt FK \"\" string jansUmaScope FK \"\" string jansFaviconImage string jansGrp FK \"\" string jansId string jansResource string jansRevision string jansTyp string jansScopeExpression string description } jansUmaResourcePermission { string doc_id PK string dn string exp string del string jansUmaScope string jansConfCode string jansResourceSetId string jansAttrs string jansTicket string jansStatus } jansGrant { string doc_id PK string dn string grtId } jansPerson ||--o{ jansSessId : has jansSessId ||--|{ jansClnt : associated-with jansSessId { string doc_id PK string objectClass string dn string jansId string sid string creationDate string jansUsrDN FK \"dn from jansPerson\" string authnTime string jansState string jansSessState string jansPermissionGranted string jansAsJwt string jansJwt string jansPermissionGrantedMap string jansInvolvedClnts FK \"\" string jansSessAttr } jansClnt ||--o{ jansSectorIdentifer : contains jansPairwiseIdentifier }o--|| jansPerson : linked-with jansSectorIdentifer { string doc_id PK string objectClass string dn string jansId string description string jansRedirectURI string jansClntId FK \"json array of multiple inums from jansClnt\" } jansPairwiseIdentifier{ string doc_id PK string objectClass string dn string jansId string jansSectorIdentifier FK \"\" string jansClntId FK \"json array of multiple inums from jansClnt\" string jansUsrId FK \"doc_id from jansPerson\" } jansAdminConfDyn { } jansStatEntry{ } jansDeviceRegistration{} jansInumMap{} jansMetric{} jansPar{} jansPassResetReq{} jansPushApp{} jansPushDevice{} jansRp{} rpExpiredObject{} jansAgama{}","title":"mysql schema ERdiagram"},{"location":"admin/reference/database/mysql-schema-indexes/","tags":["administration","database","MySQL","Indexes"],"text":"MySQL Indexes # adsPrjDeployment # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment adsPrjDeployment 0 PRIMARY 1 doc_id adsPrjDeployment 0 doc_id 1 doc_id agmFlow # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment agmFlow 0 PRIMARY 1 doc_id agmFlow 0 doc_id 1 doc_id agmFlowRun # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment agmFlowRun 0 PRIMARY 1 doc_id agmFlowRun 0 doc_id 1 doc_id jansAppConf # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansAppConf 0 PRIMARY 1 doc_id jansAppConf 0 doc_id 1 doc_id jansAttr # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansAttr 0 PRIMARY 1 doc_id jansAttr 0 doc_id 1 doc_id jansAttr 1 jansAttr_description 1 description YES jansAttr 1 jansAttr_displayName 1 displayName YES jansAttr 1 jansAttr_jansAttrName 1 jansAttrName YES jansAttr 1 jansAttr_jansAttrOrigin 1 jansAttrOrigin YES jansAttr 1 jansAttr_inum 1 inum YES jansCache # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansCache 0 PRIMARY 1 doc_id jansCache 0 doc_id 1 doc_id jansCache 1 jansCache_CustomIdx1 1 del YES jansCache 1 jansCache_CustomIdx1 2 exp YES jansCibaReq # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansCibaReq 0 PRIMARY 1 doc_id jansCibaReq 0 doc_id 1 doc_id jansCibaReq 1 jansCibaReq_CustomIdx1 1 jansStatus YES jansCibaReq 1 jansCibaReq_CustomIdx1 2 exp YES jansClnt # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansClnt 0 PRIMARY 1 doc_id jansClnt 0 doc_id 1 doc_id jansClnt 1 jansClnt_displayName 1 displayName YES jansClnt 1 jansClnt_description 1 description YES jansClnt 1 jansClnt_inum 1 inum YES jansClnt 1 jansClnt_jansClntSecretExpAt 1 jansClntSecretExpAt YES jansClnt 1 jansClnt_jansRegistrationAccessTkn 1 jansRegistrationAccessTkn YES jansClnt 1 jansClnt_CustomIdx1 1 del YES jansClnt 1 jansClnt_CustomIdx1 2 exp YES jansClntAuthz # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansClntAuthz 0 PRIMARY 1 doc_id jansClntAuthz 0 doc_id 1 doc_id jansClntAuthz 1 jansClntAuthz_jansUsrId 1 jansUsrId YES jansClntAuthz 1 jansClntAuthz_CustomIdx1 1 del YES jansClntAuthz 1 jansClntAuthz_CustomIdx1 2 exp YES jansClntAuthz 1 jansClntId_json_1 1 None YES jansClntAuthz 1 jansClntId_json_2 1 None YES jansClntAuthz 1 jansClntId_json_3 1 None YES jansClntAuthz 1 jansClntId_json_4 1 None YES jansCustomScr # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansCustomScr 0 PRIMARY 1 doc_id jansCustomScr 0 doc_id 1 doc_id jansCustomScr 1 jansCustomScr_inum 1 inum YES jansCustomScr 1 jansCustomScr_jansScrTyp 1 jansScrTyp YES jansDeviceRegistration # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansDeviceRegistration 0 PRIMARY 1 doc_id jansDeviceRegistration 0 doc_id 1 doc_id jansDeviceRegistration 1 jansDeviceRegistration_jansDeviceKeyHandle 1 jansDeviceKeyHandle YES jansDeviceRegistration 1 jansDeviceRegistration_jansDeviceHashCode 1 jansDeviceHashCode YES jansDeviceRegistration 1 jansDeviceRegistration_jansApp 1 jansApp YES jansDeviceRegistration 1 jansDeviceRegistration_jansStatus 1 jansStatus YES jansDeviceRegistration 1 jansDeviceRegistration_personInum 1 personInum YES jansDeviceRegistration 1 jansDeviceRegistration_creationDate 1 creationDate YES jansDeviceRegistration 1 jansDeviceRegistration_CustomIdx1 1 del YES jansDeviceRegistration 1 jansDeviceRegistration_CustomIdx1 2 exp YES jansDocument # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansDocument 0 PRIMARY 1 doc_id jansDocument 0 doc_id 1 doc_id jansFido2AuthnEntry # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansFido2AuthnEntry 0 PRIMARY 1 doc_id jansFido2AuthnEntry 0 doc_id 1 doc_id jansFido2AuthnEntry 1 jansFido2AuthnEntry_creationDate 1 creationDate YES jansFido2AuthnEntry 1 jansFido2AuthnEntry_jansApp 1 jansApp YES jansFido2AuthnEntry 1 jansFido2AuthnEntry_jansCodeChallenge 1 jansCodeChallenge YES jansFido2AuthnEntry 1 jansFido2AuthnEntry_jansCodeChallengeHash 1 jansCodeChallengeHash YES jansFido2AuthnEntry 1 jansFido2AuthnEntry_personInum 1 personInum YES jansFido2AuthnEntry 1 jansFido2AuthnEntry_jansStatus 1 jansStatus YES jansFido2AuthnEntry 1 jansFido2AuthnEntry_CustomIdx1 1 del YES jansFido2AuthnEntry 1 jansFido2AuthnEntry_CustomIdx1 2 exp YES jansFido2RegistrationEntry # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansFido2RegistrationEntry 0 PRIMARY 1 doc_id jansFido2RegistrationEntry 0 doc_id 1 doc_id jansFido2RegistrationEntry 1 jansFido2RegistrationEntry_creationDate 1 creationDate YES jansFido2RegistrationEntry 1 jansFido2RegistrationEntry_jansApp 1 jansApp YES jansFido2RegistrationEntry 1 jansFido2RegistrationEntry_jansCodeChallenge 1 jansCodeChallenge YES jansFido2RegistrationEntry 1 jansFido2RegistrationEntry_jansCodeChallengeHash 1 jansCodeChallengeHash YES jansFido2RegistrationEntry 1 jansFido2RegistrationEntry_jansPublicKeyId 1 jansPublicKeyId YES jansFido2RegistrationEntry 1 jansFido2RegistrationEntry_jansPublicKeyIdHash 1 jansPublicKeyIdHash YES jansFido2RegistrationEntry 1 jansFido2RegistrationEntry_personInum 1 personInum YES jansFido2RegistrationEntry 1 jansFido2RegistrationEntry_jansStatus 1 jansStatus YES jansFido2RegistrationEntry 1 jansFido2RegistrationEntry_CustomIdx1 1 del YES jansFido2RegistrationEntry 1 jansFido2RegistrationEntry_CustomIdx1 2 exp YES jansGrant # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansGrant 0 PRIMARY 1 doc_id jansGrant 0 doc_id 1 doc_id jansGrp # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansGrp 0 PRIMARY 1 doc_id jansGrp 0 doc_id 1 doc_id jansGrp 1 jansGrp_description 1 description YES jansGrp 1 jansGrp_displayName 1 displayName YES jansGrp 1 jansGrp_inum 1 inum YES jansInumMap # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansInumMap 0 PRIMARY 1 doc_id jansInumMap 0 doc_id 1 doc_id jansInumMap 1 jansInumMap_jansStatus 1 jansStatus YES jansInumMap 1 jansInumMap_inum 1 inum YES jansMetric # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansMetric 0 PRIMARY 1 doc_id jansMetric 0 doc_id 1 doc_id jansMetric 1 jansMetric_jansStartDate 1 jansStartDate YES jansMetric 1 jansMetric_jansEndDate 1 jansEndDate YES jansMetric 1 jansMetric_jansAppTyp 1 jansAppTyp YES jansMetric 1 jansMetric_jansMetricTyp 1 jansMetricTyp YES jansMetric 1 jansMetric_CustomIdx1 1 del YES jansMetric 1 jansMetric_CustomIdx1 2 exp YES jansOrganization # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansOrganization 0 PRIMARY 1 doc_id jansOrganization 0 doc_id 1 doc_id jansOrganization 1 jansOrganization_uid 1 uid YES jansPairwiseIdentifier # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansPairwiseIdentifier 0 PRIMARY 1 doc_id jansPairwiseIdentifier 0 doc_id 1 doc_id jansPar # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansPar 0 PRIMARY 1 doc_id jansPar 0 doc_id 1 doc_id jansPar 1 jansPar_jansId 1 jansId YES jansPar 1 jansPar_CustomIdx1 1 del YES jansPar 1 jansPar_CustomIdx1 2 exp YES jansPassResetReq # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansPassResetReq 0 PRIMARY 1 doc_id jansPassResetReq 0 doc_id 1 doc_id jansPassResetReq 1 jansPassResetReq_creationDate 1 creationDate YES jansPerson # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansPerson 0 PRIMARY 1 doc_id jansPerson 0 doc_id 1 doc_id jansPerson 1 jansPerson_displayName 1 displayName YES jansPerson 1 jansPerson_givenName 1 givenName YES jansPerson 1 jansPerson_inum 1 inum YES jansPerson 1 jansPerson_mail 1 mail YES jansPerson 1 jansPerson_sn 1 sn YES jansPerson 1 jansPerson_uid 1 uid YES jansPerson 1 jansExtUid_json_1 1 None YES jansPerson 1 jansExtUid_json_2 1 None YES jansPerson 1 jansExtUid_json_3 1 None YES jansPerson 1 jansExtUid_json_4 1 None YES jansPerson 1 jansPerson_CustomIdx1 1 None YES jansPerson 1 jansPerson_CustomIdx2 1 None YES jansPushApp # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansPushApp 0 PRIMARY 1 doc_id jansPushApp 0 doc_id 1 doc_id jansPushDevice # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansPushDevice 0 PRIMARY 1 doc_id jansPushDevice 0 doc_id 1 doc_id jansRp # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansRp 0 PRIMARY 1 doc_id jansRp 0 doc_id 1 doc_id jansScope # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansScope 0 PRIMARY 1 doc_id jansScope 0 doc_id 1 doc_id jansScope 1 jansScope_description 1 description YES jansScope 1 jansScope_displayName 1 displayName YES jansScope 1 jansScope_jansId 1 jansId YES jansScope 1 jansScope_CustomIdx1 1 del YES jansScope 1 jansScope_CustomIdx1 2 exp YES jansScr # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansScr 0 PRIMARY 1 doc_id jansScr 0 doc_id 1 doc_id jansSectorIdentifier # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansSectorIdentifier 0 PRIMARY 1 doc_id jansSectorIdentifier 0 doc_id 1 doc_id jansSessId # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansSessId 0 PRIMARY 1 doc_id jansSessId 0 doc_id 1 doc_id jansSessId 1 jansSessId_sid 1 sid YES jansSessId 1 jansSessId_jansUsrDN 1 jansUsrDN YES jansSessId 1 jansSessId_deviceSecret 1 deviceSecret YES jansSessId 1 jansSessId_CustomIdx1 1 del YES jansSessId 1 jansSessId_CustomIdx1 2 exp YES jansSsa # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansSsa 0 PRIMARY 1 doc_id jansSsa 0 doc_id 1 doc_id jansStatEntry # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansStatEntry 0 PRIMARY 1 doc_id jansStatEntry 0 doc_id 1 doc_id jansStatEntry 1 jansStatEntry_jansId 1 jansId YES jansToken # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansToken 0 PRIMARY 1 doc_id jansToken 0 doc_id 1 doc_id jansToken 1 jansToken_authzCode 1 authzCode YES jansToken 1 jansToken_grtId 1 grtId YES jansToken 1 jansToken_tknCde 1 tknCde YES jansToken 1 jansToken_ssnId 1 ssnId YES jansToken 1 jansToken_CustomIdx1 1 del YES jansToken 1 jansToken_CustomIdx1 2 exp YES jansU2fReq # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansU2fReq 0 PRIMARY 1 doc_id jansU2fReq 0 doc_id 1 doc_id jansU2fReq 1 jansU2fReq_creationDate 1 creationDate YES jansU2fReq 1 jansU2fReq_CustomIdx1 1 del YES jansU2fReq 1 jansU2fReq_CustomIdx1 2 exp YES jansUmaPCT # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansUmaPCT 0 PRIMARY 1 doc_id jansUmaPCT 0 doc_id 1 doc_id jansUmaPCT 1 jansUmaPCT_tknCde 1 tknCde YES jansUmaPCT 1 jansUmaPCT_CustomIdx1 1 del YES jansUmaPCT 1 jansUmaPCT_CustomIdx1 2 exp YES jansUmaRPT # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansUmaRPT 0 PRIMARY 1 doc_id jansUmaRPT 0 doc_id 1 doc_id jansUmaResource # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansUmaResource 0 PRIMARY 1 doc_id jansUmaResource 0 doc_id 1 doc_id jansUmaResource 1 jansUmaResource_displayName 1 displayName YES jansUmaResource 1 jansUmaResource_jansUmaScope 1 jansUmaScope YES jansUmaResource 1 jansUmaResource_jansId 1 jansId YES jansUmaResource 1 jansUmaResource_CustomIdx1 1 del YES jansUmaResource 1 jansUmaResource_CustomIdx1 2 exp YES jansUmaResourcePermission # Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansUmaResourcePermission 0 PRIMARY 1 doc_id jansUmaResourcePermission 0 doc_id 1 doc_id jansUmaResourcePermission 1 jansUmaResourcePermission_jansTicket 1 jansTicket YES","title":"MySQL Indexes"},{"location":"admin/reference/database/mysql-schema-indexes/#mysql-indexes","text":"","title":"MySQL Indexes"},{"location":"admin/reference/database/mysql-schema-indexes/#adsprjdeployment","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment adsPrjDeployment 0 PRIMARY 1 doc_id adsPrjDeployment 0 doc_id 1 doc_id","title":"adsPrjDeployment"},{"location":"admin/reference/database/mysql-schema-indexes/#agmflow","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment agmFlow 0 PRIMARY 1 doc_id agmFlow 0 doc_id 1 doc_id","title":"agmFlow"},{"location":"admin/reference/database/mysql-schema-indexes/#agmflowrun","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment agmFlowRun 0 PRIMARY 1 doc_id agmFlowRun 0 doc_id 1 doc_id","title":"agmFlowRun"},{"location":"admin/reference/database/mysql-schema-indexes/#jansappconf","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansAppConf 0 PRIMARY 1 doc_id jansAppConf 0 doc_id 1 doc_id","title":"jansAppConf"},{"location":"admin/reference/database/mysql-schema-indexes/#jansattr","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansAttr 0 PRIMARY 1 doc_id jansAttr 0 doc_id 1 doc_id jansAttr 1 jansAttr_description 1 description YES jansAttr 1 jansAttr_displayName 1 displayName YES jansAttr 1 jansAttr_jansAttrName 1 jansAttrName YES jansAttr 1 jansAttr_jansAttrOrigin 1 jansAttrOrigin YES jansAttr 1 jansAttr_inum 1 inum YES","title":"jansAttr"},{"location":"admin/reference/database/mysql-schema-indexes/#janscache","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansCache 0 PRIMARY 1 doc_id jansCache 0 doc_id 1 doc_id jansCache 1 jansCache_CustomIdx1 1 del YES jansCache 1 jansCache_CustomIdx1 2 exp YES","title":"jansCache"},{"location":"admin/reference/database/mysql-schema-indexes/#janscibareq","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansCibaReq 0 PRIMARY 1 doc_id jansCibaReq 0 doc_id 1 doc_id jansCibaReq 1 jansCibaReq_CustomIdx1 1 jansStatus YES jansCibaReq 1 jansCibaReq_CustomIdx1 2 exp YES","title":"jansCibaReq"},{"location":"admin/reference/database/mysql-schema-indexes/#jansclnt","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansClnt 0 PRIMARY 1 doc_id jansClnt 0 doc_id 1 doc_id jansClnt 1 jansClnt_displayName 1 displayName YES jansClnt 1 jansClnt_description 1 description YES jansClnt 1 jansClnt_inum 1 inum YES jansClnt 1 jansClnt_jansClntSecretExpAt 1 jansClntSecretExpAt YES jansClnt 1 jansClnt_jansRegistrationAccessTkn 1 jansRegistrationAccessTkn YES jansClnt 1 jansClnt_CustomIdx1 1 del YES jansClnt 1 jansClnt_CustomIdx1 2 exp YES","title":"jansClnt"},{"location":"admin/reference/database/mysql-schema-indexes/#jansclntauthz","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansClntAuthz 0 PRIMARY 1 doc_id jansClntAuthz 0 doc_id 1 doc_id jansClntAuthz 1 jansClntAuthz_jansUsrId 1 jansUsrId YES jansClntAuthz 1 jansClntAuthz_CustomIdx1 1 del YES jansClntAuthz 1 jansClntAuthz_CustomIdx1 2 exp YES jansClntAuthz 1 jansClntId_json_1 1 None YES jansClntAuthz 1 jansClntId_json_2 1 None YES jansClntAuthz 1 jansClntId_json_3 1 None YES jansClntAuthz 1 jansClntId_json_4 1 None YES","title":"jansClntAuthz"},{"location":"admin/reference/database/mysql-schema-indexes/#janscustomscr","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansCustomScr 0 PRIMARY 1 doc_id jansCustomScr 0 doc_id 1 doc_id jansCustomScr 1 jansCustomScr_inum 1 inum YES jansCustomScr 1 jansCustomScr_jansScrTyp 1 jansScrTyp YES","title":"jansCustomScr"},{"location":"admin/reference/database/mysql-schema-indexes/#jansdeviceregistration","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansDeviceRegistration 0 PRIMARY 1 doc_id jansDeviceRegistration 0 doc_id 1 doc_id jansDeviceRegistration 1 jansDeviceRegistration_jansDeviceKeyHandle 1 jansDeviceKeyHandle YES jansDeviceRegistration 1 jansDeviceRegistration_jansDeviceHashCode 1 jansDeviceHashCode YES jansDeviceRegistration 1 jansDeviceRegistration_jansApp 1 jansApp YES jansDeviceRegistration 1 jansDeviceRegistration_jansStatus 1 jansStatus YES jansDeviceRegistration 1 jansDeviceRegistration_personInum 1 personInum YES jansDeviceRegistration 1 jansDeviceRegistration_creationDate 1 creationDate YES jansDeviceRegistration 1 jansDeviceRegistration_CustomIdx1 1 del YES jansDeviceRegistration 1 jansDeviceRegistration_CustomIdx1 2 exp YES","title":"jansDeviceRegistration"},{"location":"admin/reference/database/mysql-schema-indexes/#jansdocument","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansDocument 0 PRIMARY 1 doc_id jansDocument 0 doc_id 1 doc_id","title":"jansDocument"},{"location":"admin/reference/database/mysql-schema-indexes/#jansfido2authnentry","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansFido2AuthnEntry 0 PRIMARY 1 doc_id jansFido2AuthnEntry 0 doc_id 1 doc_id jansFido2AuthnEntry 1 jansFido2AuthnEntry_creationDate 1 creationDate YES jansFido2AuthnEntry 1 jansFido2AuthnEntry_jansApp 1 jansApp YES jansFido2AuthnEntry 1 jansFido2AuthnEntry_jansCodeChallenge 1 jansCodeChallenge YES jansFido2AuthnEntry 1 jansFido2AuthnEntry_jansCodeChallengeHash 1 jansCodeChallengeHash YES jansFido2AuthnEntry 1 jansFido2AuthnEntry_personInum 1 personInum YES jansFido2AuthnEntry 1 jansFido2AuthnEntry_jansStatus 1 jansStatus YES jansFido2AuthnEntry 1 jansFido2AuthnEntry_CustomIdx1 1 del YES jansFido2AuthnEntry 1 jansFido2AuthnEntry_CustomIdx1 2 exp YES","title":"jansFido2AuthnEntry"},{"location":"admin/reference/database/mysql-schema-indexes/#jansfido2registrationentry","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansFido2RegistrationEntry 0 PRIMARY 1 doc_id jansFido2RegistrationEntry 0 doc_id 1 doc_id jansFido2RegistrationEntry 1 jansFido2RegistrationEntry_creationDate 1 creationDate YES jansFido2RegistrationEntry 1 jansFido2RegistrationEntry_jansApp 1 jansApp YES jansFido2RegistrationEntry 1 jansFido2RegistrationEntry_jansCodeChallenge 1 jansCodeChallenge YES jansFido2RegistrationEntry 1 jansFido2RegistrationEntry_jansCodeChallengeHash 1 jansCodeChallengeHash YES jansFido2RegistrationEntry 1 jansFido2RegistrationEntry_jansPublicKeyId 1 jansPublicKeyId YES jansFido2RegistrationEntry 1 jansFido2RegistrationEntry_jansPublicKeyIdHash 1 jansPublicKeyIdHash YES jansFido2RegistrationEntry 1 jansFido2RegistrationEntry_personInum 1 personInum YES jansFido2RegistrationEntry 1 jansFido2RegistrationEntry_jansStatus 1 jansStatus YES jansFido2RegistrationEntry 1 jansFido2RegistrationEntry_CustomIdx1 1 del YES jansFido2RegistrationEntry 1 jansFido2RegistrationEntry_CustomIdx1 2 exp YES","title":"jansFido2RegistrationEntry"},{"location":"admin/reference/database/mysql-schema-indexes/#jansgrant","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansGrant 0 PRIMARY 1 doc_id jansGrant 0 doc_id 1 doc_id","title":"jansGrant"},{"location":"admin/reference/database/mysql-schema-indexes/#jansgrp","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansGrp 0 PRIMARY 1 doc_id jansGrp 0 doc_id 1 doc_id jansGrp 1 jansGrp_description 1 description YES jansGrp 1 jansGrp_displayName 1 displayName YES jansGrp 1 jansGrp_inum 1 inum YES","title":"jansGrp"},{"location":"admin/reference/database/mysql-schema-indexes/#jansinummap","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansInumMap 0 PRIMARY 1 doc_id jansInumMap 0 doc_id 1 doc_id jansInumMap 1 jansInumMap_jansStatus 1 jansStatus YES jansInumMap 1 jansInumMap_inum 1 inum YES","title":"jansInumMap"},{"location":"admin/reference/database/mysql-schema-indexes/#jansmetric","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansMetric 0 PRIMARY 1 doc_id jansMetric 0 doc_id 1 doc_id jansMetric 1 jansMetric_jansStartDate 1 jansStartDate YES jansMetric 1 jansMetric_jansEndDate 1 jansEndDate YES jansMetric 1 jansMetric_jansAppTyp 1 jansAppTyp YES jansMetric 1 jansMetric_jansMetricTyp 1 jansMetricTyp YES jansMetric 1 jansMetric_CustomIdx1 1 del YES jansMetric 1 jansMetric_CustomIdx1 2 exp YES","title":"jansMetric"},{"location":"admin/reference/database/mysql-schema-indexes/#jansorganization","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansOrganization 0 PRIMARY 1 doc_id jansOrganization 0 doc_id 1 doc_id jansOrganization 1 jansOrganization_uid 1 uid YES","title":"jansOrganization"},{"location":"admin/reference/database/mysql-schema-indexes/#janspairwiseidentifier","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansPairwiseIdentifier 0 PRIMARY 1 doc_id jansPairwiseIdentifier 0 doc_id 1 doc_id","title":"jansPairwiseIdentifier"},{"location":"admin/reference/database/mysql-schema-indexes/#janspar","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansPar 0 PRIMARY 1 doc_id jansPar 0 doc_id 1 doc_id jansPar 1 jansPar_jansId 1 jansId YES jansPar 1 jansPar_CustomIdx1 1 del YES jansPar 1 jansPar_CustomIdx1 2 exp YES","title":"jansPar"},{"location":"admin/reference/database/mysql-schema-indexes/#janspassresetreq","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansPassResetReq 0 PRIMARY 1 doc_id jansPassResetReq 0 doc_id 1 doc_id jansPassResetReq 1 jansPassResetReq_creationDate 1 creationDate YES","title":"jansPassResetReq"},{"location":"admin/reference/database/mysql-schema-indexes/#jansperson","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansPerson 0 PRIMARY 1 doc_id jansPerson 0 doc_id 1 doc_id jansPerson 1 jansPerson_displayName 1 displayName YES jansPerson 1 jansPerson_givenName 1 givenName YES jansPerson 1 jansPerson_inum 1 inum YES jansPerson 1 jansPerson_mail 1 mail YES jansPerson 1 jansPerson_sn 1 sn YES jansPerson 1 jansPerson_uid 1 uid YES jansPerson 1 jansExtUid_json_1 1 None YES jansPerson 1 jansExtUid_json_2 1 None YES jansPerson 1 jansExtUid_json_3 1 None YES jansPerson 1 jansExtUid_json_4 1 None YES jansPerson 1 jansPerson_CustomIdx1 1 None YES jansPerson 1 jansPerson_CustomIdx2 1 None YES","title":"jansPerson"},{"location":"admin/reference/database/mysql-schema-indexes/#janspushapp","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansPushApp 0 PRIMARY 1 doc_id jansPushApp 0 doc_id 1 doc_id","title":"jansPushApp"},{"location":"admin/reference/database/mysql-schema-indexes/#janspushdevice","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansPushDevice 0 PRIMARY 1 doc_id jansPushDevice 0 doc_id 1 doc_id","title":"jansPushDevice"},{"location":"admin/reference/database/mysql-schema-indexes/#jansrp","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansRp 0 PRIMARY 1 doc_id jansRp 0 doc_id 1 doc_id","title":"jansRp"},{"location":"admin/reference/database/mysql-schema-indexes/#jansscope","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansScope 0 PRIMARY 1 doc_id jansScope 0 doc_id 1 doc_id jansScope 1 jansScope_description 1 description YES jansScope 1 jansScope_displayName 1 displayName YES jansScope 1 jansScope_jansId 1 jansId YES jansScope 1 jansScope_CustomIdx1 1 del YES jansScope 1 jansScope_CustomIdx1 2 exp YES","title":"jansScope"},{"location":"admin/reference/database/mysql-schema-indexes/#jansscr","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansScr 0 PRIMARY 1 doc_id jansScr 0 doc_id 1 doc_id","title":"jansScr"},{"location":"admin/reference/database/mysql-schema-indexes/#janssectoridentifier","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansSectorIdentifier 0 PRIMARY 1 doc_id jansSectorIdentifier 0 doc_id 1 doc_id","title":"jansSectorIdentifier"},{"location":"admin/reference/database/mysql-schema-indexes/#janssessid","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansSessId 0 PRIMARY 1 doc_id jansSessId 0 doc_id 1 doc_id jansSessId 1 jansSessId_sid 1 sid YES jansSessId 1 jansSessId_jansUsrDN 1 jansUsrDN YES jansSessId 1 jansSessId_deviceSecret 1 deviceSecret YES jansSessId 1 jansSessId_CustomIdx1 1 del YES jansSessId 1 jansSessId_CustomIdx1 2 exp YES","title":"jansSessId"},{"location":"admin/reference/database/mysql-schema-indexes/#jansssa","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansSsa 0 PRIMARY 1 doc_id jansSsa 0 doc_id 1 doc_id","title":"jansSsa"},{"location":"admin/reference/database/mysql-schema-indexes/#jansstatentry","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansStatEntry 0 PRIMARY 1 doc_id jansStatEntry 0 doc_id 1 doc_id jansStatEntry 1 jansStatEntry_jansId 1 jansId YES","title":"jansStatEntry"},{"location":"admin/reference/database/mysql-schema-indexes/#janstoken","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansToken 0 PRIMARY 1 doc_id jansToken 0 doc_id 1 doc_id jansToken 1 jansToken_authzCode 1 authzCode YES jansToken 1 jansToken_grtId 1 grtId YES jansToken 1 jansToken_tknCde 1 tknCde YES jansToken 1 jansToken_ssnId 1 ssnId YES jansToken 1 jansToken_CustomIdx1 1 del YES jansToken 1 jansToken_CustomIdx1 2 exp YES","title":"jansToken"},{"location":"admin/reference/database/mysql-schema-indexes/#jansu2freq","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansU2fReq 0 PRIMARY 1 doc_id jansU2fReq 0 doc_id 1 doc_id jansU2fReq 1 jansU2fReq_creationDate 1 creationDate YES jansU2fReq 1 jansU2fReq_CustomIdx1 1 del YES jansU2fReq 1 jansU2fReq_CustomIdx1 2 exp YES","title":"jansU2fReq"},{"location":"admin/reference/database/mysql-schema-indexes/#jansumapct","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansUmaPCT 0 PRIMARY 1 doc_id jansUmaPCT 0 doc_id 1 doc_id jansUmaPCT 1 jansUmaPCT_tknCde 1 tknCde YES jansUmaPCT 1 jansUmaPCT_CustomIdx1 1 del YES jansUmaPCT 1 jansUmaPCT_CustomIdx1 2 exp YES","title":"jansUmaPCT"},{"location":"admin/reference/database/mysql-schema-indexes/#jansumarpt","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansUmaRPT 0 PRIMARY 1 doc_id jansUmaRPT 0 doc_id 1 doc_id","title":"jansUmaRPT"},{"location":"admin/reference/database/mysql-schema-indexes/#jansumaresource","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansUmaResource 0 PRIMARY 1 doc_id jansUmaResource 0 doc_id 1 doc_id jansUmaResource 1 jansUmaResource_displayName 1 displayName YES jansUmaResource 1 jansUmaResource_jansUmaScope 1 jansUmaScope YES jansUmaResource 1 jansUmaResource_jansId 1 jansId YES jansUmaResource 1 jansUmaResource_CustomIdx1 1 del YES jansUmaResource 1 jansUmaResource_CustomIdx1 2 exp YES","title":"jansUmaResource"},{"location":"admin/reference/database/mysql-schema-indexes/#jansumaresourcepermission","text":"Table Non_unique Key_name Seq_in_index Column_name Null Comment Index_comment jansUmaResourcePermission 0 PRIMARY 1 doc_id jansUmaResourcePermission 0 doc_id 1 doc_id jansUmaResourcePermission 1 jansUmaResourcePermission_jansTicket 1 jansTicket YES","title":"jansUmaResourcePermission"},{"location":"admin/reference/database/mysql-schema/","tags":["administration","database","MySQL","Indexes"],"text":"MySQL Schema # Tables # Table names adsPrjDeployment agmFlow agmFlowRun jansAppConf jansAttr jansCache jansCibaReq jansClnt jansClntAuthz jansCustomScr jansDeviceRegistration jansDocument jansFido2AuthnEntry jansFido2RegistrationEntry jansGrant jansGrp jansInumMap jansMetric jansOrganization jansPairwiseIdentifier jansPar jansPassResetReq jansPerson jansPushApp jansPushDevice jansRp jansScope jansScr jansSectorIdentifier jansSessId jansSsa jansStatEntry jansToken jansU2fReq jansUmaPCT jansUmaRPT jansUmaResource jansUmaResourcePermission adsPrjDeployment # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES None Identifier jansStartDate datetime(3) YES None Start date jansActive smallint YES None jansEndDate datetime(3) YES None End date adsPrjAssets longtext YES None Assets of an ADS project adsPrjDeplDetails text YES None Misc details associated to an ADS project agmFlow # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None agFlowQname varchar(64) YES None Full name of an agama flow agFlowMeta text YES None Metadata of an agama flow jansScr text YES None Attr that contains script (python, java script) jansEnabled smallint YES None Status of the entry, used by many objectclasses jansScrError text YES None Attr that contains first error which application get during it execution agFlowTrans text YES None Transpiled code of an agama flow jansRevision int YES None Revision jansCustomMessage varchar(128) YES None exclude custom welcome message agmFlowRun # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES None Identifier agFlowSt text YES None Details of a running agama flow instance agFlowEncCont mediumtext YES None Continuation associated to a running agama flow instance jansCustomMessage varchar(128) YES None exclude custom welcome message exp datetime(3) YES None jans Exp jansAppConf # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None c varchar(2) YES None ou varchar(64) YES None description varchar(768) YES None displayName varchar(128) YES None preferred name of a person to be used when displaying entries jansHostname varchar(64) YES None The hostname of the Jans Server instance jansLastUpd datetime(3) YES None Monitors last time the server was able to connect to the monitoring system. jansManager varchar(64) YES None Used to specify if a person has the manager role jansOrgProfileMgt smallint YES None enable or disable profile management feature in exclude jansScimEnabled smallint YES None exclude SCIM feature - enabled or disabled jansEmail json YES None jansSmtpConf json YES None SMTP configuration jansSslExpiry varchar(64) YES None SAML Trust Relationship configuration jansStatus varchar(16) YES None Status of the entry, used by many objectclasses jansUrl varchar(64) YES None Jans instance URL inum varchar(64) YES None XRI i-number o varchar(64) YES None jansAuthMode varchar(64) YES None jansDbAuth json YES None Custom IDP authentication configuration jansLogViewerConfig varchar(64) YES None Log viewer configuration jansLogConfigLocation varchar(64) YES None Path to external log4j2.xml jansCacheConf text YES None Cache configuration jansDocStoreConf text YES None jansDocStoreConf jansSoftVer varchar(64) YES None userPassword varchar(256) YES None jansConfDyn text YES None jans Dyn Conf jansConfErrors text YES None jans Errors Conf jansConfStatic text YES None jans Static Conf jansConfWebKeys text YES None jans Web Keys Conf jansWebKeysSettings varchar(64) YES None jans Web Keys Conf jansConfApp text YES None jans App Conf jansRevision int YES None Revision jansAttr # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None description varchar(768) YES MUL None displayName varchar(128) YES MUL None preferred name of a person to be used when displaying entries jansAttrEditTyp json YES None Specify in exclude who can update an attribute, admin or user jansAttrName varchar(64) YES MUL None Specify an identifier for an attribute. May be multi-value where an attribute has two names, like givenName and first-name. jansAttrOrigin varchar(64) YES MUL None Specify the person objectclass associated with the attribute, used for display purposes in exclude. jansAttrSystemEditTyp varchar(64) YES None TODO - still required? jansAttrTyp varchar(64) YES None Data type of attribute. Values can be string, photo, numeric, date jansClaimName varchar(64) YES None Used by jans in conjunction with jansttributeName to map claims to attributes in LDAP. jansAttrUsgTyp varchar(64) YES None TODO - Usg? Value can be OpenID jansAttrViewTyp json YES None Specify in exclude who can view an attribute, admin or user jansSAML1URI varchar(64) YES None SAML 1 uri of attribute jansSAML2URI varchar(64) YES None SAML 2 uri of attribute jansStatus varchar(16) YES None Status of the entry, used by many objectclasses inum varchar(64) YES MUL None XRI i-number jansMultivaluedAttr smallint YES None jansHideOnDiscovery smallint YES None jansNameIdTyp varchar(64) YES None NameId Typ jansScimCustomAttr smallint YES None jansSourceAttr varchar(64) YES None Source Attr for this Attr seeAlso varchar(64) YES None urn varchar(128) YES None jansRegExp varchar(64) YES None Regular expression used to validate attribute data jansTooltip varchar(64) YES None Custom tooltip to be shown on the UI jansValidation tinytext YES None This data has information about attribute Validation jansCache # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None uuid varchar(64) YES None Unique identifier iat datetime(3) YES None jans Creation exp datetime(3) YES None jans Exp del smallint YES MUL None del dat text YES None OX data jansCibaReq # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None authReqId varchar(64) YES None Authn request id clnId varchar(64) YES None jans Clnt id usrId varchar(64) YES None jans user id creationDate datetime(3) YES None Creation Date used for password reset requests exp datetime(3) YES None jans Exp jansStatus varchar(16) YES MUL None Status of the entry, used by many objectclasses jansClnt # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None o varchar(64) YES None jansGrp varchar(64) YES None Group displayName varchar(128) YES MUL None preferred name of a person to be used when displaying entries displayNameLocalized json YES None jans Display Name Localized description varchar(768) YES MUL None inum varchar(64) YES MUL None XRI i-number jansAppTyp varchar(64) YES None jans App Typ jansClntIdIssuedAt datetime(3) YES None jans Clnt Issued At jansClntSecret varchar(64) YES None jans Clnt Secret jansClntSecretExpAt datetime(3) YES MUL None Date client expires exp datetime(3) YES None jans Exp del smallint YES MUL None del jansClntURI tinytext YES None jans Clnt URI jansClntURILocalized json YES None jans Clnt URI localized jansContact json YES None jans Contact jansDefAcrValues json YES None jans Def Acr Values jansDefMaxAge int YES None jans Def Max Age jansGrantTyp json YES None jans Grant Typ jansIdTknEncRespAlg varchar(64) YES None jans ID Tkn Enc Resp Alg jansIdTknEncRespEnc varchar(64) YES None jans ID Tkn Enc Resp Enc jansIdTknSignedRespAlg varchar(64) YES None jans ID Tkn Signed Resp Alg jansInitiateLoginURI tinytext YES None jans Initiate Login URI jansJwksURI tinytext YES None jans JWKs URI jansJwks text YES None jans JWKs jansLogoURI tinytext YES None jans Logo URI jansLogoURILocalized json YES None jans Logo URI localized jansPolicyURI tinytext YES None jans Policy URI jansPolicyURILocalized json YES None jans Policy URI localized jansPostLogoutRedirectURI json YES None jans Post Logout Redirect URI jansRedirectURI json YES None jans Redirect URI jansRegistrationAccessTkn varchar(64) YES MUL None jans Registration Access Tkn jansReqObjSigAlg varchar(64) YES None jans Req Obj Sig Alg jansReqObjEncAlg varchar(64) YES None jans Req Obj Enc Alg jansReqObjEncEnc varchar(64) YES None jans Req Obj Enc Enc jansReqURI json YES None jans Req URI jansRespTyp json YES None jans Resp Typ jansScope json YES None jans Attr Scope jansClaim json YES None jans Attr Claim jansSectorIdentifierURI tinytext YES None jans Sector Identifier URI jansSignedRespAlg varchar(64) YES None jans Signed Resp Alg jansSubjectTyp varchar(64) YES None jans Subject Typ jansTknEndpointAuthMethod varchar(64) YES None jans Tkn Endpoint Auth Method jansTknEndpointAuthSigAlg varchar(64) YES None jans Tkn Endpoint Auth Sig Alg jansTosURI tinytext YES None jans TOS URI jansTosURILocalized json YES None jans Tos URI localized jansTrustedClnt smallint YES None jans Trusted Clnt jansUsrInfEncRespAlg varchar(64) YES None jans Usr Inf Enc Resp Alg jansUsrInfEncRespEnc varchar(64) YES None jans Usr Inf Enc Resp Enc jansExtraConf varchar(64) YES None jans additional configuration jansClaimRedirectURI json YES None Claim Redirect URI jansLastAccessTime datetime(3) YES None Last access time jansLastLogonTime datetime(3) YES None Last logon time jansPersistClntAuthzs smallint YES None jans Persist Clnt Authzs jansInclClaimsInIdTkn smallint YES None jans Incl Claims In Id Tkn jansRefreshTknLife int YES None Life of refresh token jansDisabled smallint YES None Status of client jansLogoutURI json YES None jans Policy URI jansLogoutSessRequired smallint YES None jans Policy URI jansdId varchar(64) YES None jansd Id jansAuthorizedOrigins json YES None jans Authorized Origins tknBndCnf tinytext YES None jansauth - Tkn Binding Id Hash jansAccessTknAsJwt smallint YES None jansauth - indicator whether to return access token as JWT jansAccessTknSigAlg varchar(64) YES None jansauth - access token signing algorithm jansAccessTknLife int YES None Life of access token jansSoftId varchar(64) YES None Soft Identifier jansSoftVer varchar(64) YES None jansSoftStatement text YES None Soft Statement jansRptAsJwt smallint YES None jansRptAsJwt jansAttrs text YES None Attrs jansBackchannelTknDeliveryMode varchar(64) YES None jans Backchannel Tkn Delivery Mode jansBackchannelClntNotificationEndpoint varchar(64) YES None jans Backchannel Clnt Notification Endpoint jansBackchannelAuthnReqSigAlg varchar(64) YES None jans Backchannel Authn Req Sig Alg jansBackchannelUsrCodeParameter smallint YES None jans Backchannel Usr Code Parameter jansClntAuthz # Field Type Null Key Default Comment doc_id varchar(100) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES None Identifier jansClntId json YES None jans Clnt id jansUsrId varchar(64) YES MUL None jans user id exp datetime(3) YES None jans Exp del smallint YES MUL None del jansScope json YES None jans Attr Scope jansCustomScr # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None inum varchar(64) YES MUL None XRI i-number displayName varchar(128) YES None preferred name of a person to be used when displaying entries description varchar(768) YES None jansScr text YES None Attr that contains script (python, java script) jansScrTyp varchar(64) YES MUL None Attr that contains script type (e.g. python, java script) jansProgLng varchar(64) YES None programming language jansModuleProperty json YES None Module property jansConfProperty json YES None Conf property jansLevel int YES None Level jansRevision int YES None Revision jansEnabled smallint YES None Status of the entry, used by many objectclasses jansScrError text YES None Attr that contains first error which application get during it execution jansAlias json YES None jansAlias jansDeviceRegistration # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES None Identifier displayName varchar(128) YES None preferred name of a person to be used when displaying entries description varchar(768) YES None jansDeviceKeyHandle varchar(128) YES MUL None jansDeviceKeyHandle jansDeviceHashCode int YES MUL None jansDeviceHashCode jansApp varchar(96) YES MUL None jansApp jansDeviceRegistrationConf text YES None jansDeviceRegistrationConf jansDeviceNotificationConf varchar(64) YES None Extended push notification configuration jansNickName varchar(64) YES None jansNickName jansDeviceData tinytext YES None jansDeviceData jansCounter int YES None jansCounter jansStatus varchar(16) YES MUL None Status of the entry, used by many objectclasses del smallint YES MUL None del exp datetime(3) YES None jans Exp personInum varchar(64) YES MUL None Inum of a person creationDate datetime(3) YES MUL None Creation Date used for password reset requests jansLastAccessTime datetime(3) YES None Last access time jansMetaLastMod varchar(64) YES None jansMetaLocation tinytext YES None jansMetaVer varchar(64) YES None jansDocument # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None inum varchar(64) YES None XRI i-number ou varchar(64) YES None displayName varchar(128) YES None preferred name of a person to be used when displaying entries description varchar(768) YES None document varchar(64) YES None Save Document in DB creationDate datetime(3) YES None Creation Date used for password reset requests jansModuleProperty json YES None Module property jansLevel int YES None Level jansRevision int YES None Revision jansEnabled smallint YES None Status of the entry, used by many objectclasses jansAlias json YES None jansAlias jansFido2AuthnEntry # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES None Identifier creationDate datetime(3) YES MUL None Creation Date used for password reset requests jansApp varchar(96) YES MUL None jansApp jansSessStateId varchar(64) YES None jansSessStateId jansCodeChallenge varchar(64) YES MUL None OX PKCE code challenge jansCodeChallengeHash int YES MUL None OX code challenge hash personInum varchar(64) YES MUL None Inum of a person jansAuthData text YES None jansAuthData jansStatus varchar(16) YES MUL None Status of the entry, used by many objectclasses exp datetime(3) YES None jans Exp del smallint YES MUL None del jansFido2RegistrationEntry # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES None Identifier creationDate datetime(3) YES MUL None Creation Date used for password reset requests displayName varchar(128) YES None preferred name of a person to be used when displaying entries jansApp varchar(96) YES MUL None jansApp jansSessStateId varchar(64) YES None jansSessStateId jansCodeChallenge varchar(64) YES MUL None OX PKCE code challenge jansCodeChallengeHash int YES MUL None OX code challenge hash jansPublicKeyId varchar(96) YES MUL None jansPublicKeyId jansPublicKeyIdHash int YES MUL None jansPublicKeyIdHash personInum varchar(64) YES MUL None Inum of a person jansRegistrationData text YES None jansRegistrationData jansDeviceData tinytext YES None jansDeviceData jansDeviceNotificationConf varchar(64) YES None Extended push notification configuration jansCounter int YES None jansCounter jansStatus varchar(16) YES MUL None Status of the entry, used by many objectclasses exp datetime(3) YES None jans Exp del smallint YES MUL None del jansGrant # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None grtId varchar(64) YES None jans grant id iat datetime(3) YES None jans Creation jansGrp # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None c varchar(2) YES None description varchar(768) YES MUL None displayName varchar(128) YES MUL None preferred name of a person to be used when displaying entries jansStatus varchar(16) YES None Status of the entry, used by many objectclasses inum varchar(64) YES MUL None XRI i-number member json YES None o varchar(64) YES None owner varchar(64) YES None seeAlso varchar(64) YES None jansMetaCreated varchar(64) YES None jansMetaLastMod varchar(64) YES None jansMetaLocation tinytext YES None jansMetaVer varchar(64) YES None jansInumMap # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansStatus varchar(16) YES MUL None Status of the entry, used by many objectclasses inum varchar(64) YES MUL None XRI i-number jansPrimaryKeyAttrName varchar(64) YES None Primary Key Attribute Name jansPrimaryKeyValue varchar(64) YES None Primary Key Value jansSecondaryKeyAttrName varchar(64) YES None Secondary Key Attribute Name jansSecondaryKeyValue varchar(64) YES None Secondary Key Value jansTertiaryKeyAttrName varchar(64) YES None Tertiary Key Attribute Name jansTertiaryKeyValue varchar(64) YES None Tertiary Key Value jansMetric # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None uniqueIdentifier varchar(64) YES None jansStartDate datetime(3) YES MUL None Start date jansEndDate datetime(3) YES MUL None End date jansAppTyp varchar(64) YES MUL None jans App Typ jansMetricTyp varchar(64) YES MUL None Metric type creationDate datetime(3) YES None Creation Date used for password reset requests del smallint YES MUL None del exp datetime(3) YES None jans Exp jansData text YES None OX data jansHost varchar(64) YES None jans host jansOrganization # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None c varchar(2) YES None description varchar(768) YES None displayName varchar(128) YES None preferred name of a person to be used when displaying entries jansCustomMessage varchar(128) YES None exclude custom welcome message jansFaviconImage varchar(64) YES None TODO - Stores URL of favicon jansLogoImage varchar(64) YES None Logo used by exclude for default look and feel. jansManager varchar(64) YES None Used to specify if a person has the manager role jansManagerGrp tinytext YES None Used in organizatoin entry to specifies the dn of the group that has admin priviledges in exclude. jansOrgShortName varchar(64) YES None Short description, as few letters as possible, no spaces. jansThemeColor varchar(64) YES None exclude login page configuration inum varchar(64) YES None XRI i-number l varchar(64) YES None mail varchar(96) YES None memberOf json YES None o varchar(64) YES None jansCreationTimestamp datetime(3) YES None Registration time jansRegistrationConf varchar(64) YES None Registration Conf postalCode varchar(16) YES None st varchar(64) YES None street tinytext YES None telephoneNumber varchar(20) YES None title varchar(64) YES None uid varchar(64) YES MUL None jansLogoPath varchar(64) YES None jansLogoPath jansStatus varchar(16) YES None Status of the entry, used by many objectclasses jansFaviconPath varchar(64) YES None jansFaviconPath jansPairwiseIdentifier # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES None Identifier jansSectorIdentifier varchar(64) YES None jans Sector Identifier jansClntId json YES None jans Clnt id jansUsrId varchar(64) YES None jans user id jansPar # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES MUL None Identifier jansAttrs text YES None Attrs exp datetime(3) YES None jans Exp del smallint YES MUL None del jansPassResetReq # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None creationDate datetime(3) YES MUL None Creation Date used for password reset requests jansGuid varchar(64) YES None A random string to mark temporary tokens personInum varchar(64) YES None Inum of a person jansPerson # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansAssociatedClnt json YES None Associate the dn of an OAuth2 client with a person or UMA Resource Set. c varchar(2) YES None displayName varchar(128) YES MUL None preferred name of a person to be used when displaying entries givenName varchar(128) YES MUL None jansManagedOrganizations varchar(64) YES None Used to track with which organizations a person is associated jansOptOuts json YES None White pages attributes restricted by person in exclude profile management jansStatus varchar(16) YES None Status of the entry, used by many objectclasses inum varchar(64) YES MUL None XRI i-number mail varchar(96) YES MUL None memberOf json YES None o varchar(64) YES None jansPersistentJWT json YES None jans Persistent JWT jansCreationTimestamp datetime(3) YES None Registration time jansExtUid json YES None jansOTPCache json YES None Stores a used OTP to prevent a hacker from using it again. Complementary to jansExtUid attribute jansLastLogonTime datetime(3) YES None Last logon time jansActive smallint YES None jansAddres json YES None jansEmail json YES None jansEntitlements json YES None jansExtId varchar(128) YES None jansImsValue json YES None jansMetaCreated varchar(64) YES None jansMetaLastMod varchar(64) YES None jansMetaLocation tinytext YES None jansMetaVer varchar(64) YES None jansNameFormatted tinytext YES None jansPhoneValue json YES None jansPhotos json YES None jansProfileURL varchar(256) YES None jansRole json YES None jansTitle varchar(64) YES None jansUsrTyp varchar(64) YES None jansHonorificPrefix varchar(64) YES None jansHonorificSuffix varchar(64) YES None jans509Certificate json YES None jansPassExpDate datetime(3) YES None Pass Exp date, represented as an ISO 8601 (YYYY-MM-DD) format persistentId varchar(64) YES None PersistentId middleName varchar(64) YES None Middle name(s) nickname varchar(64) YES None Casual name of the End-Usr jansPrefUsrName varchar(64) YES None Shorthand Name profile varchar(64) YES None Profile page URL of the person picture tinytext YES None Profile picture URL of the person website varchar(64) YES None Web page or blog URL of the person emailVerified smallint YES None True if the e-mail address of the person has been verified; otherwise false gender varchar(32) YES None Gender of the person either female or male birthdate datetime(3) YES None Birthday of the person, represented as an ISO 8601:2004 [ISO8601-2004] YYYY-MM-DD format zoneinfo varchar(64) YES None Time zone database representing the End-Usrs time zone. For example, Europe/Paris or America/Los_Angeles locale varchar(64) YES None Locale of the person, represented as a BCP47 [RFC5646] language tag phoneNumberVerified smallint YES None True if the phone number of the person has been verified, otherwise false address tinytext YES None OpenID Connect formatted JSON object representing the address of the person updatedAt datetime(3) YES None Time the information of the person was last updated. Seconds from 1970-01-01T0:0:0Z preferredLanguage varchar(64) YES None preferred written or spoken language for a person role json YES None Role secretAnswer tinytext YES None Secret Answer secretQuestion tinytext YES None Secret Question seeAlso varchar(64) YES None sn varchar(128) YES MUL None cn varchar(128) YES None transientId varchar(64) YES None TransientId uid varchar(64) YES MUL None userPassword varchar(256) YES None st varchar(64) YES None street tinytext YES None l varchar(64) YES None jansCountInvalidLogin varchar(64) YES None Invalid login attempts count jansEnrollmentCode varchar(64) YES None jansEnrollmentCode jansIMAPData varchar(64) YES None This data has information about your imap connection jansPPID json YES None Persistent Pairwise ID for OpenID Connect jansGuid varchar(64) YES None A random string to mark temporary tokens jansPreferredMethod varchar(64) YES None Casa - Preferred method to use for user authentication userCertificate blob YES None jansOTPDevices varchar(512) YES None Casa - Json representation of OTP devices. Complementary to jansExtUid attribute jansMobileDevices varchar(512) YES None Casa - Json representation of mobile devices. Complementary to mobile attribute jansTrustedDevices text YES None Casa - Devices with which strong authentication may be skipped jansStrongAuthPolicy varchar(64) YES None Casa - 2FA Enforcement Policy for User jansUnlinkedExternalUids varchar(64) YES None Casa - List of unlinked social accounts (ie disabled jansExtUids) jansBackchannelDeviceRegistrationTkn varchar(64) YES None jans Backchannel Device Registration Tkn jansBackchannelUsrCode varchar(64) YES None jans Backchannel Usr Code telephoneNumber varchar(20) YES None mobile json YES None carLicense varchar(64) YES None vehicle license or registration plate facsimileTelephoneNumber varchar(20) YES None departmentNumber varchar(64) YES None identifies a department within an organization employeeType varchar(64) YES None type of employment for a person manager tinytext YES None postOfficeBox varchar(64) YES None employeeNumber varchar(64) YES None numerically identifies an employee within an organization preferredDeliveryMethod varchar(50) YES None roomNumber varchar(64) YES None secretary tinytext YES None homePostalAddress tinytext YES None postalCode varchar(16) YES None description varchar(768) YES None title varchar(64) YES None jansAdminUIRole json YES None jansAdminUIRole jansPushApp # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None displayName varchar(128) YES None preferred name of a person to be used when displaying entries jansId varchar(128) YES None Identifier jansName varchar(64) YES None Name jansPushAppConf varchar(64) YES None jansPush application configuration jansPushDevice # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansUsrId varchar(64) YES None jans user id jansId varchar(128) YES None Identifier jansPushApp tinytext YES None jansPush application DN jansPushDeviceConf varchar(64) YES None jansPush device configuration jansTyp varchar(64) YES None jans type jansRp # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES None Identifier dat text YES None OX data jansScope # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansDefScope smallint YES None Track the default scope for an custom OAuth2 Scope. description varchar(768) YES MUL None displayName varchar(128) YES MUL None preferred name of a person to be used when displaying entries inum varchar(64) YES None XRI i-number jansScopeTyp varchar(64) YES None OX Attr Scope type creatorId varchar(64) YES None Creator Id creatorTyp varchar(64) YES None Creator type creatorAttrs varchar(64) YES None Creator Attrs creationDate datetime(3) YES None Creation Date used for password reset requests jansClaim json YES None jans Attr Claim jansScrDn json YES None Script object DN jansGrpClaims smallint YES None jans Grp Attr Claims (true or false) jansId varchar(128) YES MUL None Identifier jansIconUrl varchar(64) YES None jans icon url jansUmaPolicyScrDn tinytext YES None OX policy script Dn jansAttrs text YES None Attrs exp datetime(3) YES None jans Exp del smallint YES MUL None del jansScr # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None inum varchar(64) YES None XRI i-number jansScr text YES None Attr that contains script (python, java script) jansScrTyp varchar(64) YES None Attr that contains script type (e.g. python, java script) jansSectorIdentifier # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES None Identifier description varchar(768) YES None jansRedirectURI json YES None jans Redirect URI jansClntId json YES None jans Clnt id jansSessId # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES None Identifier sid varchar(64) YES MUL None Sess Identifier creationDate datetime(3) YES None Creation Date used for password reset requests exp datetime(3) YES None jans Exp del smallint YES MUL None del jansLastAccessTime datetime(3) YES None Last access time jansUsrDN varchar(128) YES MUL None jans Usr DN authnTime datetime(3) YES None jans Authn Time jansState varchar(64) YES None jansState jansSessState text YES None jans Sess State jansPermissionGranted smallint YES None jans Permission Granted jansAsJwt smallint YES None Boolean field to indicate whether object is used as JWT jansJwt text YES None JWT representation of the object or otherwise jwt associated with the object jansPermissionGrantedMap text YES None jans Permission Granted Map jansInvolvedClnts text YES None Involved clients deviceSecret varchar(64) YES MUL None deviceSecret jansSessAttr text YES None jansSessAttr jansSsa # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None inum varchar(64) YES None XRI i-number o varchar(64) YES None jansAttrs text YES None Attrs description varchar(768) YES None exp datetime(3) YES None jans Exp del smallint YES None del jansState varchar(64) YES None jansState creatorId varchar(64) YES None Creator Id creatorTyp varchar(64) YES None Creator type creationDate datetime(3) YES None Creation Date used for password reset requests jansStatEntry # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES MUL None Identifier dat text YES None OX data jansData text YES None OX data attr text YES None Attrs jansToken # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None authnTime datetime(3) YES None jans Authn Time authzCode varchar(64) YES MUL None jans authorization code iat datetime(3) YES None jans Creation exp datetime(3) YES None jans Exp del smallint YES MUL None del grtId varchar(64) YES MUL None jans grant id grtTyp varchar(64) YES None jans Grant Typ jwtReq text YES None jans JWT Req nnc text YES None jans nonce scp text YES None jans Attr Scope tknCde varchar(80) YES MUL None jans Tkn Code tknTyp varchar(32) YES None jans Tkn Typ usrId varchar(64) YES None jans user id jansUsrDN varchar(128) YES None jans Usr DN clnId varchar(64) YES None jans Clnt id acr varchar(48) YES None uuid varchar(64) YES None Unique identifier chlng varchar(64) YES None OX PKCE code challenge chlngMth varchar(64) YES None OX PKCE code challenge method clms varchar(64) YES None jans Claims ssnId varchar(64) YES MUL None jans Sess DN attr text YES None Attrs tknBndCnf tinytext YES None jansauth - Tkn Binding Id Hash dpop varchar(64) YES None DPoP Proof jansU2fReq # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES None Identifier jansReqId varchar(64) YES None jansReqId jansReq text YES None jansReq jansSessStateId varchar(64) YES None jansSessStateId del smallint YES MUL None del exp datetime(3) YES None jans Exp personInum varchar(64) YES None Inum of a person creationDate datetime(3) YES MUL None Creation Date used for password reset requests jansUmaPCT # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None clnId varchar(64) YES None jans Clnt id iat datetime(3) YES None jans Creation exp datetime(3) YES None jans Exp del smallint YES MUL None del tknCde varchar(80) YES MUL None jans Tkn Code ssnId varchar(64) YES None jans Sess DN jansClaimValues varchar(64) YES None Claim Values dpop varchar(64) YES None DPoP Proof authnTime datetime(3) YES None jans Authn Time authzCode varchar(64) YES None jans authorization code grtId varchar(64) YES None jans grant id grtTyp varchar(64) YES None jans Grant Typ jwtReq text YES None jans JWT Req nnc text YES None jans nonce scp text YES None jans Attr Scope tknTyp varchar(32) YES None jans Tkn Typ usrId varchar(64) YES None jans user id jansUsrDN varchar(128) YES None jans Usr DN acr varchar(48) YES None uuid varchar(64) YES None Unique identifier chlng varchar(64) YES None OX PKCE code challenge chlngMth varchar(64) YES None OX PKCE code challenge method clms varchar(64) YES None jans Claims attr text YES None Attrs tknBndCnf tinytext YES None jansauth - Tkn Binding Id Hash jansUmaRPT # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None authnTime datetime(3) YES None jans Authn Time clnId varchar(64) YES None jans Clnt id iat datetime(3) YES None jans Creation exp datetime(3) YES None jans Exp del smallint YES None del tknCde varchar(80) YES None jans Tkn Code usrId varchar(64) YES None jans user id ssnId varchar(64) YES None jans Sess DN jansUmaPermission json YES None jans uma permission uuid varchar(64) YES None Unique identifier dpop varchar(64) YES None DPoP Proof authzCode varchar(64) YES None jans authorization code grtId varchar(64) YES None jans grant id grtTyp varchar(64) YES None jans Grant Typ jwtReq text YES None jans JWT Req nnc text YES None jans nonce scp text YES None jans Attr Scope tknTyp varchar(32) YES None jans Tkn Typ jansUsrDN varchar(128) YES None jans Usr DN acr varchar(48) YES None chlng varchar(64) YES None OX PKCE code challenge chlngMth varchar(64) YES None OX PKCE code challenge method clms varchar(64) YES None jans Claims attr text YES None Attrs tknBndCnf tinytext YES None jansauth - Tkn Binding Id Hash jansUmaResource # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None displayName varchar(128) YES MUL None preferred name of a person to be used when displaying entries inum varchar(64) YES None XRI i-number owner varchar(64) YES None jansAssociatedClnt json YES None Associate the dn of an OAuth2 client with a person or UMA Resource Set. jansUmaScope varchar(768) YES MUL None URI reference of scope descriptor jansFaviconImage varchar(64) YES None TODO - Stores URL of favicon jansGrp varchar(64) YES None Group jansId varchar(128) YES MUL None Identifier jansResource tinytext YES None Host path jansRevision int YES None Revision jansTyp varchar(64) YES None jans type jansScopeExpression text YES None Scope expression iat datetime(3) YES None jans Creation exp datetime(3) YES None jans Exp del smallint YES MUL None del description varchar(768) YES None jansUmaResourcePermission # Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None exp datetime(3) YES None jans Exp del smallint YES None del jansUmaScope varchar(768) YES None URI reference of scope descriptor jansConfCode varchar(64) YES None jans configuration code jansResourceSetId varchar(64) YES None jans resource set id jansAttrs text YES None Attrs jansTicket varchar(64) YES MUL None jans ticket jansStatus varchar(16) YES None Status of the entry, used by many objectclasses","title":"MySQL Schema"},{"location":"admin/reference/database/mysql-schema/#mysql-schema","text":"","title":"MySQL Schema"},{"location":"admin/reference/database/mysql-schema/#tables","text":"Table names adsPrjDeployment agmFlow agmFlowRun jansAppConf jansAttr jansCache jansCibaReq jansClnt jansClntAuthz jansCustomScr jansDeviceRegistration jansDocument jansFido2AuthnEntry jansFido2RegistrationEntry jansGrant jansGrp jansInumMap jansMetric jansOrganization jansPairwiseIdentifier jansPar jansPassResetReq jansPerson jansPushApp jansPushDevice jansRp jansScope jansScr jansSectorIdentifier jansSessId jansSsa jansStatEntry jansToken jansU2fReq jansUmaPCT jansUmaRPT jansUmaResource jansUmaResourcePermission","title":"Tables"},{"location":"admin/reference/database/mysql-schema/#adsprjdeployment","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES None Identifier jansStartDate datetime(3) YES None Start date jansActive smallint YES None jansEndDate datetime(3) YES None End date adsPrjAssets longtext YES None Assets of an ADS project adsPrjDeplDetails text YES None Misc details associated to an ADS project","title":"adsPrjDeployment"},{"location":"admin/reference/database/mysql-schema/#agmflow","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None agFlowQname varchar(64) YES None Full name of an agama flow agFlowMeta text YES None Metadata of an agama flow jansScr text YES None Attr that contains script (python, java script) jansEnabled smallint YES None Status of the entry, used by many objectclasses jansScrError text YES None Attr that contains first error which application get during it execution agFlowTrans text YES None Transpiled code of an agama flow jansRevision int YES None Revision jansCustomMessage varchar(128) YES None exclude custom welcome message","title":"agmFlow"},{"location":"admin/reference/database/mysql-schema/#agmflowrun","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES None Identifier agFlowSt text YES None Details of a running agama flow instance agFlowEncCont mediumtext YES None Continuation associated to a running agama flow instance jansCustomMessage varchar(128) YES None exclude custom welcome message exp datetime(3) YES None jans Exp","title":"agmFlowRun"},{"location":"admin/reference/database/mysql-schema/#jansappconf","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None c varchar(2) YES None ou varchar(64) YES None description varchar(768) YES None displayName varchar(128) YES None preferred name of a person to be used when displaying entries jansHostname varchar(64) YES None The hostname of the Jans Server instance jansLastUpd datetime(3) YES None Monitors last time the server was able to connect to the monitoring system. jansManager varchar(64) YES None Used to specify if a person has the manager role jansOrgProfileMgt smallint YES None enable or disable profile management feature in exclude jansScimEnabled smallint YES None exclude SCIM feature - enabled or disabled jansEmail json YES None jansSmtpConf json YES None SMTP configuration jansSslExpiry varchar(64) YES None SAML Trust Relationship configuration jansStatus varchar(16) YES None Status of the entry, used by many objectclasses jansUrl varchar(64) YES None Jans instance URL inum varchar(64) YES None XRI i-number o varchar(64) YES None jansAuthMode varchar(64) YES None jansDbAuth json YES None Custom IDP authentication configuration jansLogViewerConfig varchar(64) YES None Log viewer configuration jansLogConfigLocation varchar(64) YES None Path to external log4j2.xml jansCacheConf text YES None Cache configuration jansDocStoreConf text YES None jansDocStoreConf jansSoftVer varchar(64) YES None userPassword varchar(256) YES None jansConfDyn text YES None jans Dyn Conf jansConfErrors text YES None jans Errors Conf jansConfStatic text YES None jans Static Conf jansConfWebKeys text YES None jans Web Keys Conf jansWebKeysSettings varchar(64) YES None jans Web Keys Conf jansConfApp text YES None jans App Conf jansRevision int YES None Revision","title":"jansAppConf"},{"location":"admin/reference/database/mysql-schema/#jansattr","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None description varchar(768) YES MUL None displayName varchar(128) YES MUL None preferred name of a person to be used when displaying entries jansAttrEditTyp json YES None Specify in exclude who can update an attribute, admin or user jansAttrName varchar(64) YES MUL None Specify an identifier for an attribute. May be multi-value where an attribute has two names, like givenName and first-name. jansAttrOrigin varchar(64) YES MUL None Specify the person objectclass associated with the attribute, used for display purposes in exclude. jansAttrSystemEditTyp varchar(64) YES None TODO - still required? jansAttrTyp varchar(64) YES None Data type of attribute. Values can be string, photo, numeric, date jansClaimName varchar(64) YES None Used by jans in conjunction with jansttributeName to map claims to attributes in LDAP. jansAttrUsgTyp varchar(64) YES None TODO - Usg? Value can be OpenID jansAttrViewTyp json YES None Specify in exclude who can view an attribute, admin or user jansSAML1URI varchar(64) YES None SAML 1 uri of attribute jansSAML2URI varchar(64) YES None SAML 2 uri of attribute jansStatus varchar(16) YES None Status of the entry, used by many objectclasses inum varchar(64) YES MUL None XRI i-number jansMultivaluedAttr smallint YES None jansHideOnDiscovery smallint YES None jansNameIdTyp varchar(64) YES None NameId Typ jansScimCustomAttr smallint YES None jansSourceAttr varchar(64) YES None Source Attr for this Attr seeAlso varchar(64) YES None urn varchar(128) YES None jansRegExp varchar(64) YES None Regular expression used to validate attribute data jansTooltip varchar(64) YES None Custom tooltip to be shown on the UI jansValidation tinytext YES None This data has information about attribute Validation","title":"jansAttr"},{"location":"admin/reference/database/mysql-schema/#janscache","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None uuid varchar(64) YES None Unique identifier iat datetime(3) YES None jans Creation exp datetime(3) YES None jans Exp del smallint YES MUL None del dat text YES None OX data","title":"jansCache"},{"location":"admin/reference/database/mysql-schema/#janscibareq","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None authReqId varchar(64) YES None Authn request id clnId varchar(64) YES None jans Clnt id usrId varchar(64) YES None jans user id creationDate datetime(3) YES None Creation Date used for password reset requests exp datetime(3) YES None jans Exp jansStatus varchar(16) YES MUL None Status of the entry, used by many objectclasses","title":"jansCibaReq"},{"location":"admin/reference/database/mysql-schema/#jansclnt","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None o varchar(64) YES None jansGrp varchar(64) YES None Group displayName varchar(128) YES MUL None preferred name of a person to be used when displaying entries displayNameLocalized json YES None jans Display Name Localized description varchar(768) YES MUL None inum varchar(64) YES MUL None XRI i-number jansAppTyp varchar(64) YES None jans App Typ jansClntIdIssuedAt datetime(3) YES None jans Clnt Issued At jansClntSecret varchar(64) YES None jans Clnt Secret jansClntSecretExpAt datetime(3) YES MUL None Date client expires exp datetime(3) YES None jans Exp del smallint YES MUL None del jansClntURI tinytext YES None jans Clnt URI jansClntURILocalized json YES None jans Clnt URI localized jansContact json YES None jans Contact jansDefAcrValues json YES None jans Def Acr Values jansDefMaxAge int YES None jans Def Max Age jansGrantTyp json YES None jans Grant Typ jansIdTknEncRespAlg varchar(64) YES None jans ID Tkn Enc Resp Alg jansIdTknEncRespEnc varchar(64) YES None jans ID Tkn Enc Resp Enc jansIdTknSignedRespAlg varchar(64) YES None jans ID Tkn Signed Resp Alg jansInitiateLoginURI tinytext YES None jans Initiate Login URI jansJwksURI tinytext YES None jans JWKs URI jansJwks text YES None jans JWKs jansLogoURI tinytext YES None jans Logo URI jansLogoURILocalized json YES None jans Logo URI localized jansPolicyURI tinytext YES None jans Policy URI jansPolicyURILocalized json YES None jans Policy URI localized jansPostLogoutRedirectURI json YES None jans Post Logout Redirect URI jansRedirectURI json YES None jans Redirect URI jansRegistrationAccessTkn varchar(64) YES MUL None jans Registration Access Tkn jansReqObjSigAlg varchar(64) YES None jans Req Obj Sig Alg jansReqObjEncAlg varchar(64) YES None jans Req Obj Enc Alg jansReqObjEncEnc varchar(64) YES None jans Req Obj Enc Enc jansReqURI json YES None jans Req URI jansRespTyp json YES None jans Resp Typ jansScope json YES None jans Attr Scope jansClaim json YES None jans Attr Claim jansSectorIdentifierURI tinytext YES None jans Sector Identifier URI jansSignedRespAlg varchar(64) YES None jans Signed Resp Alg jansSubjectTyp varchar(64) YES None jans Subject Typ jansTknEndpointAuthMethod varchar(64) YES None jans Tkn Endpoint Auth Method jansTknEndpointAuthSigAlg varchar(64) YES None jans Tkn Endpoint Auth Sig Alg jansTosURI tinytext YES None jans TOS URI jansTosURILocalized json YES None jans Tos URI localized jansTrustedClnt smallint YES None jans Trusted Clnt jansUsrInfEncRespAlg varchar(64) YES None jans Usr Inf Enc Resp Alg jansUsrInfEncRespEnc varchar(64) YES None jans Usr Inf Enc Resp Enc jansExtraConf varchar(64) YES None jans additional configuration jansClaimRedirectURI json YES None Claim Redirect URI jansLastAccessTime datetime(3) YES None Last access time jansLastLogonTime datetime(3) YES None Last logon time jansPersistClntAuthzs smallint YES None jans Persist Clnt Authzs jansInclClaimsInIdTkn smallint YES None jans Incl Claims In Id Tkn jansRefreshTknLife int YES None Life of refresh token jansDisabled smallint YES None Status of client jansLogoutURI json YES None jans Policy URI jansLogoutSessRequired smallint YES None jans Policy URI jansdId varchar(64) YES None jansd Id jansAuthorizedOrigins json YES None jans Authorized Origins tknBndCnf tinytext YES None jansauth - Tkn Binding Id Hash jansAccessTknAsJwt smallint YES None jansauth - indicator whether to return access token as JWT jansAccessTknSigAlg varchar(64) YES None jansauth - access token signing algorithm jansAccessTknLife int YES None Life of access token jansSoftId varchar(64) YES None Soft Identifier jansSoftVer varchar(64) YES None jansSoftStatement text YES None Soft Statement jansRptAsJwt smallint YES None jansRptAsJwt jansAttrs text YES None Attrs jansBackchannelTknDeliveryMode varchar(64) YES None jans Backchannel Tkn Delivery Mode jansBackchannelClntNotificationEndpoint varchar(64) YES None jans Backchannel Clnt Notification Endpoint jansBackchannelAuthnReqSigAlg varchar(64) YES None jans Backchannel Authn Req Sig Alg jansBackchannelUsrCodeParameter smallint YES None jans Backchannel Usr Code Parameter","title":"jansClnt"},{"location":"admin/reference/database/mysql-schema/#jansclntauthz","text":"Field Type Null Key Default Comment doc_id varchar(100) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES None Identifier jansClntId json YES None jans Clnt id jansUsrId varchar(64) YES MUL None jans user id exp datetime(3) YES None jans Exp del smallint YES MUL None del jansScope json YES None jans Attr Scope","title":"jansClntAuthz"},{"location":"admin/reference/database/mysql-schema/#janscustomscr","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None inum varchar(64) YES MUL None XRI i-number displayName varchar(128) YES None preferred name of a person to be used when displaying entries description varchar(768) YES None jansScr text YES None Attr that contains script (python, java script) jansScrTyp varchar(64) YES MUL None Attr that contains script type (e.g. python, java script) jansProgLng varchar(64) YES None programming language jansModuleProperty json YES None Module property jansConfProperty json YES None Conf property jansLevel int YES None Level jansRevision int YES None Revision jansEnabled smallint YES None Status of the entry, used by many objectclasses jansScrError text YES None Attr that contains first error which application get during it execution jansAlias json YES None jansAlias","title":"jansCustomScr"},{"location":"admin/reference/database/mysql-schema/#jansdeviceregistration","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES None Identifier displayName varchar(128) YES None preferred name of a person to be used when displaying entries description varchar(768) YES None jansDeviceKeyHandle varchar(128) YES MUL None jansDeviceKeyHandle jansDeviceHashCode int YES MUL None jansDeviceHashCode jansApp varchar(96) YES MUL None jansApp jansDeviceRegistrationConf text YES None jansDeviceRegistrationConf jansDeviceNotificationConf varchar(64) YES None Extended push notification configuration jansNickName varchar(64) YES None jansNickName jansDeviceData tinytext YES None jansDeviceData jansCounter int YES None jansCounter jansStatus varchar(16) YES MUL None Status of the entry, used by many objectclasses del smallint YES MUL None del exp datetime(3) YES None jans Exp personInum varchar(64) YES MUL None Inum of a person creationDate datetime(3) YES MUL None Creation Date used for password reset requests jansLastAccessTime datetime(3) YES None Last access time jansMetaLastMod varchar(64) YES None jansMetaLocation tinytext YES None jansMetaVer varchar(64) YES None","title":"jansDeviceRegistration"},{"location":"admin/reference/database/mysql-schema/#jansdocument","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None inum varchar(64) YES None XRI i-number ou varchar(64) YES None displayName varchar(128) YES None preferred name of a person to be used when displaying entries description varchar(768) YES None document varchar(64) YES None Save Document in DB creationDate datetime(3) YES None Creation Date used for password reset requests jansModuleProperty json YES None Module property jansLevel int YES None Level jansRevision int YES None Revision jansEnabled smallint YES None Status of the entry, used by many objectclasses jansAlias json YES None jansAlias","title":"jansDocument"},{"location":"admin/reference/database/mysql-schema/#jansfido2authnentry","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES None Identifier creationDate datetime(3) YES MUL None Creation Date used for password reset requests jansApp varchar(96) YES MUL None jansApp jansSessStateId varchar(64) YES None jansSessStateId jansCodeChallenge varchar(64) YES MUL None OX PKCE code challenge jansCodeChallengeHash int YES MUL None OX code challenge hash personInum varchar(64) YES MUL None Inum of a person jansAuthData text YES None jansAuthData jansStatus varchar(16) YES MUL None Status of the entry, used by many objectclasses exp datetime(3) YES None jans Exp del smallint YES MUL None del","title":"jansFido2AuthnEntry"},{"location":"admin/reference/database/mysql-schema/#jansfido2registrationentry","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES None Identifier creationDate datetime(3) YES MUL None Creation Date used for password reset requests displayName varchar(128) YES None preferred name of a person to be used when displaying entries jansApp varchar(96) YES MUL None jansApp jansSessStateId varchar(64) YES None jansSessStateId jansCodeChallenge varchar(64) YES MUL None OX PKCE code challenge jansCodeChallengeHash int YES MUL None OX code challenge hash jansPublicKeyId varchar(96) YES MUL None jansPublicKeyId jansPublicKeyIdHash int YES MUL None jansPublicKeyIdHash personInum varchar(64) YES MUL None Inum of a person jansRegistrationData text YES None jansRegistrationData jansDeviceData tinytext YES None jansDeviceData jansDeviceNotificationConf varchar(64) YES None Extended push notification configuration jansCounter int YES None jansCounter jansStatus varchar(16) YES MUL None Status of the entry, used by many objectclasses exp datetime(3) YES None jans Exp del smallint YES MUL None del","title":"jansFido2RegistrationEntry"},{"location":"admin/reference/database/mysql-schema/#jansgrant","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None grtId varchar(64) YES None jans grant id iat datetime(3) YES None jans Creation","title":"jansGrant"},{"location":"admin/reference/database/mysql-schema/#jansgrp","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None c varchar(2) YES None description varchar(768) YES MUL None displayName varchar(128) YES MUL None preferred name of a person to be used when displaying entries jansStatus varchar(16) YES None Status of the entry, used by many objectclasses inum varchar(64) YES MUL None XRI i-number member json YES None o varchar(64) YES None owner varchar(64) YES None seeAlso varchar(64) YES None jansMetaCreated varchar(64) YES None jansMetaLastMod varchar(64) YES None jansMetaLocation tinytext YES None jansMetaVer varchar(64) YES None","title":"jansGrp"},{"location":"admin/reference/database/mysql-schema/#jansinummap","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansStatus varchar(16) YES MUL None Status of the entry, used by many objectclasses inum varchar(64) YES MUL None XRI i-number jansPrimaryKeyAttrName varchar(64) YES None Primary Key Attribute Name jansPrimaryKeyValue varchar(64) YES None Primary Key Value jansSecondaryKeyAttrName varchar(64) YES None Secondary Key Attribute Name jansSecondaryKeyValue varchar(64) YES None Secondary Key Value jansTertiaryKeyAttrName varchar(64) YES None Tertiary Key Attribute Name jansTertiaryKeyValue varchar(64) YES None Tertiary Key Value","title":"jansInumMap"},{"location":"admin/reference/database/mysql-schema/#jansmetric","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None uniqueIdentifier varchar(64) YES None jansStartDate datetime(3) YES MUL None Start date jansEndDate datetime(3) YES MUL None End date jansAppTyp varchar(64) YES MUL None jans App Typ jansMetricTyp varchar(64) YES MUL None Metric type creationDate datetime(3) YES None Creation Date used for password reset requests del smallint YES MUL None del exp datetime(3) YES None jans Exp jansData text YES None OX data jansHost varchar(64) YES None jans host","title":"jansMetric"},{"location":"admin/reference/database/mysql-schema/#jansorganization","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None c varchar(2) YES None description varchar(768) YES None displayName varchar(128) YES None preferred name of a person to be used when displaying entries jansCustomMessage varchar(128) YES None exclude custom welcome message jansFaviconImage varchar(64) YES None TODO - Stores URL of favicon jansLogoImage varchar(64) YES None Logo used by exclude for default look and feel. jansManager varchar(64) YES None Used to specify if a person has the manager role jansManagerGrp tinytext YES None Used in organizatoin entry to specifies the dn of the group that has admin priviledges in exclude. jansOrgShortName varchar(64) YES None Short description, as few letters as possible, no spaces. jansThemeColor varchar(64) YES None exclude login page configuration inum varchar(64) YES None XRI i-number l varchar(64) YES None mail varchar(96) YES None memberOf json YES None o varchar(64) YES None jansCreationTimestamp datetime(3) YES None Registration time jansRegistrationConf varchar(64) YES None Registration Conf postalCode varchar(16) YES None st varchar(64) YES None street tinytext YES None telephoneNumber varchar(20) YES None title varchar(64) YES None uid varchar(64) YES MUL None jansLogoPath varchar(64) YES None jansLogoPath jansStatus varchar(16) YES None Status of the entry, used by many objectclasses jansFaviconPath varchar(64) YES None jansFaviconPath","title":"jansOrganization"},{"location":"admin/reference/database/mysql-schema/#janspairwiseidentifier","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES None Identifier jansSectorIdentifier varchar(64) YES None jans Sector Identifier jansClntId json YES None jans Clnt id jansUsrId varchar(64) YES None jans user id","title":"jansPairwiseIdentifier"},{"location":"admin/reference/database/mysql-schema/#janspar","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES MUL None Identifier jansAttrs text YES None Attrs exp datetime(3) YES None jans Exp del smallint YES MUL None del","title":"jansPar"},{"location":"admin/reference/database/mysql-schema/#janspassresetreq","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None creationDate datetime(3) YES MUL None Creation Date used for password reset requests jansGuid varchar(64) YES None A random string to mark temporary tokens personInum varchar(64) YES None Inum of a person","title":"jansPassResetReq"},{"location":"admin/reference/database/mysql-schema/#jansperson","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansAssociatedClnt json YES None Associate the dn of an OAuth2 client with a person or UMA Resource Set. c varchar(2) YES None displayName varchar(128) YES MUL None preferred name of a person to be used when displaying entries givenName varchar(128) YES MUL None jansManagedOrganizations varchar(64) YES None Used to track with which organizations a person is associated jansOptOuts json YES None White pages attributes restricted by person in exclude profile management jansStatus varchar(16) YES None Status of the entry, used by many objectclasses inum varchar(64) YES MUL None XRI i-number mail varchar(96) YES MUL None memberOf json YES None o varchar(64) YES None jansPersistentJWT json YES None jans Persistent JWT jansCreationTimestamp datetime(3) YES None Registration time jansExtUid json YES None jansOTPCache json YES None Stores a used OTP to prevent a hacker from using it again. Complementary to jansExtUid attribute jansLastLogonTime datetime(3) YES None Last logon time jansActive smallint YES None jansAddres json YES None jansEmail json YES None jansEntitlements json YES None jansExtId varchar(128) YES None jansImsValue json YES None jansMetaCreated varchar(64) YES None jansMetaLastMod varchar(64) YES None jansMetaLocation tinytext YES None jansMetaVer varchar(64) YES None jansNameFormatted tinytext YES None jansPhoneValue json YES None jansPhotos json YES None jansProfileURL varchar(256) YES None jansRole json YES None jansTitle varchar(64) YES None jansUsrTyp varchar(64) YES None jansHonorificPrefix varchar(64) YES None jansHonorificSuffix varchar(64) YES None jans509Certificate json YES None jansPassExpDate datetime(3) YES None Pass Exp date, represented as an ISO 8601 (YYYY-MM-DD) format persistentId varchar(64) YES None PersistentId middleName varchar(64) YES None Middle name(s) nickname varchar(64) YES None Casual name of the End-Usr jansPrefUsrName varchar(64) YES None Shorthand Name profile varchar(64) YES None Profile page URL of the person picture tinytext YES None Profile picture URL of the person website varchar(64) YES None Web page or blog URL of the person emailVerified smallint YES None True if the e-mail address of the person has been verified; otherwise false gender varchar(32) YES None Gender of the person either female or male birthdate datetime(3) YES None Birthday of the person, represented as an ISO 8601:2004 [ISO8601-2004] YYYY-MM-DD format zoneinfo varchar(64) YES None Time zone database representing the End-Usrs time zone. For example, Europe/Paris or America/Los_Angeles locale varchar(64) YES None Locale of the person, represented as a BCP47 [RFC5646] language tag phoneNumberVerified smallint YES None True if the phone number of the person has been verified, otherwise false address tinytext YES None OpenID Connect formatted JSON object representing the address of the person updatedAt datetime(3) YES None Time the information of the person was last updated. Seconds from 1970-01-01T0:0:0Z preferredLanguage varchar(64) YES None preferred written or spoken language for a person role json YES None Role secretAnswer tinytext YES None Secret Answer secretQuestion tinytext YES None Secret Question seeAlso varchar(64) YES None sn varchar(128) YES MUL None cn varchar(128) YES None transientId varchar(64) YES None TransientId uid varchar(64) YES MUL None userPassword varchar(256) YES None st varchar(64) YES None street tinytext YES None l varchar(64) YES None jansCountInvalidLogin varchar(64) YES None Invalid login attempts count jansEnrollmentCode varchar(64) YES None jansEnrollmentCode jansIMAPData varchar(64) YES None This data has information about your imap connection jansPPID json YES None Persistent Pairwise ID for OpenID Connect jansGuid varchar(64) YES None A random string to mark temporary tokens jansPreferredMethod varchar(64) YES None Casa - Preferred method to use for user authentication userCertificate blob YES None jansOTPDevices varchar(512) YES None Casa - Json representation of OTP devices. Complementary to jansExtUid attribute jansMobileDevices varchar(512) YES None Casa - Json representation of mobile devices. Complementary to mobile attribute jansTrustedDevices text YES None Casa - Devices with which strong authentication may be skipped jansStrongAuthPolicy varchar(64) YES None Casa - 2FA Enforcement Policy for User jansUnlinkedExternalUids varchar(64) YES None Casa - List of unlinked social accounts (ie disabled jansExtUids) jansBackchannelDeviceRegistrationTkn varchar(64) YES None jans Backchannel Device Registration Tkn jansBackchannelUsrCode varchar(64) YES None jans Backchannel Usr Code telephoneNumber varchar(20) YES None mobile json YES None carLicense varchar(64) YES None vehicle license or registration plate facsimileTelephoneNumber varchar(20) YES None departmentNumber varchar(64) YES None identifies a department within an organization employeeType varchar(64) YES None type of employment for a person manager tinytext YES None postOfficeBox varchar(64) YES None employeeNumber varchar(64) YES None numerically identifies an employee within an organization preferredDeliveryMethod varchar(50) YES None roomNumber varchar(64) YES None secretary tinytext YES None homePostalAddress tinytext YES None postalCode varchar(16) YES None description varchar(768) YES None title varchar(64) YES None jansAdminUIRole json YES None jansAdminUIRole","title":"jansPerson"},{"location":"admin/reference/database/mysql-schema/#janspushapp","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None displayName varchar(128) YES None preferred name of a person to be used when displaying entries jansId varchar(128) YES None Identifier jansName varchar(64) YES None Name jansPushAppConf varchar(64) YES None jansPush application configuration","title":"jansPushApp"},{"location":"admin/reference/database/mysql-schema/#janspushdevice","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansUsrId varchar(64) YES None jans user id jansId varchar(128) YES None Identifier jansPushApp tinytext YES None jansPush application DN jansPushDeviceConf varchar(64) YES None jansPush device configuration jansTyp varchar(64) YES None jans type","title":"jansPushDevice"},{"location":"admin/reference/database/mysql-schema/#jansrp","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES None Identifier dat text YES None OX data","title":"jansRp"},{"location":"admin/reference/database/mysql-schema/#jansscope","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansDefScope smallint YES None Track the default scope for an custom OAuth2 Scope. description varchar(768) YES MUL None displayName varchar(128) YES MUL None preferred name of a person to be used when displaying entries inum varchar(64) YES None XRI i-number jansScopeTyp varchar(64) YES None OX Attr Scope type creatorId varchar(64) YES None Creator Id creatorTyp varchar(64) YES None Creator type creatorAttrs varchar(64) YES None Creator Attrs creationDate datetime(3) YES None Creation Date used for password reset requests jansClaim json YES None jans Attr Claim jansScrDn json YES None Script object DN jansGrpClaims smallint YES None jans Grp Attr Claims (true or false) jansId varchar(128) YES MUL None Identifier jansIconUrl varchar(64) YES None jans icon url jansUmaPolicyScrDn tinytext YES None OX policy script Dn jansAttrs text YES None Attrs exp datetime(3) YES None jans Exp del smallint YES MUL None del","title":"jansScope"},{"location":"admin/reference/database/mysql-schema/#jansscr","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None inum varchar(64) YES None XRI i-number jansScr text YES None Attr that contains script (python, java script) jansScrTyp varchar(64) YES None Attr that contains script type (e.g. python, java script)","title":"jansScr"},{"location":"admin/reference/database/mysql-schema/#janssectoridentifier","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES None Identifier description varchar(768) YES None jansRedirectURI json YES None jans Redirect URI jansClntId json YES None jans Clnt id","title":"jansSectorIdentifier"},{"location":"admin/reference/database/mysql-schema/#janssessid","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES None Identifier sid varchar(64) YES MUL None Sess Identifier creationDate datetime(3) YES None Creation Date used for password reset requests exp datetime(3) YES None jans Exp del smallint YES MUL None del jansLastAccessTime datetime(3) YES None Last access time jansUsrDN varchar(128) YES MUL None jans Usr DN authnTime datetime(3) YES None jans Authn Time jansState varchar(64) YES None jansState jansSessState text YES None jans Sess State jansPermissionGranted smallint YES None jans Permission Granted jansAsJwt smallint YES None Boolean field to indicate whether object is used as JWT jansJwt text YES None JWT representation of the object or otherwise jwt associated with the object jansPermissionGrantedMap text YES None jans Permission Granted Map jansInvolvedClnts text YES None Involved clients deviceSecret varchar(64) YES MUL None deviceSecret jansSessAttr text YES None jansSessAttr","title":"jansSessId"},{"location":"admin/reference/database/mysql-schema/#jansssa","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None inum varchar(64) YES None XRI i-number o varchar(64) YES None jansAttrs text YES None Attrs description varchar(768) YES None exp datetime(3) YES None jans Exp del smallint YES None del jansState varchar(64) YES None jansState creatorId varchar(64) YES None Creator Id creatorTyp varchar(64) YES None Creator type creationDate datetime(3) YES None Creation Date used for password reset requests","title":"jansSsa"},{"location":"admin/reference/database/mysql-schema/#jansstatentry","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES MUL None Identifier dat text YES None OX data jansData text YES None OX data attr text YES None Attrs","title":"jansStatEntry"},{"location":"admin/reference/database/mysql-schema/#janstoken","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None authnTime datetime(3) YES None jans Authn Time authzCode varchar(64) YES MUL None jans authorization code iat datetime(3) YES None jans Creation exp datetime(3) YES None jans Exp del smallint YES MUL None del grtId varchar(64) YES MUL None jans grant id grtTyp varchar(64) YES None jans Grant Typ jwtReq text YES None jans JWT Req nnc text YES None jans nonce scp text YES None jans Attr Scope tknCde varchar(80) YES MUL None jans Tkn Code tknTyp varchar(32) YES None jans Tkn Typ usrId varchar(64) YES None jans user id jansUsrDN varchar(128) YES None jans Usr DN clnId varchar(64) YES None jans Clnt id acr varchar(48) YES None uuid varchar(64) YES None Unique identifier chlng varchar(64) YES None OX PKCE code challenge chlngMth varchar(64) YES None OX PKCE code challenge method clms varchar(64) YES None jans Claims ssnId varchar(64) YES MUL None jans Sess DN attr text YES None Attrs tknBndCnf tinytext YES None jansauth - Tkn Binding Id Hash dpop varchar(64) YES None DPoP Proof","title":"jansToken"},{"location":"admin/reference/database/mysql-schema/#jansu2freq","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None jansId varchar(128) YES None Identifier jansReqId varchar(64) YES None jansReqId jansReq text YES None jansReq jansSessStateId varchar(64) YES None jansSessStateId del smallint YES MUL None del exp datetime(3) YES None jans Exp personInum varchar(64) YES None Inum of a person creationDate datetime(3) YES MUL None Creation Date used for password reset requests","title":"jansU2fReq"},{"location":"admin/reference/database/mysql-schema/#jansumapct","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None clnId varchar(64) YES None jans Clnt id iat datetime(3) YES None jans Creation exp datetime(3) YES None jans Exp del smallint YES MUL None del tknCde varchar(80) YES MUL None jans Tkn Code ssnId varchar(64) YES None jans Sess DN jansClaimValues varchar(64) YES None Claim Values dpop varchar(64) YES None DPoP Proof authnTime datetime(3) YES None jans Authn Time authzCode varchar(64) YES None jans authorization code grtId varchar(64) YES None jans grant id grtTyp varchar(64) YES None jans Grant Typ jwtReq text YES None jans JWT Req nnc text YES None jans nonce scp text YES None jans Attr Scope tknTyp varchar(32) YES None jans Tkn Typ usrId varchar(64) YES None jans user id jansUsrDN varchar(128) YES None jans Usr DN acr varchar(48) YES None uuid varchar(64) YES None Unique identifier chlng varchar(64) YES None OX PKCE code challenge chlngMth varchar(64) YES None OX PKCE code challenge method clms varchar(64) YES None jans Claims attr text YES None Attrs tknBndCnf tinytext YES None jansauth - Tkn Binding Id Hash","title":"jansUmaPCT"},{"location":"admin/reference/database/mysql-schema/#jansumarpt","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None authnTime datetime(3) YES None jans Authn Time clnId varchar(64) YES None jans Clnt id iat datetime(3) YES None jans Creation exp datetime(3) YES None jans Exp del smallint YES None del tknCde varchar(80) YES None jans Tkn Code usrId varchar(64) YES None jans user id ssnId varchar(64) YES None jans Sess DN jansUmaPermission json YES None jans uma permission uuid varchar(64) YES None Unique identifier dpop varchar(64) YES None DPoP Proof authzCode varchar(64) YES None jans authorization code grtId varchar(64) YES None jans grant id grtTyp varchar(64) YES None jans Grant Typ jwtReq text YES None jans JWT Req nnc text YES None jans nonce scp text YES None jans Attr Scope tknTyp varchar(32) YES None jans Tkn Typ jansUsrDN varchar(128) YES None jans Usr DN acr varchar(48) YES None chlng varchar(64) YES None OX PKCE code challenge chlngMth varchar(64) YES None OX PKCE code challenge method clms varchar(64) YES None jans Claims attr text YES None Attrs tknBndCnf tinytext YES None jansauth - Tkn Binding Id Hash","title":"jansUmaRPT"},{"location":"admin/reference/database/mysql-schema/#jansumaresource","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None displayName varchar(128) YES MUL None preferred name of a person to be used when displaying entries inum varchar(64) YES None XRI i-number owner varchar(64) YES None jansAssociatedClnt json YES None Associate the dn of an OAuth2 client with a person or UMA Resource Set. jansUmaScope varchar(768) YES MUL None URI reference of scope descriptor jansFaviconImage varchar(64) YES None TODO - Stores URL of favicon jansGrp varchar(64) YES None Group jansId varchar(128) YES MUL None Identifier jansResource tinytext YES None Host path jansRevision int YES None Revision jansTyp varchar(64) YES None jans type jansScopeExpression text YES None Scope expression iat datetime(3) YES None jans Creation exp datetime(3) YES None jans Exp del smallint YES MUL None del description varchar(768) YES None","title":"jansUmaResource"},{"location":"admin/reference/database/mysql-schema/#jansumaresourcepermission","text":"Field Type Null Key Default Comment doc_id varchar(64) NO PRI None objectClass varchar(48) YES None dn varchar(128) YES None exp datetime(3) YES None jans Exp del smallint YES None del jansUmaScope varchar(768) YES None URI reference of scope descriptor jansConfCode varchar(64) YES None jans configuration code jansResourceSetId varchar(64) YES None jans resource set id jansAttrs text YES None Attrs jansTicket varchar(64) YES MUL None jans ticket jansStatus varchar(16) YES None Status of the entry, used by many objectclasses","title":"jansUmaResourcePermission"},{"location":"admin/reference/database/pgsql-config/","tags":["administration","reference","database","remote database"],"text":"PostgreSQL ORM persistence layer # The recommended PostgreSQL versions are 14.x, 15.x or newer. Before running installation the administrator can pre-install DB and provide credentials to access it or he can select option to install PostgreSQL on same server during setup. During installation setup generates default /etc/jans/conf/jans-sql.properties and creates jansdb schema with tables and initial data set. Configuration properties # List of specific for PostgreSQL default setting from jans-sql.properties : db.schema.name=public connection.uri=jdbc:postgresql://localhost:5432/jansdb # Prefix connection.driver-property.key=value will be coverterd to key=value JDBC driver properties #connection.driver-property.driverProperty=driverPropertyValue auth.userName=jans auth.userPassword=CC0NHhtXW78= # Password hash method password.encryption.method=SSHA-256 # Connection pool size connection.pool.max-total=40 connection.pool.max-idle=15 connection.pool.min-idle=5 # Max time needed to create connection pool in milliseconds connection.pool.create-max-wait-time-millis=20000 # Max wait 20 seconds connection.pool.max-wait-time-millis=20000 # Allow to evict connection in pool after 30 minutes connection.pool.min-evictable-idle-time-millis=1800000 # Sets whether objects created for the pool will be validated before being returned from it #connection.pool.test-on-create=true # Sets whether objects borrowed from the pool will be validated when they are returned to the pool #connection.pool.test-on-return=true The rest of properties are static for all other supported DB: binaryAttributes=objectGUID certificateAttributes=userCertificate doc_id building rules # In order to support transparency for end applications and allow data migration from one DB to another ORM requires DN attribute in each entry. This attribute it also uses to build doc_id . Here is example of this DN -> doc_id conversion: doc_id is primary key. In order to build unique document identifier ORM uses another unique attribute DN . doc_id is last RDN value. Generic tables structure # Each table in jansdb PostgreSQL database follow next rules: one table for every LDAP objectClass has 2 mandatory column DN and doc_id Index for primary key Data mapping rules # ORM uses CHARACTER VARYING / TIMESTAMP / INT64 / BYTEA / BOOLEAN / TEXT / JSONB data types. JSONB it uses to store multi-valued attribute values. The generic format of such values is: [\"value_1\", \"value_2\", ...] If in schema specified in schema that application can do search in multi-valued attribute setup add next indexes for each column: CREATE INDEX IF NOT EXISTS \"jansPerson_jsonb_path_query_array_idx\" ON public.\"jansPerson\" USING gin (jsonb_path_query_array(\"jansExtUid\", '$[*]'::jsonpath)) TABLESPACE pg_default; For user password field ORM on persist/update operations automatically create hash. On authentication ORM compares hashes. To store attributes defined in java beans with @JsonObject annotation ORM uses TEXT column type. Java example # This example shows how to use ORM. It opens connection to PostgreSQL DB and add user entry to it: public static void main(String[] args) { // Create Sql entry manager SqlEntryManager couchbaseEntryManager = createSqlEntryManager(); // Create and fill user bean SimpleUser newUser = new SimpleUser(); newUser.setDn(String.format(\"inum=%s,ou=people,o=jans\", System.currentTimeMillis())); newUser.setUserId(\"sample_user_\" + System.currentTimeMillis()); newUser.setUserPassword(\"test\"); newUser.getCustomAttributes().add(new CustomObjectAttribute(\"jansAddres\", Arrays.asList(\"London\", \"Texas\", \"New York\"))); newUser.getCustomAttributes().add(new CustomObjectAttribute(\"jansGuid\", \"test_value\")); // Call ORM API to store entry couchbaseEntryManager.persist(newUser); couchbaseEntryManager.destroy(); } public static SqlEntryManager createSqlEntryManager() { SqlEntryManagerFactory couchbaseEntryManagerFactory = new SqlEntryManagerFactory(); couchbaseEntryManagerFactory.create(); Properties connectionProperties = getSampleConnectionProperties(); SqlEntryManager couchbaseEntryManager = couchbaseEntryManagerFactory.createEntryManager(connectionProperties); return couchbaseEntryManager; } private static Properties getSampleConnectionProperties() { Properties connectionProperties = new Properties(); connectionProperties.put(\"sql#db.schema.name\", \"public\"); connectionProperties.put(\"sql#connection.uri\", \"jdbc:postgresql://localhost:5432/jansdb\"); connectionProperties.put(\"sql#auth.userName\", \"jans\"); connectionProperties.put(\"sql#auth.userPassword\", \"secret\"); connectionProperties.put(\"sql#connection.pool.max-total\", \"300\"); connectionProperties.put(\"sql#connection.pool.max-idle\", \"300\"); connectionProperties.put(\"sql#auth.userName\", \"jans\"); connectionProperties.put(\"sql#auth.userPassword\", \"Secret1!\"); // Password hash method connectionProperties.put(\"sql#password.encryption.method\", \"SSHA-256\"); // Max time needed to create connection pool in milliseconds connectionProperties.put(\"sql#connection.pool.create-max-wait-time-millis\", \"20000\"); // Max wait 20 seconds connectionProperties.put(\"sql#connection.pool.max-wait-time-millis\", \"20000\"); // Allow to evict connection in pool after 30 minutes connectionProperties.put(\"sql#connection.pool.min-evictable-idle-time-millis\", \"1800000\"); connectionProperties.put(\"sql#binaryAttributes\", \"objectGUID\"); connectionProperties.put(\"sql#certificateAttributes\", \"userCertificate\"); return connectionProperties; } More MySQL ORM examples is in this sample module.","title":"PostgreSQL Configuration"},{"location":"admin/reference/database/pgsql-config/#postgresql-orm-persistence-layer","text":"The recommended PostgreSQL versions are 14.x, 15.x or newer. Before running installation the administrator can pre-install DB and provide credentials to access it or he can select option to install PostgreSQL on same server during setup. During installation setup generates default /etc/jans/conf/jans-sql.properties and creates jansdb schema with tables and initial data set.","title":"PostgreSQL ORM persistence layer"},{"location":"admin/reference/database/pgsql-config/#configuration-properties","text":"List of specific for PostgreSQL default setting from jans-sql.properties : db.schema.name=public connection.uri=jdbc:postgresql://localhost:5432/jansdb # Prefix connection.driver-property.key=value will be coverterd to key=value JDBC driver properties #connection.driver-property.driverProperty=driverPropertyValue auth.userName=jans auth.userPassword=CC0NHhtXW78= # Password hash method password.encryption.method=SSHA-256 # Connection pool size connection.pool.max-total=40 connection.pool.max-idle=15 connection.pool.min-idle=5 # Max time needed to create connection pool in milliseconds connection.pool.create-max-wait-time-millis=20000 # Max wait 20 seconds connection.pool.max-wait-time-millis=20000 # Allow to evict connection in pool after 30 minutes connection.pool.min-evictable-idle-time-millis=1800000 # Sets whether objects created for the pool will be validated before being returned from it #connection.pool.test-on-create=true # Sets whether objects borrowed from the pool will be validated when they are returned to the pool #connection.pool.test-on-return=true The rest of properties are static for all other supported DB: binaryAttributes=objectGUID certificateAttributes=userCertificate","title":"Configuration properties"},{"location":"admin/reference/database/pgsql-config/#doc_id-building-rules","text":"In order to support transparency for end applications and allow data migration from one DB to another ORM requires DN attribute in each entry. This attribute it also uses to build doc_id . Here is example of this DN -> doc_id conversion: doc_id is primary key. In order to build unique document identifier ORM uses another unique attribute DN . doc_id is last RDN value.","title":"doc_id building rules"},{"location":"admin/reference/database/pgsql-config/#generic-tables-structure","text":"Each table in jansdb PostgreSQL database follow next rules: one table for every LDAP objectClass has 2 mandatory column DN and doc_id Index for primary key","title":"Generic tables structure"},{"location":"admin/reference/database/pgsql-config/#data-mapping-rules","text":"ORM uses CHARACTER VARYING / TIMESTAMP / INT64 / BYTEA / BOOLEAN / TEXT / JSONB data types. JSONB it uses to store multi-valued attribute values. The generic format of such values is: [\"value_1\", \"value_2\", ...] If in schema specified in schema that application can do search in multi-valued attribute setup add next indexes for each column: CREATE INDEX IF NOT EXISTS \"jansPerson_jsonb_path_query_array_idx\" ON public.\"jansPerson\" USING gin (jsonb_path_query_array(\"jansExtUid\", '$[*]'::jsonpath)) TABLESPACE pg_default; For user password field ORM on persist/update operations automatically create hash. On authentication ORM compares hashes. To store attributes defined in java beans with @JsonObject annotation ORM uses TEXT column type.","title":"Data mapping rules"},{"location":"admin/reference/database/pgsql-config/#java-example","text":"This example shows how to use ORM. It opens connection to PostgreSQL DB and add user entry to it: public static void main(String[] args) { // Create Sql entry manager SqlEntryManager couchbaseEntryManager = createSqlEntryManager(); // Create and fill user bean SimpleUser newUser = new SimpleUser(); newUser.setDn(String.format(\"inum=%s,ou=people,o=jans\", System.currentTimeMillis())); newUser.setUserId(\"sample_user_\" + System.currentTimeMillis()); newUser.setUserPassword(\"test\"); newUser.getCustomAttributes().add(new CustomObjectAttribute(\"jansAddres\", Arrays.asList(\"London\", \"Texas\", \"New York\"))); newUser.getCustomAttributes().add(new CustomObjectAttribute(\"jansGuid\", \"test_value\")); // Call ORM API to store entry couchbaseEntryManager.persist(newUser); couchbaseEntryManager.destroy(); } public static SqlEntryManager createSqlEntryManager() { SqlEntryManagerFactory couchbaseEntryManagerFactory = new SqlEntryManagerFactory(); couchbaseEntryManagerFactory.create(); Properties connectionProperties = getSampleConnectionProperties(); SqlEntryManager couchbaseEntryManager = couchbaseEntryManagerFactory.createEntryManager(connectionProperties); return couchbaseEntryManager; } private static Properties getSampleConnectionProperties() { Properties connectionProperties = new Properties(); connectionProperties.put(\"sql#db.schema.name\", \"public\"); connectionProperties.put(\"sql#connection.uri\", \"jdbc:postgresql://localhost:5432/jansdb\"); connectionProperties.put(\"sql#auth.userName\", \"jans\"); connectionProperties.put(\"sql#auth.userPassword\", \"secret\"); connectionProperties.put(\"sql#connection.pool.max-total\", \"300\"); connectionProperties.put(\"sql#connection.pool.max-idle\", \"300\"); connectionProperties.put(\"sql#auth.userName\", \"jans\"); connectionProperties.put(\"sql#auth.userPassword\", \"Secret1!\"); // Password hash method connectionProperties.put(\"sql#password.encryption.method\", \"SSHA-256\"); // Max time needed to create connection pool in milliseconds connectionProperties.put(\"sql#connection.pool.create-max-wait-time-millis\", \"20000\"); // Max wait 20 seconds connectionProperties.put(\"sql#connection.pool.max-wait-time-millis\", \"20000\"); // Allow to evict connection in pool after 30 minutes connectionProperties.put(\"sql#connection.pool.min-evictable-idle-time-millis\", \"1800000\"); connectionProperties.put(\"sql#binaryAttributes\", \"objectGUID\"); connectionProperties.put(\"sql#certificateAttributes\", \"userCertificate\"); return connectionProperties; } More MySQL ORM examples is in this sample module.","title":"Java example"},{"location":"admin/reference/database/pgsql-ops/","tags":["administration","reference","database"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"PostgreSQL Operation"},{"location":"admin/reference/database/pgsql-ops/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/reference/database/pgsql-ops/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/reference/database/pgsql-ops/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/reference/database/pgsql-schema-indexes/","tags":["administration","database","PostgreSQL","Indexes"],"text":"PostgreSQL Indexes # jansPairwiseIdentifier # tablename indexname indexdef jansPairwiseIdentifier jansPairwiseIdentifier_pkey CREATE UNIQUE INDEX \"jansPairwiseIdentifier_pkey\" ON public.\"jansPairwiseIdentifier\" USING btree (doc_id) jansPerson # tablename indexname indexdef jansPerson jansPerson_pkey CREATE UNIQUE INDEX \"jansPerson_pkey\" ON public.\"jansPerson\" USING btree (doc_id) jansPerson jansPerson_givenName_idx CREATE INDEX \"jansPerson_givenName_idx\" ON public.\"jansPerson\" USING btree (\"givenName\") jansPerson jansPerson_mail_idx CREATE INDEX \"jansPerson_mail_idx\" ON public.\"jansPerson\" USING btree (mail) jansPerson jansPerson_sn_idx CREATE INDEX \"jansPerson_sn_idx\" ON public.\"jansPerson\" USING btree (sn) jansPerson jansPerson_lower_idx CREATE INDEX \"jansPerson_lower_idx\" ON public.\"jansPerson\" USING btree (lower((uid)::text)) jansPerson jansPerson_displayName_idx CREATE INDEX \"jansPerson_displayName_idx\" ON public.\"jansPerson\" USING btree (\"displayName\") jansPerson jansPerson_inum_idx CREATE INDEX \"jansPerson_inum_idx\" ON public.\"jansPerson\" USING btree (inum) jansPerson jansPerson_jsonb_path_query_array_idx CREATE INDEX \"jansPerson_jsonb_path_query_array_idx\" ON public.\"jansPerson\" USING gin (jsonb_path_query_array(\"jansExtUid\", '$[*]'::jsonpath)) jansPerson jansPerson_uid_idx CREATE INDEX \"jansPerson_uid_idx\" ON public.\"jansPerson\" USING btree (uid) jansPerson jansPerson_lower_idx1 CREATE INDEX \"jansPerson_lower_idx1\" ON public.\"jansPerson\" USING btree (lower((mail)::text)) jansOrganization # tablename indexname indexdef jansOrganization jansOrganization_pkey CREATE UNIQUE INDEX \"jansOrganization_pkey\" ON public.\"jansOrganization\" USING btree (doc_id) jansOrganization jansOrganization_uid_idx CREATE INDEX \"jansOrganization_uid_idx\" ON public.\"jansOrganization\" USING btree (uid) jansSsa # tablename indexname indexdef jansSsa jansSsa_pkey CREATE UNIQUE INDEX \"jansSsa_pkey\" ON public.\"jansSsa\" USING btree (doc_id) jansAppConf # tablename indexname indexdef jansAppConf jansAppConf_pkey CREATE UNIQUE INDEX \"jansAppConf_pkey\" ON public.\"jansAppConf\" USING btree (doc_id) jansClnt # tablename indexname indexdef jansClnt jansClnt_pkey CREATE UNIQUE INDEX \"jansClnt_pkey\" ON public.\"jansClnt\" USING btree (doc_id) jansClnt jansClnt_description_idx CREATE INDEX \"jansClnt_description_idx\" ON public.\"jansClnt\" USING btree (description) jansClnt jansClnt_jansClntSecretExpAt_idx CREATE INDEX \"jansClnt_jansClntSecretExpAt_idx\" ON public.\"jansClnt\" USING btree (\"jansClntSecretExpAt\") jansClnt jansClnt_del_exp_idx CREATE INDEX \"jansClnt_del_exp_idx\" ON public.\"jansClnt\" USING btree (del, exp) jansClnt jansClnt_displayName_idx CREATE INDEX \"jansClnt_displayName_idx\" ON public.\"jansClnt\" USING btree (\"displayName\") jansClnt jansClnt_inum_idx CREATE INDEX \"jansClnt_inum_idx\" ON public.\"jansClnt\" USING btree (inum) jansClnt jansClnt_jansRegistrationAccessTkn_idx CREATE INDEX \"jansClnt_jansRegistrationAccessTkn_idx\" ON public.\"jansClnt\" USING btree (\"jansRegistrationAccessTkn\") jansScope # tablename indexname indexdef jansScope jansScope_pkey CREATE UNIQUE INDEX \"jansScope_pkey\" ON public.\"jansScope\" USING btree (doc_id) jansScope jansScope_displayName_idx CREATE INDEX \"jansScope_displayName_idx\" ON public.\"jansScope\" USING btree (\"displayName\") jansScope jansScope_del_exp_idx CREATE INDEX \"jansScope_del_exp_idx\" ON public.\"jansScope\" USING btree (del, exp) jansScope jansScope_description_idx CREATE INDEX \"jansScope_description_idx\" ON public.\"jansScope\" USING btree (description) jansScope jansScope_jansId_idx CREATE INDEX \"jansScope_jansId_idx\" ON public.\"jansScope\" USING btree (\"jansId\") jansUmaResource # tablename indexname indexdef jansUmaResource jansUmaResource_pkey CREATE UNIQUE INDEX \"jansUmaResource_pkey\" ON public.\"jansUmaResource\" USING btree (doc_id) jansUmaResource jansUmaResource_jansUmaScope_idx CREATE INDEX \"jansUmaResource_jansUmaScope_idx\" ON public.\"jansUmaResource\" USING btree (\"jansUmaScope\") jansUmaResource jansUmaResource_del_exp_idx CREATE INDEX \"jansUmaResource_del_exp_idx\" ON public.\"jansUmaResource\" USING btree (del, exp) jansUmaResource jansUmaResource_displayName_idx CREATE INDEX \"jansUmaResource_displayName_idx\" ON public.\"jansUmaResource\" USING btree (\"displayName\") jansUmaResource jansUmaResource_jansId_idx CREATE INDEX \"jansUmaResource_jansId_idx\" ON public.\"jansUmaResource\" USING btree (\"jansId\") jansUmaResourcePermission # tablename indexname indexdef jansUmaResourcePermission jansUmaResourcePermission_pkey CREATE UNIQUE INDEX \"jansUmaResourcePermission_pkey\" ON public.\"jansUmaResourcePermission\" USING btree (doc_id) jansUmaResourcePermission jansUmaResourcePermission_jansTicket_idx CREATE INDEX \"jansUmaResourcePermission_jansTicket_idx\" ON public.\"jansUmaResourcePermission\" USING btree (\"jansTicket\") jansGrant # tablename indexname indexdef jansGrant jansGrant_pkey CREATE UNIQUE INDEX \"jansGrant_pkey\" ON public.\"jansGrant\" USING btree (doc_id) jansToken # tablename indexname indexdef jansToken jansToken_pkey CREATE UNIQUE INDEX \"jansToken_pkey\" ON public.\"jansToken\" USING btree (doc_id) jansToken jansToken_authzCode_idx CREATE INDEX \"jansToken_authzCode_idx\" ON public.\"jansToken\" USING btree (\"authzCode\") jansToken jansToken_grtId_idx CREATE INDEX \"jansToken_grtId_idx\" ON public.\"jansToken\" USING btree (\"grtId\") jansToken jansToken_ssnId_idx CREATE INDEX \"jansToken_ssnId_idx\" ON public.\"jansToken\" USING btree (\"ssnId\") jansToken jansToken_tknCde_idx CREATE INDEX \"jansToken_tknCde_idx\" ON public.\"jansToken\" USING btree (\"tknCde\") jansToken jansToken_del_exp_idx CREATE INDEX \"jansToken_del_exp_idx\" ON public.\"jansToken\" USING btree (del, exp) jansGrp # tablename indexname indexdef jansGrp jansGrp_pkey CREATE UNIQUE INDEX \"jansGrp_pkey\" ON public.\"jansGrp\" USING btree (doc_id) jansGrp jansGrp_description_idx CREATE INDEX \"jansGrp_description_idx\" ON public.\"jansGrp\" USING btree (description) jansGrp jansGrp_inum_idx CREATE INDEX \"jansGrp_inum_idx\" ON public.\"jansGrp\" USING btree (inum) jansGrp jansGrp_displayName_idx CREATE INDEX \"jansGrp_displayName_idx\" ON public.\"jansGrp\" USING btree (\"displayName\") jansAttr # tablename indexname indexdef jansAttr jansAttr_pkey CREATE UNIQUE INDEX \"jansAttr_pkey\" ON public.\"jansAttr\" USING btree (doc_id) jansAttr jansAttr_description_idx CREATE INDEX \"jansAttr_description_idx\" ON public.\"jansAttr\" USING btree (description) jansAttr jansAttr_jansAttrName_idx CREATE INDEX \"jansAttr_jansAttrName_idx\" ON public.\"jansAttr\" USING btree (\"jansAttrName\") jansAttr jansAttr_inum_idx CREATE INDEX \"jansAttr_inum_idx\" ON public.\"jansAttr\" USING btree (inum) jansAttr jansAttr_displayName_idx CREATE INDEX \"jansAttr_displayName_idx\" ON public.\"jansAttr\" USING btree (\"displayName\") jansAttr jansAttr_jansAttrOrigin_idx CREATE INDEX \"jansAttr_jansAttrOrigin_idx\" ON public.\"jansAttr\" USING btree (\"jansAttrOrigin\") jansPassResetReq # tablename indexname indexdef jansPassResetReq jansPassResetReq_pkey CREATE UNIQUE INDEX \"jansPassResetReq_pkey\" ON public.\"jansPassResetReq\" USING btree (doc_id) jansPassResetReq jansPassResetReq_creationDate_idx CREATE INDEX \"jansPassResetReq_creationDate_idx\" ON public.\"jansPassResetReq\" USING btree (\"creationDate\") jansSessId # tablename indexname indexdef jansSessId jansSessId_pkey CREATE UNIQUE INDEX \"jansSessId_pkey\" ON public.\"jansSessId\" USING btree (doc_id) jansSessId jansSessId_sid_idx CREATE INDEX \"jansSessId_sid_idx\" ON public.\"jansSessId\" USING btree (sid) jansSessId jansSessId_deviceSecret_idx CREATE INDEX \"jansSessId_deviceSecret_idx\" ON public.\"jansSessId\" USING btree (\"deviceSecret\") jansSessId jansSessId_jansUsrDN_idx CREATE INDEX \"jansSessId_jansUsrDN_idx\" ON public.\"jansSessId\" USING btree (\"jansUsrDN\") jansSessId jansSessId_del_exp_idx CREATE INDEX \"jansSessId_del_exp_idx\" ON public.\"jansSessId\" USING btree (del, exp) jansUmaRPT # tablename indexname indexdef jansUmaRPT jansUmaRPT_pkey CREATE UNIQUE INDEX \"jansUmaRPT_pkey\" ON public.\"jansUmaRPT\" USING btree (doc_id) jansPushApp # tablename indexname indexdef jansPushApp jansPushApp_pkey CREATE UNIQUE INDEX \"jansPushApp_pkey\" ON public.\"jansPushApp\" USING btree (doc_id) jansScr # tablename indexname indexdef jansScr jansScr_pkey CREATE UNIQUE INDEX \"jansScr_pkey\" ON public.\"jansScr\" USING btree (doc_id) jansCustomScr # tablename indexname indexdef jansCustomScr jansCustomScr_pkey CREATE UNIQUE INDEX \"jansCustomScr_pkey\" ON public.\"jansCustomScr\" USING btree (doc_id) jansCustomScr jansCustomScr_inum_idx CREATE INDEX \"jansCustomScr_inum_idx\" ON public.\"jansCustomScr\" USING btree (inum) jansCustomScr jansCustomScr_jansScrTyp_idx CREATE INDEX \"jansCustomScr_jansScrTyp_idx\" ON public.\"jansCustomScr\" USING btree (\"jansScrTyp\") jansDeviceRegistration # tablename indexname indexdef jansDeviceRegistration jansDeviceRegistration_pkey CREATE UNIQUE INDEX \"jansDeviceRegistration_pkey\" ON public.\"jansDeviceRegistration\" USING btree (doc_id) jansDeviceRegistration jansDeviceRegistration_jansDeviceKeyHandle_idx CREATE INDEX \"jansDeviceRegistration_jansDeviceKeyHandle_idx\" ON public.\"jansDeviceRegistration\" USING btree (\"jansDeviceKeyHandle\") jansDeviceRegistration jansDeviceRegistration_jansApp_idx CREATE INDEX \"jansDeviceRegistration_jansApp_idx\" ON public.\"jansDeviceRegistration\" USING btree (\"jansApp\") jansDeviceRegistration jansDeviceRegistration_personInum_idx CREATE INDEX \"jansDeviceRegistration_personInum_idx\" ON public.\"jansDeviceRegistration\" USING btree (\"personInum\") jansDeviceRegistration jansDeviceRegistration_del_exp_idx CREATE INDEX \"jansDeviceRegistration_del_exp_idx\" ON public.\"jansDeviceRegistration\" USING btree (del, exp) jansDeviceRegistration jansDeviceRegistration_jansDeviceHashCode_idx CREATE INDEX \"jansDeviceRegistration_jansDeviceHashCode_idx\" ON public.\"jansDeviceRegistration\" USING btree (\"jansDeviceHashCode\") jansDeviceRegistration jansDeviceRegistration_jansStatus_idx CREATE INDEX \"jansDeviceRegistration_jansStatus_idx\" ON public.\"jansDeviceRegistration\" USING btree (\"jansStatus\") jansDeviceRegistration jansDeviceRegistration_creationDate_idx CREATE INDEX \"jansDeviceRegistration_creationDate_idx\" ON public.\"jansDeviceRegistration\" USING btree (\"creationDate\") jansU2fReq # tablename indexname indexdef jansU2fReq jansU2fReq_pkey CREATE UNIQUE INDEX \"jansU2fReq_pkey\" ON public.\"jansU2fReq\" USING btree (doc_id) jansU2fReq jansU2fReq_del_exp_idx CREATE INDEX \"jansU2fReq_del_exp_idx\" ON public.\"jansU2fReq\" USING btree (del, exp) jansU2fReq jansU2fReq_creationDate_idx CREATE INDEX \"jansU2fReq_creationDate_idx\" ON public.\"jansU2fReq\" USING btree (\"creationDate\") jansMetric # tablename indexname indexdef jansMetric jansMetric_pkey CREATE UNIQUE INDEX \"jansMetric_pkey\" ON public.\"jansMetric\" USING btree (doc_id) jansMetric jansMetric_jansEndDate_idx CREATE INDEX \"jansMetric_jansEndDate_idx\" ON public.\"jansMetric\" USING btree (\"jansEndDate\") jansMetric jansMetric_jansMetricTyp_idx CREATE INDEX \"jansMetric_jansMetricTyp_idx\" ON public.\"jansMetric\" USING btree (\"jansMetricTyp\") jansMetric jansMetric_jansStartDate_idx CREATE INDEX \"jansMetric_jansStartDate_idx\" ON public.\"jansMetric\" USING btree (\"jansStartDate\") jansMetric jansMetric_jansAppTyp_idx CREATE INDEX \"jansMetric_jansAppTyp_idx\" ON public.\"jansMetric\" USING btree (\"jansAppTyp\") jansMetric jansMetric_del_exp_idx CREATE INDEX \"jansMetric_del_exp_idx\" ON public.\"jansMetric\" USING btree (del, exp) jansUmaPCT # tablename indexname indexdef jansUmaPCT jansUmaPCT_pkey CREATE UNIQUE INDEX \"jansUmaPCT_pkey\" ON public.\"jansUmaPCT\" USING btree (doc_id) jansUmaPCT jansUmaPCT_tknCde_idx CREATE INDEX \"jansUmaPCT_tknCde_idx\" ON public.\"jansUmaPCT\" USING btree (\"tknCde\") jansUmaPCT jansUmaPCT_del_exp_idx CREATE INDEX \"jansUmaPCT_del_exp_idx\" ON public.\"jansUmaPCT\" USING btree (del, exp) jansCache # tablename indexname indexdef jansCache jansCache_pkey CREATE UNIQUE INDEX \"jansCache_pkey\" ON public.\"jansCache\" USING btree (doc_id) jansCache jansCache_del_exp_idx CREATE INDEX \"jansCache_del_exp_idx\" ON public.\"jansCache\" USING btree (del, exp) jansFido2RegistrationEntry # tablename indexname indexdef jansFido2RegistrationEntry jansFido2RegistrationEntry_pkey CREATE UNIQUE INDEX \"jansFido2RegistrationEntry_pkey\" ON public.\"jansFido2RegistrationEntry\" USING btree (doc_id) jansFido2RegistrationEntry jansFido2RegistrationEntry_jansApp_idx CREATE INDEX \"jansFido2RegistrationEntry_jansApp_idx\" ON public.\"jansFido2RegistrationEntry\" USING btree (\"jansApp\") jansFido2RegistrationEntry jansFido2RegistrationEntry_jansCodeChallengeHash_idx CREATE INDEX \"jansFido2RegistrationEntry_jansCodeChallengeHash_idx\" ON public.\"jansFido2RegistrationEntry\" USING btree (\"jansCodeChallengeHash\") jansFido2RegistrationEntry jansFido2RegistrationEntry_jansPublicKeyIdHash_idx CREATE INDEX \"jansFido2RegistrationEntry_jansPublicKeyIdHash_idx\" ON public.\"jansFido2RegistrationEntry\" USING btree (\"jansPublicKeyIdHash\") jansFido2RegistrationEntry jansFido2RegistrationEntry_jansStatus_idx CREATE INDEX \"jansFido2RegistrationEntry_jansStatus_idx\" ON public.\"jansFido2RegistrationEntry\" USING btree (\"jansStatus\") jansFido2RegistrationEntry jansFido2RegistrationEntry_creationDate_idx CREATE INDEX \"jansFido2RegistrationEntry_creationDate_idx\" ON public.\"jansFido2RegistrationEntry\" USING btree (\"creationDate\") jansFido2RegistrationEntry jansFido2RegistrationEntry_jansCodeChallenge_idx CREATE INDEX \"jansFido2RegistrationEntry_jansCodeChallenge_idx\" ON public.\"jansFido2RegistrationEntry\" USING btree (\"jansCodeChallenge\") jansFido2RegistrationEntry jansFido2RegistrationEntry_jansPublicKeyId_idx CREATE INDEX \"jansFido2RegistrationEntry_jansPublicKeyId_idx\" ON public.\"jansFido2RegistrationEntry\" USING btree (\"jansPublicKeyId\") jansFido2RegistrationEntry jansFido2RegistrationEntry_personInum_idx CREATE INDEX \"jansFido2RegistrationEntry_personInum_idx\" ON public.\"jansFido2RegistrationEntry\" USING btree (\"personInum\") jansFido2RegistrationEntry jansFido2RegistrationEntry_del_exp_idx CREATE INDEX \"jansFido2RegistrationEntry_del_exp_idx\" ON public.\"jansFido2RegistrationEntry\" USING btree (del, exp) jansPushDevice # tablename indexname indexdef jansPushDevice jansPushDevice_pkey CREATE UNIQUE INDEX \"jansPushDevice_pkey\" ON public.\"jansPushDevice\" USING btree (doc_id) jansClntAuthz # tablename indexname indexdef jansClntAuthz jansClntAuthz_pkey CREATE UNIQUE INDEX \"jansClntAuthz_pkey\" ON public.\"jansClntAuthz\" USING btree (doc_id) jansClntAuthz jansClntAuthz_jsonb_path_query_array_idx CREATE INDEX \"jansClntAuthz_jsonb_path_query_array_idx\" ON public.\"jansClntAuthz\" USING gin (jsonb_path_query_array(\"jansClntId\", '$[*]'::jsonpath)) jansClntAuthz jansClntAuthz_del_exp_idx CREATE INDEX \"jansClntAuthz_del_exp_idx\" ON public.\"jansClntAuthz\" USING btree (del, exp) jansClntAuthz jansClntAuthz_jansUsrId_idx CREATE INDEX \"jansClntAuthz_jansUsrId_idx\" ON public.\"jansClntAuthz\" USING btree (\"jansUsrId\") jansSectorIdentifier # tablename indexname indexdef jansSectorIdentifier jansSectorIdentifier_pkey CREATE UNIQUE INDEX \"jansSectorIdentifier_pkey\" ON public.\"jansSectorIdentifier\" USING btree (doc_id) jansFido2AuthnEntry # tablename indexname indexdef jansFido2AuthnEntry jansFido2AuthnEntry_pkey CREATE UNIQUE INDEX \"jansFido2AuthnEntry_pkey\" ON public.\"jansFido2AuthnEntry\" USING btree (doc_id) jansFido2AuthnEntry jansFido2AuthnEntry_jansApp_idx CREATE INDEX \"jansFido2AuthnEntry_jansApp_idx\" ON public.\"jansFido2AuthnEntry\" USING btree (\"jansApp\") jansFido2AuthnEntry jansFido2AuthnEntry_jansCodeChallengeHash_idx CREATE INDEX \"jansFido2AuthnEntry_jansCodeChallengeHash_idx\" ON public.\"jansFido2AuthnEntry\" USING btree (\"jansCodeChallengeHash\") jansFido2AuthnEntry jansFido2AuthnEntry_jansStatus_idx CREATE INDEX \"jansFido2AuthnEntry_jansStatus_idx\" ON public.\"jansFido2AuthnEntry\" USING btree (\"jansStatus\") jansFido2AuthnEntry jansFido2AuthnEntry_creationDate_idx CREATE INDEX \"jansFido2AuthnEntry_creationDate_idx\" ON public.\"jansFido2AuthnEntry\" USING btree (\"creationDate\") jansFido2AuthnEntry jansFido2AuthnEntry_jansCodeChallenge_idx CREATE INDEX \"jansFido2AuthnEntry_jansCodeChallenge_idx\" ON public.\"jansFido2AuthnEntry\" USING btree (\"jansCodeChallenge\") jansFido2AuthnEntry jansFido2AuthnEntry_personInum_idx CREATE INDEX \"jansFido2AuthnEntry_personInum_idx\" ON public.\"jansFido2AuthnEntry\" USING btree (\"personInum\") jansFido2AuthnEntry jansFido2AuthnEntry_del_exp_idx CREATE INDEX \"jansFido2AuthnEntry_del_exp_idx\" ON public.\"jansFido2AuthnEntry\" USING btree (del, exp) jansRp # tablename indexname indexdef jansRp jansRp_pkey CREATE UNIQUE INDEX \"jansRp_pkey\" ON public.\"jansRp\" USING btree (doc_id) jansCibaReq # tablename indexname indexdef jansCibaReq jansCibaReq_pkey CREATE UNIQUE INDEX \"jansCibaReq_pkey\" ON public.\"jansCibaReq\" USING btree (doc_id) jansCibaReq jansCibaReq_jansStatus_exp_idx CREATE INDEX \"jansCibaReq_jansStatus_exp_idx\" ON public.\"jansCibaReq\" USING btree (\"jansStatus\", exp) jansStatEntry # tablename indexname indexdef jansStatEntry jansStatEntry_pkey CREATE UNIQUE INDEX \"jansStatEntry_pkey\" ON public.\"jansStatEntry\" USING btree (doc_id) jansStatEntry jansStatEntry_jansId_idx CREATE INDEX \"jansStatEntry_jansId_idx\" ON public.\"jansStatEntry\" USING btree (\"jansId\") jansPar # tablename indexname indexdef jansPar jansPar_pkey CREATE UNIQUE INDEX \"jansPar_pkey\" ON public.\"jansPar\" USING btree (doc_id) jansPar jansPar_jansId_idx CREATE INDEX \"jansPar_jansId_idx\" ON public.\"jansPar\" USING btree (\"jansId\") jansPar jansPar_del_exp_idx CREATE INDEX \"jansPar_del_exp_idx\" ON public.\"jansPar\" USING btree (del, exp) jansInumMap # tablename indexname indexdef jansInumMap jansInumMap_pkey CREATE UNIQUE INDEX \"jansInumMap_pkey\" ON public.\"jansInumMap\" USING btree (doc_id) jansInumMap jansInumMap_jansStatus_idx CREATE INDEX \"jansInumMap_jansStatus_idx\" ON public.\"jansInumMap\" USING btree (\"jansStatus\") jansInumMap jansInumMap_inum_idx CREATE INDEX \"jansInumMap_inum_idx\" ON public.\"jansInumMap\" USING btree (inum) agmFlowRun # tablename indexname indexdef agmFlowRun agmFlowRun_pkey CREATE UNIQUE INDEX \"agmFlowRun_pkey\" ON public.\"agmFlowRun\" USING btree (doc_id) agmFlow # tablename indexname indexdef agmFlow agmFlow_pkey CREATE UNIQUE INDEX \"agmFlow_pkey\" ON public.\"agmFlow\" USING btree (doc_id) adsPrjDeployment # tablename indexname indexdef adsPrjDeployment adsPrjDeployment_pkey CREATE UNIQUE INDEX \"adsPrjDeployment_pkey\" ON public.\"adsPrjDeployment\" USING btree (doc_id) jansDocument # tablename indexname indexdef jansDocument jansDocument_pkey CREATE UNIQUE INDEX \"jansDocument_pkey\" ON public.\"jansDocument\" USING btree (doc_id)","title":"PostgreSQL Indexes"},{"location":"admin/reference/database/pgsql-schema-indexes/#postgresql-indexes","text":"","title":"PostgreSQL Indexes"},{"location":"admin/reference/database/pgsql-schema-indexes/#janspairwiseidentifier","text":"tablename indexname indexdef jansPairwiseIdentifier jansPairwiseIdentifier_pkey CREATE UNIQUE INDEX \"jansPairwiseIdentifier_pkey\" ON public.\"jansPairwiseIdentifier\" USING btree (doc_id)","title":"jansPairwiseIdentifier"},{"location":"admin/reference/database/pgsql-schema-indexes/#jansperson","text":"tablename indexname indexdef jansPerson jansPerson_pkey CREATE UNIQUE INDEX \"jansPerson_pkey\" ON public.\"jansPerson\" USING btree (doc_id) jansPerson jansPerson_givenName_idx CREATE INDEX \"jansPerson_givenName_idx\" ON public.\"jansPerson\" USING btree (\"givenName\") jansPerson jansPerson_mail_idx CREATE INDEX \"jansPerson_mail_idx\" ON public.\"jansPerson\" USING btree (mail) jansPerson jansPerson_sn_idx CREATE INDEX \"jansPerson_sn_idx\" ON public.\"jansPerson\" USING btree (sn) jansPerson jansPerson_lower_idx CREATE INDEX \"jansPerson_lower_idx\" ON public.\"jansPerson\" USING btree (lower((uid)::text)) jansPerson jansPerson_displayName_idx CREATE INDEX \"jansPerson_displayName_idx\" ON public.\"jansPerson\" USING btree (\"displayName\") jansPerson jansPerson_inum_idx CREATE INDEX \"jansPerson_inum_idx\" ON public.\"jansPerson\" USING btree (inum) jansPerson jansPerson_jsonb_path_query_array_idx CREATE INDEX \"jansPerson_jsonb_path_query_array_idx\" ON public.\"jansPerson\" USING gin (jsonb_path_query_array(\"jansExtUid\", '$[*]'::jsonpath)) jansPerson jansPerson_uid_idx CREATE INDEX \"jansPerson_uid_idx\" ON public.\"jansPerson\" USING btree (uid) jansPerson jansPerson_lower_idx1 CREATE INDEX \"jansPerson_lower_idx1\" ON public.\"jansPerson\" USING btree (lower((mail)::text))","title":"jansPerson"},{"location":"admin/reference/database/pgsql-schema-indexes/#jansorganization","text":"tablename indexname indexdef jansOrganization jansOrganization_pkey CREATE UNIQUE INDEX \"jansOrganization_pkey\" ON public.\"jansOrganization\" USING btree (doc_id) jansOrganization jansOrganization_uid_idx CREATE INDEX \"jansOrganization_uid_idx\" ON public.\"jansOrganization\" USING btree (uid)","title":"jansOrganization"},{"location":"admin/reference/database/pgsql-schema-indexes/#jansssa","text":"tablename indexname indexdef jansSsa jansSsa_pkey CREATE UNIQUE INDEX \"jansSsa_pkey\" ON public.\"jansSsa\" USING btree (doc_id)","title":"jansSsa"},{"location":"admin/reference/database/pgsql-schema-indexes/#jansappconf","text":"tablename indexname indexdef jansAppConf jansAppConf_pkey CREATE UNIQUE INDEX \"jansAppConf_pkey\" ON public.\"jansAppConf\" USING btree (doc_id)","title":"jansAppConf"},{"location":"admin/reference/database/pgsql-schema-indexes/#jansclnt","text":"tablename indexname indexdef jansClnt jansClnt_pkey CREATE UNIQUE INDEX \"jansClnt_pkey\" ON public.\"jansClnt\" USING btree (doc_id) jansClnt jansClnt_description_idx CREATE INDEX \"jansClnt_description_idx\" ON public.\"jansClnt\" USING btree (description) jansClnt jansClnt_jansClntSecretExpAt_idx CREATE INDEX \"jansClnt_jansClntSecretExpAt_idx\" ON public.\"jansClnt\" USING btree (\"jansClntSecretExpAt\") jansClnt jansClnt_del_exp_idx CREATE INDEX \"jansClnt_del_exp_idx\" ON public.\"jansClnt\" USING btree (del, exp) jansClnt jansClnt_displayName_idx CREATE INDEX \"jansClnt_displayName_idx\" ON public.\"jansClnt\" USING btree (\"displayName\") jansClnt jansClnt_inum_idx CREATE INDEX \"jansClnt_inum_idx\" ON public.\"jansClnt\" USING btree (inum) jansClnt jansClnt_jansRegistrationAccessTkn_idx CREATE INDEX \"jansClnt_jansRegistrationAccessTkn_idx\" ON public.\"jansClnt\" USING btree (\"jansRegistrationAccessTkn\")","title":"jansClnt"},{"location":"admin/reference/database/pgsql-schema-indexes/#jansscope","text":"tablename indexname indexdef jansScope jansScope_pkey CREATE UNIQUE INDEX \"jansScope_pkey\" ON public.\"jansScope\" USING btree (doc_id) jansScope jansScope_displayName_idx CREATE INDEX \"jansScope_displayName_idx\" ON public.\"jansScope\" USING btree (\"displayName\") jansScope jansScope_del_exp_idx CREATE INDEX \"jansScope_del_exp_idx\" ON public.\"jansScope\" USING btree (del, exp) jansScope jansScope_description_idx CREATE INDEX \"jansScope_description_idx\" ON public.\"jansScope\" USING btree (description) jansScope jansScope_jansId_idx CREATE INDEX \"jansScope_jansId_idx\" ON public.\"jansScope\" USING btree (\"jansId\")","title":"jansScope"},{"location":"admin/reference/database/pgsql-schema-indexes/#jansumaresource","text":"tablename indexname indexdef jansUmaResource jansUmaResource_pkey CREATE UNIQUE INDEX \"jansUmaResource_pkey\" ON public.\"jansUmaResource\" USING btree (doc_id) jansUmaResource jansUmaResource_jansUmaScope_idx CREATE INDEX \"jansUmaResource_jansUmaScope_idx\" ON public.\"jansUmaResource\" USING btree (\"jansUmaScope\") jansUmaResource jansUmaResource_del_exp_idx CREATE INDEX \"jansUmaResource_del_exp_idx\" ON public.\"jansUmaResource\" USING btree (del, exp) jansUmaResource jansUmaResource_displayName_idx CREATE INDEX \"jansUmaResource_displayName_idx\" ON public.\"jansUmaResource\" USING btree (\"displayName\") jansUmaResource jansUmaResource_jansId_idx CREATE INDEX \"jansUmaResource_jansId_idx\" ON public.\"jansUmaResource\" USING btree (\"jansId\")","title":"jansUmaResource"},{"location":"admin/reference/database/pgsql-schema-indexes/#jansumaresourcepermission","text":"tablename indexname indexdef jansUmaResourcePermission jansUmaResourcePermission_pkey CREATE UNIQUE INDEX \"jansUmaResourcePermission_pkey\" ON public.\"jansUmaResourcePermission\" USING btree (doc_id) jansUmaResourcePermission jansUmaResourcePermission_jansTicket_idx CREATE INDEX \"jansUmaResourcePermission_jansTicket_idx\" ON public.\"jansUmaResourcePermission\" USING btree (\"jansTicket\")","title":"jansUmaResourcePermission"},{"location":"admin/reference/database/pgsql-schema-indexes/#jansgrant","text":"tablename indexname indexdef jansGrant jansGrant_pkey CREATE UNIQUE INDEX \"jansGrant_pkey\" ON public.\"jansGrant\" USING btree (doc_id)","title":"jansGrant"},{"location":"admin/reference/database/pgsql-schema-indexes/#janstoken","text":"tablename indexname indexdef jansToken jansToken_pkey CREATE UNIQUE INDEX \"jansToken_pkey\" ON public.\"jansToken\" USING btree (doc_id) jansToken jansToken_authzCode_idx CREATE INDEX \"jansToken_authzCode_idx\" ON public.\"jansToken\" USING btree (\"authzCode\") jansToken jansToken_grtId_idx CREATE INDEX \"jansToken_grtId_idx\" ON public.\"jansToken\" USING btree (\"grtId\") jansToken jansToken_ssnId_idx CREATE INDEX \"jansToken_ssnId_idx\" ON public.\"jansToken\" USING btree (\"ssnId\") jansToken jansToken_tknCde_idx CREATE INDEX \"jansToken_tknCde_idx\" ON public.\"jansToken\" USING btree (\"tknCde\") jansToken jansToken_del_exp_idx CREATE INDEX \"jansToken_del_exp_idx\" ON public.\"jansToken\" USING btree (del, exp)","title":"jansToken"},{"location":"admin/reference/database/pgsql-schema-indexes/#jansgrp","text":"tablename indexname indexdef jansGrp jansGrp_pkey CREATE UNIQUE INDEX \"jansGrp_pkey\" ON public.\"jansGrp\" USING btree (doc_id) jansGrp jansGrp_description_idx CREATE INDEX \"jansGrp_description_idx\" ON public.\"jansGrp\" USING btree (description) jansGrp jansGrp_inum_idx CREATE INDEX \"jansGrp_inum_idx\" ON public.\"jansGrp\" USING btree (inum) jansGrp jansGrp_displayName_idx CREATE INDEX \"jansGrp_displayName_idx\" ON public.\"jansGrp\" USING btree (\"displayName\")","title":"jansGrp"},{"location":"admin/reference/database/pgsql-schema-indexes/#jansattr","text":"tablename indexname indexdef jansAttr jansAttr_pkey CREATE UNIQUE INDEX \"jansAttr_pkey\" ON public.\"jansAttr\" USING btree (doc_id) jansAttr jansAttr_description_idx CREATE INDEX \"jansAttr_description_idx\" ON public.\"jansAttr\" USING btree (description) jansAttr jansAttr_jansAttrName_idx CREATE INDEX \"jansAttr_jansAttrName_idx\" ON public.\"jansAttr\" USING btree (\"jansAttrName\") jansAttr jansAttr_inum_idx CREATE INDEX \"jansAttr_inum_idx\" ON public.\"jansAttr\" USING btree (inum) jansAttr jansAttr_displayName_idx CREATE INDEX \"jansAttr_displayName_idx\" ON public.\"jansAttr\" USING btree (\"displayName\") jansAttr jansAttr_jansAttrOrigin_idx CREATE INDEX \"jansAttr_jansAttrOrigin_idx\" ON public.\"jansAttr\" USING btree (\"jansAttrOrigin\")","title":"jansAttr"},{"location":"admin/reference/database/pgsql-schema-indexes/#janspassresetreq","text":"tablename indexname indexdef jansPassResetReq jansPassResetReq_pkey CREATE UNIQUE INDEX \"jansPassResetReq_pkey\" ON public.\"jansPassResetReq\" USING btree (doc_id) jansPassResetReq jansPassResetReq_creationDate_idx CREATE INDEX \"jansPassResetReq_creationDate_idx\" ON public.\"jansPassResetReq\" USING btree (\"creationDate\")","title":"jansPassResetReq"},{"location":"admin/reference/database/pgsql-schema-indexes/#janssessid","text":"tablename indexname indexdef jansSessId jansSessId_pkey CREATE UNIQUE INDEX \"jansSessId_pkey\" ON public.\"jansSessId\" USING btree (doc_id) jansSessId jansSessId_sid_idx CREATE INDEX \"jansSessId_sid_idx\" ON public.\"jansSessId\" USING btree (sid) jansSessId jansSessId_deviceSecret_idx CREATE INDEX \"jansSessId_deviceSecret_idx\" ON public.\"jansSessId\" USING btree (\"deviceSecret\") jansSessId jansSessId_jansUsrDN_idx CREATE INDEX \"jansSessId_jansUsrDN_idx\" ON public.\"jansSessId\" USING btree (\"jansUsrDN\") jansSessId jansSessId_del_exp_idx CREATE INDEX \"jansSessId_del_exp_idx\" ON public.\"jansSessId\" USING btree (del, exp)","title":"jansSessId"},{"location":"admin/reference/database/pgsql-schema-indexes/#jansumarpt","text":"tablename indexname indexdef jansUmaRPT jansUmaRPT_pkey CREATE UNIQUE INDEX \"jansUmaRPT_pkey\" ON public.\"jansUmaRPT\" USING btree (doc_id)","title":"jansUmaRPT"},{"location":"admin/reference/database/pgsql-schema-indexes/#janspushapp","text":"tablename indexname indexdef jansPushApp jansPushApp_pkey CREATE UNIQUE INDEX \"jansPushApp_pkey\" ON public.\"jansPushApp\" USING btree (doc_id)","title":"jansPushApp"},{"location":"admin/reference/database/pgsql-schema-indexes/#jansscr","text":"tablename indexname indexdef jansScr jansScr_pkey CREATE UNIQUE INDEX \"jansScr_pkey\" ON public.\"jansScr\" USING btree (doc_id)","title":"jansScr"},{"location":"admin/reference/database/pgsql-schema-indexes/#janscustomscr","text":"tablename indexname indexdef jansCustomScr jansCustomScr_pkey CREATE UNIQUE INDEX \"jansCustomScr_pkey\" ON public.\"jansCustomScr\" USING btree (doc_id) jansCustomScr jansCustomScr_inum_idx CREATE INDEX \"jansCustomScr_inum_idx\" ON public.\"jansCustomScr\" USING btree (inum) jansCustomScr jansCustomScr_jansScrTyp_idx CREATE INDEX \"jansCustomScr_jansScrTyp_idx\" ON public.\"jansCustomScr\" USING btree (\"jansScrTyp\")","title":"jansCustomScr"},{"location":"admin/reference/database/pgsql-schema-indexes/#jansdeviceregistration","text":"tablename indexname indexdef jansDeviceRegistration jansDeviceRegistration_pkey CREATE UNIQUE INDEX \"jansDeviceRegistration_pkey\" ON public.\"jansDeviceRegistration\" USING btree (doc_id) jansDeviceRegistration jansDeviceRegistration_jansDeviceKeyHandle_idx CREATE INDEX \"jansDeviceRegistration_jansDeviceKeyHandle_idx\" ON public.\"jansDeviceRegistration\" USING btree (\"jansDeviceKeyHandle\") jansDeviceRegistration jansDeviceRegistration_jansApp_idx CREATE INDEX \"jansDeviceRegistration_jansApp_idx\" ON public.\"jansDeviceRegistration\" USING btree (\"jansApp\") jansDeviceRegistration jansDeviceRegistration_personInum_idx CREATE INDEX \"jansDeviceRegistration_personInum_idx\" ON public.\"jansDeviceRegistration\" USING btree (\"personInum\") jansDeviceRegistration jansDeviceRegistration_del_exp_idx CREATE INDEX \"jansDeviceRegistration_del_exp_idx\" ON public.\"jansDeviceRegistration\" USING btree (del, exp) jansDeviceRegistration jansDeviceRegistration_jansDeviceHashCode_idx CREATE INDEX \"jansDeviceRegistration_jansDeviceHashCode_idx\" ON public.\"jansDeviceRegistration\" USING btree (\"jansDeviceHashCode\") jansDeviceRegistration jansDeviceRegistration_jansStatus_idx CREATE INDEX \"jansDeviceRegistration_jansStatus_idx\" ON public.\"jansDeviceRegistration\" USING btree (\"jansStatus\") jansDeviceRegistration jansDeviceRegistration_creationDate_idx CREATE INDEX \"jansDeviceRegistration_creationDate_idx\" ON public.\"jansDeviceRegistration\" USING btree (\"creationDate\")","title":"jansDeviceRegistration"},{"location":"admin/reference/database/pgsql-schema-indexes/#jansu2freq","text":"tablename indexname indexdef jansU2fReq jansU2fReq_pkey CREATE UNIQUE INDEX \"jansU2fReq_pkey\" ON public.\"jansU2fReq\" USING btree (doc_id) jansU2fReq jansU2fReq_del_exp_idx CREATE INDEX \"jansU2fReq_del_exp_idx\" ON public.\"jansU2fReq\" USING btree (del, exp) jansU2fReq jansU2fReq_creationDate_idx CREATE INDEX \"jansU2fReq_creationDate_idx\" ON public.\"jansU2fReq\" USING btree (\"creationDate\")","title":"jansU2fReq"},{"location":"admin/reference/database/pgsql-schema-indexes/#jansmetric","text":"tablename indexname indexdef jansMetric jansMetric_pkey CREATE UNIQUE INDEX \"jansMetric_pkey\" ON public.\"jansMetric\" USING btree (doc_id) jansMetric jansMetric_jansEndDate_idx CREATE INDEX \"jansMetric_jansEndDate_idx\" ON public.\"jansMetric\" USING btree (\"jansEndDate\") jansMetric jansMetric_jansMetricTyp_idx CREATE INDEX \"jansMetric_jansMetricTyp_idx\" ON public.\"jansMetric\" USING btree (\"jansMetricTyp\") jansMetric jansMetric_jansStartDate_idx CREATE INDEX \"jansMetric_jansStartDate_idx\" ON public.\"jansMetric\" USING btree (\"jansStartDate\") jansMetric jansMetric_jansAppTyp_idx CREATE INDEX \"jansMetric_jansAppTyp_idx\" ON public.\"jansMetric\" USING btree (\"jansAppTyp\") jansMetric jansMetric_del_exp_idx CREATE INDEX \"jansMetric_del_exp_idx\" ON public.\"jansMetric\" USING btree (del, exp)","title":"jansMetric"},{"location":"admin/reference/database/pgsql-schema-indexes/#jansumapct","text":"tablename indexname indexdef jansUmaPCT jansUmaPCT_pkey CREATE UNIQUE INDEX \"jansUmaPCT_pkey\" ON public.\"jansUmaPCT\" USING btree (doc_id) jansUmaPCT jansUmaPCT_tknCde_idx CREATE INDEX \"jansUmaPCT_tknCde_idx\" ON public.\"jansUmaPCT\" USING btree (\"tknCde\") jansUmaPCT jansUmaPCT_del_exp_idx CREATE INDEX \"jansUmaPCT_del_exp_idx\" ON public.\"jansUmaPCT\" USING btree (del, exp)","title":"jansUmaPCT"},{"location":"admin/reference/database/pgsql-schema-indexes/#janscache","text":"tablename indexname indexdef jansCache jansCache_pkey CREATE UNIQUE INDEX \"jansCache_pkey\" ON public.\"jansCache\" USING btree (doc_id) jansCache jansCache_del_exp_idx CREATE INDEX \"jansCache_del_exp_idx\" ON public.\"jansCache\" USING btree (del, exp)","title":"jansCache"},{"location":"admin/reference/database/pgsql-schema-indexes/#jansfido2registrationentry","text":"tablename indexname indexdef jansFido2RegistrationEntry jansFido2RegistrationEntry_pkey CREATE UNIQUE INDEX \"jansFido2RegistrationEntry_pkey\" ON public.\"jansFido2RegistrationEntry\" USING btree (doc_id) jansFido2RegistrationEntry jansFido2RegistrationEntry_jansApp_idx CREATE INDEX \"jansFido2RegistrationEntry_jansApp_idx\" ON public.\"jansFido2RegistrationEntry\" USING btree (\"jansApp\") jansFido2RegistrationEntry jansFido2RegistrationEntry_jansCodeChallengeHash_idx CREATE INDEX \"jansFido2RegistrationEntry_jansCodeChallengeHash_idx\" ON public.\"jansFido2RegistrationEntry\" USING btree (\"jansCodeChallengeHash\") jansFido2RegistrationEntry jansFido2RegistrationEntry_jansPublicKeyIdHash_idx CREATE INDEX \"jansFido2RegistrationEntry_jansPublicKeyIdHash_idx\" ON public.\"jansFido2RegistrationEntry\" USING btree (\"jansPublicKeyIdHash\") jansFido2RegistrationEntry jansFido2RegistrationEntry_jansStatus_idx CREATE INDEX \"jansFido2RegistrationEntry_jansStatus_idx\" ON public.\"jansFido2RegistrationEntry\" USING btree (\"jansStatus\") jansFido2RegistrationEntry jansFido2RegistrationEntry_creationDate_idx CREATE INDEX \"jansFido2RegistrationEntry_creationDate_idx\" ON public.\"jansFido2RegistrationEntry\" USING btree (\"creationDate\") jansFido2RegistrationEntry jansFido2RegistrationEntry_jansCodeChallenge_idx CREATE INDEX \"jansFido2RegistrationEntry_jansCodeChallenge_idx\" ON public.\"jansFido2RegistrationEntry\" USING btree (\"jansCodeChallenge\") jansFido2RegistrationEntry jansFido2RegistrationEntry_jansPublicKeyId_idx CREATE INDEX \"jansFido2RegistrationEntry_jansPublicKeyId_idx\" ON public.\"jansFido2RegistrationEntry\" USING btree (\"jansPublicKeyId\") jansFido2RegistrationEntry jansFido2RegistrationEntry_personInum_idx CREATE INDEX \"jansFido2RegistrationEntry_personInum_idx\" ON public.\"jansFido2RegistrationEntry\" USING btree (\"personInum\") jansFido2RegistrationEntry jansFido2RegistrationEntry_del_exp_idx CREATE INDEX \"jansFido2RegistrationEntry_del_exp_idx\" ON public.\"jansFido2RegistrationEntry\" USING btree (del, exp)","title":"jansFido2RegistrationEntry"},{"location":"admin/reference/database/pgsql-schema-indexes/#janspushdevice","text":"tablename indexname indexdef jansPushDevice jansPushDevice_pkey CREATE UNIQUE INDEX \"jansPushDevice_pkey\" ON public.\"jansPushDevice\" USING btree (doc_id)","title":"jansPushDevice"},{"location":"admin/reference/database/pgsql-schema-indexes/#jansclntauthz","text":"tablename indexname indexdef jansClntAuthz jansClntAuthz_pkey CREATE UNIQUE INDEX \"jansClntAuthz_pkey\" ON public.\"jansClntAuthz\" USING btree (doc_id) jansClntAuthz jansClntAuthz_jsonb_path_query_array_idx CREATE INDEX \"jansClntAuthz_jsonb_path_query_array_idx\" ON public.\"jansClntAuthz\" USING gin (jsonb_path_query_array(\"jansClntId\", '$[*]'::jsonpath)) jansClntAuthz jansClntAuthz_del_exp_idx CREATE INDEX \"jansClntAuthz_del_exp_idx\" ON public.\"jansClntAuthz\" USING btree (del, exp) jansClntAuthz jansClntAuthz_jansUsrId_idx CREATE INDEX \"jansClntAuthz_jansUsrId_idx\" ON public.\"jansClntAuthz\" USING btree (\"jansUsrId\")","title":"jansClntAuthz"},{"location":"admin/reference/database/pgsql-schema-indexes/#janssectoridentifier","text":"tablename indexname indexdef jansSectorIdentifier jansSectorIdentifier_pkey CREATE UNIQUE INDEX \"jansSectorIdentifier_pkey\" ON public.\"jansSectorIdentifier\" USING btree (doc_id)","title":"jansSectorIdentifier"},{"location":"admin/reference/database/pgsql-schema-indexes/#jansfido2authnentry","text":"tablename indexname indexdef jansFido2AuthnEntry jansFido2AuthnEntry_pkey CREATE UNIQUE INDEX \"jansFido2AuthnEntry_pkey\" ON public.\"jansFido2AuthnEntry\" USING btree (doc_id) jansFido2AuthnEntry jansFido2AuthnEntry_jansApp_idx CREATE INDEX \"jansFido2AuthnEntry_jansApp_idx\" ON public.\"jansFido2AuthnEntry\" USING btree (\"jansApp\") jansFido2AuthnEntry jansFido2AuthnEntry_jansCodeChallengeHash_idx CREATE INDEX \"jansFido2AuthnEntry_jansCodeChallengeHash_idx\" ON public.\"jansFido2AuthnEntry\" USING btree (\"jansCodeChallengeHash\") jansFido2AuthnEntry jansFido2AuthnEntry_jansStatus_idx CREATE INDEX \"jansFido2AuthnEntry_jansStatus_idx\" ON public.\"jansFido2AuthnEntry\" USING btree (\"jansStatus\") jansFido2AuthnEntry jansFido2AuthnEntry_creationDate_idx CREATE INDEX \"jansFido2AuthnEntry_creationDate_idx\" ON public.\"jansFido2AuthnEntry\" USING btree (\"creationDate\") jansFido2AuthnEntry jansFido2AuthnEntry_jansCodeChallenge_idx CREATE INDEX \"jansFido2AuthnEntry_jansCodeChallenge_idx\" ON public.\"jansFido2AuthnEntry\" USING btree (\"jansCodeChallenge\") jansFido2AuthnEntry jansFido2AuthnEntry_personInum_idx CREATE INDEX \"jansFido2AuthnEntry_personInum_idx\" ON public.\"jansFido2AuthnEntry\" USING btree (\"personInum\") jansFido2AuthnEntry jansFido2AuthnEntry_del_exp_idx CREATE INDEX \"jansFido2AuthnEntry_del_exp_idx\" ON public.\"jansFido2AuthnEntry\" USING btree (del, exp)","title":"jansFido2AuthnEntry"},{"location":"admin/reference/database/pgsql-schema-indexes/#jansrp","text":"tablename indexname indexdef jansRp jansRp_pkey CREATE UNIQUE INDEX \"jansRp_pkey\" ON public.\"jansRp\" USING btree (doc_id)","title":"jansRp"},{"location":"admin/reference/database/pgsql-schema-indexes/#janscibareq","text":"tablename indexname indexdef jansCibaReq jansCibaReq_pkey CREATE UNIQUE INDEX \"jansCibaReq_pkey\" ON public.\"jansCibaReq\" USING btree (doc_id) jansCibaReq jansCibaReq_jansStatus_exp_idx CREATE INDEX \"jansCibaReq_jansStatus_exp_idx\" ON public.\"jansCibaReq\" USING btree (\"jansStatus\", exp)","title":"jansCibaReq"},{"location":"admin/reference/database/pgsql-schema-indexes/#jansstatentry","text":"tablename indexname indexdef jansStatEntry jansStatEntry_pkey CREATE UNIQUE INDEX \"jansStatEntry_pkey\" ON public.\"jansStatEntry\" USING btree (doc_id) jansStatEntry jansStatEntry_jansId_idx CREATE INDEX \"jansStatEntry_jansId_idx\" ON public.\"jansStatEntry\" USING btree (\"jansId\")","title":"jansStatEntry"},{"location":"admin/reference/database/pgsql-schema-indexes/#janspar","text":"tablename indexname indexdef jansPar jansPar_pkey CREATE UNIQUE INDEX \"jansPar_pkey\" ON public.\"jansPar\" USING btree (doc_id) jansPar jansPar_jansId_idx CREATE INDEX \"jansPar_jansId_idx\" ON public.\"jansPar\" USING btree (\"jansId\") jansPar jansPar_del_exp_idx CREATE INDEX \"jansPar_del_exp_idx\" ON public.\"jansPar\" USING btree (del, exp)","title":"jansPar"},{"location":"admin/reference/database/pgsql-schema-indexes/#jansinummap","text":"tablename indexname indexdef jansInumMap jansInumMap_pkey CREATE UNIQUE INDEX \"jansInumMap_pkey\" ON public.\"jansInumMap\" USING btree (doc_id) jansInumMap jansInumMap_jansStatus_idx CREATE INDEX \"jansInumMap_jansStatus_idx\" ON public.\"jansInumMap\" USING btree (\"jansStatus\") jansInumMap jansInumMap_inum_idx CREATE INDEX \"jansInumMap_inum_idx\" ON public.\"jansInumMap\" USING btree (inum)","title":"jansInumMap"},{"location":"admin/reference/database/pgsql-schema-indexes/#agmflowrun","text":"tablename indexname indexdef agmFlowRun agmFlowRun_pkey CREATE UNIQUE INDEX \"agmFlowRun_pkey\" ON public.\"agmFlowRun\" USING btree (doc_id)","title":"agmFlowRun"},{"location":"admin/reference/database/pgsql-schema-indexes/#agmflow","text":"tablename indexname indexdef agmFlow agmFlow_pkey CREATE UNIQUE INDEX \"agmFlow_pkey\" ON public.\"agmFlow\" USING btree (doc_id)","title":"agmFlow"},{"location":"admin/reference/database/pgsql-schema-indexes/#adsprjdeployment","text":"tablename indexname indexdef adsPrjDeployment adsPrjDeployment_pkey CREATE UNIQUE INDEX \"adsPrjDeployment_pkey\" ON public.\"adsPrjDeployment\" USING btree (doc_id)","title":"adsPrjDeployment"},{"location":"admin/reference/database/pgsql-schema-indexes/#jansdocument","text":"tablename indexname indexdef jansDocument jansDocument_pkey CREATE UNIQUE INDEX \"jansDocument_pkey\" ON public.\"jansDocument\" USING btree (doc_id)","title":"jansDocument"},{"location":"admin/reference/database/pgsql-schema/","tags":["administration","database","PostgreSQL","Indexes"],"text":"PostgreSQL Schema # Tables # Table names jansPairwiseIdentifier jansPerson jansOrganization jansSsa jansAppConf jansClnt jansScope jansUmaResource jansUmaResourcePermission jansGrant jansToken jansGrp jansAttr jansPassResetReq jansSessId jansUmaRPT jansPushApp jansScr jansCustomScr jansDeviceRegistration jansU2fReq jansMetric jansUmaPCT jansCache jansFido2RegistrationEntry jansPushDevice jansClntAuthz jansSectorIdentifier jansFido2AuthnEntry jansRp jansCibaReq jansStatEntry jansPar jansInumMap agmFlowRun agmFlow adsPrjDeployment jansDocument jansPairwiseIdentifier # Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier jansSectorIdentifier character varying 64 YES None jans Sector Identifier jansClntId jsonb None YES None jans Clnt id jansUsrId character varying 64 YES None jans user id jansPerson # Field Type Character Maximum Length Null Default Comment jansAssociatedClnt jsonb None YES None Associate the dn of an OAuth2 client with a person or UMA Resource Set. displayName character varying 128 YES None preferred name of a person to be used when displaying entries jansManagedOrganizations character varying 64 YES None Used to track with which organizations a person is associated jansOptOuts jsonb None YES None White pages attributes restricted by person in exclude profile management jansStatus character varying 16 YES None Status of the entry, used by many objectclasses inum character varying 64 YES None XRI i-number jansPersistentJWT jsonb None YES None jans Persistent JWT jansCreationTimestamp timestamp without time zone None YES None Registration time jansOTPCache jsonb None YES None Stores a used OTP to prevent a hacker from using it again. Complementary to jansExtUid attribute jansLastLogonTime timestamp without time zone None YES None Last logon time jansPassExpDate timestamp without time zone None YES None Pass Exp date, represented as an ISO 8601 (YYYY-MM-DD) format persistentId character varying 64 YES None PersistentId middleName character varying 64 YES None Middle name(s) nickname character varying 64 YES None Casual name of the End-Usr jansPrefUsrName character varying 64 YES None Shorthand Name profile character varying 64 YES None Profile page URL of the person picture text None YES None Profile picture URL of the person website character varying 64 YES None Web page or blog URL of the person emailVerified boolean None YES None True if the e-mail address of the person has been verified; otherwise false gender character varying 32 YES None Gender of the person either female or male birthdate timestamp without time zone None YES None Birthday of the person, represented as an ISO 8601:2004 [ISO8601-2004] YYYY-MM-DD format zoneinfo character varying 64 YES None Time zone database representing the End-Usrs time zone. For example, Europe/Paris or America/Los_Angeles locale character varying 64 YES None Locale of the person, represented as a BCP47 [RFC5646] language tag phoneNumberVerified boolean None YES None True if the phone number of the person has been verified, otherwise false address text None YES None OpenID Connect formatted JSON object representing the address of the person updatedAt timestamp without time zone None YES None Time the information of the person was last updated. Seconds from 1970-01-01T0:0:0Z preferredLanguage character varying 64 YES None preferred written or spoken language for a person role jsonb None YES None Role secretAnswer text None YES None Secret Answer secretQuestion text None YES None Secret Question transientId character varying 64 YES None TransientId jansCountInvalidLogin character varying 64 YES None Invalid login attempts count jansEnrollmentCode character varying 64 YES None jansEnrollmentCode jansIMAPData character varying 64 YES None This data has information about your imap connection jansPPID jsonb None YES None Persistent Pairwise ID for OpenID Connect jansGuid character varying 64 YES None A random string to mark temporary tokens jansPreferredMethod character varying 64 YES None Casa - Preferred method to use for user authentication jansOTPDevices character varying 512 YES None Casa - Json representation of OTP devices. Complementary to jansExtUid attribute jansMobileDevices character varying 512 YES None Casa - Json representation of mobile devices. Complementary to mobile attribute jansTrustedDevices text None YES None Casa - Devices with which strong authentication may be skipped jansStrongAuthPolicy character varying 64 YES None Casa - 2FA Enforcement Policy for User jansUnlinkedExternalUids character varying 64 YES None Casa - List of unlinked social accounts (ie disabled jansExtUids) jansBackchannelDeviceRegistrationTkn character varying 64 YES None jans Backchannel Device Registration Tkn jansBackchannelUsrCode character varying 64 YES None jans Backchannel Usr Code carLicense character varying 64 YES None vehicle license or registration plate departmentNumber character varying 64 YES None identifies a department within an organization employeeType character varying 64 YES None type of employment for a person employeeNumber character varying 64 YES None numerically identifies an employee within an organization jansAdminUIRole jsonb None YES None jansAdminUIRole jansOrganization # Field Type Character Maximum Length Null Default Comment displayName character varying 128 YES None preferred name of a person to be used when displaying entries jansCustomMessage character varying 128 YES None exclude custom welcome message jansFaviconImage character varying 64 YES None TODO - Stores URL of favicon jansLogoImage character varying 64 YES None Logo used by exclude for default look and feel. jansManager character varying 64 YES None Used to specify if a person has the manager role jansManagerGrp text None YES None Used in organizatoin entry to specifies the dn of the group that has admin priviledges in exclude. jansOrgShortName character varying 64 YES None Short description, as few letters as possible, no spaces. jansThemeColor character varying 64 YES None exclude login page configuration inum character varying 64 YES None XRI i-number jansCreationTimestamp timestamp without time zone None YES None Registration time jansRegistrationConf character varying 64 YES None Registration Conf jansLogoPath character varying 64 YES None jansLogoPath jansStatus character varying 16 YES None Status of the entry, used by many objectclasses jansFaviconPath character varying 64 YES None jansFaviconPath jansSsa # Field Type Character Maximum Length Null Default Comment inum character varying 64 YES None XRI i-number jansAttrs text None YES None Attrs exp timestamp without time zone None YES None jans Exp del boolean None YES None del jansState character varying 64 YES None jansState creatorId character varying 64 YES None Creator Id creatorTyp character varying 64 YES None Creator type creationDate timestamp without time zone None YES None Creation Date used for password reset requests jansAppConf # Field Type Character Maximum Length Null Default Comment displayName character varying 128 YES None preferred name of a person to be used when displaying entries jansHostname character varying 64 YES None The hostname of the Jans Server instance jansLastUpd timestamp without time zone None YES None Monitors last time the server was able to connect to the monitoring system. jansManager character varying 64 YES None Used to specify if a person has the manager role jansOrgProfileMgt boolean None YES None enable or disable profile management feature in exclude jansScimEnabled boolean None YES None exclude SCIM feature - enabled or disabled jansSmtpConf jsonb None YES None SMTP configuration jansSslExpiry character varying 64 YES None SAML Trust Relationship configuration jansStatus character varying 16 YES None Status of the entry, used by many objectclasses jansUrl character varying 64 YES None Jans instance URL inum character varying 64 YES None XRI i-number jansDbAuth jsonb None YES None Custom IDP authentication configuration jansLogViewerConfig character varying 64 YES None Log viewer configuration jansLogConfigLocation character varying 64 YES None Path to external log4j2.xml jansCacheConf text None YES None Cache configuration jansDocStoreConf text None YES None jansDocStoreConf jansConfDyn text None YES None jans Dyn Conf jansConfErrors text None YES None jans Errors Conf jansConfStatic text None YES None jans Static Conf jansConfWebKeys text None YES None jans Web Keys Conf jansWebKeysSettings character varying 64 YES None jans Web Keys Conf jansConfApp text None YES None jans App Conf jansRevision integer None YES None Revision jansClnt # Field Type Character Maximum Length Null Default Comment jansGrp character varying 64 YES None Group displayName character varying 128 YES None preferred name of a person to be used when displaying entries displayNameLocalized jsonb None YES None jans Display Name Localized inum character varying 64 YES None XRI i-number jansAppTyp character varying 64 YES None jans App Typ jansClntIdIssuedAt timestamp without time zone None YES None jans Clnt Issued At jansClntSecret character varying 64 YES None jans Clnt Secret jansClntSecretExpAt timestamp without time zone None YES None Date client expires exp timestamp without time zone None YES None jans Exp del boolean None YES None del jansClntURI text None YES None jans Clnt URI jansClntURILocalized jsonb None YES None jans Clnt URI localized jansContact jsonb None YES None jans Contact jansDefAcrValues jsonb None YES None jans Def Acr Values jansDefMaxAge integer None YES None jans Def Max Age jansGrantTyp jsonb None YES None jans Grant Typ jansIdTknEncRespAlg character varying 64 YES None jans ID Tkn Enc Resp Alg jansIdTknEncRespEnc character varying 64 YES None jans ID Tkn Enc Resp Enc jansIdTknSignedRespAlg character varying 64 YES None jans ID Tkn Signed Resp Alg jansInitiateLoginURI text None YES None jans Initiate Login URI jansJwksURI text None YES None jans JWKs URI jansJwks text None YES None jans JWKs jansLogoURI text None YES None jans Logo URI jansLogoURILocalized jsonb None YES None jans Logo URI localized jansPolicyURI text None YES None jans Policy URI jansPolicyURILocalized jsonb None YES None jans Policy URI localized jansPostLogoutRedirectURI jsonb None YES None jans Post Logout Redirect URI jansRedirectURI jsonb None YES None jans Redirect URI jansRegistrationAccessTkn character varying 64 YES None jans Registration Access Tkn jansReqObjSigAlg character varying 64 YES None jans Req Obj Sig Alg jansReqObjEncAlg character varying 64 YES None jans Req Obj Enc Alg jansReqObjEncEnc character varying 64 YES None jans Req Obj Enc Enc jansReqURI jsonb None YES None jans Req URI jansRespTyp jsonb None YES None jans Resp Typ jansScope jsonb None YES None jans Attr Scope jansClaim jsonb None YES None jans Attr Claim jansSectorIdentifierURI text None YES None jans Sector Identifier URI jansSignedRespAlg character varying 64 YES None jans Signed Resp Alg jansSubjectTyp character varying 64 YES None jans Subject Typ jansTknEndpointAuthMethod character varying 64 YES None jans Tkn Endpoint Auth Method jansTknEndpointAuthSigAlg character varying 64 YES None jans Tkn Endpoint Auth Sig Alg jansTosURI text None YES None jans TOS URI jansTosURILocalized jsonb None YES None jans Tos URI localized jansTrustedClnt boolean None YES None jans Trusted Clnt jansUsrInfEncRespAlg character varying 64 YES None jans Usr Inf Enc Resp Alg jansUsrInfEncRespEnc character varying 64 YES None jans Usr Inf Enc Resp Enc jansExtraConf character varying 64 YES None jans additional configuration jansClaimRedirectURI jsonb None YES None Claim Redirect URI jansLastAccessTime timestamp without time zone None YES None Last access time jansLastLogonTime timestamp without time zone None YES None Last logon time jansPersistClntAuthzs boolean None YES None jans Persist Clnt Authzs jansInclClaimsInIdTkn boolean None YES None jans Incl Claims In Id Tkn jansRefreshTknLife integer None YES None Life of refresh token jansDisabled boolean None YES None Status of client jansLogoutURI jsonb None YES None jans Policy URI jansLogoutSessRequired boolean None YES None jans Policy URI jansdId character varying 64 YES None jansd Id jansAuthorizedOrigins jsonb None YES None jans Authorized Origins tknBndCnf text None YES None jansauth - Tkn Binding Id Hash jansAccessTknAsJwt boolean None YES None jansauth - indicator whether to return access token as JWT jansAccessTknSigAlg character varying 64 YES None jansauth - access token signing algorithm jansAccessTknLife integer None YES None Life of access token jansSoftId character varying 64 YES None Soft Identifier jansSoftStatement text None YES None Soft Statement jansRptAsJwt boolean None YES None jansRptAsJwt jansAttrs text None YES None Attrs jansBackchannelTknDeliveryMode character varying 64 YES None jans Backchannel Tkn Delivery Mode jansBackchannelClntNotificationEndpoint character varying 64 YES None jans Backchannel Clnt Notification Endpoint jansBackchannelAuthnReqSigAlg character varying 64 YES None jans Backchannel Authn Req Sig Alg jansBackchannelUsrCodeParameter boolean None YES None jans Backchannel Usr Code Parameter jansScope # Field Type Character Maximum Length Null Default Comment jansDefScope boolean None YES None Track the default scope for an custom OAuth2 Scope. displayName character varying 128 YES None preferred name of a person to be used when displaying entries inum character varying 64 YES None XRI i-number jansScopeTyp character varying 64 YES None OX Attr Scope type creatorId character varying 64 YES None Creator Id creatorTyp character varying 64 YES None Creator type creatorAttrs character varying 64 YES None Creator Attrs creationDate timestamp without time zone None YES None Creation Date used for password reset requests jansClaim jsonb None YES None jans Attr Claim jansScrDn jsonb None YES None Script object DN jansGrpClaims boolean None YES None jans Grp Attr Claims (true or false) jansId character varying 128 YES None Identifier jansIconUrl character varying 64 YES None jans icon url jansUmaPolicyScrDn text None YES None OX policy script Dn jansAttrs text None YES None Attrs exp timestamp without time zone None YES None jans Exp del boolean None YES None del jansUmaResource # Field Type Character Maximum Length Null Default Comment displayName character varying 128 YES None preferred name of a person to be used when displaying entries inum character varying 64 YES None XRI i-number jansAssociatedClnt jsonb None YES None Associate the dn of an OAuth2 client with a person or UMA Resource Set. jansUmaScope character varying 768 YES None URI reference of scope descriptor jansFaviconImage character varying 64 YES None TODO - Stores URL of favicon jansGrp character varying 64 YES None Group jansId character varying 128 YES None Identifier jansResource text None YES None Host path jansRevision integer None YES None Revision jansTyp character varying 64 YES None jans type jansScopeExpression text None YES None Scope expression iat timestamp without time zone None YES None jans Creation exp timestamp without time zone None YES None jans Exp del boolean None YES None del jansUmaResourcePermission # Field Type Character Maximum Length Null Default Comment exp timestamp without time zone None YES None jans Exp del boolean None YES None del jansUmaScope character varying 768 YES None URI reference of scope descriptor jansConfCode character varying 64 YES None jans configuration code jansResourceSetId character varying 64 YES None jans resource set id jansAttrs text None YES None Attrs jansTicket character varying 64 YES None jans ticket jansStatus character varying 16 YES None Status of the entry, used by many objectclasses jansGrant # Field Type Character Maximum Length Null Default Comment grtId character varying 64 YES None jans grant id iat timestamp without time zone None YES None jans Creation jansToken # Field Type Character Maximum Length Null Default Comment authnTime timestamp without time zone None YES None jans Authn Time authzCode character varying 64 YES None jans authorization code iat timestamp without time zone None YES None jans Creation exp timestamp without time zone None YES None jans Exp del boolean None YES None del grtId character varying 64 YES None jans grant id grtTyp character varying 64 YES None jans Grant Typ jwtReq text None YES None jans JWT Req nnc text None YES None jans nonce scp text None YES None jans Attr Scope tknCde character varying 80 YES None jans Tkn Code tknTyp character varying 32 YES None jans Tkn Typ usrId character varying 64 YES None jans user id jansUsrDN character varying 128 YES None jans Usr DN clnId character varying 64 YES None jans Clnt id uuid character varying 64 YES None Unique identifier chlng character varying 64 YES None OX PKCE code challenge chlngMth character varying 64 YES None OX PKCE code challenge method clms character varying 64 YES None jans Claims ssnId character varying 64 YES None jans Sess DN attr text None YES None Attrs tknBndCnf text None YES None jansauth - Tkn Binding Id Hash dpop character varying 64 YES None DPoP Proof jansGrp # Field Type Character Maximum Length Null Default Comment displayName character varying 128 YES None preferred name of a person to be used when displaying entries jansStatus character varying 16 YES None Status of the entry, used by many objectclasses inum character varying 64 YES None XRI i-number jansAttr # Field Type Character Maximum Length Null Default Comment displayName character varying 128 YES None preferred name of a person to be used when displaying entries jansAttrEditTyp jsonb None YES None Specify in exclude who can update an attribute, admin or user jansAttrName character varying 64 YES None Specify an identifier for an attribute. May be multi-value where an attribute has two names, like givenName and first-name. jansAttrOrigin character varying 64 YES None Specify the person objectclass associated with the attribute, used for display purposes in exclude. jansAttrSystemEditTyp character varying 64 YES None TODO - still required? jansAttrTyp character varying 64 YES None Data type of attribute. Values can be string, photo, numeric, date jansClaimName character varying 64 YES None Used by jans in conjunction with jansttributeName to map claims to attributes in LDAP. jansAttrUsgTyp character varying 64 YES None TODO - Usg? Value can be OpenID jansAttrViewTyp jsonb None YES None Specify in exclude who can view an attribute, admin or user jansSAML1URI character varying 64 YES None SAML 1 uri of attribute jansSAML2URI character varying 64 YES None SAML 2 uri of attribute jansStatus character varying 16 YES None Status of the entry, used by many objectclasses inum character varying 64 YES None XRI i-number jansNameIdTyp character varying 64 YES None NameId Typ jansSourceAttr character varying 64 YES None Source Attr for this Attr jansRegExp character varying 64 YES None Regular expression used to validate attribute data jansTooltip character varying 64 YES None Custom tooltip to be shown on the UI jansValidation text None YES None This data has information about attribute Validation jansPassResetReq # Field Type Character Maximum Length Null Default Comment creationDate timestamp without time zone None YES None Creation Date used for password reset requests jansGuid character varying 64 YES None A random string to mark temporary tokens personInum character varying 64 YES None Inum of a person jansSessId # Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier sid character varying 64 YES None Sess Identifier creationDate timestamp without time zone None YES None Creation Date used for password reset requests exp timestamp without time zone None YES None jans Exp del boolean None YES None del jansLastAccessTime timestamp without time zone None YES None Last access time jansUsrDN character varying 128 YES None jans Usr DN authnTime timestamp without time zone None YES None jans Authn Time jansState character varying 64 YES None jansState jansSessState text None YES None jans Sess State jansPermissionGranted boolean None YES None jans Permission Granted jansAsJwt boolean None YES None Boolean field to indicate whether object is used as JWT jansJwt text None YES None JWT representation of the object or otherwise jwt associated with the object jansPermissionGrantedMap text None YES None jans Permission Granted Map jansInvolvedClnts text None YES None Involved clients deviceSecret character varying 64 YES None deviceSecret jansSessAttr text None YES None jansSessAttr jansUmaRPT # Field Type Character Maximum Length Null Default Comment authnTime timestamp without time zone None YES None jans Authn Time clnId character varying 64 YES None jans Clnt id iat timestamp without time zone None YES None jans Creation exp timestamp without time zone None YES None jans Exp del boolean None YES None del tknCde character varying 80 YES None jans Tkn Code usrId character varying 64 YES None jans user id ssnId character varying 64 YES None jans Sess DN jansUmaPermission jsonb None YES None jans uma permission uuid character varying 64 YES None Unique identifier dpop character varying 64 YES None DPoP Proof authzCode character varying 64 YES None jans authorization code grtId character varying 64 YES None jans grant id grtTyp character varying 64 YES None jans Grant Typ jwtReq text None YES None jans JWT Req nnc text None YES None jans nonce scp text None YES None jans Attr Scope tknTyp character varying 32 YES None jans Tkn Typ jansUsrDN character varying 128 YES None jans Usr DN chlng character varying 64 YES None OX PKCE code challenge chlngMth character varying 64 YES None OX PKCE code challenge method clms character varying 64 YES None jans Claims attr text None YES None Attrs tknBndCnf text None YES None jansauth - Tkn Binding Id Hash jansPushApp # Field Type Character Maximum Length Null Default Comment displayName character varying 128 YES None preferred name of a person to be used when displaying entries jansId character varying 128 YES None Identifier jansName character varying 64 YES None Name jansPushAppConf character varying 64 YES None jansPush application configuration jansScr # Field Type Character Maximum Length Null Default Comment inum character varying 64 YES None XRI i-number jansScr text None YES None Attr that contains script (python, java script) jansScrTyp character varying 64 YES None Attr that contains script type (e.g. python, java script) jansCustomScr # Field Type Character Maximum Length Null Default Comment inum character varying 64 YES None XRI i-number displayName character varying 128 YES None preferred name of a person to be used when displaying entries jansScr text None YES None Attr that contains script (python, java script) jansScrTyp character varying 64 YES None Attr that contains script type (e.g. python, java script) jansProgLng character varying 64 YES None programming language jansModuleProperty jsonb None YES None Module property jansConfProperty jsonb None YES None Conf property jansLevel integer None YES None Level jansRevision integer None YES None Revision jansEnabled boolean None YES None Status of the entry, used by many objectclasses jansScrError text None YES None Attr that contains first error which application get during it execution jansAlias jsonb None YES None jansAlias jansDeviceRegistration # Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier displayName character varying 128 YES None preferred name of a person to be used when displaying entries jansDeviceKeyHandle character varying 128 YES None jansDeviceKeyHandle jansDeviceHashCode integer None YES None jansDeviceHashCode jansApp character varying 96 YES None jansApp jansDeviceRegistrationConf text None YES None jansDeviceRegistrationConf jansDeviceNotificationConf character varying 64 YES None Extended push notification configuration jansNickName character varying 64 YES None jansNickName jansDeviceData text None YES None jansDeviceData jansCounter integer None YES None jansCounter jansStatus character varying 16 YES None Status of the entry, used by many objectclasses del boolean None YES None del exp timestamp without time zone None YES None jans Exp personInum character varying 64 YES None Inum of a person creationDate timestamp without time zone None YES None Creation Date used for password reset requests jansLastAccessTime timestamp without time zone None YES None Last access time jansU2fReq # Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier jansReqId character varying 64 YES None jansReqId jansReq text None YES None jansReq jansSessStateId character varying 64 YES None jansSessStateId del boolean None YES None del exp timestamp without time zone None YES None jans Exp personInum character varying 64 YES None Inum of a person creationDate timestamp without time zone None YES None Creation Date used for password reset requests jansMetric # Field Type Character Maximum Length Null Default Comment jansStartDate timestamp without time zone None YES None Start date jansEndDate timestamp without time zone None YES None End date jansAppTyp character varying 64 YES None jans App Typ jansMetricTyp character varying 64 YES None Metric type creationDate timestamp without time zone None YES None Creation Date used for password reset requests del boolean None YES None del exp timestamp without time zone None YES None jans Exp jansData text None YES None OX data jansHost character varying 64 YES None jans host jansUmaPCT # Field Type Character Maximum Length Null Default Comment clnId character varying 64 YES None jans Clnt id iat timestamp without time zone None YES None jans Creation exp timestamp without time zone None YES None jans Exp del boolean None YES None del tknCde character varying 80 YES None jans Tkn Code ssnId character varying 64 YES None jans Sess DN jansClaimValues character varying 64 YES None Claim Values dpop character varying 64 YES None DPoP Proof authnTime timestamp without time zone None YES None jans Authn Time authzCode character varying 64 YES None jans authorization code grtId character varying 64 YES None jans grant id grtTyp character varying 64 YES None jans Grant Typ jwtReq text None YES None jans JWT Req nnc text None YES None jans nonce scp text None YES None jans Attr Scope tknTyp character varying 32 YES None jans Tkn Typ usrId character varying 64 YES None jans user id jansUsrDN character varying 128 YES None jans Usr DN uuid character varying 64 YES None Unique identifier chlng character varying 64 YES None OX PKCE code challenge chlngMth character varying 64 YES None OX PKCE code challenge method clms character varying 64 YES None jans Claims attr text None YES None Attrs tknBndCnf text None YES None jansauth - Tkn Binding Id Hash jansCache # Field Type Character Maximum Length Null Default Comment uuid character varying 64 YES None Unique identifier iat timestamp without time zone None YES None jans Creation exp timestamp without time zone None YES None jans Exp del boolean None YES None del dat text None YES None OX data jansFido2RegistrationEntry # Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier creationDate timestamp without time zone None YES None Creation Date used for password reset requests displayName character varying 128 YES None preferred name of a person to be used when displaying entries jansApp character varying 96 YES None jansApp jansSessStateId character varying 64 YES None jansSessStateId jansCodeChallenge character varying 64 YES None OX PKCE code challenge jansCodeChallengeHash integer None YES None OX code challenge hash jansPublicKeyId character varying 96 YES None jansPublicKeyId jansPublicKeyIdHash integer None YES None jansPublicKeyIdHash personInum character varying 64 YES None Inum of a person jansRegistrationData text None YES None jansRegistrationData jansDeviceData text None YES None jansDeviceData jansDeviceNotificationConf character varying 64 YES None Extended push notification configuration jansCounter integer None YES None jansCounter jansStatus character varying 16 YES None Status of the entry, used by many objectclasses exp timestamp without time zone None YES None jans Exp del boolean None YES None del jansPushDevice # Field Type Character Maximum Length Null Default Comment jansUsrId character varying 64 YES None jans user id jansId character varying 128 YES None Identifier jansPushApp text None YES None jansPush application DN jansPushDeviceConf character varying 64 YES None jansPush device configuration jansTyp character varying 64 YES None jans type jansClntAuthz # Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier jansClntId jsonb None YES None jans Clnt id jansUsrId character varying 64 YES None jans user id exp timestamp without time zone None YES None jans Exp del boolean None YES None del jansScope jsonb None YES None jans Attr Scope jansSectorIdentifier # Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier jansRedirectURI jsonb None YES None jans Redirect URI jansClntId jsonb None YES None jans Clnt id jansFido2AuthnEntry # Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier creationDate timestamp without time zone None YES None Creation Date used for password reset requests jansApp character varying 96 YES None jansApp jansSessStateId character varying 64 YES None jansSessStateId jansCodeChallenge character varying 64 YES None OX PKCE code challenge jansCodeChallengeHash integer None YES None OX code challenge hash personInum character varying 64 YES None Inum of a person jansAuthData text None YES None jansAuthData jansStatus character varying 16 YES None Status of the entry, used by many objectclasses exp timestamp without time zone None YES None jans Exp del boolean None YES None del jansRp # Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier dat text None YES None OX data jansCibaReq # Field Type Character Maximum Length Null Default Comment authReqId character varying 64 YES None Authn request id clnId character varying 64 YES None jans Clnt id usrId character varying 64 YES None jans user id creationDate timestamp without time zone None YES None Creation Date used for password reset requests exp timestamp without time zone None YES None jans Exp jansStatus character varying 16 YES None Status of the entry, used by many objectclasses jansStatEntry # Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier dat text None YES None OX data jansData text None YES None OX data attr text None YES None Attrs jansPar # Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier jansAttrs text None YES None Attrs exp timestamp without time zone None YES None jans Exp del boolean None YES None del jansInumMap # Field Type Character Maximum Length Null Default Comment jansStatus character varying 16 YES None Status of the entry, used by many objectclasses inum character varying 64 YES None XRI i-number jansPrimaryKeyAttrName character varying 64 YES None Primary Key Attribute Name jansPrimaryKeyValue character varying 64 YES None Primary Key Value jansSecondaryKeyAttrName character varying 64 YES None Secondary Key Attribute Name jansSecondaryKeyValue character varying 64 YES None Secondary Key Value jansTertiaryKeyAttrName character varying 64 YES None Tertiary Key Attribute Name jansTertiaryKeyValue character varying 64 YES None Tertiary Key Value agmFlowRun # Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier agFlowSt text None YES None Details of a running agama flow instance agFlowEncCont text None YES None Continuation associated to a running agama flow instance jansCustomMessage character varying 128 YES None exclude custom welcome message exp timestamp without time zone None YES None jans Exp agmFlow # Field Type Character Maximum Length Null Default Comment agFlowQname character varying 64 YES None Full name of an agama flow agFlowMeta text None YES None Metadata of an agama flow jansScr text None YES None Attr that contains script (python, java script) jansEnabled boolean None YES None Status of the entry, used by many objectclasses jansScrError text None YES None Attr that contains first error which application get during it execution agFlowTrans text None YES None Transpiled code of an agama flow jansRevision integer None YES None Revision jansCustomMessage character varying 128 YES None exclude custom welcome message adsPrjDeployment # Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier jansStartDate timestamp without time zone None YES None Start date jansEndDate timestamp without time zone None YES None End date adsPrjAssets text None YES None Assets of an ADS project adsPrjDeplDetails text None YES None Misc details associated to an ADS project jansDocument # Field Type Character Maximum Length Null Default Comment inum character varying 64 YES None XRI i-number displayName character varying 128 YES None preferred name of a person to be used when displaying entries document character varying 64 YES None Save Document in DB creationDate timestamp without time zone None YES None Creation Date used for password reset requests jansModuleProperty jsonb None YES None Module property jansLevel integer None YES None Level jansRevision integer None YES None Revision jansEnabled boolean None YES None Status of the entry, used by many objectclasses jansAlias jsonb None YES None jansAlias","title":"PostgreSQL Schema"},{"location":"admin/reference/database/pgsql-schema/#postgresql-schema","text":"","title":"PostgreSQL Schema"},{"location":"admin/reference/database/pgsql-schema/#tables","text":"Table names jansPairwiseIdentifier jansPerson jansOrganization jansSsa jansAppConf jansClnt jansScope jansUmaResource jansUmaResourcePermission jansGrant jansToken jansGrp jansAttr jansPassResetReq jansSessId jansUmaRPT jansPushApp jansScr jansCustomScr jansDeviceRegistration jansU2fReq jansMetric jansUmaPCT jansCache jansFido2RegistrationEntry jansPushDevice jansClntAuthz jansSectorIdentifier jansFido2AuthnEntry jansRp jansCibaReq jansStatEntry jansPar jansInumMap agmFlowRun agmFlow adsPrjDeployment jansDocument","title":"Tables"},{"location":"admin/reference/database/pgsql-schema/#janspairwiseidentifier","text":"Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier jansSectorIdentifier character varying 64 YES None jans Sector Identifier jansClntId jsonb None YES None jans Clnt id jansUsrId character varying 64 YES None jans user id","title":"jansPairwiseIdentifier"},{"location":"admin/reference/database/pgsql-schema/#jansperson","text":"Field Type Character Maximum Length Null Default Comment jansAssociatedClnt jsonb None YES None Associate the dn of an OAuth2 client with a person or UMA Resource Set. displayName character varying 128 YES None preferred name of a person to be used when displaying entries jansManagedOrganizations character varying 64 YES None Used to track with which organizations a person is associated jansOptOuts jsonb None YES None White pages attributes restricted by person in exclude profile management jansStatus character varying 16 YES None Status of the entry, used by many objectclasses inum character varying 64 YES None XRI i-number jansPersistentJWT jsonb None YES None jans Persistent JWT jansCreationTimestamp timestamp without time zone None YES None Registration time jansOTPCache jsonb None YES None Stores a used OTP to prevent a hacker from using it again. Complementary to jansExtUid attribute jansLastLogonTime timestamp without time zone None YES None Last logon time jansPassExpDate timestamp without time zone None YES None Pass Exp date, represented as an ISO 8601 (YYYY-MM-DD) format persistentId character varying 64 YES None PersistentId middleName character varying 64 YES None Middle name(s) nickname character varying 64 YES None Casual name of the End-Usr jansPrefUsrName character varying 64 YES None Shorthand Name profile character varying 64 YES None Profile page URL of the person picture text None YES None Profile picture URL of the person website character varying 64 YES None Web page or blog URL of the person emailVerified boolean None YES None True if the e-mail address of the person has been verified; otherwise false gender character varying 32 YES None Gender of the person either female or male birthdate timestamp without time zone None YES None Birthday of the person, represented as an ISO 8601:2004 [ISO8601-2004] YYYY-MM-DD format zoneinfo character varying 64 YES None Time zone database representing the End-Usrs time zone. For example, Europe/Paris or America/Los_Angeles locale character varying 64 YES None Locale of the person, represented as a BCP47 [RFC5646] language tag phoneNumberVerified boolean None YES None True if the phone number of the person has been verified, otherwise false address text None YES None OpenID Connect formatted JSON object representing the address of the person updatedAt timestamp without time zone None YES None Time the information of the person was last updated. Seconds from 1970-01-01T0:0:0Z preferredLanguage character varying 64 YES None preferred written or spoken language for a person role jsonb None YES None Role secretAnswer text None YES None Secret Answer secretQuestion text None YES None Secret Question transientId character varying 64 YES None TransientId jansCountInvalidLogin character varying 64 YES None Invalid login attempts count jansEnrollmentCode character varying 64 YES None jansEnrollmentCode jansIMAPData character varying 64 YES None This data has information about your imap connection jansPPID jsonb None YES None Persistent Pairwise ID for OpenID Connect jansGuid character varying 64 YES None A random string to mark temporary tokens jansPreferredMethod character varying 64 YES None Casa - Preferred method to use for user authentication jansOTPDevices character varying 512 YES None Casa - Json representation of OTP devices. Complementary to jansExtUid attribute jansMobileDevices character varying 512 YES None Casa - Json representation of mobile devices. Complementary to mobile attribute jansTrustedDevices text None YES None Casa - Devices with which strong authentication may be skipped jansStrongAuthPolicy character varying 64 YES None Casa - 2FA Enforcement Policy for User jansUnlinkedExternalUids character varying 64 YES None Casa - List of unlinked social accounts (ie disabled jansExtUids) jansBackchannelDeviceRegistrationTkn character varying 64 YES None jans Backchannel Device Registration Tkn jansBackchannelUsrCode character varying 64 YES None jans Backchannel Usr Code carLicense character varying 64 YES None vehicle license or registration plate departmentNumber character varying 64 YES None identifies a department within an organization employeeType character varying 64 YES None type of employment for a person employeeNumber character varying 64 YES None numerically identifies an employee within an organization jansAdminUIRole jsonb None YES None jansAdminUIRole","title":"jansPerson"},{"location":"admin/reference/database/pgsql-schema/#jansorganization","text":"Field Type Character Maximum Length Null Default Comment displayName character varying 128 YES None preferred name of a person to be used when displaying entries jansCustomMessage character varying 128 YES None exclude custom welcome message jansFaviconImage character varying 64 YES None TODO - Stores URL of favicon jansLogoImage character varying 64 YES None Logo used by exclude for default look and feel. jansManager character varying 64 YES None Used to specify if a person has the manager role jansManagerGrp text None YES None Used in organizatoin entry to specifies the dn of the group that has admin priviledges in exclude. jansOrgShortName character varying 64 YES None Short description, as few letters as possible, no spaces. jansThemeColor character varying 64 YES None exclude login page configuration inum character varying 64 YES None XRI i-number jansCreationTimestamp timestamp without time zone None YES None Registration time jansRegistrationConf character varying 64 YES None Registration Conf jansLogoPath character varying 64 YES None jansLogoPath jansStatus character varying 16 YES None Status of the entry, used by many objectclasses jansFaviconPath character varying 64 YES None jansFaviconPath","title":"jansOrganization"},{"location":"admin/reference/database/pgsql-schema/#jansssa","text":"Field Type Character Maximum Length Null Default Comment inum character varying 64 YES None XRI i-number jansAttrs text None YES None Attrs exp timestamp without time zone None YES None jans Exp del boolean None YES None del jansState character varying 64 YES None jansState creatorId character varying 64 YES None Creator Id creatorTyp character varying 64 YES None Creator type creationDate timestamp without time zone None YES None Creation Date used for password reset requests","title":"jansSsa"},{"location":"admin/reference/database/pgsql-schema/#jansappconf","text":"Field Type Character Maximum Length Null Default Comment displayName character varying 128 YES None preferred name of a person to be used when displaying entries jansHostname character varying 64 YES None The hostname of the Jans Server instance jansLastUpd timestamp without time zone None YES None Monitors last time the server was able to connect to the monitoring system. jansManager character varying 64 YES None Used to specify if a person has the manager role jansOrgProfileMgt boolean None YES None enable or disable profile management feature in exclude jansScimEnabled boolean None YES None exclude SCIM feature - enabled or disabled jansSmtpConf jsonb None YES None SMTP configuration jansSslExpiry character varying 64 YES None SAML Trust Relationship configuration jansStatus character varying 16 YES None Status of the entry, used by many objectclasses jansUrl character varying 64 YES None Jans instance URL inum character varying 64 YES None XRI i-number jansDbAuth jsonb None YES None Custom IDP authentication configuration jansLogViewerConfig character varying 64 YES None Log viewer configuration jansLogConfigLocation character varying 64 YES None Path to external log4j2.xml jansCacheConf text None YES None Cache configuration jansDocStoreConf text None YES None jansDocStoreConf jansConfDyn text None YES None jans Dyn Conf jansConfErrors text None YES None jans Errors Conf jansConfStatic text None YES None jans Static Conf jansConfWebKeys text None YES None jans Web Keys Conf jansWebKeysSettings character varying 64 YES None jans Web Keys Conf jansConfApp text None YES None jans App Conf jansRevision integer None YES None Revision","title":"jansAppConf"},{"location":"admin/reference/database/pgsql-schema/#jansclnt","text":"Field Type Character Maximum Length Null Default Comment jansGrp character varying 64 YES None Group displayName character varying 128 YES None preferred name of a person to be used when displaying entries displayNameLocalized jsonb None YES None jans Display Name Localized inum character varying 64 YES None XRI i-number jansAppTyp character varying 64 YES None jans App Typ jansClntIdIssuedAt timestamp without time zone None YES None jans Clnt Issued At jansClntSecret character varying 64 YES None jans Clnt Secret jansClntSecretExpAt timestamp without time zone None YES None Date client expires exp timestamp without time zone None YES None jans Exp del boolean None YES None del jansClntURI text None YES None jans Clnt URI jansClntURILocalized jsonb None YES None jans Clnt URI localized jansContact jsonb None YES None jans Contact jansDefAcrValues jsonb None YES None jans Def Acr Values jansDefMaxAge integer None YES None jans Def Max Age jansGrantTyp jsonb None YES None jans Grant Typ jansIdTknEncRespAlg character varying 64 YES None jans ID Tkn Enc Resp Alg jansIdTknEncRespEnc character varying 64 YES None jans ID Tkn Enc Resp Enc jansIdTknSignedRespAlg character varying 64 YES None jans ID Tkn Signed Resp Alg jansInitiateLoginURI text None YES None jans Initiate Login URI jansJwksURI text None YES None jans JWKs URI jansJwks text None YES None jans JWKs jansLogoURI text None YES None jans Logo URI jansLogoURILocalized jsonb None YES None jans Logo URI localized jansPolicyURI text None YES None jans Policy URI jansPolicyURILocalized jsonb None YES None jans Policy URI localized jansPostLogoutRedirectURI jsonb None YES None jans Post Logout Redirect URI jansRedirectURI jsonb None YES None jans Redirect URI jansRegistrationAccessTkn character varying 64 YES None jans Registration Access Tkn jansReqObjSigAlg character varying 64 YES None jans Req Obj Sig Alg jansReqObjEncAlg character varying 64 YES None jans Req Obj Enc Alg jansReqObjEncEnc character varying 64 YES None jans Req Obj Enc Enc jansReqURI jsonb None YES None jans Req URI jansRespTyp jsonb None YES None jans Resp Typ jansScope jsonb None YES None jans Attr Scope jansClaim jsonb None YES None jans Attr Claim jansSectorIdentifierURI text None YES None jans Sector Identifier URI jansSignedRespAlg character varying 64 YES None jans Signed Resp Alg jansSubjectTyp character varying 64 YES None jans Subject Typ jansTknEndpointAuthMethod character varying 64 YES None jans Tkn Endpoint Auth Method jansTknEndpointAuthSigAlg character varying 64 YES None jans Tkn Endpoint Auth Sig Alg jansTosURI text None YES None jans TOS URI jansTosURILocalized jsonb None YES None jans Tos URI localized jansTrustedClnt boolean None YES None jans Trusted Clnt jansUsrInfEncRespAlg character varying 64 YES None jans Usr Inf Enc Resp Alg jansUsrInfEncRespEnc character varying 64 YES None jans Usr Inf Enc Resp Enc jansExtraConf character varying 64 YES None jans additional configuration jansClaimRedirectURI jsonb None YES None Claim Redirect URI jansLastAccessTime timestamp without time zone None YES None Last access time jansLastLogonTime timestamp without time zone None YES None Last logon time jansPersistClntAuthzs boolean None YES None jans Persist Clnt Authzs jansInclClaimsInIdTkn boolean None YES None jans Incl Claims In Id Tkn jansRefreshTknLife integer None YES None Life of refresh token jansDisabled boolean None YES None Status of client jansLogoutURI jsonb None YES None jans Policy URI jansLogoutSessRequired boolean None YES None jans Policy URI jansdId character varying 64 YES None jansd Id jansAuthorizedOrigins jsonb None YES None jans Authorized Origins tknBndCnf text None YES None jansauth - Tkn Binding Id Hash jansAccessTknAsJwt boolean None YES None jansauth - indicator whether to return access token as JWT jansAccessTknSigAlg character varying 64 YES None jansauth - access token signing algorithm jansAccessTknLife integer None YES None Life of access token jansSoftId character varying 64 YES None Soft Identifier jansSoftStatement text None YES None Soft Statement jansRptAsJwt boolean None YES None jansRptAsJwt jansAttrs text None YES None Attrs jansBackchannelTknDeliveryMode character varying 64 YES None jans Backchannel Tkn Delivery Mode jansBackchannelClntNotificationEndpoint character varying 64 YES None jans Backchannel Clnt Notification Endpoint jansBackchannelAuthnReqSigAlg character varying 64 YES None jans Backchannel Authn Req Sig Alg jansBackchannelUsrCodeParameter boolean None YES None jans Backchannel Usr Code Parameter","title":"jansClnt"},{"location":"admin/reference/database/pgsql-schema/#jansscope","text":"Field Type Character Maximum Length Null Default Comment jansDefScope boolean None YES None Track the default scope for an custom OAuth2 Scope. displayName character varying 128 YES None preferred name of a person to be used when displaying entries inum character varying 64 YES None XRI i-number jansScopeTyp character varying 64 YES None OX Attr Scope type creatorId character varying 64 YES None Creator Id creatorTyp character varying 64 YES None Creator type creatorAttrs character varying 64 YES None Creator Attrs creationDate timestamp without time zone None YES None Creation Date used for password reset requests jansClaim jsonb None YES None jans Attr Claim jansScrDn jsonb None YES None Script object DN jansGrpClaims boolean None YES None jans Grp Attr Claims (true or false) jansId character varying 128 YES None Identifier jansIconUrl character varying 64 YES None jans icon url jansUmaPolicyScrDn text None YES None OX policy script Dn jansAttrs text None YES None Attrs exp timestamp without time zone None YES None jans Exp del boolean None YES None del","title":"jansScope"},{"location":"admin/reference/database/pgsql-schema/#jansumaresource","text":"Field Type Character Maximum Length Null Default Comment displayName character varying 128 YES None preferred name of a person to be used when displaying entries inum character varying 64 YES None XRI i-number jansAssociatedClnt jsonb None YES None Associate the dn of an OAuth2 client with a person or UMA Resource Set. jansUmaScope character varying 768 YES None URI reference of scope descriptor jansFaviconImage character varying 64 YES None TODO - Stores URL of favicon jansGrp character varying 64 YES None Group jansId character varying 128 YES None Identifier jansResource text None YES None Host path jansRevision integer None YES None Revision jansTyp character varying 64 YES None jans type jansScopeExpression text None YES None Scope expression iat timestamp without time zone None YES None jans Creation exp timestamp without time zone None YES None jans Exp del boolean None YES None del","title":"jansUmaResource"},{"location":"admin/reference/database/pgsql-schema/#jansumaresourcepermission","text":"Field Type Character Maximum Length Null Default Comment exp timestamp without time zone None YES None jans Exp del boolean None YES None del jansUmaScope character varying 768 YES None URI reference of scope descriptor jansConfCode character varying 64 YES None jans configuration code jansResourceSetId character varying 64 YES None jans resource set id jansAttrs text None YES None Attrs jansTicket character varying 64 YES None jans ticket jansStatus character varying 16 YES None Status of the entry, used by many objectclasses","title":"jansUmaResourcePermission"},{"location":"admin/reference/database/pgsql-schema/#jansgrant","text":"Field Type Character Maximum Length Null Default Comment grtId character varying 64 YES None jans grant id iat timestamp without time zone None YES None jans Creation","title":"jansGrant"},{"location":"admin/reference/database/pgsql-schema/#janstoken","text":"Field Type Character Maximum Length Null Default Comment authnTime timestamp without time zone None YES None jans Authn Time authzCode character varying 64 YES None jans authorization code iat timestamp without time zone None YES None jans Creation exp timestamp without time zone None YES None jans Exp del boolean None YES None del grtId character varying 64 YES None jans grant id grtTyp character varying 64 YES None jans Grant Typ jwtReq text None YES None jans JWT Req nnc text None YES None jans nonce scp text None YES None jans Attr Scope tknCde character varying 80 YES None jans Tkn Code tknTyp character varying 32 YES None jans Tkn Typ usrId character varying 64 YES None jans user id jansUsrDN character varying 128 YES None jans Usr DN clnId character varying 64 YES None jans Clnt id uuid character varying 64 YES None Unique identifier chlng character varying 64 YES None OX PKCE code challenge chlngMth character varying 64 YES None OX PKCE code challenge method clms character varying 64 YES None jans Claims ssnId character varying 64 YES None jans Sess DN attr text None YES None Attrs tknBndCnf text None YES None jansauth - Tkn Binding Id Hash dpop character varying 64 YES None DPoP Proof","title":"jansToken"},{"location":"admin/reference/database/pgsql-schema/#jansgrp","text":"Field Type Character Maximum Length Null Default Comment displayName character varying 128 YES None preferred name of a person to be used when displaying entries jansStatus character varying 16 YES None Status of the entry, used by many objectclasses inum character varying 64 YES None XRI i-number","title":"jansGrp"},{"location":"admin/reference/database/pgsql-schema/#jansattr","text":"Field Type Character Maximum Length Null Default Comment displayName character varying 128 YES None preferred name of a person to be used when displaying entries jansAttrEditTyp jsonb None YES None Specify in exclude who can update an attribute, admin or user jansAttrName character varying 64 YES None Specify an identifier for an attribute. May be multi-value where an attribute has two names, like givenName and first-name. jansAttrOrigin character varying 64 YES None Specify the person objectclass associated with the attribute, used for display purposes in exclude. jansAttrSystemEditTyp character varying 64 YES None TODO - still required? jansAttrTyp character varying 64 YES None Data type of attribute. Values can be string, photo, numeric, date jansClaimName character varying 64 YES None Used by jans in conjunction with jansttributeName to map claims to attributes in LDAP. jansAttrUsgTyp character varying 64 YES None TODO - Usg? Value can be OpenID jansAttrViewTyp jsonb None YES None Specify in exclude who can view an attribute, admin or user jansSAML1URI character varying 64 YES None SAML 1 uri of attribute jansSAML2URI character varying 64 YES None SAML 2 uri of attribute jansStatus character varying 16 YES None Status of the entry, used by many objectclasses inum character varying 64 YES None XRI i-number jansNameIdTyp character varying 64 YES None NameId Typ jansSourceAttr character varying 64 YES None Source Attr for this Attr jansRegExp character varying 64 YES None Regular expression used to validate attribute data jansTooltip character varying 64 YES None Custom tooltip to be shown on the UI jansValidation text None YES None This data has information about attribute Validation","title":"jansAttr"},{"location":"admin/reference/database/pgsql-schema/#janspassresetreq","text":"Field Type Character Maximum Length Null Default Comment creationDate timestamp without time zone None YES None Creation Date used for password reset requests jansGuid character varying 64 YES None A random string to mark temporary tokens personInum character varying 64 YES None Inum of a person","title":"jansPassResetReq"},{"location":"admin/reference/database/pgsql-schema/#janssessid","text":"Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier sid character varying 64 YES None Sess Identifier creationDate timestamp without time zone None YES None Creation Date used for password reset requests exp timestamp without time zone None YES None jans Exp del boolean None YES None del jansLastAccessTime timestamp without time zone None YES None Last access time jansUsrDN character varying 128 YES None jans Usr DN authnTime timestamp without time zone None YES None jans Authn Time jansState character varying 64 YES None jansState jansSessState text None YES None jans Sess State jansPermissionGranted boolean None YES None jans Permission Granted jansAsJwt boolean None YES None Boolean field to indicate whether object is used as JWT jansJwt text None YES None JWT representation of the object or otherwise jwt associated with the object jansPermissionGrantedMap text None YES None jans Permission Granted Map jansInvolvedClnts text None YES None Involved clients deviceSecret character varying 64 YES None deviceSecret jansSessAttr text None YES None jansSessAttr","title":"jansSessId"},{"location":"admin/reference/database/pgsql-schema/#jansumarpt","text":"Field Type Character Maximum Length Null Default Comment authnTime timestamp without time zone None YES None jans Authn Time clnId character varying 64 YES None jans Clnt id iat timestamp without time zone None YES None jans Creation exp timestamp without time zone None YES None jans Exp del boolean None YES None del tknCde character varying 80 YES None jans Tkn Code usrId character varying 64 YES None jans user id ssnId character varying 64 YES None jans Sess DN jansUmaPermission jsonb None YES None jans uma permission uuid character varying 64 YES None Unique identifier dpop character varying 64 YES None DPoP Proof authzCode character varying 64 YES None jans authorization code grtId character varying 64 YES None jans grant id grtTyp character varying 64 YES None jans Grant Typ jwtReq text None YES None jans JWT Req nnc text None YES None jans nonce scp text None YES None jans Attr Scope tknTyp character varying 32 YES None jans Tkn Typ jansUsrDN character varying 128 YES None jans Usr DN chlng character varying 64 YES None OX PKCE code challenge chlngMth character varying 64 YES None OX PKCE code challenge method clms character varying 64 YES None jans Claims attr text None YES None Attrs tknBndCnf text None YES None jansauth - Tkn Binding Id Hash","title":"jansUmaRPT"},{"location":"admin/reference/database/pgsql-schema/#janspushapp","text":"Field Type Character Maximum Length Null Default Comment displayName character varying 128 YES None preferred name of a person to be used when displaying entries jansId character varying 128 YES None Identifier jansName character varying 64 YES None Name jansPushAppConf character varying 64 YES None jansPush application configuration","title":"jansPushApp"},{"location":"admin/reference/database/pgsql-schema/#jansscr","text":"Field Type Character Maximum Length Null Default Comment inum character varying 64 YES None XRI i-number jansScr text None YES None Attr that contains script (python, java script) jansScrTyp character varying 64 YES None Attr that contains script type (e.g. python, java script)","title":"jansScr"},{"location":"admin/reference/database/pgsql-schema/#janscustomscr","text":"Field Type Character Maximum Length Null Default Comment inum character varying 64 YES None XRI i-number displayName character varying 128 YES None preferred name of a person to be used when displaying entries jansScr text None YES None Attr that contains script (python, java script) jansScrTyp character varying 64 YES None Attr that contains script type (e.g. python, java script) jansProgLng character varying 64 YES None programming language jansModuleProperty jsonb None YES None Module property jansConfProperty jsonb None YES None Conf property jansLevel integer None YES None Level jansRevision integer None YES None Revision jansEnabled boolean None YES None Status of the entry, used by many objectclasses jansScrError text None YES None Attr that contains first error which application get during it execution jansAlias jsonb None YES None jansAlias","title":"jansCustomScr"},{"location":"admin/reference/database/pgsql-schema/#jansdeviceregistration","text":"Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier displayName character varying 128 YES None preferred name of a person to be used when displaying entries jansDeviceKeyHandle character varying 128 YES None jansDeviceKeyHandle jansDeviceHashCode integer None YES None jansDeviceHashCode jansApp character varying 96 YES None jansApp jansDeviceRegistrationConf text None YES None jansDeviceRegistrationConf jansDeviceNotificationConf character varying 64 YES None Extended push notification configuration jansNickName character varying 64 YES None jansNickName jansDeviceData text None YES None jansDeviceData jansCounter integer None YES None jansCounter jansStatus character varying 16 YES None Status of the entry, used by many objectclasses del boolean None YES None del exp timestamp without time zone None YES None jans Exp personInum character varying 64 YES None Inum of a person creationDate timestamp without time zone None YES None Creation Date used for password reset requests jansLastAccessTime timestamp without time zone None YES None Last access time","title":"jansDeviceRegistration"},{"location":"admin/reference/database/pgsql-schema/#jansu2freq","text":"Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier jansReqId character varying 64 YES None jansReqId jansReq text None YES None jansReq jansSessStateId character varying 64 YES None jansSessStateId del boolean None YES None del exp timestamp without time zone None YES None jans Exp personInum character varying 64 YES None Inum of a person creationDate timestamp without time zone None YES None Creation Date used for password reset requests","title":"jansU2fReq"},{"location":"admin/reference/database/pgsql-schema/#jansmetric","text":"Field Type Character Maximum Length Null Default Comment jansStartDate timestamp without time zone None YES None Start date jansEndDate timestamp without time zone None YES None End date jansAppTyp character varying 64 YES None jans App Typ jansMetricTyp character varying 64 YES None Metric type creationDate timestamp without time zone None YES None Creation Date used for password reset requests del boolean None YES None del exp timestamp without time zone None YES None jans Exp jansData text None YES None OX data jansHost character varying 64 YES None jans host","title":"jansMetric"},{"location":"admin/reference/database/pgsql-schema/#jansumapct","text":"Field Type Character Maximum Length Null Default Comment clnId character varying 64 YES None jans Clnt id iat timestamp without time zone None YES None jans Creation exp timestamp without time zone None YES None jans Exp del boolean None YES None del tknCde character varying 80 YES None jans Tkn Code ssnId character varying 64 YES None jans Sess DN jansClaimValues character varying 64 YES None Claim Values dpop character varying 64 YES None DPoP Proof authnTime timestamp without time zone None YES None jans Authn Time authzCode character varying 64 YES None jans authorization code grtId character varying 64 YES None jans grant id grtTyp character varying 64 YES None jans Grant Typ jwtReq text None YES None jans JWT Req nnc text None YES None jans nonce scp text None YES None jans Attr Scope tknTyp character varying 32 YES None jans Tkn Typ usrId character varying 64 YES None jans user id jansUsrDN character varying 128 YES None jans Usr DN uuid character varying 64 YES None Unique identifier chlng character varying 64 YES None OX PKCE code challenge chlngMth character varying 64 YES None OX PKCE code challenge method clms character varying 64 YES None jans Claims attr text None YES None Attrs tknBndCnf text None YES None jansauth - Tkn Binding Id Hash","title":"jansUmaPCT"},{"location":"admin/reference/database/pgsql-schema/#janscache","text":"Field Type Character Maximum Length Null Default Comment uuid character varying 64 YES None Unique identifier iat timestamp without time zone None YES None jans Creation exp timestamp without time zone None YES None jans Exp del boolean None YES None del dat text None YES None OX data","title":"jansCache"},{"location":"admin/reference/database/pgsql-schema/#jansfido2registrationentry","text":"Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier creationDate timestamp without time zone None YES None Creation Date used for password reset requests displayName character varying 128 YES None preferred name of a person to be used when displaying entries jansApp character varying 96 YES None jansApp jansSessStateId character varying 64 YES None jansSessStateId jansCodeChallenge character varying 64 YES None OX PKCE code challenge jansCodeChallengeHash integer None YES None OX code challenge hash jansPublicKeyId character varying 96 YES None jansPublicKeyId jansPublicKeyIdHash integer None YES None jansPublicKeyIdHash personInum character varying 64 YES None Inum of a person jansRegistrationData text None YES None jansRegistrationData jansDeviceData text None YES None jansDeviceData jansDeviceNotificationConf character varying 64 YES None Extended push notification configuration jansCounter integer None YES None jansCounter jansStatus character varying 16 YES None Status of the entry, used by many objectclasses exp timestamp without time zone None YES None jans Exp del boolean None YES None del","title":"jansFido2RegistrationEntry"},{"location":"admin/reference/database/pgsql-schema/#janspushdevice","text":"Field Type Character Maximum Length Null Default Comment jansUsrId character varying 64 YES None jans user id jansId character varying 128 YES None Identifier jansPushApp text None YES None jansPush application DN jansPushDeviceConf character varying 64 YES None jansPush device configuration jansTyp character varying 64 YES None jans type","title":"jansPushDevice"},{"location":"admin/reference/database/pgsql-schema/#jansclntauthz","text":"Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier jansClntId jsonb None YES None jans Clnt id jansUsrId character varying 64 YES None jans user id exp timestamp without time zone None YES None jans Exp del boolean None YES None del jansScope jsonb None YES None jans Attr Scope","title":"jansClntAuthz"},{"location":"admin/reference/database/pgsql-schema/#janssectoridentifier","text":"Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier jansRedirectURI jsonb None YES None jans Redirect URI jansClntId jsonb None YES None jans Clnt id","title":"jansSectorIdentifier"},{"location":"admin/reference/database/pgsql-schema/#jansfido2authnentry","text":"Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier creationDate timestamp without time zone None YES None Creation Date used for password reset requests jansApp character varying 96 YES None jansApp jansSessStateId character varying 64 YES None jansSessStateId jansCodeChallenge character varying 64 YES None OX PKCE code challenge jansCodeChallengeHash integer None YES None OX code challenge hash personInum character varying 64 YES None Inum of a person jansAuthData text None YES None jansAuthData jansStatus character varying 16 YES None Status of the entry, used by many objectclasses exp timestamp without time zone None YES None jans Exp del boolean None YES None del","title":"jansFido2AuthnEntry"},{"location":"admin/reference/database/pgsql-schema/#jansrp","text":"Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier dat text None YES None OX data","title":"jansRp"},{"location":"admin/reference/database/pgsql-schema/#janscibareq","text":"Field Type Character Maximum Length Null Default Comment authReqId character varying 64 YES None Authn request id clnId character varying 64 YES None jans Clnt id usrId character varying 64 YES None jans user id creationDate timestamp without time zone None YES None Creation Date used for password reset requests exp timestamp without time zone None YES None jans Exp jansStatus character varying 16 YES None Status of the entry, used by many objectclasses","title":"jansCibaReq"},{"location":"admin/reference/database/pgsql-schema/#jansstatentry","text":"Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier dat text None YES None OX data jansData text None YES None OX data attr text None YES None Attrs","title":"jansStatEntry"},{"location":"admin/reference/database/pgsql-schema/#janspar","text":"Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier jansAttrs text None YES None Attrs exp timestamp without time zone None YES None jans Exp del boolean None YES None del","title":"jansPar"},{"location":"admin/reference/database/pgsql-schema/#jansinummap","text":"Field Type Character Maximum Length Null Default Comment jansStatus character varying 16 YES None Status of the entry, used by many objectclasses inum character varying 64 YES None XRI i-number jansPrimaryKeyAttrName character varying 64 YES None Primary Key Attribute Name jansPrimaryKeyValue character varying 64 YES None Primary Key Value jansSecondaryKeyAttrName character varying 64 YES None Secondary Key Attribute Name jansSecondaryKeyValue character varying 64 YES None Secondary Key Value jansTertiaryKeyAttrName character varying 64 YES None Tertiary Key Attribute Name jansTertiaryKeyValue character varying 64 YES None Tertiary Key Value","title":"jansInumMap"},{"location":"admin/reference/database/pgsql-schema/#agmflowrun","text":"Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier agFlowSt text None YES None Details of a running agama flow instance agFlowEncCont text None YES None Continuation associated to a running agama flow instance jansCustomMessage character varying 128 YES None exclude custom welcome message exp timestamp without time zone None YES None jans Exp","title":"agmFlowRun"},{"location":"admin/reference/database/pgsql-schema/#agmflow","text":"Field Type Character Maximum Length Null Default Comment agFlowQname character varying 64 YES None Full name of an agama flow agFlowMeta text None YES None Metadata of an agama flow jansScr text None YES None Attr that contains script (python, java script) jansEnabled boolean None YES None Status of the entry, used by many objectclasses jansScrError text None YES None Attr that contains first error which application get during it execution agFlowTrans text None YES None Transpiled code of an agama flow jansRevision integer None YES None Revision jansCustomMessage character varying 128 YES None exclude custom welcome message","title":"agmFlow"},{"location":"admin/reference/database/pgsql-schema/#adsprjdeployment","text":"Field Type Character Maximum Length Null Default Comment jansId character varying 128 YES None Identifier jansStartDate timestamp without time zone None YES None Start date jansEndDate timestamp without time zone None YES None End date adsPrjAssets text None YES None Assets of an ADS project adsPrjDeplDetails text None YES None Misc details associated to an ADS project","title":"adsPrjDeployment"},{"location":"admin/reference/database/pgsql-schema/#jansdocument","text":"Field Type Character Maximum Length Null Default Comment inum character varying 64 YES None XRI i-number displayName character varying 128 YES None preferred name of a person to be used when displaying entries document character varying 64 YES None Save Document in DB creationDate timestamp without time zone None YES None Creation Date used for password reset requests jansModuleProperty jsonb None YES None Module property jansLevel integer None YES None Level jansRevision integer None YES None Revision jansEnabled boolean None YES None Status of the entry, used by many objectclasses jansAlias jsonb None YES None jansAlias","title":"jansDocument"},{"location":"admin/reference/database/rdbms-erwin/","tags":["administration","reference","database"],"text":"Generic tables structure #","title":"RDBMS Erwin Table"},{"location":"admin/reference/database/rdbms-erwin/#generic-tables-structure","text":"","title":"Generic tables structure"},{"location":"admin/reference/database/spanner-config/","tags":["administration","reference","database"],"text":"Spanner ORM persistence layer # The recommended Spanner version is 6.3x or newer. Setup supports both Spanner emulator and Spanner Cloud DB servers. Spanner emulator has many limitations and it's recommended only for development and testing. For case with Spanner Cloud the administrator should pre-create database and get Google credentials file. During install setup will prompt to enter project/instance/database and path to Google credentials file. After entering these details setup will check connection and start tables creation in specified DB. During install setup generates default /etc/jans/conf/jans-spanner.properties for Jans applications Configuration properties # List of specific for Spanner default setting from jans-spanner.properties : connection.project=jans-project connection.instance=jans-instance connection.database=jansdb # Prefix connection.client-property.key=value will be coverterd to key=value # This is reserved for future usage #connection.client-property=clientPropertyValue # spanner creds or emulator #connection.emulator-host= connection.credentials-file=/etc/jans/google_application_credentials.json # Password hash method password.encryption.method=SSHA-256 # Connection pool size #connection.pool.max-sessions=400 #connection.pool.min-sessions=100 #connection.pool.inc-step=25 # Max time needed to create connection pool in milliseconds connection.pool.create-max-wait-time-millis=20000 # Maximum allowed statement result set size statement.limit.default-maximum-result-size=1000 # Maximum allowed delete statement result set size statement.limit.maximum-result-delete-size=10000 The rest of properties are static for all other supported DB: binaryAttributes=objectGUID certificateAttributes=userCertificate doc_id building rules # In order to support transparency for end applications and allow data migration from one DB to another ORM requires DN attribute in each entry. This attribute it also uses to build doc_id . Here is example of this DN -> doc_id conversion: doc_id is primary key. In order to build unique document identifier ORM uses another unique attribute DN . doc_id is last RDN value. Generic tables structure # Each table in jansdb Spanner schema follow next rules: one table for every LDAP objectClass has 2 mandatory column DN and doc_id Index for primary key Interleaved tables with name pattern objectClass_propertyName Multi-valued attributes support # Spanner DB supports ARRAY attributes but at same time it's not possible to index them. This led to full table scan when query has filter with these attributes. Alternative for this is to use interleaved child tables. These tables can increase queries performance but in parallel with this this approach requires additional storage space for child table and index. Administrator should move only attributes which need ARRAY index to such tables. ARRAY columns: Interleaved columns moved to tables: More details about interleaved tables, DB size and performance is in ORM Spanner module. Data mapping rules # ORM uses STRING / TIMESTAMP / INT64 / BYTES / BOOL / ARRAY data types. ARRAY it uses to store multi-valued attribute values. The generic format of such values is: [\"value_1\", \"value_2\", ...] For user password field ORM on persist/update operations automatically create hash. On authentication ORM compares hashes. To store attributes defined in java beans with @JsonObject annotation ORM uses STRING(MAX) column type. Java example # This example shows how to use ORM. It opens connection to Spanner DB and add user entry to it: public static void main(String[] args) { // Create Sql entry manager SpannerEntryManager spannerEntryManager = createSpannerEntryManager(); // Create and fill user bean SimpleUser newUser = new SimpleUser(); newUser.setDn(String.format(\"inum=%s,ou=people,o=jans\", System.currentTimeMillis())); newUser.setUserId(\"sample_user_\" + System.currentTimeMillis()); newUser.setUserPassword(\"test\"); newUser.getCustomAttributes().add(new CustomObjectAttribute(\"jansAddres\", Arrays.asList(\"London\", \"Texas\", \"New York\"))); newUser.getCustomAttributes().add(new CustomObjectAttribute(\"jansGuid\", \"test_value\")); // Call ORM API to store entry spannerEntryManager.persist(newUser); spannerEntryManager.destroy(); } public static SpannerEntryManager createSpannerEntryManager() { SpannerEntryManagerFactory spannerEntryManagerFactory = new SpannerEntryManagerFactory(); spannerEntryManagerFactory.create(); Properties connectionProperties = getSampleConnectionProperties(); SpannerEntryManager spannerEntryManager = spannerEntryManagerFactory.createEntryManager(connectionProperties); return spannerEntryManager; } private static Properties getSampleConnectionProperties() { Properties connectionProperties = new Properties(); connectionProperties.put(\"spanner#connection.project\", \"jans-project\"); connectionProperties.put(\"spanner#connection.instance\", \"jans-instance\"); connectionProperties.put(\"spanner#connection.database\", \"jansdb\"); boolean emulator = true; if (emulator) { connectionProperties.put(\"spanner#connection.emulator-host\", \"localhost:9010\"); } else { connectionProperties.put(\"spanner#connection.credentials-file\", \"V:\\\\dev-gluu-cloud-platform-32136abdceb7.json\"); } // Password hash method connectionProperties.put(\"spanner#password.encryption.method\", \"SSHA-256\"); // Max time needed to create connection pool in milliseconds connectionProperties.put(\"spanner#connection.pool.create-max-wait-time-millis\", \"20000\"); // # Maximum allowed statement result set size connectionProperties.put(\"spanner#statement.limit.default-maximum-result-size\", \"1000\"); // # Maximum allowed delete statement result set size connectionProperties.put(\"spanner#statement.limit.maximum-result-delete-size\", \"10000\"); connectionProperties.put(\"spanner#binaryAttributes\", \"objectGUID\"); connectionProperties.put(\"spanner#certificateAttributes\", \"userCertificate\"); return connectionProperties; } More Spanner ORM examples is in this sample module.","title":"Spanner Configuration"},{"location":"admin/reference/database/spanner-config/#spanner-orm-persistence-layer","text":"The recommended Spanner version is 6.3x or newer. Setup supports both Spanner emulator and Spanner Cloud DB servers. Spanner emulator has many limitations and it's recommended only for development and testing. For case with Spanner Cloud the administrator should pre-create database and get Google credentials file. During install setup will prompt to enter project/instance/database and path to Google credentials file. After entering these details setup will check connection and start tables creation in specified DB. During install setup generates default /etc/jans/conf/jans-spanner.properties for Jans applications","title":"Spanner ORM persistence layer"},{"location":"admin/reference/database/spanner-config/#configuration-properties","text":"List of specific for Spanner default setting from jans-spanner.properties : connection.project=jans-project connection.instance=jans-instance connection.database=jansdb # Prefix connection.client-property.key=value will be coverterd to key=value # This is reserved for future usage #connection.client-property=clientPropertyValue # spanner creds or emulator #connection.emulator-host= connection.credentials-file=/etc/jans/google_application_credentials.json # Password hash method password.encryption.method=SSHA-256 # Connection pool size #connection.pool.max-sessions=400 #connection.pool.min-sessions=100 #connection.pool.inc-step=25 # Max time needed to create connection pool in milliseconds connection.pool.create-max-wait-time-millis=20000 # Maximum allowed statement result set size statement.limit.default-maximum-result-size=1000 # Maximum allowed delete statement result set size statement.limit.maximum-result-delete-size=10000 The rest of properties are static for all other supported DB: binaryAttributes=objectGUID certificateAttributes=userCertificate","title":"Configuration properties"},{"location":"admin/reference/database/spanner-config/#doc_id-building-rules","text":"In order to support transparency for end applications and allow data migration from one DB to another ORM requires DN attribute in each entry. This attribute it also uses to build doc_id . Here is example of this DN -> doc_id conversion: doc_id is primary key. In order to build unique document identifier ORM uses another unique attribute DN . doc_id is last RDN value.","title":"doc_id building rules"},{"location":"admin/reference/database/spanner-config/#generic-tables-structure","text":"Each table in jansdb Spanner schema follow next rules: one table for every LDAP objectClass has 2 mandatory column DN and doc_id Index for primary key Interleaved tables with name pattern objectClass_propertyName","title":"Generic tables structure"},{"location":"admin/reference/database/spanner-config/#multi-valued-attributes-support","text":"Spanner DB supports ARRAY attributes but at same time it's not possible to index them. This led to full table scan when query has filter with these attributes. Alternative for this is to use interleaved child tables. These tables can increase queries performance but in parallel with this this approach requires additional storage space for child table and index. Administrator should move only attributes which need ARRAY index to such tables. ARRAY columns: Interleaved columns moved to tables: More details about interleaved tables, DB size and performance is in ORM Spanner module.","title":"Multi-valued attributes support"},{"location":"admin/reference/database/spanner-config/#data-mapping-rules","text":"ORM uses STRING / TIMESTAMP / INT64 / BYTES / BOOL / ARRAY data types. ARRAY it uses to store multi-valued attribute values. The generic format of such values is: [\"value_1\", \"value_2\", ...] For user password field ORM on persist/update operations automatically create hash. On authentication ORM compares hashes. To store attributes defined in java beans with @JsonObject annotation ORM uses STRING(MAX) column type.","title":"Data mapping rules"},{"location":"admin/reference/database/spanner-config/#java-example","text":"This example shows how to use ORM. It opens connection to Spanner DB and add user entry to it: public static void main(String[] args) { // Create Sql entry manager SpannerEntryManager spannerEntryManager = createSpannerEntryManager(); // Create and fill user bean SimpleUser newUser = new SimpleUser(); newUser.setDn(String.format(\"inum=%s,ou=people,o=jans\", System.currentTimeMillis())); newUser.setUserId(\"sample_user_\" + System.currentTimeMillis()); newUser.setUserPassword(\"test\"); newUser.getCustomAttributes().add(new CustomObjectAttribute(\"jansAddres\", Arrays.asList(\"London\", \"Texas\", \"New York\"))); newUser.getCustomAttributes().add(new CustomObjectAttribute(\"jansGuid\", \"test_value\")); // Call ORM API to store entry spannerEntryManager.persist(newUser); spannerEntryManager.destroy(); } public static SpannerEntryManager createSpannerEntryManager() { SpannerEntryManagerFactory spannerEntryManagerFactory = new SpannerEntryManagerFactory(); spannerEntryManagerFactory.create(); Properties connectionProperties = getSampleConnectionProperties(); SpannerEntryManager spannerEntryManager = spannerEntryManagerFactory.createEntryManager(connectionProperties); return spannerEntryManager; } private static Properties getSampleConnectionProperties() { Properties connectionProperties = new Properties(); connectionProperties.put(\"spanner#connection.project\", \"jans-project\"); connectionProperties.put(\"spanner#connection.instance\", \"jans-instance\"); connectionProperties.put(\"spanner#connection.database\", \"jansdb\"); boolean emulator = true; if (emulator) { connectionProperties.put(\"spanner#connection.emulator-host\", \"localhost:9010\"); } else { connectionProperties.put(\"spanner#connection.credentials-file\", \"V:\\\\dev-gluu-cloud-platform-32136abdceb7.json\"); } // Password hash method connectionProperties.put(\"spanner#password.encryption.method\", \"SSHA-256\"); // Max time needed to create connection pool in milliseconds connectionProperties.put(\"spanner#connection.pool.create-max-wait-time-millis\", \"20000\"); // # Maximum allowed statement result set size connectionProperties.put(\"spanner#statement.limit.default-maximum-result-size\", \"1000\"); // # Maximum allowed delete statement result set size connectionProperties.put(\"spanner#statement.limit.maximum-result-delete-size\", \"10000\"); connectionProperties.put(\"spanner#binaryAttributes\", \"objectGUID\"); connectionProperties.put(\"spanner#certificateAttributes\", \"userCertificate\"); return connectionProperties; } More Spanner ORM examples is in this sample module.","title":"Java example"},{"location":"admin/reference/database/spanner-ops/","tags":["administration","reference","database"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Spanner Operation"},{"location":"admin/reference/database/spanner-ops/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/reference/database/spanner-ops/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/reference/database/spanner-ops/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/reference/database/spanner-schema/","tags":["administration","reference","database"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Spanner Schema"},{"location":"admin/reference/database/spanner-schema/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/reference/database/spanner-schema/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/reference/database/spanner-schema/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/reference/json/","tags":["administration","reference","json","properties","feature flags"],"text":"Properties And Feature Flags # Janssen Server configuration is driven by properties and feature flags . While properties drive behaviour of Janssen Server at more granular level, the feature flags are used to enable/disable functionalities at the server level. Janssen Server uses JSON format to store properties and feature flag configuration for any deployment. Administrators can use CLI or TUI to configure available properties and feature flags. Use the left navigation panel to browse complete list of available properties and feature flags across all Janssen Server modules. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Properties And Feature Flags"},{"location":"admin/reference/json/#properties-and-feature-flags","text":"Janssen Server configuration is driven by properties and feature flags . While properties drive behaviour of Janssen Server at more granular level, the feature flags are used to enable/disable functionalities at the server level. Janssen Server uses JSON format to store properties and feature flag configuration for any deployment. Administrators can use CLI or TUI to configure available properties and feature flags. Use the left navigation panel to browse complete list of available properties and feature flags across all Janssen Server modules. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Properties And Feature Flags"},{"location":"admin/reference/json/feature-flags/","tags":["administration","auth-server","reference","feature-flags"],"text":"Feature Flags # Janssen Server provides feature flags that the administrator can use to enable or disable the entire feature. For example, many endpoints exposed by Janssen Server can be disabled by the administrator using feature flags. Navigate through the left navigation panel to see the complete list of feature flags available in Janssen Server. Using Feature Flags # An administrator can enable or disable feature flags using TUI . New value of the feature flag will be dynamically loaded at an interval of 30 seconds. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Feature Flags"},{"location":"admin/reference/json/feature-flags/#feature-flags","text":"Janssen Server provides feature flags that the administrator can use to enable or disable the entire feature. For example, many endpoints exposed by Janssen Server can be disabled by the administrator using feature flags. Navigate through the left navigation panel to see the complete list of feature flags available in Janssen Server.","title":"Feature Flags"},{"location":"admin/reference/json/feature-flags/#using-feature-flags","text":"An administrator can enable or disable feature flags using TUI . New value of the feature flag will be dynamically loaded at an interval of 30 seconds. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Using Feature Flags"},{"location":"admin/reference/json/feature-flags/janssenauthserver-feature-flags/","tags":["administration","reference","json","feature-flags"],"text":"Janssen Auth Server Feature Flags # Feature Flag Name Description ACTIVE_SESSION Enable/Disable active session endpoint Details CIBA Enable/Disable OpenID Connect Client Initiated Backchannel Authentication Flow(CIBA) flow support Details CLIENTINFO Enable/Disable client info endpoint Details DEVICE_AUTHZ Enable/Disable support for device authorization Details END_SESSION Enable/Disable end session endpoint Details HEALTH_CHECK Enable/Disable health-check endpoint Details ID_GENERATION Enable/Disable ID Generation endpoint Details INTROSPECTION Enable/Disable token introspection endpoint Details JANS_CONFIGURATION Enable/Disable .well-known configuration endpoint Details METRIC Enable/Disable metric reporter feature Details PAR Enable/Disable Pushed Authorization Requests(PAR) feature Details REGISTRATION Enable/Disable client registration endpoint Details REVOKE_SESSION Enable/Disable session revocation endpoint Details REVOKE_TOKEN Enable/Disable token revocation endpoint Details SSA Enable/Disable Software Statement Assertion(SSA) feature Details STAT Enable/Disable Stat service Details STATUS_SESSION Enable/Disable session status check endpoint Details U2F Enable/Disable support for Universal 2nd Factor(U2F) protocol Details UMA Enable/Disable support for User-Managed Access (UMA) Details USERINFO Enable/Disable OpenID Connect userinfo endpoint Details ACTIVE_SESSION # Description: Enable/Disable active session endpoint Required: No Default value: None CIBA # Description: Enable/Disable OpenID Connect Client Initiated Backchannel Authentication Flow(CIBA) flow support Required: No Default value: None CLIENTINFO # Description: Enable/Disable client info endpoint Required: No Default value: None DEVICE_AUTHZ # Description: Enable/Disable support for device authorization Required: No Default value: None END_SESSION # Description: Enable/Disable end session endpoint Required: No Default value: None HEALTH_CHECK # Description: Enable/Disable health-check endpoint Required: No Default value: None ID_GENERATION # Description: Enable/Disable ID Generation endpoint Required: No Default value: None INTROSPECTION # Description: Enable/Disable token introspection endpoint Required: No Default value: None JANS_CONFIGURATION # Description: Enable/Disable .well-known configuration endpoint Required: No Default value: None METRIC # Description: Enable/Disable metric reporter feature Required: No Default value: None PAR # Description: Enable/Disable Pushed Authorization Requests(PAR) feature Required: No Default value: None REGISTRATION # Description: Enable/Disable client registration endpoint Required: No Default value: None REVOKE_SESSION # Description: Enable/Disable session revocation endpoint Required: No Default value: None REVOKE_TOKEN # Description: Enable/Disable token revocation endpoint Required: No Default value: None SSA # Description: Enable/Disable Software Statement Assertion(SSA) feature Required: No Default value: None STAT # Description: Enable/Disable Stat service Required: No Default value: None STATUS_SESSION # Description: Enable/Disable session status check endpoint Required: No Default value: None U2F # Description: Enable/Disable support for Universal 2nd Factor(U2F) protocol Required: No Default value: None UMA # Description: Enable/Disable support for User-Managed Access (UMA) Required: No Default value: None USERINFO # Description: Enable/Disable OpenID Connect userinfo endpoint Required: No Default value: None","title":"Auth Server"},{"location":"admin/reference/json/feature-flags/janssenauthserver-feature-flags/#janssen-auth-server-feature-flags","text":"Feature Flag Name Description ACTIVE_SESSION Enable/Disable active session endpoint Details CIBA Enable/Disable OpenID Connect Client Initiated Backchannel Authentication Flow(CIBA) flow support Details CLIENTINFO Enable/Disable client info endpoint Details DEVICE_AUTHZ Enable/Disable support for device authorization Details END_SESSION Enable/Disable end session endpoint Details HEALTH_CHECK Enable/Disable health-check endpoint Details ID_GENERATION Enable/Disable ID Generation endpoint Details INTROSPECTION Enable/Disable token introspection endpoint Details JANS_CONFIGURATION Enable/Disable .well-known configuration endpoint Details METRIC Enable/Disable metric reporter feature Details PAR Enable/Disable Pushed Authorization Requests(PAR) feature Details REGISTRATION Enable/Disable client registration endpoint Details REVOKE_SESSION Enable/Disable session revocation endpoint Details REVOKE_TOKEN Enable/Disable token revocation endpoint Details SSA Enable/Disable Software Statement Assertion(SSA) feature Details STAT Enable/Disable Stat service Details STATUS_SESSION Enable/Disable session status check endpoint Details U2F Enable/Disable support for Universal 2nd Factor(U2F) protocol Details UMA Enable/Disable support for User-Managed Access (UMA) Details USERINFO Enable/Disable OpenID Connect userinfo endpoint Details","title":"Janssen Auth Server Feature Flags"},{"location":"admin/reference/json/feature-flags/janssenauthserver-feature-flags/#active_session","text":"Description: Enable/Disable active session endpoint Required: No Default value: None","title":"ACTIVE_SESSION"},{"location":"admin/reference/json/feature-flags/janssenauthserver-feature-flags/#ciba","text":"Description: Enable/Disable OpenID Connect Client Initiated Backchannel Authentication Flow(CIBA) flow support Required: No Default value: None","title":"CIBA"},{"location":"admin/reference/json/feature-flags/janssenauthserver-feature-flags/#clientinfo","text":"Description: Enable/Disable client info endpoint Required: No Default value: None","title":"CLIENTINFO"},{"location":"admin/reference/json/feature-flags/janssenauthserver-feature-flags/#device_authz","text":"Description: Enable/Disable support for device authorization Required: No Default value: None","title":"DEVICE_AUTHZ"},{"location":"admin/reference/json/feature-flags/janssenauthserver-feature-flags/#end_session","text":"Description: Enable/Disable end session endpoint Required: No Default value: None","title":"END_SESSION"},{"location":"admin/reference/json/feature-flags/janssenauthserver-feature-flags/#health_check","text":"Description: Enable/Disable health-check endpoint Required: No Default value: None","title":"HEALTH_CHECK"},{"location":"admin/reference/json/feature-flags/janssenauthserver-feature-flags/#id_generation","text":"Description: Enable/Disable ID Generation endpoint Required: No Default value: None","title":"ID_GENERATION"},{"location":"admin/reference/json/feature-flags/janssenauthserver-feature-flags/#introspection","text":"Description: Enable/Disable token introspection endpoint Required: No Default value: None","title":"INTROSPECTION"},{"location":"admin/reference/json/feature-flags/janssenauthserver-feature-flags/#jans_configuration","text":"Description: Enable/Disable .well-known configuration endpoint Required: No Default value: None","title":"JANS_CONFIGURATION"},{"location":"admin/reference/json/feature-flags/janssenauthserver-feature-flags/#metric","text":"Description: Enable/Disable metric reporter feature Required: No Default value: None","title":"METRIC"},{"location":"admin/reference/json/feature-flags/janssenauthserver-feature-flags/#par","text":"Description: Enable/Disable Pushed Authorization Requests(PAR) feature Required: No Default value: None","title":"PAR"},{"location":"admin/reference/json/feature-flags/janssenauthserver-feature-flags/#registration","text":"Description: Enable/Disable client registration endpoint Required: No Default value: None","title":"REGISTRATION"},{"location":"admin/reference/json/feature-flags/janssenauthserver-feature-flags/#revoke_session","text":"Description: Enable/Disable session revocation endpoint Required: No Default value: None","title":"REVOKE_SESSION"},{"location":"admin/reference/json/feature-flags/janssenauthserver-feature-flags/#revoke_token","text":"Description: Enable/Disable token revocation endpoint Required: No Default value: None","title":"REVOKE_TOKEN"},{"location":"admin/reference/json/feature-flags/janssenauthserver-feature-flags/#ssa","text":"Description: Enable/Disable Software Statement Assertion(SSA) feature Required: No Default value: None","title":"SSA"},{"location":"admin/reference/json/feature-flags/janssenauthserver-feature-flags/#stat","text":"Description: Enable/Disable Stat service Required: No Default value: None","title":"STAT"},{"location":"admin/reference/json/feature-flags/janssenauthserver-feature-flags/#status_session","text":"Description: Enable/Disable session status check endpoint Required: No Default value: None","title":"STATUS_SESSION"},{"location":"admin/reference/json/feature-flags/janssenauthserver-feature-flags/#u2f","text":"Description: Enable/Disable support for Universal 2nd Factor(U2F) protocol Required: No Default value: None","title":"U2F"},{"location":"admin/reference/json/feature-flags/janssenauthserver-feature-flags/#uma","text":"Description: Enable/Disable support for User-Managed Access (UMA) Required: No Default value: None","title":"UMA"},{"location":"admin/reference/json/feature-flags/janssenauthserver-feature-flags/#userinfo","text":"Description: Enable/Disable OpenID Connect userinfo endpoint Required: No Default value: None","title":"USERINFO"},{"location":"admin/reference/json/properties/","tags":["administration","auth-server","reference","properties"],"text":"Properties # Janssen Server modules are configured using properties. Each module has its own set of properties (navigate through the left navigation panel). Setting Property Values # An administrator can set properties using TUI . Each module has its own property configuration section in TUI. Properties are primarily of two types based on how the change in the value is loaded in the module at runtime. Static Properties : To load the changed property value, the respective Janssen Server module or server itself needs to be restarted manually Dynamic Properties : Changes to the dynamic property values get reloaded automatically. Reload process triggers after every 30 seconds. This does not need a restart of any server module. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Properties"},{"location":"admin/reference/json/properties/#properties","text":"Janssen Server modules are configured using properties. Each module has its own set of properties (navigate through the left navigation panel).","title":"Properties"},{"location":"admin/reference/json/properties/#setting-property-values","text":"An administrator can set properties using TUI . Each module has its own property configuration section in TUI. Properties are primarily of two types based on how the change in the value is loaded in the module at runtime. Static Properties : To load the changed property value, the respective Janssen Server module or server itself needs to be restarted manually Dynamic Properties : Changes to the dynamic property values get reloaded automatically. Reload process triggers after every 30 seconds. This does not need a restart of any server module. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Setting Property Values"},{"location":"admin/reference/json/properties/config-api-properties/","text":"Overview # Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Config API"},{"location":"admin/reference/json/properties/config-api-properties/#overview","text":"Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"admin/reference/json/properties/fido2-properties/","tags":["administration","reference","json","properties"],"text":"Fido2 Configuration Properties # Property Name Description authenticationHistoryExpiration Expiration time in seconds for approved authentication requests Details authenticatorCertsFolder Authenticators certificates folder Details baseEndpoint The base URL for Fido2 endpoints Details checkU2fAttestations Boolean value indicating if U2f attestation needs to be checked Details cleanServiceBatchChunkSize Each clean up iteration fetches chunk of expired data per base dn and removes it from storage Details cleanServiceInterval Time interval for the Clean Service in seconds Details disableJdkLogger Boolean value specifying whether to enable JDK Loggers Details externalLoggerConfiguration Path to external Fido2 logging configuration Details issuer URL using the https scheme for Issuer identifier Details loggingLayout Logging layout used for Fido2 Details loggingLevel Logging level for Fido2 logger Details mdsAccessToken MDS access token Details mdsCertsFolder MDS TOC root certificates folder Details mdsTocsFolder MDS TOC files folder Details metadataUrlsProvider String value to provide source of URLs with external metadata Details metricReporterEnabled Boolean value specifying whether metric reporter is enabled Details metricReporterInterval The interval for metric reporter in seconds Details metricReporterKeepDataDays The days to keep report data Details oldU2fMigrationEnabled Boolean value to enable disable old oxAuth U2F enrollments migration Details personCustomObjectClassList Custom object class list for dynamic person enrolment Details requestedCredentialTypes List of Requested Credential Types Details requestedParties Authenticators metadata in json format Details serverMetadataFolder Authenticators metadata in json format Details superGluuEnabled Boolean value to enable disable Super Gluu extension Details unfinishedRequestExpiration Expiration time in seconds for pending enrollment/authentication requests Details useLocalCache Boolean value to indicate if Local Cache is to be used Details userAutoEnrollment Allow to enroll users on enrollment/authentication requests Details authenticationHistoryExpiration # Description: Expiration time in seconds for approved authentication requests Required: No Default value: None authenticatorCertsFolder # Description: Authenticators certificates folder Required: No Default value: None baseEndpoint # Description: The base URL for Fido2 endpoints Required: No Default value: None checkU2fAttestations # Description: Boolean value indicating if U2f attestation needs to be checked Required: No Default value: None cleanServiceBatchChunkSize # Description: Each clean up iteration fetches chunk of expired data per base dn and removes it from storage Required: No Default value: None cleanServiceInterval # Description: Time interval for the Clean Service in seconds Required: No Default value: None disableJdkLogger # Description: Boolean value specifying whether to enable JDK Loggers Required: No Default value: None externalLoggerConfiguration # Description: Path to external Fido2 logging configuration Required: No Default value: None issuer # Description: URL using the https scheme for Issuer identifier Required: No Default value: None loggingLayout # Description: Logging layout used for Fido2 Required: No Default value: None loggingLevel # Description: Logging level for Fido2 logger Required: No Default value: None mdsAccessToken # Description: MDS access token Required: No Default value: None mdsCertsFolder # Description: MDS TOC root certificates folder Required: No Default value: None mdsTocsFolder # Description: MDS TOC files folder Required: No Default value: None metadataUrlsProvider # Description: String value to provide source of URLs with external metadata Required: No Default value: None metricReporterEnabled # Description: Boolean value specifying whether metric reporter is enabled Required: No Default value: None metricReporterInterval # Description: The interval for metric reporter in seconds Required: No Default value: None metricReporterKeepDataDays # Description: The days to keep report data Required: No Default value: None oldU2fMigrationEnabled # Description: Boolean value to enable disable old oxAuth U2F enrollments migration Required: No Default value: None personCustomObjectClassList # Description: Custom object class list for dynamic person enrolment Required: No Default value: None requestedCredentialTypes # Description: List of Requested Credential Types Required: No Default value: None requestedParties # Description: Authenticators metadata in json format Required: No Default value: None serverMetadataFolder # Description: Authenticators metadata in json format Required: No Default value: None superGluuEnabled # Description: Boolean value to enable disable Super Gluu extension Required: No Default value: None unfinishedRequestExpiration # Description: Expiration time in seconds for pending enrollment/authentication requests Required: No Default value: None useLocalCache # Description: Boolean value to indicate if Local Cache is to be used Required: No Default value: None userAutoEnrollment # Description: Allow to enroll users on enrollment/authentication requests Required: No Default value: None","title":"FIDO"},{"location":"admin/reference/json/properties/fido2-properties/#fido2-configuration-properties","text":"Property Name Description authenticationHistoryExpiration Expiration time in seconds for approved authentication requests Details authenticatorCertsFolder Authenticators certificates folder Details baseEndpoint The base URL for Fido2 endpoints Details checkU2fAttestations Boolean value indicating if U2f attestation needs to be checked Details cleanServiceBatchChunkSize Each clean up iteration fetches chunk of expired data per base dn and removes it from storage Details cleanServiceInterval Time interval for the Clean Service in seconds Details disableJdkLogger Boolean value specifying whether to enable JDK Loggers Details externalLoggerConfiguration Path to external Fido2 logging configuration Details issuer URL using the https scheme for Issuer identifier Details loggingLayout Logging layout used for Fido2 Details loggingLevel Logging level for Fido2 logger Details mdsAccessToken MDS access token Details mdsCertsFolder MDS TOC root certificates folder Details mdsTocsFolder MDS TOC files folder Details metadataUrlsProvider String value to provide source of URLs with external metadata Details metricReporterEnabled Boolean value specifying whether metric reporter is enabled Details metricReporterInterval The interval for metric reporter in seconds Details metricReporterKeepDataDays The days to keep report data Details oldU2fMigrationEnabled Boolean value to enable disable old oxAuth U2F enrollments migration Details personCustomObjectClassList Custom object class list for dynamic person enrolment Details requestedCredentialTypes List of Requested Credential Types Details requestedParties Authenticators metadata in json format Details serverMetadataFolder Authenticators metadata in json format Details superGluuEnabled Boolean value to enable disable Super Gluu extension Details unfinishedRequestExpiration Expiration time in seconds for pending enrollment/authentication requests Details useLocalCache Boolean value to indicate if Local Cache is to be used Details userAutoEnrollment Allow to enroll users on enrollment/authentication requests Details","title":"Fido2 Configuration Properties"},{"location":"admin/reference/json/properties/fido2-properties/#authenticationhistoryexpiration","text":"Description: Expiration time in seconds for approved authentication requests Required: No Default value: None","title":"authenticationHistoryExpiration"},{"location":"admin/reference/json/properties/fido2-properties/#authenticatorcertsfolder","text":"Description: Authenticators certificates folder Required: No Default value: None","title":"authenticatorCertsFolder"},{"location":"admin/reference/json/properties/fido2-properties/#baseendpoint","text":"Description: The base URL for Fido2 endpoints Required: No Default value: None","title":"baseEndpoint"},{"location":"admin/reference/json/properties/fido2-properties/#checku2fattestations","text":"Description: Boolean value indicating if U2f attestation needs to be checked Required: No Default value: None","title":"checkU2fAttestations"},{"location":"admin/reference/json/properties/fido2-properties/#cleanservicebatchchunksize","text":"Description: Each clean up iteration fetches chunk of expired data per base dn and removes it from storage Required: No Default value: None","title":"cleanServiceBatchChunkSize"},{"location":"admin/reference/json/properties/fido2-properties/#cleanserviceinterval","text":"Description: Time interval for the Clean Service in seconds Required: No Default value: None","title":"cleanServiceInterval"},{"location":"admin/reference/json/properties/fido2-properties/#disablejdklogger","text":"Description: Boolean value specifying whether to enable JDK Loggers Required: No Default value: None","title":"disableJdkLogger"},{"location":"admin/reference/json/properties/fido2-properties/#externalloggerconfiguration","text":"Description: Path to external Fido2 logging configuration Required: No Default value: None","title":"externalLoggerConfiguration"},{"location":"admin/reference/json/properties/fido2-properties/#issuer","text":"Description: URL using the https scheme for Issuer identifier Required: No Default value: None","title":"issuer"},{"location":"admin/reference/json/properties/fido2-properties/#logginglayout","text":"Description: Logging layout used for Fido2 Required: No Default value: None","title":"loggingLayout"},{"location":"admin/reference/json/properties/fido2-properties/#logginglevel","text":"Description: Logging level for Fido2 logger Required: No Default value: None","title":"loggingLevel"},{"location":"admin/reference/json/properties/fido2-properties/#mdsaccesstoken","text":"Description: MDS access token Required: No Default value: None","title":"mdsAccessToken"},{"location":"admin/reference/json/properties/fido2-properties/#mdscertsfolder","text":"Description: MDS TOC root certificates folder Required: No Default value: None","title":"mdsCertsFolder"},{"location":"admin/reference/json/properties/fido2-properties/#mdstocsfolder","text":"Description: MDS TOC files folder Required: No Default value: None","title":"mdsTocsFolder"},{"location":"admin/reference/json/properties/fido2-properties/#metadataurlsprovider","text":"Description: String value to provide source of URLs with external metadata Required: No Default value: None","title":"metadataUrlsProvider"},{"location":"admin/reference/json/properties/fido2-properties/#metricreporterenabled","text":"Description: Boolean value specifying whether metric reporter is enabled Required: No Default value: None","title":"metricReporterEnabled"},{"location":"admin/reference/json/properties/fido2-properties/#metricreporterinterval","text":"Description: The interval for metric reporter in seconds Required: No Default value: None","title":"metricReporterInterval"},{"location":"admin/reference/json/properties/fido2-properties/#metricreporterkeepdatadays","text":"Description: The days to keep report data Required: No Default value: None","title":"metricReporterKeepDataDays"},{"location":"admin/reference/json/properties/fido2-properties/#oldu2fmigrationenabled","text":"Description: Boolean value to enable disable old oxAuth U2F enrollments migration Required: No Default value: None","title":"oldU2fMigrationEnabled"},{"location":"admin/reference/json/properties/fido2-properties/#personcustomobjectclasslist","text":"Description: Custom object class list for dynamic person enrolment Required: No Default value: None","title":"personCustomObjectClassList"},{"location":"admin/reference/json/properties/fido2-properties/#requestedcredentialtypes","text":"Description: List of Requested Credential Types Required: No Default value: None","title":"requestedCredentialTypes"},{"location":"admin/reference/json/properties/fido2-properties/#requestedparties","text":"Description: Authenticators metadata in json format Required: No Default value: None","title":"requestedParties"},{"location":"admin/reference/json/properties/fido2-properties/#servermetadatafolder","text":"Description: Authenticators metadata in json format Required: No Default value: None","title":"serverMetadataFolder"},{"location":"admin/reference/json/properties/fido2-properties/#supergluuenabled","text":"Description: Boolean value to enable disable Super Gluu extension Required: No Default value: None","title":"superGluuEnabled"},{"location":"admin/reference/json/properties/fido2-properties/#unfinishedrequestexpiration","text":"Description: Expiration time in seconds for pending enrollment/authentication requests Required: No Default value: None","title":"unfinishedRequestExpiration"},{"location":"admin/reference/json/properties/fido2-properties/#uselocalcache","text":"Description: Boolean value to indicate if Local Cache is to be used Required: No Default value: None","title":"useLocalCache"},{"location":"admin/reference/json/properties/fido2-properties/#userautoenrollment","text":"Description: Allow to enroll users on enrollment/authentication requests Required: No Default value: None","title":"userAutoEnrollment"},{"location":"admin/reference/json/properties/janssenauthserver-properties/","tags":["administration","reference","json","properties"],"text":"Janssen Auth Server Configuration Properties # Property Name Description accessTokenLifetime The lifetime of the short lived Access Token Details accessTokenSigningAlgValuesSupported A list of the JWS signing algorithms (alg values) supported by the OP for the access token to encode the Claims in a JWT Details activeSessionAuthorizationScope Authorization Scope for active session Details agamaConfiguration Engine Config which offers an alternative way to build authentication flows in Janssen server Details allowAllValueForRevokeEndpoint Boolean value true allow all value for revoke endpoint Details allowBlankValuesInDiscoveryResponse Boolean value specifying whether to allow blank values in discovery response Details allowEndSessionWithUnmatchedSid default value false. If true, sid check will be skipped Details allowIdTokenWithoutImplicitGrantType Specifies if a token without implicit grant types is allowed Details allowPostLogoutRedirectWithoutValidation Allows post-logout redirect without validation for the End Session endpoint (still AS validates it against clientWhiteList url pattern property) Details allowSpontaneousScopes Specifies whether to allow spontaneous scopes Details authenticationFilters This list details filters for user authentication Details authenticationFiltersEnabled Boolean value specifying whether to enable user authentication filters Details authenticationProtectionConfiguration Authentication Brute Force Protection Configuration Details authorizationCodeLifetime The lifetime of the Authorization Code Details authorizationEncryptionAlgValuesSupported List of authorization encryption algorithms supported by this OP Details authorizationEncryptionEncValuesSupported A list of the authorization encryption algorithms supported Details authorizationEndpoint The authorization endpoint URL Details authorizationRequestCustomAllowedParameters This list details the allowed custom parameters for authorization requests Details authorizationSigningAlgValuesSupported List of authorization signing algorithms supported by this OP Details backchannelAuthenticationEndpoint Backchannel Authentication Endpoint Details backchannelAuthenticationRequestSigningAlgValuesSupported Backchannel Authentication Request Signing Alg Values Supported Details backchannelAuthenticationResponseExpiresIn Backchannel Authentication Response Expires In Details backchannelAuthenticationResponseInterval Backchannel Authentication Response Interval Details backchannelBindingMessagePattern Backchannel Binding Message Pattern Details backchannelClientId Backchannel Client Id Details backchannelDeviceRegistrationEndpoint Backchannel Device Registration Endpoint Details backchannelLoginHintClaims Backchannel Login Hint Claims Details backchannelRedirectUri Backchannel Redirect Uri Details backchannelRequestsProcessorJobChunkSize Each backchannel request processor iteration fetches chunk of data to be processed Details backchannelRequestsProcessorJobIntervalSec Specifies the allowable elapsed time in seconds backchannel request processor executes Details backchannelTokenDeliveryModesSupported Backchannel Token Delivery Modes Supported Details backchannelUserCodeParameterSupported Backchannel User Code Parameter Supported Details baseEndpoint The base URL for endpoints Details blockWebviewAuthorizationEnabled Enable/Disable block authorizations that originate from Webview (Mobile apps). Details changeSessionIdOnAuthentication Boolean value specifying whether change session_id on authentication. Default value is true Details checkSessionIFrame URL for an OP IFrame that supports cross-origin communications for session state information with the RP Client using the HTML5 postMessage API Details checkUserPresenceOnRefreshToken Check whether user exists and is active before creating RefreshToken. Set it to true if check is needed(Default value is false - don't check. Details cibaEndUserNotificationConfig CIBA End User Notification Config Details cibaGrantLifeExtraTimeSec Specifies the CIBA Grant life extra time in seconds Details cibaMaxExpirationTimeAllowedSec Specifies the CIBA token expiration time in seconds Details claimsLocalesSupported This list details the languages and scripts supported for values in the claims being returned Details claimsParameterSupported Specifies whether the OP supports use of the claims parameter Details claimTypesSupported A list of the Claim Types that the OpenID Provider supports Details cleanServiceBatchChunkSize Clean service chunk size which is used during clean up Details cleanServiceInterval Time interval for the Clean Service in seconds Details clientAuthenticationFilters This list details filters for client authentication Details clientAuthenticationFiltersEnabled Boolean value specifying whether to enable client authentication filters Details clientBlackList This list specified which client redirection URIs are black-listed Details clientInfoEndpoint The Client Info endpoint URL Details clientRegDefaultToCodeFlowWithRefresh Boolean value specifying whether to add Authorization Code Flow with Refresh grant during client registratio Details clientWhiteList This list specifies which client redirection URIs are white-listed Details configurationUpdateInterval The interval for configuration update in seconds Details consentGatheringScriptBackwardCompatibility Boolean value specifying whether to turn on Consent Gathering Script backward compatibility mode. If true AS will pick up script with higher level globally. If false (default) AS will pick up script based on client configuration Details cookieDomain Sets cookie domain for all cookies created by OP Details corsConfigurationFilters This list specifies the CORS configuration filters Details cssLocation The location for CSS files Details customHeadersWithAuthorizationResponse Choose whether to enable the custom response header parameter to return custom headers with the authorization response Details dateFormatterPatterns List of key value date formatters, e.g. 'userinfo: 'yyyy-MM-dd', etc. Details dcrAuthorizationWithClientCredentials Boolean value indicating if DCR authorization to be performed using client credentials Details dcrAuthorizationWithMTLS Boolean value indicating if DCR authorization allowed with MTLS Details dcrForbidExpirationTimeInRequest Boolean value specifying whether to allow to set client's expiration time in seconds during dynamic registration. Details dcrSignatureValidationEnabled Boolean value enables DCR signature validation. Default is false Details dcrSignatureValidationJwks Specifies JWKS for all DCR's validations Details dcrSignatureValidationJwksUri Specifies JWKS URI for all DCR's validations Details dcrSignatureValidationSharedSecret Specifies shared secret for Dynamic Client Registration Details dcrSignatureValidationSoftwareStatementJwksClaim Specifies claim name inside software statement. Value of claim should point to inlined JWKS Details dcrSignatureValidationSoftwareStatementJwksURIClaim Specifies claim name inside software statement. Value of claim should point to JWKS URI Details dcrSsaValidationConfigs DCR SSA Validation configurations used to perform validation of SSA or DCR Details defaultSignatureAlgorithm The default signature algorithm to sign ID Tokens Details defaultSubjectType The default subject type used for dynamic client registration Details deviceAuthzAcr Device authz acr Details deviceAuthzEndpoint URL for the Device Authorization Details deviceAuthzRequestExpiresIn Expiration time given for device authorization requests Details deviceAuthzResponseTypeToProcessAuthz Response type used to process device authz requests Details deviceAuthzTokenPollInterval Default interval returned to the client to process device token requests Details disableAuthnForMaxAgeZero Boolean value specifying whether to disable authentication when max_age=0 Details disableJdkLogger Choose whether to disable JDK loggers Details disablePromptConsent Boolean value specifying whether to disable prompt=consent Details disablePromptLogin Boolean value specifying whether to disable prompt=login Details disableU2fEndpoint Choose whether to disable U2F endpoints Details discoveryAllowedKeys List of configuration response claim allowed to be displayed in discovery endpoint Details discoveryCacheLifetimeInMinutes Lifetime of discovery cache Details discoveryDenyKeys List of configuration response claims which must not be displayed in discovery endpoint response Details displayValuesSupported A list of the display parameter values that the OpenID Provider supports Details dnName DN of certificate issuer Details dpopJtiCacheTime Demonstration of Proof-of-Possession (DPoP) cache time Details dpopNonceCacheTime Demonstration of Proof-of-Possession (DPoP) nonce cache time Details dpopSigningAlgValuesSupported Demonstration of Proof-of-Possession (DPoP) authorization signing algorithms supported Details dpopTimeframe Demonstration of Proof-of-Possession (DPoP) timeout Details dpopUseNonce Demonstration of Proof-of-Possession (DPoP) use nonce Details dynamicGrantTypeDefault This list details which OAuth 2.0 grant types can be set up with the client registration API Details dynamicRegistrationAllowedPasswordGrantScopes List of grant scopes for dynamic registration Details dynamicRegistrationCustomAttributes This list details the custom attributes allowed for dynamic registration Details dynamicRegistrationCustomObjectClass LDAP custom object class for dynamic registration Details dynamicRegistrationDefaultCustomAttributes This map provides default custom attributes with values for dynamic registration Details dynamicRegistrationExpirationTime Expiration time in seconds for clients created with dynamic registration, 0 or -1 means never expire Details dynamicRegistrationPasswordGrantTypeEnabled Boolean value specifying whether to enable Password Grant Type during Dynamic Registration Details dynamicRegistrationPersistClientAuthorizations Boolean value specifying whether to persist client authorizations Details dynamicRegistrationScopesParamEnabled Boolean value specifying whether to enable scopes parameter in dynamic registration Details enableClientGrantTypeUpdate Choose if client can update Grant Type values Details enabledOAuthAuditLogging enable OAuth Audit Logging Details endSessionEndpoint URL at the OP to which an RP can perform a redirect to request that the end user be logged out at the OP Details endSessionWithAccessToken Choose whether to accept access tokens to call end_session endpoint Details errorHandlingMethod A list of possible error handling methods. Possible values: remote (send error back to RP), internal (show error page) Details errorReasonEnabled Boolean value specifying whether to return detailed reason of the error from AS. Default value is false Details expirationNotificatorEnabled Boolean value specifying whether expiration notificator is enabled (used to identify expiration for persistence that support TTL, like Couchbase) Details expirationNotificatorIntervalInSeconds The expiration notificator interval in second Details expirationNotificatorMapSizeLimit The expiration notificator maximum size limit Details externalLoggerConfiguration The path to the external log4j2 logging configuration Details externalUriWhiteList This list specifies which external URIs can be called by AS (if empty any URI can be called) Details fapiCompatibility Boolean value specifying whether to turn on FAPI compatibility mode. If true AS behaves in more strict mode Details featureFlags List of enabled feature flags Details forceIdTokenHintPrecense Boolean value specifying whether force id_token_hint parameter presence Details forceOfflineAccessScopeToEnableRefreshToken Boolean value specifying whether force offline_access scope to enable refresh_token grant type. Default value is true Details forceSignedRequestObject Boolean value true indicates that signed request object is mandatory Details frontChannelLogoutSessionSupported Choose whether to support front channel session logout Details grantTypesAndResponseTypesAutofixEnabled Boolean value specifying whether to Grant types and Response types can be auto fixed Details grantTypesSupported This list details which OAuth 2.0 grant types are supported by this OP Details httpLoggingEnabled Enable/disable request/response logging filter Details httpLoggingExcludePaths This list details the base URIs for which the request/response logging filter will not record activity Details httpLoggingResponseBodyContent Defines if Response body will be logged. Default value is false Details idGenerationEndpoint ID Generation endpoint URL Details idTokenEncryptionAlgValuesSupported A list of the JWE encryption algorithms (alg values) supported by the OP for the ID Token to encode the Claims in a JWT Details idTokenEncryptionEncValuesSupported A list of the JWE encryption algorithms (enc values) supported by the OP for the ID Token to encode the Claims in a JWT Details idTokenFilterClaimsBasedOnAccessToken Boolean value specifying whether idToken filters claims based on accessToken Details idTokenLifetime The lifetime of the ID Token Details idTokenSigningAlgValuesSupported A list of the JWS signing algorithms (alg values) supported by the OP for the ID Token to encode the Claims in a JWT Details idTokenTokenBindingCnfValuesSupported Array containing a list of the JWT Confirmation Method member names supported by the OP for Token Binding of ID Tokens. The presence of this parameter indicates that the OpenID Provider supports Token Binding of ID Tokens. If omitted, the default is that the OpenID Provider does not support Token Binding of ID Tokens Details imgLocation The location for image files Details includeSidInResponse Boolean value specifying whether to include sessionId in response Details introspectionAccessTokenMustHaveIntrospectionScope If True, rejects introspection requests if access_token does not have the 'introspection' scope in its authorization header. Comparing to 'uma_protection', 'introspection' scope is not allowed for dynamic registration' Details introspectionAccessTokenMustHaveUmaProtectionScope If True, rejects introspection requests if access_token does not have the uma_protection scope in its authorization header Details introspectionEndpoint Introspection endpoint URL Details introspectionResponseScopesBackwardCompatibility Boolean value specifying introspection response backward compatibility mode Details introspectionScriptBackwardCompatibility Boolean value specifying whether switch off client's introspection scripts (true value) and run all scripts that exists on server. Default value is false Details introspectionSkipAuthorization Specifies if authorization to be skipped for introspection Details invalidateSessionCookiesAfterAuthorizationFlow Boolean value to specify whether to invalidate session_id and consent_session_id cookies right after successful or unsuccessful authorization Details issuer URL using the https scheme that OP asserts as Issuer identifier Details jansElevenDeleteKeyEndpoint oxEleven Delete Key endpoint URL Details jansElevenGenerateKeyEndpoint oxEleven Generate Key endpoint URL Details jansElevenSignEndpoint oxEleven Sign endpoint UR Details jansElevenTestModeToken oxEleven Test Mode Token Details jansElevenVerifySignatureEndpoint oxEleven Verify Signature endpoint URL Details jansId URL for the Inum generator Service Details jansOpenIdConnectVersion OpenID Connect Version Details jmsBrokerURISet JMS Broker URI Set Details jmsPassword JMS Password Details jmsUserName JMS UserName Details jsLocation The location for JavaScript files Details jwksAlgorithmsSupported A list of algorithms that will be used in JWKS endpoint Details jwksUri URL of the OP's JSON Web Key Set (JWK) document. This contains the signing key(s) the RP uses to validate signatures from the OP Details keepAuthenticatorAttributesOnAcrChange Boolean value specifying whether to keep authenticator attributes on ACR change Details keyAlgsAllowedForGeneration List of algorithm allowed to be used for key generation Details keyRegenerationEnabled Boolean value specifying whether to regenerate keys Details keyRegenerationInterval The interval for key regeneration in hours Details keySelectionStrategy Key Selection Strategy : OLDER, NEWER, FIRST Details keySignWithSameKeyButDiffAlg Specifies if signing to be done with same key but apply different algorithms Details keyStoreFile The Key Store File (JKS) Details keyStoreSecret The Key Store password Details legacyIdTokenClaims Choose whether to include claims in ID tokens Details logClientIdOnClientAuthentication Choose if application should log the Client ID on client authentication Details logClientNameOnClientAuthentication Choose if application should log the Client Name on client authentication Details loggingLayout Logging layout used for Jans Authorization Server loggers Details loggingLevel Specify the logging level of loggers Details logNotFoundEntityAsError Boolean value specifying whether to log not_found entity exception as error or as trace. Default value is false (trace). Details metricReporterInterval The interval for metric reporter in seconds Details metricReporterKeepDataDays The days to keep metric reported data Details mtlsAuthorizationEndpoint URL for Mutual TLS (mTLS) Client Authentication and Certificate-Bound Access Tokens (MTLS) Endpoint Details mtlsCheckSessionIFrame URL for Mutual TLS (mTLS) IFrame that supports cross-origin communications for session state information with the RP Client using the HTML5 postMessage API Details mtlsClientInfoEndpoint URL for Mutual TLS (mTLS) Client Info endpoint Details mtlsDeviceAuthzEndpoint Mutual TLS (mTLS) device authorization endpoint URL Details mtlsEndSessionEndpoint URL for Mutual TLS (mTLS) to which an RP can perform a redirect to request that the end user be logged out at the OP Details mtlsIdGenerationEndpoint Mutual TLS (mTLS) ID generation endpoint URL Details mtlsIntrospectionEndpoint Mutual TLS (mTLS) introspection endpoint URL Details mtlsJwksUri URL for Mutual TLS (mTLS) of the OP's JSON Web Key Set (JWK) document Details mtlsParEndpoint Mutual TLS (mTLS) Pushed Authorization Requests(PAR) endpoint URL Details mtlsRegistrationEndpoint Mutual TLS (mTLS) registration endpoint URL Details mtlsTokenEndpoint URL for Mutual TLS (mTLS) Authorization token Endpoint Details mtlsTokenRevocationEndpoint URL for Mutual TLS (mTLS) Authorization token revocation endpoint Details mtlsUserInfoEndpoint Mutual TLS (mTLS) user info endpoint URL Details openIdConfigurationEndpoint URL for the Open ID Connect Configuration Endpoint Details openIdDiscoveryEndpoint Discovery endpoint URL Details openidScopeBackwardCompatibility Set to false to only allow token endpoint request for openid scope with grant type equals to authorization_code, restrict access to userinfo to scope openid and only return id_token if scope contains openid Details openidSubAttribute Specifies which LDAP attribute is used for the subject identifier claim Details opPolicyUri URL that the OpenID Provider provides to the person registering the Client to read about the OP's requirements on how the Relying Party can use the data provided by the OP Details opTosUri URL that the OpenID Provider provides to the person registering the Client to read about OpenID Provider's terms of service Details pairwiseCalculationKey Key to calculate algorithmic pairwise IDs Details pairwiseCalculationSalt Salt to calculate algorithmic pairwise IDs Details pairwiseIdType the pairwise ID type Details parEndpoint URL for Pushed Authorisation Request (PAR) Endpoint Details persistIdToken Specifies whether to persist id_token (otherwise saves into cache) Details persistRefreshToken Specifies whether to persist refresh_token (otherwise saves into cache) Details personCustomObjectClassList This list details LDAP custom object classes for dynamic person enrollment Details publicSubjectIdentifierPerClientEnabled Specifies whether public subject identifier is allowed per client Details redirectUrisRegexEnabled Enable/Disable redirect uris validation using regular expression Details refreshTokenExtendLifetimeOnRotation Boolean value specifying whether to extend refresh tokens on rotation Details refreshTokenLifetime The lifetime of the Refresh Token Details registrationEndpoint Registration endpoint URL Details rejectEndSessionIfIdTokenExpired default value false. If true and id_token is not found in db, request is rejected Details rejectJwtWithNoneAlg Boolean value specifying whether reject JWT requested or validated with algorithm None. Default value is true Details removeRefreshTokensForClientOnLogout Boolean value specifying whether to remove Refresh Tokens on logout. Default value is true Details requestObjectEncryptionAlgValuesSupported A list of the JWE encryption algorithms (alg values) supported by the OP for Request Objects Details requestObjectEncryptionEncValuesSupported A list of the JWE encryption algorithms (enc values) supported by the OP for Request Objects Details requestObjectSigningAlgValuesSupported A list of the JWS signing algorithms (alg values) supported by the OP for Request Objects Details requestParameterSupported Boolean value specifying whether the OP supports use of the request parameter Details requestUriBlockList Block list for requestUri that can come to Authorization Endpoint (e.g. localhost) Details requestUriHashVerificationEnabled Boolean value specifying whether the OP supports use of the request_uri hash verification Details requestUriParameterSupported Boolean value specifying whether the OP supports use of the request_uri parameter Details requirePar Boolean value to indicate of Pushed Authorisation Request(PAR)is required Details requirePkce Boolean value true check for Proof Key for Code Exchange (PKCE) Details requireRequestObjectEncryption Boolean value true encrypts request object Details requireRequestUriRegistration Boolean value specifying whether the OP requires any request_uri values used to be pre-registered using the request_uris registration parameter Details responseModesSupported This list details which OAuth 2.0 response modes are supported by this OP Details responseTypesSupported This list details which OAuth 2.0 response_type values are supported by this OP. Details returnClientSecretOnRead Boolean value specifying whether a client_secret is returned on client GET or PUT. Set to true by default which means to return secret Details returnDeviceSecretFromAuthzEndpoint Details rotateClientRegistrationAccessTokenOnUsage Boolean value specifying whether to rotate client registration access token after each usage Details rotateDeviceSecret Details sectorIdentifierCacheLifetimeInMinutes Sector Identifier cache lifetime in minutes Details serverSessionIdLifetime Dedicated property to control lifetime of the server side OP session object in seconds. Overrides sessionIdLifetime. By default value is 0, so object lifetime equals sessionIdLifetime (which sets both cookie and object expiration). It can be useful if goal is to keep different values for client cookie and server object Details serviceDocumentation URL of a page containing human-readable information that developers might want or need to know when using the OpenID Provider Details sessionIdLifetime The lifetime of session id in seconds. If 0 or -1 then expiration is not set. session_id cookie expires when browser session ends Details sessionIdPersistInCache Boolean value specifying whether to persist session_id in cache Details sessionIdPersistOnPromptNone Boolean value specifying whether to persist session ID on prompt none Details sessionIdRequestParameterEnabled Boolean value specifying whether to enable session_id HTTP request parameter Details sessionIdUnauthenticatedUnusedLifetime The lifetime for unused unauthenticated session states Details sessionIdUnusedLifetime The lifetime for unused session states Details shareSubjectIdBetweenClientsWithSameSectorId When true, clients with the same Sector ID also share the same Subject ID Details skipAuthenticationFilterOptionsMethod Force Authentication Filtker to process OPTIONS request Details skipAuthorizationForOpenIdScopeAndPairwiseId Choose whether to skip authorization if a client has an OpenId scope and a pairwise ID Details skipRefreshTokenDuringRefreshing Boolean value specifying whether to skip refreshing tokens on refreshing Details softwareStatementValidationClaimName Validation claim name for software statement Details softwareStatementValidationType Validation type used for software statement Details spontaneousScopeLifetime The lifetime of spontaneous scope in seconds Details ssaConfiguration SSA Configuration Details statAuthorizationScope Scope required for Statistical Authorization Details staticDecryptionKid Specifies static decryption Kid Details staticKid Specifies static Kid Details statTimerIntervalInSeconds Statistical data capture time interval Details subjectIdentifiersPerClientSupported A list of the subject identifiers supported per client Details subjectTypesSupported This list details which Subject Identifier types that the OP supports. Valid types include pairwise and public. Details tokenEndpoint The token endpoint URL Details tokenEndpointAuthMethodsSupported A list of Client Authentication methods supported by this Token Endpoint Details tokenEndpointAuthSigningAlgValuesSupported A list of the JWS signing algorithms (alg values) supported by the Token Endpoint for the signature on the JWT used to authenticate the Client at the Token Endpoint for the private_key_jwt and client_secret_jwt authentication methods Details tokenRevocationEndpoint The URL for the access_token or refresh_token revocation endpoint Details trustedClientEnabled Boolean value specifying whether a client is trusted and no authorization is required Details trustedSsaIssuers List of trusted SSA issuers with configuration (e.g. automatically granted scopes). Details uiLocalesSupported This list details the languages and scripts supported for the user interface Details umaAddScopesAutomatically Add UMA scopes automatically if it is not registered yet Details umaConfigurationEndpoint UMA Configuration endpoint URL Details umaGrantAccessIfNoPolicies Specify whether to grant access to resources if there is no any policies associated with scopes Details umaPctLifetime UMA PCT lifetime Details umaResourceLifetime UMA Resource lifetime Details umaRestrictResourceToAssociatedClient Restrict access to resource by associated client Details umaRptAsJwt Issue RPT as JWT or as random string Details umaRptLifetime UMA RPT lifetime Details umaTicketLifetime UMA ticket lifetime Details umaValidateClaimToken Validate claim_token as id_token assuming it is issued by local id Details updateClientAccessTime Choose if application should update oxLastAccessTime/oxLastLogonTime attributes upon client authentication Details updateUserLastLogonTime Choose if application should update oxLastLogonTime attribute upon user authentication Details useHighestLevelScriptIfAcrScriptNotFound Enable/Disable usage of highest level script in case ACR script does not exist Details useLocalCache Cache in local memory cache attributes, scopes, clients and organization entry with expiration 60 seconds Details useNestedJwtDuringEncryption Boolean value specifying whether to use nested Jwt during encryption Details userInfoEncryptionAlgValuesSupported This JSON Array lists which JWS encryption algorithms (alg values) [JWA] can be used by for the UserInfo endpoint to encode the claims in a JWT Details userInfoEncryptionEncValuesSupported This JSON Array lists which JWS encryption algorithms (enc values) [JWA] can be used by for the UserInfo endpoint to encode the claims in a JWT Details userInfoEndpoint The User Info endpoint URL Details userInfoSigningAlgValuesSupported This JSON Array lists which JWS signing algorithms (alg values) [JWA] can be used by for the UserInfo endpoint to encode the claims in a JWT Details webKeysStorage Web Key Storage Type Details accessTokenLifetime # Description: The lifetime of the short lived Access Token Required: No Default value: None accessTokenSigningAlgValuesSupported # Description: A list of the JWS signing algorithms (alg values) supported by the OP for the access token to encode the Claims in a JWT Required: No Default value: None activeSessionAuthorizationScope # Description: Authorization Scope for active session Required: No Default value: None agamaConfiguration # Description: Engine Config which offers an alternative way to build authentication flows in Janssen server Required: No Default value: None allowAllValueForRevokeEndpoint # Description: Boolean value true allow all value for revoke endpoint Required: No Default value: false allowBlankValuesInDiscoveryResponse # Description: Boolean value specifying whether to allow blank values in discovery response Required: No Default value: false allowEndSessionWithUnmatchedSid # Description: default value false. If true, sid check will be skipped Required: No Default value: false allowIdTokenWithoutImplicitGrantType # Description: Specifies if a token without implicit grant types is allowed Required: No Default value: None allowPostLogoutRedirectWithoutValidation # Description: Allows post-logout redirect without validation for the End Session endpoint (still AS validates it against clientWhiteList url pattern property) Required: No Default value: false allowSpontaneousScopes # Description: Specifies whether to allow spontaneous scopes Required: No Default value: None authenticationFilters # Description: This list details filters for user authentication Required: No Default value: None authenticationFiltersEnabled # Description: Boolean value specifying whether to enable user authentication filters Required: No Default value: None authenticationProtectionConfiguration # Description: Authentication Brute Force Protection Configuration Required: No Default value: None authorizationCodeLifetime # Description: The lifetime of the Authorization Code Required: No Default value: None authorizationEncryptionAlgValuesSupported # Description: List of authorization encryption algorithms supported by this OP Required: No Default value: None authorizationEncryptionEncValuesSupported # Description: A list of the authorization encryption algorithms supported Required: No Default value: None authorizationEndpoint # Description: The authorization endpoint URL Required: No Default value: None authorizationRequestCustomAllowedParameters # Description: This list details the allowed custom parameters for authorization requests Required: No Default value: None authorizationSigningAlgValuesSupported # Description: List of authorization signing algorithms supported by this OP Required: No Default value: None backchannelAuthenticationEndpoint # Description: Backchannel Authentication Endpoint Required: No Default value: None backchannelAuthenticationRequestSigningAlgValuesSupported # Description: Backchannel Authentication Request Signing Alg Values Supported Required: No Default value: None backchannelAuthenticationResponseExpiresIn # Description: Backchannel Authentication Response Expires In Required: No Default value: None backchannelAuthenticationResponseInterval # Description: Backchannel Authentication Response Interval Required: No Default value: None backchannelBindingMessagePattern # Description: Backchannel Binding Message Pattern Required: No Default value: None backchannelClientId # Description: Backchannel Client Id Required: No Default value: None backchannelDeviceRegistrationEndpoint # Description: Backchannel Device Registration Endpoint Required: No Default value: None backchannelLoginHintClaims # Description: Backchannel Login Hint Claims Required: No Default value: None backchannelRedirectUri # Description: Backchannel Redirect Uri Required: No Default value: None backchannelRequestsProcessorJobChunkSize # Description: Each backchannel request processor iteration fetches chunk of data to be processed Required: No Default value: None backchannelRequestsProcessorJobIntervalSec # Description: Specifies the allowable elapsed time in seconds backchannel request processor executes Required: No Default value: None backchannelTokenDeliveryModesSupported # Description: Backchannel Token Delivery Modes Supported Required: No Default value: None backchannelUserCodeParameterSupported # Description: Backchannel User Code Parameter Supported Required: No Default value: None baseEndpoint # Description: The base URL for endpoints Required: No Default value: None blockWebviewAuthorizationEnabled # Description: Enable/Disable block authorizations that originate from Webview (Mobile apps). Required: No Default value: false changeSessionIdOnAuthentication # Description: Boolean value specifying whether change session_id on authentication. Default value is true Required: No Default value: true checkSessionIFrame # Description: URL for an OP IFrame that supports cross-origin communications for session state information with the RP Client using the HTML5 postMessage API Required: No Default value: None checkUserPresenceOnRefreshToken # Description: Check whether user exists and is active before creating RefreshToken. Set it to true if check is needed(Default value is false - don't check. Required: No Default value: false cibaEndUserNotificationConfig # Description: CIBA End User Notification Config Required: No Default value: None cibaGrantLifeExtraTimeSec # Description: Specifies the CIBA Grant life extra time in seconds Required: No Default value: None cibaMaxExpirationTimeAllowedSec # Description: Specifies the CIBA token expiration time in seconds Required: No Default value: None claimsLocalesSupported # Description: This list details the languages and scripts supported for values in the claims being returned Required: No Default value: None claimsParameterSupported # Description: Specifies whether the OP supports use of the claims parameter Required: No Default value: None claimTypesSupported # Description: A list of the Claim Types that the OpenID Provider supports Required: No Default value: None cleanServiceBatchChunkSize # Description: Clean service chunk size which is used during clean up Required: No Default value: 100 cleanServiceInterval # Description: Time interval for the Clean Service in seconds Required: No Default value: None clientAuthenticationFilters # Description: This list details filters for client authentication Required: No Default value: None clientAuthenticationFiltersEnabled # Description: Boolean value specifying whether to enable client authentication filters Required: No Default value: None clientBlackList # Description: This list specified which client redirection URIs are black-listed Required: No Default value: None clientInfoEndpoint # Description: The Client Info endpoint URL Required: No Default value: None clientRegDefaultToCodeFlowWithRefresh # Description: Boolean value specifying whether to add Authorization Code Flow with Refresh grant during client registratio Required: No Default value: None clientWhiteList # Description: This list specifies which client redirection URIs are white-listed Required: No Default value: None configurationUpdateInterval # Description: The interval for configuration update in seconds Required: No Default value: None consentGatheringScriptBackwardCompatibility # Description: Boolean value specifying whether to turn on Consent Gathering Script backward compatibility mode. If true AS will pick up script with higher level globally. If false (default) AS will pick up script based on client configuration Required: No Default value: false cookieDomain # Description: Sets cookie domain for all cookies created by OP Required: No Default value: None corsConfigurationFilters # Description: This list specifies the CORS configuration filters Required: No Default value: None cssLocation # Description: The location for CSS files Required: No Default value: None customHeadersWithAuthorizationResponse # Description: Choose whether to enable the custom response header parameter to return custom headers with the authorization response Required: No Default value: None dateFormatterPatterns # Description: List of key value date formatters, e.g. 'userinfo: 'yyyy-MM-dd', etc. Required: No Default value: None dcrAuthorizationWithClientCredentials # Description: Boolean value indicating if DCR authorization to be performed using client credentials Required: No Default value: false dcrAuthorizationWithMTLS # Description: Boolean value indicating if DCR authorization allowed with MTLS Required: No Default value: false dcrForbidExpirationTimeInRequest # Description: Boolean value specifying whether to allow to set client's expiration time in seconds during dynamic registration. Required: No Default value: false dcrSignatureValidationEnabled # Description: Boolean value enables DCR signature validation. Default is false Required: No Default value: false dcrSignatureValidationJwks # Description: Specifies JWKS for all DCR's validations Required: No Default value: None dcrSignatureValidationJwksUri # Description: Specifies JWKS URI for all DCR's validations Required: No Default value: None dcrSignatureValidationSharedSecret # Description: Specifies shared secret for Dynamic Client Registration Required: No Default value: None dcrSignatureValidationSoftwareStatementJwksClaim # Description: Specifies claim name inside software statement. Value of claim should point to inlined JWKS Required: No Default value: None dcrSignatureValidationSoftwareStatementJwksURIClaim # Description: Specifies claim name inside software statement. Value of claim should point to JWKS URI Required: No Default value: None dcrSsaValidationConfigs # Description: DCR SSA Validation configurations used to perform validation of SSA or DCR Required: No Default value: None defaultSignatureAlgorithm # Description: The default signature algorithm to sign ID Tokens Required: No Default value: None defaultSubjectType # Description: The default subject type used for dynamic client registration Required: No Default value: None deviceAuthzAcr # Description: Device authz acr Required: No Default value: None deviceAuthzEndpoint # Description: URL for the Device Authorization Required: No Default value: None deviceAuthzRequestExpiresIn # Description: Expiration time given for device authorization requests Required: No Default value: None deviceAuthzResponseTypeToProcessAuthz # Description: Response type used to process device authz requests Required: No Default value: None deviceAuthzTokenPollInterval # Description: Default interval returned to the client to process device token requests Required: No Default value: None disableAuthnForMaxAgeZero # Description: Boolean value specifying whether to disable authentication when max_age=0 Required: No Default value: false disableJdkLogger # Description: Choose whether to disable JDK loggers Required: No Default value: true disablePromptConsent # Description: Boolean value specifying whether to disable prompt=consent Required: No Default value: false disablePromptLogin # Description: Boolean value specifying whether to disable prompt=login Required: No Default value: false disableU2fEndpoint # Description: Choose whether to disable U2F endpoints Required: No Default value: false discoveryAllowedKeys # Description: List of configuration response claim allowed to be displayed in discovery endpoint Required: No Default value: None discoveryCacheLifetimeInMinutes # Description: Lifetime of discovery cache Required: No Default value: 60 discoveryDenyKeys # Description: List of configuration response claims which must not be displayed in discovery endpoint response Required: No Default value: None displayValuesSupported # Description: A list of the display parameter values that the OpenID Provider supports Required: No Default value: None dnName # Description: DN of certificate issuer Required: No Default value: None dpopJtiCacheTime # Description: Demonstration of Proof-of-Possession (DPoP) cache time Required: No Default value: 3600 dpopNonceCacheTime # Description: Demonstration of Proof-of-Possession (DPoP) nonce cache time Required: No Default value: 3600 dpopSigningAlgValuesSupported # Description: Demonstration of Proof-of-Possession (DPoP) authorization signing algorithms supported Required: No Default value: None dpopTimeframe # Description: Demonstration of Proof-of-Possession (DPoP) timeout Required: No Default value: 5 dpopUseNonce # Description: Demonstration of Proof-of-Possession (DPoP) use nonce Required: No Default value: false dynamicGrantTypeDefault # Description: This list details which OAuth 2.0 grant types can be set up with the client registration API Required: No Default value: None dynamicRegistrationAllowedPasswordGrantScopes # Description: List of grant scopes for dynamic registration Required: No Default value: None dynamicRegistrationCustomAttributes # Description: This list details the custom attributes allowed for dynamic registration Required: No Default value: None dynamicRegistrationCustomObjectClass # Description: LDAP custom object class for dynamic registration Required: No Default value: None dynamicRegistrationDefaultCustomAttributes # Description: This map provides default custom attributes with values for dynamic registration Required: No Default value: None dynamicRegistrationExpirationTime # Description: Expiration time in seconds for clients created with dynamic registration, 0 or -1 means never expire Required: No Default value: -1 dynamicRegistrationPasswordGrantTypeEnabled # Description: Boolean value specifying whether to enable Password Grant Type during Dynamic Registration Required: No Default value: false dynamicRegistrationPersistClientAuthorizations # Description: Boolean value specifying whether to persist client authorizations Required: No Default value: None dynamicRegistrationScopesParamEnabled # Description: Boolean value specifying whether to enable scopes parameter in dynamic registration Required: No Default value: None enableClientGrantTypeUpdate # Description: Choose if client can update Grant Type values Required: No Default value: None enabledOAuthAuditLogging # Description: enable OAuth Audit Logging Required: No Default value: None endSessionEndpoint # Description: URL at the OP to which an RP can perform a redirect to request that the end user be logged out at the OP Required: No Default value: None endSessionWithAccessToken # Description: Choose whether to accept access tokens to call end_session endpoint Required: No Default value: None errorHandlingMethod # Description: A list of possible error handling methods. Possible values: remote (send error back to RP), internal (show error page) Required: No Default value: remote errorReasonEnabled # Description: Boolean value specifying whether to return detailed reason of the error from AS. Default value is false Required: No Default value: false expirationNotificatorEnabled # Description: Boolean value specifying whether expiration notificator is enabled (used to identify expiration for persistence that support TTL, like Couchbase) Required: No Default value: false expirationNotificatorIntervalInSeconds # Description: The expiration notificator interval in second Required: No Default value: None expirationNotificatorMapSizeLimit # Description: The expiration notificator maximum size limit Required: No Default value: None externalLoggerConfiguration # Description: The path to the external log4j2 logging configuration Required: No Default value: None externalUriWhiteList # Description: This list specifies which external URIs can be called by AS (if empty any URI can be called) Required: No Default value: None fapiCompatibility # Description: Boolean value specifying whether to turn on FAPI compatibility mode. If true AS behaves in more strict mode Required: No Default value: false featureFlags # Description: List of enabled feature flags Required: No Default value: None forceIdTokenHintPrecense # Description: Boolean value specifying whether force id_token_hint parameter presence Required: No Default value: false forceOfflineAccessScopeToEnableRefreshToken # Description: Boolean value specifying whether force offline_access scope to enable refresh_token grant type. Default value is true Required: No Default value: true forceSignedRequestObject # Description: Boolean value true indicates that signed request object is mandatory Required: No Default value: false frontChannelLogoutSessionSupported # Description: Choose whether to support front channel session logout Required: No Default value: None grantTypesAndResponseTypesAutofixEnabled # Description: Boolean value specifying whether to Grant types and Response types can be auto fixed Required: No Default value: None grantTypesSupported # Description: This list details which OAuth 2.0 grant types are supported by this OP Required: No Default value: None httpLoggingEnabled # Description: Enable/disable request/response logging filter Required: No Default value: None httpLoggingExcludePaths # Description: This list details the base URIs for which the request/response logging filter will not record activity Required: No Default value: None httpLoggingResponseBodyContent # Description: Defines if Response body will be logged. Default value is false Required: No Default value: false idGenerationEndpoint # Description: ID Generation endpoint URL Required: No Default value: None idTokenEncryptionAlgValuesSupported # Description: A list of the JWE encryption algorithms (alg values) supported by the OP for the ID Token to encode the Claims in a JWT Required: No Default value: None idTokenEncryptionEncValuesSupported # Description: A list of the JWE encryption algorithms (enc values) supported by the OP for the ID Token to encode the Claims in a JWT Required: No Default value: None idTokenFilterClaimsBasedOnAccessToken # Description: Boolean value specifying whether idToken filters claims based on accessToken Required: No Default value: None idTokenLifetime # Description: The lifetime of the ID Token Required: No Default value: None idTokenSigningAlgValuesSupported # Description: A list of the JWS signing algorithms (alg values) supported by the OP for the ID Token to encode the Claims in a JWT Required: No Default value: None idTokenTokenBindingCnfValuesSupported # Description: Array containing a list of the JWT Confirmation Method member names supported by the OP for Token Binding of ID Tokens. The presence of this parameter indicates that the OpenID Provider supports Token Binding of ID Tokens. If omitted, the default is that the OpenID Provider does not support Token Binding of ID Tokens Required: No Default value: None imgLocation # Description: The location for image files Required: No Default value: None includeSidInResponse # Description: Boolean value specifying whether to include sessionId in response Required: No Default value: false introspectionAccessTokenMustHaveIntrospectionScope # Description: If True, rejects introspection requests if access_token does not have the 'introspection' scope in its authorization header. Comparing to 'uma_protection', 'introspection' scope is not allowed for dynamic registration' Required: No Default value: false introspectionAccessTokenMustHaveUmaProtectionScope # Description: If True, rejects introspection requests if access_token does not have the uma_protection scope in its authorization header Required: No Default value: false introspectionEndpoint # Description: Introspection endpoint URL Required: No Default value: None introspectionResponseScopesBackwardCompatibility # Description: Boolean value specifying introspection response backward compatibility mode Required: No Default value: false introspectionScriptBackwardCompatibility # Description: Boolean value specifying whether switch off client's introspection scripts (true value) and run all scripts that exists on server. Default value is false Required: No Default value: false introspectionSkipAuthorization # Description: Specifies if authorization to be skipped for introspection Required: No Default value: None invalidateSessionCookiesAfterAuthorizationFlow # Description: Boolean value to specify whether to invalidate session_id and consent_session_id cookies right after successful or unsuccessful authorization Required: No Default value: false issuer # Description: URL using the https scheme that OP asserts as Issuer identifier Required: No Default value: None jansElevenDeleteKeyEndpoint # Description: oxEleven Delete Key endpoint URL Required: No Default value: None jansElevenGenerateKeyEndpoint # Description: oxEleven Generate Key endpoint URL Required: No Default value: None jansElevenSignEndpoint # Description: oxEleven Sign endpoint UR Required: No Default value: None jansElevenTestModeToken # Description: oxEleven Test Mode Token Required: No Default value: None jansElevenVerifySignatureEndpoint # Description: oxEleven Verify Signature endpoint URL Required: No Default value: None jansId # Description: URL for the Inum generator Service Required: No Default value: None jansOpenIdConnectVersion # Description: OpenID Connect Version Required: No Default value: None jmsBrokerURISet # Description: JMS Broker URI Set Required: No Default value: None jmsPassword # Description: JMS Password Required: No Default value: None jmsUserName # Description: JMS UserName Required: No Default value: None jsLocation # Description: The location for JavaScript files Required: No Default value: None jwksAlgorithmsSupported # Description: A list of algorithms that will be used in JWKS endpoint Required: No Default value: None jwksUri # Description: URL of the OP's JSON Web Key Set (JWK) document. This contains the signing key(s) the RP uses to validate signatures from the OP Required: No Default value: None keepAuthenticatorAttributesOnAcrChange # Description: Boolean value specifying whether to keep authenticator attributes on ACR change Required: No Default value: false keyAlgsAllowedForGeneration # Description: List of algorithm allowed to be used for key generation Required: No Default value: None keyRegenerationEnabled # Description: Boolean value specifying whether to regenerate keys Required: No Default value: None keyRegenerationInterval # Description: The interval for key regeneration in hours Required: No Default value: None keySelectionStrategy # Description: Key Selection Strategy : OLDER, NEWER, FIRST Required: No Default value: OLDER keySignWithSameKeyButDiffAlg # Description: Specifies if signing to be done with same key but apply different algorithms Required: No Default value: None keyStoreFile # Description: The Key Store File (JKS) Required: No Default value: None keyStoreSecret # Description: The Key Store password Required: No Default value: None legacyIdTokenClaims # Description: Choose whether to include claims in ID tokens Required: No Default value: None logClientIdOnClientAuthentication # Description: Choose if application should log the Client ID on client authentication Required: No Default value: None logClientNameOnClientAuthentication # Description: Choose if application should log the Client Name on client authentication Required: No Default value: None loggingLayout # Description: Logging layout used for Jans Authorization Server loggers Required: No Default value: None loggingLevel # Description: Specify the logging level of loggers Required: No Default value: None logNotFoundEntityAsError # Description: Boolean value specifying whether to log not_found entity exception as error or as trace. Default value is false (trace). Required: No Default value: None metricReporterInterval # Description: The interval for metric reporter in seconds Required: No Default value: None metricReporterKeepDataDays # Description: The days to keep metric reported data Required: No Default value: None mtlsAuthorizationEndpoint # Description: URL for Mutual TLS (mTLS) Client Authentication and Certificate-Bound Access Tokens (MTLS) Endpoint Required: No Default value: None mtlsCheckSessionIFrame # Description: URL for Mutual TLS (mTLS) IFrame that supports cross-origin communications for session state information with the RP Client using the HTML5 postMessage API Required: No Default value: None mtlsClientInfoEndpoint # Description: URL for Mutual TLS (mTLS) Client Info endpoint Required: No Default value: None mtlsDeviceAuthzEndpoint # Description: Mutual TLS (mTLS) device authorization endpoint URL Required: No Default value: None mtlsEndSessionEndpoint # Description: URL for Mutual TLS (mTLS) to which an RP can perform a redirect to request that the end user be logged out at the OP Required: No Default value: None mtlsIdGenerationEndpoint # Description: Mutual TLS (mTLS) ID generation endpoint URL Required: No Default value: None mtlsIntrospectionEndpoint # Description: Mutual TLS (mTLS) introspection endpoint URL Required: No Default value: None mtlsJwksUri # Description: URL for Mutual TLS (mTLS) of the OP's JSON Web Key Set (JWK) document Required: No Default value: None mtlsParEndpoint # Description: Mutual TLS (mTLS) Pushed Authorization Requests(PAR) endpoint URL Required: No Default value: None mtlsRegistrationEndpoint # Description: Mutual TLS (mTLS) registration endpoint URL Required: No Default value: None mtlsTokenEndpoint # Description: URL for Mutual TLS (mTLS) Authorization token Endpoint Required: No Default value: None mtlsTokenRevocationEndpoint # Description: URL for Mutual TLS (mTLS) Authorization token revocation endpoint Required: No Default value: None mtlsUserInfoEndpoint # Description: Mutual TLS (mTLS) user info endpoint URL Required: No Default value: None openIdConfigurationEndpoint # Description: URL for the Open ID Connect Configuration Endpoint Required: No Default value: None openIdDiscoveryEndpoint # Description: Discovery endpoint URL Required: No Default value: None openidScopeBackwardCompatibility # Description: Set to false to only allow token endpoint request for openid scope with grant type equals to authorization_code, restrict access to userinfo to scope openid and only return id_token if scope contains openid Required: No Default value: false openidSubAttribute # Description: Specifies which LDAP attribute is used for the subject identifier claim Required: No Default value: None opPolicyUri # Description: URL that the OpenID Provider provides to the person registering the Client to read about the OP's requirements on how the Relying Party can use the data provided by the OP Required: No Default value: None opTosUri # Description: URL that the OpenID Provider provides to the person registering the Client to read about OpenID Provider's terms of service Required: No Default value: None pairwiseCalculationKey # Description: Key to calculate algorithmic pairwise IDs Required: No Default value: None pairwiseCalculationSalt # Description: Salt to calculate algorithmic pairwise IDs Required: No Default value: None pairwiseIdType # Description: the pairwise ID type Required: No Default value: None parEndpoint # Description: URL for Pushed Authorisation Request (PAR) Endpoint Required: No Default value: None persistIdToken # Description: Specifies whether to persist id_token (otherwise saves into cache) Required: No Default value: false persistRefreshToken # Description: Specifies whether to persist refresh_token (otherwise saves into cache) Required: No Default value: true personCustomObjectClassList # Description: This list details LDAP custom object classes for dynamic person enrollment Required: No Default value: None publicSubjectIdentifierPerClientEnabled # Description: Specifies whether public subject identifier is allowed per client Required: No Default value: false redirectUrisRegexEnabled # Description: Enable/Disable redirect uris validation using regular expression Required: No Default value: false refreshTokenExtendLifetimeOnRotation # Description: Boolean value specifying whether to extend refresh tokens on rotation Required: No Default value: false refreshTokenLifetime # Description: The lifetime of the Refresh Token Required: No Default value: None registrationEndpoint # Description: Registration endpoint URL Required: No Default value: None rejectEndSessionIfIdTokenExpired # Description: default value false. If true and id_token is not found in db, request is rejected Required: No Default value: false rejectJwtWithNoneAlg # Description: Boolean value specifying whether reject JWT requested or validated with algorithm None. Default value is true Required: No Default value: true removeRefreshTokensForClientOnLogout # Description: Boolean value specifying whether to remove Refresh Tokens on logout. Default value is true Required: No Default value: true requestObjectEncryptionAlgValuesSupported # Description: A list of the JWE encryption algorithms (alg values) supported by the OP for Request Objects Required: No Default value: None requestObjectEncryptionEncValuesSupported # Description: A list of the JWE encryption algorithms (enc values) supported by the OP for Request Objects Required: No Default value: None requestObjectSigningAlgValuesSupported # Description: A list of the JWS signing algorithms (alg values) supported by the OP for Request Objects Required: No Default value: None requestParameterSupported # Description: Boolean value specifying whether the OP supports use of the request parameter Required: No Default value: None requestUriBlockList # Description: Block list for requestUri that can come to Authorization Endpoint (e.g. localhost) Required: No Default value: None requestUriHashVerificationEnabled # Description: Boolean value specifying whether the OP supports use of the request_uri hash verification Required: No Default value: None requestUriParameterSupported # Description: Boolean value specifying whether the OP supports use of the request_uri parameter Required: No Default value: None requirePar # Description: Boolean value to indicate of Pushed Authorisation Request(PAR)is required Required: No Default value: false requirePkce # Description: Boolean value true check for Proof Key for Code Exchange (PKCE) Required: No Default value: false requireRequestObjectEncryption # Description: Boolean value true encrypts request object Required: No Default value: false requireRequestUriRegistration # Description: Boolean value specifying whether the OP requires any request_uri values used to be pre-registered using the request_uris registration parameter Required: No Default value: None responseModesSupported # Description: This list details which OAuth 2.0 response modes are supported by this OP Required: No Default value: None responseTypesSupported # Description: This list details which OAuth 2.0 response_type values are supported by this OP. Required: No Default value: By default, every combination of code, token and id_token is supported. returnClientSecretOnRead # Description: Boolean value specifying whether a client_secret is returned on client GET or PUT. Set to true by default which means to return secret Required: No Default value: false returnDeviceSecretFromAuthzEndpoint # Description: Required: No Default value: false rotateClientRegistrationAccessTokenOnUsage # Description: Boolean value specifying whether to rotate client registration access token after each usage Required: No Default value: false rotateDeviceSecret # Description: Required: No Default value: false sectorIdentifierCacheLifetimeInMinutes # Description: Sector Identifier cache lifetime in minutes Required: No Default value: 1440 serverSessionIdLifetime # Description: Dedicated property to control lifetime of the server side OP session object in seconds. Overrides sessionIdLifetime. By default value is 0, so object lifetime equals sessionIdLifetime (which sets both cookie and object expiration). It can be useful if goal is to keep different values for client cookie and server object Required: No Default value: None serviceDocumentation # Description: URL of a page containing human-readable information that developers might want or need to know when using the OpenID Provider Required: No Default value: None sessionIdLifetime # Description: The lifetime of session id in seconds. If 0 or -1 then expiration is not set. session_id cookie expires when browser session ends Required: No Default value: None sessionIdPersistInCache # Description: Boolean value specifying whether to persist session_id in cache Required: No Default value: false sessionIdPersistOnPromptNone # Description: Boolean value specifying whether to persist session ID on prompt none Required: No Default value: None sessionIdRequestParameterEnabled # Description: Boolean value specifying whether to enable session_id HTTP request parameter Required: No Default value: false sessionIdUnauthenticatedUnusedLifetime # Description: The lifetime for unused unauthenticated session states Required: No Default value: None sessionIdUnusedLifetime # Description: The lifetime for unused session states Required: No Default value: None shareSubjectIdBetweenClientsWithSameSectorId # Description: When true, clients with the same Sector ID also share the same Subject ID Required: No Default value: false skipAuthenticationFilterOptionsMethod # Description: Force Authentication Filtker to process OPTIONS request Required: No Default value: true skipAuthorizationForOpenIdScopeAndPairwiseId # Description: Choose whether to skip authorization if a client has an OpenId scope and a pairwise ID Required: No Default value: false skipRefreshTokenDuringRefreshing # Description: Boolean value specifying whether to skip refreshing tokens on refreshing Required: No Default value: false softwareStatementValidationClaimName # Description: Validation claim name for software statement Required: No Default value: None softwareStatementValidationType # Description: Validation type used for software statement Required: No Default value: None spontaneousScopeLifetime # Description: The lifetime of spontaneous scope in seconds Required: No Default value: None ssaConfiguration # Description: SSA Configuration Required: No Default value: None statAuthorizationScope # Description: Scope required for Statistical Authorization Required: No Default value: None staticDecryptionKid # Description: Specifies static decryption Kid Required: No Default value: None staticKid # Description: Specifies static Kid Required: No Default value: None statTimerIntervalInSeconds # Description: Statistical data capture time interval Required: No Default value: None subjectIdentifiersPerClientSupported # Description: A list of the subject identifiers supported per client Required: No Default value: None subjectTypesSupported # Description: This list details which Subject Identifier types that the OP supports. Valid types include pairwise and public. Required: No Default value: None tokenEndpoint # Description: The token endpoint URL Required: No Default value: None tokenEndpointAuthMethodsSupported # Description: A list of Client Authentication methods supported by this Token Endpoint Required: No Default value: None tokenEndpointAuthSigningAlgValuesSupported # Description: A list of the JWS signing algorithms (alg values) supported by the Token Endpoint for the signature on the JWT used to authenticate the Client at the Token Endpoint for the private_key_jwt and client_secret_jwt authentication methods Required: No Default value: None tokenRevocationEndpoint # Description: The URL for the access_token or refresh_token revocation endpoint Required: No Default value: None trustedClientEnabled # Description: Boolean value specifying whether a client is trusted and no authorization is required Required: No Default value: None trustedSsaIssuers # Description: List of trusted SSA issuers with configuration (e.g. automatically granted scopes). Required: No Default value: None uiLocalesSupported # Description: This list details the languages and scripts supported for the user interface Required: No Default value: None umaAddScopesAutomatically # Description: Add UMA scopes automatically if it is not registered yet Required: No Default value: None umaConfigurationEndpoint # Description: UMA Configuration endpoint URL Required: No Default value: None umaGrantAccessIfNoPolicies # Description: Specify whether to grant access to resources if there is no any policies associated with scopes Required: No Default value: false umaPctLifetime # Description: UMA PCT lifetime Required: No Default value: None umaResourceLifetime # Description: UMA Resource lifetime Required: No Default value: None umaRestrictResourceToAssociatedClient # Description: Restrict access to resource by associated client Required: No Default value: false umaRptAsJwt # Description: Issue RPT as JWT or as random string Required: No Default value: false umaRptLifetime # Description: UMA RPT lifetime Required: No Default value: None umaTicketLifetime # Description: UMA ticket lifetime Required: No Default value: None umaValidateClaimToken # Description: Validate claim_token as id_token assuming it is issued by local id Required: No Default value: false updateClientAccessTime # Description: Choose if application should update oxLastAccessTime/oxLastLogonTime attributes upon client authentication Required: No Default value: None updateUserLastLogonTime # Description: Choose if application should update oxLastLogonTime attribute upon user authentication Required: No Default value: None useHighestLevelScriptIfAcrScriptNotFound # Description: Enable/Disable usage of highest level script in case ACR script does not exist Required: No Default value: false useLocalCache # Description: Cache in local memory cache attributes, scopes, clients and organization entry with expiration 60 seconds Required: No Default value: false useNestedJwtDuringEncryption # Description: Boolean value specifying whether to use nested Jwt during encryption Required: No Default value: true userInfoEncryptionAlgValuesSupported # Description: This JSON Array lists which JWS encryption algorithms (alg values) [JWA] can be used by for the UserInfo endpoint to encode the claims in a JWT Required: No Default value: None userInfoEncryptionEncValuesSupported # Description: This JSON Array lists which JWS encryption algorithms (enc values) [JWA] can be used by for the UserInfo endpoint to encode the claims in a JWT Required: No Default value: None userInfoEndpoint # Description: The User Info endpoint URL Required: No Default value: None userInfoSigningAlgValuesSupported # Description: This JSON Array lists which JWS signing algorithms (alg values) [JWA] can be used by for the UserInfo endpoint to encode the claims in a JWT Required: No Default value: None webKeysStorage # Description: Web Key Storage Type Required: No Default value: None","title":"Auth Server"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#janssen-auth-server-configuration-properties","text":"Property Name Description accessTokenLifetime The lifetime of the short lived Access Token Details accessTokenSigningAlgValuesSupported A list of the JWS signing algorithms (alg values) supported by the OP for the access token to encode the Claims in a JWT Details activeSessionAuthorizationScope Authorization Scope for active session Details agamaConfiguration Engine Config which offers an alternative way to build authentication flows in Janssen server Details allowAllValueForRevokeEndpoint Boolean value true allow all value for revoke endpoint Details allowBlankValuesInDiscoveryResponse Boolean value specifying whether to allow blank values in discovery response Details allowEndSessionWithUnmatchedSid default value false. If true, sid check will be skipped Details allowIdTokenWithoutImplicitGrantType Specifies if a token without implicit grant types is allowed Details allowPostLogoutRedirectWithoutValidation Allows post-logout redirect without validation for the End Session endpoint (still AS validates it against clientWhiteList url pattern property) Details allowSpontaneousScopes Specifies whether to allow spontaneous scopes Details authenticationFilters This list details filters for user authentication Details authenticationFiltersEnabled Boolean value specifying whether to enable user authentication filters Details authenticationProtectionConfiguration Authentication Brute Force Protection Configuration Details authorizationCodeLifetime The lifetime of the Authorization Code Details authorizationEncryptionAlgValuesSupported List of authorization encryption algorithms supported by this OP Details authorizationEncryptionEncValuesSupported A list of the authorization encryption algorithms supported Details authorizationEndpoint The authorization endpoint URL Details authorizationRequestCustomAllowedParameters This list details the allowed custom parameters for authorization requests Details authorizationSigningAlgValuesSupported List of authorization signing algorithms supported by this OP Details backchannelAuthenticationEndpoint Backchannel Authentication Endpoint Details backchannelAuthenticationRequestSigningAlgValuesSupported Backchannel Authentication Request Signing Alg Values Supported Details backchannelAuthenticationResponseExpiresIn Backchannel Authentication Response Expires In Details backchannelAuthenticationResponseInterval Backchannel Authentication Response Interval Details backchannelBindingMessagePattern Backchannel Binding Message Pattern Details backchannelClientId Backchannel Client Id Details backchannelDeviceRegistrationEndpoint Backchannel Device Registration Endpoint Details backchannelLoginHintClaims Backchannel Login Hint Claims Details backchannelRedirectUri Backchannel Redirect Uri Details backchannelRequestsProcessorJobChunkSize Each backchannel request processor iteration fetches chunk of data to be processed Details backchannelRequestsProcessorJobIntervalSec Specifies the allowable elapsed time in seconds backchannel request processor executes Details backchannelTokenDeliveryModesSupported Backchannel Token Delivery Modes Supported Details backchannelUserCodeParameterSupported Backchannel User Code Parameter Supported Details baseEndpoint The base URL for endpoints Details blockWebviewAuthorizationEnabled Enable/Disable block authorizations that originate from Webview (Mobile apps). Details changeSessionIdOnAuthentication Boolean value specifying whether change session_id on authentication. Default value is true Details checkSessionIFrame URL for an OP IFrame that supports cross-origin communications for session state information with the RP Client using the HTML5 postMessage API Details checkUserPresenceOnRefreshToken Check whether user exists and is active before creating RefreshToken. Set it to true if check is needed(Default value is false - don't check. Details cibaEndUserNotificationConfig CIBA End User Notification Config Details cibaGrantLifeExtraTimeSec Specifies the CIBA Grant life extra time in seconds Details cibaMaxExpirationTimeAllowedSec Specifies the CIBA token expiration time in seconds Details claimsLocalesSupported This list details the languages and scripts supported for values in the claims being returned Details claimsParameterSupported Specifies whether the OP supports use of the claims parameter Details claimTypesSupported A list of the Claim Types that the OpenID Provider supports Details cleanServiceBatchChunkSize Clean service chunk size which is used during clean up Details cleanServiceInterval Time interval for the Clean Service in seconds Details clientAuthenticationFilters This list details filters for client authentication Details clientAuthenticationFiltersEnabled Boolean value specifying whether to enable client authentication filters Details clientBlackList This list specified which client redirection URIs are black-listed Details clientInfoEndpoint The Client Info endpoint URL Details clientRegDefaultToCodeFlowWithRefresh Boolean value specifying whether to add Authorization Code Flow with Refresh grant during client registratio Details clientWhiteList This list specifies which client redirection URIs are white-listed Details configurationUpdateInterval The interval for configuration update in seconds Details consentGatheringScriptBackwardCompatibility Boolean value specifying whether to turn on Consent Gathering Script backward compatibility mode. If true AS will pick up script with higher level globally. If false (default) AS will pick up script based on client configuration Details cookieDomain Sets cookie domain for all cookies created by OP Details corsConfigurationFilters This list specifies the CORS configuration filters Details cssLocation The location for CSS files Details customHeadersWithAuthorizationResponse Choose whether to enable the custom response header parameter to return custom headers with the authorization response Details dateFormatterPatterns List of key value date formatters, e.g. 'userinfo: 'yyyy-MM-dd', etc. Details dcrAuthorizationWithClientCredentials Boolean value indicating if DCR authorization to be performed using client credentials Details dcrAuthorizationWithMTLS Boolean value indicating if DCR authorization allowed with MTLS Details dcrForbidExpirationTimeInRequest Boolean value specifying whether to allow to set client's expiration time in seconds during dynamic registration. Details dcrSignatureValidationEnabled Boolean value enables DCR signature validation. Default is false Details dcrSignatureValidationJwks Specifies JWKS for all DCR's validations Details dcrSignatureValidationJwksUri Specifies JWKS URI for all DCR's validations Details dcrSignatureValidationSharedSecret Specifies shared secret for Dynamic Client Registration Details dcrSignatureValidationSoftwareStatementJwksClaim Specifies claim name inside software statement. Value of claim should point to inlined JWKS Details dcrSignatureValidationSoftwareStatementJwksURIClaim Specifies claim name inside software statement. Value of claim should point to JWKS URI Details dcrSsaValidationConfigs DCR SSA Validation configurations used to perform validation of SSA or DCR Details defaultSignatureAlgorithm The default signature algorithm to sign ID Tokens Details defaultSubjectType The default subject type used for dynamic client registration Details deviceAuthzAcr Device authz acr Details deviceAuthzEndpoint URL for the Device Authorization Details deviceAuthzRequestExpiresIn Expiration time given for device authorization requests Details deviceAuthzResponseTypeToProcessAuthz Response type used to process device authz requests Details deviceAuthzTokenPollInterval Default interval returned to the client to process device token requests Details disableAuthnForMaxAgeZero Boolean value specifying whether to disable authentication when max_age=0 Details disableJdkLogger Choose whether to disable JDK loggers Details disablePromptConsent Boolean value specifying whether to disable prompt=consent Details disablePromptLogin Boolean value specifying whether to disable prompt=login Details disableU2fEndpoint Choose whether to disable U2F endpoints Details discoveryAllowedKeys List of configuration response claim allowed to be displayed in discovery endpoint Details discoveryCacheLifetimeInMinutes Lifetime of discovery cache Details discoveryDenyKeys List of configuration response claims which must not be displayed in discovery endpoint response Details displayValuesSupported A list of the display parameter values that the OpenID Provider supports Details dnName DN of certificate issuer Details dpopJtiCacheTime Demonstration of Proof-of-Possession (DPoP) cache time Details dpopNonceCacheTime Demonstration of Proof-of-Possession (DPoP) nonce cache time Details dpopSigningAlgValuesSupported Demonstration of Proof-of-Possession (DPoP) authorization signing algorithms supported Details dpopTimeframe Demonstration of Proof-of-Possession (DPoP) timeout Details dpopUseNonce Demonstration of Proof-of-Possession (DPoP) use nonce Details dynamicGrantTypeDefault This list details which OAuth 2.0 grant types can be set up with the client registration API Details dynamicRegistrationAllowedPasswordGrantScopes List of grant scopes for dynamic registration Details dynamicRegistrationCustomAttributes This list details the custom attributes allowed for dynamic registration Details dynamicRegistrationCustomObjectClass LDAP custom object class for dynamic registration Details dynamicRegistrationDefaultCustomAttributes This map provides default custom attributes with values for dynamic registration Details dynamicRegistrationExpirationTime Expiration time in seconds for clients created with dynamic registration, 0 or -1 means never expire Details dynamicRegistrationPasswordGrantTypeEnabled Boolean value specifying whether to enable Password Grant Type during Dynamic Registration Details dynamicRegistrationPersistClientAuthorizations Boolean value specifying whether to persist client authorizations Details dynamicRegistrationScopesParamEnabled Boolean value specifying whether to enable scopes parameter in dynamic registration Details enableClientGrantTypeUpdate Choose if client can update Grant Type values Details enabledOAuthAuditLogging enable OAuth Audit Logging Details endSessionEndpoint URL at the OP to which an RP can perform a redirect to request that the end user be logged out at the OP Details endSessionWithAccessToken Choose whether to accept access tokens to call end_session endpoint Details errorHandlingMethod A list of possible error handling methods. Possible values: remote (send error back to RP), internal (show error page) Details errorReasonEnabled Boolean value specifying whether to return detailed reason of the error from AS. Default value is false Details expirationNotificatorEnabled Boolean value specifying whether expiration notificator is enabled (used to identify expiration for persistence that support TTL, like Couchbase) Details expirationNotificatorIntervalInSeconds The expiration notificator interval in second Details expirationNotificatorMapSizeLimit The expiration notificator maximum size limit Details externalLoggerConfiguration The path to the external log4j2 logging configuration Details externalUriWhiteList This list specifies which external URIs can be called by AS (if empty any URI can be called) Details fapiCompatibility Boolean value specifying whether to turn on FAPI compatibility mode. If true AS behaves in more strict mode Details featureFlags List of enabled feature flags Details forceIdTokenHintPrecense Boolean value specifying whether force id_token_hint parameter presence Details forceOfflineAccessScopeToEnableRefreshToken Boolean value specifying whether force offline_access scope to enable refresh_token grant type. Default value is true Details forceSignedRequestObject Boolean value true indicates that signed request object is mandatory Details frontChannelLogoutSessionSupported Choose whether to support front channel session logout Details grantTypesAndResponseTypesAutofixEnabled Boolean value specifying whether to Grant types and Response types can be auto fixed Details grantTypesSupported This list details which OAuth 2.0 grant types are supported by this OP Details httpLoggingEnabled Enable/disable request/response logging filter Details httpLoggingExcludePaths This list details the base URIs for which the request/response logging filter will not record activity Details httpLoggingResponseBodyContent Defines if Response body will be logged. Default value is false Details idGenerationEndpoint ID Generation endpoint URL Details idTokenEncryptionAlgValuesSupported A list of the JWE encryption algorithms (alg values) supported by the OP for the ID Token to encode the Claims in a JWT Details idTokenEncryptionEncValuesSupported A list of the JWE encryption algorithms (enc values) supported by the OP for the ID Token to encode the Claims in a JWT Details idTokenFilterClaimsBasedOnAccessToken Boolean value specifying whether idToken filters claims based on accessToken Details idTokenLifetime The lifetime of the ID Token Details idTokenSigningAlgValuesSupported A list of the JWS signing algorithms (alg values) supported by the OP for the ID Token to encode the Claims in a JWT Details idTokenTokenBindingCnfValuesSupported Array containing a list of the JWT Confirmation Method member names supported by the OP for Token Binding of ID Tokens. The presence of this parameter indicates that the OpenID Provider supports Token Binding of ID Tokens. If omitted, the default is that the OpenID Provider does not support Token Binding of ID Tokens Details imgLocation The location for image files Details includeSidInResponse Boolean value specifying whether to include sessionId in response Details introspectionAccessTokenMustHaveIntrospectionScope If True, rejects introspection requests if access_token does not have the 'introspection' scope in its authorization header. Comparing to 'uma_protection', 'introspection' scope is not allowed for dynamic registration' Details introspectionAccessTokenMustHaveUmaProtectionScope If True, rejects introspection requests if access_token does not have the uma_protection scope in its authorization header Details introspectionEndpoint Introspection endpoint URL Details introspectionResponseScopesBackwardCompatibility Boolean value specifying introspection response backward compatibility mode Details introspectionScriptBackwardCompatibility Boolean value specifying whether switch off client's introspection scripts (true value) and run all scripts that exists on server. Default value is false Details introspectionSkipAuthorization Specifies if authorization to be skipped for introspection Details invalidateSessionCookiesAfterAuthorizationFlow Boolean value to specify whether to invalidate session_id and consent_session_id cookies right after successful or unsuccessful authorization Details issuer URL using the https scheme that OP asserts as Issuer identifier Details jansElevenDeleteKeyEndpoint oxEleven Delete Key endpoint URL Details jansElevenGenerateKeyEndpoint oxEleven Generate Key endpoint URL Details jansElevenSignEndpoint oxEleven Sign endpoint UR Details jansElevenTestModeToken oxEleven Test Mode Token Details jansElevenVerifySignatureEndpoint oxEleven Verify Signature endpoint URL Details jansId URL for the Inum generator Service Details jansOpenIdConnectVersion OpenID Connect Version Details jmsBrokerURISet JMS Broker URI Set Details jmsPassword JMS Password Details jmsUserName JMS UserName Details jsLocation The location for JavaScript files Details jwksAlgorithmsSupported A list of algorithms that will be used in JWKS endpoint Details jwksUri URL of the OP's JSON Web Key Set (JWK) document. This contains the signing key(s) the RP uses to validate signatures from the OP Details keepAuthenticatorAttributesOnAcrChange Boolean value specifying whether to keep authenticator attributes on ACR change Details keyAlgsAllowedForGeneration List of algorithm allowed to be used for key generation Details keyRegenerationEnabled Boolean value specifying whether to regenerate keys Details keyRegenerationInterval The interval for key regeneration in hours Details keySelectionStrategy Key Selection Strategy : OLDER, NEWER, FIRST Details keySignWithSameKeyButDiffAlg Specifies if signing to be done with same key but apply different algorithms Details keyStoreFile The Key Store File (JKS) Details keyStoreSecret The Key Store password Details legacyIdTokenClaims Choose whether to include claims in ID tokens Details logClientIdOnClientAuthentication Choose if application should log the Client ID on client authentication Details logClientNameOnClientAuthentication Choose if application should log the Client Name on client authentication Details loggingLayout Logging layout used for Jans Authorization Server loggers Details loggingLevel Specify the logging level of loggers Details logNotFoundEntityAsError Boolean value specifying whether to log not_found entity exception as error or as trace. Default value is false (trace). Details metricReporterInterval The interval for metric reporter in seconds Details metricReporterKeepDataDays The days to keep metric reported data Details mtlsAuthorizationEndpoint URL for Mutual TLS (mTLS) Client Authentication and Certificate-Bound Access Tokens (MTLS) Endpoint Details mtlsCheckSessionIFrame URL for Mutual TLS (mTLS) IFrame that supports cross-origin communications for session state information with the RP Client using the HTML5 postMessage API Details mtlsClientInfoEndpoint URL for Mutual TLS (mTLS) Client Info endpoint Details mtlsDeviceAuthzEndpoint Mutual TLS (mTLS) device authorization endpoint URL Details mtlsEndSessionEndpoint URL for Mutual TLS (mTLS) to which an RP can perform a redirect to request that the end user be logged out at the OP Details mtlsIdGenerationEndpoint Mutual TLS (mTLS) ID generation endpoint URL Details mtlsIntrospectionEndpoint Mutual TLS (mTLS) introspection endpoint URL Details mtlsJwksUri URL for Mutual TLS (mTLS) of the OP's JSON Web Key Set (JWK) document Details mtlsParEndpoint Mutual TLS (mTLS) Pushed Authorization Requests(PAR) endpoint URL Details mtlsRegistrationEndpoint Mutual TLS (mTLS) registration endpoint URL Details mtlsTokenEndpoint URL for Mutual TLS (mTLS) Authorization token Endpoint Details mtlsTokenRevocationEndpoint URL for Mutual TLS (mTLS) Authorization token revocation endpoint Details mtlsUserInfoEndpoint Mutual TLS (mTLS) user info endpoint URL Details openIdConfigurationEndpoint URL for the Open ID Connect Configuration Endpoint Details openIdDiscoveryEndpoint Discovery endpoint URL Details openidScopeBackwardCompatibility Set to false to only allow token endpoint request for openid scope with grant type equals to authorization_code, restrict access to userinfo to scope openid and only return id_token if scope contains openid Details openidSubAttribute Specifies which LDAP attribute is used for the subject identifier claim Details opPolicyUri URL that the OpenID Provider provides to the person registering the Client to read about the OP's requirements on how the Relying Party can use the data provided by the OP Details opTosUri URL that the OpenID Provider provides to the person registering the Client to read about OpenID Provider's terms of service Details pairwiseCalculationKey Key to calculate algorithmic pairwise IDs Details pairwiseCalculationSalt Salt to calculate algorithmic pairwise IDs Details pairwiseIdType the pairwise ID type Details parEndpoint URL for Pushed Authorisation Request (PAR) Endpoint Details persistIdToken Specifies whether to persist id_token (otherwise saves into cache) Details persistRefreshToken Specifies whether to persist refresh_token (otherwise saves into cache) Details personCustomObjectClassList This list details LDAP custom object classes for dynamic person enrollment Details publicSubjectIdentifierPerClientEnabled Specifies whether public subject identifier is allowed per client Details redirectUrisRegexEnabled Enable/Disable redirect uris validation using regular expression Details refreshTokenExtendLifetimeOnRotation Boolean value specifying whether to extend refresh tokens on rotation Details refreshTokenLifetime The lifetime of the Refresh Token Details registrationEndpoint Registration endpoint URL Details rejectEndSessionIfIdTokenExpired default value false. If true and id_token is not found in db, request is rejected Details rejectJwtWithNoneAlg Boolean value specifying whether reject JWT requested or validated with algorithm None. Default value is true Details removeRefreshTokensForClientOnLogout Boolean value specifying whether to remove Refresh Tokens on logout. Default value is true Details requestObjectEncryptionAlgValuesSupported A list of the JWE encryption algorithms (alg values) supported by the OP for Request Objects Details requestObjectEncryptionEncValuesSupported A list of the JWE encryption algorithms (enc values) supported by the OP for Request Objects Details requestObjectSigningAlgValuesSupported A list of the JWS signing algorithms (alg values) supported by the OP for Request Objects Details requestParameterSupported Boolean value specifying whether the OP supports use of the request parameter Details requestUriBlockList Block list for requestUri that can come to Authorization Endpoint (e.g. localhost) Details requestUriHashVerificationEnabled Boolean value specifying whether the OP supports use of the request_uri hash verification Details requestUriParameterSupported Boolean value specifying whether the OP supports use of the request_uri parameter Details requirePar Boolean value to indicate of Pushed Authorisation Request(PAR)is required Details requirePkce Boolean value true check for Proof Key for Code Exchange (PKCE) Details requireRequestObjectEncryption Boolean value true encrypts request object Details requireRequestUriRegistration Boolean value specifying whether the OP requires any request_uri values used to be pre-registered using the request_uris registration parameter Details responseModesSupported This list details which OAuth 2.0 response modes are supported by this OP Details responseTypesSupported This list details which OAuth 2.0 response_type values are supported by this OP. Details returnClientSecretOnRead Boolean value specifying whether a client_secret is returned on client GET or PUT. Set to true by default which means to return secret Details returnDeviceSecretFromAuthzEndpoint Details rotateClientRegistrationAccessTokenOnUsage Boolean value specifying whether to rotate client registration access token after each usage Details rotateDeviceSecret Details sectorIdentifierCacheLifetimeInMinutes Sector Identifier cache lifetime in minutes Details serverSessionIdLifetime Dedicated property to control lifetime of the server side OP session object in seconds. Overrides sessionIdLifetime. By default value is 0, so object lifetime equals sessionIdLifetime (which sets both cookie and object expiration). It can be useful if goal is to keep different values for client cookie and server object Details serviceDocumentation URL of a page containing human-readable information that developers might want or need to know when using the OpenID Provider Details sessionIdLifetime The lifetime of session id in seconds. If 0 or -1 then expiration is not set. session_id cookie expires when browser session ends Details sessionIdPersistInCache Boolean value specifying whether to persist session_id in cache Details sessionIdPersistOnPromptNone Boolean value specifying whether to persist session ID on prompt none Details sessionIdRequestParameterEnabled Boolean value specifying whether to enable session_id HTTP request parameter Details sessionIdUnauthenticatedUnusedLifetime The lifetime for unused unauthenticated session states Details sessionIdUnusedLifetime The lifetime for unused session states Details shareSubjectIdBetweenClientsWithSameSectorId When true, clients with the same Sector ID also share the same Subject ID Details skipAuthenticationFilterOptionsMethod Force Authentication Filtker to process OPTIONS request Details skipAuthorizationForOpenIdScopeAndPairwiseId Choose whether to skip authorization if a client has an OpenId scope and a pairwise ID Details skipRefreshTokenDuringRefreshing Boolean value specifying whether to skip refreshing tokens on refreshing Details softwareStatementValidationClaimName Validation claim name for software statement Details softwareStatementValidationType Validation type used for software statement Details spontaneousScopeLifetime The lifetime of spontaneous scope in seconds Details ssaConfiguration SSA Configuration Details statAuthorizationScope Scope required for Statistical Authorization Details staticDecryptionKid Specifies static decryption Kid Details staticKid Specifies static Kid Details statTimerIntervalInSeconds Statistical data capture time interval Details subjectIdentifiersPerClientSupported A list of the subject identifiers supported per client Details subjectTypesSupported This list details which Subject Identifier types that the OP supports. Valid types include pairwise and public. Details tokenEndpoint The token endpoint URL Details tokenEndpointAuthMethodsSupported A list of Client Authentication methods supported by this Token Endpoint Details tokenEndpointAuthSigningAlgValuesSupported A list of the JWS signing algorithms (alg values) supported by the Token Endpoint for the signature on the JWT used to authenticate the Client at the Token Endpoint for the private_key_jwt and client_secret_jwt authentication methods Details tokenRevocationEndpoint The URL for the access_token or refresh_token revocation endpoint Details trustedClientEnabled Boolean value specifying whether a client is trusted and no authorization is required Details trustedSsaIssuers List of trusted SSA issuers with configuration (e.g. automatically granted scopes). Details uiLocalesSupported This list details the languages and scripts supported for the user interface Details umaAddScopesAutomatically Add UMA scopes automatically if it is not registered yet Details umaConfigurationEndpoint UMA Configuration endpoint URL Details umaGrantAccessIfNoPolicies Specify whether to grant access to resources if there is no any policies associated with scopes Details umaPctLifetime UMA PCT lifetime Details umaResourceLifetime UMA Resource lifetime Details umaRestrictResourceToAssociatedClient Restrict access to resource by associated client Details umaRptAsJwt Issue RPT as JWT or as random string Details umaRptLifetime UMA RPT lifetime Details umaTicketLifetime UMA ticket lifetime Details umaValidateClaimToken Validate claim_token as id_token assuming it is issued by local id Details updateClientAccessTime Choose if application should update oxLastAccessTime/oxLastLogonTime attributes upon client authentication Details updateUserLastLogonTime Choose if application should update oxLastLogonTime attribute upon user authentication Details useHighestLevelScriptIfAcrScriptNotFound Enable/Disable usage of highest level script in case ACR script does not exist Details useLocalCache Cache in local memory cache attributes, scopes, clients and organization entry with expiration 60 seconds Details useNestedJwtDuringEncryption Boolean value specifying whether to use nested Jwt during encryption Details userInfoEncryptionAlgValuesSupported This JSON Array lists which JWS encryption algorithms (alg values) [JWA] can be used by for the UserInfo endpoint to encode the claims in a JWT Details userInfoEncryptionEncValuesSupported This JSON Array lists which JWS encryption algorithms (enc values) [JWA] can be used by for the UserInfo endpoint to encode the claims in a JWT Details userInfoEndpoint The User Info endpoint URL Details userInfoSigningAlgValuesSupported This JSON Array lists which JWS signing algorithms (alg values) [JWA] can be used by for the UserInfo endpoint to encode the claims in a JWT Details webKeysStorage Web Key Storage Type Details","title":"Janssen Auth Server Configuration Properties"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#accesstokenlifetime","text":"Description: The lifetime of the short lived Access Token Required: No Default value: None","title":"accessTokenLifetime"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#accesstokensigningalgvaluessupported","text":"Description: A list of the JWS signing algorithms (alg values) supported by the OP for the access token to encode the Claims in a JWT Required: No Default value: None","title":"accessTokenSigningAlgValuesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#activesessionauthorizationscope","text":"Description: Authorization Scope for active session Required: No Default value: None","title":"activeSessionAuthorizationScope"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#agamaconfiguration","text":"Description: Engine Config which offers an alternative way to build authentication flows in Janssen server Required: No Default value: None","title":"agamaConfiguration"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#allowallvalueforrevokeendpoint","text":"Description: Boolean value true allow all value for revoke endpoint Required: No Default value: false","title":"allowAllValueForRevokeEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#allowblankvaluesindiscoveryresponse","text":"Description: Boolean value specifying whether to allow blank values in discovery response Required: No Default value: false","title":"allowBlankValuesInDiscoveryResponse"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#allowendsessionwithunmatchedsid","text":"Description: default value false. If true, sid check will be skipped Required: No Default value: false","title":"allowEndSessionWithUnmatchedSid"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#allowidtokenwithoutimplicitgranttype","text":"Description: Specifies if a token without implicit grant types is allowed Required: No Default value: None","title":"allowIdTokenWithoutImplicitGrantType"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#allowpostlogoutredirectwithoutvalidation","text":"Description: Allows post-logout redirect without validation for the End Session endpoint (still AS validates it against clientWhiteList url pattern property) Required: No Default value: false","title":"allowPostLogoutRedirectWithoutValidation"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#allowspontaneousscopes","text":"Description: Specifies whether to allow spontaneous scopes Required: No Default value: None","title":"allowSpontaneousScopes"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#authenticationfilters","text":"Description: This list details filters for user authentication Required: No Default value: None","title":"authenticationFilters"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#authenticationfiltersenabled","text":"Description: Boolean value specifying whether to enable user authentication filters Required: No Default value: None","title":"authenticationFiltersEnabled"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#authenticationprotectionconfiguration","text":"Description: Authentication Brute Force Protection Configuration Required: No Default value: None","title":"authenticationProtectionConfiguration"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#authorizationcodelifetime","text":"Description: The lifetime of the Authorization Code Required: No Default value: None","title":"authorizationCodeLifetime"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#authorizationencryptionalgvaluessupported","text":"Description: List of authorization encryption algorithms supported by this OP Required: No Default value: None","title":"authorizationEncryptionAlgValuesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#authorizationencryptionencvaluessupported","text":"Description: A list of the authorization encryption algorithms supported Required: No Default value: None","title":"authorizationEncryptionEncValuesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#authorizationendpoint","text":"Description: The authorization endpoint URL Required: No Default value: None","title":"authorizationEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#authorizationrequestcustomallowedparameters","text":"Description: This list details the allowed custom parameters for authorization requests Required: No Default value: None","title":"authorizationRequestCustomAllowedParameters"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#authorizationsigningalgvaluessupported","text":"Description: List of authorization signing algorithms supported by this OP Required: No Default value: None","title":"authorizationSigningAlgValuesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#backchannelauthenticationendpoint","text":"Description: Backchannel Authentication Endpoint Required: No Default value: None","title":"backchannelAuthenticationEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#backchannelauthenticationrequestsigningalgvaluessupported","text":"Description: Backchannel Authentication Request Signing Alg Values Supported Required: No Default value: None","title":"backchannelAuthenticationRequestSigningAlgValuesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#backchannelauthenticationresponseexpiresin","text":"Description: Backchannel Authentication Response Expires In Required: No Default value: None","title":"backchannelAuthenticationResponseExpiresIn"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#backchannelauthenticationresponseinterval","text":"Description: Backchannel Authentication Response Interval Required: No Default value: None","title":"backchannelAuthenticationResponseInterval"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#backchannelbindingmessagepattern","text":"Description: Backchannel Binding Message Pattern Required: No Default value: None","title":"backchannelBindingMessagePattern"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#backchannelclientid","text":"Description: Backchannel Client Id Required: No Default value: None","title":"backchannelClientId"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#backchanneldeviceregistrationendpoint","text":"Description: Backchannel Device Registration Endpoint Required: No Default value: None","title":"backchannelDeviceRegistrationEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#backchannelloginhintclaims","text":"Description: Backchannel Login Hint Claims Required: No Default value: None","title":"backchannelLoginHintClaims"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#backchannelredirecturi","text":"Description: Backchannel Redirect Uri Required: No Default value: None","title":"backchannelRedirectUri"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#backchannelrequestsprocessorjobchunksize","text":"Description: Each backchannel request processor iteration fetches chunk of data to be processed Required: No Default value: None","title":"backchannelRequestsProcessorJobChunkSize"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#backchannelrequestsprocessorjobintervalsec","text":"Description: Specifies the allowable elapsed time in seconds backchannel request processor executes Required: No Default value: None","title":"backchannelRequestsProcessorJobIntervalSec"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#backchanneltokendeliverymodessupported","text":"Description: Backchannel Token Delivery Modes Supported Required: No Default value: None","title":"backchannelTokenDeliveryModesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#backchannelusercodeparametersupported","text":"Description: Backchannel User Code Parameter Supported Required: No Default value: None","title":"backchannelUserCodeParameterSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#baseendpoint","text":"Description: The base URL for endpoints Required: No Default value: None","title":"baseEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#blockwebviewauthorizationenabled","text":"Description: Enable/Disable block authorizations that originate from Webview (Mobile apps). Required: No Default value: false","title":"blockWebviewAuthorizationEnabled"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#changesessionidonauthentication","text":"Description: Boolean value specifying whether change session_id on authentication. Default value is true Required: No Default value: true","title":"changeSessionIdOnAuthentication"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#checksessioniframe","text":"Description: URL for an OP IFrame that supports cross-origin communications for session state information with the RP Client using the HTML5 postMessage API Required: No Default value: None","title":"checkSessionIFrame"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#checkuserpresenceonrefreshtoken","text":"Description: Check whether user exists and is active before creating RefreshToken. Set it to true if check is needed(Default value is false - don't check. Required: No Default value: false","title":"checkUserPresenceOnRefreshToken"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#cibaendusernotificationconfig","text":"Description: CIBA End User Notification Config Required: No Default value: None","title":"cibaEndUserNotificationConfig"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#cibagrantlifeextratimesec","text":"Description: Specifies the CIBA Grant life extra time in seconds Required: No Default value: None","title":"cibaGrantLifeExtraTimeSec"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#cibamaxexpirationtimeallowedsec","text":"Description: Specifies the CIBA token expiration time in seconds Required: No Default value: None","title":"cibaMaxExpirationTimeAllowedSec"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#claimslocalessupported","text":"Description: This list details the languages and scripts supported for values in the claims being returned Required: No Default value: None","title":"claimsLocalesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#claimsparametersupported","text":"Description: Specifies whether the OP supports use of the claims parameter Required: No Default value: None","title":"claimsParameterSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#claimtypessupported","text":"Description: A list of the Claim Types that the OpenID Provider supports Required: No Default value: None","title":"claimTypesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#cleanservicebatchchunksize","text":"Description: Clean service chunk size which is used during clean up Required: No Default value: 100","title":"cleanServiceBatchChunkSize"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#cleanserviceinterval","text":"Description: Time interval for the Clean Service in seconds Required: No Default value: None","title":"cleanServiceInterval"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#clientauthenticationfilters","text":"Description: This list details filters for client authentication Required: No Default value: None","title":"clientAuthenticationFilters"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#clientauthenticationfiltersenabled","text":"Description: Boolean value specifying whether to enable client authentication filters Required: No Default value: None","title":"clientAuthenticationFiltersEnabled"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#clientblacklist","text":"Description: This list specified which client redirection URIs are black-listed Required: No Default value: None","title":"clientBlackList"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#clientinfoendpoint","text":"Description: The Client Info endpoint URL Required: No Default value: None","title":"clientInfoEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#clientregdefaulttocodeflowwithrefresh","text":"Description: Boolean value specifying whether to add Authorization Code Flow with Refresh grant during client registratio Required: No Default value: None","title":"clientRegDefaultToCodeFlowWithRefresh"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#clientwhitelist","text":"Description: This list specifies which client redirection URIs are white-listed Required: No Default value: None","title":"clientWhiteList"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#configurationupdateinterval","text":"Description: The interval for configuration update in seconds Required: No Default value: None","title":"configurationUpdateInterval"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#consentgatheringscriptbackwardcompatibility","text":"Description: Boolean value specifying whether to turn on Consent Gathering Script backward compatibility mode. If true AS will pick up script with higher level globally. If false (default) AS will pick up script based on client configuration Required: No Default value: false","title":"consentGatheringScriptBackwardCompatibility"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#cookiedomain","text":"Description: Sets cookie domain for all cookies created by OP Required: No Default value: None","title":"cookieDomain"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#corsconfigurationfilters","text":"Description: This list specifies the CORS configuration filters Required: No Default value: None","title":"corsConfigurationFilters"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#csslocation","text":"Description: The location for CSS files Required: No Default value: None","title":"cssLocation"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#customheaderswithauthorizationresponse","text":"Description: Choose whether to enable the custom response header parameter to return custom headers with the authorization response Required: No Default value: None","title":"customHeadersWithAuthorizationResponse"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dateformatterpatterns","text":"Description: List of key value date formatters, e.g. 'userinfo: 'yyyy-MM-dd', etc. Required: No Default value: None","title":"dateFormatterPatterns"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dcrauthorizationwithclientcredentials","text":"Description: Boolean value indicating if DCR authorization to be performed using client credentials Required: No Default value: false","title":"dcrAuthorizationWithClientCredentials"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dcrauthorizationwithmtls","text":"Description: Boolean value indicating if DCR authorization allowed with MTLS Required: No Default value: false","title":"dcrAuthorizationWithMTLS"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dcrforbidexpirationtimeinrequest","text":"Description: Boolean value specifying whether to allow to set client's expiration time in seconds during dynamic registration. Required: No Default value: false","title":"dcrForbidExpirationTimeInRequest"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dcrsignaturevalidationenabled","text":"Description: Boolean value enables DCR signature validation. Default is false Required: No Default value: false","title":"dcrSignatureValidationEnabled"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dcrsignaturevalidationjwks","text":"Description: Specifies JWKS for all DCR's validations Required: No Default value: None","title":"dcrSignatureValidationJwks"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dcrsignaturevalidationjwksuri","text":"Description: Specifies JWKS URI for all DCR's validations Required: No Default value: None","title":"dcrSignatureValidationJwksUri"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dcrsignaturevalidationsharedsecret","text":"Description: Specifies shared secret for Dynamic Client Registration Required: No Default value: None","title":"dcrSignatureValidationSharedSecret"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dcrsignaturevalidationsoftwarestatementjwksclaim","text":"Description: Specifies claim name inside software statement. Value of claim should point to inlined JWKS Required: No Default value: None","title":"dcrSignatureValidationSoftwareStatementJwksClaim"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dcrsignaturevalidationsoftwarestatementjwksuriclaim","text":"Description: Specifies claim name inside software statement. Value of claim should point to JWKS URI Required: No Default value: None","title":"dcrSignatureValidationSoftwareStatementJwksURIClaim"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dcrssavalidationconfigs","text":"Description: DCR SSA Validation configurations used to perform validation of SSA or DCR Required: No Default value: None","title":"dcrSsaValidationConfigs"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#defaultsignaturealgorithm","text":"Description: The default signature algorithm to sign ID Tokens Required: No Default value: None","title":"defaultSignatureAlgorithm"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#defaultsubjecttype","text":"Description: The default subject type used for dynamic client registration Required: No Default value: None","title":"defaultSubjectType"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#deviceauthzacr","text":"Description: Device authz acr Required: No Default value: None","title":"deviceAuthzAcr"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#deviceauthzendpoint","text":"Description: URL for the Device Authorization Required: No Default value: None","title":"deviceAuthzEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#deviceauthzrequestexpiresin","text":"Description: Expiration time given for device authorization requests Required: No Default value: None","title":"deviceAuthzRequestExpiresIn"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#deviceauthzresponsetypetoprocessauthz","text":"Description: Response type used to process device authz requests Required: No Default value: None","title":"deviceAuthzResponseTypeToProcessAuthz"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#deviceauthztokenpollinterval","text":"Description: Default interval returned to the client to process device token requests Required: No Default value: None","title":"deviceAuthzTokenPollInterval"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#disableauthnformaxagezero","text":"Description: Boolean value specifying whether to disable authentication when max_age=0 Required: No Default value: false","title":"disableAuthnForMaxAgeZero"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#disablejdklogger","text":"Description: Choose whether to disable JDK loggers Required: No Default value: true","title":"disableJdkLogger"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#disablepromptconsent","text":"Description: Boolean value specifying whether to disable prompt=consent Required: No Default value: false","title":"disablePromptConsent"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#disablepromptlogin","text":"Description: Boolean value specifying whether to disable prompt=login Required: No Default value: false","title":"disablePromptLogin"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#disableu2fendpoint","text":"Description: Choose whether to disable U2F endpoints Required: No Default value: false","title":"disableU2fEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#discoveryallowedkeys","text":"Description: List of configuration response claim allowed to be displayed in discovery endpoint Required: No Default value: None","title":"discoveryAllowedKeys"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#discoverycachelifetimeinminutes","text":"Description: Lifetime of discovery cache Required: No Default value: 60","title":"discoveryCacheLifetimeInMinutes"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#discoverydenykeys","text":"Description: List of configuration response claims which must not be displayed in discovery endpoint response Required: No Default value: None","title":"discoveryDenyKeys"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#displayvaluessupported","text":"Description: A list of the display parameter values that the OpenID Provider supports Required: No Default value: None","title":"displayValuesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dnname","text":"Description: DN of certificate issuer Required: No Default value: None","title":"dnName"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dpopjticachetime","text":"Description: Demonstration of Proof-of-Possession (DPoP) cache time Required: No Default value: 3600","title":"dpopJtiCacheTime"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dpopnoncecachetime","text":"Description: Demonstration of Proof-of-Possession (DPoP) nonce cache time Required: No Default value: 3600","title":"dpopNonceCacheTime"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dpopsigningalgvaluessupported","text":"Description: Demonstration of Proof-of-Possession (DPoP) authorization signing algorithms supported Required: No Default value: None","title":"dpopSigningAlgValuesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dpoptimeframe","text":"Description: Demonstration of Proof-of-Possession (DPoP) timeout Required: No Default value: 5","title":"dpopTimeframe"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dpopusenonce","text":"Description: Demonstration of Proof-of-Possession (DPoP) use nonce Required: No Default value: false","title":"dpopUseNonce"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dynamicgranttypedefault","text":"Description: This list details which OAuth 2.0 grant types can be set up with the client registration API Required: No Default value: None","title":"dynamicGrantTypeDefault"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dynamicregistrationallowedpasswordgrantscopes","text":"Description: List of grant scopes for dynamic registration Required: No Default value: None","title":"dynamicRegistrationAllowedPasswordGrantScopes"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dynamicregistrationcustomattributes","text":"Description: This list details the custom attributes allowed for dynamic registration Required: No Default value: None","title":"dynamicRegistrationCustomAttributes"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dynamicregistrationcustomobjectclass","text":"Description: LDAP custom object class for dynamic registration Required: No Default value: None","title":"dynamicRegistrationCustomObjectClass"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dynamicregistrationdefaultcustomattributes","text":"Description: This map provides default custom attributes with values for dynamic registration Required: No Default value: None","title":"dynamicRegistrationDefaultCustomAttributes"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dynamicregistrationexpirationtime","text":"Description: Expiration time in seconds for clients created with dynamic registration, 0 or -1 means never expire Required: No Default value: -1","title":"dynamicRegistrationExpirationTime"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dynamicregistrationpasswordgranttypeenabled","text":"Description: Boolean value specifying whether to enable Password Grant Type during Dynamic Registration Required: No Default value: false","title":"dynamicRegistrationPasswordGrantTypeEnabled"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dynamicregistrationpersistclientauthorizations","text":"Description: Boolean value specifying whether to persist client authorizations Required: No Default value: None","title":"dynamicRegistrationPersistClientAuthorizations"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#dynamicregistrationscopesparamenabled","text":"Description: Boolean value specifying whether to enable scopes parameter in dynamic registration Required: No Default value: None","title":"dynamicRegistrationScopesParamEnabled"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#enableclientgranttypeupdate","text":"Description: Choose if client can update Grant Type values Required: No Default value: None","title":"enableClientGrantTypeUpdate"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#enabledoauthauditlogging","text":"Description: enable OAuth Audit Logging Required: No Default value: None","title":"enabledOAuthAuditLogging"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#endsessionendpoint","text":"Description: URL at the OP to which an RP can perform a redirect to request that the end user be logged out at the OP Required: No Default value: None","title":"endSessionEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#endsessionwithaccesstoken","text":"Description: Choose whether to accept access tokens to call end_session endpoint Required: No Default value: None","title":"endSessionWithAccessToken"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#errorhandlingmethod","text":"Description: A list of possible error handling methods. Possible values: remote (send error back to RP), internal (show error page) Required: No Default value: remote","title":"errorHandlingMethod"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#errorreasonenabled","text":"Description: Boolean value specifying whether to return detailed reason of the error from AS. Default value is false Required: No Default value: false","title":"errorReasonEnabled"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#expirationnotificatorenabled","text":"Description: Boolean value specifying whether expiration notificator is enabled (used to identify expiration for persistence that support TTL, like Couchbase) Required: No Default value: false","title":"expirationNotificatorEnabled"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#expirationnotificatorintervalinseconds","text":"Description: The expiration notificator interval in second Required: No Default value: None","title":"expirationNotificatorIntervalInSeconds"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#expirationnotificatormapsizelimit","text":"Description: The expiration notificator maximum size limit Required: No Default value: None","title":"expirationNotificatorMapSizeLimit"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#externalloggerconfiguration","text":"Description: The path to the external log4j2 logging configuration Required: No Default value: None","title":"externalLoggerConfiguration"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#externaluriwhitelist","text":"Description: This list specifies which external URIs can be called by AS (if empty any URI can be called) Required: No Default value: None","title":"externalUriWhiteList"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#fapicompatibility","text":"Description: Boolean value specifying whether to turn on FAPI compatibility mode. If true AS behaves in more strict mode Required: No Default value: false","title":"fapiCompatibility"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#featureflags","text":"Description: List of enabled feature flags Required: No Default value: None","title":"featureFlags"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#forceidtokenhintprecense","text":"Description: Boolean value specifying whether force id_token_hint parameter presence Required: No Default value: false","title":"forceIdTokenHintPrecense"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#forceofflineaccessscopetoenablerefreshtoken","text":"Description: Boolean value specifying whether force offline_access scope to enable refresh_token grant type. Default value is true Required: No Default value: true","title":"forceOfflineAccessScopeToEnableRefreshToken"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#forcesignedrequestobject","text":"Description: Boolean value true indicates that signed request object is mandatory Required: No Default value: false","title":"forceSignedRequestObject"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#frontchannellogoutsessionsupported","text":"Description: Choose whether to support front channel session logout Required: No Default value: None","title":"frontChannelLogoutSessionSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#granttypesandresponsetypesautofixenabled","text":"Description: Boolean value specifying whether to Grant types and Response types can be auto fixed Required: No Default value: None","title":"grantTypesAndResponseTypesAutofixEnabled"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#granttypessupported","text":"Description: This list details which OAuth 2.0 grant types are supported by this OP Required: No Default value: None","title":"grantTypesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#httploggingenabled","text":"Description: Enable/disable request/response logging filter Required: No Default value: None","title":"httpLoggingEnabled"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#httploggingexcludepaths","text":"Description: This list details the base URIs for which the request/response logging filter will not record activity Required: No Default value: None","title":"httpLoggingExcludePaths"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#httploggingresponsebodycontent","text":"Description: Defines if Response body will be logged. Default value is false Required: No Default value: false","title":"httpLoggingResponseBodyContent"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#idgenerationendpoint","text":"Description: ID Generation endpoint URL Required: No Default value: None","title":"idGenerationEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#idtokenencryptionalgvaluessupported","text":"Description: A list of the JWE encryption algorithms (alg values) supported by the OP for the ID Token to encode the Claims in a JWT Required: No Default value: None","title":"idTokenEncryptionAlgValuesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#idtokenencryptionencvaluessupported","text":"Description: A list of the JWE encryption algorithms (enc values) supported by the OP for the ID Token to encode the Claims in a JWT Required: No Default value: None","title":"idTokenEncryptionEncValuesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#idtokenfilterclaimsbasedonaccesstoken","text":"Description: Boolean value specifying whether idToken filters claims based on accessToken Required: No Default value: None","title":"idTokenFilterClaimsBasedOnAccessToken"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#idtokenlifetime","text":"Description: The lifetime of the ID Token Required: No Default value: None","title":"idTokenLifetime"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#idtokensigningalgvaluessupported","text":"Description: A list of the JWS signing algorithms (alg values) supported by the OP for the ID Token to encode the Claims in a JWT Required: No Default value: None","title":"idTokenSigningAlgValuesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#idtokentokenbindingcnfvaluessupported","text":"Description: Array containing a list of the JWT Confirmation Method member names supported by the OP for Token Binding of ID Tokens. The presence of this parameter indicates that the OpenID Provider supports Token Binding of ID Tokens. If omitted, the default is that the OpenID Provider does not support Token Binding of ID Tokens Required: No Default value: None","title":"idTokenTokenBindingCnfValuesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#imglocation","text":"Description: The location for image files Required: No Default value: None","title":"imgLocation"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#includesidinresponse","text":"Description: Boolean value specifying whether to include sessionId in response Required: No Default value: false","title":"includeSidInResponse"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#introspectionaccesstokenmusthaveintrospectionscope","text":"Description: If True, rejects introspection requests if access_token does not have the 'introspection' scope in its authorization header. Comparing to 'uma_protection', 'introspection' scope is not allowed for dynamic registration' Required: No Default value: false","title":"introspectionAccessTokenMustHaveIntrospectionScope"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#introspectionaccesstokenmusthaveumaprotectionscope","text":"Description: If True, rejects introspection requests if access_token does not have the uma_protection scope in its authorization header Required: No Default value: false","title":"introspectionAccessTokenMustHaveUmaProtectionScope"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#introspectionendpoint","text":"Description: Introspection endpoint URL Required: No Default value: None","title":"introspectionEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#introspectionresponsescopesbackwardcompatibility","text":"Description: Boolean value specifying introspection response backward compatibility mode Required: No Default value: false","title":"introspectionResponseScopesBackwardCompatibility"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#introspectionscriptbackwardcompatibility","text":"Description: Boolean value specifying whether switch off client's introspection scripts (true value) and run all scripts that exists on server. Default value is false Required: No Default value: false","title":"introspectionScriptBackwardCompatibility"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#introspectionskipauthorization","text":"Description: Specifies if authorization to be skipped for introspection Required: No Default value: None","title":"introspectionSkipAuthorization"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#invalidatesessioncookiesafterauthorizationflow","text":"Description: Boolean value to specify whether to invalidate session_id and consent_session_id cookies right after successful or unsuccessful authorization Required: No Default value: false","title":"invalidateSessionCookiesAfterAuthorizationFlow"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#issuer","text":"Description: URL using the https scheme that OP asserts as Issuer identifier Required: No Default value: None","title":"issuer"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#janselevendeletekeyendpoint","text":"Description: oxEleven Delete Key endpoint URL Required: No Default value: None","title":"jansElevenDeleteKeyEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#janselevengeneratekeyendpoint","text":"Description: oxEleven Generate Key endpoint URL Required: No Default value: None","title":"jansElevenGenerateKeyEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#janselevensignendpoint","text":"Description: oxEleven Sign endpoint UR Required: No Default value: None","title":"jansElevenSignEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#janseleventestmodetoken","text":"Description: oxEleven Test Mode Token Required: No Default value: None","title":"jansElevenTestModeToken"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#janselevenverifysignatureendpoint","text":"Description: oxEleven Verify Signature endpoint URL Required: No Default value: None","title":"jansElevenVerifySignatureEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#jansid","text":"Description: URL for the Inum generator Service Required: No Default value: None","title":"jansId"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#jansopenidconnectversion","text":"Description: OpenID Connect Version Required: No Default value: None","title":"jansOpenIdConnectVersion"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#jmsbrokeruriset","text":"Description: JMS Broker URI Set Required: No Default value: None","title":"jmsBrokerURISet"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#jmspassword","text":"Description: JMS Password Required: No Default value: None","title":"jmsPassword"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#jmsusername","text":"Description: JMS UserName Required: No Default value: None","title":"jmsUserName"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#jslocation","text":"Description: The location for JavaScript files Required: No Default value: None","title":"jsLocation"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#jwksalgorithmssupported","text":"Description: A list of algorithms that will be used in JWKS endpoint Required: No Default value: None","title":"jwksAlgorithmsSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#jwksuri","text":"Description: URL of the OP's JSON Web Key Set (JWK) document. This contains the signing key(s) the RP uses to validate signatures from the OP Required: No Default value: None","title":"jwksUri"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#keepauthenticatorattributesonacrchange","text":"Description: Boolean value specifying whether to keep authenticator attributes on ACR change Required: No Default value: false","title":"keepAuthenticatorAttributesOnAcrChange"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#keyalgsallowedforgeneration","text":"Description: List of algorithm allowed to be used for key generation Required: No Default value: None","title":"keyAlgsAllowedForGeneration"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#keyregenerationenabled","text":"Description: Boolean value specifying whether to regenerate keys Required: No Default value: None","title":"keyRegenerationEnabled"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#keyregenerationinterval","text":"Description: The interval for key regeneration in hours Required: No Default value: None","title":"keyRegenerationInterval"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#keyselectionstrategy","text":"Description: Key Selection Strategy : OLDER, NEWER, FIRST Required: No Default value: OLDER","title":"keySelectionStrategy"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#keysignwithsamekeybutdiffalg","text":"Description: Specifies if signing to be done with same key but apply different algorithms Required: No Default value: None","title":"keySignWithSameKeyButDiffAlg"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#keystorefile","text":"Description: The Key Store File (JKS) Required: No Default value: None","title":"keyStoreFile"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#keystoresecret","text":"Description: The Key Store password Required: No Default value: None","title":"keyStoreSecret"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#legacyidtokenclaims","text":"Description: Choose whether to include claims in ID tokens Required: No Default value: None","title":"legacyIdTokenClaims"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#logclientidonclientauthentication","text":"Description: Choose if application should log the Client ID on client authentication Required: No Default value: None","title":"logClientIdOnClientAuthentication"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#logclientnameonclientauthentication","text":"Description: Choose if application should log the Client Name on client authentication Required: No Default value: None","title":"logClientNameOnClientAuthentication"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#logginglayout","text":"Description: Logging layout used for Jans Authorization Server loggers Required: No Default value: None","title":"loggingLayout"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#logginglevel","text":"Description: Specify the logging level of loggers Required: No Default value: None","title":"loggingLevel"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#lognotfoundentityaserror","text":"Description: Boolean value specifying whether to log not_found entity exception as error or as trace. Default value is false (trace). Required: No Default value: None","title":"logNotFoundEntityAsError"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#metricreporterinterval","text":"Description: The interval for metric reporter in seconds Required: No Default value: None","title":"metricReporterInterval"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#metricreporterkeepdatadays","text":"Description: The days to keep metric reported data Required: No Default value: None","title":"metricReporterKeepDataDays"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#mtlsauthorizationendpoint","text":"Description: URL for Mutual TLS (mTLS) Client Authentication and Certificate-Bound Access Tokens (MTLS) Endpoint Required: No Default value: None","title":"mtlsAuthorizationEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#mtlschecksessioniframe","text":"Description: URL for Mutual TLS (mTLS) IFrame that supports cross-origin communications for session state information with the RP Client using the HTML5 postMessage API Required: No Default value: None","title":"mtlsCheckSessionIFrame"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#mtlsclientinfoendpoint","text":"Description: URL for Mutual TLS (mTLS) Client Info endpoint Required: No Default value: None","title":"mtlsClientInfoEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#mtlsdeviceauthzendpoint","text":"Description: Mutual TLS (mTLS) device authorization endpoint URL Required: No Default value: None","title":"mtlsDeviceAuthzEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#mtlsendsessionendpoint","text":"Description: URL for Mutual TLS (mTLS) to which an RP can perform a redirect to request that the end user be logged out at the OP Required: No Default value: None","title":"mtlsEndSessionEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#mtlsidgenerationendpoint","text":"Description: Mutual TLS (mTLS) ID generation endpoint URL Required: No Default value: None","title":"mtlsIdGenerationEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#mtlsintrospectionendpoint","text":"Description: Mutual TLS (mTLS) introspection endpoint URL Required: No Default value: None","title":"mtlsIntrospectionEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#mtlsjwksuri","text":"Description: URL for Mutual TLS (mTLS) of the OP's JSON Web Key Set (JWK) document Required: No Default value: None","title":"mtlsJwksUri"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#mtlsparendpoint","text":"Description: Mutual TLS (mTLS) Pushed Authorization Requests(PAR) endpoint URL Required: No Default value: None","title":"mtlsParEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#mtlsregistrationendpoint","text":"Description: Mutual TLS (mTLS) registration endpoint URL Required: No Default value: None","title":"mtlsRegistrationEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#mtlstokenendpoint","text":"Description: URL for Mutual TLS (mTLS) Authorization token Endpoint Required: No Default value: None","title":"mtlsTokenEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#mtlstokenrevocationendpoint","text":"Description: URL for Mutual TLS (mTLS) Authorization token revocation endpoint Required: No Default value: None","title":"mtlsTokenRevocationEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#mtlsuserinfoendpoint","text":"Description: Mutual TLS (mTLS) user info endpoint URL Required: No Default value: None","title":"mtlsUserInfoEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#openidconfigurationendpoint","text":"Description: URL for the Open ID Connect Configuration Endpoint Required: No Default value: None","title":"openIdConfigurationEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#openiddiscoveryendpoint","text":"Description: Discovery endpoint URL Required: No Default value: None","title":"openIdDiscoveryEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#openidscopebackwardcompatibility","text":"Description: Set to false to only allow token endpoint request for openid scope with grant type equals to authorization_code, restrict access to userinfo to scope openid and only return id_token if scope contains openid Required: No Default value: false","title":"openidScopeBackwardCompatibility"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#openidsubattribute","text":"Description: Specifies which LDAP attribute is used for the subject identifier claim Required: No Default value: None","title":"openidSubAttribute"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#oppolicyuri","text":"Description: URL that the OpenID Provider provides to the person registering the Client to read about the OP's requirements on how the Relying Party can use the data provided by the OP Required: No Default value: None","title":"opPolicyUri"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#optosuri","text":"Description: URL that the OpenID Provider provides to the person registering the Client to read about OpenID Provider's terms of service Required: No Default value: None","title":"opTosUri"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#pairwisecalculationkey","text":"Description: Key to calculate algorithmic pairwise IDs Required: No Default value: None","title":"pairwiseCalculationKey"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#pairwisecalculationsalt","text":"Description: Salt to calculate algorithmic pairwise IDs Required: No Default value: None","title":"pairwiseCalculationSalt"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#pairwiseidtype","text":"Description: the pairwise ID type Required: No Default value: None","title":"pairwiseIdType"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#parendpoint","text":"Description: URL for Pushed Authorisation Request (PAR) Endpoint Required: No Default value: None","title":"parEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#persistidtoken","text":"Description: Specifies whether to persist id_token (otherwise saves into cache) Required: No Default value: false","title":"persistIdToken"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#persistrefreshtoken","text":"Description: Specifies whether to persist refresh_token (otherwise saves into cache) Required: No Default value: true","title":"persistRefreshToken"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#personcustomobjectclasslist","text":"Description: This list details LDAP custom object classes for dynamic person enrollment Required: No Default value: None","title":"personCustomObjectClassList"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#publicsubjectidentifierperclientenabled","text":"Description: Specifies whether public subject identifier is allowed per client Required: No Default value: false","title":"publicSubjectIdentifierPerClientEnabled"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#redirecturisregexenabled","text":"Description: Enable/Disable redirect uris validation using regular expression Required: No Default value: false","title":"redirectUrisRegexEnabled"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#refreshtokenextendlifetimeonrotation","text":"Description: Boolean value specifying whether to extend refresh tokens on rotation Required: No Default value: false","title":"refreshTokenExtendLifetimeOnRotation"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#refreshtokenlifetime","text":"Description: The lifetime of the Refresh Token Required: No Default value: None","title":"refreshTokenLifetime"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#registrationendpoint","text":"Description: Registration endpoint URL Required: No Default value: None","title":"registrationEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#rejectendsessionifidtokenexpired","text":"Description: default value false. If true and id_token is not found in db, request is rejected Required: No Default value: false","title":"rejectEndSessionIfIdTokenExpired"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#rejectjwtwithnonealg","text":"Description: Boolean value specifying whether reject JWT requested or validated with algorithm None. Default value is true Required: No Default value: true","title":"rejectJwtWithNoneAlg"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#removerefreshtokensforclientonlogout","text":"Description: Boolean value specifying whether to remove Refresh Tokens on logout. Default value is true Required: No Default value: true","title":"removeRefreshTokensForClientOnLogout"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#requestobjectencryptionalgvaluessupported","text":"Description: A list of the JWE encryption algorithms (alg values) supported by the OP for Request Objects Required: No Default value: None","title":"requestObjectEncryptionAlgValuesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#requestobjectencryptionencvaluessupported","text":"Description: A list of the JWE encryption algorithms (enc values) supported by the OP for Request Objects Required: No Default value: None","title":"requestObjectEncryptionEncValuesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#requestobjectsigningalgvaluessupported","text":"Description: A list of the JWS signing algorithms (alg values) supported by the OP for Request Objects Required: No Default value: None","title":"requestObjectSigningAlgValuesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#requestparametersupported","text":"Description: Boolean value specifying whether the OP supports use of the request parameter Required: No Default value: None","title":"requestParameterSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#requesturiblocklist","text":"Description: Block list for requestUri that can come to Authorization Endpoint (e.g. localhost) Required: No Default value: None","title":"requestUriBlockList"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#requesturihashverificationenabled","text":"Description: Boolean value specifying whether the OP supports use of the request_uri hash verification Required: No Default value: None","title":"requestUriHashVerificationEnabled"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#requesturiparametersupported","text":"Description: Boolean value specifying whether the OP supports use of the request_uri parameter Required: No Default value: None","title":"requestUriParameterSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#requirepar","text":"Description: Boolean value to indicate of Pushed Authorisation Request(PAR)is required Required: No Default value: false","title":"requirePar"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#requirepkce","text":"Description: Boolean value true check for Proof Key for Code Exchange (PKCE) Required: No Default value: false","title":"requirePkce"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#requirerequestobjectencryption","text":"Description: Boolean value true encrypts request object Required: No Default value: false","title":"requireRequestObjectEncryption"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#requirerequesturiregistration","text":"Description: Boolean value specifying whether the OP requires any request_uri values used to be pre-registered using the request_uris registration parameter Required: No Default value: None","title":"requireRequestUriRegistration"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#responsemodessupported","text":"Description: This list details which OAuth 2.0 response modes are supported by this OP Required: No Default value: None","title":"responseModesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#responsetypessupported","text":"Description: This list details which OAuth 2.0 response_type values are supported by this OP. Required: No Default value: By default, every combination of code, token and id_token is supported.","title":"responseTypesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#returnclientsecretonread","text":"Description: Boolean value specifying whether a client_secret is returned on client GET or PUT. Set to true by default which means to return secret Required: No Default value: false","title":"returnClientSecretOnRead"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#returndevicesecretfromauthzendpoint","text":"Description: Required: No Default value: false","title":"returnDeviceSecretFromAuthzEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#rotateclientregistrationaccesstokenonusage","text":"Description: Boolean value specifying whether to rotate client registration access token after each usage Required: No Default value: false","title":"rotateClientRegistrationAccessTokenOnUsage"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#rotatedevicesecret","text":"Description: Required: No Default value: false","title":"rotateDeviceSecret"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#sectoridentifiercachelifetimeinminutes","text":"Description: Sector Identifier cache lifetime in minutes Required: No Default value: 1440","title":"sectorIdentifierCacheLifetimeInMinutes"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#serversessionidlifetime","text":"Description: Dedicated property to control lifetime of the server side OP session object in seconds. Overrides sessionIdLifetime. By default value is 0, so object lifetime equals sessionIdLifetime (which sets both cookie and object expiration). It can be useful if goal is to keep different values for client cookie and server object Required: No Default value: None","title":"serverSessionIdLifetime"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#servicedocumentation","text":"Description: URL of a page containing human-readable information that developers might want or need to know when using the OpenID Provider Required: No Default value: None","title":"serviceDocumentation"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#sessionidlifetime","text":"Description: The lifetime of session id in seconds. If 0 or -1 then expiration is not set. session_id cookie expires when browser session ends Required: No Default value: None","title":"sessionIdLifetime"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#sessionidpersistincache","text":"Description: Boolean value specifying whether to persist session_id in cache Required: No Default value: false","title":"sessionIdPersistInCache"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#sessionidpersistonpromptnone","text":"Description: Boolean value specifying whether to persist session ID on prompt none Required: No Default value: None","title":"sessionIdPersistOnPromptNone"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#sessionidrequestparameterenabled","text":"Description: Boolean value specifying whether to enable session_id HTTP request parameter Required: No Default value: false","title":"sessionIdRequestParameterEnabled"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#sessionidunauthenticatedunusedlifetime","text":"Description: The lifetime for unused unauthenticated session states Required: No Default value: None","title":"sessionIdUnauthenticatedUnusedLifetime"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#sessionidunusedlifetime","text":"Description: The lifetime for unused session states Required: No Default value: None","title":"sessionIdUnusedLifetime"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#sharesubjectidbetweenclientswithsamesectorid","text":"Description: When true, clients with the same Sector ID also share the same Subject ID Required: No Default value: false","title":"shareSubjectIdBetweenClientsWithSameSectorId"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#skipauthenticationfilteroptionsmethod","text":"Description: Force Authentication Filtker to process OPTIONS request Required: No Default value: true","title":"skipAuthenticationFilterOptionsMethod"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#skipauthorizationforopenidscopeandpairwiseid","text":"Description: Choose whether to skip authorization if a client has an OpenId scope and a pairwise ID Required: No Default value: false","title":"skipAuthorizationForOpenIdScopeAndPairwiseId"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#skiprefreshtokenduringrefreshing","text":"Description: Boolean value specifying whether to skip refreshing tokens on refreshing Required: No Default value: false","title":"skipRefreshTokenDuringRefreshing"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#softwarestatementvalidationclaimname","text":"Description: Validation claim name for software statement Required: No Default value: None","title":"softwareStatementValidationClaimName"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#softwarestatementvalidationtype","text":"Description: Validation type used for software statement Required: No Default value: None","title":"softwareStatementValidationType"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#spontaneousscopelifetime","text":"Description: The lifetime of spontaneous scope in seconds Required: No Default value: None","title":"spontaneousScopeLifetime"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#ssaconfiguration","text":"Description: SSA Configuration Required: No Default value: None","title":"ssaConfiguration"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#statauthorizationscope","text":"Description: Scope required for Statistical Authorization Required: No Default value: None","title":"statAuthorizationScope"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#staticdecryptionkid","text":"Description: Specifies static decryption Kid Required: No Default value: None","title":"staticDecryptionKid"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#statickid","text":"Description: Specifies static Kid Required: No Default value: None","title":"staticKid"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#stattimerintervalinseconds","text":"Description: Statistical data capture time interval Required: No Default value: None","title":"statTimerIntervalInSeconds"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#subjectidentifiersperclientsupported","text":"Description: A list of the subject identifiers supported per client Required: No Default value: None","title":"subjectIdentifiersPerClientSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#subjecttypessupported","text":"Description: This list details which Subject Identifier types that the OP supports. Valid types include pairwise and public. Required: No Default value: None","title":"subjectTypesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#tokenendpoint","text":"Description: The token endpoint URL Required: No Default value: None","title":"tokenEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#tokenendpointauthmethodssupported","text":"Description: A list of Client Authentication methods supported by this Token Endpoint Required: No Default value: None","title":"tokenEndpointAuthMethodsSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#tokenendpointauthsigningalgvaluessupported","text":"Description: A list of the JWS signing algorithms (alg values) supported by the Token Endpoint for the signature on the JWT used to authenticate the Client at the Token Endpoint for the private_key_jwt and client_secret_jwt authentication methods Required: No Default value: None","title":"tokenEndpointAuthSigningAlgValuesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#tokenrevocationendpoint","text":"Description: The URL for the access_token or refresh_token revocation endpoint Required: No Default value: None","title":"tokenRevocationEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#trustedclientenabled","text":"Description: Boolean value specifying whether a client is trusted and no authorization is required Required: No Default value: None","title":"trustedClientEnabled"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#trustedssaissuers","text":"Description: List of trusted SSA issuers with configuration (e.g. automatically granted scopes). Required: No Default value: None","title":"trustedSsaIssuers"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#uilocalessupported","text":"Description: This list details the languages and scripts supported for the user interface Required: No Default value: None","title":"uiLocalesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#umaaddscopesautomatically","text":"Description: Add UMA scopes automatically if it is not registered yet Required: No Default value: None","title":"umaAddScopesAutomatically"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#umaconfigurationendpoint","text":"Description: UMA Configuration endpoint URL Required: No Default value: None","title":"umaConfigurationEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#umagrantaccessifnopolicies","text":"Description: Specify whether to grant access to resources if there is no any policies associated with scopes Required: No Default value: false","title":"umaGrantAccessIfNoPolicies"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#umapctlifetime","text":"Description: UMA PCT lifetime Required: No Default value: None","title":"umaPctLifetime"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#umaresourcelifetime","text":"Description: UMA Resource lifetime Required: No Default value: None","title":"umaResourceLifetime"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#umarestrictresourcetoassociatedclient","text":"Description: Restrict access to resource by associated client Required: No Default value: false","title":"umaRestrictResourceToAssociatedClient"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#umarptasjwt","text":"Description: Issue RPT as JWT or as random string Required: No Default value: false","title":"umaRptAsJwt"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#umarptlifetime","text":"Description: UMA RPT lifetime Required: No Default value: None","title":"umaRptLifetime"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#umaticketlifetime","text":"Description: UMA ticket lifetime Required: No Default value: None","title":"umaTicketLifetime"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#umavalidateclaimtoken","text":"Description: Validate claim_token as id_token assuming it is issued by local id Required: No Default value: false","title":"umaValidateClaimToken"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#updateclientaccesstime","text":"Description: Choose if application should update oxLastAccessTime/oxLastLogonTime attributes upon client authentication Required: No Default value: None","title":"updateClientAccessTime"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#updateuserlastlogontime","text":"Description: Choose if application should update oxLastLogonTime attribute upon user authentication Required: No Default value: None","title":"updateUserLastLogonTime"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#usehighestlevelscriptifacrscriptnotfound","text":"Description: Enable/Disable usage of highest level script in case ACR script does not exist Required: No Default value: false","title":"useHighestLevelScriptIfAcrScriptNotFound"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#uselocalcache","text":"Description: Cache in local memory cache attributes, scopes, clients and organization entry with expiration 60 seconds Required: No Default value: false","title":"useLocalCache"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#usenestedjwtduringencryption","text":"Description: Boolean value specifying whether to use nested Jwt during encryption Required: No Default value: true","title":"useNestedJwtDuringEncryption"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#userinfoencryptionalgvaluessupported","text":"Description: This JSON Array lists which JWS encryption algorithms (alg values) [JWA] can be used by for the UserInfo endpoint to encode the claims in a JWT Required: No Default value: None","title":"userInfoEncryptionAlgValuesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#userinfoencryptionencvaluessupported","text":"Description: This JSON Array lists which JWS encryption algorithms (enc values) [JWA] can be used by for the UserInfo endpoint to encode the claims in a JWT Required: No Default value: None","title":"userInfoEncryptionEncValuesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#userinfoendpoint","text":"Description: The User Info endpoint URL Required: No Default value: None","title":"userInfoEndpoint"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#userinfosigningalgvaluessupported","text":"Description: This JSON Array lists which JWS signing algorithms (alg values) [JWA] can be used by for the UserInfo endpoint to encode the claims in a JWT Required: No Default value: None","title":"userInfoSigningAlgValuesSupported"},{"location":"admin/reference/json/properties/janssenauthserver-properties/#webkeysstorage","text":"Description: Web Key Storage Type Required: No Default value: None","title":"webKeysStorage"},{"location":"admin/reference/json/properties/scim-properties/","tags":["administration","reference","json","properties"],"text":"SCIM Configuration Properties # Property Name Description applicationUrl Application base URL Details baseDN Application config Base DN Details baseEndpoint SCIM base endpoint URL Details bulkMaxOperations Specifies maximum bulk operations Details bulkMaxPayloadSize Specifies maximum payload size of bulk operations Details disableJdkLogger Boolean value specifying whether to enable JDK Loggers Details externalLoggerConfiguration Path to external log4j2 logging configuration Details loggingLayout Logging layout used for Server loggers Details loggingLevel Logging level for scim logger Details maxCount Maximum number of results per page Details metricReporterEnabled Metric reported data enabled flag Details metricReporterInterval The interval for metric reporter in seconds Details metricReporterKeepDataDays The days to keep metric reported data Details oxAuthIssuer Jans Auth - Issuer identifier Details personCustomObjectClass Person Object Class Details protectionMode SCIM Protection Mode Details useLocalCache Boolean value specifying whether to enable local in-memory cache Details userExtensionSchemaURI User Extension Schema URI Details applicationUrl # Description: Application base URL Required: No Default value: None baseDN # Description: Application config Base DN Required: No Default value: None baseEndpoint # Description: SCIM base endpoint URL Required: No Default value: None bulkMaxOperations # Description: Specifies maximum bulk operations Required: No Default value: None bulkMaxPayloadSize # Description: Specifies maximum payload size of bulk operations Required: No Default value: None disableJdkLogger # Description: Boolean value specifying whether to enable JDK Loggers Required: No Default value: None externalLoggerConfiguration # Description: Path to external log4j2 logging configuration Required: No Default value: None loggingLayout # Description: Logging layout used for Server loggers Required: No Default value: None loggingLevel # Description: Logging level for scim logger Required: No Default value: None maxCount # Description: Maximum number of results per page Required: No Default value: None metricReporterEnabled # Description: Metric reported data enabled flag Required: No Default value: None metricReporterInterval # Description: The interval for metric reporter in seconds Required: No Default value: None metricReporterKeepDataDays # Description: The days to keep metric reported data Required: No Default value: None oxAuthIssuer # Description: Jans Auth - Issuer identifier Required: No Default value: None personCustomObjectClass # Description: Person Object Class Required: No Default value: None protectionMode # Description: SCIM Protection Mode Required: No Default value: None useLocalCache # Description: Boolean value specifying whether to enable local in-memory cache Required: No Default value: None userExtensionSchemaURI # Description: User Extension Schema URI Required: No Default value: None","title":"SCIM"},{"location":"admin/reference/json/properties/scim-properties/#scim-configuration-properties","text":"Property Name Description applicationUrl Application base URL Details baseDN Application config Base DN Details baseEndpoint SCIM base endpoint URL Details bulkMaxOperations Specifies maximum bulk operations Details bulkMaxPayloadSize Specifies maximum payload size of bulk operations Details disableJdkLogger Boolean value specifying whether to enable JDK Loggers Details externalLoggerConfiguration Path to external log4j2 logging configuration Details loggingLayout Logging layout used for Server loggers Details loggingLevel Logging level for scim logger Details maxCount Maximum number of results per page Details metricReporterEnabled Metric reported data enabled flag Details metricReporterInterval The interval for metric reporter in seconds Details metricReporterKeepDataDays The days to keep metric reported data Details oxAuthIssuer Jans Auth - Issuer identifier Details personCustomObjectClass Person Object Class Details protectionMode SCIM Protection Mode Details useLocalCache Boolean value specifying whether to enable local in-memory cache Details userExtensionSchemaURI User Extension Schema URI Details","title":"SCIM Configuration Properties"},{"location":"admin/reference/json/properties/scim-properties/#applicationurl","text":"Description: Application base URL Required: No Default value: None","title":"applicationUrl"},{"location":"admin/reference/json/properties/scim-properties/#basedn","text":"Description: Application config Base DN Required: No Default value: None","title":"baseDN"},{"location":"admin/reference/json/properties/scim-properties/#baseendpoint","text":"Description: SCIM base endpoint URL Required: No Default value: None","title":"baseEndpoint"},{"location":"admin/reference/json/properties/scim-properties/#bulkmaxoperations","text":"Description: Specifies maximum bulk operations Required: No Default value: None","title":"bulkMaxOperations"},{"location":"admin/reference/json/properties/scim-properties/#bulkmaxpayloadsize","text":"Description: Specifies maximum payload size of bulk operations Required: No Default value: None","title":"bulkMaxPayloadSize"},{"location":"admin/reference/json/properties/scim-properties/#disablejdklogger","text":"Description: Boolean value specifying whether to enable JDK Loggers Required: No Default value: None","title":"disableJdkLogger"},{"location":"admin/reference/json/properties/scim-properties/#externalloggerconfiguration","text":"Description: Path to external log4j2 logging configuration Required: No Default value: None","title":"externalLoggerConfiguration"},{"location":"admin/reference/json/properties/scim-properties/#logginglayout","text":"Description: Logging layout used for Server loggers Required: No Default value: None","title":"loggingLayout"},{"location":"admin/reference/json/properties/scim-properties/#logginglevel","text":"Description: Logging level for scim logger Required: No Default value: None","title":"loggingLevel"},{"location":"admin/reference/json/properties/scim-properties/#maxcount","text":"Description: Maximum number of results per page Required: No Default value: None","title":"maxCount"},{"location":"admin/reference/json/properties/scim-properties/#metricreporterenabled","text":"Description: Metric reported data enabled flag Required: No Default value: None","title":"metricReporterEnabled"},{"location":"admin/reference/json/properties/scim-properties/#metricreporterinterval","text":"Description: The interval for metric reporter in seconds Required: No Default value: None","title":"metricReporterInterval"},{"location":"admin/reference/json/properties/scim-properties/#metricreporterkeepdatadays","text":"Description: The days to keep metric reported data Required: No Default value: None","title":"metricReporterKeepDataDays"},{"location":"admin/reference/json/properties/scim-properties/#oxauthissuer","text":"Description: Jans Auth - Issuer identifier Required: No Default value: None","title":"oxAuthIssuer"},{"location":"admin/reference/json/properties/scim-properties/#personcustomobjectclass","text":"Description: Person Object Class Required: No Default value: None","title":"personCustomObjectClass"},{"location":"admin/reference/json/properties/scim-properties/#protectionmode","text":"Description: SCIM Protection Mode Required: No Default value: None","title":"protectionMode"},{"location":"admin/reference/json/properties/scim-properties/#uselocalcache","text":"Description: Boolean value specifying whether to enable local in-memory cache Required: No Default value: None","title":"useLocalCache"},{"location":"admin/reference/json/properties/scim-properties/#userextensionschemauri","text":"Description: User Extension Schema URI Required: No Default value: None","title":"userExtensionSchemaURI"},{"location":"admin/reference/kubernetes/","tags":["administration","reference","kubernetes","architecture","components"],"text":"Overview # This Reference guide helps you learn about the components and architecture of Janssen. Janssen components # auth-server : The OAuth Authorization Server, the OpenID Connect Provider, the UMA Authorization Server--this is the main Internet facing component of Janssen. It's the service that returns tokens, JWT's and identity assertions. This service must be Internet facing. auth-key-rotation : Responsible for regenerating auth-keys per x hours. config-api : The API to configure the auth-server and other components is consolidated in this component. This service should not be Internet-facing. OpenDJ : A directory server which implements a wide range of Lightweight Directory Access Protocol and related standards, including full compliance with LDAPv3 but also support for Directory Service Markup Language (DSMLv2).Written in Java, OpenDJ offers multi-master replication, access control, and many extensions. Fido : Provides the server side endpoints to enroll and validate devices that use FIDO. It provides both FIDO U2F (register, authenticate) and FIDO 2 (attestation, assertion) endpoints. This service must be internet facing. SCIM : a JSON/REST API to manage user data. Use it to add, edit and update user information. This service should not be Internet facing. Architectural diagram of Janssen #","title":"Overview"},{"location":"admin/reference/kubernetes/#overview","text":"This Reference guide helps you learn about the components and architecture of Janssen.","title":"Overview"},{"location":"admin/reference/kubernetes/#janssen-components","text":"auth-server : The OAuth Authorization Server, the OpenID Connect Provider, the UMA Authorization Server--this is the main Internet facing component of Janssen. It's the service that returns tokens, JWT's and identity assertions. This service must be Internet facing. auth-key-rotation : Responsible for regenerating auth-keys per x hours. config-api : The API to configure the auth-server and other components is consolidated in this component. This service should not be Internet-facing. OpenDJ : A directory server which implements a wide range of Lightweight Directory Access Protocol and related standards, including full compliance with LDAPv3 but also support for Directory Service Markup Language (DSMLv2).Written in Java, OpenDJ offers multi-master replication, access control, and many extensions. Fido : Provides the server side endpoints to enroll and validate devices that use FIDO. It provides both FIDO U2F (register, authenticate) and FIDO 2 (attestation, assertion) endpoints. This service must be internet facing. SCIM : a JSON/REST API to manage user data. Use it to add, edit and update user information. This service should not be Internet facing.","title":"Janssen components"},{"location":"admin/reference/kubernetes/#architectural-diagram-of-janssen","text":"","title":"Architectural diagram of Janssen"},{"location":"admin/reference/kubernetes/config-secret-keys/","tags":["administration","reference","kubernetes","configmap","secret"],"text":"Overview # The Config Init job creates a set of secrets and configurations used by all Jans services. To check the values of the configmaps on the current deployment run: kubectl get configmap -n jans -o yaml To check the values of the secrets on the current deployment run : kubectl get secret -n jans -o yaml Jans Configmaps # Key Example Values admin_email support@jans.io admin_inum 631e2b84-1d3d-4f28-9a9a-026a25febf44 auth_enc_keys RSA1_5 RSA-OAEP auth_key_rotated_at 1669143906 auth_legacyIdTokenClaims false auth_openid_jks_fn /etc/certs/auth-keys.jks auth_openid_jwks_fn /etc/certs/auth-keys.json auth_openidScopeBackwardCompatibility false auth_sig_keys RS256 RS384 RS512 ES256 ES384 ES512 PS256 PS384 PS512 city Austin couchbaseTrustStoreFn /etc/certs/couchbase.pkcs12 country_code US default_openid_jks_dn_name CN=Janssen Auth CA Certificates hostname demoexample.jans.io jca_client_id 1800.ca41fad2-6ab6-46b1-b4a9-3387992a8cb0 ldap_binddn cn=directory manager ldap_init_host localhost ldap_init_port 1636 ldap_port 1389 ldap_site_binddn cn=directory manager ldapTrustStoreFn /etc/certs/opendj.pkcs12 ldaps_port 1636 optional_scopes [\"fido2\", \"scim\", \"sql\"] orgName Janssen test_client_id 2000.4a8f3e8b-96b0-435a-8427-a287c242f4d9 tui_client_id 2000.4a8f3e8b-96b0-435a-8427-a287c242f4d9 scim_client_id 12 state TX Jans Secrets # Key Encode/Decode File auth_jks_base64 base64 auth_openid_jks_pass base64 auth_openid_key_base64 base64 couchbase_password base64 couchbase_shib_user_password base64 couchbase_superuser_password base64 encoded_admin_password ldap_encode + base64 encoded_ldapTrustStorePass pyDes + base64 encoded_ox_ldap_pw pyDes + base64 encoded_salt base64 jca_client_encoded_pw pyDes + base64 jca_client_pw pyDes + base64 ldap_pkcs12_base64 pyDes + base64 /etc/certs/opendj.pkcs12 ldap_ssl_cacert pyDes + base64 /etc/certs/opendj.pem ldap_ssl_cert pyDes + base64 /etc/certs/opendj.crt ldap_ssl_key pyDes + base64 /etc/certs/opendj.key ldap_truststore_pass base64 otp_configuration base64 pairwiseCalculationKey base64 pairwiseCalculationSalt base64 tui_client_encoded_pw pyDes + base64 test_client_pw base64 tui_client_encoded_pw pyDes + base64 tui_client_pw base64 scim_client_encoded_pw pyDes + base64 scim_client_pw base64 sql_password base64 ssl_ca_cert base64 /etc/certs/ca.crt ssl_ca_key base64 /etc/certs/ca.key ssl_cert base64 /etc/certs/web_https.crt ssl_csr base64 /etc/certs/web_https.csr ssl_key base64 /etc/certs/web_https.key super_gluu_creds base64 Example decoding secrets # Opening base64 decoded secrets # Note We assume Jans is installed in a namespace called jans Get the tls-certificate from backend secret kubectl get secret tls-certificate -n jans -o yaml Copy the value of the key you want to decode. For example: data: tls.crt: <encodedValue> Base64 decode the value echo <encodedValue> | base64 -d #replace encodedValue with the value from the previous command Opening /etc/certs/opendj.pkcs12 file # Note We assume Jans is installed in a namespace called jans Make a directory called delete_me mkdir delete_me && cd delete_me Get the ldap_truststore_pass from backend secret and save ldap_truststore_pass in a file called ldap_truststore_pass kubectl get secret cn -o json -n jans | grep '\"ldap_truststore_pass\":' | sed -e 's#.*:\\(\\)#\\1#' | tr -d '\"' | tr -d \",\" | tr -d '[:space:]' > ldap_truststore_pass Base64 decode the ldap_truststore_pass and save the decoded ldap_truststore_pass in a file called ldap_truststore_pass_decoded base64 -d ldap_truststore_pass > ldap_truststore_pass_decoded Use ldap_truststore_pass_decoded to unlock /etc/certs/opendj.pkcs12 in opendj pod. keytool -list -v -keystore /etc/certs/opendj.pkcs12 --storepass ldap_truststore_pass_decoded","title":"Config and Secret Keys"},{"location":"admin/reference/kubernetes/config-secret-keys/#overview","text":"The Config Init job creates a set of secrets and configurations used by all Jans services. To check the values of the configmaps on the current deployment run: kubectl get configmap -n jans -o yaml To check the values of the secrets on the current deployment run : kubectl get secret -n jans -o yaml","title":"Overview"},{"location":"admin/reference/kubernetes/config-secret-keys/#jans-configmaps","text":"Key Example Values admin_email support@jans.io admin_inum 631e2b84-1d3d-4f28-9a9a-026a25febf44 auth_enc_keys RSA1_5 RSA-OAEP auth_key_rotated_at 1669143906 auth_legacyIdTokenClaims false auth_openid_jks_fn /etc/certs/auth-keys.jks auth_openid_jwks_fn /etc/certs/auth-keys.json auth_openidScopeBackwardCompatibility false auth_sig_keys RS256 RS384 RS512 ES256 ES384 ES512 PS256 PS384 PS512 city Austin couchbaseTrustStoreFn /etc/certs/couchbase.pkcs12 country_code US default_openid_jks_dn_name CN=Janssen Auth CA Certificates hostname demoexample.jans.io jca_client_id 1800.ca41fad2-6ab6-46b1-b4a9-3387992a8cb0 ldap_binddn cn=directory manager ldap_init_host localhost ldap_init_port 1636 ldap_port 1389 ldap_site_binddn cn=directory manager ldapTrustStoreFn /etc/certs/opendj.pkcs12 ldaps_port 1636 optional_scopes [\"fido2\", \"scim\", \"sql\"] orgName Janssen test_client_id 2000.4a8f3e8b-96b0-435a-8427-a287c242f4d9 tui_client_id 2000.4a8f3e8b-96b0-435a-8427-a287c242f4d9 scim_client_id 12 state TX","title":"Jans Configmaps"},{"location":"admin/reference/kubernetes/config-secret-keys/#jans-secrets","text":"Key Encode/Decode File auth_jks_base64 base64 auth_openid_jks_pass base64 auth_openid_key_base64 base64 couchbase_password base64 couchbase_shib_user_password base64 couchbase_superuser_password base64 encoded_admin_password ldap_encode + base64 encoded_ldapTrustStorePass pyDes + base64 encoded_ox_ldap_pw pyDes + base64 encoded_salt base64 jca_client_encoded_pw pyDes + base64 jca_client_pw pyDes + base64 ldap_pkcs12_base64 pyDes + base64 /etc/certs/opendj.pkcs12 ldap_ssl_cacert pyDes + base64 /etc/certs/opendj.pem ldap_ssl_cert pyDes + base64 /etc/certs/opendj.crt ldap_ssl_key pyDes + base64 /etc/certs/opendj.key ldap_truststore_pass base64 otp_configuration base64 pairwiseCalculationKey base64 pairwiseCalculationSalt base64 tui_client_encoded_pw pyDes + base64 test_client_pw base64 tui_client_encoded_pw pyDes + base64 tui_client_pw base64 scim_client_encoded_pw pyDes + base64 scim_client_pw base64 sql_password base64 ssl_ca_cert base64 /etc/certs/ca.crt ssl_ca_key base64 /etc/certs/ca.key ssl_cert base64 /etc/certs/web_https.crt ssl_csr base64 /etc/certs/web_https.csr ssl_key base64 /etc/certs/web_https.key super_gluu_creds base64","title":"Jans Secrets"},{"location":"admin/reference/kubernetes/config-secret-keys/#example-decoding-secrets","text":"","title":"Example decoding secrets"},{"location":"admin/reference/kubernetes/config-secret-keys/#opening-base64-decoded-secrets","text":"Note We assume Jans is installed in a namespace called jans Get the tls-certificate from backend secret kubectl get secret tls-certificate -n jans -o yaml Copy the value of the key you want to decode. For example: data: tls.crt: <encodedValue> Base64 decode the value echo <encodedValue> | base64 -d #replace encodedValue with the value from the previous command","title":"Opening base64 decoded secrets"},{"location":"admin/reference/kubernetes/config-secret-keys/#opening-etccertsopendjpkcs12-file","text":"Note We assume Jans is installed in a namespace called jans Make a directory called delete_me mkdir delete_me && cd delete_me Get the ldap_truststore_pass from backend secret and save ldap_truststore_pass in a file called ldap_truststore_pass kubectl get secret cn -o json -n jans | grep '\"ldap_truststore_pass\":' | sed -e 's#.*:\\(\\)#\\1#' | tr -d '\"' | tr -d \",\" | tr -d '[:space:]' > ldap_truststore_pass Base64 decode the ldap_truststore_pass and save the decoded ldap_truststore_pass in a file called ldap_truststore_pass_decoded base64 -d ldap_truststore_pass > ldap_truststore_pass_decoded Use ldap_truststore_pass_decoded to unlock /etc/certs/opendj.pkcs12 in opendj pod. keytool -list -v -keystore /etc/certs/opendj.pkcs12 --storepass ldap_truststore_pass_decoded","title":"Opening /etc/certs/opendj.pkcs12 file"},{"location":"admin/reference/kubernetes/docker-jans-auth-server/","tags":["administration","reference","kubernetes","docker image"],"text":"Overview # Docker image packaging for Janssen Authorization Server. Versions # See Packages for available versions. Environment Variables # The following environment variables are supported by the container: CN_CONFIG_ADAPTER : The config backend adapter, can be consul (default), kubernetes , google , or aws . CN_CONFIG_CONSUL_HOST : hostname or IP of Consul (default to localhost ). CN_CONFIG_CONSUL_PORT : port of Consul (default to 8500 ). CN_CONFIG_CONSUL_CONSISTENCY : Consul consistency mode (choose one of default , consistent , or stale ). Default to stale mode. CN_CONFIG_CONSUL_SCHEME : supported Consul scheme ( http or https ). CN_CONFIG_CONSUL_VERIFY : whether to verify cert or not (default to false ). CN_CONFIG_CONSUL_CACERT_FILE : path to Consul CA cert file (default to /etc/certs/consul_ca.crt ). This file will be used if it exists and CN_CONFIG_CONSUL_VERIFY set to true . CN_CONFIG_CONSUL_CERT_FILE : path to Consul cert file (default to /etc/certs/consul_client.crt ). CN_CONFIG_CONSUL_KEY_FILE : path to Consul key file (default to /etc/certs/consul_client.key ). CN_CONFIG_CONSUL_TOKEN_FILE : path to file contains ACL token (default to /etc/certs/consul_token ). CN_CONFIG_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_CONFIG_KUBERNETES_CONFIGMAP : Kubernetes configmaps name (default to jans ). CN_CONFIG_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_SECRET_ADAPTER : The secrets' adapter, can be vault (default), kubernetes , google , or aws . CN_SECRET_VAULT_SCHEME : supported Vault scheme ( http or https ). CN_SECRET_VAULT_HOST : hostname or IP of Vault (default to localhost ). CN_SECRET_VAULT_PORT : port of Vault (default to 8200 ). CN_SECRET_VAULT_VERIFY : whether to verify cert or not (default to false ). CN_SECRET_VAULT_ROLE_ID_FILE : path to file contains Vault AppRole role ID (default to /etc/certs/vault_role_id ). CN_SECRET_VAULT_SECRET_ID_FILE : path to file contains Vault AppRole secret ID (default to /etc/certs/vault_secret_id ). CN_SECRET_VAULT_CERT_FILE : path to Vault cert file (default to /etc/certs/vault_client.crt ). CN_SECRET_VAULT_KEY_FILE : path to Vault key file (default to /etc/certs/vault_client.key ). CN_SECRET_VAULT_CACERT_FILE : path to Vault CA cert file (default to /etc/certs/vault_ca.crt ). This file will be used if it exists and CN_SECRET_VAULT_VERIFY set to true . CN_SECRET_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_SECRET_KUBERNETES_SECRET : Kubernetes secrets name (default to jans ). CN_SECRET_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_WAIT_MAX_TIME : How long the startup \"health checks\" should run (default to 300 seconds). CN_WAIT_SLEEP_DURATION : Delay between startup \"health checks\" (default to 10 seconds). CN_MAX_RAM_PERCENTAGE : Value passed to Java option -XX:MaxRAMPercentage . CN_DEBUG_PORT : port of remote debugging (if omitted, remote debugging will be disabled). CN_PERSISTENCE_TYPE : Persistence backend being used (one of ldap , couchbase , or hybrid ; default to ldap ). CN_HYBRID_MAPPING : Specify data mapping for each persistence (default to \"{}\" ). Note this environment only takes effect when CN_PERSISTENCE_TYPE is set to hybrid . See hybrid mapping section for details. CN_LDAP_URL : Address and port of LDAP server (default to localhost:1636 ). CN_LDAP_USE_SSL : Whether to use SSL connection to LDAP server (default to true ). CN_COUCHBASE_URL : Address of Couchbase server (default to localhost ). CN_COUCHBASE_USER : Username of Couchbase server (default to admin ). CN_COUCHBASE_CERT_FILE : Couchbase root certificate location (default to /etc/certs/couchbase.crt ). CN_COUCHBASE_PASSWORD_FILE : Path to file contains Couchbase password (default to /etc/jans/conf/couchbase_password ). CN_COUCHBASE_CONN_TIMEOUT : Connect timeout used when a bucket is opened (default to 10000 milliseconds). CN_COUCHBASE_CONN_MAX_WAIT : Maximum time to wait before retrying connection (default to 20000 milliseconds). CN_COUCHBASE_SCAN_CONSISTENCY : Default scan consistency; one of not_bounded , request_plus , or statement_plus (default to not_bounded ). CN_COUCHBASE_BUCKET_PREFIX : Prefix for Couchbase buckets (default to jans ). CN_COUCHBASE_TRUSTSTORE_ENABLE : Enable truststore for encrypted Couchbase connection (default to true ). CN_COUCHBASE_KEEPALIVE_INTERVAL : Keep-alive interval for Couchbase connection (default to 30000 milliseconds). CN_COUCHBASE_KEEPALIVE_TIMEOUT : Keep-alive timeout for Couchbase connection (default to 2500 milliseconds). CN_JAVA_OPTIONS : Java options passed to entrypoint, i.e. -Xmx1024m (default to empty-string). CN_DOCUMENT_STORE_TYPE : Document store type (one of LOCAL or JCA ; default to LOCAL ). CN_JACKRABBIT_URL : URL to remote repository (default to http://localhost:8080 ). CN_JACKRABBIT_SYNC_INTERVAL : Interval between files sync (default to 300 seconds). CN_JACKRABBIT_ADMIN_ID : Admin username (default to admin ). CN_JACKRABBIT_ADMIN_PASSWORD_FILE : Absolute path to file contains password for admin user (default to /etc/jans/conf/jackrabbit_admin_password ). CN_SYNC_JKS_ENABLED : Whether to enable JKS sync (default to false ). Enable this flag if using gluufederation/key-rotation:4.1.1_02 and below (for key-regeneration). CN_SYNC_JKS_INTERVAL : Interval of JKS sync in seconds (if needed); obsolete. GOOGLE_APPLICATION_CREDENTIALS : Optional JSON file (contains Google credentials) that can be injected into container for authentication. Refer to https://cloud.google.com/docs/authentication/provide-credentials-adc#how-to for supported credentials. GOOGLE_PROJECT_ID : ID of Google project. CN_GOOGLE_SECRET_VERSION_ID : Janssen secret version ID in Google Secret Manager. Defaults to latest , which is recommended. CN_GOOGLE_SECRET_NAME_PREFIX : Prefix for Janssen secret in Google Secret Manager. Defaults to jans . If left jans-secret secret will be created. CN_GOOGLE_SECRET_MANAGER_PASSPHRASE : Passphrase for Janssen secret in Google Secret Manager. This is recommended to be changed and defaults to secret . CN_GOOGLE_SPANNER_INSTANCE_ID : Google Spanner instance ID. CN_GOOGLE_SPANNER_DATABASE_ID : Google Spanner database ID. CN_JETTY_REQUEST_HEADER_SIZE : Maximum size of request header accepted by Jetty (default to 8192 ). CN_AUTH_APP_LOGGERS : Custom logging configuration in JSON-string format with hash type (see Configure app loggers section for details). CN_PROMETHEUS_PORT : Port used by Prometheus JMX agent (default to empty string). To enable Prometheus JMX agent, set the value to a number. See Exposing metrics for details. CN_SQL_DB_HOST : Hostname of the SQL database (default to localhost ). CN_SQL_DB_PORT : Port of the SQL database (default to 3306 for MySQL). CN_SQL_DB_NAME : SQL database name (default to jans ). CN_SQL_DB_USER : User name to access the SQL database (default to jans ). CN_SQL_DB_DIALECT : Dialect name of the SQL ( mysql for MySQL or pgsql for PostgreSQL; default to mysql ). CN_SQL_DB_TIMEZONE : Timezone used by the SQL database (default to UTC ). CN_SQL_DB_SCHEMA : Schema name used by SQL database (default to empty-string; if using MySQL, the schema name will be resolved as the database name, whereas in PostgreSQL the schema name will be resolved as \"public\" ). CN_AWS_SECRETS_ENDPOINT_URL : The URL of AWS secretsmanager service (if omitted, will use the one in specified region). CN_AWS_SECRETS_PREFIX : The prefix name of the secrets (default to jans ). CN_AWS_SECRETS_REPLICA_FILE : The location of file contains replica regions definition (if any). This file is mostly used in primary region. Example of contents of the file: [{\"Region\": \"us-west-1\"}] . AWS_DEFAULT_REGION : The default AWS Region to use, for example, us-west-1 or us-west-2 . AWS_SHARED_CREDENTIALS_FILE : The location of the shared credentials file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_CONFIG_FILE : The location of the config file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_PROFILE : The default profile to use, if any. Configure app loggers # App loggers can be configured to define where the logs will be redirected and what is the level the logs should be displayed. Supported redirect target: STDOUT FILE Supported level: FATAL ERROR WARN INFO DEBUG TRACE The following key-value pairs are the defaults: { \"auth_log_target\" : \"STDOUT\" , \"auth_log_level\" : \"INFO\" , \"http_log_target\" : \"FILE\" , \"http_log_level\" : \"INFO\" , \"persistence_log_target\" : \"FILE\" , \"persistence_log_level\" : \"INFO\" , \"persistence_duration_log_target\" : \"FILE\" , \"persistence_duration_log_level\" : \"INFO\" , \"ldap_stats_log_target\" : \"FILE\" , \"ldap_stats_log_level\" : \"INFO\" , \"script_log_target\" : \"FILE\" , \"script_log_level\" : \"INFO\" , \"audit_log_target\" : \"FILE\" , \"audit_log_level\" : \"INFO\" } To enable prefix on STDOUT logging, set the enable_stdout_log_prefix key. Example: {\"auth_log_target\":\"STDOUT\",\"script_log_target\":\"STDOUT\",\"enable_stdout_log_prefix\":true} Hybrid mapping # As per v1.0.1, hybrid persistence supports all available persistence types. To configure hybrid persistence and its data mapping, follow steps below: Set CN_PERSISTENCE_TYPE environment variable to hybrid Set CN_HYBRID_MAPPING with the following format: { \"default\": \"<couchbase|ldap|spanner|sql>\", \"user\": \"<couchbase|ldap|spanner|sql>\", \"site\": \"<couchbase|ldap|spanner|sql>\", \"cache\": \"<couchbase|ldap|spanner|sql>\", \"token\": \"<couchbase|ldap|spanner|sql>\", \"session\": \"<couchbase|ldap|spanner|sql>\", } Example: { \"default\": \"sql\", \"user\": \"spanner\", \"site\": \"ldap\", \"cache\": \"sql\", \"token\": \"couchbase\", \"session\": \"spanner\", } Exposing metrics # As per v1.0.1, certain metrics can be exposed via Prometheus JMX exporter. To expose the metrics, set the CN_PROMETHEUS_PORT environment variable, i.e. CN_PROMETHEUS_PORT=9093 . Afterwards, metrics can be scraped by Prometheus or accessed manually by making request to /metrics URL, i.e. http://container:9093/metrics . Note that Prometheus JMX exporter uses pre-defined config file (see conf/prometheus-config.yaml ). To customize the config, mount custom config file to /opt/prometheus/prometheus-config.yaml inside the container.","title":"Auth Server"},{"location":"admin/reference/kubernetes/docker-jans-auth-server/#overview","text":"Docker image packaging for Janssen Authorization Server.","title":"Overview"},{"location":"admin/reference/kubernetes/docker-jans-auth-server/#versions","text":"See Packages for available versions.","title":"Versions"},{"location":"admin/reference/kubernetes/docker-jans-auth-server/#environment-variables","text":"The following environment variables are supported by the container: CN_CONFIG_ADAPTER : The config backend adapter, can be consul (default), kubernetes , google , or aws . CN_CONFIG_CONSUL_HOST : hostname or IP of Consul (default to localhost ). CN_CONFIG_CONSUL_PORT : port of Consul (default to 8500 ). CN_CONFIG_CONSUL_CONSISTENCY : Consul consistency mode (choose one of default , consistent , or stale ). Default to stale mode. CN_CONFIG_CONSUL_SCHEME : supported Consul scheme ( http or https ). CN_CONFIG_CONSUL_VERIFY : whether to verify cert or not (default to false ). CN_CONFIG_CONSUL_CACERT_FILE : path to Consul CA cert file (default to /etc/certs/consul_ca.crt ). This file will be used if it exists and CN_CONFIG_CONSUL_VERIFY set to true . CN_CONFIG_CONSUL_CERT_FILE : path to Consul cert file (default to /etc/certs/consul_client.crt ). CN_CONFIG_CONSUL_KEY_FILE : path to Consul key file (default to /etc/certs/consul_client.key ). CN_CONFIG_CONSUL_TOKEN_FILE : path to file contains ACL token (default to /etc/certs/consul_token ). CN_CONFIG_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_CONFIG_KUBERNETES_CONFIGMAP : Kubernetes configmaps name (default to jans ). CN_CONFIG_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_SECRET_ADAPTER : The secrets' adapter, can be vault (default), kubernetes , google , or aws . CN_SECRET_VAULT_SCHEME : supported Vault scheme ( http or https ). CN_SECRET_VAULT_HOST : hostname or IP of Vault (default to localhost ). CN_SECRET_VAULT_PORT : port of Vault (default to 8200 ). CN_SECRET_VAULT_VERIFY : whether to verify cert or not (default to false ). CN_SECRET_VAULT_ROLE_ID_FILE : path to file contains Vault AppRole role ID (default to /etc/certs/vault_role_id ). CN_SECRET_VAULT_SECRET_ID_FILE : path to file contains Vault AppRole secret ID (default to /etc/certs/vault_secret_id ). CN_SECRET_VAULT_CERT_FILE : path to Vault cert file (default to /etc/certs/vault_client.crt ). CN_SECRET_VAULT_KEY_FILE : path to Vault key file (default to /etc/certs/vault_client.key ). CN_SECRET_VAULT_CACERT_FILE : path to Vault CA cert file (default to /etc/certs/vault_ca.crt ). This file will be used if it exists and CN_SECRET_VAULT_VERIFY set to true . CN_SECRET_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_SECRET_KUBERNETES_SECRET : Kubernetes secrets name (default to jans ). CN_SECRET_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_WAIT_MAX_TIME : How long the startup \"health checks\" should run (default to 300 seconds). CN_WAIT_SLEEP_DURATION : Delay between startup \"health checks\" (default to 10 seconds). CN_MAX_RAM_PERCENTAGE : Value passed to Java option -XX:MaxRAMPercentage . CN_DEBUG_PORT : port of remote debugging (if omitted, remote debugging will be disabled). CN_PERSISTENCE_TYPE : Persistence backend being used (one of ldap , couchbase , or hybrid ; default to ldap ). CN_HYBRID_MAPPING : Specify data mapping for each persistence (default to \"{}\" ). Note this environment only takes effect when CN_PERSISTENCE_TYPE is set to hybrid . See hybrid mapping section for details. CN_LDAP_URL : Address and port of LDAP server (default to localhost:1636 ). CN_LDAP_USE_SSL : Whether to use SSL connection to LDAP server (default to true ). CN_COUCHBASE_URL : Address of Couchbase server (default to localhost ). CN_COUCHBASE_USER : Username of Couchbase server (default to admin ). CN_COUCHBASE_CERT_FILE : Couchbase root certificate location (default to /etc/certs/couchbase.crt ). CN_COUCHBASE_PASSWORD_FILE : Path to file contains Couchbase password (default to /etc/jans/conf/couchbase_password ). CN_COUCHBASE_CONN_TIMEOUT : Connect timeout used when a bucket is opened (default to 10000 milliseconds). CN_COUCHBASE_CONN_MAX_WAIT : Maximum time to wait before retrying connection (default to 20000 milliseconds). CN_COUCHBASE_SCAN_CONSISTENCY : Default scan consistency; one of not_bounded , request_plus , or statement_plus (default to not_bounded ). CN_COUCHBASE_BUCKET_PREFIX : Prefix for Couchbase buckets (default to jans ). CN_COUCHBASE_TRUSTSTORE_ENABLE : Enable truststore for encrypted Couchbase connection (default to true ). CN_COUCHBASE_KEEPALIVE_INTERVAL : Keep-alive interval for Couchbase connection (default to 30000 milliseconds). CN_COUCHBASE_KEEPALIVE_TIMEOUT : Keep-alive timeout for Couchbase connection (default to 2500 milliseconds). CN_JAVA_OPTIONS : Java options passed to entrypoint, i.e. -Xmx1024m (default to empty-string). CN_DOCUMENT_STORE_TYPE : Document store type (one of LOCAL or JCA ; default to LOCAL ). CN_JACKRABBIT_URL : URL to remote repository (default to http://localhost:8080 ). CN_JACKRABBIT_SYNC_INTERVAL : Interval between files sync (default to 300 seconds). CN_JACKRABBIT_ADMIN_ID : Admin username (default to admin ). CN_JACKRABBIT_ADMIN_PASSWORD_FILE : Absolute path to file contains password for admin user (default to /etc/jans/conf/jackrabbit_admin_password ). CN_SYNC_JKS_ENABLED : Whether to enable JKS sync (default to false ). Enable this flag if using gluufederation/key-rotation:4.1.1_02 and below (for key-regeneration). CN_SYNC_JKS_INTERVAL : Interval of JKS sync in seconds (if needed); obsolete. GOOGLE_APPLICATION_CREDENTIALS : Optional JSON file (contains Google credentials) that can be injected into container for authentication. Refer to https://cloud.google.com/docs/authentication/provide-credentials-adc#how-to for supported credentials. GOOGLE_PROJECT_ID : ID of Google project. CN_GOOGLE_SECRET_VERSION_ID : Janssen secret version ID in Google Secret Manager. Defaults to latest , which is recommended. CN_GOOGLE_SECRET_NAME_PREFIX : Prefix for Janssen secret in Google Secret Manager. Defaults to jans . If left jans-secret secret will be created. CN_GOOGLE_SECRET_MANAGER_PASSPHRASE : Passphrase for Janssen secret in Google Secret Manager. This is recommended to be changed and defaults to secret . CN_GOOGLE_SPANNER_INSTANCE_ID : Google Spanner instance ID. CN_GOOGLE_SPANNER_DATABASE_ID : Google Spanner database ID. CN_JETTY_REQUEST_HEADER_SIZE : Maximum size of request header accepted by Jetty (default to 8192 ). CN_AUTH_APP_LOGGERS : Custom logging configuration in JSON-string format with hash type (see Configure app loggers section for details). CN_PROMETHEUS_PORT : Port used by Prometheus JMX agent (default to empty string). To enable Prometheus JMX agent, set the value to a number. See Exposing metrics for details. CN_SQL_DB_HOST : Hostname of the SQL database (default to localhost ). CN_SQL_DB_PORT : Port of the SQL database (default to 3306 for MySQL). CN_SQL_DB_NAME : SQL database name (default to jans ). CN_SQL_DB_USER : User name to access the SQL database (default to jans ). CN_SQL_DB_DIALECT : Dialect name of the SQL ( mysql for MySQL or pgsql for PostgreSQL; default to mysql ). CN_SQL_DB_TIMEZONE : Timezone used by the SQL database (default to UTC ). CN_SQL_DB_SCHEMA : Schema name used by SQL database (default to empty-string; if using MySQL, the schema name will be resolved as the database name, whereas in PostgreSQL the schema name will be resolved as \"public\" ). CN_AWS_SECRETS_ENDPOINT_URL : The URL of AWS secretsmanager service (if omitted, will use the one in specified region). CN_AWS_SECRETS_PREFIX : The prefix name of the secrets (default to jans ). CN_AWS_SECRETS_REPLICA_FILE : The location of file contains replica regions definition (if any). This file is mostly used in primary region. Example of contents of the file: [{\"Region\": \"us-west-1\"}] . AWS_DEFAULT_REGION : The default AWS Region to use, for example, us-west-1 or us-west-2 . AWS_SHARED_CREDENTIALS_FILE : The location of the shared credentials file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_CONFIG_FILE : The location of the config file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_PROFILE : The default profile to use, if any.","title":"Environment Variables"},{"location":"admin/reference/kubernetes/docker-jans-auth-server/#configure-app-loggers","text":"App loggers can be configured to define where the logs will be redirected and what is the level the logs should be displayed. Supported redirect target: STDOUT FILE Supported level: FATAL ERROR WARN INFO DEBUG TRACE The following key-value pairs are the defaults: { \"auth_log_target\" : \"STDOUT\" , \"auth_log_level\" : \"INFO\" , \"http_log_target\" : \"FILE\" , \"http_log_level\" : \"INFO\" , \"persistence_log_target\" : \"FILE\" , \"persistence_log_level\" : \"INFO\" , \"persistence_duration_log_target\" : \"FILE\" , \"persistence_duration_log_level\" : \"INFO\" , \"ldap_stats_log_target\" : \"FILE\" , \"ldap_stats_log_level\" : \"INFO\" , \"script_log_target\" : \"FILE\" , \"script_log_level\" : \"INFO\" , \"audit_log_target\" : \"FILE\" , \"audit_log_level\" : \"INFO\" } To enable prefix on STDOUT logging, set the enable_stdout_log_prefix key. Example: {\"auth_log_target\":\"STDOUT\",\"script_log_target\":\"STDOUT\",\"enable_stdout_log_prefix\":true}","title":"Configure app loggers"},{"location":"admin/reference/kubernetes/docker-jans-auth-server/#hybrid-mapping","text":"As per v1.0.1, hybrid persistence supports all available persistence types. To configure hybrid persistence and its data mapping, follow steps below: Set CN_PERSISTENCE_TYPE environment variable to hybrid Set CN_HYBRID_MAPPING with the following format: { \"default\": \"<couchbase|ldap|spanner|sql>\", \"user\": \"<couchbase|ldap|spanner|sql>\", \"site\": \"<couchbase|ldap|spanner|sql>\", \"cache\": \"<couchbase|ldap|spanner|sql>\", \"token\": \"<couchbase|ldap|spanner|sql>\", \"session\": \"<couchbase|ldap|spanner|sql>\", } Example: { \"default\": \"sql\", \"user\": \"spanner\", \"site\": \"ldap\", \"cache\": \"sql\", \"token\": \"couchbase\", \"session\": \"spanner\", }","title":"Hybrid mapping"},{"location":"admin/reference/kubernetes/docker-jans-auth-server/#exposing-metrics","text":"As per v1.0.1, certain metrics can be exposed via Prometheus JMX exporter. To expose the metrics, set the CN_PROMETHEUS_PORT environment variable, i.e. CN_PROMETHEUS_PORT=9093 . Afterwards, metrics can be scraped by Prometheus or accessed manually by making request to /metrics URL, i.e. http://container:9093/metrics . Note that Prometheus JMX exporter uses pre-defined config file (see conf/prometheus-config.yaml ). To customize the config, mount custom config file to /opt/prometheus/prometheus-config.yaml inside the container.","title":"Exposing metrics"},{"location":"admin/reference/kubernetes/docker-jans-certmanager/","tags":["administration","reference","kubernetes","docker image"],"text":"Overview # Container image to manage X.509 certificates and crypto keys in Janssen Server. The container designed to run as one-time command (or Job in kubernetes world). Versions # See Packages for available versions. Environment Variables # The following environment variables are supported by the container: CN_CONFIG_ADAPTER : The config backend adapter, can be consul (default), kubernetes , google , or aws . CN_CONFIG_CONSUL_HOST : hostname or IP of Consul (default to localhost ). CN_CONFIG_CONSUL_PORT : port of Consul (default to 8500 ). CN_CONFIG_CONSUL_CONSISTENCY : Consul consistency mode (choose one of default , consistent , or stale ). Default to stale mode. CN_CONFIG_CONSUL_SCHEME : supported Consul scheme ( http or https ). CN_CONFIG_CONSUL_VERIFY : whether to verify cert or not (default to false ). CN_CONFIG_CONSUL_CACERT_FILE : path to Consul CA cert file (default to /etc/certs/consul_ca.crt ). This file will be used if it exists and CN_CONFIG_CONSUL_VERIFY set to true . CN_CONFIG_CONSUL_CERT_FILE : path to Consul cert file (default to /etc/certs/consul_client.crt ). CN_CONFIG_CONSUL_KEY_FILE : path to Consul key file (default to /etc/certs/consul_client.key ). CN_CONFIG_CONSUL_TOKEN_FILE : path to file contains ACL token (default to /etc/certs/consul_token ). CN_CONFIG_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_CONFIG_KUBERNETES_CONFIGMAP : Kubernetes configmaps name (default to jans ). CN_CONFIG_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_SECRET_ADAPTER : The secrets' adapter, can be vault (default), kubernetes , google , or aws . CN_SECRET_VAULT_SCHEME : supported Vault scheme ( http or https ). CN_SECRET_VAULT_HOST : hostname or IP of Vault (default to localhost ). CN_SECRET_VAULT_PORT : port of Vault (default to 8200 ). CN_SECRET_VAULT_VERIFY : whether to verify cert or not (default to false ). CN_SECRET_VAULT_ROLE_ID_FILE : path to file contains Vault AppRole role ID (default to /etc/certs/vault_role_id ). CN_SECRET_VAULT_SECRET_ID_FILE : path to file contains Vault AppRole secret ID (default to /etc/certs/vault_secret_id ). CN_SECRET_VAULT_CERT_FILE : path to Vault cert file (default to /etc/certs/vault_client.crt ). CN_SECRET_VAULT_KEY_FILE : path to Vault key file (default to /etc/certs/vault_client.key ). CN_SECRET_VAULT_CACERT_FILE : path to Vault CA cert file (default to /etc/certs/vault_ca.crt ). This file will be used if it exists and CN_SECRET_VAULT_VERIFY set to true . CN_SECRET_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_SECRET_KUBERNETES_SECRET : Kubernetes secrets name (default to jans ). CN_SECRET_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_SECRET_GOOGLE_SECRET_VERSION_ID : Google Secret Manager version ID (default to latest ). CN_SECRET_GOOGLE_SECRET_NAME_PREFIX : Prefix for Google Secret Manager name (default to jans ). CN_SECRET_GOOGLE_SECRET_MANAGER_PASSPHRASE : Passphrase for Google Secret Manager (default to secret ). CN_PERSISTENCE_TYPE : Persistence backend being used (one of ldap , couchbase , or hybrid ; default to ldap ). CN_HYBRID_MAPPING : Specify data mapping for each persistence (default to \"{}\" ). Note this environment only takes effect when CN_PERSISTENCE_TYPE is set to hybrid . See hybrid mapping section for details. CN_LDAP_URL : Address and port of LDAP server (default to localhost:1636 ). CN_LDAP_USE_SSL : Whether to use SSL connection to LDAP server (default to true ). CN_COUCHBASE_URL : Address of Couchbase server (default to localhost ). CN_COUCHBASE_USER : Username of Couchbase server (default to admin ). CN_COUCHBASE_CERT_FILE : Couchbase root certificate location (default to /etc/certs/couchbase.crt ). CN_COUCHBASE_PASSWORD_FILE : Path to file contains Couchbase password (default to /etc/jans/conf/couchbase_password ). CN_COUCHBASE_CONN_TIMEOUT : Connect timeout used when a bucket is opened (default to 10000 milliseconds). CN_COUCHBASE_CONN_MAX_WAIT : Maximum time to wait before retrying connection (default to 20000 milliseconds). CN_COUCHBASE_SCAN_CONSISTENCY : Default scan consistency; one of not_bounded , request_plus , or statement_plus (default to not_bounded ). CN_COUCHBASE_BUCKET_PREFIX : Prefix for Couchbase buckets (default to jans ). CN_COUCHBASE_TRUSTSTORE_ENABLE : Enable truststore for encrypted Couchbase connection (default to true ). CN_COUCHBASE_KEEPALIVE_INTERVAL : Keep-alive interval for Couchbase connection (default to 30000 milliseconds). CN_COUCHBASE_KEEPALIVE_TIMEOUT : Keep-alive timeout for Couchbase connection (default to 2500 milliseconds). CN_CONTAINER_METADATA : The name of scheduler to pull container metadata (one of docker or kubernetes ; default to docker ). GOOGLE_APPLICATION_CREDENTIALS : Optional JSON file (contains Google credentials) that can be injected into container for authentication. Refer to https://cloud.google.com/docs/authentication/provide-credentials-adc#how-to for supported credentials. GOOGLE_PROJECT_ID : ID of Google project. CN_GOOGLE_SECRET_VERSION_ID : Janssen secret version ID in Google Secret Manager. Defaults to latest , which is recommended. CN_GOOGLE_SECRET_NAME_PREFIX : Prefix for Janssen secret in Google Secret Manager. Defaults to jans . If left jans-secret secret will be created. CN_GOOGLE_SECRET_MANAGER_PASSPHRASE : Passphrase for Janssen secret in Google Secret Manager. This is recommended to be changed and defaults to secret . CN_GOOGLE_SPANNER_INSTANCE_ID : Google Spanner instance ID. CN_GOOGLE_SPANNER_DATABASE_ID : Google Spanner database ID. CN_SQL_DB_HOST : Hostname of the SQL database (default to localhost ). CN_SQL_DB_PORT : Port of the SQL database (default to 3306 for MySQL). CN_SQL_DB_NAME : SQL database name (default to jans ). CN_SQL_DB_USER : User name to access the SQL database (default to jans ). CN_SQL_DB_DIALECT : Dialect name of the SQL ( mysql for MySQL or pgsql for PostgreSQL; default to mysql ). CN_SQL_DB_TIMEZONE : Timezone used by the SQL database (default to UTC ). CN_SQL_DB_SCHEMA : Schema name used by SQL database (default to empty-string; if using MySQL, the schema name will be resolved as the database name, whereas in PostgreSQL the schema name will be resolved as \"public\" ). CN_AWS_SECRETS_ENDPOINT_URL : The URL of AWS secretsmanager service (if omitted, will use the one in specified region). CN_AWS_SECRETS_PREFIX : The prefix name of the secrets (default to jans ). CN_AWS_SECRETS_REPLICA_FILE : The location of file contains replica regions definition (if any). This file is mostly used in primary region. Example of contents of the file: [{\"Region\": \"us-west-1\"}] . AWS_DEFAULT_REGION : The default AWS Region to use, for example, us-west-1 or us-west-2 . AWS_SHARED_CREDENTIALS_FILE : The location of the shared credentials file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_CONFIG_FILE : The location of the config file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_PROFILE : The default profile to use, if any. Usage # Commands # The following commands are supported by the container: patch prune patch # Updates X.509 certificates and/or crypto keys related to the service. Usage: certmanager patch [OPTIONS] SERVICE Patch cert and/or crypto keys for the targeted service. Options: --dry-run Enable dryrun mode. --opts KEY:VALUE Options for targeted service (can be set multiple times). -h, --help Show this message and exit. Global options: --dry-run --opts : service-dependent options, example: --opts interval:48 Supported services: web (nginx container or ingress) Load from existing or re-generate: /etc/certs/jans_https.crt /etc/certs/jans_https.key . Options: source : from-files or empty string valid-to : Validity length in days (default to 365 ) auth Re-generate: /etc/certs/auth-keys.json /etc/certs/auth-keys.jks Options: interval : crypto keys expiration time (in hours) push-to-container : whether to push auth-keys.jks and auth-keys.json to auth-server containers (default to true ) key-strategy : key selection strategy (choose one of OLDER , NEWER , FIRST ; default to NEWER ) privkey-push-delay : delay time in seconds before pushing auth-keys.jks to auth containers (default to 0 ) privkey-push-strategy : key selection strategy after auth-keys.jks is pushed to auth containers (choose one of OLDER , NEWER , FIRST ; default to NEWER ) sig-keys : space-separated key algorithm for signing (default to RS256 RS384 RS512 ES256 ES384 ES512 PS256 PS384 PS512 ) enc-keys : space-separated key algorithm for encryption (default to RSA1_5 RSA-OAEP ) ldap Re-generate: /etc/certs/opendj.crt /etc/certs/opendj.key /etc/certs/opendj.pem /etc/certs/opendj.pkcs12 Options: subj-alt-name : Subject Alternative Name (SAN) for certificate (default to localhost ) valid-to : Validity length in days (default to 365 ) prune # Delete expired crypto keys (if any) related to the service. Usage: certmanager prune [OPTIONS] SERVICE Cleanup expired crypto keys for the targeted service. Options: --dry-run Enable dryrun mode. --opts KEY:VALUE Options for targeted service (can be set multiple times). -h, --help Show this message and exit. Global options: --dry-run --opts : service-dependent options, example: --opts interval:48 Supported services: auth Delete expired keys (if any) from the following files: /etc/certs/auth-keys.json /etc/certs/auth-keys.jks Options: push-to-container : whether to push auth-keys.jks and auth-keys.json to auth containers (default to true ) sig-keys : space-separated key algorithm for signing (default to RS256 RS384 RS512 ES256 ES384 ES512 PS256 PS384 PS512 ) enc-keys : space-separated key algorithm for encryption (default to RSA1_5 RSA-OAEP ) Examples # Kubernetes CronJob example: kind : CronJob apiVersion : batch/v1beta1 metadata : name : auth-key-rotation spec : schedule : \"0 */48 * * *\" concurrencyPolicy : Forbid jobTemplate : spec : template : spec : containers : - name : auth-key-rotation image : ghcr.io/janssenproject/jans/certmanager:1.0.16_dev resources : requests : memory : \"300Mi\" cpu : \"300m\" limits : memory : \"300Mi\" cpu : \"300m\" envFrom : - configMapRef : name : jans-config-cm args : [ \"patch\" , \"auth\" , \"--opts\" , \"interval:48\" ] restartPolicy : Never Hybrid mapping # As per v1.0.1, hybrid persistence supports all available persistence types. To configure hybrid persistence and its data mapping, follow steps below: Set CN_PERSISTENCE_TYPE environment variable to hybrid Set CN_HYBRID_MAPPING with the following format: { \"default\": \"<couchbase|ldap|spanner|sql>\", \"user\": \"<couchbase|ldap|spanner|sql>\", \"site\": \"<couchbase|ldap|spanner|sql>\", \"cache\": \"<couchbase|ldap|spanner|sql>\", \"token\": \"<couchbase|ldap|spanner|sql>\", \"session\": \"<couchbase|ldap|spanner|sql>\", } Example: { \"default\": \"sql\", \"user\": \"spanner\", \"site\": \"ldap\", \"cache\": \"sql\", \"token\": \"couchbase\", \"session\": \"spanner\", }","title":"Cert Manager"},{"location":"admin/reference/kubernetes/docker-jans-certmanager/#overview","text":"Container image to manage X.509 certificates and crypto keys in Janssen Server. The container designed to run as one-time command (or Job in kubernetes world).","title":"Overview"},{"location":"admin/reference/kubernetes/docker-jans-certmanager/#versions","text":"See Packages for available versions.","title":"Versions"},{"location":"admin/reference/kubernetes/docker-jans-certmanager/#environment-variables","text":"The following environment variables are supported by the container: CN_CONFIG_ADAPTER : The config backend adapter, can be consul (default), kubernetes , google , or aws . CN_CONFIG_CONSUL_HOST : hostname or IP of Consul (default to localhost ). CN_CONFIG_CONSUL_PORT : port of Consul (default to 8500 ). CN_CONFIG_CONSUL_CONSISTENCY : Consul consistency mode (choose one of default , consistent , or stale ). Default to stale mode. CN_CONFIG_CONSUL_SCHEME : supported Consul scheme ( http or https ). CN_CONFIG_CONSUL_VERIFY : whether to verify cert or not (default to false ). CN_CONFIG_CONSUL_CACERT_FILE : path to Consul CA cert file (default to /etc/certs/consul_ca.crt ). This file will be used if it exists and CN_CONFIG_CONSUL_VERIFY set to true . CN_CONFIG_CONSUL_CERT_FILE : path to Consul cert file (default to /etc/certs/consul_client.crt ). CN_CONFIG_CONSUL_KEY_FILE : path to Consul key file (default to /etc/certs/consul_client.key ). CN_CONFIG_CONSUL_TOKEN_FILE : path to file contains ACL token (default to /etc/certs/consul_token ). CN_CONFIG_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_CONFIG_KUBERNETES_CONFIGMAP : Kubernetes configmaps name (default to jans ). CN_CONFIG_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_SECRET_ADAPTER : The secrets' adapter, can be vault (default), kubernetes , google , or aws . CN_SECRET_VAULT_SCHEME : supported Vault scheme ( http or https ). CN_SECRET_VAULT_HOST : hostname or IP of Vault (default to localhost ). CN_SECRET_VAULT_PORT : port of Vault (default to 8200 ). CN_SECRET_VAULT_VERIFY : whether to verify cert or not (default to false ). CN_SECRET_VAULT_ROLE_ID_FILE : path to file contains Vault AppRole role ID (default to /etc/certs/vault_role_id ). CN_SECRET_VAULT_SECRET_ID_FILE : path to file contains Vault AppRole secret ID (default to /etc/certs/vault_secret_id ). CN_SECRET_VAULT_CERT_FILE : path to Vault cert file (default to /etc/certs/vault_client.crt ). CN_SECRET_VAULT_KEY_FILE : path to Vault key file (default to /etc/certs/vault_client.key ). CN_SECRET_VAULT_CACERT_FILE : path to Vault CA cert file (default to /etc/certs/vault_ca.crt ). This file will be used if it exists and CN_SECRET_VAULT_VERIFY set to true . CN_SECRET_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_SECRET_KUBERNETES_SECRET : Kubernetes secrets name (default to jans ). CN_SECRET_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_SECRET_GOOGLE_SECRET_VERSION_ID : Google Secret Manager version ID (default to latest ). CN_SECRET_GOOGLE_SECRET_NAME_PREFIX : Prefix for Google Secret Manager name (default to jans ). CN_SECRET_GOOGLE_SECRET_MANAGER_PASSPHRASE : Passphrase for Google Secret Manager (default to secret ). CN_PERSISTENCE_TYPE : Persistence backend being used (one of ldap , couchbase , or hybrid ; default to ldap ). CN_HYBRID_MAPPING : Specify data mapping for each persistence (default to \"{}\" ). Note this environment only takes effect when CN_PERSISTENCE_TYPE is set to hybrid . See hybrid mapping section for details. CN_LDAP_URL : Address and port of LDAP server (default to localhost:1636 ). CN_LDAP_USE_SSL : Whether to use SSL connection to LDAP server (default to true ). CN_COUCHBASE_URL : Address of Couchbase server (default to localhost ). CN_COUCHBASE_USER : Username of Couchbase server (default to admin ). CN_COUCHBASE_CERT_FILE : Couchbase root certificate location (default to /etc/certs/couchbase.crt ). CN_COUCHBASE_PASSWORD_FILE : Path to file contains Couchbase password (default to /etc/jans/conf/couchbase_password ). CN_COUCHBASE_CONN_TIMEOUT : Connect timeout used when a bucket is opened (default to 10000 milliseconds). CN_COUCHBASE_CONN_MAX_WAIT : Maximum time to wait before retrying connection (default to 20000 milliseconds). CN_COUCHBASE_SCAN_CONSISTENCY : Default scan consistency; one of not_bounded , request_plus , or statement_plus (default to not_bounded ). CN_COUCHBASE_BUCKET_PREFIX : Prefix for Couchbase buckets (default to jans ). CN_COUCHBASE_TRUSTSTORE_ENABLE : Enable truststore for encrypted Couchbase connection (default to true ). CN_COUCHBASE_KEEPALIVE_INTERVAL : Keep-alive interval for Couchbase connection (default to 30000 milliseconds). CN_COUCHBASE_KEEPALIVE_TIMEOUT : Keep-alive timeout for Couchbase connection (default to 2500 milliseconds). CN_CONTAINER_METADATA : The name of scheduler to pull container metadata (one of docker or kubernetes ; default to docker ). GOOGLE_APPLICATION_CREDENTIALS : Optional JSON file (contains Google credentials) that can be injected into container for authentication. Refer to https://cloud.google.com/docs/authentication/provide-credentials-adc#how-to for supported credentials. GOOGLE_PROJECT_ID : ID of Google project. CN_GOOGLE_SECRET_VERSION_ID : Janssen secret version ID in Google Secret Manager. Defaults to latest , which is recommended. CN_GOOGLE_SECRET_NAME_PREFIX : Prefix for Janssen secret in Google Secret Manager. Defaults to jans . If left jans-secret secret will be created. CN_GOOGLE_SECRET_MANAGER_PASSPHRASE : Passphrase for Janssen secret in Google Secret Manager. This is recommended to be changed and defaults to secret . CN_GOOGLE_SPANNER_INSTANCE_ID : Google Spanner instance ID. CN_GOOGLE_SPANNER_DATABASE_ID : Google Spanner database ID. CN_SQL_DB_HOST : Hostname of the SQL database (default to localhost ). CN_SQL_DB_PORT : Port of the SQL database (default to 3306 for MySQL). CN_SQL_DB_NAME : SQL database name (default to jans ). CN_SQL_DB_USER : User name to access the SQL database (default to jans ). CN_SQL_DB_DIALECT : Dialect name of the SQL ( mysql for MySQL or pgsql for PostgreSQL; default to mysql ). CN_SQL_DB_TIMEZONE : Timezone used by the SQL database (default to UTC ). CN_SQL_DB_SCHEMA : Schema name used by SQL database (default to empty-string; if using MySQL, the schema name will be resolved as the database name, whereas in PostgreSQL the schema name will be resolved as \"public\" ). CN_AWS_SECRETS_ENDPOINT_URL : The URL of AWS secretsmanager service (if omitted, will use the one in specified region). CN_AWS_SECRETS_PREFIX : The prefix name of the secrets (default to jans ). CN_AWS_SECRETS_REPLICA_FILE : The location of file contains replica regions definition (if any). This file is mostly used in primary region. Example of contents of the file: [{\"Region\": \"us-west-1\"}] . AWS_DEFAULT_REGION : The default AWS Region to use, for example, us-west-1 or us-west-2 . AWS_SHARED_CREDENTIALS_FILE : The location of the shared credentials file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_CONFIG_FILE : The location of the config file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_PROFILE : The default profile to use, if any.","title":"Environment Variables"},{"location":"admin/reference/kubernetes/docker-jans-certmanager/#usage","text":"","title":"Usage"},{"location":"admin/reference/kubernetes/docker-jans-certmanager/#commands","text":"The following commands are supported by the container: patch prune","title":"Commands"},{"location":"admin/reference/kubernetes/docker-jans-certmanager/#patch","text":"Updates X.509 certificates and/or crypto keys related to the service. Usage: certmanager patch [OPTIONS] SERVICE Patch cert and/or crypto keys for the targeted service. Options: --dry-run Enable dryrun mode. --opts KEY:VALUE Options for targeted service (can be set multiple times). -h, --help Show this message and exit. Global options: --dry-run --opts : service-dependent options, example: --opts interval:48 Supported services: web (nginx container or ingress) Load from existing or re-generate: /etc/certs/jans_https.crt /etc/certs/jans_https.key . Options: source : from-files or empty string valid-to : Validity length in days (default to 365 ) auth Re-generate: /etc/certs/auth-keys.json /etc/certs/auth-keys.jks Options: interval : crypto keys expiration time (in hours) push-to-container : whether to push auth-keys.jks and auth-keys.json to auth-server containers (default to true ) key-strategy : key selection strategy (choose one of OLDER , NEWER , FIRST ; default to NEWER ) privkey-push-delay : delay time in seconds before pushing auth-keys.jks to auth containers (default to 0 ) privkey-push-strategy : key selection strategy after auth-keys.jks is pushed to auth containers (choose one of OLDER , NEWER , FIRST ; default to NEWER ) sig-keys : space-separated key algorithm for signing (default to RS256 RS384 RS512 ES256 ES384 ES512 PS256 PS384 PS512 ) enc-keys : space-separated key algorithm for encryption (default to RSA1_5 RSA-OAEP ) ldap Re-generate: /etc/certs/opendj.crt /etc/certs/opendj.key /etc/certs/opendj.pem /etc/certs/opendj.pkcs12 Options: subj-alt-name : Subject Alternative Name (SAN) for certificate (default to localhost ) valid-to : Validity length in days (default to 365 )","title":"patch"},{"location":"admin/reference/kubernetes/docker-jans-certmanager/#prune","text":"Delete expired crypto keys (if any) related to the service. Usage: certmanager prune [OPTIONS] SERVICE Cleanup expired crypto keys for the targeted service. Options: --dry-run Enable dryrun mode. --opts KEY:VALUE Options for targeted service (can be set multiple times). -h, --help Show this message and exit. Global options: --dry-run --opts : service-dependent options, example: --opts interval:48 Supported services: auth Delete expired keys (if any) from the following files: /etc/certs/auth-keys.json /etc/certs/auth-keys.jks Options: push-to-container : whether to push auth-keys.jks and auth-keys.json to auth containers (default to true ) sig-keys : space-separated key algorithm for signing (default to RS256 RS384 RS512 ES256 ES384 ES512 PS256 PS384 PS512 ) enc-keys : space-separated key algorithm for encryption (default to RSA1_5 RSA-OAEP )","title":"prune"},{"location":"admin/reference/kubernetes/docker-jans-certmanager/#examples","text":"Kubernetes CronJob example: kind : CronJob apiVersion : batch/v1beta1 metadata : name : auth-key-rotation spec : schedule : \"0 */48 * * *\" concurrencyPolicy : Forbid jobTemplate : spec : template : spec : containers : - name : auth-key-rotation image : ghcr.io/janssenproject/jans/certmanager:1.0.16_dev resources : requests : memory : \"300Mi\" cpu : \"300m\" limits : memory : \"300Mi\" cpu : \"300m\" envFrom : - configMapRef : name : jans-config-cm args : [ \"patch\" , \"auth\" , \"--opts\" , \"interval:48\" ] restartPolicy : Never","title":"Examples"},{"location":"admin/reference/kubernetes/docker-jans-certmanager/#hybrid-mapping","text":"As per v1.0.1, hybrid persistence supports all available persistence types. To configure hybrid persistence and its data mapping, follow steps below: Set CN_PERSISTENCE_TYPE environment variable to hybrid Set CN_HYBRID_MAPPING with the following format: { \"default\": \"<couchbase|ldap|spanner|sql>\", \"user\": \"<couchbase|ldap|spanner|sql>\", \"site\": \"<couchbase|ldap|spanner|sql>\", \"cache\": \"<couchbase|ldap|spanner|sql>\", \"token\": \"<couchbase|ldap|spanner|sql>\", \"session\": \"<couchbase|ldap|spanner|sql>\", } Example: { \"default\": \"sql\", \"user\": \"spanner\", \"site\": \"ldap\", \"cache\": \"sql\", \"token\": \"couchbase\", \"session\": \"spanner\", }","title":"Hybrid mapping"},{"location":"admin/reference/kubernetes/docker-jans-config-api/","tags":["administration","reference","kubernetes","docker image"],"text":"Overview # Docker image packaging for config-api. Versions # See Packages for available versions. Environment Variables # The following environment variables are supported by the container: CN_CONFIG_ADAPTER : The config backend adapter, can be consul (default), kubernetes , google , or aws . CN_CONFIG_CONSUL_HOST : hostname or IP of Consul (default to localhost ). CN_CONFIG_CONSUL_PORT : port of Consul (default to 8500 ). CN_CONFIG_CONSUL_CONSISTENCY : Consul consistency mode (choose one of default , consistent , or stale ). Default to stale mode. CN_CONFIG_CONSUL_SCHEME : supported Consul scheme ( http or https ). CN_CONFIG_CONSUL_VERIFY : whether to verify cert or not (default to false ). CN_CONFIG_CONSUL_CACERT_FILE : path to Consul CA cert file (default to /etc/certs/consul_ca.crt ). This file will be used if it exists and CN_CONFIG_CONSUL_VERIFY set to true . CN_CONFIG_CONSUL_CERT_FILE : path to Consul cert file (default to /etc/certs/consul_client.crt ). CN_CONFIG_CONSUL_KEY_FILE : path to Consul key file (default to /etc/certs/consul_client.key ). CN_CONFIG_CONSUL_TOKEN_FILE : path to file contains ACL token (default to /etc/certs/consul_token ). CN_CONFIG_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_CONFIG_KUBERNETES_CONFIGMAP : Kubernetes configmaps name (default to jans ). CN_CONFIG_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_SECRET_ADAPTER : The secrets' adapter, can be vault , kubernetes , google , or aws . CN_SECRET_VAULT_SCHEME : supported Vault scheme ( http or https ). CN_SECRET_VAULT_HOST : hostname or IP of Vault (default to localhost ). CN_SECRET_VAULT_PORT : port of Vault (default to 8200 ). CN_SECRET_VAULT_VERIFY : whether to verify cert or not (default to false ). CN_SECRET_VAULT_ROLE_ID_FILE : path to file contains Vault AppRole role ID (default to /etc/certs/vault_role_id ). CN_SECRET_VAULT_SECRET_ID_FILE : path to file contains Vault AppRole secret ID (default to /etc/certs/vault_secret_id ). CN_SECRET_VAULT_CERT_FILE : path to Vault cert file (default to /etc/certs/vault_client.crt ). CN_SECRET_VAULT_KEY_FILE : path to Vault key file (default to /etc/certs/vault_client.key ). CN_SECRET_VAULT_CACERT_FILE : path to Vault CA cert file (default to /etc/certs/vault_ca.crt ). This file will be used if it exists and CN_SECRET_VAULT_VERIFY set to true . CN_SECRET_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_SECRET_KUBERNETES_SECRET : Kubernetes secrets name (default to jans ). CN_SECRET_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_WAIT_MAX_TIME : How long the startup \"health checks\" should run (default to 300 seconds). CN_WAIT_SLEEP_DURATION : Delay between startup \"health checks\" (default to 10 seconds). CN_MAX_RAM_PERCENTAGE : Value passed to Java option -XX:MaxRAMPercentage . CN_PERSISTENCE_TYPE : Persistence backend being used (one of ldap , couchbase , sql , spanner , or hybrid ; default to ldap ). CN_HYBRID_MAPPING : Specify data mapping for each persistence (default to \"{}\" ). Note this environment only takes effect when CN_PERSISTENCE_TYPE is set to hybrid . See hybrid mapping section for details. CN_LDAP_URL : Address and port of LDAP server (default to localhost:1636 ). CN_LDAP_USE_SSL : Whether to use SSL connection to LDAP server (default to true ). CN_COUCHBASE_URL : Address of Couchbase server (default to localhost ). CN_COUCHBASE_USER : Username of Couchbase server (default to admin ). CN_COUCHBASE_CERT_FILE : Couchbase root certificate location (default to /etc/certs/couchbase.crt ). CN_COUCHBASE_PASSWORD_FILE : Path to file contains Couchbase password (default to /etc/jans/conf/couchbase_password ). CN_COUCHBASE_CONN_TIMEOUT : Connect timeout used when a bucket is opened (default to 10000 milliseconds). CN_COUCHBASE_CONN_MAX_WAIT : Maximum time to wait before retrying connection (default to 20000 milliseconds). CN_COUCHBASE_SCAN_CONSISTENCY : Default scan consistency; one of not_bounded , request_plus , or statement_plus (default to not_bounded ). CN_COUCHBASE_BUCKET_PREFIX : Prefix for Couchbase buckets (default to jans ). CN_COUCHBASE_TRUSTSTORE_ENABLE : Enable truststore for encrypted Couchbase connection (default to true ). CN_COUCHBASE_KEEPALIVE_INTERVAL : Keep-alive interval for Couchbase connection (default to 30000 milliseconds). CN_COUCHBASE_KEEPALIVE_TIMEOUT : Keep-alive timeout for Couchbase connection (default to 2500 milliseconds). CN_JAVA_OPTIONS : Java options passed to entrypoint, i.e. -Xmx1024m (default to empty-string). CN_CONFIG_API_LOG_LEVEL : Log level for config api. Options include OFF , FATAL , ERROR , WARN , INFO , DEBUG , TRACE . and ALL . This defaults to INFO CN_AUTH_SERVER_URL : Base URL of Janssen Auth server, i.e. auth-server:8080 (default to empty string). GOOGLE_APPLICATION_CREDENTIALS : Optional JSON file (contains Google credentials) that can be injected into container for authentication. Refer to https://cloud.google.com/docs/authentication/provide-credentials-adc#how-to for supported credentials. GOOGLE_PROJECT_ID : ID of Google project. CN_GOOGLE_SECRET_VERSION_ID : Janssen secret version ID in Google Secret Manager. Defaults to latest , which is recommended. CN_GOOGLE_SECRET_NAME_PREFIX : Prefix for Janssen secret in Google Secret Manager. Defaults to jans . If left jans-secret secret will be created. CN_GOOGLE_SECRET_MANAGER_PASSPHRASE : Passphrase for Janssen secret in Google Secret Manager. This is recommended to be changed and defaults to secret . CN_GOOGLE_SPANNER_INSTANCE_ID : Google Spanner instance ID. CN_GOOGLE_SPANNER_DATABASE_ID : Google Spanner database ID. CN_CONFIG_API_APP_LOGGERS : Custom logging configuration in JSON-string format with hash type (see Configure app loggers section for details). CN_CONFIG_API_PLUGINS : Comma-separated plugin names that should be enabled (available plugins are admin-ui , scim , fido2 , user-mgt , jans-link ). Note that unknown plugin name will be ignored. CN_TOKEN_SERVER_CERT_FILE : Path to token server certificate (default to /etc/certs/token_server.crt ). CN_TOKEN_SERVER_BASE_HOSTNAME : Hostname of token server (default to empty string). CN_ADMIN_UI_PLUGIN_LOGGERS : Custom logging configuration for AdminUI plugin in JSON-string format with hash type (see Configure plugin loggers section for details). CN_PROMETHEUS_PORT : Port used by Prometheus JMX agent (default to empty string). To enable Prometheus JMX agent, set the value to a number. See Exposing metrics for details. CN_SQL_DB_HOST : Hostname of the SQL database (default to localhost ). CN_SQL_DB_PORT : Port of the SQL database (default to 3306 for MySQL). CN_SQL_DB_NAME : SQL database name (default to jans ). CN_SQL_DB_USER : User name to access the SQL database (default to jans ). CN_SQL_DB_DIALECT : Dialect name of the SQL ( mysql for MySQL or pgsql for PostgreSQL; default to mysql ). CN_SQL_DB_TIMEZONE : Timezone used by the SQL database (default to UTC ). CN_SQL_DB_SCHEMA : Schema name used by SQL database (default to empty-string; if using MySQL, the schema name will be resolved as the database name, whereas in PostgreSQL the schema name will be resolved as \"public\" ). CN_AWS_SECRETS_ENDPOINT_URL : The URL of AWS secretsmanager service (if omitted, will use the one in specified region). CN_AWS_SECRETS_PREFIX : The prefix name of the secrets (default to jans ). CN_AWS_SECRETS_REPLICA_FILE : The location of file contains replica regions definition (if any). This file is mostly used in primary region. Example of contents of the file: [{\"Region\": \"us-west-1\"}] . AWS_DEFAULT_REGION : The default AWS Region to use, for example, us-west-1 or us-west-2 . AWS_SHARED_CREDENTIALS_FILE : The location of the shared credentials file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_CONFIG_FILE : The location of the config file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_PROFILE : The default profile to use, if any. Configure app loggers # App loggers can be configured to define where the logs will be redirected and what is the level the logs should be displayed. Supported redirect target: STDOUT FILE Supported level: FATAL ERROR WARN INFO DEBUG TRACE The following key-value pairs are the defaults: { \"config_api_log_target\" : \"STDOUT\" , \"config_api_log_level\" : \"INFO\" , \"persistence_log_target\" : \"FILE\" , \"persistence_log_level\" : \"INFO\" , \"persistence_duration_log_target\" : \"FILE\" , \"persistence_duration_log_level\" : \"INFO\" , \"ldap_stats_log_target\" : \"FILE\" , \"ldap_stats_log_level\" : \"INFO\" , \"script_log_target\" : \"FILE\" , \"script_log_level\" : \"INFO\" , \"audit_log_target\" : \"FILE\" , \"audit_log_level\" : \"INFO\" } To enable prefix on STDOUT logging, set the enable_stdout_log_prefix key. Example: {\"config_api_log_target\":\"STDOUT\",\"script_log_target\":\"STDOUT\",\"enable_stdout_log_prefix\":true} Configure plugin loggers # Plugin loggers can be configured to define where the logs will be redirected and what is the level the logs should be displayed. Supported redirect target: STDOUT FILE Supported level: FATAL ERROR WARN INFO DEBUG TRACE The following key-value pairs are the defaults: { \"admin_ui_log_target\" : \"FILE\" , \"admin_ui_log_level\" : \"INFO\" , \"admin_ui_audit_log_target\" : \"FILE\" , \"admin_ui_audit_log_level\" : \"INFO\" } To enable prefix on STDOUT logging, set the enable_stdout_log_prefix key. Example: {\"admin_ui_log_target\":\"STDOUT\",\"enable_stdout_log_prefix\":true} Hybrid mapping # As per v1.0.1, hybrid persistence supports all available persistence types. To configure hybrid persistence and its data mapping, follow steps below: Set CN_PERSISTENCE_TYPE environment variable to hybrid Set CN_HYBRID_MAPPING with the following format: { \"default\": \"<couchbase|ldap|spanner|sql>\", \"user\": \"<couchbase|ldap|spanner|sql>\", \"site\": \"<couchbase|ldap|spanner|sql>\", \"cache\": \"<couchbase|ldap|spanner|sql>\", \"token\": \"<couchbase|ldap|spanner|sql>\", \"session\": \"<couchbase|ldap|spanner|sql>\", } Example: { \"default\": \"sql\", \"user\": \"spanner\", \"site\": \"ldap\", \"cache\": \"sql\", \"token\": \"couchbase\", \"session\": \"spanner\", } Exposing metrics # As per v1.0.1, certain metrics can be exposed via Prometheus JMX exporter. To expose the metrics, set the CN_PROMETHEUS_PORT environment variable, i.e. CN_PROMETHEUS_PORT=9093 . Afterwards, metrics can be scraped by Prometheus or accessed manually by making request to /metrics URL, i.e. http://container:9093/metrics . Note that Prometheus JMX exporter uses pre-defined config file (see conf/prometheus-config.yaml ). To customize the config, mount custom config file to /opt/prometheus/prometheus-config.yaml inside the container.","title":"Config API"},{"location":"admin/reference/kubernetes/docker-jans-config-api/#overview","text":"Docker image packaging for config-api.","title":"Overview"},{"location":"admin/reference/kubernetes/docker-jans-config-api/#versions","text":"See Packages for available versions.","title":"Versions"},{"location":"admin/reference/kubernetes/docker-jans-config-api/#environment-variables","text":"The following environment variables are supported by the container: CN_CONFIG_ADAPTER : The config backend adapter, can be consul (default), kubernetes , google , or aws . CN_CONFIG_CONSUL_HOST : hostname or IP of Consul (default to localhost ). CN_CONFIG_CONSUL_PORT : port of Consul (default to 8500 ). CN_CONFIG_CONSUL_CONSISTENCY : Consul consistency mode (choose one of default , consistent , or stale ). Default to stale mode. CN_CONFIG_CONSUL_SCHEME : supported Consul scheme ( http or https ). CN_CONFIG_CONSUL_VERIFY : whether to verify cert or not (default to false ). CN_CONFIG_CONSUL_CACERT_FILE : path to Consul CA cert file (default to /etc/certs/consul_ca.crt ). This file will be used if it exists and CN_CONFIG_CONSUL_VERIFY set to true . CN_CONFIG_CONSUL_CERT_FILE : path to Consul cert file (default to /etc/certs/consul_client.crt ). CN_CONFIG_CONSUL_KEY_FILE : path to Consul key file (default to /etc/certs/consul_client.key ). CN_CONFIG_CONSUL_TOKEN_FILE : path to file contains ACL token (default to /etc/certs/consul_token ). CN_CONFIG_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_CONFIG_KUBERNETES_CONFIGMAP : Kubernetes configmaps name (default to jans ). CN_CONFIG_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_SECRET_ADAPTER : The secrets' adapter, can be vault , kubernetes , google , or aws . CN_SECRET_VAULT_SCHEME : supported Vault scheme ( http or https ). CN_SECRET_VAULT_HOST : hostname or IP of Vault (default to localhost ). CN_SECRET_VAULT_PORT : port of Vault (default to 8200 ). CN_SECRET_VAULT_VERIFY : whether to verify cert or not (default to false ). CN_SECRET_VAULT_ROLE_ID_FILE : path to file contains Vault AppRole role ID (default to /etc/certs/vault_role_id ). CN_SECRET_VAULT_SECRET_ID_FILE : path to file contains Vault AppRole secret ID (default to /etc/certs/vault_secret_id ). CN_SECRET_VAULT_CERT_FILE : path to Vault cert file (default to /etc/certs/vault_client.crt ). CN_SECRET_VAULT_KEY_FILE : path to Vault key file (default to /etc/certs/vault_client.key ). CN_SECRET_VAULT_CACERT_FILE : path to Vault CA cert file (default to /etc/certs/vault_ca.crt ). This file will be used if it exists and CN_SECRET_VAULT_VERIFY set to true . CN_SECRET_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_SECRET_KUBERNETES_SECRET : Kubernetes secrets name (default to jans ). CN_SECRET_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_WAIT_MAX_TIME : How long the startup \"health checks\" should run (default to 300 seconds). CN_WAIT_SLEEP_DURATION : Delay between startup \"health checks\" (default to 10 seconds). CN_MAX_RAM_PERCENTAGE : Value passed to Java option -XX:MaxRAMPercentage . CN_PERSISTENCE_TYPE : Persistence backend being used (one of ldap , couchbase , sql , spanner , or hybrid ; default to ldap ). CN_HYBRID_MAPPING : Specify data mapping for each persistence (default to \"{}\" ). Note this environment only takes effect when CN_PERSISTENCE_TYPE is set to hybrid . See hybrid mapping section for details. CN_LDAP_URL : Address and port of LDAP server (default to localhost:1636 ). CN_LDAP_USE_SSL : Whether to use SSL connection to LDAP server (default to true ). CN_COUCHBASE_URL : Address of Couchbase server (default to localhost ). CN_COUCHBASE_USER : Username of Couchbase server (default to admin ). CN_COUCHBASE_CERT_FILE : Couchbase root certificate location (default to /etc/certs/couchbase.crt ). CN_COUCHBASE_PASSWORD_FILE : Path to file contains Couchbase password (default to /etc/jans/conf/couchbase_password ). CN_COUCHBASE_CONN_TIMEOUT : Connect timeout used when a bucket is opened (default to 10000 milliseconds). CN_COUCHBASE_CONN_MAX_WAIT : Maximum time to wait before retrying connection (default to 20000 milliseconds). CN_COUCHBASE_SCAN_CONSISTENCY : Default scan consistency; one of not_bounded , request_plus , or statement_plus (default to not_bounded ). CN_COUCHBASE_BUCKET_PREFIX : Prefix for Couchbase buckets (default to jans ). CN_COUCHBASE_TRUSTSTORE_ENABLE : Enable truststore for encrypted Couchbase connection (default to true ). CN_COUCHBASE_KEEPALIVE_INTERVAL : Keep-alive interval for Couchbase connection (default to 30000 milliseconds). CN_COUCHBASE_KEEPALIVE_TIMEOUT : Keep-alive timeout for Couchbase connection (default to 2500 milliseconds). CN_JAVA_OPTIONS : Java options passed to entrypoint, i.e. -Xmx1024m (default to empty-string). CN_CONFIG_API_LOG_LEVEL : Log level for config api. Options include OFF , FATAL , ERROR , WARN , INFO , DEBUG , TRACE . and ALL . This defaults to INFO CN_AUTH_SERVER_URL : Base URL of Janssen Auth server, i.e. auth-server:8080 (default to empty string). GOOGLE_APPLICATION_CREDENTIALS : Optional JSON file (contains Google credentials) that can be injected into container for authentication. Refer to https://cloud.google.com/docs/authentication/provide-credentials-adc#how-to for supported credentials. GOOGLE_PROJECT_ID : ID of Google project. CN_GOOGLE_SECRET_VERSION_ID : Janssen secret version ID in Google Secret Manager. Defaults to latest , which is recommended. CN_GOOGLE_SECRET_NAME_PREFIX : Prefix for Janssen secret in Google Secret Manager. Defaults to jans . If left jans-secret secret will be created. CN_GOOGLE_SECRET_MANAGER_PASSPHRASE : Passphrase for Janssen secret in Google Secret Manager. This is recommended to be changed and defaults to secret . CN_GOOGLE_SPANNER_INSTANCE_ID : Google Spanner instance ID. CN_GOOGLE_SPANNER_DATABASE_ID : Google Spanner database ID. CN_CONFIG_API_APP_LOGGERS : Custom logging configuration in JSON-string format with hash type (see Configure app loggers section for details). CN_CONFIG_API_PLUGINS : Comma-separated plugin names that should be enabled (available plugins are admin-ui , scim , fido2 , user-mgt , jans-link ). Note that unknown plugin name will be ignored. CN_TOKEN_SERVER_CERT_FILE : Path to token server certificate (default to /etc/certs/token_server.crt ). CN_TOKEN_SERVER_BASE_HOSTNAME : Hostname of token server (default to empty string). CN_ADMIN_UI_PLUGIN_LOGGERS : Custom logging configuration for AdminUI plugin in JSON-string format with hash type (see Configure plugin loggers section for details). CN_PROMETHEUS_PORT : Port used by Prometheus JMX agent (default to empty string). To enable Prometheus JMX agent, set the value to a number. See Exposing metrics for details. CN_SQL_DB_HOST : Hostname of the SQL database (default to localhost ). CN_SQL_DB_PORT : Port of the SQL database (default to 3306 for MySQL). CN_SQL_DB_NAME : SQL database name (default to jans ). CN_SQL_DB_USER : User name to access the SQL database (default to jans ). CN_SQL_DB_DIALECT : Dialect name of the SQL ( mysql for MySQL or pgsql for PostgreSQL; default to mysql ). CN_SQL_DB_TIMEZONE : Timezone used by the SQL database (default to UTC ). CN_SQL_DB_SCHEMA : Schema name used by SQL database (default to empty-string; if using MySQL, the schema name will be resolved as the database name, whereas in PostgreSQL the schema name will be resolved as \"public\" ). CN_AWS_SECRETS_ENDPOINT_URL : The URL of AWS secretsmanager service (if omitted, will use the one in specified region). CN_AWS_SECRETS_PREFIX : The prefix name of the secrets (default to jans ). CN_AWS_SECRETS_REPLICA_FILE : The location of file contains replica regions definition (if any). This file is mostly used in primary region. Example of contents of the file: [{\"Region\": \"us-west-1\"}] . AWS_DEFAULT_REGION : The default AWS Region to use, for example, us-west-1 or us-west-2 . AWS_SHARED_CREDENTIALS_FILE : The location of the shared credentials file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_CONFIG_FILE : The location of the config file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_PROFILE : The default profile to use, if any.","title":"Environment Variables"},{"location":"admin/reference/kubernetes/docker-jans-config-api/#configure-app-loggers","text":"App loggers can be configured to define where the logs will be redirected and what is the level the logs should be displayed. Supported redirect target: STDOUT FILE Supported level: FATAL ERROR WARN INFO DEBUG TRACE The following key-value pairs are the defaults: { \"config_api_log_target\" : \"STDOUT\" , \"config_api_log_level\" : \"INFO\" , \"persistence_log_target\" : \"FILE\" , \"persistence_log_level\" : \"INFO\" , \"persistence_duration_log_target\" : \"FILE\" , \"persistence_duration_log_level\" : \"INFO\" , \"ldap_stats_log_target\" : \"FILE\" , \"ldap_stats_log_level\" : \"INFO\" , \"script_log_target\" : \"FILE\" , \"script_log_level\" : \"INFO\" , \"audit_log_target\" : \"FILE\" , \"audit_log_level\" : \"INFO\" } To enable prefix on STDOUT logging, set the enable_stdout_log_prefix key. Example: {\"config_api_log_target\":\"STDOUT\",\"script_log_target\":\"STDOUT\",\"enable_stdout_log_prefix\":true}","title":"Configure app loggers"},{"location":"admin/reference/kubernetes/docker-jans-config-api/#configure-plugin-loggers","text":"Plugin loggers can be configured to define where the logs will be redirected and what is the level the logs should be displayed. Supported redirect target: STDOUT FILE Supported level: FATAL ERROR WARN INFO DEBUG TRACE The following key-value pairs are the defaults: { \"admin_ui_log_target\" : \"FILE\" , \"admin_ui_log_level\" : \"INFO\" , \"admin_ui_audit_log_target\" : \"FILE\" , \"admin_ui_audit_log_level\" : \"INFO\" } To enable prefix on STDOUT logging, set the enable_stdout_log_prefix key. Example: {\"admin_ui_log_target\":\"STDOUT\",\"enable_stdout_log_prefix\":true}","title":"Configure plugin loggers"},{"location":"admin/reference/kubernetes/docker-jans-config-api/#hybrid-mapping","text":"As per v1.0.1, hybrid persistence supports all available persistence types. To configure hybrid persistence and its data mapping, follow steps below: Set CN_PERSISTENCE_TYPE environment variable to hybrid Set CN_HYBRID_MAPPING with the following format: { \"default\": \"<couchbase|ldap|spanner|sql>\", \"user\": \"<couchbase|ldap|spanner|sql>\", \"site\": \"<couchbase|ldap|spanner|sql>\", \"cache\": \"<couchbase|ldap|spanner|sql>\", \"token\": \"<couchbase|ldap|spanner|sql>\", \"session\": \"<couchbase|ldap|spanner|sql>\", } Example: { \"default\": \"sql\", \"user\": \"spanner\", \"site\": \"ldap\", \"cache\": \"sql\", \"token\": \"couchbase\", \"session\": \"spanner\", }","title":"Hybrid mapping"},{"location":"admin/reference/kubernetes/docker-jans-config-api/#exposing-metrics","text":"As per v1.0.1, certain metrics can be exposed via Prometheus JMX exporter. To expose the metrics, set the CN_PROMETHEUS_PORT environment variable, i.e. CN_PROMETHEUS_PORT=9093 . Afterwards, metrics can be scraped by Prometheus or accessed manually by making request to /metrics URL, i.e. http://container:9093/metrics . Note that Prometheus JMX exporter uses pre-defined config file (see conf/prometheus-config.yaml ). To customize the config, mount custom config file to /opt/prometheus/prometheus-config.yaml inside the container.","title":"Exposing metrics"},{"location":"admin/reference/kubernetes/docker-jans-configurator/","tags":["administration","reference","kubernetes","docker image"],"text":"Overview # Configuration manager is a special container used to load (generate/restore) and dump (backup) the configuration and secrets. Versions # See Packages for available versions. Environment Variables # The following environment variables are supported by the container: CN_CONFIG_ADAPTER : The config backend adapter, can be consul (default), kubernetes , google , or aws . CN_CONFIG_CONSUL_HOST : hostname or IP of Consul (default to localhost ). CN_CONFIG_CONSUL_PORT : port of Consul (default to 8500 ). CN_CONFIG_CONSUL_CONSISTENCY : Consul consistency mode (choose one of default , consistent , or stale ). Default to stale mode. CN_CONFIG_CONSUL_SCHEME : supported Consul scheme ( http or https ). CN_CONFIG_CONSUL_VERIFY : whether to verify cert or not (default to false ). CN_CONFIG_CONSUL_CACERT_FILE : path to Consul CA cert file (default to /etc/certs/consul_ca.crt ). This file will be used if it exists and CN_CONFIG_CONSUL_VERIFY set to true . CN_CONFIG_CONSUL_CERT_FILE : path to Consul cert file (default to /etc/certs/consul_client.crt ). CN_CONFIG_CONSUL_KEY_FILE : path to Consul key file (default to /etc/certs/consul_client.key ). CN_CONFIG_CONSUL_TOKEN_FILE : path to file contains ACL token (default to /etc/certs/consul_token ). CN_CONFIG_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_CONFIG_KUBERNETES_CONFIGMAP : Kubernetes configmaps name (default to jans ). CN_CONFIG_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_SECRET_ADAPTER : The secrets' adapter, can be vault (default), kubernetes , google , or aws . CN_SECRET_VAULT_SCHEME : supported Vault scheme ( http or https ). CN_SECRET_VAULT_HOST : hostname or IP of Vault (default to localhost ). CN_SECRET_VAULT_PORT : port of Vault (default to 8200 ). CN_SECRET_VAULT_VERIFY : whether to verify cert or not (default to false ). CN_SECRET_VAULT_ROLE_ID_FILE : path to file contains Vault AppRole role ID (default to /etc/certs/vault_role_id ). CN_SECRET_VAULT_SECRET_ID_FILE : path to file contains Vault AppRole secret ID (default to /etc/certs/vault_secret_id ). CN_SECRET_VAULT_CERT_FILE : path to Vault cert file (default to /etc/certs/vault_client.crt ). CN_SECRET_VAULT_KEY_FILE : path to Vault key file (default to /etc/certs/vault_client.key ). CN_SECRET_VAULT_CACERT_FILE : path to Vault CA cert file (default to /etc/certs/vault_ca.crt ). This file will be used if it exists and CN_SECRET_VAULT_VERIFY set to true . CN_SECRET_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_SECRET_KUBERNETES_SECRET : Kubernetes secrets name (default to jans ). CN_SECRET_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_WAIT_MAX_TIME : How long the startup \"health checks\" should run (default to 300 seconds). CN_WAIT_SLEEP_DURATION : Delay between startup \"health checks\" (default to 10 seconds). GOOGLE_APPLICATION_CREDENTIALS : Optional JSON file (contains Google credentials) that can be injected into container for authentication. Refer to https://cloud.google.com/docs/authentication/provide-credentials-adc#how-to for supported credentials. GOOGLE_PROJECT_ID : ID of Google project. CN_GOOGLE_SECRET_VERSION_ID : Janssen secret version ID in Google Secret Manager. Defaults to latest , which is recommended. CN_GOOGLE_SECRET_NAME_PREFIX : Prefix for Janssen secret in Google Secret Manager. Defaults to jans . If left jans-secret secret will be created. CN_GOOGLE_SECRET_MANAGER_PASSPHRASE : Passphrase for Janssen secret in Google Secret Manager. This is recommended to be changed and defaults to secret . CN_CONFIGURATION_SKIP_INITIALIZED : skip initialization if backend already initialized (default to false ). CN_AWS_SECRETS_ENDPOINT_URL : The URL of AWS secretsmanager service (if omitted, will use the one in specified region). CN_AWS_SECRETS_PREFIX : The prefix name of the secrets (default to jans ). CN_AWS_SECRETS_REPLICA_FILE : The location of file contains replica regions definition (if any). This file is mostly used in primary region. Example of contents of the file: [{\"Region\": \"us-west-1\"}] . AWS_DEFAULT_REGION : The default AWS Region to use, for example, us-west-1 or us-west-2 . AWS_SHARED_CREDENTIALS_FILE : The location of the shared credentials file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_CONFIG_FILE : The location of the config file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_PROFILE : The default profile to use, if any. Commands # The following commands are supported by the container: load dump load # The load command can be used either to generate or restore config and secret for the cluster. For fresh installation, generate the initial configuration and secret by creating /path/to/host/volume/generate.json similar to example below: { \"hostname\" : \"demoexample.jans.io\" , \"country_code\" : \"US\" , \"state\" : \"TX\" , \"city\" : \"Austin\" , \"admin_pw\" : \"S3cr3t+pass\" , \"ldap_pw\" : \"S3cr3t+pass\" , \"email\" : \"s@jans.io\" , \"org_name\" : \"Gluu Inc.\" } NOTE : generate.json has optional attributes as seen below. auth_sig_keys : space-separated key algorithm for signing (default to RS256 RS384 RS512 ES256 ES384 ES512 PS256 PS384 PS512 ) auth_enc_keys : space-separated key algorithm for encryption (default to RSA1_5 RSA-OAEP ) optional_scopes : list of scopes that will be used (supported scopes are ldap , scim , fido2 , couchbase , redis , sql , casa ; default to empty list) ldap_pw : user's password to access LDAP database (only used if optional_scopes list contains ldap scope) sql_pw : user's password to access SQL database (only used if optional_scopes list contains sql scope) couchbase_pw : user's password to access Couchbase database (only used if optional_scopes list contains couchbase scope) couchbase_superuser_pw : superusers password to access Couchbase database (only used if optional_scopes list contains couchbase scope) salt : user-defined salt (24 characters length); if omitted, salt will be generated automatically Example of generating salt value: # using shell script cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 24 | head -n 1 # output: NFAG5g4R0NSkAZXHL8t2DScL # using python oneliner python -c 'import random, string; print(\"\".join(random.choices(string.ascii_letters + string.digits, k=24)))' # ouput: HsPzqiPkRzNySWlOVui8Ilmw To generate initial config and secrets: Create config map config-generate-params to store the contents of generate.json kubectl create cm config-generate-params --from-file = generate.json Mount the configmap into container and apply the yaml: apiVersion : batch/v1 kind : Job metadata : name : configurator-load-job spec : template : spec : restartPolicy : Never volumes : - name : config-generate-params configMap : name : config-generate-params containers : - name : configurator-load image : ghcr.io/janssenproject/jans/configurator:1.0.16_dev volumeMounts : - mountPath : /app/db/generate.json name : config-generate-params subPath : generate.json envFrom : - configMapRef : name : config-cm args : [ \"load\" ] To restore configuration and secrets from a backup of /path/to/host/volume/config.json and /path/to/host/volume/secret.json : mount the directory as /app/db inside the container: Create config map config-params and secret-params : kubectl create cm config-params --from-file = config.json kubectl create cm secret-params --from-file = secret.json Mount the configmap into container and apply the yaml: apiVersion : batch/v1 kind : Job metadata : name : configurator-load-job spec : template : spec : restartPolicy : Never volumes : - name : config-params configMap : name : config-params - name : secret-params configMap : name : secret-params containers : - name : configurator-load image : ghcr.io/janssenproject/jans/configurator:1.0.16_dev volumeMounts : - mountPath : /app/db/config.json name : config-params subPath : config.json - mountPath : /app/db/secret.json name : secret-params subPath : secret.json envFrom : - configMapRef : name : config-cm args : [ \"load\" ] dump # The dump command will dump all configuration and secrets from the backends saved into the /app/db/config.json and /app/db/secret.json files. apiVersion : batch/v1 kind : Job metadata : name : configurator-dump-job spec : template : spec : restartPolicy : Never containers : - name : configurator-dump-job image : ghcr.io/janssenproject/jans/configurator:1.0.16_dev command : - /bin/sh - -c - | /app/scripts/entrypoint.sh dump sleep 300 envFrom : - configMapRef : name : config-cm Copy over the files to host kubectl cp config-init-load-job:/app/db .","title":"Configurator"},{"location":"admin/reference/kubernetes/docker-jans-configurator/#overview","text":"Configuration manager is a special container used to load (generate/restore) and dump (backup) the configuration and secrets.","title":"Overview"},{"location":"admin/reference/kubernetes/docker-jans-configurator/#versions","text":"See Packages for available versions.","title":"Versions"},{"location":"admin/reference/kubernetes/docker-jans-configurator/#environment-variables","text":"The following environment variables are supported by the container: CN_CONFIG_ADAPTER : The config backend adapter, can be consul (default), kubernetes , google , or aws . CN_CONFIG_CONSUL_HOST : hostname or IP of Consul (default to localhost ). CN_CONFIG_CONSUL_PORT : port of Consul (default to 8500 ). CN_CONFIG_CONSUL_CONSISTENCY : Consul consistency mode (choose one of default , consistent , or stale ). Default to stale mode. CN_CONFIG_CONSUL_SCHEME : supported Consul scheme ( http or https ). CN_CONFIG_CONSUL_VERIFY : whether to verify cert or not (default to false ). CN_CONFIG_CONSUL_CACERT_FILE : path to Consul CA cert file (default to /etc/certs/consul_ca.crt ). This file will be used if it exists and CN_CONFIG_CONSUL_VERIFY set to true . CN_CONFIG_CONSUL_CERT_FILE : path to Consul cert file (default to /etc/certs/consul_client.crt ). CN_CONFIG_CONSUL_KEY_FILE : path to Consul key file (default to /etc/certs/consul_client.key ). CN_CONFIG_CONSUL_TOKEN_FILE : path to file contains ACL token (default to /etc/certs/consul_token ). CN_CONFIG_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_CONFIG_KUBERNETES_CONFIGMAP : Kubernetes configmaps name (default to jans ). CN_CONFIG_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_SECRET_ADAPTER : The secrets' adapter, can be vault (default), kubernetes , google , or aws . CN_SECRET_VAULT_SCHEME : supported Vault scheme ( http or https ). CN_SECRET_VAULT_HOST : hostname or IP of Vault (default to localhost ). CN_SECRET_VAULT_PORT : port of Vault (default to 8200 ). CN_SECRET_VAULT_VERIFY : whether to verify cert or not (default to false ). CN_SECRET_VAULT_ROLE_ID_FILE : path to file contains Vault AppRole role ID (default to /etc/certs/vault_role_id ). CN_SECRET_VAULT_SECRET_ID_FILE : path to file contains Vault AppRole secret ID (default to /etc/certs/vault_secret_id ). CN_SECRET_VAULT_CERT_FILE : path to Vault cert file (default to /etc/certs/vault_client.crt ). CN_SECRET_VAULT_KEY_FILE : path to Vault key file (default to /etc/certs/vault_client.key ). CN_SECRET_VAULT_CACERT_FILE : path to Vault CA cert file (default to /etc/certs/vault_ca.crt ). This file will be used if it exists and CN_SECRET_VAULT_VERIFY set to true . CN_SECRET_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_SECRET_KUBERNETES_SECRET : Kubernetes secrets name (default to jans ). CN_SECRET_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_WAIT_MAX_TIME : How long the startup \"health checks\" should run (default to 300 seconds). CN_WAIT_SLEEP_DURATION : Delay between startup \"health checks\" (default to 10 seconds). GOOGLE_APPLICATION_CREDENTIALS : Optional JSON file (contains Google credentials) that can be injected into container for authentication. Refer to https://cloud.google.com/docs/authentication/provide-credentials-adc#how-to for supported credentials. GOOGLE_PROJECT_ID : ID of Google project. CN_GOOGLE_SECRET_VERSION_ID : Janssen secret version ID in Google Secret Manager. Defaults to latest , which is recommended. CN_GOOGLE_SECRET_NAME_PREFIX : Prefix for Janssen secret in Google Secret Manager. Defaults to jans . If left jans-secret secret will be created. CN_GOOGLE_SECRET_MANAGER_PASSPHRASE : Passphrase for Janssen secret in Google Secret Manager. This is recommended to be changed and defaults to secret . CN_CONFIGURATION_SKIP_INITIALIZED : skip initialization if backend already initialized (default to false ). CN_AWS_SECRETS_ENDPOINT_URL : The URL of AWS secretsmanager service (if omitted, will use the one in specified region). CN_AWS_SECRETS_PREFIX : The prefix name of the secrets (default to jans ). CN_AWS_SECRETS_REPLICA_FILE : The location of file contains replica regions definition (if any). This file is mostly used in primary region. Example of contents of the file: [{\"Region\": \"us-west-1\"}] . AWS_DEFAULT_REGION : The default AWS Region to use, for example, us-west-1 or us-west-2 . AWS_SHARED_CREDENTIALS_FILE : The location of the shared credentials file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_CONFIG_FILE : The location of the config file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_PROFILE : The default profile to use, if any.","title":"Environment Variables"},{"location":"admin/reference/kubernetes/docker-jans-configurator/#commands","text":"The following commands are supported by the container: load dump","title":"Commands"},{"location":"admin/reference/kubernetes/docker-jans-configurator/#load","text":"The load command can be used either to generate or restore config and secret for the cluster. For fresh installation, generate the initial configuration and secret by creating /path/to/host/volume/generate.json similar to example below: { \"hostname\" : \"demoexample.jans.io\" , \"country_code\" : \"US\" , \"state\" : \"TX\" , \"city\" : \"Austin\" , \"admin_pw\" : \"S3cr3t+pass\" , \"ldap_pw\" : \"S3cr3t+pass\" , \"email\" : \"s@jans.io\" , \"org_name\" : \"Gluu Inc.\" } NOTE : generate.json has optional attributes as seen below. auth_sig_keys : space-separated key algorithm for signing (default to RS256 RS384 RS512 ES256 ES384 ES512 PS256 PS384 PS512 ) auth_enc_keys : space-separated key algorithm for encryption (default to RSA1_5 RSA-OAEP ) optional_scopes : list of scopes that will be used (supported scopes are ldap , scim , fido2 , couchbase , redis , sql , casa ; default to empty list) ldap_pw : user's password to access LDAP database (only used if optional_scopes list contains ldap scope) sql_pw : user's password to access SQL database (only used if optional_scopes list contains sql scope) couchbase_pw : user's password to access Couchbase database (only used if optional_scopes list contains couchbase scope) couchbase_superuser_pw : superusers password to access Couchbase database (only used if optional_scopes list contains couchbase scope) salt : user-defined salt (24 characters length); if omitted, salt will be generated automatically Example of generating salt value: # using shell script cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 24 | head -n 1 # output: NFAG5g4R0NSkAZXHL8t2DScL # using python oneliner python -c 'import random, string; print(\"\".join(random.choices(string.ascii_letters + string.digits, k=24)))' # ouput: HsPzqiPkRzNySWlOVui8Ilmw To generate initial config and secrets: Create config map config-generate-params to store the contents of generate.json kubectl create cm config-generate-params --from-file = generate.json Mount the configmap into container and apply the yaml: apiVersion : batch/v1 kind : Job metadata : name : configurator-load-job spec : template : spec : restartPolicy : Never volumes : - name : config-generate-params configMap : name : config-generate-params containers : - name : configurator-load image : ghcr.io/janssenproject/jans/configurator:1.0.16_dev volumeMounts : - mountPath : /app/db/generate.json name : config-generate-params subPath : generate.json envFrom : - configMapRef : name : config-cm args : [ \"load\" ] To restore configuration and secrets from a backup of /path/to/host/volume/config.json and /path/to/host/volume/secret.json : mount the directory as /app/db inside the container: Create config map config-params and secret-params : kubectl create cm config-params --from-file = config.json kubectl create cm secret-params --from-file = secret.json Mount the configmap into container and apply the yaml: apiVersion : batch/v1 kind : Job metadata : name : configurator-load-job spec : template : spec : restartPolicy : Never volumes : - name : config-params configMap : name : config-params - name : secret-params configMap : name : secret-params containers : - name : configurator-load image : ghcr.io/janssenproject/jans/configurator:1.0.16_dev volumeMounts : - mountPath : /app/db/config.json name : config-params subPath : config.json - mountPath : /app/db/secret.json name : secret-params subPath : secret.json envFrom : - configMapRef : name : config-cm args : [ \"load\" ]","title":"load"},{"location":"admin/reference/kubernetes/docker-jans-configurator/#dump","text":"The dump command will dump all configuration and secrets from the backends saved into the /app/db/config.json and /app/db/secret.json files. apiVersion : batch/v1 kind : Job metadata : name : configurator-dump-job spec : template : spec : restartPolicy : Never containers : - name : configurator-dump-job image : ghcr.io/janssenproject/jans/configurator:1.0.16_dev command : - /bin/sh - -c - | /app/scripts/entrypoint.sh dump sleep 300 envFrom : - configMapRef : name : config-cm Copy over the files to host kubectl cp config-init-load-job:/app/db .","title":"dump"},{"location":"admin/reference/kubernetes/docker-jans-fido2/","tags":["administration","reference","kubernetes","docker image"],"text":"Overview # Docker image packaging for Fido2. Versions # See Packages for available versions. Environment Variables # The following environment variables are supported by the container: CN_CONFIG_ADAPTER : The config backend adapter, can be consul (default) or kubernetes . CN_CONFIG_CONSUL_HOST : hostname or IP of Consul (default to localhost ). CN_CONFIG_CONSUL_PORT : port of Consul (default to 8500 ). CN_CONFIG_CONSUL_CONSISTENCY : Consul consistency mode (choose one of default , consistent , or stale ). Default to stale mode. CN_CONFIG_CONSUL_SCHEME : supported Consul scheme ( http or https ). CN_CONFIG_CONSUL_VERIFY : whether to verify cert or not (default to false ). CN_CONFIG_CONSUL_CACERT_FILE : path to Consul CA cert file (default to /etc/certs/consul_ca.crt ). This file will be used if it exists and CN_CONFIG_CONSUL_VERIFY set to true . CN_CONFIG_CONSUL_CERT_FILE : path to Consul cert file (default to /etc/certs/consul_client.crt ). CN_CONFIG_CONSUL_KEY_FILE : path to Consul key file (default to /etc/certs/consul_client.key ). CN_CONFIG_CONSUL_TOKEN_FILE : path to file contains ACL token (default to /etc/certs/consul_token ). CN_CONFIG_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_CONFIG_KUBERNETES_CONFIGMAP : Kubernetes configmaps name (default to jans ). CN_CONFIG_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_SECRET_ADAPTER : The secrets' adapter, can be vault (default), kubernetes , or google . CN_SECRET_VAULT_SCHEME : supported Vault scheme ( http or https ). CN_SECRET_VAULT_HOST : hostname or IP of Vault (default to localhost ). CN_SECRET_VAULT_PORT : port of Vault (default to 8200 ). CN_SECRET_VAULT_VERIFY : whether to verify cert or not (default to false ). CN_SECRET_VAULT_ROLE_ID_FILE : path to file contains Vault AppRole role ID (default to /etc/certs/vault_role_id ). CN_SECRET_VAULT_SECRET_ID_FILE : path to file contains Vault AppRole secret ID (default to /etc/certs/vault_secret_id ). CN_SECRET_VAULT_CERT_FILE : path to Vault cert file (default to /etc/certs/vault_client.crt ). CN_SECRET_VAULT_KEY_FILE : path to Vault key file (default to /etc/certs/vault_client.key ). CN_SECRET_VAULT_CACERT_FILE : path to Vault CA cert file (default to /etc/certs/vault_ca.crt ). This file will be used if it exists and CN_SECRET_VAULT_VERIFY set to true . CN_SECRET_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_SECRET_KUBERNETES_SECRET : Kubernetes secrets name (default to jans ). CN_SECRET_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_WAIT_MAX_TIME : How long the startup \"health checks\" should run (default to 300 seconds). CN_WAIT_SLEEP_DURATION : Delay between startup \"health checks\" (default to 10 seconds). CN_MAX_RAM_PERCENTAGE : Value passed to Java option -XX:MaxRAMPercentage . CN_PERSISTENCE_TYPE : Persistence backend being used (one of ldap , couchbase , or hybrid ; default to ldap ). CN_HYBRID_MAPPING : Specify data mapping for each persistence (default to \"{}\" ). Note this environment only takes effect when CN_PERSISTENCE_TYPE is set to hybrid . See hybrid mapping section for details. CN_LDAP_URL : Address and port of LDAP server (default to localhost:1636 ). CN_LDAP_USE_SSL : Whether to use SSL connection to LDAP server (default to true ). CN_COUCHBASE_URL : Address of Couchbase server (default to localhost ). CN_COUCHBASE_USER : Username of Couchbase server (default to admin ). CN_COUCHBASE_CERT_FILE : Couchbase root certificate location (default to /etc/certs/couchbase.crt ). CN_COUCHBASE_PASSWORD_FILE : Path to file contains Couchbase password (default to /etc/jans/conf/couchbase_password ). CN_COUCHBASE_CONN_TIMEOUT : Connect timeout used when a bucket is opened (default to 10000 milliseconds). CN_COUCHBASE_CONN_MAX_WAIT : Maximum time to wait before retrying connection (default to 20000 milliseconds). CN_COUCHBASE_SCAN_CONSISTENCY : Default scan consistency; one of not_bounded , request_plus , or statement_plus (default to not_bounded ). CN_COUCHBASE_BUCKET_PREFIX : Prefix for Couchbase buckets (default to jans ). CN_COUCHBASE_TRUSTSTORE_ENABLE : Enable truststore for encrypted Couchbase connection (default to true ). CN_COUCHBASE_KEEPALIVE_INTERVAL : Keep-alive interval for Couchbase connection (default to 30000 milliseconds). CN_COUCHBASE_KEEPALIVE_TIMEOUT : Keep-alive timeout for Couchbase connection (default to 2500 milliseconds). CN_JAVA_OPTIONS : Java options passed to entrypoint, i.e. -Xmx1024m (default to empty-string). GOOGLE_APPLICATION_CREDENTIALS : Optional JSON file (contains Google credentials) that can be injected into container for authentication. Refer to https://cloud.google.com/docs/authentication/provide-credentials-adc#how-to for supported credentials. GOOGLE_PROJECT_ID : ID of Google project. CN_GOOGLE_SECRET_VERSION_ID : Janssen secret version ID in Google Secret Manager. Defaults to latest , which is recommended. CN_GOOGLE_SECRET_NAME_PREFIX : Prefix for Janssen secret in Google Secret Manager. Defaults to jans . If left jans-secret secret will be created. CN_GOOGLE_SECRET_MANAGER_PASSPHRASE : Passphrase for Janssen secret in Google Secret Manager. This is recommended to be changed and defaults to secret . CN_FIDO2_APP_LOGGERS : Custom logging configuration in JSON-string format with hash type (see Configure app loggers section for details). CN_PROMETHEUS_PORT : Port used by Prometheus JMX agent (default to empty string). To enable Prometheus JMX agent, set the value to a number. See Exposing metrics for details. CN_SQL_DB_HOST : Hostname of the SQL database (default to localhost ). CN_SQL_DB_PORT : Port of the SQL database (default to 3306 for MySQL). CN_SQL_DB_NAME : SQL database name (default to jans ). CN_SQL_DB_USER : User name to access the SQL database (default to jans ). CN_SQL_DB_DIALECT : Dialect name of the SQL ( mysql for MySQL or pgsql for PostgreSQL; default to mysql ). CN_SQL_DB_TIMEZONE : Timezone used by the SQL database (default to UTC ). CN_SQL_DB_SCHEMA : Schema name used by SQL database (default to empty-string; if using MySQL, the schema name will be resolved as the database name, whereas in PostgreSQL the schema name will be resolved as \"public\" ). CN_AWS_SECRETS_ENDPOINT_URL : The URL of AWS secretsmanager service (if omitted, will use the one in specified region). CN_AWS_SECRETS_PREFIX : The prefix name of the secrets (default to jans ). CN_AWS_SECRETS_REPLICA_FILE : The location of file contains replica regions definition (if any). This file is mostly used in primary region. Example of contents of the file: [{\"Region\": \"us-west-1\"}] . AWS_DEFAULT_REGION : The default AWS Region to use, for example, us-west-1 or us-west-2 . AWS_SHARED_CREDENTIALS_FILE : The location of the shared credentials file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_CONFIG_FILE : The location of the config file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_PROFILE : The default profile to use, if any. Configure app loggers # App loggers can be configured to define where the logs will be redirected and what is the level the logs should be displayed. Supported redirect target: STDOUT FILE Supported level: FATAL ERROR WARN INFO DEBUG TRACE The following key-value pairs are the defaults: { \"fido2_log_target\" : \"STDOUT\" , \"fido2_log_level\" : \"INFO\" , \"persistence_log_target\" : \"FILE\" , \"persistence_log_level\" : \"INFO\" , \"persistence_duration_log_target\" : \"FILE\" , \"persistence_duration_log_level\" : \"INFO\" , \"script_log_target\" : \"FILE\" , \"script_log_level\" : \"INFO\" } To enable prefix on STDOUT logging, set the enable_stdout_log_prefix key. Example: {\"fido2_log_target\":\"STDOUT\",\"persistence_log_target\":\"STDOUT\",\"enable_stdout_log_prefix\":true} Hybrid mapping # As per v1.0.1, hybrid persistence supports all available persistence types. To configure hybrid persistence and its data mapping, follow steps below: Set CN_PERSISTENCE_TYPE environment variable to hybrid Set CN_HYBRID_MAPPING with the following format: { \"default\": \"<couchbase|ldap|spanner|sql>\", \"user\": \"<couchbase|ldap|spanner|sql>\", \"site\": \"<couchbase|ldap|spanner|sql>\", \"cache\": \"<couchbase|ldap|spanner|sql>\", \"token\": \"<couchbase|ldap|spanner|sql>\", \"session\": \"<couchbase|ldap|spanner|sql>\", } Example: { \"default\": \"sql\", \"user\": \"spanner\", \"site\": \"ldap\", \"cache\": \"sql\", \"token\": \"couchbase\", \"session\": \"spanner\", } Exposing metrics # As per v1.0.1, certain metrics can be exposed via Prometheus JMX exporter. To expose the metrics, set the CN_PROMETHEUS_PORT environment variable, i.e. CN_PROMETHEUS_PORT=9093 . Afterwards, metrics can be scraped by Prometheus or accessed manually by making request to /metrics URL, i.e. http://container:9093/metrics . Note that Prometheus JMX exporter uses pre-defined config file (see conf/prometheus-config.yaml ). To customize the config, mount custom config file to /opt/prometheus/prometheus-config.yaml inside the container.","title":"FIDO2"},{"location":"admin/reference/kubernetes/docker-jans-fido2/#overview","text":"Docker image packaging for Fido2.","title":"Overview"},{"location":"admin/reference/kubernetes/docker-jans-fido2/#versions","text":"See Packages for available versions.","title":"Versions"},{"location":"admin/reference/kubernetes/docker-jans-fido2/#environment-variables","text":"The following environment variables are supported by the container: CN_CONFIG_ADAPTER : The config backend adapter, can be consul (default) or kubernetes . CN_CONFIG_CONSUL_HOST : hostname or IP of Consul (default to localhost ). CN_CONFIG_CONSUL_PORT : port of Consul (default to 8500 ). CN_CONFIG_CONSUL_CONSISTENCY : Consul consistency mode (choose one of default , consistent , or stale ). Default to stale mode. CN_CONFIG_CONSUL_SCHEME : supported Consul scheme ( http or https ). CN_CONFIG_CONSUL_VERIFY : whether to verify cert or not (default to false ). CN_CONFIG_CONSUL_CACERT_FILE : path to Consul CA cert file (default to /etc/certs/consul_ca.crt ). This file will be used if it exists and CN_CONFIG_CONSUL_VERIFY set to true . CN_CONFIG_CONSUL_CERT_FILE : path to Consul cert file (default to /etc/certs/consul_client.crt ). CN_CONFIG_CONSUL_KEY_FILE : path to Consul key file (default to /etc/certs/consul_client.key ). CN_CONFIG_CONSUL_TOKEN_FILE : path to file contains ACL token (default to /etc/certs/consul_token ). CN_CONFIG_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_CONFIG_KUBERNETES_CONFIGMAP : Kubernetes configmaps name (default to jans ). CN_CONFIG_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_SECRET_ADAPTER : The secrets' adapter, can be vault (default), kubernetes , or google . CN_SECRET_VAULT_SCHEME : supported Vault scheme ( http or https ). CN_SECRET_VAULT_HOST : hostname or IP of Vault (default to localhost ). CN_SECRET_VAULT_PORT : port of Vault (default to 8200 ). CN_SECRET_VAULT_VERIFY : whether to verify cert or not (default to false ). CN_SECRET_VAULT_ROLE_ID_FILE : path to file contains Vault AppRole role ID (default to /etc/certs/vault_role_id ). CN_SECRET_VAULT_SECRET_ID_FILE : path to file contains Vault AppRole secret ID (default to /etc/certs/vault_secret_id ). CN_SECRET_VAULT_CERT_FILE : path to Vault cert file (default to /etc/certs/vault_client.crt ). CN_SECRET_VAULT_KEY_FILE : path to Vault key file (default to /etc/certs/vault_client.key ). CN_SECRET_VAULT_CACERT_FILE : path to Vault CA cert file (default to /etc/certs/vault_ca.crt ). This file will be used if it exists and CN_SECRET_VAULT_VERIFY set to true . CN_SECRET_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_SECRET_KUBERNETES_SECRET : Kubernetes secrets name (default to jans ). CN_SECRET_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_WAIT_MAX_TIME : How long the startup \"health checks\" should run (default to 300 seconds). CN_WAIT_SLEEP_DURATION : Delay between startup \"health checks\" (default to 10 seconds). CN_MAX_RAM_PERCENTAGE : Value passed to Java option -XX:MaxRAMPercentage . CN_PERSISTENCE_TYPE : Persistence backend being used (one of ldap , couchbase , or hybrid ; default to ldap ). CN_HYBRID_MAPPING : Specify data mapping for each persistence (default to \"{}\" ). Note this environment only takes effect when CN_PERSISTENCE_TYPE is set to hybrid . See hybrid mapping section for details. CN_LDAP_URL : Address and port of LDAP server (default to localhost:1636 ). CN_LDAP_USE_SSL : Whether to use SSL connection to LDAP server (default to true ). CN_COUCHBASE_URL : Address of Couchbase server (default to localhost ). CN_COUCHBASE_USER : Username of Couchbase server (default to admin ). CN_COUCHBASE_CERT_FILE : Couchbase root certificate location (default to /etc/certs/couchbase.crt ). CN_COUCHBASE_PASSWORD_FILE : Path to file contains Couchbase password (default to /etc/jans/conf/couchbase_password ). CN_COUCHBASE_CONN_TIMEOUT : Connect timeout used when a bucket is opened (default to 10000 milliseconds). CN_COUCHBASE_CONN_MAX_WAIT : Maximum time to wait before retrying connection (default to 20000 milliseconds). CN_COUCHBASE_SCAN_CONSISTENCY : Default scan consistency; one of not_bounded , request_plus , or statement_plus (default to not_bounded ). CN_COUCHBASE_BUCKET_PREFIX : Prefix for Couchbase buckets (default to jans ). CN_COUCHBASE_TRUSTSTORE_ENABLE : Enable truststore for encrypted Couchbase connection (default to true ). CN_COUCHBASE_KEEPALIVE_INTERVAL : Keep-alive interval for Couchbase connection (default to 30000 milliseconds). CN_COUCHBASE_KEEPALIVE_TIMEOUT : Keep-alive timeout for Couchbase connection (default to 2500 milliseconds). CN_JAVA_OPTIONS : Java options passed to entrypoint, i.e. -Xmx1024m (default to empty-string). GOOGLE_APPLICATION_CREDENTIALS : Optional JSON file (contains Google credentials) that can be injected into container for authentication. Refer to https://cloud.google.com/docs/authentication/provide-credentials-adc#how-to for supported credentials. GOOGLE_PROJECT_ID : ID of Google project. CN_GOOGLE_SECRET_VERSION_ID : Janssen secret version ID in Google Secret Manager. Defaults to latest , which is recommended. CN_GOOGLE_SECRET_NAME_PREFIX : Prefix for Janssen secret in Google Secret Manager. Defaults to jans . If left jans-secret secret will be created. CN_GOOGLE_SECRET_MANAGER_PASSPHRASE : Passphrase for Janssen secret in Google Secret Manager. This is recommended to be changed and defaults to secret . CN_FIDO2_APP_LOGGERS : Custom logging configuration in JSON-string format with hash type (see Configure app loggers section for details). CN_PROMETHEUS_PORT : Port used by Prometheus JMX agent (default to empty string). To enable Prometheus JMX agent, set the value to a number. See Exposing metrics for details. CN_SQL_DB_HOST : Hostname of the SQL database (default to localhost ). CN_SQL_DB_PORT : Port of the SQL database (default to 3306 for MySQL). CN_SQL_DB_NAME : SQL database name (default to jans ). CN_SQL_DB_USER : User name to access the SQL database (default to jans ). CN_SQL_DB_DIALECT : Dialect name of the SQL ( mysql for MySQL or pgsql for PostgreSQL; default to mysql ). CN_SQL_DB_TIMEZONE : Timezone used by the SQL database (default to UTC ). CN_SQL_DB_SCHEMA : Schema name used by SQL database (default to empty-string; if using MySQL, the schema name will be resolved as the database name, whereas in PostgreSQL the schema name will be resolved as \"public\" ). CN_AWS_SECRETS_ENDPOINT_URL : The URL of AWS secretsmanager service (if omitted, will use the one in specified region). CN_AWS_SECRETS_PREFIX : The prefix name of the secrets (default to jans ). CN_AWS_SECRETS_REPLICA_FILE : The location of file contains replica regions definition (if any). This file is mostly used in primary region. Example of contents of the file: [{\"Region\": \"us-west-1\"}] . AWS_DEFAULT_REGION : The default AWS Region to use, for example, us-west-1 or us-west-2 . AWS_SHARED_CREDENTIALS_FILE : The location of the shared credentials file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_CONFIG_FILE : The location of the config file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_PROFILE : The default profile to use, if any.","title":"Environment Variables"},{"location":"admin/reference/kubernetes/docker-jans-fido2/#configure-app-loggers","text":"App loggers can be configured to define where the logs will be redirected and what is the level the logs should be displayed. Supported redirect target: STDOUT FILE Supported level: FATAL ERROR WARN INFO DEBUG TRACE The following key-value pairs are the defaults: { \"fido2_log_target\" : \"STDOUT\" , \"fido2_log_level\" : \"INFO\" , \"persistence_log_target\" : \"FILE\" , \"persistence_log_level\" : \"INFO\" , \"persistence_duration_log_target\" : \"FILE\" , \"persistence_duration_log_level\" : \"INFO\" , \"script_log_target\" : \"FILE\" , \"script_log_level\" : \"INFO\" } To enable prefix on STDOUT logging, set the enable_stdout_log_prefix key. Example: {\"fido2_log_target\":\"STDOUT\",\"persistence_log_target\":\"STDOUT\",\"enable_stdout_log_prefix\":true}","title":"Configure app loggers"},{"location":"admin/reference/kubernetes/docker-jans-fido2/#hybrid-mapping","text":"As per v1.0.1, hybrid persistence supports all available persistence types. To configure hybrid persistence and its data mapping, follow steps below: Set CN_PERSISTENCE_TYPE environment variable to hybrid Set CN_HYBRID_MAPPING with the following format: { \"default\": \"<couchbase|ldap|spanner|sql>\", \"user\": \"<couchbase|ldap|spanner|sql>\", \"site\": \"<couchbase|ldap|spanner|sql>\", \"cache\": \"<couchbase|ldap|spanner|sql>\", \"token\": \"<couchbase|ldap|spanner|sql>\", \"session\": \"<couchbase|ldap|spanner|sql>\", } Example: { \"default\": \"sql\", \"user\": \"spanner\", \"site\": \"ldap\", \"cache\": \"sql\", \"token\": \"couchbase\", \"session\": \"spanner\", }","title":"Hybrid mapping"},{"location":"admin/reference/kubernetes/docker-jans-fido2/#exposing-metrics","text":"As per v1.0.1, certain metrics can be exposed via Prometheus JMX exporter. To expose the metrics, set the CN_PROMETHEUS_PORT environment variable, i.e. CN_PROMETHEUS_PORT=9093 . Afterwards, metrics can be scraped by Prometheus or accessed manually by making request to /metrics URL, i.e. http://container:9093/metrics . Note that Prometheus JMX exporter uses pre-defined config file (see conf/prometheus-config.yaml ). To customize the config, mount custom config file to /opt/prometheus/prometheus-config.yaml inside the container.","title":"Exposing metrics"},{"location":"admin/reference/kubernetes/docker-jans-monolith/","tags":["administration","installation","quick-start","docker compose","docker image"],"text":"Warning This image is for testing and development purposes only. Use Janssen helm charts for production setups. Overview # Docker monolith image packaging for Janssen. This image packs janssen services including the auth-server, config-api, fido2, and scim. Pre-requisites # Docker Docker compose Environment Variables # Installation depends on the set of environment variables shown below. These environment variables can be set to customize installation as per the need. If not set, the installer uses default values. ENV Description Default CN_HOSTNAME Hostname to install janssen with. demoexample.jans.io CN_ADMIN_PASS Password of the admin user. 1t5Fin3#security CN_ORG_NAME Organization name. Used for ssl cert generation. Janssen CN_EMAIL Email. Used for ssl cert generation. support@jans.io CN_CITY City. Used for ssl cert generation. Austin CN_STATE State. Used for ssl cert generation TX CN_COUNTRY Country. Used for ssl cert generation. US CN_INSTALL_LDAP NOT SUPPORRTED YET false CN_INSTALL_MYSQL Install jans with mysql as the backend false CN_INSTALL_PGSQL Install jans with Postgres as the backend false CN_INSTALL_CONFIG_API Installs the Config API service. true CN_INSTALL_SCIM Installs the SCIM API service. true CN_INSTALL_FIDO2 Installs the FIDO2 API service. true RDBMS_DATABASE RDBMS jans database for MySQL or Postgres. jans RDBMS_USER RDBMS database user for MySQL or Postgres. jans RDBMS_PASSWORD RDBMS database user password for MySQL or Postgres. 1t5Fin3#security RDBMS_HOST RDBMS host for MySQL or Postgres. mysql which is the docker compose service name TEST_CLIENT_ID ID of test client in UUID which has all available scopes to access any jans API 9876baac-de39-4c23-8a78-674b59df8c09 TEST_CLIENT_SECRET Secret for test client 1t5Fin3#security TEST_CLIENT_TRUSTED Trust test client true TEST_CLIENT_REDIRECT_URI Not Implemented yet Redirect URI for test client. Multiple uri's with comma may be provided, if not provided redirect uris will be same as the config-api-client `` How to run # Download the compose file wget https://raw.githubusercontent.com/JanssenProject/jans/main/docker-jans-monolith/jans-mysql-compose.yml This docker compose file runs two containers, the janssen monolith container and mysql container. docker compose -f jans-mysql-compose.yml up -d To view the containers running docker compose -f jans-mysql-compose.yml ps Configure Janssen Server # docker compose -f jans-mysql-compose.yml exec jans sh #This opens a bash terminal in the running container /opt/jans/jans-cli/config-cli.py #configure using the config-cli /opt/jans/jans-cli/scim-cli.py #configure using the scim-cli Access endpoints externally # Add to your /etc/hosts file the ip domain record which should be the ip of the instance docker is installed at and the domain used in the env above CN_HOSTNAME . # For-example 172 .22.0.3 demoexample.jans.io After adding the record you can hit endpoints such as https://demoexample.jans.io/.well-known/openid-configuration Clean up # Remove setup and volumes docker compose -f jans-mysql-compose.yml down","title":"Monolith"},{"location":"admin/reference/kubernetes/docker-jans-monolith/#overview","text":"Docker monolith image packaging for Janssen. This image packs janssen services including the auth-server, config-api, fido2, and scim.","title":"Overview"},{"location":"admin/reference/kubernetes/docker-jans-monolith/#pre-requisites","text":"Docker Docker compose","title":"Pre-requisites"},{"location":"admin/reference/kubernetes/docker-jans-monolith/#environment-variables","text":"Installation depends on the set of environment variables shown below. These environment variables can be set to customize installation as per the need. If not set, the installer uses default values. ENV Description Default CN_HOSTNAME Hostname to install janssen with. demoexample.jans.io CN_ADMIN_PASS Password of the admin user. 1t5Fin3#security CN_ORG_NAME Organization name. Used for ssl cert generation. Janssen CN_EMAIL Email. Used for ssl cert generation. support@jans.io CN_CITY City. Used for ssl cert generation. Austin CN_STATE State. Used for ssl cert generation TX CN_COUNTRY Country. Used for ssl cert generation. US CN_INSTALL_LDAP NOT SUPPORRTED YET false CN_INSTALL_MYSQL Install jans with mysql as the backend false CN_INSTALL_PGSQL Install jans with Postgres as the backend false CN_INSTALL_CONFIG_API Installs the Config API service. true CN_INSTALL_SCIM Installs the SCIM API service. true CN_INSTALL_FIDO2 Installs the FIDO2 API service. true RDBMS_DATABASE RDBMS jans database for MySQL or Postgres. jans RDBMS_USER RDBMS database user for MySQL or Postgres. jans RDBMS_PASSWORD RDBMS database user password for MySQL or Postgres. 1t5Fin3#security RDBMS_HOST RDBMS host for MySQL or Postgres. mysql which is the docker compose service name TEST_CLIENT_ID ID of test client in UUID which has all available scopes to access any jans API 9876baac-de39-4c23-8a78-674b59df8c09 TEST_CLIENT_SECRET Secret for test client 1t5Fin3#security TEST_CLIENT_TRUSTED Trust test client true TEST_CLIENT_REDIRECT_URI Not Implemented yet Redirect URI for test client. Multiple uri's with comma may be provided, if not provided redirect uris will be same as the config-api-client ``","title":"Environment Variables"},{"location":"admin/reference/kubernetes/docker-jans-monolith/#how-to-run","text":"Download the compose file wget https://raw.githubusercontent.com/JanssenProject/jans/main/docker-jans-monolith/jans-mysql-compose.yml This docker compose file runs two containers, the janssen monolith container and mysql container. docker compose -f jans-mysql-compose.yml up -d To view the containers running docker compose -f jans-mysql-compose.yml ps","title":"How to run"},{"location":"admin/reference/kubernetes/docker-jans-monolith/#configure-janssen-server","text":"docker compose -f jans-mysql-compose.yml exec jans sh #This opens a bash terminal in the running container /opt/jans/jans-cli/config-cli.py #configure using the config-cli /opt/jans/jans-cli/scim-cli.py #configure using the scim-cli","title":"Configure Janssen Server"},{"location":"admin/reference/kubernetes/docker-jans-monolith/#access-endpoints-externally","text":"Add to your /etc/hosts file the ip domain record which should be the ip of the instance docker is installed at and the domain used in the env above CN_HOSTNAME . # For-example 172 .22.0.3 demoexample.jans.io After adding the record you can hit endpoints such as https://demoexample.jans.io/.well-known/openid-configuration","title":"Access endpoints externally"},{"location":"admin/reference/kubernetes/docker-jans-monolith/#clean-up","text":"Remove setup and volumes docker compose -f jans-mysql-compose.yml down","title":"Clean up"},{"location":"admin/reference/kubernetes/docker-jans-persistence-loader/","tags":["administration","reference","kubernetes","docker image"],"text":"Overview # Persistence is a special container to load initial data for LDAP or Couchbase. Versions # See Packages for available versions. Environment Variables # The following environment variables are supported by the container: CN_CONFIG_ADAPTER : The config backend adapter, can be consul (default) or kubernetes . CN_CONFIG_CONSUL_HOST : hostname or IP of Consul (default to localhost ). CN_CONFIG_CONSUL_PORT : port of Consul (default to 8500 ). CN_CONFIG_CONSUL_CONSISTENCY : Consul consistency mode (choose one of default , consistent , or stale ). Default to stale mode. CN_CONFIG_CONSUL_SCHEME : supported Consul scheme ( http or https ). CN_CONFIG_CONSUL_VERIFY : whether to verify cert or not (default to false ). CN_CONFIG_CONSUL_CACERT_FILE : path to Consul CA cert file (default to /etc/certs/consul_ca.crt ). This file will be used if it exists and CN_CONFIG_CONSUL_VERIFY set to true . CN_CONFIG_CONSUL_CERT_FILE : path to Consul cert file (default to /etc/certs/consul_client.crt ). CN_CONFIG_CONSUL_KEY_FILE : path to Consul key file (default to /etc/certs/consul_client.key ). CN_CONFIG_CONSUL_TOKEN_FILE : path to file contains ACL token (default to /etc/certs/consul_token ). CN_CONFIG_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_CONFIG_KUBERNETES_CONFIGMAP : Kubernetes configmaps name (default to jans ). CN_CONFIG_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_SECRET_ADAPTER : The secrets' adapter, can be vault (default), kubernetes , or google . CN_SECRET_VAULT_SCHEME : supported Vault scheme ( http or https ). CN_SECRET_VAULT_HOST : hostname or IP of Vault (default to localhost ). CN_SECRET_VAULT_PORT : port of Vault (default to 8200 ). CN_SECRET_VAULT_VERIFY : whether to verify cert or not (default to false ). CN_SECRET_VAULT_ROLE_ID_FILE : path to file contains Vault AppRole role ID (default to /etc/certs/vault_role_id ). CN_SECRET_VAULT_SECRET_ID_FILE : path to file contains Vault AppRole secret ID (default to /etc/certs/vault_secret_id ). CN_SECRET_VAULT_CERT_FILE : path to Vault cert file (default to /etc/certs/vault_client.crt ). CN_SECRET_VAULT_KEY_FILE : path to Vault key file (default to /etc/certs/vault_client.key ). CN_SECRET_VAULT_CACERT_FILE : path to Vault CA cert file (default to /etc/certs/vault_ca.crt ). This file will be used if it exists and CN_SECRET_VAULT_VERIFY set to true . CN_SECRET_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_SECRET_KUBERNETES_SECRET : Kubernetes secrets name (default to jans ). CN_SECRET_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_WAIT_MAX_TIME : How long the startup \"health checks\" should run (default to 300 seconds). CN_WAIT_SLEEP_DURATION : Delay between startup \"health checks\" (default to 10 seconds). CN_OXTRUST_CONFIG_GENERATION : Whether to generate oxShibboleth configuration or not (default to true ). CN_CACHE_TYPE : Supported values are IN_MEMORY , REDIS , MEMCACHED , and NATIVE_PERSISTENCE (default to NATIVE_PERSISTENCE ). CN_EXT_SIGNING_JWKS_URI : URI of external signing JWKS (default is \"\"). CN_REDIS_URL : URL of Redis server, format is host:port (optional; default to localhost:6379 ). CN_REDIS_TYPE : Redis service type, either STANDALONE or CLUSTER (optional; default to STANDALONE ). CN_MEMCACHED_URL : URL of Memcache server, format is host:port (optional; default to localhost:11211 ). CN_PERSISTENCE_TYPE : Persistence backend being used (one of ldap , couchbase , or hybrid ; default to ldap ). CN_HYBRID_MAPPING : Specify data mapping for each persistence (default to \"{}\" ). Note this environment only takes effect when CN_PERSISTENCE_TYPE is set to hybrid . See hybrid mapping section for details. CN_PERSISTENCE_SKIP_INITIALIZED : skip initialization if backend already initialized (default to false ). CN_PERSISTENCE_UPDATE_AUTH_DYNAMIC_CONFIG : Whether to allow automatic updates of jans-auth configuration (default to true ). CN_LDAP_URL : Address and port of LDAP server (default to localhost:1636 ). CN_LDAP_USE_SSL : Whether to use SSL connection to LDAP server (default to true ). CN_COUCHBASE_URL : Address of Couchbase server (default to localhost ). CN_COUCHBASE_USER : Username of Couchbase server (default to admin ). CN_COUCHBASE_SUPERUSER : Superuser of Couchbase server (default to empty-string). CN_COUCHBASE_CERT_FILE : Couchbase root certificate location (default to /etc/certs/couchbase.crt ). CN_COUCHBASE_PASSWORD_FILE : Path to file contains Couchbase password (default to /etc/jans/conf/couchbase_password ). CN_COUCHBASE_SUPERUSER_PASSWORD_FILE : Path to file contains Couchbase superuser password (default to /etc/jans/conf/couchbase_superuser_password ). CN_DOCUMENT_STORE_TYPE : Document store type (one of LOCAL or JCA ; default to LOCAL ). CN_JACKRABBIT_URL : URL to remote repository (default to http://localhost:8080 ). CN_JACKRABBIT_ADMIN_ID_FILE : Absolute path to file contains ID for admin user (default to /etc/jans/conf/jackrabbit_admin_id ). CN_JACKRABBIT_ADMIN_PASSWORD_FILE : Absolute path to file contains password for admin user (default to /etc/gluu/conf/jackrabbit_admin_password ). GOOGLE_APPLICATION_CREDENTIALS : Optional JSON file (contains Google credentials) that can be injected into container for authentication. Refer to https://cloud.google.com/docs/authentication/provide-credentials-adc#how-to for supported credentials. GOOGLE_PROJECT_ID : ID of Google project. CN_GOOGLE_SECRET_VERSION_ID : Janssen secret version ID in Google Secret Manager. Defaults to latest , which is recommended. CN_GOOGLE_SECRET_NAME_PREFIX : Prefix for Janssen secret in Google Secret Manager. Defaults to jans . If left jans-secret secret will be created. CN_GOOGLE_SECRET_MANAGER_PASSPHRASE : Passphrase for Janssen secret in Google Secret Manager. This is recommended to be changed and defaults to secret . CN_GOOGLE_SPANNER_INSTANCE_ID : Google Spanner instance ID. CN_GOOGLE_SPANNER_DATABASE_ID : Google Spanner database ID. CN_SQL_DB_HOST : Hostname of the SQL database (default to localhost ). CN_SQL_DB_PORT : Port of the SQL database (default to 3306 for MySQL). CN_SQL_DB_NAME : SQL database name (default to jans ). CN_SQL_DB_USER : User name to access the SQL database (default to jans ). CN_SQL_DB_DIALECT : Dialect name of the SQL ( mysql for MySQL or pgsql for PostgreSQL; default to mysql ). CN_SQL_DB_TIMEZONE : Timezone used by the SQL database (default to UTC ). CN_SQL_DB_SCHEMA : Schema name used by SQL database (default to empty-string; if using MySQL, the schema name will be resolved as the database name, whereas in PostgreSQL the schema name will be resolved as \"public\" ). CN_AWS_SECRETS_ENDPOINT_URL : The URL of AWS secretsmanager service (if omitted, will use the one in specified region). CN_AWS_SECRETS_PREFIX : The prefix name of the secrets (default to jans ). CN_AWS_SECRETS_REPLICA_FILE : The location of file contains replica regions definition (if any). This file is mostly used in primary region. Example of contents of the file: [{\"Region\": \"us-west-1\"}] . AWS_DEFAULT_REGION : The default AWS Region to use, for example, us-west-1 or us-west-2 . AWS_SHARED_CREDENTIALS_FILE : The location of the shared credentials file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_CONFIG_FILE : The location of the config file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_PROFILE : The default profile to use, if any. Hybrid mapping # As per v1.0.1, hybrid persistence supports all available persistence types. To configure hybrid persistence and its data mapping, follow steps below: Set CN_PERSISTENCE_TYPE environment variable to hybrid Set CN_HYBRID_MAPPING with the following format: { \"default\": \"<couchbase|ldap|spanner|sql>\", \"user\": \"<couchbase|ldap|spanner|sql>\", \"site\": \"<couchbase|ldap|spanner|sql>\", \"cache\": \"<couchbase|ldap|spanner|sql>\", \"token\": \"<couchbase|ldap|spanner|sql>\", \"session\": \"<couchbase|ldap|spanner|sql>\", } Example: { \"default\": \"sql\", \"user\": \"spanner\", \"site\": \"ldap\", \"cache\": \"sql\", \"token\": \"couchbase\", \"session\": \"spanner\", }","title":"Persistence"},{"location":"admin/reference/kubernetes/docker-jans-persistence-loader/#overview","text":"Persistence is a special container to load initial data for LDAP or Couchbase.","title":"Overview"},{"location":"admin/reference/kubernetes/docker-jans-persistence-loader/#versions","text":"See Packages for available versions.","title":"Versions"},{"location":"admin/reference/kubernetes/docker-jans-persistence-loader/#environment-variables","text":"The following environment variables are supported by the container: CN_CONFIG_ADAPTER : The config backend adapter, can be consul (default) or kubernetes . CN_CONFIG_CONSUL_HOST : hostname or IP of Consul (default to localhost ). CN_CONFIG_CONSUL_PORT : port of Consul (default to 8500 ). CN_CONFIG_CONSUL_CONSISTENCY : Consul consistency mode (choose one of default , consistent , or stale ). Default to stale mode. CN_CONFIG_CONSUL_SCHEME : supported Consul scheme ( http or https ). CN_CONFIG_CONSUL_VERIFY : whether to verify cert or not (default to false ). CN_CONFIG_CONSUL_CACERT_FILE : path to Consul CA cert file (default to /etc/certs/consul_ca.crt ). This file will be used if it exists and CN_CONFIG_CONSUL_VERIFY set to true . CN_CONFIG_CONSUL_CERT_FILE : path to Consul cert file (default to /etc/certs/consul_client.crt ). CN_CONFIG_CONSUL_KEY_FILE : path to Consul key file (default to /etc/certs/consul_client.key ). CN_CONFIG_CONSUL_TOKEN_FILE : path to file contains ACL token (default to /etc/certs/consul_token ). CN_CONFIG_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_CONFIG_KUBERNETES_CONFIGMAP : Kubernetes configmaps name (default to jans ). CN_CONFIG_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_SECRET_ADAPTER : The secrets' adapter, can be vault (default), kubernetes , or google . CN_SECRET_VAULT_SCHEME : supported Vault scheme ( http or https ). CN_SECRET_VAULT_HOST : hostname or IP of Vault (default to localhost ). CN_SECRET_VAULT_PORT : port of Vault (default to 8200 ). CN_SECRET_VAULT_VERIFY : whether to verify cert or not (default to false ). CN_SECRET_VAULT_ROLE_ID_FILE : path to file contains Vault AppRole role ID (default to /etc/certs/vault_role_id ). CN_SECRET_VAULT_SECRET_ID_FILE : path to file contains Vault AppRole secret ID (default to /etc/certs/vault_secret_id ). CN_SECRET_VAULT_CERT_FILE : path to Vault cert file (default to /etc/certs/vault_client.crt ). CN_SECRET_VAULT_KEY_FILE : path to Vault key file (default to /etc/certs/vault_client.key ). CN_SECRET_VAULT_CACERT_FILE : path to Vault CA cert file (default to /etc/certs/vault_ca.crt ). This file will be used if it exists and CN_SECRET_VAULT_VERIFY set to true . CN_SECRET_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_SECRET_KUBERNETES_SECRET : Kubernetes secrets name (default to jans ). CN_SECRET_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_WAIT_MAX_TIME : How long the startup \"health checks\" should run (default to 300 seconds). CN_WAIT_SLEEP_DURATION : Delay between startup \"health checks\" (default to 10 seconds). CN_OXTRUST_CONFIG_GENERATION : Whether to generate oxShibboleth configuration or not (default to true ). CN_CACHE_TYPE : Supported values are IN_MEMORY , REDIS , MEMCACHED , and NATIVE_PERSISTENCE (default to NATIVE_PERSISTENCE ). CN_EXT_SIGNING_JWKS_URI : URI of external signing JWKS (default is \"\"). CN_REDIS_URL : URL of Redis server, format is host:port (optional; default to localhost:6379 ). CN_REDIS_TYPE : Redis service type, either STANDALONE or CLUSTER (optional; default to STANDALONE ). CN_MEMCACHED_URL : URL of Memcache server, format is host:port (optional; default to localhost:11211 ). CN_PERSISTENCE_TYPE : Persistence backend being used (one of ldap , couchbase , or hybrid ; default to ldap ). CN_HYBRID_MAPPING : Specify data mapping for each persistence (default to \"{}\" ). Note this environment only takes effect when CN_PERSISTENCE_TYPE is set to hybrid . See hybrid mapping section for details. CN_PERSISTENCE_SKIP_INITIALIZED : skip initialization if backend already initialized (default to false ). CN_PERSISTENCE_UPDATE_AUTH_DYNAMIC_CONFIG : Whether to allow automatic updates of jans-auth configuration (default to true ). CN_LDAP_URL : Address and port of LDAP server (default to localhost:1636 ). CN_LDAP_USE_SSL : Whether to use SSL connection to LDAP server (default to true ). CN_COUCHBASE_URL : Address of Couchbase server (default to localhost ). CN_COUCHBASE_USER : Username of Couchbase server (default to admin ). CN_COUCHBASE_SUPERUSER : Superuser of Couchbase server (default to empty-string). CN_COUCHBASE_CERT_FILE : Couchbase root certificate location (default to /etc/certs/couchbase.crt ). CN_COUCHBASE_PASSWORD_FILE : Path to file contains Couchbase password (default to /etc/jans/conf/couchbase_password ). CN_COUCHBASE_SUPERUSER_PASSWORD_FILE : Path to file contains Couchbase superuser password (default to /etc/jans/conf/couchbase_superuser_password ). CN_DOCUMENT_STORE_TYPE : Document store type (one of LOCAL or JCA ; default to LOCAL ). CN_JACKRABBIT_URL : URL to remote repository (default to http://localhost:8080 ). CN_JACKRABBIT_ADMIN_ID_FILE : Absolute path to file contains ID for admin user (default to /etc/jans/conf/jackrabbit_admin_id ). CN_JACKRABBIT_ADMIN_PASSWORD_FILE : Absolute path to file contains password for admin user (default to /etc/gluu/conf/jackrabbit_admin_password ). GOOGLE_APPLICATION_CREDENTIALS : Optional JSON file (contains Google credentials) that can be injected into container for authentication. Refer to https://cloud.google.com/docs/authentication/provide-credentials-adc#how-to for supported credentials. GOOGLE_PROJECT_ID : ID of Google project. CN_GOOGLE_SECRET_VERSION_ID : Janssen secret version ID in Google Secret Manager. Defaults to latest , which is recommended. CN_GOOGLE_SECRET_NAME_PREFIX : Prefix for Janssen secret in Google Secret Manager. Defaults to jans . If left jans-secret secret will be created. CN_GOOGLE_SECRET_MANAGER_PASSPHRASE : Passphrase for Janssen secret in Google Secret Manager. This is recommended to be changed and defaults to secret . CN_GOOGLE_SPANNER_INSTANCE_ID : Google Spanner instance ID. CN_GOOGLE_SPANNER_DATABASE_ID : Google Spanner database ID. CN_SQL_DB_HOST : Hostname of the SQL database (default to localhost ). CN_SQL_DB_PORT : Port of the SQL database (default to 3306 for MySQL). CN_SQL_DB_NAME : SQL database name (default to jans ). CN_SQL_DB_USER : User name to access the SQL database (default to jans ). CN_SQL_DB_DIALECT : Dialect name of the SQL ( mysql for MySQL or pgsql for PostgreSQL; default to mysql ). CN_SQL_DB_TIMEZONE : Timezone used by the SQL database (default to UTC ). CN_SQL_DB_SCHEMA : Schema name used by SQL database (default to empty-string; if using MySQL, the schema name will be resolved as the database name, whereas in PostgreSQL the schema name will be resolved as \"public\" ). CN_AWS_SECRETS_ENDPOINT_URL : The URL of AWS secretsmanager service (if omitted, will use the one in specified region). CN_AWS_SECRETS_PREFIX : The prefix name of the secrets (default to jans ). CN_AWS_SECRETS_REPLICA_FILE : The location of file contains replica regions definition (if any). This file is mostly used in primary region. Example of contents of the file: [{\"Region\": \"us-west-1\"}] . AWS_DEFAULT_REGION : The default AWS Region to use, for example, us-west-1 or us-west-2 . AWS_SHARED_CREDENTIALS_FILE : The location of the shared credentials file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_CONFIG_FILE : The location of the config file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_PROFILE : The default profile to use, if any.","title":"Environment Variables"},{"location":"admin/reference/kubernetes/docker-jans-persistence-loader/#hybrid-mapping","text":"As per v1.0.1, hybrid persistence supports all available persistence types. To configure hybrid persistence and its data mapping, follow steps below: Set CN_PERSISTENCE_TYPE environment variable to hybrid Set CN_HYBRID_MAPPING with the following format: { \"default\": \"<couchbase|ldap|spanner|sql>\", \"user\": \"<couchbase|ldap|spanner|sql>\", \"site\": \"<couchbase|ldap|spanner|sql>\", \"cache\": \"<couchbase|ldap|spanner|sql>\", \"token\": \"<couchbase|ldap|spanner|sql>\", \"session\": \"<couchbase|ldap|spanner|sql>\", } Example: { \"default\": \"sql\", \"user\": \"spanner\", \"site\": \"ldap\", \"cache\": \"sql\", \"token\": \"couchbase\", \"session\": \"spanner\", }","title":"Hybrid mapping"},{"location":"admin/reference/kubernetes/docker-jans-scim/","tags":["administration","reference","kubernetes","docker image"],"text":"Overview # Docker image packaging for SCIM. Versions # See Packages for available versions. Environment Variables # The following environment variables are supported by the container: CN_CONFIG_ADAPTER : The config backend adapter, can be consul (default) or kubernetes . CN_CONFIG_CONSUL_HOST : hostname or IP of Consul (default to localhost ). CN_CONFIG_CONSUL_PORT : port of Consul (default to 8500 ). CN_CONFIG_CONSUL_CONSISTENCY : Consul consistency mode (choose one of default , consistent , or stale ). Default to stale mode. CN_CONFIG_CONSUL_SCHEME : supported Consul scheme ( http or https ). CN_CONFIG_CONSUL_VERIFY : whether to verify cert or not (default to false ). CN_CONFIG_CONSUL_CACERT_FILE : path to Consul CA cert file (default to /etc/certs/consul_ca.crt ). This file will be used if it exists and CN_CONFIG_CONSUL_VERIFY set to true . CN_CONFIG_CONSUL_CERT_FILE : path to Consul cert file (default to /etc/certs/consul_client.crt ). CN_CONFIG_CONSUL_KEY_FILE : path to Consul key file (default to /etc/certs/consul_client.key ). CN_CONFIG_CONSUL_TOKEN_FILE : path to file contains ACL token (default to /etc/certs/consul_token ). CN_CONFIG_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_CONFIG_KUBERNETES_CONFIGMAP : Kubernetes configmaps name (default to jans ). CN_CONFIG_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_SECRET_ADAPTER : The secrets' adapter, can be vault (default), kubernetes , or google . CN_SECRET_VAULT_SCHEME : supported Vault scheme ( http or https ). CN_SECRET_VAULT_HOST : hostname or IP of Vault (default to localhost ). CN_SECRET_VAULT_PORT : port of Vault (default to 8200 ). CN_SECRET_VAULT_VERIFY : whether to verify cert or not (default to false ). CN_SECRET_VAULT_ROLE_ID_FILE : path to file contains Vault AppRole role ID (default to /etc/certs/vault_role_id ). CN_SECRET_VAULT_SECRET_ID_FILE : path to file contains Vault AppRole secret ID (default to /etc/certs/vault_secret_id ). CN_SECRET_VAULT_CERT_FILE : path to Vault cert file (default to /etc/certs/vault_client.crt ). CN_SECRET_VAULT_KEY_FILE : path to Vault key file (default to /etc/certs/vault_client.key ). CN_SECRET_VAULT_CACERT_FILE : path to Vault CA cert file (default to /etc/certs/vault_ca.crt ). This file will be used if it exists and CN_SECRET_VAULT_VERIFY set to true . CN_SECRET_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_SECRET_KUBERNETES_SECRET : Kubernetes secrets name (default to jans ). CN_SECRET_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_WAIT_MAX_TIME : How long the startup \"health checks\" should run (default to 300 seconds). CN_WAIT_SLEEP_DURATION : Delay between startup \"health checks\" (default to 10 seconds). CN_MAX_RAM_PERCENTAGE : Value passed to Java option -XX:MaxRAMPercentage . CN_PERSISTENCE_TYPE : Persistence backend being used (one of ldap , couchbase , or hybrid ; default to ldap ). CN_HYBRID_MAPPING : Specify data mapping for each persistence (default to \"{}\" ). Note this environment only takes effect when CN_PERSISTENCE_TYPE is set to hybrid . See hybrid mapping section for details. CN_LDAP_URL : Address and port of LDAP server (default to localhost:1636 ). CN_LDAP_USE_SSL : Whether to use SSL connection to LDAP server (default to true ). CN_COUCHBASE_URL : Address of Couchbase server (default to localhost ). CN_COUCHBASE_USER : Username of Couchbase server (default to admin ). CN_COUCHBASE_CERT_FILE : Couchbase root certificate location (default to /etc/certs/couchbase.crt ). CN_COUCHBASE_PASSWORD_FILE : Path to file contains Couchbase password (default to /etc/jans/conf/couchbase_password ). CN_COUCHBASE_CONN_TIMEOUT : Connect timeout used when a bucket is opened (default to 10000 milliseconds). CN_COUCHBASE_CONN_MAX_WAIT : Maximum time to wait before retrying connection (default to 20000 milliseconds). CN_COUCHBASE_SCAN_CONSISTENCY : Default scan consistency; one of not_bounded , request_plus , or statement_plus (default to not_bounded ). CN_COUCHBASE_BUCKET_PREFIX : Prefix for Couchbase buckets (default to jans ). CN_COUCHBASE_TRUSTSTORE_ENABLE : Enable truststore for encrypted Couchbase connection (default to true ). CN_COUCHBASE_KEEPALIVE_INTERVAL : Keep-alive interval for Couchbase connection (default to 30000 milliseconds). CN_COUCHBASE_KEEPALIVE_TIMEOUT : Keep-alive timeout for Couchbase connection (default to 2500 milliseconds). CN_JAVA_OPTIONS : Java options passed to entrypoint, i.e. -Xmx1024m (default to empty-string). GOOGLE_APPLICATION_CREDENTIALS : Optional JSON file (contains Google credentials) that can be injected into container for authentication. Refer to https://cloud.google.com/docs/authentication/provide-credentials-adc#how-to for supported credentials. GOOGLE_PROJECT_ID : ID of Google project. CN_GOOGLE_SECRET_VERSION_ID : Janssen secret version ID in Google Secret Manager. Defaults to latest , which is recommended. CN_GOOGLE_SECRET_NAME_PREFIX : Prefix for Janssen secret in Google Secret Manager. Defaults to jans . If left jans-secret secret will be created. CN_GOOGLE_SECRET_MANAGER_PASSPHRASE : Passphrase for Janssen secret in Google Secret Manager. This is recommended to be changed and defaults to secret . CN_SCIM_APP_LOGGERS : Custom logging configuration in JSON-string format with hash type (see Configure app loggers section for details). CN_PROMETHEUS_PORT : Port used by Prometheus JMX agent (default to empty string). To enable Prometheus JMX agent, set the value to a number. See Exposing metrics for details. CN_SQL_DB_HOST : Hostname of the SQL database (default to localhost ). CN_SQL_DB_PORT : Port of the SQL database (default to 3306 for MySQL). CN_SQL_DB_NAME : SQL database name (default to jans ). CN_SQL_DB_USER : User name to access the SQL database (default to jans ). CN_SQL_DB_DIALECT : Dialect name of the SQL ( mysql for MySQL or pgsql for PostgreSQL; default to mysql ). CN_SQL_DB_TIMEZONE : Timezone used by the SQL database (default to UTC ). CN_SQL_DB_SCHEMA : Schema name used by SQL database (default to empty-string; if using MySQL, the schema name will be resolved as the database name, whereas in PostgreSQL the schema name will be resolved as \"public\" ). CN_AWS_SECRETS_ENDPOINT_URL : The URL of AWS secretsmanager service (if omitted, will use the one in specified region). CN_AWS_SECRETS_PREFIX : The prefix name of the secrets (default to jans ). CN_AWS_SECRETS_REPLICA_FILE : The location of file contains replica regions definition (if any). This file is mostly used in primary region. Example of contents of the file: [{\"Region\": \"us-west-1\"}] . AWS_DEFAULT_REGION : The default AWS Region to use, for example, us-west-1 or us-west-2 . AWS_SHARED_CREDENTIALS_FILE : The location of the shared credentials file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_CONFIG_FILE : The location of the config file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_PROFILE : The default profile to use, if any. Configure app loggers # App loggers can be configured to define where the logs will be redirected and what is the level the logs should be displayed. Supported redirect target: STDOUT FILE Supported level: FATAL ERROR WARN INFO DEBUG TRACE The following key-value pairs are the defaults: { \"scim_log_target\" : \"STDOUT\" , \"scim_log_level\" : \"INFO\" , \"persistence_log_target\" : \"FILE\" , \"persistence_log_level\" : \"INFO\" , \"persistence_duration_log_target\" : \"FILE\" , \"persistence_duration_log_level\" : \"INFO\" , \"ldap_stats_log_target\" : \"FILE\" , \"ldap_stats_log_level\" : \"INFO\" , \"script_log_target\" : \"FILE\" , \"script_log_level\" : \"INFO\" } To enable prefix on STDOUT logging, set the enable_stdout_log_prefix key. Example: {\"scim_log_target\":\"STDOUT\",\"persistence_log_target\":\"STDOUT\",\"enable_stdout_log_prefix\":true} Hybrid mapping # As per v1.0.1, hybrid persistence supports all available persistence types. To configure hybrid persistence and its data mapping, follow steps below: Set CN_PERSISTENCE_TYPE environment variable to hybrid Set CN_HYBRID_MAPPING with the following format: { \"default\": \"<couchbase|ldap|spanner|sql>\", \"user\": \"<couchbase|ldap|spanner|sql>\", \"site\": \"<couchbase|ldap|spanner|sql>\", \"cache\": \"<couchbase|ldap|spanner|sql>\", \"token\": \"<couchbase|ldap|spanner|sql>\", \"session\": \"<couchbase|ldap|spanner|sql>\", } Example: { \"default\": \"sql\", \"user\": \"spanner\", \"site\": \"ldap\", \"cache\": \"sql\", \"token\": \"couchbase\", \"session\": \"spanner\", } Exposing metrics # As per v1.0.1, certain metrics can be exposed via Prometheus JMX exporter. To expose the metrics, set the CN_PROMETHEUS_PORT environment variable, i.e. CN_PROMETHEUS_PORT=9093 . Afterwards, metrics can be scraped by Prometheus or accessed manually by making request to /metrics URL, i.e. http://container:9093/metrics . Note that Prometheus JMX exporter uses pre-defined config file (see conf/prometheus-config.yaml ). To customize the config, mount custom config file to /opt/prometheus/prometheus-config.yaml inside the container.","title":"SCIM"},{"location":"admin/reference/kubernetes/docker-jans-scim/#overview","text":"Docker image packaging for SCIM.","title":"Overview"},{"location":"admin/reference/kubernetes/docker-jans-scim/#versions","text":"See Packages for available versions.","title":"Versions"},{"location":"admin/reference/kubernetes/docker-jans-scim/#environment-variables","text":"The following environment variables are supported by the container: CN_CONFIG_ADAPTER : The config backend adapter, can be consul (default) or kubernetes . CN_CONFIG_CONSUL_HOST : hostname or IP of Consul (default to localhost ). CN_CONFIG_CONSUL_PORT : port of Consul (default to 8500 ). CN_CONFIG_CONSUL_CONSISTENCY : Consul consistency mode (choose one of default , consistent , or stale ). Default to stale mode. CN_CONFIG_CONSUL_SCHEME : supported Consul scheme ( http or https ). CN_CONFIG_CONSUL_VERIFY : whether to verify cert or not (default to false ). CN_CONFIG_CONSUL_CACERT_FILE : path to Consul CA cert file (default to /etc/certs/consul_ca.crt ). This file will be used if it exists and CN_CONFIG_CONSUL_VERIFY set to true . CN_CONFIG_CONSUL_CERT_FILE : path to Consul cert file (default to /etc/certs/consul_client.crt ). CN_CONFIG_CONSUL_KEY_FILE : path to Consul key file (default to /etc/certs/consul_client.key ). CN_CONFIG_CONSUL_TOKEN_FILE : path to file contains ACL token (default to /etc/certs/consul_token ). CN_CONFIG_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_CONFIG_KUBERNETES_CONFIGMAP : Kubernetes configmaps name (default to jans ). CN_CONFIG_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_SECRET_ADAPTER : The secrets' adapter, can be vault (default), kubernetes , or google . CN_SECRET_VAULT_SCHEME : supported Vault scheme ( http or https ). CN_SECRET_VAULT_HOST : hostname or IP of Vault (default to localhost ). CN_SECRET_VAULT_PORT : port of Vault (default to 8200 ). CN_SECRET_VAULT_VERIFY : whether to verify cert or not (default to false ). CN_SECRET_VAULT_ROLE_ID_FILE : path to file contains Vault AppRole role ID (default to /etc/certs/vault_role_id ). CN_SECRET_VAULT_SECRET_ID_FILE : path to file contains Vault AppRole secret ID (default to /etc/certs/vault_secret_id ). CN_SECRET_VAULT_CERT_FILE : path to Vault cert file (default to /etc/certs/vault_client.crt ). CN_SECRET_VAULT_KEY_FILE : path to Vault key file (default to /etc/certs/vault_client.key ). CN_SECRET_VAULT_CACERT_FILE : path to Vault CA cert file (default to /etc/certs/vault_ca.crt ). This file will be used if it exists and CN_SECRET_VAULT_VERIFY set to true . CN_SECRET_KUBERNETES_NAMESPACE : Kubernetes namespace (default to default ). CN_SECRET_KUBERNETES_SECRET : Kubernetes secrets name (default to jans ). CN_SECRET_KUBERNETES_USE_KUBE_CONFIG : Load credentials from $HOME/.kube/config , only useful for non-container environment (default to false ). CN_WAIT_MAX_TIME : How long the startup \"health checks\" should run (default to 300 seconds). CN_WAIT_SLEEP_DURATION : Delay between startup \"health checks\" (default to 10 seconds). CN_MAX_RAM_PERCENTAGE : Value passed to Java option -XX:MaxRAMPercentage . CN_PERSISTENCE_TYPE : Persistence backend being used (one of ldap , couchbase , or hybrid ; default to ldap ). CN_HYBRID_MAPPING : Specify data mapping for each persistence (default to \"{}\" ). Note this environment only takes effect when CN_PERSISTENCE_TYPE is set to hybrid . See hybrid mapping section for details. CN_LDAP_URL : Address and port of LDAP server (default to localhost:1636 ). CN_LDAP_USE_SSL : Whether to use SSL connection to LDAP server (default to true ). CN_COUCHBASE_URL : Address of Couchbase server (default to localhost ). CN_COUCHBASE_USER : Username of Couchbase server (default to admin ). CN_COUCHBASE_CERT_FILE : Couchbase root certificate location (default to /etc/certs/couchbase.crt ). CN_COUCHBASE_PASSWORD_FILE : Path to file contains Couchbase password (default to /etc/jans/conf/couchbase_password ). CN_COUCHBASE_CONN_TIMEOUT : Connect timeout used when a bucket is opened (default to 10000 milliseconds). CN_COUCHBASE_CONN_MAX_WAIT : Maximum time to wait before retrying connection (default to 20000 milliseconds). CN_COUCHBASE_SCAN_CONSISTENCY : Default scan consistency; one of not_bounded , request_plus , or statement_plus (default to not_bounded ). CN_COUCHBASE_BUCKET_PREFIX : Prefix for Couchbase buckets (default to jans ). CN_COUCHBASE_TRUSTSTORE_ENABLE : Enable truststore for encrypted Couchbase connection (default to true ). CN_COUCHBASE_KEEPALIVE_INTERVAL : Keep-alive interval for Couchbase connection (default to 30000 milliseconds). CN_COUCHBASE_KEEPALIVE_TIMEOUT : Keep-alive timeout for Couchbase connection (default to 2500 milliseconds). CN_JAVA_OPTIONS : Java options passed to entrypoint, i.e. -Xmx1024m (default to empty-string). GOOGLE_APPLICATION_CREDENTIALS : Optional JSON file (contains Google credentials) that can be injected into container for authentication. Refer to https://cloud.google.com/docs/authentication/provide-credentials-adc#how-to for supported credentials. GOOGLE_PROJECT_ID : ID of Google project. CN_GOOGLE_SECRET_VERSION_ID : Janssen secret version ID in Google Secret Manager. Defaults to latest , which is recommended. CN_GOOGLE_SECRET_NAME_PREFIX : Prefix for Janssen secret in Google Secret Manager. Defaults to jans . If left jans-secret secret will be created. CN_GOOGLE_SECRET_MANAGER_PASSPHRASE : Passphrase for Janssen secret in Google Secret Manager. This is recommended to be changed and defaults to secret . CN_SCIM_APP_LOGGERS : Custom logging configuration in JSON-string format with hash type (see Configure app loggers section for details). CN_PROMETHEUS_PORT : Port used by Prometheus JMX agent (default to empty string). To enable Prometheus JMX agent, set the value to a number. See Exposing metrics for details. CN_SQL_DB_HOST : Hostname of the SQL database (default to localhost ). CN_SQL_DB_PORT : Port of the SQL database (default to 3306 for MySQL). CN_SQL_DB_NAME : SQL database name (default to jans ). CN_SQL_DB_USER : User name to access the SQL database (default to jans ). CN_SQL_DB_DIALECT : Dialect name of the SQL ( mysql for MySQL or pgsql for PostgreSQL; default to mysql ). CN_SQL_DB_TIMEZONE : Timezone used by the SQL database (default to UTC ). CN_SQL_DB_SCHEMA : Schema name used by SQL database (default to empty-string; if using MySQL, the schema name will be resolved as the database name, whereas in PostgreSQL the schema name will be resolved as \"public\" ). CN_AWS_SECRETS_ENDPOINT_URL : The URL of AWS secretsmanager service (if omitted, will use the one in specified region). CN_AWS_SECRETS_PREFIX : The prefix name of the secrets (default to jans ). CN_AWS_SECRETS_REPLICA_FILE : The location of file contains replica regions definition (if any). This file is mostly used in primary region. Example of contents of the file: [{\"Region\": \"us-west-1\"}] . AWS_DEFAULT_REGION : The default AWS Region to use, for example, us-west-1 or us-west-2 . AWS_SHARED_CREDENTIALS_FILE : The location of the shared credentials file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_CONFIG_FILE : The location of the config file used by the client (see https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html). AWS_PROFILE : The default profile to use, if any.","title":"Environment Variables"},{"location":"admin/reference/kubernetes/docker-jans-scim/#configure-app-loggers","text":"App loggers can be configured to define where the logs will be redirected and what is the level the logs should be displayed. Supported redirect target: STDOUT FILE Supported level: FATAL ERROR WARN INFO DEBUG TRACE The following key-value pairs are the defaults: { \"scim_log_target\" : \"STDOUT\" , \"scim_log_level\" : \"INFO\" , \"persistence_log_target\" : \"FILE\" , \"persistence_log_level\" : \"INFO\" , \"persistence_duration_log_target\" : \"FILE\" , \"persistence_duration_log_level\" : \"INFO\" , \"ldap_stats_log_target\" : \"FILE\" , \"ldap_stats_log_level\" : \"INFO\" , \"script_log_target\" : \"FILE\" , \"script_log_level\" : \"INFO\" } To enable prefix on STDOUT logging, set the enable_stdout_log_prefix key. Example: {\"scim_log_target\":\"STDOUT\",\"persistence_log_target\":\"STDOUT\",\"enable_stdout_log_prefix\":true}","title":"Configure app loggers"},{"location":"admin/reference/kubernetes/docker-jans-scim/#hybrid-mapping","text":"As per v1.0.1, hybrid persistence supports all available persistence types. To configure hybrid persistence and its data mapping, follow steps below: Set CN_PERSISTENCE_TYPE environment variable to hybrid Set CN_HYBRID_MAPPING with the following format: { \"default\": \"<couchbase|ldap|spanner|sql>\", \"user\": \"<couchbase|ldap|spanner|sql>\", \"site\": \"<couchbase|ldap|spanner|sql>\", \"cache\": \"<couchbase|ldap|spanner|sql>\", \"token\": \"<couchbase|ldap|spanner|sql>\", \"session\": \"<couchbase|ldap|spanner|sql>\", } Example: { \"default\": \"sql\", \"user\": \"spanner\", \"site\": \"ldap\", \"cache\": \"sql\", \"token\": \"couchbase\", \"session\": \"spanner\", }","title":"Hybrid mapping"},{"location":"admin/reference/kubernetes/docker-jans-scim/#exposing-metrics","text":"As per v1.0.1, certain metrics can be exposed via Prometheus JMX exporter. To expose the metrics, set the CN_PROMETHEUS_PORT environment variable, i.e. CN_PROMETHEUS_PORT=9093 . Afterwards, metrics can be scraped by Prometheus or accessed manually by making request to /metrics URL, i.e. http://container:9093/metrics . Note that Prometheus JMX exporter uses pre-defined config file (see conf/prometheus-config.yaml ). To customize the config, mount custom config file to /opt/prometheus/prometheus-config.yaml inside the container.","title":"Exposing metrics"},{"location":"admin/reference/kubernetes/docker-opendj/","text":"","title":"Gluu OpenDJ"},{"location":"admin/reference/kubernetes/helm-chart/","tags":["administration","reference","kubernetes"],"text":"janssen # Janssen Access and Identity Management Homepage: https://jans.io Maintainers # Name Email Url moabu support@jans.io Source Code # https://jans.io https://github.com/JanssenProject/jans/charts/janssen Requirements # Kubernetes: >=v1.21.0-0 Repository Name Version auth-server 1.0.16 auth-server-key-rotation 1.0.16 config 1.0.16 config-api 1.0.16 fido2 1.0.16 link 1.0.16 nginx-ingress 1.0.16 opendj 1.0.16 persistence 1.0.16 scim 1.0.16 Values # Key Type Default Description auth-server object {\"additionalAnnotations\":{},\"additionalLabels\":{},\"dnsConfig\":{},\"dnsPolicy\":\"\",\"hpa\":{\"behavior\":{},\"enabled\":true,\"maxReplicas\":10,\"metrics\":[],\"minReplicas\":1,\"targetCPUUtilizationPercentage\":50},\"image\":{\"pullPolicy\":\"IfNotPresent\",\"pullSecrets\":[],\"repository\":\"ghcr.io/janssenproject/jans/auth-server\",\"tag\":\"1.0.16-1\"},\"lifecycle\":{},\"livenessProbe\":{\"exec\":{\"command\":[\"python3\",\"/app/scripts/healthcheck.py\"]},\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":5},\"pdb\":{\"enabled\":true,\"maxUnavailable\":\"90%\"},\"readinessProbe\":{\"exec\":{\"command\":[\"python3\",\"/app/scripts/healthcheck.py\"]},\"initialDelaySeconds\":25,\"periodSeconds\":25,\"timeoutSeconds\":5},\"replicas\":1,\"resources\":{\"limits\":{\"cpu\":\"2500m\",\"memory\":\"2500Mi\"},\"requests\":{\"cpu\":\"2500m\",\"memory\":\"2500Mi\"}},\"topologySpreadConstraints\":{},\"usrEnvs\":{\"normal\":{},\"secret\":{}},\"volumeMounts\":[],\"volumes\":[]} OAuth Authorization Server, the OpenID Connect Provider, the UMA Authorization Server--this is the main Internet facing component of Janssen. It's the service that returns tokens, JWT's and identity assertions. This service must be Internet facing. auth-server-key-rotation object {\"additionalAnnotations\":{},\"additionalLabels\":{},\"dnsConfig\":{},\"dnsPolicy\":\"\",\"image\":{\"pullPolicy\":\"IfNotPresent\",\"pullSecrets\":[],\"repository\":\"ghcr.io/janssenproject/jans/certmanager\",\"tag\":\"1.0.16-1\"},\"keysLife\":48,\"keysPushDelay\":0,\"keysPushStrategy\":\"NEWER\",\"keysStrategy\":\"NEWER\",\"lifecycle\":{},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"}},\"usrEnvs\":{\"normal\":{},\"secret\":{}},\"volumeMounts\":[],\"volumes\":[]} Responsible for regenerating auth-keys per x hours auth-server-key-rotation.additionalAnnotations object {} Additional annotations that will be added across the gateway in the format of auth-server-key-rotation.additionalLabels object {} Additional labels that will be added across the gateway in the format of auth-server-key-rotation.dnsConfig object {} Add custom dns config auth-server-key-rotation.dnsPolicy string \"\" Add custom dns policy auth-server-key-rotation.image.pullPolicy string \"IfNotPresent\" Image pullPolicy to use for deploying. auth-server-key-rotation.image.pullSecrets list [] Image Pull Secrets auth-server-key-rotation.image.repository string \"ghcr.io/janssenproject/jans/certmanager\" Image to use for deploying. auth-server-key-rotation.image.tag string \"1.0.16-1\" Image tag to use for deploying. auth-server-key-rotation.keysLife int 48 Auth server key rotation keys life in hours auth-server-key-rotation.keysPushDelay int 0 Delay (in seconds) before pushing private keys to Auth server auth-server-key-rotation.keysPushStrategy string \"NEWER\" Set key selection strategy after pushing private keys to Auth server (only takes effect when keysPushDelay value is greater than 0) auth-server-key-rotation.keysStrategy string \"NEWER\" Set key selection strategy used by Auth server auth-server-key-rotation.resources object {\"limits\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"}} Resource specs. auth-server-key-rotation.resources.limits.cpu string \"300m\" CPU limit. auth-server-key-rotation.resources.limits.memory string \"300Mi\" Memory limit. auth-server-key-rotation.resources.requests.cpu string \"300m\" CPU request. auth-server-key-rotation.resources.requests.memory string \"300Mi\" Memory request. auth-server-key-rotation.usrEnvs object {\"normal\":{},\"secret\":{}} Add custom normal and secret envs to the service auth-server-key-rotation.usrEnvs.normal object {} Add custom normal envs to the service variable1: value1 auth-server-key-rotation.usrEnvs.secret object {} Add custom secret envs to the service variable1: value1 auth-server-key-rotation.volumeMounts list [] Configure any additional volumesMounts that need to be attached to the containers auth-server-key-rotation.volumes list [] Configure any additional volumes that need to be attached to the pod auth-server.additionalAnnotations object {} Additional annotations that will be added across the gateway in the format of auth-server.additionalLabels object {} Additional labels that will be added across the gateway in the format of auth-server.dnsConfig object {} Add custom dns config auth-server.dnsPolicy string \"\" Add custom dns policy auth-server.hpa object {\"behavior\":{},\"enabled\":true,\"maxReplicas\":10,\"metrics\":[],\"minReplicas\":1,\"targetCPUUtilizationPercentage\":50} Configure the HorizontalPodAutoscaler auth-server.hpa.behavior object {} Scaling Policies auth-server.hpa.metrics list [] metrics if targetCPUUtilizationPercentage is not set auth-server.image.pullPolicy string \"IfNotPresent\" Image pullPolicy to use for deploying. auth-server.image.pullSecrets list [] Image Pull Secrets auth-server.image.repository string \"ghcr.io/janssenproject/jans/auth-server\" Image to use for deploying. auth-server.image.tag string \"1.0.16-1\" Image tag to use for deploying. auth-server.livenessProbe object {\"exec\":{\"command\":[\"python3\",\"/app/scripts/healthcheck.py\"]},\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":5} Configure the liveness healthcheck for the auth server if needed. auth-server.livenessProbe.exec object {\"command\":[\"python3\",\"/app/scripts/healthcheck.py\"]} Executes the python3 healthcheck. https://github.com/JanssenProject/docker-jans-auth-server/blob/master/scripts/healthcheck.py auth-server.pdb object {\"enabled\":true,\"maxUnavailable\":\"90%\"} Configure the PodDisruptionBudget auth-server.readinessProbe object {\"exec\":{\"command\":[\"python3\",\"/app/scripts/healthcheck.py\"]},\"initialDelaySeconds\":25,\"periodSeconds\":25,\"timeoutSeconds\":5} Configure the readiness healthcheck for the auth server if needed. https://github.com/JanssenProject/docker-jans-auth-server/blob/master/scripts/healthcheck.py auth-server.replicas int 1 Service replica number. auth-server.resources object {\"limits\":{\"cpu\":\"2500m\",\"memory\":\"2500Mi\"},\"requests\":{\"cpu\":\"2500m\",\"memory\":\"2500Mi\"}} Resource specs. auth-server.resources.limits.cpu string \"2500m\" CPU limit. auth-server.resources.limits.memory string \"2500Mi\" Memory limit. auth-server.resources.requests.cpu string \"2500m\" CPU request. auth-server.resources.requests.memory string \"2500Mi\" Memory request. auth-server.topologySpreadConstraints object {} Configure the topology spread constraints. Notice this is a map NOT a list as in the upstream API https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/ auth-server.usrEnvs object {\"normal\":{},\"secret\":{}} Add custom normal and secret envs to the service auth-server.usrEnvs.normal object {} Add custom normal envs to the service variable1: value1 auth-server.usrEnvs.secret object {} Add custom secret envs to the service variable1: value1 auth-server.volumeMounts list [] Configure any additional volumesMounts that need to be attached to the containers auth-server.volumes list [] Configure any additional volumes that need to be attached to the pod config object {\"additionalAnnotations\":{},\"additionalLabels\":{},\"adminPassword\":\"Test1234#\",\"city\":\"Austin\",\"configmap\":{\"cnAwsAccessKeyId\":\"\",\"cnAwsDefaultRegion\":\"us-west-1\",\"cnAwsProfile\":\"janssen\",\"cnAwsSecretAccessKey\":\"\",\"cnAwsSecretsEndpointUrl\":\"\",\"cnAwsSecretsNamePrefix\":\"janssen\",\"cnAwsSecretsReplicaRegions\":[],\"cnCacheType\":\"NATIVE_PERSISTENCE\",\"cnConfigKubernetesConfigMap\":\"cn\",\"cnCouchbaseBucketPrefix\":\"jans\",\"cnCouchbaseCrt\":\"SWFtTm90YVNlcnZpY2VBY2NvdW50Q2hhbmdlTWV0b09uZQo=\",\"cnCouchbaseIndexNumReplica\":0,\"cnCouchbasePassword\":\"P@ssw0rd\",\"cnCouchbaseSuperUser\":\"admin\",\"cnCouchbaseSuperUserPassword\":\"Test1234#\",\"cnCouchbaseUrl\":\"cbjanssen.default.svc.cluster.local\",\"cnCouchbaseUser\":\"janssen\",\"cnGoogleProjectId\":\"google-project-to-save-config-and-secrets-to\",\"cnGoogleSecretManagerServiceAccount\":\"SWFtTm90YVNlcnZpY2VBY2NvdW50Q2hhbmdlTWV0b09uZQo=\",\"cnGoogleSecretNamePrefix\":\"janssen\",\"cnGoogleSecretVersionId\":\"latest\",\"cnGoogleSpannerDatabaseId\":\"\",\"cnGoogleSpannerInstanceId\":\"\",\"cnJettyRequestHeaderSize\":8192,\"cnLdapUrl\":\"opendj:1636\",\"cnMaxRamPercent\":\"75.0\",\"cnPersistenceHybridMapping\":\"{}\",\"cnRedisSentinelGroup\":\"\",\"cnRedisSslTruststore\":\"\",\"cnRedisType\":\"STANDALONE\",\"cnRedisUrl\":\"redis.redis.svc.cluster.local:6379\",\"cnRedisUseSsl\":false,\"cnScimProtectionMode\":\"OAUTH\",\"cnSecretKubernetesSecret\":\"cn\",\"cnSqlDbDialect\":\"mysql\",\"cnSqlDbHost\":\"my-release-mysql.default.svc.cluster.local\",\"cnSqlDbName\":\"jans\",\"cnSqlDbPort\":3306,\"cnSqlDbSchema\":\"\",\"cnSqlDbTimezone\":\"UTC\",\"cnSqlDbUser\":\"jans\",\"cnSqldbUserPassword\":\"Test1234#\",\"lbAddr\":\"\"},\"countryCode\":\"US\",\"dnsConfig\":{},\"dnsPolicy\":\"\",\"email\":\"support@jans.io\",\"image\":{\"pullSecrets\":[],\"repository\":\"ghcr.io/janssenproject/jans/configurator\",\"tag\":\"1.0.16-1\"},\"ldapPassword\":\"P@ssw0rds\",\"lifecycle\":{},\"orgName\":\"Janssen\",\"redisPassword\":\"P@assw0rd\",\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"}},\"state\":\"TX\",\"usrEnvs\":{\"normal\":{},\"secret\":{}},\"volumeMounts\":[],\"volumes\":[]} Configuration parameters for setup and initial configuration secret and config layers used by Janssen services. config-api object {\"additionalAnnotations\":{},\"additionalLabels\":{},\"dnsConfig\":{},\"dnsPolicy\":\"\",\"hpa\":{\"behavior\":{},\"enabled\":true,\"maxReplicas\":10,\"metrics\":[],\"minReplicas\":1,\"targetCPUUtilizationPercentage\":50},\"image\":{\"pullPolicy\":\"IfNotPresent\",\"pullSecrets\":[],\"repository\":\"ghcr.io/janssenproject/jans/config-api\",\"tag\":\"1.0.16-1\"},\"lifecycle\":{},\"livenessProbe\":{\"httpGet\":{\"path\":\"/jans-config-api/api/v1/health/live\",\"port\":8074},\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":5},\"pdb\":{\"enabled\":true,\"maxUnavailable\":\"90%\"},\"readinessProbe\":{\"httpGet\":{\"path\":\"jans-config-api/api/v1/health/ready\",\"port\":8074},\"initialDelaySeconds\":25,\"periodSeconds\":25,\"timeoutSeconds\":5},\"replicas\":1,\"resources\":{\"limits\":{\"cpu\":\"1000m\",\"memory\":\"1000Mi\"},\"requests\":{\"cpu\":\"1000m\",\"memory\":\"1000Mi\"}},\"topologySpreadConstraints\":{},\"usrEnvs\":{\"normal\":{},\"secret\":{}},\"volumeMounts\":[],\"volumes\":[]} Config Api endpoints can be used to configure the auth-server, which is an open-source OpenID Connect Provider (OP) and UMA Authorization Server (AS). config-api.additionalAnnotations object {} Additional annotations that will be added across the gateway in the format of config-api.additionalLabels object {} Additional labels that will be added across the gateway in the format of config-api.dnsConfig object {} Add custom dns config config-api.dnsPolicy string \"\" Add custom dns policy config-api.hpa object {\"behavior\":{},\"enabled\":true,\"maxReplicas\":10,\"metrics\":[],\"minReplicas\":1,\"targetCPUUtilizationPercentage\":50} Configure the HorizontalPodAutoscaler config-api.hpa.behavior object {} Scaling Policies config-api.hpa.metrics list [] metrics if targetCPUUtilizationPercentage is not set config-api.image.pullPolicy string \"IfNotPresent\" Image pullPolicy to use for deploying. config-api.image.pullSecrets list [] Image Pull Secrets config-api.image.repository string \"ghcr.io/janssenproject/jans/config-api\" Image to use for deploying. config-api.image.tag string \"1.0.16-1\" Image tag to use for deploying. config-api.livenessProbe object {\"httpGet\":{\"path\":\"/jans-config-api/api/v1/health/live\",\"port\":8074},\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":5} Configure the liveness healthcheck for the auth server if needed. config-api.livenessProbe.httpGet object {\"path\":\"/jans-config-api/api/v1/health/live\",\"port\":8074} http liveness probe endpoint config-api.pdb object {\"enabled\":true,\"maxUnavailable\":\"90%\"} Configure the PodDisruptionBudget config-api.readinessProbe.httpGet object {\"path\":\"jans-config-api/api/v1/health/ready\",\"port\":8074} http readiness probe endpoint config-api.replicas int 1 Service replica number. config-api.resources object {\"limits\":{\"cpu\":\"1000m\",\"memory\":\"1000Mi\"},\"requests\":{\"cpu\":\"1000m\",\"memory\":\"1000Mi\"}} Resource specs. config-api.resources.limits.cpu string \"1000m\" CPU limit. config-api.resources.limits.memory string \"1000Mi\" Memory limit. config-api.resources.requests.cpu string \"1000m\" CPU request. config-api.resources.requests.memory string \"1000Mi\" Memory request. config-api.topologySpreadConstraints object {} Configure the topology spread constraints. Notice this is a map NOT a list as in the upstream API https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/ config-api.usrEnvs object {\"normal\":{},\"secret\":{}} Add custom normal and secret envs to the service config-api.usrEnvs.normal object {} Add custom normal envs to the service variable1: value1 config-api.usrEnvs.secret object {} Add custom secret envs to the service variable1: value1 config-api.volumeMounts list [] Configure any additional volumesMounts that need to be attached to the containers config-api.volumes list [] Configure any additional volumes that need to be attached to the pod config.additionalAnnotations object {} Additional annotations that will be added across the gateway in the format of config.adminPassword string \"Test1234#\" Admin password to log in to the UI. config.city string \"Austin\" City. Used for certificate creation. config.configmap.cnCacheType string \"NATIVE_PERSISTENCE\" Cache type. NATIVE_PERSISTENCE , REDIS . or IN_MEMORY . Defaults to NATIVE_PERSISTENCE . config.configmap.cnConfigKubernetesConfigMap string \"cn\" The name of the Kubernetes ConfigMap that will hold the configuration layer config.configmap.cnCouchbaseBucketPrefix string \"jans\" The prefix of couchbase buckets. This helps with separation in between different environments and allows for the same couchbase cluster to be used by different setups of Janssen. config.configmap.cnCouchbaseCrt string \"SWFtTm90YVNlcnZpY2VBY2NvdW50Q2hhbmdlTWV0b09uZQo=\" Couchbase certificate authority string. This must be encoded using base64. This can also be found in your couchbase UI Security > Root Certificate. In mTLS setups this is not required. config.configmap.cnCouchbaseIndexNumReplica int 0 The number of replicas per index created. Please note that the number of index nodes must be one greater than the number of index replicas. That means if your couchbase cluster only has 2 index nodes you cannot place the number of replicas to be higher than 1. config.configmap.cnCouchbasePassword string \"P@ssw0rd\" Couchbase password for the restricted user config.configmap.cnCouchbaseUser that is often used inside the services. The password must contain one digit, one uppercase letter, one lower case letter and one symbol . config.configmap.cnCouchbaseSuperUser string \"admin\" The Couchbase super user (admin) username. This user is used during initialization only. config.configmap.cnCouchbaseSuperUserPassword string \"Test1234#\" Couchbase password for the superuser config.configmap.cnCouchbaseSuperUser that is used during the initialization process. The password must contain one digit, one uppercase letter, one lower case letter and one symbol config.configmap.cnCouchbaseUrl string \"cbjanssen.default.svc.cluster.local\" Couchbase URL. Used only when global.cnPersistenceType is hybrid or couchbase. This should be in FQDN format for either remote or local Couchbase clusters. The address can be an internal address inside the kubernetes cluster config.configmap.cnCouchbaseUser string \"janssen\" Couchbase restricted user. Used only when global.cnPersistenceType is hybrid or couchbase. config.configmap.cnGoogleProjectId string \"google-project-to-save-config-and-secrets-to\" Project id of the Google project the secret manager belongs to. Used only when global.configAdapterName and global.configSecretAdapter is set to google. config.configmap.cnGoogleSecretManagerServiceAccount string \"SWFtTm90YVNlcnZpY2VBY2NvdW50Q2hhbmdlTWV0b09uZQo=\" Service account with roles roles/secretmanager.admin base64 encoded string. This is used often inside the services to reach the configuration layer. Used only when global.configAdapterName and global.configSecretAdapter is set to google. config.configmap.cnGoogleSecretNamePrefix string \"janssen\" Prefix for Janssen secret in Google Secret Manager. Defaults to janssen. If left janssen-secret secret will be created. Used only when global.configAdapterName and global.configSecretAdapter is set to google. config.configmap.cnGoogleSecretVersionId string \"latest\" Secret version to be used for secret configuration. Defaults to latest and should normally always stay that way. Used only when global.configAdapterName and global.configSecretAdapter is set to google. config.configmap.cnGoogleSpannerDatabaseId string \"\" Google Spanner Database ID. Used only when global.cnPersistenceType is spanner. config.configmap.cnGoogleSpannerInstanceId string \"\" Google Spanner ID. Used only when global.cnPersistenceType is spanner. config.configmap.cnJettyRequestHeaderSize int 8192 Jetty header size in bytes in the auth server config.configmap.cnLdapUrl string \"opendj:1636\" OpenDJ internal address. Leave as default. Used when global.cnPersistenceType is set to ldap . config.configmap.cnMaxRamPercent string \"75.0\" Value passed to Java option -XX:MaxRAMPercentage config.configmap.cnPersistenceHybridMapping string \"{}\" Specify data that should be saved in LDAP (one of default, user, cache, site, token, or session; default to default). Note this environment only takes effect when global.cnPersistenceType is set to hybrid . { \"default\": \"<couchbase config.configmap.cnRedisSentinelGroup string \"\" Redis Sentinel Group. Often set when config.configmap.cnRedisType is set to SENTINEL . Can be used when config.configmap.cnCacheType is set to REDIS . config.configmap.cnRedisSslTruststore string \"\" Redis SSL truststore. Optional. Can be used when config.configmap.cnCacheType is set to REDIS . config.configmap.cnRedisType string \"STANDALONE\" Redis service type. STANDALONE or CLUSTER . Can be used when config.configmap.cnCacheType is set to REDIS . config.configmap.cnRedisUrl string \"redis.redis.svc.cluster.local:6379\" Redis URL and port number : . Can be used when config.configmap.cnCacheType is set to REDIS . config.configmap.cnRedisUseSsl bool false Boolean to use SSL in Redis. Can be used when config.configmap.cnCacheType is set to REDIS . config.configmap.cnScimProtectionMode string \"OAUTH\" SCIM protection mode OAUTH config.configmap.cnSecretKubernetesSecret string \"cn\" Kubernetes secret name holding configuration keys. Used when global.configSecretAdapter is set to kubernetes which is the default. config.configmap.cnSqlDbDialect string \"mysql\" SQL database dialect. mysql or pgsql config.configmap.cnSqlDbHost string \"my-release-mysql.default.svc.cluster.local\" SQL database host uri. config.configmap.cnSqlDbName string \"jans\" SQL database name. config.configmap.cnSqlDbPort int 3306 SQL database port. config.configmap.cnSqlDbSchema string \"\" Schema name used by SQL database (default to empty-string; if using MySQL, the schema name will be resolved as the database name, whereas in PostgreSQL the schema name will be resolved as \"public\" ). config.configmap.cnSqlDbTimezone string \"UTC\" SQL database timezone. config.configmap.cnSqlDbUser string \"jans\" SQL database username. config.configmap.cnSqldbUserPassword string \"Test1234#\" SQL password injected the secrets . config.configmap.lbAddr string \"\" Load balancer address for AWS if the FQDN is not registered. config.countryCode string \"US\" Country code. Used for certificate creation. config.dnsConfig object {} Add custom dns config config.dnsPolicy string \"\" Add custom dns policy config.email string \"support@jans.io\" Email address of the administrator usually. Used for certificate creation. config.image.pullSecrets list [] Image Pull Secrets config.image.repository string \"ghcr.io/janssenproject/jans/configurator\" Image to use for deploying. config.image.tag string \"1.0.16-1\" Image tag to use for deploying. config.ldapPassword string \"P@ssw0rds\" LDAP admin password if OpenDJ is used for persistence. config.orgName string \"Janssen\" Organization name. Used for certificate creation. config.redisPassword string \"P@assw0rd\" Redis admin password if config.configmap.cnCacheType is set to REDIS . config.resources object {\"limits\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"}} Resource specs. config.resources.limits.cpu string \"300m\" CPU limit. config.resources.limits.memory string \"300Mi\" Memory limit. config.resources.requests.cpu string \"300m\" CPU request. config.resources.requests.memory string \"300Mi\" Memory request. config.state string \"TX\" State code. Used for certificate creation. config.usrEnvs object {\"normal\":{},\"secret\":{}} Add custom normal and secret envs to the service. config.usrEnvs.normal object {} Add custom normal envs to the service. variable1: value1 config.usrEnvs.secret object {} Add custom secret envs to the service. variable1: value1 config.volumeMounts list [] Configure any additional volumesMounts that need to be attached to the containers config.volumes list [] Configure any additional volumes that need to be attached to the pod fido2 object {\"additionalAnnotations\":{},\"additionalLabels\":{},\"dnsConfig\":{},\"dnsPolicy\":\"\",\"hpa\":{\"behavior\":{},\"enabled\":true,\"maxReplicas\":10,\"metrics\":[],\"minReplicas\":1,\"targetCPUUtilizationPercentage\":50},\"image\":{\"pullPolicy\":\"IfNotPresent\",\"pullSecrets\":[],\"repository\":\"ghcr.io/janssenproject/jans/fido2\",\"tag\":\"1.0.16-1\"},\"lifecycle\":{},\"livenessProbe\":{\"httpGet\":{\"path\":\"/jans-fido2/sys/health-check\",\"port\":\"http-fido2\"},\"initialDelaySeconds\":25,\"periodSeconds\":25,\"timeoutSeconds\":5},\"pdb\":{\"enabled\":true,\"maxUnavailable\":\"90%\"},\"readinessProbe\":{\"httpGet\":{\"path\":\"/jans-fido2/sys/health-check\",\"port\":\"http-fido2\"},\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":5},\"replicas\":1,\"resources\":{\"limits\":{\"cpu\":\"500m\",\"memory\":\"500Mi\"},\"requests\":{\"cpu\":\"500m\",\"memory\":\"500Mi\"}},\"service\":{\"name\":\"http-fido2\",\"port\":8080},\"topologySpreadConstraints\":{},\"usrEnvs\":{\"normal\":{},\"secret\":{}},\"volumeMounts\":[],\"volumes\":[]} FIDO 2.0 (FIDO2) is an open authentication standard that enables leveraging common devices to authenticate to online services in both mobile and desktop environments. fido2.additionalAnnotations object {} Additional annotations that will be added across the gateway in the format of fido2.additionalLabels object {} Additional labels that will be added across the gateway in the format of fido2.dnsConfig object {} Add custom dns config fido2.dnsPolicy string \"\" Add custom dns policy fido2.hpa object {\"behavior\":{},\"enabled\":true,\"maxReplicas\":10,\"metrics\":[],\"minReplicas\":1,\"targetCPUUtilizationPercentage\":50} Configure the HorizontalPodAutoscaler fido2.hpa.behavior object {} Scaling Policies fido2.hpa.metrics list [] metrics if targetCPUUtilizationPercentage is not set fido2.image.pullPolicy string \"IfNotPresent\" Image pullPolicy to use for deploying. fido2.image.pullSecrets list [] Image Pull Secrets fido2.image.repository string \"ghcr.io/janssenproject/jans/fido2\" Image to use for deploying. fido2.image.tag string \"1.0.16-1\" Image tag to use for deploying. fido2.livenessProbe object {\"httpGet\":{\"path\":\"/jans-fido2/sys/health-check\",\"port\":\"http-fido2\"},\"initialDelaySeconds\":25,\"periodSeconds\":25,\"timeoutSeconds\":5} Configure the liveness healthcheck for the fido2 if needed. fido2.livenessProbe.httpGet object {\"path\":\"/jans-fido2/sys/health-check\",\"port\":\"http-fido2\"} http liveness probe endpoint fido2.pdb object {\"enabled\":true,\"maxUnavailable\":\"90%\"} Configure the PodDisruptionBudget fido2.readinessProbe object {\"httpGet\":{\"path\":\"/jans-fido2/sys/health-check\",\"port\":\"http-fido2\"},\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":5} Configure the readiness healthcheck for the fido2 if needed. fido2.replicas int 1 Service replica number. fido2.resources object {\"limits\":{\"cpu\":\"500m\",\"memory\":\"500Mi\"},\"requests\":{\"cpu\":\"500m\",\"memory\":\"500Mi\"}} Resource specs. fido2.resources.limits.cpu string \"500m\" CPU limit. fido2.resources.limits.memory string \"500Mi\" Memory limit. fido2.resources.requests.cpu string \"500m\" CPU request. fido2.resources.requests.memory string \"500Mi\" Memory request. fido2.service.name string \"http-fido2\" The name of the fido2 port within the fido2 service. Please keep it as default. fido2.service.port int 8080 Port of the fido2 service. Please keep it as default. fido2.topologySpreadConstraints object {} Configure the topology spread constraints. Notice this is a map NOT a list as in the upstream API https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/ fido2.usrEnvs object {\"normal\":{},\"secret\":{}} Add custom normal and secret envs to the service fido2.usrEnvs.normal object {} Add custom normal envs to the service variable1: value1 fido2.usrEnvs.secret object {} Add custom secret envs to the service variable1: value1 fido2.volumeMounts list [] Configure any additional volumesMounts that need to be attached to the containers fido2.volumes list [] Configure any additional volumes that need to be attached to the pod global object {\"alb\":{\"ingress\":false},\"auth-server\":{\"appLoggers\":{\"auditStatsLogLevel\":\"INFO\",\"auditStatsLogTarget\":\"FILE\",\"authLogLevel\":\"INFO\",\"authLogTarget\":\"STDOUT\",\"enableStdoutLogPrefix\":\"true\",\"httpLogLevel\":\"INFO\",\"httpLogTarget\":\"FILE\",\"ldapStatsLogLevel\":\"INFO\",\"ldapStatsLogTarget\":\"FILE\",\"persistenceDurationLogLevel\":\"INFO\",\"persistenceDurationLogTarget\":\"FILE\",\"persistenceLogLevel\":\"INFO\",\"persistenceLogTarget\":\"FILE\",\"scriptLogLevel\":\"INFO\",\"scriptLogTarget\":\"FILE\"},\"authEncKeys\":\"RSA1_5 RSA-OAEP\",\"authServerServiceName\":\"auth-server\",\"authSigKeys\":\"RS256 RS384 RS512 ES256 ES384 ES512 PS256 PS384 PS512\",\"enabled\":true,\"ingress\":{\"authServerEnabled\":true,\"deviceCodeEnabled\":true,\"firebaseMessagingEnabled\":true,\"openidConfigEnabled\":true,\"u2fConfigEnabled\":true,\"uma2ConfigEnabled\":true,\"webdiscoveryEnabled\":true,\"webfingerEnabled\":true}},\"auth-server-key-rotation\":{\"enabled\":false},\"awsStorageType\":\"io1\",\"azureStorageAccountType\":\"Standard_LRS\",\"azureStorageKind\":\"Managed\",\"cloud\":{\"testEnviroment\":false},\"cnAwsConfigFile\":\"/etc/jans/conf/aws_config_file\",\"cnAwsSecretsReplicaRegionsFile\":\"/etc/jans/conf/aws_secrets_replica_regions\",\"cnAwsSharedCredentialsFile\":\"/etc/jans/conf/aws_shared_credential_file\",\"cnDocumentStoreType\":\"LOCAL\",\"cnGoogleApplicationCredentials\":\"/etc/jans/conf/google-credentials.json\",\"cnPersistenceType\":\"sql\",\"cnPrometheusPort\":\"\",\"config\":{\"enabled\":true},\"config-api\":{\"appLoggers\":{\"configApiLogLevel\":\"INFO\",\"configApiLogTarget\":\"STDOUT\",\"enableStdoutLogPrefix\":\"true\",\"ldapStatsLogLevel\":\"INFO\",\"ldapStatsLogTarget\":\"FILE\",\"persistenceDurationLogLevel\":\"INFO\",\"persistenceDurationLogTarget\":\"FILE\",\"persistenceLogLevel\":\"INFO\",\"persistenceLogTarget\":\"FILE\",\"scriptLogLevel\":\"INFO\",\"scriptLogTarget\":\"FILE\"},\"configApiServerServiceName\":\"config-api\",\"enabled\":true,\"ingress\":{\"configApiEnabled\":true}},\"configAdapterName\":\"kubernetes\",\"configSecretAdapter\":\"kubernetes\",\"fido2\":{\"appLoggers\":{\"enableStdoutLogPrefix\":\"true\",\"fido2LogLevel\":\"INFO\",\"fido2LogTarget\":\"STDOUT\",\"persistenceDurationLogLevel\":\"INFO\",\"persistenceDurationLogTarget\":\"FILE\",\"persistenceLogLevel\":\"INFO\",\"persistenceLogTarget\":\"FILE\",\"scriptLogLevel\":\"INFO\",\"scriptLogTarget\":\"FILE\"},\"enabled\":true,\"fido2ServiceName\":\"fido2\",\"ingress\":{\"fido2ConfigEnabled\":false}},\"fqdn\":\"demoexample.jans.io\",\"gcePdStorageType\":\"pd-standard\",\"isFqdnRegistered\":false,\"istio\":{\"additionalAnnotations\":{},\"additionalLabels\":{},\"enabled\":false,\"gateways\":[],\"ingress\":false,\"namespace\":\"istio-system\"},\"jobTtlSecondsAfterFinished\":300,\"lbIp\":\"22.22.22.22\",\"link\":{\"appLoggers\":{\"enableStdoutLogPrefix\":\"true\",\"ldapStatsLogLevel\":\"INFO\",\"ldapStatsLogTarget\":\"FILE\",\"linkLogLevel\":\"INFO\",\"linkLogTarget\":\"STDOUT\",\"persistenceDurationLogLevel\":\"INFO\",\"persistenceDurationLogTarget\":\"FILE\",\"persistenceLogLevel\":\"INFO\",\"persistenceLogTarget\":\"FILE\",\"scriptLogLevel\":\"INFO\",\"scriptLogTarget\":\"FILE\"},\"enabled\":false,\"ingress\":{\"linkEnabled\":true},\"linkServiceName\":\"link\"},\"nginx-ingress\":{\"enabled\":true},\"opendj\":{\"enabled\":false,\"ldapServiceName\":\"opendj\"},\"persistence\":{\"enabled\":true},\"scim\":{\"appLoggers\":{\"enableStdoutLogPrefix\":\"true\",\"ldapStatsLogLevel\":\"INFO\",\"ldapStatsLogTarget\":\"FILE\",\"persistenceDurationLogLevel\":\"INFO\",\"persistenceDurationLogTarget\":\"FILE\",\"persistenceLogLevel\":\"INFO\",\"persistenceLogTarget\":\"FILE\",\"scimLogLevel\":\"INFO\",\"scimLogTarget\":\"STDOUT\",\"scriptLogLevel\":\"INFO\",\"scriptLogTarget\":\"FILE\"},\"enabled\":true,\"ingress\":{\"scimConfigEnabled\":false,\"scimEnabled\":false},\"scimServiceName\":\"scim\"},\"storageClass\":{\"allowVolumeExpansion\":true,\"allowedTopologies\":[],\"mountOptions\":[\"debug\"],\"parameters\":{},\"provisioner\":\"microk8s.io/hostpath\",\"reclaimPolicy\":\"Retain\",\"volumeBindingMode\":\"WaitForFirstConsumer\"},\"usrEnvs\":{\"normal\":{},\"secret\":{}}} Parameters used globally across all services helm charts. global.alb.ingress bool false Activates ALB ingress global.auth-server-key-rotation.enabled bool false Boolean flag to enable/disable the auth-server-key rotation cronjob chart. global.auth-server.appLoggers object {\"auditStatsLogLevel\":\"INFO\",\"auditStatsLogTarget\":\"FILE\",\"authLogLevel\":\"INFO\",\"authLogTarget\":\"STDOUT\",\"enableStdoutLogPrefix\":\"true\",\"httpLogLevel\":\"INFO\",\"httpLogTarget\":\"FILE\",\"ldapStatsLogLevel\":\"INFO\",\"ldapStatsLogTarget\":\"FILE\",\"persistenceDurationLogLevel\":\"INFO\",\"persistenceDurationLogTarget\":\"FILE\",\"persistenceLogLevel\":\"INFO\",\"persistenceLogTarget\":\"FILE\",\"scriptLogLevel\":\"INFO\",\"scriptLogTarget\":\"FILE\"} App loggers can be configured to define where the logs will be redirected to and the level of each in which it should be displayed. global.auth-server.appLoggers.auditStatsLogLevel string \"INFO\" jans-auth_audit.log level global.auth-server.appLoggers.auditStatsLogTarget string \"FILE\" jans-auth_script.log target global.auth-server.appLoggers.authLogLevel string \"INFO\" jans-auth.log level global.auth-server.appLoggers.authLogTarget string \"STDOUT\" jans-auth.log target global.auth-server.appLoggers.enableStdoutLogPrefix string \"true\" Enable log prefixing which enables prepending the STDOUT logs with the file name. i.e auth-server-script ===> 2022-12-20 17:49:55,744 INFO global.auth-server.appLoggers.httpLogLevel string \"INFO\" http_request_response.log level global.auth-server.appLoggers.httpLogTarget string \"FILE\" http_request_response.log target global.auth-server.appLoggers.ldapStatsLogLevel string \"INFO\" jans-auth_persistence_ldap_statistics.log level global.auth-server.appLoggers.ldapStatsLogTarget string \"FILE\" jans-auth_persistence_ldap_statistics.log target global.auth-server.appLoggers.persistenceDurationLogLevel string \"INFO\" jans-auth_persistence_duration.log level global.auth-server.appLoggers.persistenceDurationLogTarget string \"FILE\" jans-auth_persistence_duration.log target global.auth-server.appLoggers.persistenceLogLevel string \"INFO\" jans-auth_persistence.log level global.auth-server.appLoggers.persistenceLogTarget string \"FILE\" jans-auth_persistence.log target global.auth-server.appLoggers.scriptLogLevel string \"INFO\" jans-auth_script.log level global.auth-server.appLoggers.scriptLogTarget string \"FILE\" jans-auth_script.log target global.auth-server.authEncKeys string \"RSA1_5 RSA-OAEP\" space-separated key algorithm for encryption (default to RSA1_5 RSA-OAEP ) global.auth-server.authServerServiceName string \"auth-server\" Name of the auth-server service. Please keep it as default. global.auth-server.authSigKeys string \"RS256 RS384 RS512 ES256 ES384 ES512 PS256 PS384 PS512\" space-separated key algorithm for signing (default to RS256 RS384 RS512 ES256 ES384 ES512 PS256 PS384 PS512 ) global.auth-server.enabled bool true Boolean flag to enable/disable auth-server chart. You should never set this to false. global.auth-server.ingress object {\"authServerEnabled\":true,\"deviceCodeEnabled\":true,\"firebaseMessagingEnabled\":true,\"openidConfigEnabled\":true,\"u2fConfigEnabled\":true,\"uma2ConfigEnabled\":true,\"webdiscoveryEnabled\":true,\"webfingerEnabled\":true} Enable endpoints in either istio or nginx ingress depending on users choice global.auth-server.ingress.authServerEnabled bool true Enable Auth server endpoints /jans-auth global.auth-server.ingress.deviceCodeEnabled bool true Enable endpoint /device-code global.auth-server.ingress.firebaseMessagingEnabled bool true Enable endpoint /firebase-messaging-sw.js global.auth-server.ingress.openidConfigEnabled bool true Enable endpoint /.well-known/openid-configuration global.auth-server.ingress.u2fConfigEnabled bool true Enable endpoint /.well-known/fido-configuration global.auth-server.ingress.uma2ConfigEnabled bool true Enable endpoint /.well-known/uma2-configuration global.auth-server.ingress.webdiscoveryEnabled bool true Enable endpoint /.well-known/simple-web-discovery global.auth-server.ingress.webfingerEnabled bool true Enable endpoint /.well-known/webfinger global.awsStorageType string \"io1\" Volume storage type if using AWS volumes. global.azureStorageAccountType string \"Standard_LRS\" Volume storage type if using Azure disks. global.azureStorageKind string \"Managed\" Azure storage kind if using Azure disks global.cloud.testEnviroment bool false Boolean flag if enabled will strip resources requests and limits from all services. global.cnDocumentStoreType string \"LOCAL\" Document store type to use for shibboleth files LOCAL. global.cnGoogleApplicationCredentials string \"/etc/jans/conf/google-credentials.json\" Base64 encoded service account. The sa must have roles/secretmanager.admin to use Google secrets and roles/spanner.databaseUser to use Spanner. Leave as this is a sensible default. global.cnPersistenceType string \"sql\" Persistence backend to run Janssen with ldap global.cnPrometheusPort string \"\" Port used by Prometheus JMX agent (default to empty string). To enable Prometheus JMX agent, set the value to a number. global.config-api.appLoggers object {\"configApiLogLevel\":\"INFO\",\"configApiLogTarget\":\"STDOUT\",\"enableStdoutLogPrefix\":\"true\",\"ldapStatsLogLevel\":\"INFO\",\"ldapStatsLogTarget\":\"FILE\",\"persistenceDurationLogLevel\":\"INFO\",\"persistenceDurationLogTarget\":\"FILE\",\"persistenceLogLevel\":\"INFO\",\"persistenceLogTarget\":\"FILE\",\"scriptLogLevel\":\"INFO\",\"scriptLogTarget\":\"FILE\"} App loggers can be configured to define where the logs will be redirected to and the level of each in which it should be displayed. global.config-api.appLoggers.configApiLogLevel string \"INFO\" configapi.log level global.config-api.appLoggers.configApiLogTarget string \"STDOUT\" configapi.log target global.config-api.appLoggers.enableStdoutLogPrefix string \"true\" Enable log prefixing which enables prepending the STDOUT logs with the file name. i.e config-api_persistence ===> 2022-12-20 17:49:55,744 INFO global.config-api.appLoggers.ldapStatsLogLevel string \"INFO\" config-api_persistence_ldap_statistics.log level global.config-api.appLoggers.ldapStatsLogTarget string \"FILE\" config-api_persistence_ldap_statistics.log target global.config-api.appLoggers.persistenceDurationLogLevel string \"INFO\" config-api_persistence_duration.log level global.config-api.appLoggers.persistenceDurationLogTarget string \"FILE\" config-api_persistence_duration.log target global.config-api.appLoggers.persistenceLogLevel string \"INFO\" config-api_persistence.log level global.config-api.appLoggers.persistenceLogTarget string \"FILE\" config-api_persistence.log target global.config-api.appLoggers.scriptLogLevel string \"INFO\" config-api_script.log level global.config-api.appLoggers.scriptLogTarget string \"FILE\" config-api_script.log target global.config-api.configApiServerServiceName string \"config-api\" Name of the config-api service. Please keep it as default. global.config-api.enabled bool true Boolean flag to enable/disable the config-api chart. global.config-api.ingress object {\"configApiEnabled\":true} Enable endpoints in either istio or nginx ingress depending on users choice global.config.enabled bool true Boolean flag to enable/disable the configuration chart. This normally should never be false global.configAdapterName string \"kubernetes\" The config backend adapter that will hold Janssen configuration layer. aws global.configSecretAdapter string \"kubernetes\" The config backend adapter that will hold Janssen secret layer. aws global.fido2.appLoggers object {\"enableStdoutLogPrefix\":\"true\",\"fido2LogLevel\":\"INFO\",\"fido2LogTarget\":\"STDOUT\",\"persistenceDurationLogLevel\":\"INFO\",\"persistenceDurationLogTarget\":\"FILE\",\"persistenceLogLevel\":\"INFO\",\"persistenceLogTarget\":\"FILE\",\"scriptLogLevel\":\"INFO\",\"scriptLogTarget\":\"FILE\"} App loggers can be configured to define where the logs will be redirected to and the level of each in which it should be displayed. global.fido2.appLoggers.enableStdoutLogPrefix string \"true\" Enable log prefixing which enables prepending the STDOUT logs with the file name. i.e fido2 ===> 2022-12-20 17:49:55,744 INFO global.fido2.appLoggers.fido2LogLevel string \"INFO\" fido2.log level global.fido2.appLoggers.fido2LogTarget string \"STDOUT\" fido2.log target global.fido2.appLoggers.persistenceDurationLogLevel string \"INFO\" fido2_persistence_duration.log level global.fido2.appLoggers.persistenceDurationLogTarget string \"FILE\" fido2_persistence_duration.log target global.fido2.appLoggers.persistenceLogLevel string \"INFO\" fido2_persistence.log level global.fido2.appLoggers.persistenceLogTarget string \"FILE\" fido2_persistence.log target global.fido2.appLoggers.scriptLogLevel string \"INFO\" fido2_script.log level global.fido2.appLoggers.scriptLogTarget string \"FILE\" fido2_script.log target global.fido2.enabled bool true Boolean flag to enable/disable the fido2 chart. global.fido2.fido2ServiceName string \"fido2\" Name of the fido2 service. Please keep it as default. global.fido2.ingress object {\"fido2ConfigEnabled\":false} Enable endpoints in either istio or nginx ingress depending on users choice global.fido2.ingress.fido2ConfigEnabled bool false Enable endpoint /.well-known/fido2-configuration global.fqdn string \"demoexample.jans.io\" Fully qualified domain name to be used for Janssen installation. This address will be used to reach Janssen services. global.gcePdStorageType string \"pd-standard\" GCE storage kind if using Google disks global.isFqdnRegistered bool false Boolean flag to enable mapping global.lbIp to global.fqdn inside pods on clouds that provide static ip for load balancers. On cloud that provide only addresses to the LB this flag will enable a script to actively scan config.configmap.lbAddr and update the hosts file inside the pods automatically. global.istio.additionalAnnotations object {} Additional annotations that will be added across the gateway in the format of global.istio.additionalLabels object {} Additional labels that will be added across the gateway in the format of global.istio.enabled bool false Boolean flag that enables using istio side-cars with Janssen services. global.istio.gateways list [] Override the gateway that can be created by default. This is used when istio ingress has already been setup and the gateway exists. global.istio.ingress bool false Boolean flag that enables using istio gateway for Janssen. This assumes istio ingress is installed and hence the LB is available. global.istio.namespace string \"istio-system\" The namespace istio is deployed in. The is normally istio-system. global.jobTtlSecondsAfterFinished int 300 https://kubernetes.io/docs/concepts/workloads/controllers/ttlafterfinished/ global.lbIp string \"22.22.22.22\" The Loadbalancer IP created by nginx or istio on clouds that provide static IPs. This is not needed if global.fqdn is globally resolvable. global.link.appLoggers object {\"enableStdoutLogPrefix\":\"true\",\"ldapStatsLogLevel\":\"INFO\",\"ldapStatsLogTarget\":\"FILE\",\"linkLogLevel\":\"INFO\",\"linkLogTarget\":\"STDOUT\",\"persistenceDurationLogLevel\":\"INFO\",\"persistenceDurationLogTarget\":\"FILE\",\"persistenceLogLevel\":\"INFO\",\"persistenceLogTarget\":\"FILE\",\"scriptLogLevel\":\"INFO\",\"scriptLogTarget\":\"FILE\"} App loggers can be configured to define where the logs will be redirected to and the level of each in which it should be displayed. global.link.appLoggers.enableStdoutLogPrefix string \"true\" Enable log prefixing which enables prepending the STDOUT logs with the file name. i.e link-persistence ===> 2022-12-20 17:49:55,744 INFO global.link.appLoggers.ldapStatsLogLevel string \"INFO\" cacherefresh_persistence_ldap_statistics.log level global.link.appLoggers.ldapStatsLogTarget string \"FILE\" cacherefresh_persistence_ldap_statistics.log target global.link.appLoggers.linkLogLevel string \"INFO\" cacherefresh.log level global.link.appLoggers.linkLogTarget string \"STDOUT\" cacherefresh.log target global.link.appLoggers.persistenceDurationLogLevel string \"INFO\" cacherefresh_persistence_duration.log level global.link.appLoggers.persistenceDurationLogTarget string \"FILE\" cacherefresh_persistence_duration.log target global.link.appLoggers.persistenceLogLevel string \"INFO\" cacherefresh_persistence.log level global.link.appLoggers.persistenceLogTarget string \"FILE\" cacherefresh_persistence.log target global.link.appLoggers.scriptLogLevel string \"INFO\" cacherefresh_script.log level global.link.appLoggers.scriptLogTarget string \"FILE\" cacherefresh_script.log target global.link.enabled bool false Boolean flag to enable/disable the link chart. global.link.ingress object {\"linkEnabled\":true} Enable endpoints in either istio or nginx ingress depending on users choice global.link.linkServiceName string \"link\" Name of the link service. Please keep it as default. global.nginx-ingress.enabled bool true Boolean flag to enable/disable the nginx-ingress definitions chart. global.opendj.enabled bool false Boolean flag to enable/disable the OpenDJ chart. global.opendj.ldapServiceName string \"opendj\" Name of the OpenDJ service. Please keep it as default. global.persistence.enabled bool true Boolean flag to enable/disable the persistence chart. global.scim.appLoggers object {\"enableStdoutLogPrefix\":\"true\",\"ldapStatsLogLevel\":\"INFO\",\"ldapStatsLogTarget\":\"FILE\",\"persistenceDurationLogLevel\":\"INFO\",\"persistenceDurationLogTarget\":\"FILE\",\"persistenceLogLevel\":\"INFO\",\"persistenceLogTarget\":\"FILE\",\"scimLogLevel\":\"INFO\",\"scimLogTarget\":\"STDOUT\",\"scriptLogLevel\":\"INFO\",\"scriptLogTarget\":\"FILE\"} App loggers can be configured to define where the logs will be redirected to and the level of each in which it should be displayed. global.scim.appLoggers.enableStdoutLogPrefix string \"true\" Enable log prefixing which enables prepending the STDOUT logs with the file name. i.e jans-scim ===> 2022-12-20 17:49:55,744 INFO global.scim.appLoggers.ldapStatsLogLevel string \"INFO\" jans-scim_persistence_ldap_statistics.log level global.scim.appLoggers.ldapStatsLogTarget string \"FILE\" jans-scim_persistence_ldap_statistics.log target global.scim.appLoggers.persistenceDurationLogLevel string \"INFO\" jans-scim_persistence_duration.log level global.scim.appLoggers.persistenceDurationLogTarget string \"FILE\" jans-scim_persistence_duration.log target global.scim.appLoggers.persistenceLogLevel string \"INFO\" jans-scim_persistence.log level global.scim.appLoggers.persistenceLogTarget string \"FILE\" jans-scim_persistence.log target global.scim.appLoggers.scimLogLevel string \"INFO\" jans-scim.log level global.scim.appLoggers.scimLogTarget string \"STDOUT\" jans-scim.log target global.scim.appLoggers.scriptLogLevel string \"INFO\" jans-scim_script.log level global.scim.appLoggers.scriptLogTarget string \"FILE\" jans-scim_script.log target global.scim.enabled bool true Boolean flag to enable/disable the SCIM chart. global.scim.ingress object {\"scimConfigEnabled\":false,\"scimEnabled\":false} Enable endpoints in either istio or nginx ingress depending on users choice global.scim.ingress.scimConfigEnabled bool false Enable endpoint /.well-known/scim-configuration global.scim.ingress.scimEnabled bool false Enable SCIM endpoints /jans-scim global.scim.scimServiceName string \"scim\" Name of the scim service. Please keep it as default. global.storageClass object {\"allowVolumeExpansion\":true,\"allowedTopologies\":[],\"mountOptions\":[\"debug\"],\"parameters\":{},\"provisioner\":\"microk8s.io/hostpath\",\"reclaimPolicy\":\"Retain\",\"volumeBindingMode\":\"WaitForFirstConsumer\"} StorageClass section for OpenDJ charts. This is not currently used by the openbanking distribution. You may specify custom parameters as needed. global.storageClass.parameters object {} parameters: fsType: \"\" kind: \"\" pool: \"\" storageAccountType: \"\" type: \"\" global.usrEnvs object {\"normal\":{},\"secret\":{}} Add custom normal and secret envs to the service. Envs defined in global.userEnvs will be globally available to all services global.usrEnvs.normal object {} Add custom normal envs to the service. variable1: value1 global.usrEnvs.secret object {} Add custom secret envs to the service. variable1: value1 link object {\"additionalAnnotations\":{},\"additionalLabels\":{},\"dnsConfig\":{},\"dnsPolicy\":\"\",\"hpa\":{\"behavior\":{},\"enabled\":true,\"maxReplicas\":10,\"metrics\":[],\"minReplicas\":1,\"targetCPUUtilizationPercentage\":50},\"image\":{\"pullPolicy\":\"IfNotPresent\",\"pullSecrets\":[],\"repository\":\"ghcr.io/janssenproject/jans/link\",\"tag\":\"1.0.16-1\"},\"lifecycle\":{},\"livenessProbe\":{\"httpGet\":{\"path\":\"/jans-link/api/v1/health/live\",\"port\":9091},\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":5},\"pdb\":{\"enabled\":true,\"maxUnavailable\":\"90%\"},\"readinessProbe\":{\"httpGet\":{\"path\":\"jans-link/api/v1/health/ready\",\"port\":9091},\"initialDelaySeconds\":25,\"periodSeconds\":25,\"timeoutSeconds\":5},\"replicas\":1,\"resources\":{\"limits\":{\"cpu\":\"500m\",\"memory\":\"1000Mi\"},\"requests\":{\"cpu\":\"500m\",\"memory\":\"1000Mi\"}},\"topologySpreadConstraints\":{},\"usrEnvs\":{\"normal\":{},\"secret\":{}},\"volumeMounts\":[],\"volumes\":[]} Link. link.additionalAnnotations object {} Additional annotations that will be added across the gateway in the format of link.additionalLabels object {} Additional labels that will be added across the gateway in the format of link.dnsConfig object {} Add custom dns config link.dnsPolicy string \"\" Add custom dns policy link.hpa object {\"behavior\":{},\"enabled\":true,\"maxReplicas\":10,\"metrics\":[],\"minReplicas\":1,\"targetCPUUtilizationPercentage\":50} Configure the HorizontalPodAutoscaler link.hpa.behavior object {} Scaling Policies link.hpa.metrics list [] metrics if targetCPUUtilizationPercentage is not set link.image.pullPolicy string \"IfNotPresent\" Image pullPolicy to use for deploying. link.image.pullSecrets list [] Image Pull Secrets link.image.repository string \"ghcr.io/janssenproject/jans/link\" Image to use for deploying. link.image.tag string \"1.0.16-1\" Image tag to use for deploying. link.livenessProbe object {\"httpGet\":{\"path\":\"/jans-link/api/v1/health/live\",\"port\":9091},\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":5} Configure the liveness healthcheck for the auth server if needed. link.livenessProbe.httpGet object {\"path\":\"/jans-link/api/v1/health/live\",\"port\":9091} http liveness probe endpoint link.pdb object {\"enabled\":true,\"maxUnavailable\":\"90%\"} Configure the PodDisruptionBudget link.readinessProbe.httpGet object {\"path\":\"jans-link/api/v1/health/ready\",\"port\":9091} http readiness probe endpoint link.replicas int 1 Service replica number. link.resources object {\"limits\":{\"cpu\":\"500m\",\"memory\":\"1000Mi\"},\"requests\":{\"cpu\":\"500m\",\"memory\":\"1000Mi\"}} Resource specs. link.resources.limits.cpu string \"500m\" CPU limit. link.resources.limits.memory string \"1000Mi\" Memory limit. link.resources.requests.cpu string \"500m\" CPU request. link.resources.requests.memory string \"1000Mi\" Memory request. link.topologySpreadConstraints object {} Configure the topology spread constraints. Notice this is a map NOT a list as in the upstream API https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/ link.usrEnvs object {\"normal\":{},\"secret\":{}} Add custom normal and secret envs to the service link.usrEnvs.normal object {} Add custom normal envs to the service variable1: value1 link.usrEnvs.secret object {} Add custom secret envs to the service variable1: value1 link.volumeMounts list [] Configure any additional volumesMounts that need to be attached to the containers link.volumes list [] Configure any additional volumes that need to be attached to the pod nginx-ingress object {\"ingress\":{\"additionalAnnotations\":{},\"additionalLabels\":{},\"authServerAdditionalAnnotations\":{},\"authServerLabels\":{},\"configApiAdditionalAnnotations\":{},\"configApiLabels\":{},\"deviceCodeAdditionalAnnotations\":{},\"deviceCodeLabels\":{},\"fido2ConfigAdditionalAnnotations\":{},\"fido2ConfigLabels\":{},\"firebaseMessagingAdditionalAnnotations\":{},\"firebaseMessagingLabels\":{},\"hosts\":[\"demoexample.jans.io\"],\"ingressClassName\":\"nginx\",\"openidAdditionalAnnotations\":{},\"openidConfigLabels\":{},\"path\":\"/\",\"scimAdditionalAnnotations\":{},\"scimConfigAdditionalAnnotations\":{},\"scimConfigLabels\":{},\"scimLabels\":{},\"tls\":[{\"hosts\":[\"demoexample.jans.io\"],\"secretName\":\"tls-certificate\"}],\"u2fAdditionalAnnotations\":{},\"u2fConfigLabels\":{},\"uma2AdditionalAnnotations\":{},\"uma2ConfigLabels\":{},\"webdiscoveryAdditionalAnnotations\":{},\"webdiscoveryLabels\":{},\"webfingerAdditionalAnnotations\":{},\"webfingerLabels\":{}}} Nginx ingress definitions chart nginx-ingress.ingress.additionalAnnotations object {} Additional annotations that will be added across all ingress definitions in the format of {cert-manager.io/issuer: \"letsencrypt-prod\"} Enable client certificate authentication nginx.ingress.kubernetes.io/auth-tls-verify-client: \"optional\" Create the secret containing the trusted ca certificates nginx.ingress.kubernetes.io/auth-tls-secret: \"janssen/tls-certificate\" Specify the verification depth in the client certificates chain nginx.ingress.kubernetes.io/auth-tls-verify-depth: \"1\" Specify if certificates are passed to upstream server nginx.ingress.kubernetes.io/auth-tls-pass-certificate-to-upstream: \"true\" nginx-ingress.ingress.additionalLabels object {} Additional labels that will be added across all ingress definitions in the format of nginx-ingress.ingress.authServerAdditionalAnnotations object {} Auth server ingress resource additional annotations. nginx-ingress.ingress.authServerLabels object {} Auth server ingress resource labels. key app is taken nginx-ingress.ingress.configApiAdditionalAnnotations object {} ConfigAPI ingress resource additional annotations. nginx-ingress.ingress.configApiLabels object {} configAPI ingress resource labels. key app is taken nginx-ingress.ingress.deviceCodeAdditionalAnnotations object {} device-code ingress resource additional annotations. nginx-ingress.ingress.deviceCodeLabels object {} device-code ingress resource labels. key app is taken nginx-ingress.ingress.fido2ConfigAdditionalAnnotations object {} fido2 config ingress resource additional annotations. nginx-ingress.ingress.fido2ConfigLabels object {} fido2 config ingress resource labels. key app is taken nginx-ingress.ingress.firebaseMessagingAdditionalAnnotations object {} Firebase Messaging ingress resource additional annotations. nginx-ingress.ingress.firebaseMessagingLabels object {} Firebase Messaging ingress resource labels. key app is taken nginx-ingress.ingress.openidAdditionalAnnotations object {} openid-configuration ingress resource additional annotations. nginx-ingress.ingress.openidConfigLabels object {} openid-configuration ingress resource labels. key app is taken nginx-ingress.ingress.scimAdditionalAnnotations object {} SCIM ingress resource additional annotations. nginx-ingress.ingress.scimConfigAdditionalAnnotations object {} SCIM config ingress resource additional annotations. nginx-ingress.ingress.scimConfigLabels object {} SCIM config ingress resource labels. key app is taken nginx-ingress.ingress.scimLabels object {} SCIM config ingress resource labels. key app is taken nginx-ingress.ingress.tls list [{\"hosts\":[\"demoexample.jans.io\"],\"secretName\":\"tls-certificate\"}] Secrets holding HTTPS CA cert and key. nginx-ingress.ingress.u2fAdditionalAnnotations object {} u2f config ingress resource additional annotations. nginx-ingress.ingress.u2fConfigLabels object {} u2f config ingress resource labels. key app is taken nginx-ingress.ingress.uma2AdditionalAnnotations object {} uma2 config ingress resource additional annotations. nginx-ingress.ingress.uma2ConfigLabels object {} uma2 config ingress resource labels. key app is taken nginx-ingress.ingress.webdiscoveryAdditionalAnnotations object {} webdiscovery ingress resource additional annotations. nginx-ingress.ingress.webdiscoveryLabels object {} webdiscovery ingress resource labels. key app is taken nginx-ingress.ingress.webfingerAdditionalAnnotations object {} webfinger ingress resource additional annotations. nginx-ingress.ingress.webfingerLabels object {} webfinger ingress resource labels. key app is taken opendj object {\"additionalAnnotations\":{},\"additionalLabels\":{},\"backup\":{\"cronJobSchedule\":\"*/59 * * * *\",\"enabled\":true},\"dnsConfig\":{},\"dnsPolicy\":\"\",\"hpa\":{\"behavior\":{},\"enabled\":true,\"maxReplicas\":10,\"metrics\":[],\"minReplicas\":1,\"targetCPUUtilizationPercentage\":50},\"image\":{\"pullPolicy\":\"IfNotPresent\",\"pullSecrets\":[],\"repository\":\"gluufederation/opendj\",\"tag\":\"5.0.0_dev\"},\"lifecycle\":{\"preStop\":{\"exec\":{\"command\":[\"/bin/sh\",\"-c\",\"python3 /app/scripts/deregister_peer.py 1>&/proc/1/fd/1\"]}}},\"livenessProbe\":{\"exec\":{\"command\":[\"python3\",\"/app/scripts/healthcheck.py\"]},\"failureThreshold\":20,\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":5},\"pdb\":{\"enabled\":true,\"maxUnavailable\":1},\"persistence\":{\"size\":\"5Gi\"},\"ports\":{\"tcp-admin\":{\"nodePort\":\"\",\"port\":4444,\"protocol\":\"TCP\",\"targetPort\":4444},\"tcp-ldap\":{\"nodePort\":\"\",\"port\":1389,\"protocol\":\"TCP\",\"targetPort\":1389},\"tcp-ldaps\":{\"nodePort\":\"\",\"port\":1636,\"protocol\":\"TCP\",\"targetPort\":1636},\"tcp-repl\":{\"nodePort\":\"\",\"port\":8989,\"protocol\":\"TCP\",\"targetPort\":8989},\"tcp-serf\":{\"nodePort\":\"\",\"port\":7946,\"protocol\":\"TCP\",\"targetPort\":7946},\"udp-serf\":{\"nodePort\":\"\",\"port\":7946,\"protocol\":\"UDP\",\"targetPort\":7946}},\"readinessProbe\":{\"failureThreshold\":20,\"initialDelaySeconds\":60,\"periodSeconds\":25,\"tcpSocket\":{\"port\":1636},\"timeoutSeconds\":5},\"replicas\":1,\"resources\":{\"limits\":{\"cpu\":\"1500m\",\"memory\":\"2000Mi\"},\"requests\":{\"cpu\":\"1500m\",\"memory\":\"2000Mi\"}},\"topologySpreadConstraints\":{},\"usrEnvs\":{\"normal\":{},\"secret\":{}},\"volumeMounts\":[],\"volumes\":[]} OpenDJ is a directory server which implements a wide range of Lightweight Directory Access Protocol and related standards, including full compliance with LDAPv3 but also support for Directory Service Markup Language (DSMLv2).Written in Java, OpenDJ offers multi-master replication, access control, and many extensions. opendj.additionalAnnotations object {} Additional annotations that will be added across the gateway in the format of opendj.additionalLabels object {} Additional labels that will be added across the gateway in the format of opendj.backup object {\"cronJobSchedule\":\"*/59 * * * *\",\"enabled\":true} Configure ldap backup cronjob opendj.dnsConfig object {} Add custom dns config opendj.dnsPolicy string \"\" Add custom dns policy opendj.hpa object {\"behavior\":{},\"enabled\":true,\"maxReplicas\":10,\"metrics\":[],\"minReplicas\":1,\"targetCPUUtilizationPercentage\":50} Configure the HorizontalPodAutoscaler opendj.hpa.behavior object {} Scaling Policies opendj.hpa.metrics list [] metrics if targetCPUUtilizationPercentage is not set opendj.image.pullPolicy string \"IfNotPresent\" Image pullPolicy to use for deploying. opendj.image.pullSecrets list [] Image Pull Secrets opendj.image.repository string \"gluufederation/opendj\" Image to use for deploying. opendj.image.tag string \"5.0.0_dev\" Image tag to use for deploying. opendj.livenessProbe object {\"exec\":{\"command\":[\"python3\",\"/app/scripts/healthcheck.py\"]},\"failureThreshold\":20,\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":5} Configure the liveness healthcheck for OpenDJ if needed. https://github.com/GluuFederation/docker-opendj/blob/master/scripts/healthcheck.py opendj.livenessProbe.exec object {\"command\":[\"python3\",\"/app/scripts/healthcheck.py\"]} Executes the python3 healthcheck. opendj.pdb object {\"enabled\":true,\"maxUnavailable\":1} Configure the PodDisruptionBudget opendj.persistence.size string \"5Gi\" OpenDJ volume size opendj.readinessProbe object {\"failureThreshold\":20,\"initialDelaySeconds\":60,\"periodSeconds\":25,\"tcpSocket\":{\"port\":1636},\"timeoutSeconds\":5} Configure the readiness healthcheck for OpenDJ if needed. https://github.com/GluuFederation/docker-opendj/blob/master/scripts/healthcheck.py opendj.replicas int 1 Service replica number. opendj.resources object {\"limits\":{\"cpu\":\"1500m\",\"memory\":\"2000Mi\"},\"requests\":{\"cpu\":\"1500m\",\"memory\":\"2000Mi\"}} Resource specs. opendj.resources.limits.cpu string \"1500m\" CPU limit. opendj.resources.limits.memory string \"2000Mi\" Memory limit. opendj.resources.requests.cpu string \"1500m\" CPU request. opendj.resources.requests.memory string \"2000Mi\" Memory request. opendj.topologySpreadConstraints object {} Configure the topology spread constraints. Notice this is a map NOT a list as in the upstream API https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/ opendj.usrEnvs object {\"normal\":{},\"secret\":{}} Add custom normal and secret envs to the service opendj.usrEnvs.normal object {} Add custom normal envs to the service variable1: value1 opendj.usrEnvs.secret object {} Add custom secret envs to the service variable1: value1 opendj.volumeMounts list [] Configure any additional volumesMounts that need to be attached to the containers opendj.volumes list [] Configure any additional volumes that need to be attached to the pod persistence object {\"additionalAnnotations\":{},\"additionalLabels\":{},\"dnsConfig\":{},\"dnsPolicy\":\"\",\"image\":{\"pullPolicy\":\"IfNotPresent\",\"pullSecrets\":[],\"repository\":\"ghcr.io/janssenproject/jans/persistence-loader\",\"tag\":\"1.0.16-1\"},\"lifecycle\":{},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"}},\"usrEnvs\":{\"normal\":{},\"secret\":{}},\"volumeMounts\":[],\"volumes\":[]} Job to generate data and initial config for Janssen Server persistence layer. persistence.additionalAnnotations object {} Additional annotations that will be added across the gateway in the format of persistence.additionalLabels object {} Additional labels that will be added across the gateway in the format of persistence.dnsConfig object {} Add custom dns config persistence.dnsPolicy string \"\" Add custom dns policy persistence.image.pullPolicy string \"IfNotPresent\" Image pullPolicy to use for deploying. persistence.image.pullSecrets list [] Image Pull Secrets persistence.image.repository string \"ghcr.io/janssenproject/jans/persistence-loader\" Image to use for deploying. persistence.image.tag string \"1.0.16-1\" Image tag to use for deploying. persistence.resources object {\"limits\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"}} Resource specs. persistence.resources.limits.cpu string \"300m\" CPU limit persistence.resources.limits.memory string \"300Mi\" Memory limit. persistence.resources.requests.cpu string \"300m\" CPU request. persistence.resources.requests.memory string \"300Mi\" Memory request. persistence.usrEnvs object {\"normal\":{},\"secret\":{}} Add custom normal and secret envs to the service persistence.usrEnvs.normal object {} Add custom normal envs to the service variable1: value1 persistence.usrEnvs.secret object {} Add custom secret envs to the service variable1: value1 persistence.volumeMounts list [] Configure any additional volumesMounts that need to be attached to the containers persistence.volumes list [] Configure any additional volumes that need to be attached to the pod scim object {\"additionalAnnotations\":{},\"additionalLabels\":{},\"dnsConfig\":{},\"dnsPolicy\":\"\",\"hpa\":{\"behavior\":{},\"enabled\":true,\"maxReplicas\":10,\"metrics\":[],\"minReplicas\":1,\"targetCPUUtilizationPercentage\":50},\"image\":{\"pullPolicy\":\"IfNotPresent\",\"pullSecrets\":[],\"repository\":\"ghcr.io/janssenproject/jans/scim\",\"tag\":\"1.0.16-1\"},\"lifecycle\":{},\"livenessProbe\":{\"httpGet\":{\"path\":\"/jans-scim/sys/health-check\",\"port\":8080},\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":5},\"pdb\":{\"enabled\":true,\"maxUnavailable\":\"90%\"},\"readinessProbe\":{\"httpGet\":{\"path\":\"/jans-scim/sys/health-check\",\"port\":8080},\"initialDelaySeconds\":25,\"periodSeconds\":25,\"timeoutSeconds\":5},\"replicas\":1,\"resources\":{\"limits\":{\"cpu\":\"1000m\",\"memory\":\"1000Mi\"},\"requests\":{\"cpu\":\"1000m\",\"memory\":\"1000Mi\"}},\"service\":{\"name\":\"http-scim\",\"port\":8080},\"topologySpreadConstraints\":{},\"usrEnvs\":{\"normal\":{},\"secret\":{}},\"volumeMounts\":[],\"volumes\":[]} System for Cross-domain Identity Management (SCIM) version 2.0 scim.additionalAnnotations object {} Additional annotations that will be added across the gateway in the format of scim.additionalLabels object {} Additional labels that will be added across the gateway in the format of scim.dnsConfig object {} Add custom dns config scim.dnsPolicy string \"\" Add custom dns policy scim.hpa object {\"behavior\":{},\"enabled\":true,\"maxReplicas\":10,\"metrics\":[],\"minReplicas\":1,\"targetCPUUtilizationPercentage\":50} Configure the HorizontalPodAutoscaler scim.hpa.behavior object {} Scaling Policies scim.hpa.metrics list [] metrics if targetCPUUtilizationPercentage is not set scim.image.pullPolicy string \"IfNotPresent\" Image pullPolicy to use for deploying. scim.image.pullSecrets list [] Image Pull Secrets scim.image.repository string \"ghcr.io/janssenproject/jans/scim\" Image to use for deploying. scim.image.tag string \"1.0.16-1\" Image tag to use for deploying. scim.livenessProbe object {\"httpGet\":{\"path\":\"/jans-scim/sys/health-check\",\"port\":8080},\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":5} Configure the liveness healthcheck for SCIM if needed. scim.livenessProbe.httpGet.path string \"/jans-scim/sys/health-check\" http liveness probe endpoint scim.pdb object {\"enabled\":true,\"maxUnavailable\":\"90%\"} Configure the PodDisruptionBudget scim.readinessProbe object {\"httpGet\":{\"path\":\"/jans-scim/sys/health-check\",\"port\":8080},\"initialDelaySeconds\":25,\"periodSeconds\":25,\"timeoutSeconds\":5} Configure the readiness healthcheck for the SCIM if needed. scim.readinessProbe.httpGet.path string \"/jans-scim/sys/health-check\" http readiness probe endpoint scim.replicas int 1 Service replica number. scim.resources.limits.cpu string \"1000m\" CPU limit. scim.resources.limits.memory string \"1000Mi\" Memory limit. scim.resources.requests.cpu string \"1000m\" CPU request. scim.resources.requests.memory string \"1000Mi\" Memory request. scim.service.name string \"http-scim\" The name of the scim port within the scim service. Please keep it as default. scim.service.port int 8080 Port of the scim service. Please keep it as default. scim.topologySpreadConstraints object {} Configure the topology spread constraints. Notice this is a map NOT a list as in the upstream API https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/ scim.usrEnvs object {\"normal\":{},\"secret\":{}} Add custom normal and secret envs to the service scim.usrEnvs.normal object {} Add custom normal envs to the service variable1: value1 scim.usrEnvs.secret object {} Add custom secret envs to the service variable1: value1 scim.volumeMounts list [] Configure any additional volumesMounts that need to be attached to the containers scim.volumes list [] Configure any additional volumes that need to be attached to the pod Autogenerated from chart metadata using helm-docs v1.11.0","title":"Helm Chart"},{"location":"admin/reference/kubernetes/helm-chart/#janssen","text":"Janssen Access and Identity Management Homepage: https://jans.io","title":"janssen"},{"location":"admin/reference/kubernetes/helm-chart/#maintainers","text":"Name Email Url moabu support@jans.io","title":"Maintainers"},{"location":"admin/reference/kubernetes/helm-chart/#source-code","text":"https://jans.io https://github.com/JanssenProject/jans/charts/janssen","title":"Source Code"},{"location":"admin/reference/kubernetes/helm-chart/#requirements","text":"Kubernetes: >=v1.21.0-0 Repository Name Version auth-server 1.0.16 auth-server-key-rotation 1.0.16 config 1.0.16 config-api 1.0.16 fido2 1.0.16 link 1.0.16 nginx-ingress 1.0.16 opendj 1.0.16 persistence 1.0.16 scim 1.0.16","title":"Requirements"},{"location":"admin/reference/kubernetes/helm-chart/#values","text":"Key Type Default Description auth-server object {\"additionalAnnotations\":{},\"additionalLabels\":{},\"dnsConfig\":{},\"dnsPolicy\":\"\",\"hpa\":{\"behavior\":{},\"enabled\":true,\"maxReplicas\":10,\"metrics\":[],\"minReplicas\":1,\"targetCPUUtilizationPercentage\":50},\"image\":{\"pullPolicy\":\"IfNotPresent\",\"pullSecrets\":[],\"repository\":\"ghcr.io/janssenproject/jans/auth-server\",\"tag\":\"1.0.16-1\"},\"lifecycle\":{},\"livenessProbe\":{\"exec\":{\"command\":[\"python3\",\"/app/scripts/healthcheck.py\"]},\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":5},\"pdb\":{\"enabled\":true,\"maxUnavailable\":\"90%\"},\"readinessProbe\":{\"exec\":{\"command\":[\"python3\",\"/app/scripts/healthcheck.py\"]},\"initialDelaySeconds\":25,\"periodSeconds\":25,\"timeoutSeconds\":5},\"replicas\":1,\"resources\":{\"limits\":{\"cpu\":\"2500m\",\"memory\":\"2500Mi\"},\"requests\":{\"cpu\":\"2500m\",\"memory\":\"2500Mi\"}},\"topologySpreadConstraints\":{},\"usrEnvs\":{\"normal\":{},\"secret\":{}},\"volumeMounts\":[],\"volumes\":[]} OAuth Authorization Server, the OpenID Connect Provider, the UMA Authorization Server--this is the main Internet facing component of Janssen. It's the service that returns tokens, JWT's and identity assertions. This service must be Internet facing. auth-server-key-rotation object {\"additionalAnnotations\":{},\"additionalLabels\":{},\"dnsConfig\":{},\"dnsPolicy\":\"\",\"image\":{\"pullPolicy\":\"IfNotPresent\",\"pullSecrets\":[],\"repository\":\"ghcr.io/janssenproject/jans/certmanager\",\"tag\":\"1.0.16-1\"},\"keysLife\":48,\"keysPushDelay\":0,\"keysPushStrategy\":\"NEWER\",\"keysStrategy\":\"NEWER\",\"lifecycle\":{},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"}},\"usrEnvs\":{\"normal\":{},\"secret\":{}},\"volumeMounts\":[],\"volumes\":[]} Responsible for regenerating auth-keys per x hours auth-server-key-rotation.additionalAnnotations object {} Additional annotations that will be added across the gateway in the format of auth-server-key-rotation.additionalLabels object {} Additional labels that will be added across the gateway in the format of auth-server-key-rotation.dnsConfig object {} Add custom dns config auth-server-key-rotation.dnsPolicy string \"\" Add custom dns policy auth-server-key-rotation.image.pullPolicy string \"IfNotPresent\" Image pullPolicy to use for deploying. auth-server-key-rotation.image.pullSecrets list [] Image Pull Secrets auth-server-key-rotation.image.repository string \"ghcr.io/janssenproject/jans/certmanager\" Image to use for deploying. auth-server-key-rotation.image.tag string \"1.0.16-1\" Image tag to use for deploying. auth-server-key-rotation.keysLife int 48 Auth server key rotation keys life in hours auth-server-key-rotation.keysPushDelay int 0 Delay (in seconds) before pushing private keys to Auth server auth-server-key-rotation.keysPushStrategy string \"NEWER\" Set key selection strategy after pushing private keys to Auth server (only takes effect when keysPushDelay value is greater than 0) auth-server-key-rotation.keysStrategy string \"NEWER\" Set key selection strategy used by Auth server auth-server-key-rotation.resources object {\"limits\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"}} Resource specs. auth-server-key-rotation.resources.limits.cpu string \"300m\" CPU limit. auth-server-key-rotation.resources.limits.memory string \"300Mi\" Memory limit. auth-server-key-rotation.resources.requests.cpu string \"300m\" CPU request. auth-server-key-rotation.resources.requests.memory string \"300Mi\" Memory request. auth-server-key-rotation.usrEnvs object {\"normal\":{},\"secret\":{}} Add custom normal and secret envs to the service auth-server-key-rotation.usrEnvs.normal object {} Add custom normal envs to the service variable1: value1 auth-server-key-rotation.usrEnvs.secret object {} Add custom secret envs to the service variable1: value1 auth-server-key-rotation.volumeMounts list [] Configure any additional volumesMounts that need to be attached to the containers auth-server-key-rotation.volumes list [] Configure any additional volumes that need to be attached to the pod auth-server.additionalAnnotations object {} Additional annotations that will be added across the gateway in the format of auth-server.additionalLabels object {} Additional labels that will be added across the gateway in the format of auth-server.dnsConfig object {} Add custom dns config auth-server.dnsPolicy string \"\" Add custom dns policy auth-server.hpa object {\"behavior\":{},\"enabled\":true,\"maxReplicas\":10,\"metrics\":[],\"minReplicas\":1,\"targetCPUUtilizationPercentage\":50} Configure the HorizontalPodAutoscaler auth-server.hpa.behavior object {} Scaling Policies auth-server.hpa.metrics list [] metrics if targetCPUUtilizationPercentage is not set auth-server.image.pullPolicy string \"IfNotPresent\" Image pullPolicy to use for deploying. auth-server.image.pullSecrets list [] Image Pull Secrets auth-server.image.repository string \"ghcr.io/janssenproject/jans/auth-server\" Image to use for deploying. auth-server.image.tag string \"1.0.16-1\" Image tag to use for deploying. auth-server.livenessProbe object {\"exec\":{\"command\":[\"python3\",\"/app/scripts/healthcheck.py\"]},\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":5} Configure the liveness healthcheck for the auth server if needed. auth-server.livenessProbe.exec object {\"command\":[\"python3\",\"/app/scripts/healthcheck.py\"]} Executes the python3 healthcheck. https://github.com/JanssenProject/docker-jans-auth-server/blob/master/scripts/healthcheck.py auth-server.pdb object {\"enabled\":true,\"maxUnavailable\":\"90%\"} Configure the PodDisruptionBudget auth-server.readinessProbe object {\"exec\":{\"command\":[\"python3\",\"/app/scripts/healthcheck.py\"]},\"initialDelaySeconds\":25,\"periodSeconds\":25,\"timeoutSeconds\":5} Configure the readiness healthcheck for the auth server if needed. https://github.com/JanssenProject/docker-jans-auth-server/blob/master/scripts/healthcheck.py auth-server.replicas int 1 Service replica number. auth-server.resources object {\"limits\":{\"cpu\":\"2500m\",\"memory\":\"2500Mi\"},\"requests\":{\"cpu\":\"2500m\",\"memory\":\"2500Mi\"}} Resource specs. auth-server.resources.limits.cpu string \"2500m\" CPU limit. auth-server.resources.limits.memory string \"2500Mi\" Memory limit. auth-server.resources.requests.cpu string \"2500m\" CPU request. auth-server.resources.requests.memory string \"2500Mi\" Memory request. auth-server.topologySpreadConstraints object {} Configure the topology spread constraints. Notice this is a map NOT a list as in the upstream API https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/ auth-server.usrEnvs object {\"normal\":{},\"secret\":{}} Add custom normal and secret envs to the service auth-server.usrEnvs.normal object {} Add custom normal envs to the service variable1: value1 auth-server.usrEnvs.secret object {} Add custom secret envs to the service variable1: value1 auth-server.volumeMounts list [] Configure any additional volumesMounts that need to be attached to the containers auth-server.volumes list [] Configure any additional volumes that need to be attached to the pod config object {\"additionalAnnotations\":{},\"additionalLabels\":{},\"adminPassword\":\"Test1234#\",\"city\":\"Austin\",\"configmap\":{\"cnAwsAccessKeyId\":\"\",\"cnAwsDefaultRegion\":\"us-west-1\",\"cnAwsProfile\":\"janssen\",\"cnAwsSecretAccessKey\":\"\",\"cnAwsSecretsEndpointUrl\":\"\",\"cnAwsSecretsNamePrefix\":\"janssen\",\"cnAwsSecretsReplicaRegions\":[],\"cnCacheType\":\"NATIVE_PERSISTENCE\",\"cnConfigKubernetesConfigMap\":\"cn\",\"cnCouchbaseBucketPrefix\":\"jans\",\"cnCouchbaseCrt\":\"SWFtTm90YVNlcnZpY2VBY2NvdW50Q2hhbmdlTWV0b09uZQo=\",\"cnCouchbaseIndexNumReplica\":0,\"cnCouchbasePassword\":\"P@ssw0rd\",\"cnCouchbaseSuperUser\":\"admin\",\"cnCouchbaseSuperUserPassword\":\"Test1234#\",\"cnCouchbaseUrl\":\"cbjanssen.default.svc.cluster.local\",\"cnCouchbaseUser\":\"janssen\",\"cnGoogleProjectId\":\"google-project-to-save-config-and-secrets-to\",\"cnGoogleSecretManagerServiceAccount\":\"SWFtTm90YVNlcnZpY2VBY2NvdW50Q2hhbmdlTWV0b09uZQo=\",\"cnGoogleSecretNamePrefix\":\"janssen\",\"cnGoogleSecretVersionId\":\"latest\",\"cnGoogleSpannerDatabaseId\":\"\",\"cnGoogleSpannerInstanceId\":\"\",\"cnJettyRequestHeaderSize\":8192,\"cnLdapUrl\":\"opendj:1636\",\"cnMaxRamPercent\":\"75.0\",\"cnPersistenceHybridMapping\":\"{}\",\"cnRedisSentinelGroup\":\"\",\"cnRedisSslTruststore\":\"\",\"cnRedisType\":\"STANDALONE\",\"cnRedisUrl\":\"redis.redis.svc.cluster.local:6379\",\"cnRedisUseSsl\":false,\"cnScimProtectionMode\":\"OAUTH\",\"cnSecretKubernetesSecret\":\"cn\",\"cnSqlDbDialect\":\"mysql\",\"cnSqlDbHost\":\"my-release-mysql.default.svc.cluster.local\",\"cnSqlDbName\":\"jans\",\"cnSqlDbPort\":3306,\"cnSqlDbSchema\":\"\",\"cnSqlDbTimezone\":\"UTC\",\"cnSqlDbUser\":\"jans\",\"cnSqldbUserPassword\":\"Test1234#\",\"lbAddr\":\"\"},\"countryCode\":\"US\",\"dnsConfig\":{},\"dnsPolicy\":\"\",\"email\":\"support@jans.io\",\"image\":{\"pullSecrets\":[],\"repository\":\"ghcr.io/janssenproject/jans/configurator\",\"tag\":\"1.0.16-1\"},\"ldapPassword\":\"P@ssw0rds\",\"lifecycle\":{},\"orgName\":\"Janssen\",\"redisPassword\":\"P@assw0rd\",\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"}},\"state\":\"TX\",\"usrEnvs\":{\"normal\":{},\"secret\":{}},\"volumeMounts\":[],\"volumes\":[]} Configuration parameters for setup and initial configuration secret and config layers used by Janssen services. config-api object {\"additionalAnnotations\":{},\"additionalLabels\":{},\"dnsConfig\":{},\"dnsPolicy\":\"\",\"hpa\":{\"behavior\":{},\"enabled\":true,\"maxReplicas\":10,\"metrics\":[],\"minReplicas\":1,\"targetCPUUtilizationPercentage\":50},\"image\":{\"pullPolicy\":\"IfNotPresent\",\"pullSecrets\":[],\"repository\":\"ghcr.io/janssenproject/jans/config-api\",\"tag\":\"1.0.16-1\"},\"lifecycle\":{},\"livenessProbe\":{\"httpGet\":{\"path\":\"/jans-config-api/api/v1/health/live\",\"port\":8074},\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":5},\"pdb\":{\"enabled\":true,\"maxUnavailable\":\"90%\"},\"readinessProbe\":{\"httpGet\":{\"path\":\"jans-config-api/api/v1/health/ready\",\"port\":8074},\"initialDelaySeconds\":25,\"periodSeconds\":25,\"timeoutSeconds\":5},\"replicas\":1,\"resources\":{\"limits\":{\"cpu\":\"1000m\",\"memory\":\"1000Mi\"},\"requests\":{\"cpu\":\"1000m\",\"memory\":\"1000Mi\"}},\"topologySpreadConstraints\":{},\"usrEnvs\":{\"normal\":{},\"secret\":{}},\"volumeMounts\":[],\"volumes\":[]} Config Api endpoints can be used to configure the auth-server, which is an open-source OpenID Connect Provider (OP) and UMA Authorization Server (AS). config-api.additionalAnnotations object {} Additional annotations that will be added across the gateway in the format of config-api.additionalLabels object {} Additional labels that will be added across the gateway in the format of config-api.dnsConfig object {} Add custom dns config config-api.dnsPolicy string \"\" Add custom dns policy config-api.hpa object {\"behavior\":{},\"enabled\":true,\"maxReplicas\":10,\"metrics\":[],\"minReplicas\":1,\"targetCPUUtilizationPercentage\":50} Configure the HorizontalPodAutoscaler config-api.hpa.behavior object {} Scaling Policies config-api.hpa.metrics list [] metrics if targetCPUUtilizationPercentage is not set config-api.image.pullPolicy string \"IfNotPresent\" Image pullPolicy to use for deploying. config-api.image.pullSecrets list [] Image Pull Secrets config-api.image.repository string \"ghcr.io/janssenproject/jans/config-api\" Image to use for deploying. config-api.image.tag string \"1.0.16-1\" Image tag to use for deploying. config-api.livenessProbe object {\"httpGet\":{\"path\":\"/jans-config-api/api/v1/health/live\",\"port\":8074},\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":5} Configure the liveness healthcheck for the auth server if needed. config-api.livenessProbe.httpGet object {\"path\":\"/jans-config-api/api/v1/health/live\",\"port\":8074} http liveness probe endpoint config-api.pdb object {\"enabled\":true,\"maxUnavailable\":\"90%\"} Configure the PodDisruptionBudget config-api.readinessProbe.httpGet object {\"path\":\"jans-config-api/api/v1/health/ready\",\"port\":8074} http readiness probe endpoint config-api.replicas int 1 Service replica number. config-api.resources object {\"limits\":{\"cpu\":\"1000m\",\"memory\":\"1000Mi\"},\"requests\":{\"cpu\":\"1000m\",\"memory\":\"1000Mi\"}} Resource specs. config-api.resources.limits.cpu string \"1000m\" CPU limit. config-api.resources.limits.memory string \"1000Mi\" Memory limit. config-api.resources.requests.cpu string \"1000m\" CPU request. config-api.resources.requests.memory string \"1000Mi\" Memory request. config-api.topologySpreadConstraints object {} Configure the topology spread constraints. Notice this is a map NOT a list as in the upstream API https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/ config-api.usrEnvs object {\"normal\":{},\"secret\":{}} Add custom normal and secret envs to the service config-api.usrEnvs.normal object {} Add custom normal envs to the service variable1: value1 config-api.usrEnvs.secret object {} Add custom secret envs to the service variable1: value1 config-api.volumeMounts list [] Configure any additional volumesMounts that need to be attached to the containers config-api.volumes list [] Configure any additional volumes that need to be attached to the pod config.additionalAnnotations object {} Additional annotations that will be added across the gateway in the format of config.adminPassword string \"Test1234#\" Admin password to log in to the UI. config.city string \"Austin\" City. Used for certificate creation. config.configmap.cnCacheType string \"NATIVE_PERSISTENCE\" Cache type. NATIVE_PERSISTENCE , REDIS . or IN_MEMORY . Defaults to NATIVE_PERSISTENCE . config.configmap.cnConfigKubernetesConfigMap string \"cn\" The name of the Kubernetes ConfigMap that will hold the configuration layer config.configmap.cnCouchbaseBucketPrefix string \"jans\" The prefix of couchbase buckets. This helps with separation in between different environments and allows for the same couchbase cluster to be used by different setups of Janssen. config.configmap.cnCouchbaseCrt string \"SWFtTm90YVNlcnZpY2VBY2NvdW50Q2hhbmdlTWV0b09uZQo=\" Couchbase certificate authority string. This must be encoded using base64. This can also be found in your couchbase UI Security > Root Certificate. In mTLS setups this is not required. config.configmap.cnCouchbaseIndexNumReplica int 0 The number of replicas per index created. Please note that the number of index nodes must be one greater than the number of index replicas. That means if your couchbase cluster only has 2 index nodes you cannot place the number of replicas to be higher than 1. config.configmap.cnCouchbasePassword string \"P@ssw0rd\" Couchbase password for the restricted user config.configmap.cnCouchbaseUser that is often used inside the services. The password must contain one digit, one uppercase letter, one lower case letter and one symbol . config.configmap.cnCouchbaseSuperUser string \"admin\" The Couchbase super user (admin) username. This user is used during initialization only. config.configmap.cnCouchbaseSuperUserPassword string \"Test1234#\" Couchbase password for the superuser config.configmap.cnCouchbaseSuperUser that is used during the initialization process. The password must contain one digit, one uppercase letter, one lower case letter and one symbol config.configmap.cnCouchbaseUrl string \"cbjanssen.default.svc.cluster.local\" Couchbase URL. Used only when global.cnPersistenceType is hybrid or couchbase. This should be in FQDN format for either remote or local Couchbase clusters. The address can be an internal address inside the kubernetes cluster config.configmap.cnCouchbaseUser string \"janssen\" Couchbase restricted user. Used only when global.cnPersistenceType is hybrid or couchbase. config.configmap.cnGoogleProjectId string \"google-project-to-save-config-and-secrets-to\" Project id of the Google project the secret manager belongs to. Used only when global.configAdapterName and global.configSecretAdapter is set to google. config.configmap.cnGoogleSecretManagerServiceAccount string \"SWFtTm90YVNlcnZpY2VBY2NvdW50Q2hhbmdlTWV0b09uZQo=\" Service account with roles roles/secretmanager.admin base64 encoded string. This is used often inside the services to reach the configuration layer. Used only when global.configAdapterName and global.configSecretAdapter is set to google. config.configmap.cnGoogleSecretNamePrefix string \"janssen\" Prefix for Janssen secret in Google Secret Manager. Defaults to janssen. If left janssen-secret secret will be created. Used only when global.configAdapterName and global.configSecretAdapter is set to google. config.configmap.cnGoogleSecretVersionId string \"latest\" Secret version to be used for secret configuration. Defaults to latest and should normally always stay that way. Used only when global.configAdapterName and global.configSecretAdapter is set to google. config.configmap.cnGoogleSpannerDatabaseId string \"\" Google Spanner Database ID. Used only when global.cnPersistenceType is spanner. config.configmap.cnGoogleSpannerInstanceId string \"\" Google Spanner ID. Used only when global.cnPersistenceType is spanner. config.configmap.cnJettyRequestHeaderSize int 8192 Jetty header size in bytes in the auth server config.configmap.cnLdapUrl string \"opendj:1636\" OpenDJ internal address. Leave as default. Used when global.cnPersistenceType is set to ldap . config.configmap.cnMaxRamPercent string \"75.0\" Value passed to Java option -XX:MaxRAMPercentage config.configmap.cnPersistenceHybridMapping string \"{}\" Specify data that should be saved in LDAP (one of default, user, cache, site, token, or session; default to default). Note this environment only takes effect when global.cnPersistenceType is set to hybrid . { \"default\": \"<couchbase config.configmap.cnRedisSentinelGroup string \"\" Redis Sentinel Group. Often set when config.configmap.cnRedisType is set to SENTINEL . Can be used when config.configmap.cnCacheType is set to REDIS . config.configmap.cnRedisSslTruststore string \"\" Redis SSL truststore. Optional. Can be used when config.configmap.cnCacheType is set to REDIS . config.configmap.cnRedisType string \"STANDALONE\" Redis service type. STANDALONE or CLUSTER . Can be used when config.configmap.cnCacheType is set to REDIS . config.configmap.cnRedisUrl string \"redis.redis.svc.cluster.local:6379\" Redis URL and port number : . Can be used when config.configmap.cnCacheType is set to REDIS . config.configmap.cnRedisUseSsl bool false Boolean to use SSL in Redis. Can be used when config.configmap.cnCacheType is set to REDIS . config.configmap.cnScimProtectionMode string \"OAUTH\" SCIM protection mode OAUTH config.configmap.cnSecretKubernetesSecret string \"cn\" Kubernetes secret name holding configuration keys. Used when global.configSecretAdapter is set to kubernetes which is the default. config.configmap.cnSqlDbDialect string \"mysql\" SQL database dialect. mysql or pgsql config.configmap.cnSqlDbHost string \"my-release-mysql.default.svc.cluster.local\" SQL database host uri. config.configmap.cnSqlDbName string \"jans\" SQL database name. config.configmap.cnSqlDbPort int 3306 SQL database port. config.configmap.cnSqlDbSchema string \"\" Schema name used by SQL database (default to empty-string; if using MySQL, the schema name will be resolved as the database name, whereas in PostgreSQL the schema name will be resolved as \"public\" ). config.configmap.cnSqlDbTimezone string \"UTC\" SQL database timezone. config.configmap.cnSqlDbUser string \"jans\" SQL database username. config.configmap.cnSqldbUserPassword string \"Test1234#\" SQL password injected the secrets . config.configmap.lbAddr string \"\" Load balancer address for AWS if the FQDN is not registered. config.countryCode string \"US\" Country code. Used for certificate creation. config.dnsConfig object {} Add custom dns config config.dnsPolicy string \"\" Add custom dns policy config.email string \"support@jans.io\" Email address of the administrator usually. Used for certificate creation. config.image.pullSecrets list [] Image Pull Secrets config.image.repository string \"ghcr.io/janssenproject/jans/configurator\" Image to use for deploying. config.image.tag string \"1.0.16-1\" Image tag to use for deploying. config.ldapPassword string \"P@ssw0rds\" LDAP admin password if OpenDJ is used for persistence. config.orgName string \"Janssen\" Organization name. Used for certificate creation. config.redisPassword string \"P@assw0rd\" Redis admin password if config.configmap.cnCacheType is set to REDIS . config.resources object {\"limits\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"}} Resource specs. config.resources.limits.cpu string \"300m\" CPU limit. config.resources.limits.memory string \"300Mi\" Memory limit. config.resources.requests.cpu string \"300m\" CPU request. config.resources.requests.memory string \"300Mi\" Memory request. config.state string \"TX\" State code. Used for certificate creation. config.usrEnvs object {\"normal\":{},\"secret\":{}} Add custom normal and secret envs to the service. config.usrEnvs.normal object {} Add custom normal envs to the service. variable1: value1 config.usrEnvs.secret object {} Add custom secret envs to the service. variable1: value1 config.volumeMounts list [] Configure any additional volumesMounts that need to be attached to the containers config.volumes list [] Configure any additional volumes that need to be attached to the pod fido2 object {\"additionalAnnotations\":{},\"additionalLabels\":{},\"dnsConfig\":{},\"dnsPolicy\":\"\",\"hpa\":{\"behavior\":{},\"enabled\":true,\"maxReplicas\":10,\"metrics\":[],\"minReplicas\":1,\"targetCPUUtilizationPercentage\":50},\"image\":{\"pullPolicy\":\"IfNotPresent\",\"pullSecrets\":[],\"repository\":\"ghcr.io/janssenproject/jans/fido2\",\"tag\":\"1.0.16-1\"},\"lifecycle\":{},\"livenessProbe\":{\"httpGet\":{\"path\":\"/jans-fido2/sys/health-check\",\"port\":\"http-fido2\"},\"initialDelaySeconds\":25,\"periodSeconds\":25,\"timeoutSeconds\":5},\"pdb\":{\"enabled\":true,\"maxUnavailable\":\"90%\"},\"readinessProbe\":{\"httpGet\":{\"path\":\"/jans-fido2/sys/health-check\",\"port\":\"http-fido2\"},\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":5},\"replicas\":1,\"resources\":{\"limits\":{\"cpu\":\"500m\",\"memory\":\"500Mi\"},\"requests\":{\"cpu\":\"500m\",\"memory\":\"500Mi\"}},\"service\":{\"name\":\"http-fido2\",\"port\":8080},\"topologySpreadConstraints\":{},\"usrEnvs\":{\"normal\":{},\"secret\":{}},\"volumeMounts\":[],\"volumes\":[]} FIDO 2.0 (FIDO2) is an open authentication standard that enables leveraging common devices to authenticate to online services in both mobile and desktop environments. fido2.additionalAnnotations object {} Additional annotations that will be added across the gateway in the format of fido2.additionalLabels object {} Additional labels that will be added across the gateway in the format of fido2.dnsConfig object {} Add custom dns config fido2.dnsPolicy string \"\" Add custom dns policy fido2.hpa object {\"behavior\":{},\"enabled\":true,\"maxReplicas\":10,\"metrics\":[],\"minReplicas\":1,\"targetCPUUtilizationPercentage\":50} Configure the HorizontalPodAutoscaler fido2.hpa.behavior object {} Scaling Policies fido2.hpa.metrics list [] metrics if targetCPUUtilizationPercentage is not set fido2.image.pullPolicy string \"IfNotPresent\" Image pullPolicy to use for deploying. fido2.image.pullSecrets list [] Image Pull Secrets fido2.image.repository string \"ghcr.io/janssenproject/jans/fido2\" Image to use for deploying. fido2.image.tag string \"1.0.16-1\" Image tag to use for deploying. fido2.livenessProbe object {\"httpGet\":{\"path\":\"/jans-fido2/sys/health-check\",\"port\":\"http-fido2\"},\"initialDelaySeconds\":25,\"periodSeconds\":25,\"timeoutSeconds\":5} Configure the liveness healthcheck for the fido2 if needed. fido2.livenessProbe.httpGet object {\"path\":\"/jans-fido2/sys/health-check\",\"port\":\"http-fido2\"} http liveness probe endpoint fido2.pdb object {\"enabled\":true,\"maxUnavailable\":\"90%\"} Configure the PodDisruptionBudget fido2.readinessProbe object {\"httpGet\":{\"path\":\"/jans-fido2/sys/health-check\",\"port\":\"http-fido2\"},\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":5} Configure the readiness healthcheck for the fido2 if needed. fido2.replicas int 1 Service replica number. fido2.resources object {\"limits\":{\"cpu\":\"500m\",\"memory\":\"500Mi\"},\"requests\":{\"cpu\":\"500m\",\"memory\":\"500Mi\"}} Resource specs. fido2.resources.limits.cpu string \"500m\" CPU limit. fido2.resources.limits.memory string \"500Mi\" Memory limit. fido2.resources.requests.cpu string \"500m\" CPU request. fido2.resources.requests.memory string \"500Mi\" Memory request. fido2.service.name string \"http-fido2\" The name of the fido2 port within the fido2 service. Please keep it as default. fido2.service.port int 8080 Port of the fido2 service. Please keep it as default. fido2.topologySpreadConstraints object {} Configure the topology spread constraints. Notice this is a map NOT a list as in the upstream API https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/ fido2.usrEnvs object {\"normal\":{},\"secret\":{}} Add custom normal and secret envs to the service fido2.usrEnvs.normal object {} Add custom normal envs to the service variable1: value1 fido2.usrEnvs.secret object {} Add custom secret envs to the service variable1: value1 fido2.volumeMounts list [] Configure any additional volumesMounts that need to be attached to the containers fido2.volumes list [] Configure any additional volumes that need to be attached to the pod global object {\"alb\":{\"ingress\":false},\"auth-server\":{\"appLoggers\":{\"auditStatsLogLevel\":\"INFO\",\"auditStatsLogTarget\":\"FILE\",\"authLogLevel\":\"INFO\",\"authLogTarget\":\"STDOUT\",\"enableStdoutLogPrefix\":\"true\",\"httpLogLevel\":\"INFO\",\"httpLogTarget\":\"FILE\",\"ldapStatsLogLevel\":\"INFO\",\"ldapStatsLogTarget\":\"FILE\",\"persistenceDurationLogLevel\":\"INFO\",\"persistenceDurationLogTarget\":\"FILE\",\"persistenceLogLevel\":\"INFO\",\"persistenceLogTarget\":\"FILE\",\"scriptLogLevel\":\"INFO\",\"scriptLogTarget\":\"FILE\"},\"authEncKeys\":\"RSA1_5 RSA-OAEP\",\"authServerServiceName\":\"auth-server\",\"authSigKeys\":\"RS256 RS384 RS512 ES256 ES384 ES512 PS256 PS384 PS512\",\"enabled\":true,\"ingress\":{\"authServerEnabled\":true,\"deviceCodeEnabled\":true,\"firebaseMessagingEnabled\":true,\"openidConfigEnabled\":true,\"u2fConfigEnabled\":true,\"uma2ConfigEnabled\":true,\"webdiscoveryEnabled\":true,\"webfingerEnabled\":true}},\"auth-server-key-rotation\":{\"enabled\":false},\"awsStorageType\":\"io1\",\"azureStorageAccountType\":\"Standard_LRS\",\"azureStorageKind\":\"Managed\",\"cloud\":{\"testEnviroment\":false},\"cnAwsConfigFile\":\"/etc/jans/conf/aws_config_file\",\"cnAwsSecretsReplicaRegionsFile\":\"/etc/jans/conf/aws_secrets_replica_regions\",\"cnAwsSharedCredentialsFile\":\"/etc/jans/conf/aws_shared_credential_file\",\"cnDocumentStoreType\":\"LOCAL\",\"cnGoogleApplicationCredentials\":\"/etc/jans/conf/google-credentials.json\",\"cnPersistenceType\":\"sql\",\"cnPrometheusPort\":\"\",\"config\":{\"enabled\":true},\"config-api\":{\"appLoggers\":{\"configApiLogLevel\":\"INFO\",\"configApiLogTarget\":\"STDOUT\",\"enableStdoutLogPrefix\":\"true\",\"ldapStatsLogLevel\":\"INFO\",\"ldapStatsLogTarget\":\"FILE\",\"persistenceDurationLogLevel\":\"INFO\",\"persistenceDurationLogTarget\":\"FILE\",\"persistenceLogLevel\":\"INFO\",\"persistenceLogTarget\":\"FILE\",\"scriptLogLevel\":\"INFO\",\"scriptLogTarget\":\"FILE\"},\"configApiServerServiceName\":\"config-api\",\"enabled\":true,\"ingress\":{\"configApiEnabled\":true}},\"configAdapterName\":\"kubernetes\",\"configSecretAdapter\":\"kubernetes\",\"fido2\":{\"appLoggers\":{\"enableStdoutLogPrefix\":\"true\",\"fido2LogLevel\":\"INFO\",\"fido2LogTarget\":\"STDOUT\",\"persistenceDurationLogLevel\":\"INFO\",\"persistenceDurationLogTarget\":\"FILE\",\"persistenceLogLevel\":\"INFO\",\"persistenceLogTarget\":\"FILE\",\"scriptLogLevel\":\"INFO\",\"scriptLogTarget\":\"FILE\"},\"enabled\":true,\"fido2ServiceName\":\"fido2\",\"ingress\":{\"fido2ConfigEnabled\":false}},\"fqdn\":\"demoexample.jans.io\",\"gcePdStorageType\":\"pd-standard\",\"isFqdnRegistered\":false,\"istio\":{\"additionalAnnotations\":{},\"additionalLabels\":{},\"enabled\":false,\"gateways\":[],\"ingress\":false,\"namespace\":\"istio-system\"},\"jobTtlSecondsAfterFinished\":300,\"lbIp\":\"22.22.22.22\",\"link\":{\"appLoggers\":{\"enableStdoutLogPrefix\":\"true\",\"ldapStatsLogLevel\":\"INFO\",\"ldapStatsLogTarget\":\"FILE\",\"linkLogLevel\":\"INFO\",\"linkLogTarget\":\"STDOUT\",\"persistenceDurationLogLevel\":\"INFO\",\"persistenceDurationLogTarget\":\"FILE\",\"persistenceLogLevel\":\"INFO\",\"persistenceLogTarget\":\"FILE\",\"scriptLogLevel\":\"INFO\",\"scriptLogTarget\":\"FILE\"},\"enabled\":false,\"ingress\":{\"linkEnabled\":true},\"linkServiceName\":\"link\"},\"nginx-ingress\":{\"enabled\":true},\"opendj\":{\"enabled\":false,\"ldapServiceName\":\"opendj\"},\"persistence\":{\"enabled\":true},\"scim\":{\"appLoggers\":{\"enableStdoutLogPrefix\":\"true\",\"ldapStatsLogLevel\":\"INFO\",\"ldapStatsLogTarget\":\"FILE\",\"persistenceDurationLogLevel\":\"INFO\",\"persistenceDurationLogTarget\":\"FILE\",\"persistenceLogLevel\":\"INFO\",\"persistenceLogTarget\":\"FILE\",\"scimLogLevel\":\"INFO\",\"scimLogTarget\":\"STDOUT\",\"scriptLogLevel\":\"INFO\",\"scriptLogTarget\":\"FILE\"},\"enabled\":true,\"ingress\":{\"scimConfigEnabled\":false,\"scimEnabled\":false},\"scimServiceName\":\"scim\"},\"storageClass\":{\"allowVolumeExpansion\":true,\"allowedTopologies\":[],\"mountOptions\":[\"debug\"],\"parameters\":{},\"provisioner\":\"microk8s.io/hostpath\",\"reclaimPolicy\":\"Retain\",\"volumeBindingMode\":\"WaitForFirstConsumer\"},\"usrEnvs\":{\"normal\":{},\"secret\":{}}} Parameters used globally across all services helm charts. global.alb.ingress bool false Activates ALB ingress global.auth-server-key-rotation.enabled bool false Boolean flag to enable/disable the auth-server-key rotation cronjob chart. global.auth-server.appLoggers object {\"auditStatsLogLevel\":\"INFO\",\"auditStatsLogTarget\":\"FILE\",\"authLogLevel\":\"INFO\",\"authLogTarget\":\"STDOUT\",\"enableStdoutLogPrefix\":\"true\",\"httpLogLevel\":\"INFO\",\"httpLogTarget\":\"FILE\",\"ldapStatsLogLevel\":\"INFO\",\"ldapStatsLogTarget\":\"FILE\",\"persistenceDurationLogLevel\":\"INFO\",\"persistenceDurationLogTarget\":\"FILE\",\"persistenceLogLevel\":\"INFO\",\"persistenceLogTarget\":\"FILE\",\"scriptLogLevel\":\"INFO\",\"scriptLogTarget\":\"FILE\"} App loggers can be configured to define where the logs will be redirected to and the level of each in which it should be displayed. global.auth-server.appLoggers.auditStatsLogLevel string \"INFO\" jans-auth_audit.log level global.auth-server.appLoggers.auditStatsLogTarget string \"FILE\" jans-auth_script.log target global.auth-server.appLoggers.authLogLevel string \"INFO\" jans-auth.log level global.auth-server.appLoggers.authLogTarget string \"STDOUT\" jans-auth.log target global.auth-server.appLoggers.enableStdoutLogPrefix string \"true\" Enable log prefixing which enables prepending the STDOUT logs with the file name. i.e auth-server-script ===> 2022-12-20 17:49:55,744 INFO global.auth-server.appLoggers.httpLogLevel string \"INFO\" http_request_response.log level global.auth-server.appLoggers.httpLogTarget string \"FILE\" http_request_response.log target global.auth-server.appLoggers.ldapStatsLogLevel string \"INFO\" jans-auth_persistence_ldap_statistics.log level global.auth-server.appLoggers.ldapStatsLogTarget string \"FILE\" jans-auth_persistence_ldap_statistics.log target global.auth-server.appLoggers.persistenceDurationLogLevel string \"INFO\" jans-auth_persistence_duration.log level global.auth-server.appLoggers.persistenceDurationLogTarget string \"FILE\" jans-auth_persistence_duration.log target global.auth-server.appLoggers.persistenceLogLevel string \"INFO\" jans-auth_persistence.log level global.auth-server.appLoggers.persistenceLogTarget string \"FILE\" jans-auth_persistence.log target global.auth-server.appLoggers.scriptLogLevel string \"INFO\" jans-auth_script.log level global.auth-server.appLoggers.scriptLogTarget string \"FILE\" jans-auth_script.log target global.auth-server.authEncKeys string \"RSA1_5 RSA-OAEP\" space-separated key algorithm for encryption (default to RSA1_5 RSA-OAEP ) global.auth-server.authServerServiceName string \"auth-server\" Name of the auth-server service. Please keep it as default. global.auth-server.authSigKeys string \"RS256 RS384 RS512 ES256 ES384 ES512 PS256 PS384 PS512\" space-separated key algorithm for signing (default to RS256 RS384 RS512 ES256 ES384 ES512 PS256 PS384 PS512 ) global.auth-server.enabled bool true Boolean flag to enable/disable auth-server chart. You should never set this to false. global.auth-server.ingress object {\"authServerEnabled\":true,\"deviceCodeEnabled\":true,\"firebaseMessagingEnabled\":true,\"openidConfigEnabled\":true,\"u2fConfigEnabled\":true,\"uma2ConfigEnabled\":true,\"webdiscoveryEnabled\":true,\"webfingerEnabled\":true} Enable endpoints in either istio or nginx ingress depending on users choice global.auth-server.ingress.authServerEnabled bool true Enable Auth server endpoints /jans-auth global.auth-server.ingress.deviceCodeEnabled bool true Enable endpoint /device-code global.auth-server.ingress.firebaseMessagingEnabled bool true Enable endpoint /firebase-messaging-sw.js global.auth-server.ingress.openidConfigEnabled bool true Enable endpoint /.well-known/openid-configuration global.auth-server.ingress.u2fConfigEnabled bool true Enable endpoint /.well-known/fido-configuration global.auth-server.ingress.uma2ConfigEnabled bool true Enable endpoint /.well-known/uma2-configuration global.auth-server.ingress.webdiscoveryEnabled bool true Enable endpoint /.well-known/simple-web-discovery global.auth-server.ingress.webfingerEnabled bool true Enable endpoint /.well-known/webfinger global.awsStorageType string \"io1\" Volume storage type if using AWS volumes. global.azureStorageAccountType string \"Standard_LRS\" Volume storage type if using Azure disks. global.azureStorageKind string \"Managed\" Azure storage kind if using Azure disks global.cloud.testEnviroment bool false Boolean flag if enabled will strip resources requests and limits from all services. global.cnDocumentStoreType string \"LOCAL\" Document store type to use for shibboleth files LOCAL. global.cnGoogleApplicationCredentials string \"/etc/jans/conf/google-credentials.json\" Base64 encoded service account. The sa must have roles/secretmanager.admin to use Google secrets and roles/spanner.databaseUser to use Spanner. Leave as this is a sensible default. global.cnPersistenceType string \"sql\" Persistence backend to run Janssen with ldap global.cnPrometheusPort string \"\" Port used by Prometheus JMX agent (default to empty string). To enable Prometheus JMX agent, set the value to a number. global.config-api.appLoggers object {\"configApiLogLevel\":\"INFO\",\"configApiLogTarget\":\"STDOUT\",\"enableStdoutLogPrefix\":\"true\",\"ldapStatsLogLevel\":\"INFO\",\"ldapStatsLogTarget\":\"FILE\",\"persistenceDurationLogLevel\":\"INFO\",\"persistenceDurationLogTarget\":\"FILE\",\"persistenceLogLevel\":\"INFO\",\"persistenceLogTarget\":\"FILE\",\"scriptLogLevel\":\"INFO\",\"scriptLogTarget\":\"FILE\"} App loggers can be configured to define where the logs will be redirected to and the level of each in which it should be displayed. global.config-api.appLoggers.configApiLogLevel string \"INFO\" configapi.log level global.config-api.appLoggers.configApiLogTarget string \"STDOUT\" configapi.log target global.config-api.appLoggers.enableStdoutLogPrefix string \"true\" Enable log prefixing which enables prepending the STDOUT logs with the file name. i.e config-api_persistence ===> 2022-12-20 17:49:55,744 INFO global.config-api.appLoggers.ldapStatsLogLevel string \"INFO\" config-api_persistence_ldap_statistics.log level global.config-api.appLoggers.ldapStatsLogTarget string \"FILE\" config-api_persistence_ldap_statistics.log target global.config-api.appLoggers.persistenceDurationLogLevel string \"INFO\" config-api_persistence_duration.log level global.config-api.appLoggers.persistenceDurationLogTarget string \"FILE\" config-api_persistence_duration.log target global.config-api.appLoggers.persistenceLogLevel string \"INFO\" config-api_persistence.log level global.config-api.appLoggers.persistenceLogTarget string \"FILE\" config-api_persistence.log target global.config-api.appLoggers.scriptLogLevel string \"INFO\" config-api_script.log level global.config-api.appLoggers.scriptLogTarget string \"FILE\" config-api_script.log target global.config-api.configApiServerServiceName string \"config-api\" Name of the config-api service. Please keep it as default. global.config-api.enabled bool true Boolean flag to enable/disable the config-api chart. global.config-api.ingress object {\"configApiEnabled\":true} Enable endpoints in either istio or nginx ingress depending on users choice global.config.enabled bool true Boolean flag to enable/disable the configuration chart. This normally should never be false global.configAdapterName string \"kubernetes\" The config backend adapter that will hold Janssen configuration layer. aws global.configSecretAdapter string \"kubernetes\" The config backend adapter that will hold Janssen secret layer. aws global.fido2.appLoggers object {\"enableStdoutLogPrefix\":\"true\",\"fido2LogLevel\":\"INFO\",\"fido2LogTarget\":\"STDOUT\",\"persistenceDurationLogLevel\":\"INFO\",\"persistenceDurationLogTarget\":\"FILE\",\"persistenceLogLevel\":\"INFO\",\"persistenceLogTarget\":\"FILE\",\"scriptLogLevel\":\"INFO\",\"scriptLogTarget\":\"FILE\"} App loggers can be configured to define where the logs will be redirected to and the level of each in which it should be displayed. global.fido2.appLoggers.enableStdoutLogPrefix string \"true\" Enable log prefixing which enables prepending the STDOUT logs with the file name. i.e fido2 ===> 2022-12-20 17:49:55,744 INFO global.fido2.appLoggers.fido2LogLevel string \"INFO\" fido2.log level global.fido2.appLoggers.fido2LogTarget string \"STDOUT\" fido2.log target global.fido2.appLoggers.persistenceDurationLogLevel string \"INFO\" fido2_persistence_duration.log level global.fido2.appLoggers.persistenceDurationLogTarget string \"FILE\" fido2_persistence_duration.log target global.fido2.appLoggers.persistenceLogLevel string \"INFO\" fido2_persistence.log level global.fido2.appLoggers.persistenceLogTarget string \"FILE\" fido2_persistence.log target global.fido2.appLoggers.scriptLogLevel string \"INFO\" fido2_script.log level global.fido2.appLoggers.scriptLogTarget string \"FILE\" fido2_script.log target global.fido2.enabled bool true Boolean flag to enable/disable the fido2 chart. global.fido2.fido2ServiceName string \"fido2\" Name of the fido2 service. Please keep it as default. global.fido2.ingress object {\"fido2ConfigEnabled\":false} Enable endpoints in either istio or nginx ingress depending on users choice global.fido2.ingress.fido2ConfigEnabled bool false Enable endpoint /.well-known/fido2-configuration global.fqdn string \"demoexample.jans.io\" Fully qualified domain name to be used for Janssen installation. This address will be used to reach Janssen services. global.gcePdStorageType string \"pd-standard\" GCE storage kind if using Google disks global.isFqdnRegistered bool false Boolean flag to enable mapping global.lbIp to global.fqdn inside pods on clouds that provide static ip for load balancers. On cloud that provide only addresses to the LB this flag will enable a script to actively scan config.configmap.lbAddr and update the hosts file inside the pods automatically. global.istio.additionalAnnotations object {} Additional annotations that will be added across the gateway in the format of global.istio.additionalLabels object {} Additional labels that will be added across the gateway in the format of global.istio.enabled bool false Boolean flag that enables using istio side-cars with Janssen services. global.istio.gateways list [] Override the gateway that can be created by default. This is used when istio ingress has already been setup and the gateway exists. global.istio.ingress bool false Boolean flag that enables using istio gateway for Janssen. This assumes istio ingress is installed and hence the LB is available. global.istio.namespace string \"istio-system\" The namespace istio is deployed in. The is normally istio-system. global.jobTtlSecondsAfterFinished int 300 https://kubernetes.io/docs/concepts/workloads/controllers/ttlafterfinished/ global.lbIp string \"22.22.22.22\" The Loadbalancer IP created by nginx or istio on clouds that provide static IPs. This is not needed if global.fqdn is globally resolvable. global.link.appLoggers object {\"enableStdoutLogPrefix\":\"true\",\"ldapStatsLogLevel\":\"INFO\",\"ldapStatsLogTarget\":\"FILE\",\"linkLogLevel\":\"INFO\",\"linkLogTarget\":\"STDOUT\",\"persistenceDurationLogLevel\":\"INFO\",\"persistenceDurationLogTarget\":\"FILE\",\"persistenceLogLevel\":\"INFO\",\"persistenceLogTarget\":\"FILE\",\"scriptLogLevel\":\"INFO\",\"scriptLogTarget\":\"FILE\"} App loggers can be configured to define where the logs will be redirected to and the level of each in which it should be displayed. global.link.appLoggers.enableStdoutLogPrefix string \"true\" Enable log prefixing which enables prepending the STDOUT logs with the file name. i.e link-persistence ===> 2022-12-20 17:49:55,744 INFO global.link.appLoggers.ldapStatsLogLevel string \"INFO\" cacherefresh_persistence_ldap_statistics.log level global.link.appLoggers.ldapStatsLogTarget string \"FILE\" cacherefresh_persistence_ldap_statistics.log target global.link.appLoggers.linkLogLevel string \"INFO\" cacherefresh.log level global.link.appLoggers.linkLogTarget string \"STDOUT\" cacherefresh.log target global.link.appLoggers.persistenceDurationLogLevel string \"INFO\" cacherefresh_persistence_duration.log level global.link.appLoggers.persistenceDurationLogTarget string \"FILE\" cacherefresh_persistence_duration.log target global.link.appLoggers.persistenceLogLevel string \"INFO\" cacherefresh_persistence.log level global.link.appLoggers.persistenceLogTarget string \"FILE\" cacherefresh_persistence.log target global.link.appLoggers.scriptLogLevel string \"INFO\" cacherefresh_script.log level global.link.appLoggers.scriptLogTarget string \"FILE\" cacherefresh_script.log target global.link.enabled bool false Boolean flag to enable/disable the link chart. global.link.ingress object {\"linkEnabled\":true} Enable endpoints in either istio or nginx ingress depending on users choice global.link.linkServiceName string \"link\" Name of the link service. Please keep it as default. global.nginx-ingress.enabled bool true Boolean flag to enable/disable the nginx-ingress definitions chart. global.opendj.enabled bool false Boolean flag to enable/disable the OpenDJ chart. global.opendj.ldapServiceName string \"opendj\" Name of the OpenDJ service. Please keep it as default. global.persistence.enabled bool true Boolean flag to enable/disable the persistence chart. global.scim.appLoggers object {\"enableStdoutLogPrefix\":\"true\",\"ldapStatsLogLevel\":\"INFO\",\"ldapStatsLogTarget\":\"FILE\",\"persistenceDurationLogLevel\":\"INFO\",\"persistenceDurationLogTarget\":\"FILE\",\"persistenceLogLevel\":\"INFO\",\"persistenceLogTarget\":\"FILE\",\"scimLogLevel\":\"INFO\",\"scimLogTarget\":\"STDOUT\",\"scriptLogLevel\":\"INFO\",\"scriptLogTarget\":\"FILE\"} App loggers can be configured to define where the logs will be redirected to and the level of each in which it should be displayed. global.scim.appLoggers.enableStdoutLogPrefix string \"true\" Enable log prefixing which enables prepending the STDOUT logs with the file name. i.e jans-scim ===> 2022-12-20 17:49:55,744 INFO global.scim.appLoggers.ldapStatsLogLevel string \"INFO\" jans-scim_persistence_ldap_statistics.log level global.scim.appLoggers.ldapStatsLogTarget string \"FILE\" jans-scim_persistence_ldap_statistics.log target global.scim.appLoggers.persistenceDurationLogLevel string \"INFO\" jans-scim_persistence_duration.log level global.scim.appLoggers.persistenceDurationLogTarget string \"FILE\" jans-scim_persistence_duration.log target global.scim.appLoggers.persistenceLogLevel string \"INFO\" jans-scim_persistence.log level global.scim.appLoggers.persistenceLogTarget string \"FILE\" jans-scim_persistence.log target global.scim.appLoggers.scimLogLevel string \"INFO\" jans-scim.log level global.scim.appLoggers.scimLogTarget string \"STDOUT\" jans-scim.log target global.scim.appLoggers.scriptLogLevel string \"INFO\" jans-scim_script.log level global.scim.appLoggers.scriptLogTarget string \"FILE\" jans-scim_script.log target global.scim.enabled bool true Boolean flag to enable/disable the SCIM chart. global.scim.ingress object {\"scimConfigEnabled\":false,\"scimEnabled\":false} Enable endpoints in either istio or nginx ingress depending on users choice global.scim.ingress.scimConfigEnabled bool false Enable endpoint /.well-known/scim-configuration global.scim.ingress.scimEnabled bool false Enable SCIM endpoints /jans-scim global.scim.scimServiceName string \"scim\" Name of the scim service. Please keep it as default. global.storageClass object {\"allowVolumeExpansion\":true,\"allowedTopologies\":[],\"mountOptions\":[\"debug\"],\"parameters\":{},\"provisioner\":\"microk8s.io/hostpath\",\"reclaimPolicy\":\"Retain\",\"volumeBindingMode\":\"WaitForFirstConsumer\"} StorageClass section for OpenDJ charts. This is not currently used by the openbanking distribution. You may specify custom parameters as needed. global.storageClass.parameters object {} parameters: fsType: \"\" kind: \"\" pool: \"\" storageAccountType: \"\" type: \"\" global.usrEnvs object {\"normal\":{},\"secret\":{}} Add custom normal and secret envs to the service. Envs defined in global.userEnvs will be globally available to all services global.usrEnvs.normal object {} Add custom normal envs to the service. variable1: value1 global.usrEnvs.secret object {} Add custom secret envs to the service. variable1: value1 link object {\"additionalAnnotations\":{},\"additionalLabels\":{},\"dnsConfig\":{},\"dnsPolicy\":\"\",\"hpa\":{\"behavior\":{},\"enabled\":true,\"maxReplicas\":10,\"metrics\":[],\"minReplicas\":1,\"targetCPUUtilizationPercentage\":50},\"image\":{\"pullPolicy\":\"IfNotPresent\",\"pullSecrets\":[],\"repository\":\"ghcr.io/janssenproject/jans/link\",\"tag\":\"1.0.16-1\"},\"lifecycle\":{},\"livenessProbe\":{\"httpGet\":{\"path\":\"/jans-link/api/v1/health/live\",\"port\":9091},\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":5},\"pdb\":{\"enabled\":true,\"maxUnavailable\":\"90%\"},\"readinessProbe\":{\"httpGet\":{\"path\":\"jans-link/api/v1/health/ready\",\"port\":9091},\"initialDelaySeconds\":25,\"periodSeconds\":25,\"timeoutSeconds\":5},\"replicas\":1,\"resources\":{\"limits\":{\"cpu\":\"500m\",\"memory\":\"1000Mi\"},\"requests\":{\"cpu\":\"500m\",\"memory\":\"1000Mi\"}},\"topologySpreadConstraints\":{},\"usrEnvs\":{\"normal\":{},\"secret\":{}},\"volumeMounts\":[],\"volumes\":[]} Link. link.additionalAnnotations object {} Additional annotations that will be added across the gateway in the format of link.additionalLabels object {} Additional labels that will be added across the gateway in the format of link.dnsConfig object {} Add custom dns config link.dnsPolicy string \"\" Add custom dns policy link.hpa object {\"behavior\":{},\"enabled\":true,\"maxReplicas\":10,\"metrics\":[],\"minReplicas\":1,\"targetCPUUtilizationPercentage\":50} Configure the HorizontalPodAutoscaler link.hpa.behavior object {} Scaling Policies link.hpa.metrics list [] metrics if targetCPUUtilizationPercentage is not set link.image.pullPolicy string \"IfNotPresent\" Image pullPolicy to use for deploying. link.image.pullSecrets list [] Image Pull Secrets link.image.repository string \"ghcr.io/janssenproject/jans/link\" Image to use for deploying. link.image.tag string \"1.0.16-1\" Image tag to use for deploying. link.livenessProbe object {\"httpGet\":{\"path\":\"/jans-link/api/v1/health/live\",\"port\":9091},\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":5} Configure the liveness healthcheck for the auth server if needed. link.livenessProbe.httpGet object {\"path\":\"/jans-link/api/v1/health/live\",\"port\":9091} http liveness probe endpoint link.pdb object {\"enabled\":true,\"maxUnavailable\":\"90%\"} Configure the PodDisruptionBudget link.readinessProbe.httpGet object {\"path\":\"jans-link/api/v1/health/ready\",\"port\":9091} http readiness probe endpoint link.replicas int 1 Service replica number. link.resources object {\"limits\":{\"cpu\":\"500m\",\"memory\":\"1000Mi\"},\"requests\":{\"cpu\":\"500m\",\"memory\":\"1000Mi\"}} Resource specs. link.resources.limits.cpu string \"500m\" CPU limit. link.resources.limits.memory string \"1000Mi\" Memory limit. link.resources.requests.cpu string \"500m\" CPU request. link.resources.requests.memory string \"1000Mi\" Memory request. link.topologySpreadConstraints object {} Configure the topology spread constraints. Notice this is a map NOT a list as in the upstream API https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/ link.usrEnvs object {\"normal\":{},\"secret\":{}} Add custom normal and secret envs to the service link.usrEnvs.normal object {} Add custom normal envs to the service variable1: value1 link.usrEnvs.secret object {} Add custom secret envs to the service variable1: value1 link.volumeMounts list [] Configure any additional volumesMounts that need to be attached to the containers link.volumes list [] Configure any additional volumes that need to be attached to the pod nginx-ingress object {\"ingress\":{\"additionalAnnotations\":{},\"additionalLabels\":{},\"authServerAdditionalAnnotations\":{},\"authServerLabels\":{},\"configApiAdditionalAnnotations\":{},\"configApiLabels\":{},\"deviceCodeAdditionalAnnotations\":{},\"deviceCodeLabels\":{},\"fido2ConfigAdditionalAnnotations\":{},\"fido2ConfigLabels\":{},\"firebaseMessagingAdditionalAnnotations\":{},\"firebaseMessagingLabels\":{},\"hosts\":[\"demoexample.jans.io\"],\"ingressClassName\":\"nginx\",\"openidAdditionalAnnotations\":{},\"openidConfigLabels\":{},\"path\":\"/\",\"scimAdditionalAnnotations\":{},\"scimConfigAdditionalAnnotations\":{},\"scimConfigLabels\":{},\"scimLabels\":{},\"tls\":[{\"hosts\":[\"demoexample.jans.io\"],\"secretName\":\"tls-certificate\"}],\"u2fAdditionalAnnotations\":{},\"u2fConfigLabels\":{},\"uma2AdditionalAnnotations\":{},\"uma2ConfigLabels\":{},\"webdiscoveryAdditionalAnnotations\":{},\"webdiscoveryLabels\":{},\"webfingerAdditionalAnnotations\":{},\"webfingerLabels\":{}}} Nginx ingress definitions chart nginx-ingress.ingress.additionalAnnotations object {} Additional annotations that will be added across all ingress definitions in the format of {cert-manager.io/issuer: \"letsencrypt-prod\"} Enable client certificate authentication nginx.ingress.kubernetes.io/auth-tls-verify-client: \"optional\" Create the secret containing the trusted ca certificates nginx.ingress.kubernetes.io/auth-tls-secret: \"janssen/tls-certificate\" Specify the verification depth in the client certificates chain nginx.ingress.kubernetes.io/auth-tls-verify-depth: \"1\" Specify if certificates are passed to upstream server nginx.ingress.kubernetes.io/auth-tls-pass-certificate-to-upstream: \"true\" nginx-ingress.ingress.additionalLabels object {} Additional labels that will be added across all ingress definitions in the format of nginx-ingress.ingress.authServerAdditionalAnnotations object {} Auth server ingress resource additional annotations. nginx-ingress.ingress.authServerLabels object {} Auth server ingress resource labels. key app is taken nginx-ingress.ingress.configApiAdditionalAnnotations object {} ConfigAPI ingress resource additional annotations. nginx-ingress.ingress.configApiLabels object {} configAPI ingress resource labels. key app is taken nginx-ingress.ingress.deviceCodeAdditionalAnnotations object {} device-code ingress resource additional annotations. nginx-ingress.ingress.deviceCodeLabels object {} device-code ingress resource labels. key app is taken nginx-ingress.ingress.fido2ConfigAdditionalAnnotations object {} fido2 config ingress resource additional annotations. nginx-ingress.ingress.fido2ConfigLabels object {} fido2 config ingress resource labels. key app is taken nginx-ingress.ingress.firebaseMessagingAdditionalAnnotations object {} Firebase Messaging ingress resource additional annotations. nginx-ingress.ingress.firebaseMessagingLabels object {} Firebase Messaging ingress resource labels. key app is taken nginx-ingress.ingress.openidAdditionalAnnotations object {} openid-configuration ingress resource additional annotations. nginx-ingress.ingress.openidConfigLabels object {} openid-configuration ingress resource labels. key app is taken nginx-ingress.ingress.scimAdditionalAnnotations object {} SCIM ingress resource additional annotations. nginx-ingress.ingress.scimConfigAdditionalAnnotations object {} SCIM config ingress resource additional annotations. nginx-ingress.ingress.scimConfigLabels object {} SCIM config ingress resource labels. key app is taken nginx-ingress.ingress.scimLabels object {} SCIM config ingress resource labels. key app is taken nginx-ingress.ingress.tls list [{\"hosts\":[\"demoexample.jans.io\"],\"secretName\":\"tls-certificate\"}] Secrets holding HTTPS CA cert and key. nginx-ingress.ingress.u2fAdditionalAnnotations object {} u2f config ingress resource additional annotations. nginx-ingress.ingress.u2fConfigLabels object {} u2f config ingress resource labels. key app is taken nginx-ingress.ingress.uma2AdditionalAnnotations object {} uma2 config ingress resource additional annotations. nginx-ingress.ingress.uma2ConfigLabels object {} uma2 config ingress resource labels. key app is taken nginx-ingress.ingress.webdiscoveryAdditionalAnnotations object {} webdiscovery ingress resource additional annotations. nginx-ingress.ingress.webdiscoveryLabels object {} webdiscovery ingress resource labels. key app is taken nginx-ingress.ingress.webfingerAdditionalAnnotations object {} webfinger ingress resource additional annotations. nginx-ingress.ingress.webfingerLabels object {} webfinger ingress resource labels. key app is taken opendj object {\"additionalAnnotations\":{},\"additionalLabels\":{},\"backup\":{\"cronJobSchedule\":\"*/59 * * * *\",\"enabled\":true},\"dnsConfig\":{},\"dnsPolicy\":\"\",\"hpa\":{\"behavior\":{},\"enabled\":true,\"maxReplicas\":10,\"metrics\":[],\"minReplicas\":1,\"targetCPUUtilizationPercentage\":50},\"image\":{\"pullPolicy\":\"IfNotPresent\",\"pullSecrets\":[],\"repository\":\"gluufederation/opendj\",\"tag\":\"5.0.0_dev\"},\"lifecycle\":{\"preStop\":{\"exec\":{\"command\":[\"/bin/sh\",\"-c\",\"python3 /app/scripts/deregister_peer.py 1>&/proc/1/fd/1\"]}}},\"livenessProbe\":{\"exec\":{\"command\":[\"python3\",\"/app/scripts/healthcheck.py\"]},\"failureThreshold\":20,\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":5},\"pdb\":{\"enabled\":true,\"maxUnavailable\":1},\"persistence\":{\"size\":\"5Gi\"},\"ports\":{\"tcp-admin\":{\"nodePort\":\"\",\"port\":4444,\"protocol\":\"TCP\",\"targetPort\":4444},\"tcp-ldap\":{\"nodePort\":\"\",\"port\":1389,\"protocol\":\"TCP\",\"targetPort\":1389},\"tcp-ldaps\":{\"nodePort\":\"\",\"port\":1636,\"protocol\":\"TCP\",\"targetPort\":1636},\"tcp-repl\":{\"nodePort\":\"\",\"port\":8989,\"protocol\":\"TCP\",\"targetPort\":8989},\"tcp-serf\":{\"nodePort\":\"\",\"port\":7946,\"protocol\":\"TCP\",\"targetPort\":7946},\"udp-serf\":{\"nodePort\":\"\",\"port\":7946,\"protocol\":\"UDP\",\"targetPort\":7946}},\"readinessProbe\":{\"failureThreshold\":20,\"initialDelaySeconds\":60,\"periodSeconds\":25,\"tcpSocket\":{\"port\":1636},\"timeoutSeconds\":5},\"replicas\":1,\"resources\":{\"limits\":{\"cpu\":\"1500m\",\"memory\":\"2000Mi\"},\"requests\":{\"cpu\":\"1500m\",\"memory\":\"2000Mi\"}},\"topologySpreadConstraints\":{},\"usrEnvs\":{\"normal\":{},\"secret\":{}},\"volumeMounts\":[],\"volumes\":[]} OpenDJ is a directory server which implements a wide range of Lightweight Directory Access Protocol and related standards, including full compliance with LDAPv3 but also support for Directory Service Markup Language (DSMLv2).Written in Java, OpenDJ offers multi-master replication, access control, and many extensions. opendj.additionalAnnotations object {} Additional annotations that will be added across the gateway in the format of opendj.additionalLabels object {} Additional labels that will be added across the gateway in the format of opendj.backup object {\"cronJobSchedule\":\"*/59 * * * *\",\"enabled\":true} Configure ldap backup cronjob opendj.dnsConfig object {} Add custom dns config opendj.dnsPolicy string \"\" Add custom dns policy opendj.hpa object {\"behavior\":{},\"enabled\":true,\"maxReplicas\":10,\"metrics\":[],\"minReplicas\":1,\"targetCPUUtilizationPercentage\":50} Configure the HorizontalPodAutoscaler opendj.hpa.behavior object {} Scaling Policies opendj.hpa.metrics list [] metrics if targetCPUUtilizationPercentage is not set opendj.image.pullPolicy string \"IfNotPresent\" Image pullPolicy to use for deploying. opendj.image.pullSecrets list [] Image Pull Secrets opendj.image.repository string \"gluufederation/opendj\" Image to use for deploying. opendj.image.tag string \"5.0.0_dev\" Image tag to use for deploying. opendj.livenessProbe object {\"exec\":{\"command\":[\"python3\",\"/app/scripts/healthcheck.py\"]},\"failureThreshold\":20,\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":5} Configure the liveness healthcheck for OpenDJ if needed. https://github.com/GluuFederation/docker-opendj/blob/master/scripts/healthcheck.py opendj.livenessProbe.exec object {\"command\":[\"python3\",\"/app/scripts/healthcheck.py\"]} Executes the python3 healthcheck. opendj.pdb object {\"enabled\":true,\"maxUnavailable\":1} Configure the PodDisruptionBudget opendj.persistence.size string \"5Gi\" OpenDJ volume size opendj.readinessProbe object {\"failureThreshold\":20,\"initialDelaySeconds\":60,\"periodSeconds\":25,\"tcpSocket\":{\"port\":1636},\"timeoutSeconds\":5} Configure the readiness healthcheck for OpenDJ if needed. https://github.com/GluuFederation/docker-opendj/blob/master/scripts/healthcheck.py opendj.replicas int 1 Service replica number. opendj.resources object {\"limits\":{\"cpu\":\"1500m\",\"memory\":\"2000Mi\"},\"requests\":{\"cpu\":\"1500m\",\"memory\":\"2000Mi\"}} Resource specs. opendj.resources.limits.cpu string \"1500m\" CPU limit. opendj.resources.limits.memory string \"2000Mi\" Memory limit. opendj.resources.requests.cpu string \"1500m\" CPU request. opendj.resources.requests.memory string \"2000Mi\" Memory request. opendj.topologySpreadConstraints object {} Configure the topology spread constraints. Notice this is a map NOT a list as in the upstream API https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/ opendj.usrEnvs object {\"normal\":{},\"secret\":{}} Add custom normal and secret envs to the service opendj.usrEnvs.normal object {} Add custom normal envs to the service variable1: value1 opendj.usrEnvs.secret object {} Add custom secret envs to the service variable1: value1 opendj.volumeMounts list [] Configure any additional volumesMounts that need to be attached to the containers opendj.volumes list [] Configure any additional volumes that need to be attached to the pod persistence object {\"additionalAnnotations\":{},\"additionalLabels\":{},\"dnsConfig\":{},\"dnsPolicy\":\"\",\"image\":{\"pullPolicy\":\"IfNotPresent\",\"pullSecrets\":[],\"repository\":\"ghcr.io/janssenproject/jans/persistence-loader\",\"tag\":\"1.0.16-1\"},\"lifecycle\":{},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"}},\"usrEnvs\":{\"normal\":{},\"secret\":{}},\"volumeMounts\":[],\"volumes\":[]} Job to generate data and initial config for Janssen Server persistence layer. persistence.additionalAnnotations object {} Additional annotations that will be added across the gateway in the format of persistence.additionalLabels object {} Additional labels that will be added across the gateway in the format of persistence.dnsConfig object {} Add custom dns config persistence.dnsPolicy string \"\" Add custom dns policy persistence.image.pullPolicy string \"IfNotPresent\" Image pullPolicy to use for deploying. persistence.image.pullSecrets list [] Image Pull Secrets persistence.image.repository string \"ghcr.io/janssenproject/jans/persistence-loader\" Image to use for deploying. persistence.image.tag string \"1.0.16-1\" Image tag to use for deploying. persistence.resources object {\"limits\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"300Mi\"}} Resource specs. persistence.resources.limits.cpu string \"300m\" CPU limit persistence.resources.limits.memory string \"300Mi\" Memory limit. persistence.resources.requests.cpu string \"300m\" CPU request. persistence.resources.requests.memory string \"300Mi\" Memory request. persistence.usrEnvs object {\"normal\":{},\"secret\":{}} Add custom normal and secret envs to the service persistence.usrEnvs.normal object {} Add custom normal envs to the service variable1: value1 persistence.usrEnvs.secret object {} Add custom secret envs to the service variable1: value1 persistence.volumeMounts list [] Configure any additional volumesMounts that need to be attached to the containers persistence.volumes list [] Configure any additional volumes that need to be attached to the pod scim object {\"additionalAnnotations\":{},\"additionalLabels\":{},\"dnsConfig\":{},\"dnsPolicy\":\"\",\"hpa\":{\"behavior\":{},\"enabled\":true,\"maxReplicas\":10,\"metrics\":[],\"minReplicas\":1,\"targetCPUUtilizationPercentage\":50},\"image\":{\"pullPolicy\":\"IfNotPresent\",\"pullSecrets\":[],\"repository\":\"ghcr.io/janssenproject/jans/scim\",\"tag\":\"1.0.16-1\"},\"lifecycle\":{},\"livenessProbe\":{\"httpGet\":{\"path\":\"/jans-scim/sys/health-check\",\"port\":8080},\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":5},\"pdb\":{\"enabled\":true,\"maxUnavailable\":\"90%\"},\"readinessProbe\":{\"httpGet\":{\"path\":\"/jans-scim/sys/health-check\",\"port\":8080},\"initialDelaySeconds\":25,\"periodSeconds\":25,\"timeoutSeconds\":5},\"replicas\":1,\"resources\":{\"limits\":{\"cpu\":\"1000m\",\"memory\":\"1000Mi\"},\"requests\":{\"cpu\":\"1000m\",\"memory\":\"1000Mi\"}},\"service\":{\"name\":\"http-scim\",\"port\":8080},\"topologySpreadConstraints\":{},\"usrEnvs\":{\"normal\":{},\"secret\":{}},\"volumeMounts\":[],\"volumes\":[]} System for Cross-domain Identity Management (SCIM) version 2.0 scim.additionalAnnotations object {} Additional annotations that will be added across the gateway in the format of scim.additionalLabels object {} Additional labels that will be added across the gateway in the format of scim.dnsConfig object {} Add custom dns config scim.dnsPolicy string \"\" Add custom dns policy scim.hpa object {\"behavior\":{},\"enabled\":true,\"maxReplicas\":10,\"metrics\":[],\"minReplicas\":1,\"targetCPUUtilizationPercentage\":50} Configure the HorizontalPodAutoscaler scim.hpa.behavior object {} Scaling Policies scim.hpa.metrics list [] metrics if targetCPUUtilizationPercentage is not set scim.image.pullPolicy string \"IfNotPresent\" Image pullPolicy to use for deploying. scim.image.pullSecrets list [] Image Pull Secrets scim.image.repository string \"ghcr.io/janssenproject/jans/scim\" Image to use for deploying. scim.image.tag string \"1.0.16-1\" Image tag to use for deploying. scim.livenessProbe object {\"httpGet\":{\"path\":\"/jans-scim/sys/health-check\",\"port\":8080},\"initialDelaySeconds\":30,\"periodSeconds\":30,\"timeoutSeconds\":5} Configure the liveness healthcheck for SCIM if needed. scim.livenessProbe.httpGet.path string \"/jans-scim/sys/health-check\" http liveness probe endpoint scim.pdb object {\"enabled\":true,\"maxUnavailable\":\"90%\"} Configure the PodDisruptionBudget scim.readinessProbe object {\"httpGet\":{\"path\":\"/jans-scim/sys/health-check\",\"port\":8080},\"initialDelaySeconds\":25,\"periodSeconds\":25,\"timeoutSeconds\":5} Configure the readiness healthcheck for the SCIM if needed. scim.readinessProbe.httpGet.path string \"/jans-scim/sys/health-check\" http readiness probe endpoint scim.replicas int 1 Service replica number. scim.resources.limits.cpu string \"1000m\" CPU limit. scim.resources.limits.memory string \"1000Mi\" Memory limit. scim.resources.requests.cpu string \"1000m\" CPU request. scim.resources.requests.memory string \"1000Mi\" Memory request. scim.service.name string \"http-scim\" The name of the scim port within the scim service. Please keep it as default. scim.service.port int 8080 Port of the scim service. Please keep it as default. scim.topologySpreadConstraints object {} Configure the topology spread constraints. Notice this is a map NOT a list as in the upstream API https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/ scim.usrEnvs object {\"normal\":{},\"secret\":{}} Add custom normal and secret envs to the service scim.usrEnvs.normal object {} Add custom normal envs to the service variable1: value1 scim.usrEnvs.secret object {} Add custom secret envs to the service variable1: value1 scim.volumeMounts list [] Configure any additional volumesMounts that need to be attached to the containers scim.volumes list [] Configure any additional volumes that need to be attached to the pod Autogenerated from chart metadata using helm-docs v1.11.0","title":"Values"},{"location":"admin/scim/","tags":["administration","scim"],"text":"Overview # S ystem for C ross-domain I dentity M anagement, in short SCIM , is a specification that simplifies the exchange of user identity information across different domains. The Janssen Server provides implementation for the SCIM specification. The specification defines reference schemas for users and groups along with REST API to manage them. For more details, refer to the current version of the specification that is governed by the following documents: RFC 7642 , RFC 7643 , and RFC 7644 . Developers can think of SCIM merely as a REST API with endpoints exposing CRUD functionality (create, read, update and delete). This section covers how to configure, protect and monitor the Janssen Server SCIM module and its APIs.","title":"Overview"},{"location":"admin/scim/#overview","text":"S ystem for C ross-domain I dentity M anagement, in short SCIM , is a specification that simplifies the exchange of user identity information across different domains. The Janssen Server provides implementation for the SCIM specification. The specification defines reference schemas for users and groups along with REST API to manage them. For more details, refer to the current version of the specification that is governed by the following documents: RFC 7642 , RFC 7643 , and RFC 7644 . Developers can think of SCIM merely as a REST API with endpoints exposing CRUD functionality (create, read, update and delete). This section covers how to configure, protect and monitor the Janssen Server SCIM module and its APIs.","title":"Overview"},{"location":"admin/scim/bulk-users/","tags":["administration","scim","bulk-users"],"text":"Adding user in bulk # SCIM supports a bulk operation allowing consumers of the service to send multiple resource operations in a single request. This means the body of a bulk operation may contain one or more operations belonging to any of the supported HTTP verbs, e.g., POST, PUT, DELETE, etc. This feature is useful, for instance, to create several users at once as we'll see below. Endpoint # The bulk endpoint is accessible at https://<your-server-mame>/jans-scim/restv1/v2/Bulk . Requests must be sent with a bearer token having scope https://jans.io/scim/bulk Bulk payload # A bulk is structured as a JSON document with two required properties: schemas : A list with the single string value urn:ietf:params:scim:api:messages:2.0:BulkRequest Operations : A JSON array describing every operation to perform in the order provided An operation is a JSON document with the following: method : The HTTP verb of the operation to perform path : The path of the actual endpoint to hit relative to the SCIM root. For instance, to create a user, it will be /Users data : The payload of the actual operation. This is required only for POST, PUT, or PATCH Payload example for adding users # { \"schemas\": [ \"urn:ietf:params:scim:api:messages:2.0:BulkRequest\" ], \"Operations\": [ { \"method\": \"POST\", \"path\": \"/Users\", \"data\": { \"schemas\": [\"urn:ietf:params:scim:schemas:core:2.0:User\"], \"userName\": \"alanis\" } }, { \"method\": \"POST\", \"path\": \"/Users\", \"data\": { \"schemas\": [\"urn:ietf:params:scim:schemas:core:2.0:User\"], \"userName\": \"sheryl\", \"active\": true, \"password\": \"top-secret\", \"roles\": [{ \"value\" : \"Master of puppets\" }] } }, { \"method\": \"POST\", \"path\": \"/Users\", \"data\": { \"schemas\": [\"urn:ietf:params:scim:schemas:core:2.0:User\"], \"userName\": \"becca\", \"externalId\":\"becca_ponx_1234\", \"name\":{ \"familyName\": \"Cadalzo\", \"givenName\": \"Rebecca\" } } } ] } } The above paylod illustrates how to insert three users with different details each. Bulk response # The result of a bulk operation is likewise retrieved in JSON object format: schemas : A list with the single string value urn:ietf:params:scim:api:messages:2.0:BulkResponse Operations : A JSON array describing the response of every operation performed whether failed or successful An operation is a JSON document with the following: method : The HTTP verb of the operation performed location : The resource endpoint URL. For example, in the case of user creation, this will be the URL where the user's details can be retrieved status : A string value reporting the HTTP response code obtained for the given operation response : A JSON object only present when the status does not belong to the 2XX (success) family. It contains details of the error that occurred Response example # The following contains a potential response obtained for the bulk request mentioned earlier: { \"schemas\": [\"urn:ietf:params:scim:api:messages:2.0:BulkResponse\"], \"Operations\": [ { \"method\": \"POST\", \"location\": \"https://acme.co/jans-scim/restv1/v2/Users/92b725cd\", \"status\": \"201\" }, { \"method\": \"POST\", \"location\": \"https://acme.co/jans-scim/restv1/v2/Users/a27725cf\", \"status\": \"201\" }, { \"method\": \"POST\", \"status\": \"409\", \"response\":{ \"schemas\": [\"urn:ietf:params:scim:api:messages:2.0:Error\"], \"scimType\": \"uniqueness\" \"detail\": \"User 'becca' already exists\" } } ] } Bulk operation configuration # SCIM Jans server has a couple of configuration properties related to bulk operations: bulkMaxOperations : The maximum number of operations per bulk request. Default is 30 bulkMaxPayloadSize : The maximum payload size in bytes. Default value is 3072000","title":"Bulk Adding Users"},{"location":"admin/scim/bulk-users/#adding-user-in-bulk","text":"SCIM supports a bulk operation allowing consumers of the service to send multiple resource operations in a single request. This means the body of a bulk operation may contain one or more operations belonging to any of the supported HTTP verbs, e.g., POST, PUT, DELETE, etc. This feature is useful, for instance, to create several users at once as we'll see below.","title":"Adding user in bulk"},{"location":"admin/scim/bulk-users/#endpoint","text":"The bulk endpoint is accessible at https://<your-server-mame>/jans-scim/restv1/v2/Bulk . Requests must be sent with a bearer token having scope https://jans.io/scim/bulk","title":"Endpoint"},{"location":"admin/scim/bulk-users/#bulk-payload","text":"A bulk is structured as a JSON document with two required properties: schemas : A list with the single string value urn:ietf:params:scim:api:messages:2.0:BulkRequest Operations : A JSON array describing every operation to perform in the order provided An operation is a JSON document with the following: method : The HTTP verb of the operation to perform path : The path of the actual endpoint to hit relative to the SCIM root. For instance, to create a user, it will be /Users data : The payload of the actual operation. This is required only for POST, PUT, or PATCH","title":"Bulk payload"},{"location":"admin/scim/bulk-users/#payload-example-for-adding-users","text":"{ \"schemas\": [ \"urn:ietf:params:scim:api:messages:2.0:BulkRequest\" ], \"Operations\": [ { \"method\": \"POST\", \"path\": \"/Users\", \"data\": { \"schemas\": [\"urn:ietf:params:scim:schemas:core:2.0:User\"], \"userName\": \"alanis\" } }, { \"method\": \"POST\", \"path\": \"/Users\", \"data\": { \"schemas\": [\"urn:ietf:params:scim:schemas:core:2.0:User\"], \"userName\": \"sheryl\", \"active\": true, \"password\": \"top-secret\", \"roles\": [{ \"value\" : \"Master of puppets\" }] } }, { \"method\": \"POST\", \"path\": \"/Users\", \"data\": { \"schemas\": [\"urn:ietf:params:scim:schemas:core:2.0:User\"], \"userName\": \"becca\", \"externalId\":\"becca_ponx_1234\", \"name\":{ \"familyName\": \"Cadalzo\", \"givenName\": \"Rebecca\" } } } ] } } The above paylod illustrates how to insert three users with different details each.","title":"Payload example for adding users"},{"location":"admin/scim/bulk-users/#bulk-response","text":"The result of a bulk operation is likewise retrieved in JSON object format: schemas : A list with the single string value urn:ietf:params:scim:api:messages:2.0:BulkResponse Operations : A JSON array describing the response of every operation performed whether failed or successful An operation is a JSON document with the following: method : The HTTP verb of the operation performed location : The resource endpoint URL. For example, in the case of user creation, this will be the URL where the user's details can be retrieved status : A string value reporting the HTTP response code obtained for the given operation response : A JSON object only present when the status does not belong to the 2XX (success) family. It contains details of the error that occurred","title":"Bulk response"},{"location":"admin/scim/bulk-users/#response-example","text":"The following contains a potential response obtained for the bulk request mentioned earlier: { \"schemas\": [\"urn:ietf:params:scim:api:messages:2.0:BulkResponse\"], \"Operations\": [ { \"method\": \"POST\", \"location\": \"https://acme.co/jans-scim/restv1/v2/Users/92b725cd\", \"status\": \"201\" }, { \"method\": \"POST\", \"location\": \"https://acme.co/jans-scim/restv1/v2/Users/a27725cf\", \"status\": \"201\" }, { \"method\": \"POST\", \"status\": \"409\", \"response\":{ \"schemas\": [\"urn:ietf:params:scim:api:messages:2.0:Error\"], \"scimType\": \"uniqueness\" \"detail\": \"User 'becca' already exists\" } } ] }","title":"Response example"},{"location":"admin/scim/bulk-users/#bulk-operation-configuration","text":"SCIM Jans server has a couple of configuration properties related to bulk operations: bulkMaxOperations : The maximum number of operations per bulk request. Default is 30 bulkMaxPayloadSize : The maximum payload size in bytes. Default value is 3072000","title":"Bulk operation configuration"},{"location":"admin/scim/config/","tags":["administration","scim","configuration"],"text":"SCIM configuration # Relevant configuration properties of the Jans SCIM server are summarized in the table below: Property Default value Description maxCount 200 Maximum number of results per page in search endpoints bulkMaxOperations 30 Maximum number of operations admitted in a single bulk request bulkMaxPayloadSize 3072000 Maximum payload size in bytes admitted in a single bulk request userExtensionSchemaURI urn:ietf:params:scim:schemas:extension:gluu:2.0:User URI schema associated to the User Extension loggingLevel INFO The logging level Configuration management using CLI # To retrieve the current server configuration run the command python3 /opt/jans/jans-cli/config-cli.py --operation-id get-scim-config To modify some aspect of the retrieved configuration prepare a PATCH request in JSON format. For instance: [ { \"op\":\"replace\", \"path\": \"bulkMaxOperations\", \"value\": 100 }, { \"op\":\"replace\", \"path\": \"loggingLevel\", \"value\": \"DEBUG\" } ] These contents should be then passed to the patch-scim-config operation, e.g. python3 /opt/jans/jans-cli/config-cli.py --operation-id patch-scim-config --data <path-to-JSON-file> . Configuration management using TUI # To retrieve the current server configuration using TUI proceed as below: Launch TUI, e.g. by running python3 /opt/jans/jans-cli/jans_cli_tui.py , and follow the prompts Highlight the SCIM tab using your keyboard's left/right arrow key Highlight the \"Get Scim Configuration\" button using the tab key Press enter You can modify the configuration in place by editing the fields of your interest. To persist the changes, highlight the \"Save\" button at the bottom and press enter When will changes take effect? # Any configuration update will take effect one minute after it has been applied whether via CLI or TUI.","title":"Configuration"},{"location":"admin/scim/config/#scim-configuration","text":"Relevant configuration properties of the Jans SCIM server are summarized in the table below: Property Default value Description maxCount 200 Maximum number of results per page in search endpoints bulkMaxOperations 30 Maximum number of operations admitted in a single bulk request bulkMaxPayloadSize 3072000 Maximum payload size in bytes admitted in a single bulk request userExtensionSchemaURI urn:ietf:params:scim:schemas:extension:gluu:2.0:User URI schema associated to the User Extension loggingLevel INFO The logging level","title":"SCIM configuration"},{"location":"admin/scim/config/#configuration-management-using-cli","text":"To retrieve the current server configuration run the command python3 /opt/jans/jans-cli/config-cli.py --operation-id get-scim-config To modify some aspect of the retrieved configuration prepare a PATCH request in JSON format. For instance: [ { \"op\":\"replace\", \"path\": \"bulkMaxOperations\", \"value\": 100 }, { \"op\":\"replace\", \"path\": \"loggingLevel\", \"value\": \"DEBUG\" } ] These contents should be then passed to the patch-scim-config operation, e.g. python3 /opt/jans/jans-cli/config-cli.py --operation-id patch-scim-config --data <path-to-JSON-file> .","title":"Configuration management using CLI"},{"location":"admin/scim/config/#configuration-management-using-tui","text":"To retrieve the current server configuration using TUI proceed as below: Launch TUI, e.g. by running python3 /opt/jans/jans-cli/jans_cli_tui.py , and follow the prompts Highlight the SCIM tab using your keyboard's left/right arrow key Highlight the \"Get Scim Configuration\" button using the tab key Press enter You can modify the configuration in place by editing the fields of your interest. To persist the changes, highlight the \"Save\" button at the bottom and press enter","title":"Configuration management using TUI"},{"location":"admin/scim/config/#when-will-changes-take-effect","text":"Any configuration update will take effect one minute after it has been applied whether via CLI or TUI.","title":"When will changes take effect?"},{"location":"admin/scim/custom-attributes/","tags":["administration","scim","custom-attributes"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Adding Custom Attributes"},{"location":"admin/scim/custom-attributes/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/scim/custom-attributes/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/scim/custom-attributes/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/scim/logs/","tags":["administration","scim"],"text":"SCIM Logs # Logs can be found under /opt/jans/jetty/jans-scim/logs in your Janssen Server. The default logging level is INFO but this can be changed to any of TRACE , DEBUG , WARN , OR ERROR via TUI. To do so launch TUI, e.g. python3 /opt/jans/jans-cli/jans_cli_tui.py , and navigate to SCIM tab. Then in \"Logging Level\" select the desired option. Finally hit \"Save\".","title":"Logs"},{"location":"admin/scim/logs/#scim-logs","text":"Logs can be found under /opt/jans/jetty/jans-scim/logs in your Janssen Server. The default logging level is INFO but this can be changed to any of TRACE , DEBUG , WARN , OR ERROR via TUI. To do so launch TUI, e.g. python3 /opt/jans/jans-cli/jans_cli_tui.py , and navigate to SCIM tab. Then in \"Logging Level\" select the desired option. Finally hit \"Save\".","title":"SCIM Logs"},{"location":"admin/scim/monitoring/","tags":["administration","scim"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Monitoring"},{"location":"admin/scim/monitoring/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/scim/monitoring/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/scim/monitoring/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/scim/oauth-protection/","tags":["administration","scim"],"text":"OAuth protection # The SCIM API endpoints are by default protected by (Bearer) OAuth 2.0 tokens. Depending on the operation, these tokens must have certain scopes for the operations to be authorized. The table below summarizes this fact: Scope Description https://jans.io/scim/users.read Query/Search user resources https://jans.io/scim/users.write Modify user resources https://jans.io/scim/groups.read Query group resources https://jans.io/scim/groups.write Modify group resources https://jans.io/scim/fido.read Query fido resources https://jans.io/scim/fido.write Modify fido resources https://jans.io/scim/fido2.read Query fido 2 resources https://jans.io/scim/fido2.write Modify fido 2 resources https://jans.io/scim/bulk Send requests to the bulk endpoint https://jans.io/scim/all-resources.search Access the root .search endpoint Correspondence of endpoints vs. scopes can be found in the SCIM OpenAPI descriptor you can find here . Client details # To obtain valid tokens, you would normally have to register a client (in the server) capable of obtaining tokens with the scopes needed. Registration is out of the scope of this document, however you can leverage the client that is already bundled in your server for SCIM interaction. With this client you can issue tokens with any SCIM-related scope. Let's obtain the credentials of this client first. In TUI, navigate to Auth Server > Clients . In the search field type SCIM (uppercase). Highlight the row that matches a client named \"SCIM Client\" and press Enter. From the \"Basic\" section, grab the \"client id\" and \"client secret\". This secret is encrypted, to decrypt it, in a terminal run /opt/jans/bin/encode.py -D ENCRYPTED-SECRET-HERE . Getting a token # This is a curl example of how to get a token valid for retrieving and modifying users (line breaks added for readability). Note the use of white space to separate scope names. curl -k -u 'CLIENT_ID:DECRYPTED_CLIENT_SECRET' -k -d grant_type=client_credentials -d scope='https://jans.io/scim/users.read https://jans.io/scim/users.write' https://your-jans-server/jans-auth/restv1/token Grab the \"access_token\" from the obtained response. Issue a request to the service # The below is a curl example of how to call an operation by passing the previously obtained token (line breaks added for readability): curl -k -G -H 'Authorization: Bearer ACCESS_TOKEN' --data-urlencode 'filter=displayName co \"Admin\"' https://your-jans-server/jans-scim/restv1/v2/Users The output should show valid SCIM (JSON) output. Account the access token is short-lived: once it expires you will get a status response of 401 and need to re-request the token as in the previous step. Deactivating OAuth mode # OAuth tokens usage is a safe, standardized approach for controlling access to resources. If for some reason you want to turn off protection you can do so by activating bypass mode: in TUI, navigate to SCIM tab and under \"Protection Mode\" select \"BYPASS\". Finally press \"Save\". Caution: keep in mind that with \"BYPASS\" you should add some sort of protection to your endpoints, say, at the network level to avoid anyone to mess with your user base among other resources.","title":"OAuth Protection"},{"location":"admin/scim/oauth-protection/#oauth-protection","text":"The SCIM API endpoints are by default protected by (Bearer) OAuth 2.0 tokens. Depending on the operation, these tokens must have certain scopes for the operations to be authorized. The table below summarizes this fact: Scope Description https://jans.io/scim/users.read Query/Search user resources https://jans.io/scim/users.write Modify user resources https://jans.io/scim/groups.read Query group resources https://jans.io/scim/groups.write Modify group resources https://jans.io/scim/fido.read Query fido resources https://jans.io/scim/fido.write Modify fido resources https://jans.io/scim/fido2.read Query fido 2 resources https://jans.io/scim/fido2.write Modify fido 2 resources https://jans.io/scim/bulk Send requests to the bulk endpoint https://jans.io/scim/all-resources.search Access the root .search endpoint Correspondence of endpoints vs. scopes can be found in the SCIM OpenAPI descriptor you can find here .","title":"OAuth protection"},{"location":"admin/scim/oauth-protection/#client-details","text":"To obtain valid tokens, you would normally have to register a client (in the server) capable of obtaining tokens with the scopes needed. Registration is out of the scope of this document, however you can leverage the client that is already bundled in your server for SCIM interaction. With this client you can issue tokens with any SCIM-related scope. Let's obtain the credentials of this client first. In TUI, navigate to Auth Server > Clients . In the search field type SCIM (uppercase). Highlight the row that matches a client named \"SCIM Client\" and press Enter. From the \"Basic\" section, grab the \"client id\" and \"client secret\". This secret is encrypted, to decrypt it, in a terminal run /opt/jans/bin/encode.py -D ENCRYPTED-SECRET-HERE .","title":"Client details"},{"location":"admin/scim/oauth-protection/#getting-a-token","text":"This is a curl example of how to get a token valid for retrieving and modifying users (line breaks added for readability). Note the use of white space to separate scope names. curl -k -u 'CLIENT_ID:DECRYPTED_CLIENT_SECRET' -k -d grant_type=client_credentials -d scope='https://jans.io/scim/users.read https://jans.io/scim/users.write' https://your-jans-server/jans-auth/restv1/token Grab the \"access_token\" from the obtained response.","title":"Getting a token"},{"location":"admin/scim/oauth-protection/#issue-a-request-to-the-service","text":"The below is a curl example of how to call an operation by passing the previously obtained token (line breaks added for readability): curl -k -G -H 'Authorization: Bearer ACCESS_TOKEN' --data-urlencode 'filter=displayName co \"Admin\"' https://your-jans-server/jans-scim/restv1/v2/Users The output should show valid SCIM (JSON) output. Account the access token is short-lived: once it expires you will get a status response of 401 and need to re-request the token as in the previous step.","title":"Issue a request to the service"},{"location":"admin/scim/oauth-protection/#deactivating-oauth-mode","text":"OAuth tokens usage is a safe, standardized approach for controlling access to resources. If for some reason you want to turn off protection you can do so by activating bypass mode: in TUI, navigate to SCIM tab and under \"Protection Mode\" select \"BYPASS\". Finally press \"Save\". Caution: keep in mind that with \"BYPASS\" you should add some sort of protection to your endpoints, say, at the network level to avoid anyone to mess with your user base among other resources.","title":"Deactivating OAuth mode"},{"location":"admin/scim/security/","tags":["administration","scim"],"text":"Security considerations # SCIM API allows administrators and developers manage a key asset in an IAM deployment, namely users. Additionally, other resources like groups and registered fido devices can be managed in Janssen Server via SCIM. Clearly, this kind of API must not be anonymously accessible. However, the SCIM standard does not define a specific mechanism to prevent unauthorized requests to endpoints. There are just a few guidelines in section 2 of RFC 7644 concerned with authentication and authorization. Currently, the Janssen server supports an OAuth-based mechanism to protect these endpoints; you can find more information in this regard here . Nonetheless, it is recommended not to expose this API outside the organization's network. Ideally administrators should block any external attempt to access URLs under the path https://your-jans-server/jans-scim .","title":"Security Considerations"},{"location":"admin/scim/security/#security-considerations","text":"SCIM API allows administrators and developers manage a key asset in an IAM deployment, namely users. Additionally, other resources like groups and registered fido devices can be managed in Janssen Server via SCIM. Clearly, this kind of API must not be anonymously accessible. However, the SCIM standard does not define a specific mechanism to prevent unauthorized requests to endpoints. There are just a few guidelines in section 2 of RFC 7644 concerned with authentication and authorization. Currently, the Janssen server supports an OAuth-based mechanism to protect these endpoints; you can find more information in this regard here . Nonetheless, it is recommended not to expose this API outside the organization's network. Ideally administrators should block any external attempt to access URLs under the path https://your-jans-server/jans-scim .","title":"Security considerations"},{"location":"admin/terraform/","tags":["administration","terraform","operations","automation","IaC","Infrastructure as Code"],"text":"Benefits of Terraform and IaC # Consistency: you create one Terraform configuration and use it to configure environments repeatedly. Minimized human error: the configuration is now as code and is deployed automatically. Fast: with a single command, you can have all your configuration provisioned. Observability: the configuration are made as code , you now have one place to review all the configuration and who changed what. Janssen Terraform provider # Note Every instance of Janssen comes with a set of configurations, which are valid for the whole instance. These resources cannot be created or destroyed, as they are always present in a Janssen instance. Instead, they can be imported and updated. The creation of such a resource will result in an error. Deletion on the other hand will result in the resource being removed from the state file. The Janssen Terraform provider is used to manage resources in a Janssen deployment. This includes all configurations, users, groups, OIDC clients, and more. Directory structure # The directory holding Terraform configuration files may look like the following: |-- versions.tf: specify the required providers, i.e. Janssen, with their respective version |-- backend.tf: defines where the state file of the current infrastructure will be stored. Terraform keeps track of the managed resources using the Terraform state file. |-- variables.tf: specify the variables, with their type and optionally the default values. |-- configurations.tf: using the Jans provider and creating other resources. |-- clients.tf: file that holds the configuration for Janssen clients creation if needed. |-- scopes.tf: file that holds the configuration for Janssen scopes creation if needed. |-- scripts.tf: file that holds the configuration for Janssen scripts creation if needed. Example - Configure Janssen # Let's have an example on importing the current logging level of a deployment and changing it using Terraform. Configure Terraform to install the required plugins for the Janssen provider . Add this to your versions.tf file: terraform { required_providers { jans = { source = \"JanssenProject/jans\" version = \"0.7.0\" } } } Now we can run terraform init , which will fetch the plugins needed. In backend.tf we define where we store the Terraform state file. By default it's stored locally. However, configuring a remote backend like S3 to store the state file allows multiple people to collaborate and work on the same infrastructure. terraform { backend \"local\" { path = \"relative/path/to/terraform.tfstate\" } } Have a client_id and client_secret with sufficient scopes and permissions. VM: grab client_id and client_pw from /opt/jans/jans-setup/setup.properties.last file. K8s: client_id: kubectl get cm cn -n <namespace> -o yaml | grep test_client_id Get client_secret: kubectl get secret cn -n <namespace> -o yaml | grep test_client_pw . This client secret has to be decoded before use. Decode the client_secret: echo \"client_secret\" | base64 -d In your variables.tf file, add your client_id , client_secret and FQDN variable \"jans_fqdn\" { description = \"Jans FQQN\" type = string default = \"https://demoexample.jans.org\" #Replace with https://<YOUR_DOMAIN> } variable \"jans_client_id\" { description = \"The Jans client id with sufficient scopes\" type = string default = \"1800.b8c31be4-952b-4770-b1e8-824187e940c9\" #Replace with your client id } variable \"jans_client_secret\" { description = \"The Jans client secret with sufficient scopes\" type = string default = \"mf7ELLeF6JSI\" #Replace with your client secret } Configure the provider section in configurations.tf file: provider \"jans\" { url = var.jans_fqdn client_id = var.jans_client_id client_secret = var.jans_client_secret insecure_client = true # Optional. If set to `true`, the provider will not verify the TLS certificate of the Janssen server. This is useful for testing purposes and should not be used in production, unless absolutely unavoidable. } Before importing, we have to define an empty resource in configurations.tf : resource \"jans_logging_configuration\" \"global\" { } Import: terraform import jans_logging_configuration.global global Now after importing, the logging configuration is in Terraform state file, i.e. terraform.tfstate, and it's under Terraform management. terraform state list will output: jans_logging_configuration.global You can see the current logging configuration details using terraform state show jans_logging_configuration.global which will output something like that: # jans_logging_configuration.global: resource \"jans_logging_configuration\" \"global\" { disable_jdk_logger = true enabled_oauth_audit_logging = false http_logging_enabled = false http_logging_exclude_paths = [] id = \"jans_logging_configuration\" logging_layout = \"text\" logging_level = \"INFO\" } As you can see the current logging level is INFO . We can double-check that in the TUI Add configuration to your configuration.tf file resource \"jans_logging_configuration\" \"global\" { logging_level = \"TRACE\" } You can run terraform fmt to rewrite Terraform configuration files to a canonical format and style. You can validate your Terraform syntax using terraform validate Plan and then apply changes using terraform plan and terraform apply respectivley. Review the changes now using terraform state show jans_logging_configuration.global . Now it should show logging_level = \"TRACE\" . We can double-check the logging level in the TUI Note You can find the full list of resources you can import and manage using Terraform under the Resources sidebar in the Janssen Terraform documentation","title":"Index"},{"location":"admin/terraform/#benefits-of-terraform-and-iac","text":"Consistency: you create one Terraform configuration and use it to configure environments repeatedly. Minimized human error: the configuration is now as code and is deployed automatically. Fast: with a single command, you can have all your configuration provisioned. Observability: the configuration are made as code , you now have one place to review all the configuration and who changed what.","title":"Benefits of Terraform and IaC"},{"location":"admin/terraform/#janssen-terraform-provider","text":"Note Every instance of Janssen comes with a set of configurations, which are valid for the whole instance. These resources cannot be created or destroyed, as they are always present in a Janssen instance. Instead, they can be imported and updated. The creation of such a resource will result in an error. Deletion on the other hand will result in the resource being removed from the state file. The Janssen Terraform provider is used to manage resources in a Janssen deployment. This includes all configurations, users, groups, OIDC clients, and more.","title":"Janssen Terraform provider"},{"location":"admin/terraform/#directory-structure","text":"The directory holding Terraform configuration files may look like the following: |-- versions.tf: specify the required providers, i.e. Janssen, with their respective version |-- backend.tf: defines where the state file of the current infrastructure will be stored. Terraform keeps track of the managed resources using the Terraform state file. |-- variables.tf: specify the variables, with their type and optionally the default values. |-- configurations.tf: using the Jans provider and creating other resources. |-- clients.tf: file that holds the configuration for Janssen clients creation if needed. |-- scopes.tf: file that holds the configuration for Janssen scopes creation if needed. |-- scripts.tf: file that holds the configuration for Janssen scripts creation if needed.","title":"Directory structure"},{"location":"admin/terraform/#example-configure-janssen","text":"Let's have an example on importing the current logging level of a deployment and changing it using Terraform. Configure Terraform to install the required plugins for the Janssen provider . Add this to your versions.tf file: terraform { required_providers { jans = { source = \"JanssenProject/jans\" version = \"0.7.0\" } } } Now we can run terraform init , which will fetch the plugins needed. In backend.tf we define where we store the Terraform state file. By default it's stored locally. However, configuring a remote backend like S3 to store the state file allows multiple people to collaborate and work on the same infrastructure. terraform { backend \"local\" { path = \"relative/path/to/terraform.tfstate\" } } Have a client_id and client_secret with sufficient scopes and permissions. VM: grab client_id and client_pw from /opt/jans/jans-setup/setup.properties.last file. K8s: client_id: kubectl get cm cn -n <namespace> -o yaml | grep test_client_id Get client_secret: kubectl get secret cn -n <namespace> -o yaml | grep test_client_pw . This client secret has to be decoded before use. Decode the client_secret: echo \"client_secret\" | base64 -d In your variables.tf file, add your client_id , client_secret and FQDN variable \"jans_fqdn\" { description = \"Jans FQQN\" type = string default = \"https://demoexample.jans.org\" #Replace with https://<YOUR_DOMAIN> } variable \"jans_client_id\" { description = \"The Jans client id with sufficient scopes\" type = string default = \"1800.b8c31be4-952b-4770-b1e8-824187e940c9\" #Replace with your client id } variable \"jans_client_secret\" { description = \"The Jans client secret with sufficient scopes\" type = string default = \"mf7ELLeF6JSI\" #Replace with your client secret } Configure the provider section in configurations.tf file: provider \"jans\" { url = var.jans_fqdn client_id = var.jans_client_id client_secret = var.jans_client_secret insecure_client = true # Optional. If set to `true`, the provider will not verify the TLS certificate of the Janssen server. This is useful for testing purposes and should not be used in production, unless absolutely unavoidable. } Before importing, we have to define an empty resource in configurations.tf : resource \"jans_logging_configuration\" \"global\" { } Import: terraform import jans_logging_configuration.global global Now after importing, the logging configuration is in Terraform state file, i.e. terraform.tfstate, and it's under Terraform management. terraform state list will output: jans_logging_configuration.global You can see the current logging configuration details using terraform state show jans_logging_configuration.global which will output something like that: # jans_logging_configuration.global: resource \"jans_logging_configuration\" \"global\" { disable_jdk_logger = true enabled_oauth_audit_logging = false http_logging_enabled = false http_logging_exclude_paths = [] id = \"jans_logging_configuration\" logging_layout = \"text\" logging_level = \"INFO\" } As you can see the current logging level is INFO . We can double-check that in the TUI Add configuration to your configuration.tf file resource \"jans_logging_configuration\" \"global\" { logging_level = \"TRACE\" } You can run terraform fmt to rewrite Terraform configuration files to a canonical format and style. You can validate your Terraform syntax using terraform validate Plan and then apply changes using terraform plan and terraform apply respectivley. Review the changes now using terraform state show jans_logging_configuration.global . Now it should show logging_level = \"TRACE\" . We can double-check the logging level in the TUI Note You can find the full list of resources you can import and manage using Terraform under the Resources sidebar in the Janssen Terraform documentation","title":"Example - Configure Janssen"},{"location":"admin/to-be-placed/add-custom-ldifs/","text":"Contents: # Overview Using Kubernetes? Overview # This guide describes steps to load custom work to Janssen IDP. Hardware configuration # For development and POC purposes, 4GB RAM and 10 GB HDD should be available for Janssen Server. For PROD deployments, please refer installation guide . Prerequisites # Existing Janssen server installed Kubernetes # If you are using Kubernetes please follow this section. You may create several ldif files denoting each type such as custom_attributes.ldif , custom_clients.ldif ..etc. Refer to the built-in ldifs for examples. Create your custom ldif files. These can be clients, attributes, scopes or whatever custom work you need. The example will be adding a custom attribute and we will call this file custom_attributes.ldif . dn: inum=C9B1,ou=attributes,o=jans description: Maiden name of the End-User.Note that in some cultures, people can have multiple given names;all can be present, with the names being separated by space characters. displayName: Maiden Name inum: C9B1 jansAttrEditTyp: user jansAttrEditTyp: admin jansAttrName: givenName jansAttrOrigin: jansPerson jansAttrTyp: string jansAttrViewTyp: user jansAttrViewTyp: admin jansClaimName: maiden_name jansSAML1URI: urn:mace:dir:attribute-def:maidenName jansSAML2URI: urn:oid:2.5.4.42 jansStatus: active objectClass: top objectClass: jansAttr urn: urn:mace:dir:attribute-def:maidenName Create a configmap or secret depending on the if the ldif holds and secret data such as a client secret. Here, we will be creating a configmap. kubectl create cm custom-attributes -n <namespace-of-jans> -f custom_attributes.ldif # kubectl create cm custom-attributes -n jans -f custom_attributes.ldif # using a secret # kubectl create secret generic custom-attributes -n jans -f custom_attributes.ldif Mount the created configmap or secret inside your values.yaml persistence : volumes : - name : custom-attributes configMap : name : custom-attributes #- name: custom-attributes # secret: # secretName: custom-attributes # -- Configure any additional volumesMounts that need to be attached to the containers volumeMounts : - mountPath : \"/app/custom_ldif/custom_attributes.ldif\" name : custom-attributes subPath : custom_attributes.ldif Run helm upgrade to activate the persistence job. helm upgrade <release-name> janssen/janssen -f values.yaml -n <jans-namespace> Your custom work should be loaded to your persistence. This also persists any changes going forward as you upgrade.","title":"Add custom ldifs"},{"location":"admin/to-be-placed/add-custom-ldifs/#contents","text":"Overview Using Kubernetes?","title":"Contents:"},{"location":"admin/to-be-placed/add-custom-ldifs/#overview","text":"This guide describes steps to load custom work to Janssen IDP.","title":"Overview"},{"location":"admin/to-be-placed/add-custom-ldifs/#hardware-configuration","text":"For development and POC purposes, 4GB RAM and 10 GB HDD should be available for Janssen Server. For PROD deployments, please refer installation guide .","title":"Hardware configuration"},{"location":"admin/to-be-placed/add-custom-ldifs/#prerequisites","text":"Existing Janssen server installed","title":"Prerequisites"},{"location":"admin/to-be-placed/add-custom-ldifs/#kubernetes","text":"If you are using Kubernetes please follow this section. You may create several ldif files denoting each type such as custom_attributes.ldif , custom_clients.ldif ..etc. Refer to the built-in ldifs for examples. Create your custom ldif files. These can be clients, attributes, scopes or whatever custom work you need. The example will be adding a custom attribute and we will call this file custom_attributes.ldif . dn: inum=C9B1,ou=attributes,o=jans description: Maiden name of the End-User.Note that in some cultures, people can have multiple given names;all can be present, with the names being separated by space characters. displayName: Maiden Name inum: C9B1 jansAttrEditTyp: user jansAttrEditTyp: admin jansAttrName: givenName jansAttrOrigin: jansPerson jansAttrTyp: string jansAttrViewTyp: user jansAttrViewTyp: admin jansClaimName: maiden_name jansSAML1URI: urn:mace:dir:attribute-def:maidenName jansSAML2URI: urn:oid:2.5.4.42 jansStatus: active objectClass: top objectClass: jansAttr urn: urn:mace:dir:attribute-def:maidenName Create a configmap or secret depending on the if the ldif holds and secret data such as a client secret. Here, we will be creating a configmap. kubectl create cm custom-attributes -n <namespace-of-jans> -f custom_attributes.ldif # kubectl create cm custom-attributes -n jans -f custom_attributes.ldif # using a secret # kubectl create secret generic custom-attributes -n jans -f custom_attributes.ldif Mount the created configmap or secret inside your values.yaml persistence : volumes : - name : custom-attributes configMap : name : custom-attributes #- name: custom-attributes # secret: # secretName: custom-attributes # -- Configure any additional volumesMounts that need to be attached to the containers volumeMounts : - mountPath : \"/app/custom_ldif/custom_attributes.ldif\" name : custom-attributes subPath : custom_attributes.ldif Run helm upgrade to activate the persistence job. helm upgrade <release-name> janssen/janssen -f values.yaml -n <jans-namespace> Your custom work should be loaded to your persistence. This also persists any changes going forward as you upgrade.","title":"Kubernetes"},{"location":"admin/to-be-placed/google/","text":"Sign-in using Google Account # Overview # Google's OAuth 2.0 APIs can be used for both authentication and authorization. This document describes how to integrate Google's OAuth 2.0 implementation for authentication thus allowing a user to sign in using his Google account. Prerequisites # A Jans-auth Server (installation instructions here ) The Google authentication script (included in the default Gluu Server distribution); A Google account . Google API jars namely google-api-client , google-oauth-client and google-http-client-jackson2 added to jans-auth-server Google Configuration # You need OAuth 2.0 credentials, including a client ID and client secret, to authenticate users and gain access to Google's APIs. The following steps explain how to create credentials for your project. Your applications can then use the credentials to access APIs that you have enabled for that project. Go to the Credentials page . Click Create credentials > OAuth client ID. Select the Web application application type. Name your OAuth 2.0 client and click Create Configure jans-auth server # Download Google Client JSON file # On the following page, https://console.cloud.google.com/apis/credentials, you will see a table containing your recently created client. Click on the download button and download the JSON file containing details of the Client. Place this file in /etc/certs/google_client_secret.json Add Google libraries to jans-auth-server # Copy the google-api-client , google-oauth-client and google-http-client-jackson2 to the following folder inside the jans-auth Server : /opt/jans/jetty/jans-auth/custom/libs Edit /opt/jans/jetty/jans-auth/webapps/oxauth.xml and add the following line: <Set name=\"extraClasspath\">./custom/libs/google-oauth-client-1.33.1.jar,./custom/libs/google-api-client-1.33.2.jar,./custom/libs/google-http-client-jackson2-1.41.5.jar</Set></Configure> Restart the jans-auth service systemctl status jans-auth Properties # The custom script has the following properties: Property Description Input value google_creds_file Details of the client created on https://console.cloud.google.com/apis/credentials /etc/certs/google_client_secret.json Enable Google Script using Admin Console # Follow the steps below to enable Google authentication: Navigate to Admin > Scripts Find the google script. Populate the properties table : google_creds_file : /etc/certs/google_client_secret.json . Enable the script by checking the box Scroll to the bottom of the page and click Update Note To make sure Google has been enabled successfully, you can check your Gluu Server's OpenID Connect configuration by navigating to the following URL: https://<hostname>/.well-known/openid-configuration . Find \"acr_values_supported\": and you should see \"google\" . Make Google the Default Authentication mechanism # If google should be the default authentication mechanism, follow these instructions: Navigate to OAuth Server > Configuration > Defaults > ACR and Logging . Select the Default Authentication Method(Acr): to google . Click Save","title":"Sign-in using Google Account"},{"location":"admin/to-be-placed/google/#sign-in-using-google-account","text":"","title":"Sign-in using Google Account"},{"location":"admin/to-be-placed/google/#overview","text":"Google's OAuth 2.0 APIs can be used for both authentication and authorization. This document describes how to integrate Google's OAuth 2.0 implementation for authentication thus allowing a user to sign in using his Google account.","title":"Overview"},{"location":"admin/to-be-placed/google/#prerequisites","text":"A Jans-auth Server (installation instructions here ) The Google authentication script (included in the default Gluu Server distribution); A Google account . Google API jars namely google-api-client , google-oauth-client and google-http-client-jackson2 added to jans-auth-server","title":"Prerequisites"},{"location":"admin/to-be-placed/google/#google-configuration","text":"You need OAuth 2.0 credentials, including a client ID and client secret, to authenticate users and gain access to Google's APIs. The following steps explain how to create credentials for your project. Your applications can then use the credentials to access APIs that you have enabled for that project. Go to the Credentials page . Click Create credentials > OAuth client ID. Select the Web application application type. Name your OAuth 2.0 client and click Create","title":"Google Configuration"},{"location":"admin/to-be-placed/google/#configure-jans-auth-server","text":"","title":"Configure jans-auth server"},{"location":"admin/to-be-placed/google/#download-google-client-json-file","text":"On the following page, https://console.cloud.google.com/apis/credentials, you will see a table containing your recently created client. Click on the download button and download the JSON file containing details of the Client. Place this file in /etc/certs/google_client_secret.json","title":"Download Google Client JSON file"},{"location":"admin/to-be-placed/google/#add-google-libraries-to-jans-auth-server","text":"Copy the google-api-client , google-oauth-client and google-http-client-jackson2 to the following folder inside the jans-auth Server : /opt/jans/jetty/jans-auth/custom/libs Edit /opt/jans/jetty/jans-auth/webapps/oxauth.xml and add the following line: <Set name=\"extraClasspath\">./custom/libs/google-oauth-client-1.33.1.jar,./custom/libs/google-api-client-1.33.2.jar,./custom/libs/google-http-client-jackson2-1.41.5.jar</Set></Configure> Restart the jans-auth service systemctl status jans-auth","title":"Add Google libraries to jans-auth-server"},{"location":"admin/to-be-placed/google/#properties","text":"The custom script has the following properties: Property Description Input value google_creds_file Details of the client created on https://console.cloud.google.com/apis/credentials /etc/certs/google_client_secret.json","title":"Properties"},{"location":"admin/to-be-placed/google/#enable-google-script-using-admin-console","text":"Follow the steps below to enable Google authentication: Navigate to Admin > Scripts Find the google script. Populate the properties table : google_creds_file : /etc/certs/google_client_secret.json . Enable the script by checking the box Scroll to the bottom of the page and click Update Note To make sure Google has been enabled successfully, you can check your Gluu Server's OpenID Connect configuration by navigating to the following URL: https://<hostname>/.well-known/openid-configuration . Find \"acr_values_supported\": and you should see \"google\" .","title":"Enable Google Script using Admin Console"},{"location":"admin/to-be-placed/google/#make-google-the-default-authentication-mechanism","text":"If google should be the default authentication mechanism, follow these instructions: Navigate to OAuth Server > Configuration > Defaults > ACR and Logging . Select the Default Authentication Method(Acr): to google . Click Save","title":"Make Google the Default Authentication mechanism"},{"location":"admin/usermgmt/","tags":["administration","user management"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"admin/usermgmt/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/usermgmt/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/usermgmt/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/usermgmt/usermgmt-cli-tui/","tags":["administration","user management","cli","tui"],"text":"Local User Management # In this document we will cover managing people in the Jans Server's LDAP Directory, Jans CLI and Jans TUI. Manage data in Jans LDAP # All the data generated by the Jans Server is stored in the local LDAP server included in every deployment. This includes OpenID Connect client data, session data, tokens, user data, and more. Use an LDAP browser like JXplorer or Apache Directory Studio and can find the configuration in /etc/jans/conf/jans-ldap.properties , e.g.: For Jans OpenDJ, it will look like this: bindDN: cn=directory manager bindPassword: rmQQI/sax0U= servers: localhost:1636 Establish a tunnel from your computer to the target Jans Server's LDAP. Tunneling is required because Jans Server's LDAP port, 1636, is not exposed to the internet. In the below example we are showing how to connect and use Jans Server's internal LDAP server with any LDAP browser. Sign in with sudo su - Create tunnel: ssh -fNL 5902:localhost:1636 [username]@[ip_of_Jans_server] Open LDAP browser Create new connection Perform authentication. 'Password' is the the password of 'admin' user. Browse ldap and go to ou=people . Manage data in Jans TUI # We can easily add an user using Jans TUI. To manage user using Jans TUI, got to /opt/jans/jans-cli/config-cli-tui.py and select Users tab. Let's see at a glance user attributes. Attributes Description Username ... Password ... First Name ... Middle Name ... Last Name ... Display Name ... Email ... Active ... Nickname ... CIBA Device Registration Token ... CIBA User code ... Locale ... Website URL ... IMAP Data ... jansAdminUIRole ... Enrollment code ... User Permission ... Preferred Language ... Profile URL ... Secret Question ... Email Verified ... Birthdate ... Time zone info ... Phone Number verified ... Preferred Username ... TransientId ... PersistentId ... Country ... Secret Answer ... OpenID Connect JSON formatted address ... User certificate ... Organization ... Picture URL ... Let's add an user by selecting Add Users tab. Initially we can provide bellow attributes value, We can add extra claims simple by slecting Add Claim Finally save and exit. We will get an unique inum This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Using CLI/TUI"},{"location":"admin/usermgmt/usermgmt-cli-tui/#local-user-management","text":"In this document we will cover managing people in the Jans Server's LDAP Directory, Jans CLI and Jans TUI.","title":"Local User Management"},{"location":"admin/usermgmt/usermgmt-cli-tui/#manage-data-in-jans-ldap","text":"All the data generated by the Jans Server is stored in the local LDAP server included in every deployment. This includes OpenID Connect client data, session data, tokens, user data, and more. Use an LDAP browser like JXplorer or Apache Directory Studio and can find the configuration in /etc/jans/conf/jans-ldap.properties , e.g.: For Jans OpenDJ, it will look like this: bindDN: cn=directory manager bindPassword: rmQQI/sax0U= servers: localhost:1636 Establish a tunnel from your computer to the target Jans Server's LDAP. Tunneling is required because Jans Server's LDAP port, 1636, is not exposed to the internet. In the below example we are showing how to connect and use Jans Server's internal LDAP server with any LDAP browser. Sign in with sudo su - Create tunnel: ssh -fNL 5902:localhost:1636 [username]@[ip_of_Jans_server] Open LDAP browser Create new connection Perform authentication. 'Password' is the the password of 'admin' user. Browse ldap and go to ou=people .","title":"Manage data in Jans LDAP"},{"location":"admin/usermgmt/usermgmt-cli-tui/#manage-data-in-jans-tui","text":"We can easily add an user using Jans TUI. To manage user using Jans TUI, got to /opt/jans/jans-cli/config-cli-tui.py and select Users tab. Let's see at a glance user attributes. Attributes Description Username ... Password ... First Name ... Middle Name ... Last Name ... Display Name ... Email ... Active ... Nickname ... CIBA Device Registration Token ... CIBA User code ... Locale ... Website URL ... IMAP Data ... jansAdminUIRole ... Enrollment code ... User Permission ... Preferred Language ... Profile URL ... Secret Question ... Email Verified ... Birthdate ... Time zone info ... Phone Number verified ... Preferred Username ... TransientId ... PersistentId ... Country ... Secret Answer ... OpenID Connect JSON formatted address ... User certificate ... Organization ... Picture URL ... Let's add an user by selecting Add Users tab. Initially we can provide bellow attributes value, We can add extra claims simple by slecting Add Claim Finally save and exit. We will get an unique inum","title":"Manage data in Jans TUI"},{"location":"admin/usermgmt/usermgmt-cli-tui/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/usermgmt/usermgmt-cli-tui/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/usermgmt/usermgmt-cli-tui/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/usermgmt/usermgmt-jans-link/","tags":["administration","user management","jans-link"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Using jans-link"},{"location":"admin/usermgmt/usermgmt-jans-link/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/usermgmt/usermgmt-jans-link/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/usermgmt/usermgmt-jans-link/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/usermgmt/usermgmt-scim/","tags":["administration","user management","scim"],"text":"SCIM User Management # SCIM is a specification designed to reduce the complexity of user management operations by providing a common user schema and the patterns for exchanging such schema using HTTP in a platform-neutral fashion. The aim of SCIM is achieving interoperability, security, and scalability in the context of identity management. For your reference, the current version of the standard is governed by the following documents: RFC 7642 , RFC 7643 , and RFC 7644 . Installation # The API is available as a component of Jans Server. Upon installation you can select if you want SCIM included in your environment. To add SCIM post-install do the following: Run python3 /opt/jans/jans-setup/setup.py --install-scim About API endpoints # Throughout this document, you will notice endpoints are prefixed with path: /jans-scim/restv1/v2 API Protection # Clearly, this API must not be anonymously accessed. However, the basic SCIM standard does not define a specific mechanism to prevent unauthorized requests to endpoints. There are just a few guidelines in section 2 of RFC 7644 concerned with authentication and authorization. OAUTH, This is the default and recommended mechanism BYPASS Depending on the scopes associated to a token, you will be granted (or denied) access to perform certain operations. The following lists the available scopes: Scope Actions allowed https://jans.io/scim/users.read Query user resources https://jans.io/scim/users.write Modify user resources https://jans.io/scim/groups.read Query group resources https://jans.io/scim/groups.write Modify group resources https://jans.io/scim/fido.read Query fido resources https://jans.io/scim/fido.write Modify fido resources https://jans.io/scim/fido2.read Query fido 2 resources https://jans.io/scim/fido2.write Modify fido 2 resources https://jans.io/scim/all-resources.search Access the root .search endpoint https://jans.io/scim/bulk Send requests to the bulk endpoint In order to facilitate the process of getting an access token, your Janssen installation already bundles an OAuth client named \"SCIM client\" with support for all the scopes above. This client uses the client_credentials grant type and client_secret_basic mechanism to authenticate to the token endpoint. Where to locate SCIM-related logs # Please see here besides SCIM log is located at /opt/jans/jetty/jans-scim/logs/scim.log If you use SCIM custom script aslo see /opt/jans/jetty/jans-scim/logs/scim_script.log API documentation at a glance # SCIM API doc page describes about our implementation of SCIM. The API has also been documented using OpenAPI (swagger) specification for the interested. Find yaml files here . Working in OAuth mode # To know more about OAuth protection mode please visit here . The SCIM API endpoints are by default protected by (Bearer) OAuth 2.0 tokens. Depending on the operation, these tokens must have certain scopes for the operations to be authorized. We need a client to get Bearer token. Get SCIM Client # Let's obtain the credentials of this client first. In TUI, navigate to Auth Server > Clients . In the search field type SCIM (uppercase). Highlight the row that matches a client named \"SCIM Client\" and press Enter. To see in JSON formate please press d . From the \"Basic\" section, grab the \"client id\" and \"client secret\". This secret is encrypted, to decrypt it, in a terminal run /opt/jans/bin/encode.py -D ENCRYPTED-SECRET-HERE . Get Access token # Let's get a token, curl -k -u 'CLIENT_ID:DECRYPTED_CLIENT_SECRET' -k -d grant_type=client_credentials -d scope='https://jans.io/scim/users.read https://jans.io/scim/users write' https://<jans-server>/jans-auth/restv1/token > /tmp/token.json In response token.json we will get access_token { \"access_token\":\"11a76589-7955-4247-9ca5-f3ad7884305...\", \"scope\":\"https://jans.io/scim/users.read\", \"token_type\":\"Bearer\", \"expires_in\":299 } Retrive existing User # To get an existing user curl -k -G -H 'Authorization: Bearer ACCESS_TOKEN' --data-urlencode 'filter=displayName co \"Admin\"' https://<jans-server>/jans-scim/restv1/v2/Users > /tmp/user.json In response user.json we will get { \"schemas\": [ \"urn:ietf:params:scim:api:messages:2.0:ListResponse\" ], \"totalResults\": 1, \"startIndex\": 1, \"itemsPerPage\": 1, \"Resources\": [ { \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:User\" ], \"id\": \"5fdbb720-a1fd-477f-af92-b7c054f02c98\", \"meta\": { \"resourceType\": \"User\", \"created\": \"2023-06-12T14:54:09.531Z\", \"location\": \"https://raju.jans13.me/jans-scim/restv1/v2/Users/5fdbb720-a1fd-477f-af92-b7c054f02c98\" }, \"userName\": \"admin\", \"name\": { \"familyName\": \"...\", \"givenName\": \"...\", \"middleName\": \"...\", \"formatted\": \"...\" }, \"displayName\": \"Admin\", \"active\": true, \"emails\": [ { \"value\": \"example@gluu.org\", \"primary\": false } ], \"groups\": [ { \"value\": \"60B7\", \"display\": \"Jannsen Manager Group\", \"type\": \"direct\", \"$ref\": \"https://raju.jans13.me/jans-scim/restv1/v2/Groups/60B7\" } ] } ] } Creating Resource # Create an User # Let's start creating a dummy user. A client sends a POST request containing a \"User\" to the \"/Users\" endpoint. POST /Users HTTP/1.1 Host: example.com Accept: application/scim+json Content-Type: application/scim+json Authorization: Bearer h480djs93hd8.. Content-Length: ... { \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:User\" ], \"userName\": \"bjensen\", \"externalId\": \"bjensen\", \"name\": { \"formatted\": \"Ms. Barbara J Jensen III\", \"familyName\": \"Jensen\", \"givenName\": \"Barbara\" } } Open a text editor and copy paste the json body, name as input.json . Hit on your terminal with bellow command. curl -k -H 'Authorization: Bearer ACCESS_TOKEN' -H 'Content-Type: application/scim+json' -d @input.json -o output.json https://<jans-server>/jans-scim/restv1/v2/Users response looks like { \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:User\" ], \"id\": \"e3009115-b890-4d8b-bd63-bbfef34aa583\", \"externalId\": \"bjensen\", \"meta\": { \"resourceType\": \"User\", \"created\": \"2023-06-26T19:43:32.945Z\", \"lastModified\": \"2023-06-26T19:43:32.945Z\", \"location\": \"https://raju.jans13.me/jans-scim/restv1/v2/Users/e3009115-b890-4d8b-bd63-bbfef34aa583\" }, \"userName\": \"bjensen\", \"name\": { \"familyName\": \"Jensen\", \"givenName\": \"Barbara\", \"formatted\": \"Ms. Barbara J Jensen III\" } } This new user has been given an id . If possible, inspect your ou=people branch and find the entry whose inum matches the id given. An easier option would be to via Jans TUI and go to Users and search \"bjensen\" to see the recently created user. Updating a User(PUT) # Overwrite your input.json with the following. Replace content in angle brackets accordingly: { \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:User\" ], \"id\": \"e3009115-b890-4d8b-bd63-bbfef34aa583\", \"userName\": \"bjensen\", \"externalId\": \"bjensen\", \"name\": { \"formatted\": \"Ms. Barbara J Jensen III\", \"familyName\": \"Jensen\", \"givenName\": \"Barbara\" }, \"displayName\": \"Jensen Barbara\", \"emails\": [ { \"value\": \"jensen@example.com\", \"type\": \"work\", \"primary\": true } ] } PUT with curl: curl -k -X PUT -H 'Authorization: Bearer ACCESS_TOKEN' -H 'Content-Type: application/scim+json' -d @input.json -o output.json https://<jans-server>/jans-scim/restv1/v2/Users/<user-inum> Response (output.json) will show the same contents of a full retrieval. Please verify changes were applied whether by inspecting LDAP or issuing a GET. If you have followed the steps properly, you should notice a new e-mail added and the change in displayName attribute Updating a User (PATCH) # With patching, you can be very precise about the modifications you want to apply. Patching syntax follows JSON Patch spec (RFC 6902) closely. While it's not a must to read the RFC to learn how patch works, see section 3.5.2 of SCIM protocol (RFC 7644) to get the grasp. If you prefer reading code, patch test cases found in the Java scim-client project are worth to look at. The following is a simple example that illustrates the kind of modifications developers can achieve via PATCH . Overwrite your input.json with the following: { \"schemas\": [ \"urn:ietf:params:scim:api:messages:2.0:PatchOp\" ], \"Operations\": [ { \"op\": \"replace\", \"value\": { \"name\": { \"givenName\": \"Joey\" } } }, { \"op\": \"replace\", \"path\": \"emails[type eq \\\"work\\\" or primary eq false].value\", \"value\": \"jensen@example.com\" }, { \"op\": \"add\", \"value\": { \"name\": { \"middleName\": \"Jhon\" } } }, { \"op\": \"add\", \"value\": { \"emails\": [ { \"primary\": true, \"value\": \"my@own.mail\" } ], \"phoneNumbers\": [ { \"type\": \"home\", \"value\": \"5 123 8901\" }, { \"value\": \"5 123 8902\" } ] } }, { \"op\": \"remove\", \"path\": \"name.middleName\" }, { \"op\": \"remove\", \"path\": \"phoneNumbers[value ew \\\"01\\\"].type\" } ] } A collection of modification are provided under \"Operations\". They are processed in order of appearance. Also, every operation has a type; patching supports add, remove and replace. The first operations states the following: replace the value of givenName subattribute (that belongs to complex attribute name ) with the string \"Joey\". Operations are easier to understand when using a \"path\". The second operation replaces the value subattribute inside the complex multi-valued attribute emails. Inside the square brackets, we find a filter expression, so the replacement does not apply to all emails in the list but only to those matching the criterion. So the second operation can be read as \"set the value of value subattribute to string jensen@example.com where the type subattribute of the email equals to string \"work\" or if primary attribute is false\". The third operation is similar to the first. It sets the value of a subattribute which was unassigned (null). You could have used \"replace\" operation in this case and results would have been identical. The fourth operation is more interesting. It adds to the current list of emails a new one. It supplies a couple of subattributes for the email to include: primary and value. Additionally, we set the value of (previously unassigned) phoneNumbers multi-valued attribute passing a list of elements. In the fifth operation, we remove the middleName attribute that was set in operation three. Note how we make explicit the path of data to nullify: \"name.middleName\". The sixth operation allows us to remove a specific subattribute of phoneNumbers . The aim is to nullify the \"type\" of the item whose phone number value ends with \"01\". The remove operation can also be used to remove a complete item from a list, or empty the whole list by providing a suitable value for \"path\". Now let's see it in action: curl -k -X PATCH -H 'Authorization: Bearer ACCESS_TOKEN' -H 'Content-Type: application/scim+json' -d @input.json -o output.json https://<jans-server>/jans-scim/restv1/v2/Users/<user-inum> So far our resource look like this { \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:User\" ], \"id\": \"e3009115-b890-4d8b-bd63-bbfef34aa583\", \"externalId\": \"bjensen\", \"meta\": { \"resourceType\": \"User\", \"created\": \"2023-06-26T19:43:32.945Z\", \"lastModified\": \"2023-06-26T22:34:27.465Z\", \"location\": \"https://raju.jans13.me/jans-scim/restv1/v2/Users/e3009115-b890-4d8b-bd63-bbfef34aa583\" }, \"userName\": \"bjensen\", \"name\": { \"familyName\": \"Jensen\", \"givenName\": \"Joey\", \"formatted\": \"Ms. Barbara J Jensen III\" }, \"displayName\": \"Jensen Barbara\", \"active\": false, \"emails\": [ { \"value\": \"my@own.mail\", \"primary\": true }, { \"value\": \"jensen@example.com\", \"type\": \"work\", \"primary\": false } ], \"phoneNumbers\": [ { \"value\": \"5 123 8901\" }, { \"value\": \"5 123 8902\" } ] } Note the primary subattribute accompanying email \"my@own.mail\" is false but when inserted we provided true . This is because the SCIM specification states that after modifications are applied to resources (PUT or PATCH) , there cannot be more than one item in a multi-valued attribute with primary value set as true . To see more sample JSON payloads, check the .json files used by the scim-client test cases referenced above. Deleting Users # For deleting, the DELETE method of HTTP is used. No input file is used in this case. A delete request could be the following: curl -k -X DELETE -H 'Authorization: Bearer ACCESS_TOKEN' https://<jans-server>/jans-scim/restv1/v2/Users/<user-inum> Use the inum of our dummy user, Jensen Barbara . Check your LDAP or via Jans TUI to see that Bjensen is gone. How is SCIM data stored? # SCIM schema spec does not use LDAP attribute names but a different naming convention for resource attributes (note this is not the case of custom attributes where the SCIM name used is that of the LDAP attribute). It is possible to determine if a given LDAP attribute is being mapped to a SCIM attribute. For that you need to check in Jans TUI Auth-Server >> Attributes and click on any attributes. Check Include in SCIM Extension: is true or false . Whenever you try to map any LDAP attribute to a SCIM attribute keep it's value true . FIDO Devices # A FIDO device represents a user credential stored in the Jans Server LDAP that is compliant with the FIDO standard. These devices are used as a second factor in a setting of strong authentication. Having FIDO devices as one of resource types allow application developers querying, updating and deleting already existing (added) devices. Addition of devices do not take place through the service since this process requires direct end-user interaction, ie. device enrolling. The following is a summary of features of a Fido Device SCIM resource: Schema URN: urn:ietf:params:scim:schemas:core:2.0:FidoDevice Name of resource: FidoDevice Endpoint URL (relative to base URL of service): /jans-scim/restv1/v2/FidoDevices Device attributes: Attributes pertaining to this resource type are listed by visiting the URL https://<jans-server>/jans-scim/restv1/v2/Schemas/urn:ietf:params:scim:schemas:core:2.0:FidoDevice Example: Querying Enrolled Devices # Say we are interested in having a list of Super Gluu devices users have enrolled and whose operating system is iOS. In a setting of test mode, we may issue a query like this: curl -k -G -H 'Authorization: Bearer ACCESS_TOKEN' --data-urlencode 'filter=deviceData co \"ios\"' -d count=10 -o output.json https://<jans-server>/jans-scim/restv1/v2/FidoDevices In response output.json will be like that. { \"totalResults\": ..., \"itemsPerPage\": ..., \"startIndex\": 1, \"schemas\": [ \"urn:ietf:params:scim:api:messages:2.0:ListResponse\" ], \"Resources\": [ { \"id\": \"...\", \"meta\": {...}, \"schemas\": [\"urn:ietf:params:scim:schemas:core:2.0:FidoDevice\"], \"userId\": \"...\", ... \"deviceData\": \"{...}\", \"displayName\": ..., }, ... ] } FIDO 2 devices # The following is a summary of features of a Fido Device SCIM resource: Schema URN: urn:ietf:params:scim:schemas:core:2.0:Fido2Device Name of resource: Fido2Device Endpoint URL (relative to base URL of service): /jans-scim/restv1/v2/Fido2Devices Device attributes: Attributes pertaining to this resource type are listed by visiting the URL https://<jans-server>/jans-scim/restv1/v2/Schemas/urn:ietf:params:scim:schemas:core:2.0:Fido2Device Quering for enrolled devices curl -k -G -H 'Authorization: Bearer ACCESS_TOKEN' --data-urlencode -d count=10 -o output.json https://<jans-server>/jans-scim/restv1/v2/Fido2Devices Potential performance issues with Group endpoints # In SCIM a group resource basically consists of an identifier, a display name, and a collection of members associated to it. Also, every member is made up of a user identifier, his display name, and other attributes. As a consequence, retrieving group information requires making a correlation with existing user data. Since Gluu database model does not follow a relational database pattern this may entail a considerable amount of user queries when groups contain thousands of members. While this could have been workarounded by storing members' display names inside group entries, this brings additional problems to deal with. Another source of potential overhead stems from creation and modification of groups where many new users are associated to a given group: by default checks are made to guarantee only existing users are attached to groups, thus requiring continuous database queries. Currently there are two ways to lower the amount of database lookups required for SCIM group operations: Explicitly excluding display names from responses Pass the overhead bypass flag to skip members validations The first approach consists of using the query parameter excludedAttributes (see RFC 7644 ) so that display names are neither retrieved from database nor sent in responses. A value like members.display does the job. Note the query parameter attributes can also be used for this purpose, for example with a value like members.value that will output only members' identifiers and ignore other non-required attributes. This approach is particularly useful in search and retrievals when users' display names are not needed. The second is a stronger approach that turns off validation of incoming members data: if the usage of a POST/PUT/PATCH operation implies adding members, their existence is not verified, they will simply get added. Here, the client application is responsible for sending accurate data. To use this approach add a query or header parameter named Group-Overhead-Bypass with any value. Note under this mode of operation: Display names are never returned regardless of attributes or excludedAttributes parameters values Remove/replace patch operations that involve display names in path filters are ignored, eg: \"path\": \"members[value eq \\\"2819c223\\\" or display eq \\\"Joe\\\"]\" User Registration Process with SCIM # SCIM service has many use cases. One interesting and often arising is that of coding your own user registration process. With your SCIM endpoints you can build a custom application to maintain user entries in your database. Important Considerations # Here, you have some useful tips before you start: Choose a toolset you feel comfortable to work with. Keep in mind that you have to leverage the capabilities of your language/framework to issue complex HTTPS requests. Be sure that: You will be able to use at least the following verbs: GET, POST, PUT, and DELETE You can send headers in your requests as well as reading them from the service response If not supported natively, choose a library to facilitate JSON content manipulation. As you have already noticed we have been dealing with JSON for requests as well as for responses. Experience shows that being able to map from objects (or data structures) of your language to Json and viceversa helps saving hours of coding. Shape your data model early. List the attributes your application will operate upon and correlate with those found in the SCIM user schema. You can learn about the schema in RFC 7644 . At least, take a look at the JSON-formatted schema that your Jans Server shows: visit https://<host-name>/jans-scim/restv1/v2/Schemas/urn:ietf:params:scim:schemas:core:2.0:User You will have to manipulate database contents very often as you develop and run tests, thus, find a suitable tool for the task. In the case of LDAP, a TUI client is a good choice. Always check your logs . In this user management guide with SCIM, we have already touched upon the fundamentals of SCIM in Jans Server and shown a good amount of sample requests for manipulation of user information. However, keep in mind the SCIM spec documents are definitely the key reference to build working request messages, specially RFC 7643 , and RFC 7644 . This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Using SCIM"},{"location":"admin/usermgmt/usermgmt-scim/#scim-user-management","text":"SCIM is a specification designed to reduce the complexity of user management operations by providing a common user schema and the patterns for exchanging such schema using HTTP in a platform-neutral fashion. The aim of SCIM is achieving interoperability, security, and scalability in the context of identity management. For your reference, the current version of the standard is governed by the following documents: RFC 7642 , RFC 7643 , and RFC 7644 .","title":"SCIM User Management"},{"location":"admin/usermgmt/usermgmt-scim/#installation","text":"The API is available as a component of Jans Server. Upon installation you can select if you want SCIM included in your environment. To add SCIM post-install do the following: Run python3 /opt/jans/jans-setup/setup.py --install-scim","title":"Installation"},{"location":"admin/usermgmt/usermgmt-scim/#about-api-endpoints","text":"Throughout this document, you will notice endpoints are prefixed with path: /jans-scim/restv1/v2","title":"About API endpoints"},{"location":"admin/usermgmt/usermgmt-scim/#api-protection","text":"Clearly, this API must not be anonymously accessed. However, the basic SCIM standard does not define a specific mechanism to prevent unauthorized requests to endpoints. There are just a few guidelines in section 2 of RFC 7644 concerned with authentication and authorization. OAUTH, This is the default and recommended mechanism BYPASS Depending on the scopes associated to a token, you will be granted (or denied) access to perform certain operations. The following lists the available scopes: Scope Actions allowed https://jans.io/scim/users.read Query user resources https://jans.io/scim/users.write Modify user resources https://jans.io/scim/groups.read Query group resources https://jans.io/scim/groups.write Modify group resources https://jans.io/scim/fido.read Query fido resources https://jans.io/scim/fido.write Modify fido resources https://jans.io/scim/fido2.read Query fido 2 resources https://jans.io/scim/fido2.write Modify fido 2 resources https://jans.io/scim/all-resources.search Access the root .search endpoint https://jans.io/scim/bulk Send requests to the bulk endpoint In order to facilitate the process of getting an access token, your Janssen installation already bundles an OAuth client named \"SCIM client\" with support for all the scopes above. This client uses the client_credentials grant type and client_secret_basic mechanism to authenticate to the token endpoint.","title":"API Protection"},{"location":"admin/usermgmt/usermgmt-scim/#where-to-locate-scim-related-logs","text":"Please see here besides SCIM log is located at /opt/jans/jetty/jans-scim/logs/scim.log If you use SCIM custom script aslo see /opt/jans/jetty/jans-scim/logs/scim_script.log","title":"Where to locate SCIM-related logs"},{"location":"admin/usermgmt/usermgmt-scim/#api-documentation-at-a-glance","text":"SCIM API doc page describes about our implementation of SCIM. The API has also been documented using OpenAPI (swagger) specification for the interested. Find yaml files here .","title":"API documentation at a glance"},{"location":"admin/usermgmt/usermgmt-scim/#working-in-oauth-mode","text":"To know more about OAuth protection mode please visit here . The SCIM API endpoints are by default protected by (Bearer) OAuth 2.0 tokens. Depending on the operation, these tokens must have certain scopes for the operations to be authorized. We need a client to get Bearer token.","title":"Working in OAuth mode"},{"location":"admin/usermgmt/usermgmt-scim/#get-scim-client","text":"Let's obtain the credentials of this client first. In TUI, navigate to Auth Server > Clients . In the search field type SCIM (uppercase). Highlight the row that matches a client named \"SCIM Client\" and press Enter. To see in JSON formate please press d . From the \"Basic\" section, grab the \"client id\" and \"client secret\". This secret is encrypted, to decrypt it, in a terminal run /opt/jans/bin/encode.py -D ENCRYPTED-SECRET-HERE .","title":"Get SCIM Client"},{"location":"admin/usermgmt/usermgmt-scim/#get-access-token","text":"Let's get a token, curl -k -u 'CLIENT_ID:DECRYPTED_CLIENT_SECRET' -k -d grant_type=client_credentials -d scope='https://jans.io/scim/users.read https://jans.io/scim/users write' https://<jans-server>/jans-auth/restv1/token > /tmp/token.json In response token.json we will get access_token { \"access_token\":\"11a76589-7955-4247-9ca5-f3ad7884305...\", \"scope\":\"https://jans.io/scim/users.read\", \"token_type\":\"Bearer\", \"expires_in\":299 }","title":"Get Access token"},{"location":"admin/usermgmt/usermgmt-scim/#retrive-existing-user","text":"To get an existing user curl -k -G -H 'Authorization: Bearer ACCESS_TOKEN' --data-urlencode 'filter=displayName co \"Admin\"' https://<jans-server>/jans-scim/restv1/v2/Users > /tmp/user.json In response user.json we will get { \"schemas\": [ \"urn:ietf:params:scim:api:messages:2.0:ListResponse\" ], \"totalResults\": 1, \"startIndex\": 1, \"itemsPerPage\": 1, \"Resources\": [ { \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:User\" ], \"id\": \"5fdbb720-a1fd-477f-af92-b7c054f02c98\", \"meta\": { \"resourceType\": \"User\", \"created\": \"2023-06-12T14:54:09.531Z\", \"location\": \"https://raju.jans13.me/jans-scim/restv1/v2/Users/5fdbb720-a1fd-477f-af92-b7c054f02c98\" }, \"userName\": \"admin\", \"name\": { \"familyName\": \"...\", \"givenName\": \"...\", \"middleName\": \"...\", \"formatted\": \"...\" }, \"displayName\": \"Admin\", \"active\": true, \"emails\": [ { \"value\": \"example@gluu.org\", \"primary\": false } ], \"groups\": [ { \"value\": \"60B7\", \"display\": \"Jannsen Manager Group\", \"type\": \"direct\", \"$ref\": \"https://raju.jans13.me/jans-scim/restv1/v2/Groups/60B7\" } ] } ] }","title":"Retrive existing User"},{"location":"admin/usermgmt/usermgmt-scim/#creating-resource","text":"","title":"Creating Resource"},{"location":"admin/usermgmt/usermgmt-scim/#create-an-user","text":"Let's start creating a dummy user. A client sends a POST request containing a \"User\" to the \"/Users\" endpoint. POST /Users HTTP/1.1 Host: example.com Accept: application/scim+json Content-Type: application/scim+json Authorization: Bearer h480djs93hd8.. Content-Length: ... { \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:User\" ], \"userName\": \"bjensen\", \"externalId\": \"bjensen\", \"name\": { \"formatted\": \"Ms. Barbara J Jensen III\", \"familyName\": \"Jensen\", \"givenName\": \"Barbara\" } } Open a text editor and copy paste the json body, name as input.json . Hit on your terminal with bellow command. curl -k -H 'Authorization: Bearer ACCESS_TOKEN' -H 'Content-Type: application/scim+json' -d @input.json -o output.json https://<jans-server>/jans-scim/restv1/v2/Users response looks like { \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:User\" ], \"id\": \"e3009115-b890-4d8b-bd63-bbfef34aa583\", \"externalId\": \"bjensen\", \"meta\": { \"resourceType\": \"User\", \"created\": \"2023-06-26T19:43:32.945Z\", \"lastModified\": \"2023-06-26T19:43:32.945Z\", \"location\": \"https://raju.jans13.me/jans-scim/restv1/v2/Users/e3009115-b890-4d8b-bd63-bbfef34aa583\" }, \"userName\": \"bjensen\", \"name\": { \"familyName\": \"Jensen\", \"givenName\": \"Barbara\", \"formatted\": \"Ms. Barbara J Jensen III\" } } This new user has been given an id . If possible, inspect your ou=people branch and find the entry whose inum matches the id given. An easier option would be to via Jans TUI and go to Users and search \"bjensen\" to see the recently created user.","title":"Create an User"},{"location":"admin/usermgmt/usermgmt-scim/#updating-a-userput","text":"Overwrite your input.json with the following. Replace content in angle brackets accordingly: { \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:User\" ], \"id\": \"e3009115-b890-4d8b-bd63-bbfef34aa583\", \"userName\": \"bjensen\", \"externalId\": \"bjensen\", \"name\": { \"formatted\": \"Ms. Barbara J Jensen III\", \"familyName\": \"Jensen\", \"givenName\": \"Barbara\" }, \"displayName\": \"Jensen Barbara\", \"emails\": [ { \"value\": \"jensen@example.com\", \"type\": \"work\", \"primary\": true } ] } PUT with curl: curl -k -X PUT -H 'Authorization: Bearer ACCESS_TOKEN' -H 'Content-Type: application/scim+json' -d @input.json -o output.json https://<jans-server>/jans-scim/restv1/v2/Users/<user-inum> Response (output.json) will show the same contents of a full retrieval. Please verify changes were applied whether by inspecting LDAP or issuing a GET. If you have followed the steps properly, you should notice a new e-mail added and the change in displayName attribute","title":"Updating a User(PUT)"},{"location":"admin/usermgmt/usermgmt-scim/#updating-a-user-patch","text":"With patching, you can be very precise about the modifications you want to apply. Patching syntax follows JSON Patch spec (RFC 6902) closely. While it's not a must to read the RFC to learn how patch works, see section 3.5.2 of SCIM protocol (RFC 7644) to get the grasp. If you prefer reading code, patch test cases found in the Java scim-client project are worth to look at. The following is a simple example that illustrates the kind of modifications developers can achieve via PATCH . Overwrite your input.json with the following: { \"schemas\": [ \"urn:ietf:params:scim:api:messages:2.0:PatchOp\" ], \"Operations\": [ { \"op\": \"replace\", \"value\": { \"name\": { \"givenName\": \"Joey\" } } }, { \"op\": \"replace\", \"path\": \"emails[type eq \\\"work\\\" or primary eq false].value\", \"value\": \"jensen@example.com\" }, { \"op\": \"add\", \"value\": { \"name\": { \"middleName\": \"Jhon\" } } }, { \"op\": \"add\", \"value\": { \"emails\": [ { \"primary\": true, \"value\": \"my@own.mail\" } ], \"phoneNumbers\": [ { \"type\": \"home\", \"value\": \"5 123 8901\" }, { \"value\": \"5 123 8902\" } ] } }, { \"op\": \"remove\", \"path\": \"name.middleName\" }, { \"op\": \"remove\", \"path\": \"phoneNumbers[value ew \\\"01\\\"].type\" } ] } A collection of modification are provided under \"Operations\". They are processed in order of appearance. Also, every operation has a type; patching supports add, remove and replace. The first operations states the following: replace the value of givenName subattribute (that belongs to complex attribute name ) with the string \"Joey\". Operations are easier to understand when using a \"path\". The second operation replaces the value subattribute inside the complex multi-valued attribute emails. Inside the square brackets, we find a filter expression, so the replacement does not apply to all emails in the list but only to those matching the criterion. So the second operation can be read as \"set the value of value subattribute to string jensen@example.com where the type subattribute of the email equals to string \"work\" or if primary attribute is false\". The third operation is similar to the first. It sets the value of a subattribute which was unassigned (null). You could have used \"replace\" operation in this case and results would have been identical. The fourth operation is more interesting. It adds to the current list of emails a new one. It supplies a couple of subattributes for the email to include: primary and value. Additionally, we set the value of (previously unassigned) phoneNumbers multi-valued attribute passing a list of elements. In the fifth operation, we remove the middleName attribute that was set in operation three. Note how we make explicit the path of data to nullify: \"name.middleName\". The sixth operation allows us to remove a specific subattribute of phoneNumbers . The aim is to nullify the \"type\" of the item whose phone number value ends with \"01\". The remove operation can also be used to remove a complete item from a list, or empty the whole list by providing a suitable value for \"path\". Now let's see it in action: curl -k -X PATCH -H 'Authorization: Bearer ACCESS_TOKEN' -H 'Content-Type: application/scim+json' -d @input.json -o output.json https://<jans-server>/jans-scim/restv1/v2/Users/<user-inum> So far our resource look like this { \"schemas\": [ \"urn:ietf:params:scim:schemas:core:2.0:User\" ], \"id\": \"e3009115-b890-4d8b-bd63-bbfef34aa583\", \"externalId\": \"bjensen\", \"meta\": { \"resourceType\": \"User\", \"created\": \"2023-06-26T19:43:32.945Z\", \"lastModified\": \"2023-06-26T22:34:27.465Z\", \"location\": \"https://raju.jans13.me/jans-scim/restv1/v2/Users/e3009115-b890-4d8b-bd63-bbfef34aa583\" }, \"userName\": \"bjensen\", \"name\": { \"familyName\": \"Jensen\", \"givenName\": \"Joey\", \"formatted\": \"Ms. Barbara J Jensen III\" }, \"displayName\": \"Jensen Barbara\", \"active\": false, \"emails\": [ { \"value\": \"my@own.mail\", \"primary\": true }, { \"value\": \"jensen@example.com\", \"type\": \"work\", \"primary\": false } ], \"phoneNumbers\": [ { \"value\": \"5 123 8901\" }, { \"value\": \"5 123 8902\" } ] } Note the primary subattribute accompanying email \"my@own.mail\" is false but when inserted we provided true . This is because the SCIM specification states that after modifications are applied to resources (PUT or PATCH) , there cannot be more than one item in a multi-valued attribute with primary value set as true . To see more sample JSON payloads, check the .json files used by the scim-client test cases referenced above.","title":"Updating a User (PATCH)"},{"location":"admin/usermgmt/usermgmt-scim/#deleting-users","text":"For deleting, the DELETE method of HTTP is used. No input file is used in this case. A delete request could be the following: curl -k -X DELETE -H 'Authorization: Bearer ACCESS_TOKEN' https://<jans-server>/jans-scim/restv1/v2/Users/<user-inum> Use the inum of our dummy user, Jensen Barbara . Check your LDAP or via Jans TUI to see that Bjensen is gone.","title":"Deleting Users"},{"location":"admin/usermgmt/usermgmt-scim/#how-is-scim-data-stored","text":"SCIM schema spec does not use LDAP attribute names but a different naming convention for resource attributes (note this is not the case of custom attributes where the SCIM name used is that of the LDAP attribute). It is possible to determine if a given LDAP attribute is being mapped to a SCIM attribute. For that you need to check in Jans TUI Auth-Server >> Attributes and click on any attributes. Check Include in SCIM Extension: is true or false . Whenever you try to map any LDAP attribute to a SCIM attribute keep it's value true .","title":"How is SCIM data stored?"},{"location":"admin/usermgmt/usermgmt-scim/#fido-devices","text":"A FIDO device represents a user credential stored in the Jans Server LDAP that is compliant with the FIDO standard. These devices are used as a second factor in a setting of strong authentication. Having FIDO devices as one of resource types allow application developers querying, updating and deleting already existing (added) devices. Addition of devices do not take place through the service since this process requires direct end-user interaction, ie. device enrolling. The following is a summary of features of a Fido Device SCIM resource: Schema URN: urn:ietf:params:scim:schemas:core:2.0:FidoDevice Name of resource: FidoDevice Endpoint URL (relative to base URL of service): /jans-scim/restv1/v2/FidoDevices Device attributes: Attributes pertaining to this resource type are listed by visiting the URL https://<jans-server>/jans-scim/restv1/v2/Schemas/urn:ietf:params:scim:schemas:core:2.0:FidoDevice","title":"FIDO Devices"},{"location":"admin/usermgmt/usermgmt-scim/#example-querying-enrolled-devices","text":"Say we are interested in having a list of Super Gluu devices users have enrolled and whose operating system is iOS. In a setting of test mode, we may issue a query like this: curl -k -G -H 'Authorization: Bearer ACCESS_TOKEN' --data-urlencode 'filter=deviceData co \"ios\"' -d count=10 -o output.json https://<jans-server>/jans-scim/restv1/v2/FidoDevices In response output.json will be like that. { \"totalResults\": ..., \"itemsPerPage\": ..., \"startIndex\": 1, \"schemas\": [ \"urn:ietf:params:scim:api:messages:2.0:ListResponse\" ], \"Resources\": [ { \"id\": \"...\", \"meta\": {...}, \"schemas\": [\"urn:ietf:params:scim:schemas:core:2.0:FidoDevice\"], \"userId\": \"...\", ... \"deviceData\": \"{...}\", \"displayName\": ..., }, ... ] }","title":"Example: Querying Enrolled Devices"},{"location":"admin/usermgmt/usermgmt-scim/#fido-2-devices","text":"The following is a summary of features of a Fido Device SCIM resource: Schema URN: urn:ietf:params:scim:schemas:core:2.0:Fido2Device Name of resource: Fido2Device Endpoint URL (relative to base URL of service): /jans-scim/restv1/v2/Fido2Devices Device attributes: Attributes pertaining to this resource type are listed by visiting the URL https://<jans-server>/jans-scim/restv1/v2/Schemas/urn:ietf:params:scim:schemas:core:2.0:Fido2Device Quering for enrolled devices curl -k -G -H 'Authorization: Bearer ACCESS_TOKEN' --data-urlencode -d count=10 -o output.json https://<jans-server>/jans-scim/restv1/v2/Fido2Devices","title":"FIDO 2 devices"},{"location":"admin/usermgmt/usermgmt-scim/#potential-performance-issues-with-group-endpoints","text":"In SCIM a group resource basically consists of an identifier, a display name, and a collection of members associated to it. Also, every member is made up of a user identifier, his display name, and other attributes. As a consequence, retrieving group information requires making a correlation with existing user data. Since Gluu database model does not follow a relational database pattern this may entail a considerable amount of user queries when groups contain thousands of members. While this could have been workarounded by storing members' display names inside group entries, this brings additional problems to deal with. Another source of potential overhead stems from creation and modification of groups where many new users are associated to a given group: by default checks are made to guarantee only existing users are attached to groups, thus requiring continuous database queries. Currently there are two ways to lower the amount of database lookups required for SCIM group operations: Explicitly excluding display names from responses Pass the overhead bypass flag to skip members validations The first approach consists of using the query parameter excludedAttributes (see RFC 7644 ) so that display names are neither retrieved from database nor sent in responses. A value like members.display does the job. Note the query parameter attributes can also be used for this purpose, for example with a value like members.value that will output only members' identifiers and ignore other non-required attributes. This approach is particularly useful in search and retrievals when users' display names are not needed. The second is a stronger approach that turns off validation of incoming members data: if the usage of a POST/PUT/PATCH operation implies adding members, their existence is not verified, they will simply get added. Here, the client application is responsible for sending accurate data. To use this approach add a query or header parameter named Group-Overhead-Bypass with any value. Note under this mode of operation: Display names are never returned regardless of attributes or excludedAttributes parameters values Remove/replace patch operations that involve display names in path filters are ignored, eg: \"path\": \"members[value eq \\\"2819c223\\\" or display eq \\\"Joe\\\"]\"","title":"Potential performance issues with Group endpoints"},{"location":"admin/usermgmt/usermgmt-scim/#user-registration-process-with-scim","text":"SCIM service has many use cases. One interesting and often arising is that of coding your own user registration process. With your SCIM endpoints you can build a custom application to maintain user entries in your database.","title":"User Registration Process with SCIM"},{"location":"admin/usermgmt/usermgmt-scim/#important-considerations","text":"Here, you have some useful tips before you start: Choose a toolset you feel comfortable to work with. Keep in mind that you have to leverage the capabilities of your language/framework to issue complex HTTPS requests. Be sure that: You will be able to use at least the following verbs: GET, POST, PUT, and DELETE You can send headers in your requests as well as reading them from the service response If not supported natively, choose a library to facilitate JSON content manipulation. As you have already noticed we have been dealing with JSON for requests as well as for responses. Experience shows that being able to map from objects (or data structures) of your language to Json and viceversa helps saving hours of coding. Shape your data model early. List the attributes your application will operate upon and correlate with those found in the SCIM user schema. You can learn about the schema in RFC 7644 . At least, take a look at the JSON-formatted schema that your Jans Server shows: visit https://<host-name>/jans-scim/restv1/v2/Schemas/urn:ietf:params:scim:schemas:core:2.0:User You will have to manipulate database contents very often as you develop and run tests, thus, find a suitable tool for the task. In the case of LDAP, a TUI client is a good choice. Always check your logs . In this user management guide with SCIM, we have already touched upon the fundamentals of SCIM in Jans Server and shown a good amount of sample requests for manipulation of user information. However, keep in mind the SCIM spec documents are definitely the key reference to build working request messages, specially RFC 7643 , and RFC 7644 .","title":"Important Considerations"},{"location":"admin/usermgmt/usermgmt-scim/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/usermgmt/usermgmt-scim/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/usermgmt/usermgmt-scim/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/vm-ops/","tags":["administration","vm","operations"],"text":"Janssen VM Operations Guide # While fancy container orchestrated deployments are all the rage, there are still lots of reasons to deploy Janssen on a good, old-fashioned, virtual machine, or even an actual bare-metal server! Here is a partial list: Lower bar for system administration - Cloud native requires specialized training which your operational staff doesn't need if you stick with plain Linux packages. Operational simplicity - Simplicity = lower cost of ownership and in many cases, better security. Running one server, doing a good job at monitoring and backup--this will enable you to achieve 99.9% uptime (8 hours of downtime per year), which may be enough to meet the SLA you've negotiated with your management. Air-gapped deployments - Maybe you don't have a cloud because you are deploying your server on a small air-gapped network. Developer - If you are a developer who is used to running a bunch of VM's on your workstation, this is still a nice option to have. Linux Zealot - You love Linux and you're happy with it! Enough said. If you fit into any of the above categories, or another one that leads you to deploy Janssen Linux packages, this operational guide is a quick reference for some of the things you need to do for the \"care and feeding\" of a healthy federated identity platform.","title":"Janssen VM Operations Guide"},{"location":"admin/vm-ops/#janssen-vm-operations-guide","text":"While fancy container orchestrated deployments are all the rage, there are still lots of reasons to deploy Janssen on a good, old-fashioned, virtual machine, or even an actual bare-metal server! Here is a partial list: Lower bar for system administration - Cloud native requires specialized training which your operational staff doesn't need if you stick with plain Linux packages. Operational simplicity - Simplicity = lower cost of ownership and in many cases, better security. Running one server, doing a good job at monitoring and backup--this will enable you to achieve 99.9% uptime (8 hours of downtime per year), which may be enough to meet the SLA you've negotiated with your management. Air-gapped deployments - Maybe you don't have a cloud because you are deploying your server on a small air-gapped network. Developer - If you are a developer who is used to running a bunch of VM's on your workstation, this is still a nice option to have. Linux Zealot - You love Linux and you're happy with it! Enough said. If you fit into any of the above categories, or another one that leads you to deploy Janssen Linux packages, this operational guide is a quick reference for some of the things you need to do for the \"care and feeding\" of a healthy federated identity platform.","title":"Janssen VM Operations Guide"},{"location":"admin/vm-ops/backup/","tags":["administration","vm","operations","backup"],"text":"Janssen VM Backup # Best method of Janssen Backup is \"VM Snapshot\" backup. That means, backup / take snapshot of whole virtual machine / droplet / instance which is hosting your Gluu Janssen software. In the event of a production outage, a proper snapshot of the last working condition will help rapidly restore service. Most platform virtualization software and cloud vendors have snapshot backup features. For instance, Digital Ocean has Live Snapshot and Droplet Snapshot; VMWare has Snapshot Manager, etc. The Gluu Server should be backed up frequently-- we recommend at least one daily and one weekly backup of Gluu's data and/or VM . It's also good to have some partial configuration backup as well. Such as: Tarball /opt Tarball /etc/jans Tarball /etc/apache2 Tarball /var/jans Tarball Method # All Jans Server files live in a single folder: /opt. The entire Jans Server folder can be archived using the tar command: Stop the server: systemctl stop list-units --all \"jans*\" Use tar to take a backup: tar cvf jans-backup.tar /opt/jans/ Start the server again: systemctl start list-units --all \"jans*\" LDIF Data Backup # From time to time (daily or weekly), the LDAP database should be exported in a standard LDIF format. Having the data in plain text offers some options for recovery that are not possible with a binary backup. Instructions are provided below for exporting OpenDJ data. The below instructions address situations where unused and expired cache and session related entries are piling and causing issues with functionality. OpenDj # If your Jans Server is backed by OpenDJ, follow these steps to backup your data: First check your cache entries by running the following command: /opt/opendj/bin/ldapsearch -h localhost -p 1636 -Z -X -D \"cn=directory manager\" -w <pass> -b 'o=jans' 'grtId=*' dn | grep 'dn:' | wc -l Dump the data as LDIF : Stop the services using systemctl stop opendj Now export the LDIF and save it in appropriate place safe /opt/opendj/bin/export-ldif -n userRoot --offline -l databackup_date.ldif * Now exclude jansGrant(grntId) so the command becomes: /opt/opendj/bin/export-ldif -n userRoot --offline -l yourdata_withoutoxAuthGrantId.ldif --includeFilter '(!(grtId=*))' You may also wish to exclude jansMetric so the command becomes: /opt/opendj/bin/export-ldif -n userRoot --offline -l yourdata_withoutGrantIdMetic.ldif --includeFilter '(&(!(grtId=*))(!(objectClass=jansMetric)))' Now, only if needed, rebuild indexes: Check status of indexes: /opt/opendj/bin/backendstat show-index-status --backendID userRoot --baseDN o=jans Take note of all indexes that need to be rebuilt. If no indexing is needed, move on to step 4. Start the opendj service systemctl start opendj Build backend index for all indexes that need it accoring to previous status command, change passoword -w and index name accordingly. This command has to be run for every index separately: /opt/opendj/bin/dsconfig create-backend-index --port 4444 --hostname localhost --bindDN \"cn=directory manager\" -w password --backend-name userRoot --index-name iname --set index-type:equality --set index-entry-limit:4000 --trustAll --no-prompt Stop the opendj service systemctl stop opendj Rebuild the indexes as needed, here are examples : /opt/opendj/bin/rebuild-index --baseDN o=jans --index iname /opt/opendj/bin/rebuild-index --baseDN o=jans --index uid /opt/opendj/bin/rebuild-index --baseDN o=jans --index mail Check status again : /opt/opendj/bin/backendstat show-index-status --backendID userRoot --baseDN o=jans Verify indexes: /opt/opendj/bin/verify-index --baseDN o=jans --countErrors Next import your previously exported LDIF. /opt/opendj/bin/import-ldif -n userRoot --offline -l your-backup.ldif If you moved to a new LDAP, copy back your schema files to this directory: /opt/opendj/config/schema/ Start the opendj and other services Finally, verify the cache entries have been removed: /opt/opendj/bin/ldapsearch -h localhost -p 1636 -Z -X -D \"cn=directory manager\" -w <pass> -b 'o=jans' 'grtId=*' dn | grep 'dn:' | wc -l You should be done and everything should be working perfectly. You may notice your Jans Server responding slower than before. That is expected -- your LDAP is adjusting to the new data, and indexing might be in process. Give it some time and it should be back to normal.","title":"Backup"},{"location":"admin/vm-ops/backup/#janssen-vm-backup","text":"Best method of Janssen Backup is \"VM Snapshot\" backup. That means, backup / take snapshot of whole virtual machine / droplet / instance which is hosting your Gluu Janssen software. In the event of a production outage, a proper snapshot of the last working condition will help rapidly restore service. Most platform virtualization software and cloud vendors have snapshot backup features. For instance, Digital Ocean has Live Snapshot and Droplet Snapshot; VMWare has Snapshot Manager, etc. The Gluu Server should be backed up frequently-- we recommend at least one daily and one weekly backup of Gluu's data and/or VM . It's also good to have some partial configuration backup as well. Such as: Tarball /opt Tarball /etc/jans Tarball /etc/apache2 Tarball /var/jans","title":"Janssen VM Backup"},{"location":"admin/vm-ops/backup/#tarball-method","text":"All Jans Server files live in a single folder: /opt. The entire Jans Server folder can be archived using the tar command: Stop the server: systemctl stop list-units --all \"jans*\" Use tar to take a backup: tar cvf jans-backup.tar /opt/jans/ Start the server again: systemctl start list-units --all \"jans*\"","title":"Tarball Method"},{"location":"admin/vm-ops/backup/#ldif-data-backup","text":"From time to time (daily or weekly), the LDAP database should be exported in a standard LDIF format. Having the data in plain text offers some options for recovery that are not possible with a binary backup. Instructions are provided below for exporting OpenDJ data. The below instructions address situations where unused and expired cache and session related entries are piling and causing issues with functionality.","title":"LDIF Data Backup"},{"location":"admin/vm-ops/backup/#opendj","text":"If your Jans Server is backed by OpenDJ, follow these steps to backup your data: First check your cache entries by running the following command: /opt/opendj/bin/ldapsearch -h localhost -p 1636 -Z -X -D \"cn=directory manager\" -w <pass> -b 'o=jans' 'grtId=*' dn | grep 'dn:' | wc -l Dump the data as LDIF : Stop the services using systemctl stop opendj Now export the LDIF and save it in appropriate place safe /opt/opendj/bin/export-ldif -n userRoot --offline -l databackup_date.ldif * Now exclude jansGrant(grntId) so the command becomes: /opt/opendj/bin/export-ldif -n userRoot --offline -l yourdata_withoutoxAuthGrantId.ldif --includeFilter '(!(grtId=*))' You may also wish to exclude jansMetric so the command becomes: /opt/opendj/bin/export-ldif -n userRoot --offline -l yourdata_withoutGrantIdMetic.ldif --includeFilter '(&(!(grtId=*))(!(objectClass=jansMetric)))' Now, only if needed, rebuild indexes: Check status of indexes: /opt/opendj/bin/backendstat show-index-status --backendID userRoot --baseDN o=jans Take note of all indexes that need to be rebuilt. If no indexing is needed, move on to step 4. Start the opendj service systemctl start opendj Build backend index for all indexes that need it accoring to previous status command, change passoword -w and index name accordingly. This command has to be run for every index separately: /opt/opendj/bin/dsconfig create-backend-index --port 4444 --hostname localhost --bindDN \"cn=directory manager\" -w password --backend-name userRoot --index-name iname --set index-type:equality --set index-entry-limit:4000 --trustAll --no-prompt Stop the opendj service systemctl stop opendj Rebuild the indexes as needed, here are examples : /opt/opendj/bin/rebuild-index --baseDN o=jans --index iname /opt/opendj/bin/rebuild-index --baseDN o=jans --index uid /opt/opendj/bin/rebuild-index --baseDN o=jans --index mail Check status again : /opt/opendj/bin/backendstat show-index-status --backendID userRoot --baseDN o=jans Verify indexes: /opt/opendj/bin/verify-index --baseDN o=jans --countErrors Next import your previously exported LDIF. /opt/opendj/bin/import-ldif -n userRoot --offline -l your-backup.ldif If you moved to a new LDAP, copy back your schema files to this directory: /opt/opendj/config/schema/ Start the opendj and other services Finally, verify the cache entries have been removed: /opt/opendj/bin/ldapsearch -h localhost -p 1636 -Z -X -D \"cn=directory manager\" -w <pass> -b 'o=jans' 'grtId=*' dn | grep 'dn:' | wc -l You should be done and everything should be working perfectly. You may notice your Jans Server responding slower than before. That is expected -- your LDAP is adjusting to the new data, and indexing might be in process. Give it some time and it should be back to normal.","title":"OpenDj"},{"location":"admin/vm-ops/certificates/","tags":["administration","vm","operations","certificates"],"text":"Web server certificate # Certificates in Janssen # Janssen components have cryptographic keys and X.509 certificates that are stored on the filesystem at the time of installation. Details for certificates associated with each component are provided below. The following certificates are available in the /etc/certs folder. APACHE OPENDJ Jans Auth CA Certificates httpd.crt opendj.crt jans-auth-keys.p12 https.csr opendj.pksc12 httpd.key httpd.key.orig Custom Script JSON Files # Additionally the following json files are available which are used in different custom scripts for multi-factor authentication. cert_creds.json duo_creds.json gplus_client_secrets.json otp_configuration.json super_gluu_creds.json vericloud_jans_creds.json Web server certificate installation # We are using certbot using Let's Encrypt certificates to write this documentation. Certbot recommends using snap to install certbot and obtain certificates. The following instructions are for Ubuntu 20; however, any platform supporting snap should work. Backup the /etc/certs folder on your server Install snap: sudo snap install core; sudo snap refresh core Remove any certbot OS packages. This varies across distributions. For Ubuntu: sudo apt remove certbot Install certbot: sudo snap install --classic certbot Issue certificate: certbot --apache -d fqdn_of_Gluu_server Full certificate chain and key are available in: /etc/letsencrypt/live/ location. Move the cert and key to /etc/certs and name them httpd.crt and httpd.key respectively. Reboot your server","title":"Certificates"},{"location":"admin/vm-ops/certificates/#web-server-certificate","text":"","title":"Web server certificate"},{"location":"admin/vm-ops/certificates/#certificates-in-janssen","text":"Janssen components have cryptographic keys and X.509 certificates that are stored on the filesystem at the time of installation. Details for certificates associated with each component are provided below. The following certificates are available in the /etc/certs folder. APACHE OPENDJ Jans Auth CA Certificates httpd.crt opendj.crt jans-auth-keys.p12 https.csr opendj.pksc12 httpd.key httpd.key.orig","title":"Certificates in Janssen"},{"location":"admin/vm-ops/certificates/#custom-script-json-files","text":"Additionally the following json files are available which are used in different custom scripts for multi-factor authentication. cert_creds.json duo_creds.json gplus_client_secrets.json otp_configuration.json super_gluu_creds.json vericloud_jans_creds.json","title":"Custom Script JSON Files"},{"location":"admin/vm-ops/certificates/#web-server-certificate-installation","text":"We are using certbot using Let's Encrypt certificates to write this documentation. Certbot recommends using snap to install certbot and obtain certificates. The following instructions are for Ubuntu 20; however, any platform supporting snap should work. Backup the /etc/certs folder on your server Install snap: sudo snap install core; sudo snap refresh core Remove any certbot OS packages. This varies across distributions. For Ubuntu: sudo apt remove certbot Install certbot: sudo snap install --classic certbot Issue certificate: certbot --apache -d fqdn_of_Gluu_server Full certificate chain and key are available in: /etc/letsencrypt/live/ location. Move the cert and key to /etc/certs and name them httpd.crt and httpd.key respectively. Reboot your server","title":"Web server certificate installation"},{"location":"admin/vm-ops/checking-service-status/","tags":["administration","vm","operations","services","status"],"text":"Janssen System Services # In order to debug issues, checking the Jans services may be necessary. The process to do this differs slightly between operating systems. The following examples are shown on Ubuntu 20.04; however, they should work on any operating system using systemd. Getting list of Jans services # $ sudo systemctl list-units --all \"jans*\" UNIT LOAD ACTIVE SUB DESCRIPTION jans-auth.service loaded active running Janssen OAauth service jans-config-api.service loaded active running Janssen Config API service jans-fido2.service loaded active running Janssen Fido2 Service jans-scim.service loaded active running Janssen Scim service LOAD = Reflects whether the unit definition was properly loaded. ACTIVE = The high-level unit activation state, i.e. generalization of SUB. SUB = The low-level unit activation state, values depend on unit type. 5 loaded units listed. Other Services # There are more services other than Jans services like LDAP or Apache. To get the status of those services make sure you use command like sudo systemctl list-units --all \"apache2*\" Note: depending on your OS and the components of Jans installed, the output may be different. Checking status of a service # $ sudo systemctl status jans-auth.service \u25cf jans-auth.service - Janssen OAauth service Loaded: loaded ( /etc/systemd/system/jans-auth.service ; enabled ; vendor preset: enabled ) Active: active ( running ) since Tue 2022 -11-01 15 :03:23 UTC ; 1h 38min ago Process: 44700 ExecStart = /opt/dist/scripts/jans-auth start ( code = exited, status = 0 /SUCCESS ) Main PID: 44727 ( java ) Tasks: 60 ( limit: 4677 ) Memory: 889 .2M CGroup: /system.slice/jans-auth.service \u2514\u250044727 /opt/jre/bin/java -server -Xms256m -Xmx928m -XX:+DisableExplicitGC -Djans.base = /etc/jans -Dserver.base = /opt/jans/jetty/jan> In case of an error or a non-functional component, this is where you would find information about the component.","title":"Checking Service Status"},{"location":"admin/vm-ops/checking-service-status/#janssen-system-services","text":"In order to debug issues, checking the Jans services may be necessary. The process to do this differs slightly between operating systems. The following examples are shown on Ubuntu 20.04; however, they should work on any operating system using systemd.","title":"Janssen System Services"},{"location":"admin/vm-ops/checking-service-status/#getting-list-of-jans-services","text":"$ sudo systemctl list-units --all \"jans*\" UNIT LOAD ACTIVE SUB DESCRIPTION jans-auth.service loaded active running Janssen OAauth service jans-config-api.service loaded active running Janssen Config API service jans-fido2.service loaded active running Janssen Fido2 Service jans-scim.service loaded active running Janssen Scim service LOAD = Reflects whether the unit definition was properly loaded. ACTIVE = The high-level unit activation state, i.e. generalization of SUB. SUB = The low-level unit activation state, values depend on unit type. 5 loaded units listed.","title":"Getting list of Jans services"},{"location":"admin/vm-ops/checking-service-status/#other-services","text":"There are more services other than Jans services like LDAP or Apache. To get the status of those services make sure you use command like sudo systemctl list-units --all \"apache2*\" Note: depending on your OS and the components of Jans installed, the output may be different.","title":"Other Services"},{"location":"admin/vm-ops/checking-service-status/#checking-status-of-a-service","text":"$ sudo systemctl status jans-auth.service \u25cf jans-auth.service - Janssen OAauth service Loaded: loaded ( /etc/systemd/system/jans-auth.service ; enabled ; vendor preset: enabled ) Active: active ( running ) since Tue 2022 -11-01 15 :03:23 UTC ; 1h 38min ago Process: 44700 ExecStart = /opt/dist/scripts/jans-auth start ( code = exited, status = 0 /SUCCESS ) Main PID: 44727 ( java ) Tasks: 60 ( limit: 4677 ) Memory: 889 .2M CGroup: /system.slice/jans-auth.service \u2514\u250044727 /opt/jre/bin/java -server -Xms256m -Xmx928m -XX:+DisableExplicitGC -Djans.base = /etc/jans -Dserver.base = /opt/jans/jetty/jan> In case of an error or a non-functional component, this is where you would find information about the component.","title":"Checking status of a service"},{"location":"admin/vm-ops/faq/","tags":["administration","vm","operations"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Faq"},{"location":"admin/vm-ops/faq/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/vm-ops/faq/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/vm-ops/faq/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"admin/vm-ops/logs/","tags":["administration","vm","operations","log-levels"],"text":"Janssen Log Configuration # The Janssen logs can be viewed via SSH access to the server running the Janssen installation. Log Levels # The following log levels can be configured through the configuration CLI: Log Level Messages Logged Trace All messages Debug Debug level and above Info Informational level and above Warn Warning level and above Error Error level and above Fatal Only fatal errors Off Logging is disabled Configuring Log Levels # Use the following commands to get information on the logging module configuration: To get the logging configuration operation ID: /opt/jans/jans-cli/config-cli.py --info ConfigurationLogging Output would be: # Log configuration operations Operation ID: get-config-logging Description: Returns Jans Authorization Server logging settings. Operation ID: put-config-logging Description: Updates Jans Authorization Server logging settings. Schema: /components/schemas/LoggingConfiguration To get sample schema type /opt/jans/jans-cli/config-cli.py --schema , for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/LoggingConfiguration Output: # Generic configuration schema { \"loggingLevel\": \"TRACE\", \"loggingLayout\": \"json\", \"httpLoggingEnabled\": true, \"disableJdkLogger\": false, \"enabledOAuthAuditLogging\": true, \"externalLoggerConfiguration\": null, \"httpLoggingExcludePaths\": [ \"/auth/img\", \"/auth/stylesheet\" ] } Status of current configuration logging: /opt/jans/jans-cli/config-cli.py --operation-id get-config-logging Output: # Current log configuration { \"loggingLevel\": \"INFO\", \"loggingLayout\": \"text\", \"httpLoggingEnabled\": false, \"disableJdkLogger\": true, \"enabledOAuthAuditLogging\": false, \"externalLoggerConfiguration\": null, \"httpLoggingExcludePaths\": null } Let's assume we want to update logging configuration to TRACE . To do this, create a file /tmp/log.json with the following content: { \"loggingLevel\" : \"TRACE\" , \"loggingLayout\" : \"text\" , \"httpLoggingEnabled\" : false , \"disableJdkLogger\" : true , \"enabledOAuthAuditLogging\" : false , \"externalLoggerConfiguration\" : null , \"httpLoggingExcludePaths\" : null } And use the PUT operation with this file as the payload: /opt/jans/jans-cli/config-cli.py --operation-id put-config-logging --data /tmp/log.json The server will now have logs set to TRACE. Setup Logs # The Jans setup logs are available under /opt/jans/jans-setup/logs/ . There are several log files available involving the setup process: mysql.log (Only used if MySQL backend is chosen during setup) os-changes.log setup.log setup_error.log Core Logs # The available logs for Jans server are listed below: Config API logs # /opt/jans/jetty/jans-config-api/logs/ Log File Description configapi.log Config API main log configapi_persistence.log Config API LDAP log configapi_persistence_duration.log Config API LDAP operation duration log configapi_persistence_ldap_statistics.log Config API LDAP statistics [date].jetty.log Config API Jetty log configapi_script.log Config API custom script log Jans Auth server logs # /opt/jans/jetty/jans-auth/logs/ The most important log files here are described below: jans-auth.log : This log file contains most authentication related information. Generally this is the first log to review for any authentication-related troubleshooting, like authentication failure or missing clients etc. jans-auth_persistence.log : This log file contains information about the Jans Auth server communicating with the persistence backend. jans-auth_script.log : This log file contains debug messages printed from interception scripts . Server Logs # In some cases, it may be necessary to examine the server logs themselves. OS Logs # For Debian based systems: /var/log/syslog For RPM based systems: /var/log/messages Apache2 Server Logs # For Debian based systems: /var/log/apache2/ For RPM based systems: /var/log/httpd/ Apache2 logs are as follows: access_log : This log contains information about requests coming into the Jans Server, success status or requests, execution time for any request etc. error_log : This log shows error messages if the web server encounter any issue while processing incoming requests. other_vhosts_access.log : This log is specific to the Jans Server setup and those links which are being requested by a user from a web browser.","title":"Logs"},{"location":"admin/vm-ops/logs/#janssen-log-configuration","text":"The Janssen logs can be viewed via SSH access to the server running the Janssen installation.","title":"Janssen Log Configuration"},{"location":"admin/vm-ops/logs/#log-levels","text":"The following log levels can be configured through the configuration CLI: Log Level Messages Logged Trace All messages Debug Debug level and above Info Informational level and above Warn Warning level and above Error Error level and above Fatal Only fatal errors Off Logging is disabled","title":"Log Levels"},{"location":"admin/vm-ops/logs/#configuring-log-levels","text":"Use the following commands to get information on the logging module configuration: To get the logging configuration operation ID: /opt/jans/jans-cli/config-cli.py --info ConfigurationLogging Output would be: # Log configuration operations Operation ID: get-config-logging Description: Returns Jans Authorization Server logging settings. Operation ID: put-config-logging Description: Updates Jans Authorization Server logging settings. Schema: /components/schemas/LoggingConfiguration To get sample schema type /opt/jans/jans-cli/config-cli.py --schema , for example /opt/jans/jans-cli/config-cli.py --schema /components/schemas/LoggingConfiguration Output: # Generic configuration schema { \"loggingLevel\": \"TRACE\", \"loggingLayout\": \"json\", \"httpLoggingEnabled\": true, \"disableJdkLogger\": false, \"enabledOAuthAuditLogging\": true, \"externalLoggerConfiguration\": null, \"httpLoggingExcludePaths\": [ \"/auth/img\", \"/auth/stylesheet\" ] } Status of current configuration logging: /opt/jans/jans-cli/config-cli.py --operation-id get-config-logging Output: # Current log configuration { \"loggingLevel\": \"INFO\", \"loggingLayout\": \"text\", \"httpLoggingEnabled\": false, \"disableJdkLogger\": true, \"enabledOAuthAuditLogging\": false, \"externalLoggerConfiguration\": null, \"httpLoggingExcludePaths\": null } Let's assume we want to update logging configuration to TRACE . To do this, create a file /tmp/log.json with the following content: { \"loggingLevel\" : \"TRACE\" , \"loggingLayout\" : \"text\" , \"httpLoggingEnabled\" : false , \"disableJdkLogger\" : true , \"enabledOAuthAuditLogging\" : false , \"externalLoggerConfiguration\" : null , \"httpLoggingExcludePaths\" : null } And use the PUT operation with this file as the payload: /opt/jans/jans-cli/config-cli.py --operation-id put-config-logging --data /tmp/log.json The server will now have logs set to TRACE.","title":"Configuring Log Levels"},{"location":"admin/vm-ops/logs/#setup-logs","text":"The Jans setup logs are available under /opt/jans/jans-setup/logs/ . There are several log files available involving the setup process: mysql.log (Only used if MySQL backend is chosen during setup) os-changes.log setup.log setup_error.log","title":"Setup Logs"},{"location":"admin/vm-ops/logs/#core-logs","text":"The available logs for Jans server are listed below:","title":"Core Logs"},{"location":"admin/vm-ops/logs/#config-api-logs","text":"/opt/jans/jetty/jans-config-api/logs/ Log File Description configapi.log Config API main log configapi_persistence.log Config API LDAP log configapi_persistence_duration.log Config API LDAP operation duration log configapi_persistence_ldap_statistics.log Config API LDAP statistics [date].jetty.log Config API Jetty log configapi_script.log Config API custom script log","title":"Config API logs"},{"location":"admin/vm-ops/logs/#jans-auth-server-logs","text":"/opt/jans/jetty/jans-auth/logs/ The most important log files here are described below: jans-auth.log : This log file contains most authentication related information. Generally this is the first log to review for any authentication-related troubleshooting, like authentication failure or missing clients etc. jans-auth_persistence.log : This log file contains information about the Jans Auth server communicating with the persistence backend. jans-auth_script.log : This log file contains debug messages printed from interception scripts .","title":"Jans Auth server logs"},{"location":"admin/vm-ops/logs/#server-logs","text":"In some cases, it may be necessary to examine the server logs themselves.","title":"Server Logs"},{"location":"admin/vm-ops/logs/#os-logs","text":"For Debian based systems: /var/log/syslog For RPM based systems: /var/log/messages","title":"OS Logs"},{"location":"admin/vm-ops/logs/#apache2-server-logs","text":"For Debian based systems: /var/log/apache2/ For RPM based systems: /var/log/httpd/ Apache2 logs are as follows: access_log : This log contains information about requests coming into the Jans Server, success status or requests, execution time for any request etc. error_log : This log shows error messages if the web server encounter any issue while processing incoming requests. other_vhosts_access.log : This log is specific to the Jans Server setup and those links which are being requested by a user from a web browser.","title":"Apache2 Server Logs"},{"location":"admin/vm-ops/managing-key-rotation/","tags":["administration","vm","operations"],"text":"Managing Key Rotation # \"Key-rotation\" is a standard procedure for all OpenID Connect deployment. \"Key-rotation\" means replacing existing signing key with newer cryptographic key. For Janssen server, that specific cryptographic key is jans-auth-keys.pkcs12 . There are two possible ways to manage key rotation: - built-in key rotation - external key rotation For VM by default built-in key rotation is on. Key alias or kid has following format (example connect_76297462-a3f8-498e-afc2-670285292553_sig_rs256 ): <operation_type>_<guid>_<use>_<algorithm> operation_type - specifies operation type of the key, possible values: connect - used for OpenID Connect - usually expirable key ssa - used for SSA - usually with very big expiration date (almost non-expirable) all - key can be use for both connect and ssa guid - unique identifier use - use purpose, possible values are sig for signature and enc for encryption algorithm - algorithm use with given key in signature case it can be RS256 , RS384 , RS512 , ES256 , ES384 , ES512 , PS256 , PS384 , PS512 in encryption case case it can be RSA1_5 , RSA-OAEP Key rotation means that new keys are generated and old one are removed for given algorithm (full replacement). Keys are stored in: - key store file (specified by keyStoreFile ) - on persistence level jwks representation of the key are stored in jansConfWebKeys attribute of jansAppConf entity It's important to note that key inside key store file must have representation in jwks and vice versa. It must be always in sync otherwise AS will throw error. Configuration properties related to key store file: - keyStoreFile - The Key Store File (JKS or PKCS12) - keyStoreSecret - The Key Store password Built-in key rotation # jans-auth-server has KeyGeneratorTimer which is responsible for key rotation. Built-in rotation can be switch on/off via keyRegenerationEnabled AS configuration property (by setting true or false value). graph LR A[Auth Server] --> V(Properties) erDiagram keyRotation { string keyRegenerationEnabled \"True\" string keyRenerationInterval \"48\" string keySelectionStrategy \"OLDER\" string keySignWithSameKeyButDiffAlg \"False\" string keyStoreFile \"/etc/certs/jans-auth-keys.pkcs12\" } Configuration properties relation to built-in rotation: - keyRegenerationEnabled - boolean value specifying whether to turn on ( true value) or off ( false value) built-in key rotation - keyRegenerationInterval - the interval for key regeneration in hours - keyAlgsAllowedForGeneration - List of algorithm allowed to be used for key generation Expiration date during built-in rotation is set as now + keyRegenerationInterval . External key rotation # External rotation means that keys are rotated by script. In this case keyRegenerationEnabled must be set to false value. Script can be scheduled to run periodically. Such script must invoke KeyGenerator class from jans-auth-client-jar-with-dependencies.jar which will keep keys in key store and in AS persistence consistent. See Key Generation page for more details how to generate keys externally. /opt/jre/bin/java -Dlog4j.defaultInitOverride=true -cp /opt/dist/jans/jans-auth-client-jar-with-dependencies.jar io.jans.as.client.util.KeyGenerator -keystore /etc/certs/jans-auth-keys.p12 -keypasswd <Password> -sig_keys RS256 RS384 -enc_keys RSA1_5 RSA-OAEP -key_ops_type ALL -dnname \"CN=jansAuth CA Certificates\" -expiration 2 > /etc/certs/jans-auth-keys.json Useful references # Key Generation","title":"Managing Key Rotation"},{"location":"admin/vm-ops/managing-key-rotation/#managing-key-rotation","text":"\"Key-rotation\" is a standard procedure for all OpenID Connect deployment. \"Key-rotation\" means replacing existing signing key with newer cryptographic key. For Janssen server, that specific cryptographic key is jans-auth-keys.pkcs12 . There are two possible ways to manage key rotation: - built-in key rotation - external key rotation For VM by default built-in key rotation is on. Key alias or kid has following format (example connect_76297462-a3f8-498e-afc2-670285292553_sig_rs256 ): <operation_type>_<guid>_<use>_<algorithm> operation_type - specifies operation type of the key, possible values: connect - used for OpenID Connect - usually expirable key ssa - used for SSA - usually with very big expiration date (almost non-expirable) all - key can be use for both connect and ssa guid - unique identifier use - use purpose, possible values are sig for signature and enc for encryption algorithm - algorithm use with given key in signature case it can be RS256 , RS384 , RS512 , ES256 , ES384 , ES512 , PS256 , PS384 , PS512 in encryption case case it can be RSA1_5 , RSA-OAEP Key rotation means that new keys are generated and old one are removed for given algorithm (full replacement). Keys are stored in: - key store file (specified by keyStoreFile ) - on persistence level jwks representation of the key are stored in jansConfWebKeys attribute of jansAppConf entity It's important to note that key inside key store file must have representation in jwks and vice versa. It must be always in sync otherwise AS will throw error. Configuration properties related to key store file: - keyStoreFile - The Key Store File (JKS or PKCS12) - keyStoreSecret - The Key Store password","title":"Managing Key Rotation"},{"location":"admin/vm-ops/managing-key-rotation/#built-in-key-rotation","text":"jans-auth-server has KeyGeneratorTimer which is responsible for key rotation. Built-in rotation can be switch on/off via keyRegenerationEnabled AS configuration property (by setting true or false value). graph LR A[Auth Server] --> V(Properties) erDiagram keyRotation { string keyRegenerationEnabled \"True\" string keyRenerationInterval \"48\" string keySelectionStrategy \"OLDER\" string keySignWithSameKeyButDiffAlg \"False\" string keyStoreFile \"/etc/certs/jans-auth-keys.pkcs12\" } Configuration properties relation to built-in rotation: - keyRegenerationEnabled - boolean value specifying whether to turn on ( true value) or off ( false value) built-in key rotation - keyRegenerationInterval - the interval for key regeneration in hours - keyAlgsAllowedForGeneration - List of algorithm allowed to be used for key generation Expiration date during built-in rotation is set as now + keyRegenerationInterval .","title":"Built-in key rotation"},{"location":"admin/vm-ops/managing-key-rotation/#external-key-rotation","text":"External rotation means that keys are rotated by script. In this case keyRegenerationEnabled must be set to false value. Script can be scheduled to run periodically. Such script must invoke KeyGenerator class from jans-auth-client-jar-with-dependencies.jar which will keep keys in key store and in AS persistence consistent. See Key Generation page for more details how to generate keys externally. /opt/jre/bin/java -Dlog4j.defaultInitOverride=true -cp /opt/dist/jans/jans-auth-client-jar-with-dependencies.jar io.jans.as.client.util.KeyGenerator -keystore /etc/certs/jans-auth-keys.p12 -keypasswd <Password> -sig_keys RS256 RS384 -enc_keys RSA1_5 RSA-OAEP -key_ops_type ALL -dnname \"CN=jansAuth CA Certificates\" -expiration 2 > /etc/certs/jans-auth-keys.json","title":"External key rotation"},{"location":"admin/vm-ops/managing-key-rotation/#useful-references","text":"Key Generation","title":"Useful references"},{"location":"admin/vm-ops/restarting-services/","tags":["administration","vm","operations","services","lifecycle"],"text":"Janssen System Services Lifecycle Management # Getting list of Jans services # sudo systemctl list-units --all \"jans*\" Output should be like below: UNIT LOAD ACTIVE SUB DESCRIPTION jans-auth.service loaded active running Janssen OAauth service jans-config-api.service loaded active running Janssen Config API service jans-fido2.service loaded active running Janssen Fido2 Service jans-scim.service loaded active running Janssen Scim service LOAD = Reflects whether the unit definition was properly loaded. ACTIVE = The high-level unit activation state, i.e. generalization of SUB. SUB = The low-level unit activation state, values depend on unit type. 5 loaded units listed. Other Services # There are more services other than Jans services like LDAP or Apache. To get the status of those services make sure you use command like sudo systemctl list-units --all \"apache2*\" Commands (Ubuntu 20.04, RHEL 8, SUSE 15) # Start # systemctl start [service name] Stop # systemctl stop [service name] Status # systemctl status [service name] Restart # systemctl restart [service name] Reload # This command is used for the apache2 and httpd services. systemctl reload [service name]","title":"Restarting Services"},{"location":"admin/vm-ops/restarting-services/#janssen-system-services-lifecycle-management","text":"","title":"Janssen System Services Lifecycle Management"},{"location":"admin/vm-ops/restarting-services/#getting-list-of-jans-services","text":"sudo systemctl list-units --all \"jans*\" Output should be like below: UNIT LOAD ACTIVE SUB DESCRIPTION jans-auth.service loaded active running Janssen OAauth service jans-config-api.service loaded active running Janssen Config API service jans-fido2.service loaded active running Janssen Fido2 Service jans-scim.service loaded active running Janssen Scim service LOAD = Reflects whether the unit definition was properly loaded. ACTIVE = The high-level unit activation state, i.e. generalization of SUB. SUB = The low-level unit activation state, values depend on unit type. 5 loaded units listed.","title":"Getting list of Jans services"},{"location":"admin/vm-ops/restarting-services/#other-services","text":"There are more services other than Jans services like LDAP or Apache. To get the status of those services make sure you use command like sudo systemctl list-units --all \"apache2*\"","title":"Other Services"},{"location":"admin/vm-ops/restarting-services/#commands-ubuntu-2004-rhel-8-suse-15","text":"","title":"Commands (Ubuntu 20.04, RHEL 8, SUSE 15)"},{"location":"admin/vm-ops/restarting-services/#start","text":"systemctl start [service name]","title":"Start"},{"location":"admin/vm-ops/restarting-services/#stop","text":"systemctl stop [service name]","title":"Stop"},{"location":"admin/vm-ops/restarting-services/#status","text":"systemctl status [service name]","title":"Status"},{"location":"admin/vm-ops/restarting-services/#restart","text":"systemctl restart [service name]","title":"Restart"},{"location":"admin/vm-ops/restarting-services/#reload","text":"This command is used for the apache2 and httpd services. systemctl reload [service name]","title":"Reload"},{"location":"admin/vm-ops/upgrade/","tags":["administration","VM","operations","upgrade"],"text":"This guide shows how to upgrade a Janssen VM deployment. Note VM deployments don't provide automatic upgrade/update support. Uninstalling and re-installing with newer binaries is the only option that requires re-configuration of auth-server. Though this is made easy using Terraform . We recommend using Kubernetes installations over VM, to avail smooth upgrades and better HA support. Let's assume we are upgrading Jans VM installation from current version to v1.0.17.nightly Keep the old VM installation running. Install on a separate VM the target new Jans installation, i.e. v1.0.17.nightly . You can install with a test client. For example: sudo python3 /opt/jans/jans-setup/setup.py -test-client-id 6382c9da-f25d-435f-ac63-6acde36f4859 -test-client-pw secret1172023 This client-id and client-pw will then be used to import Terraform configurations Use our Terraform docs on the new installation, i.e. v1.0.17.nightly to: import all the global configurations from the new installation using terraform import define all the custom IDP configurations and apply them using terraform apply At this point there should be two versions up, old version and v1.0.17.nightly . Traffic should be switched gradually from the old setup to the new setup. Once confidence is gained, drain the old VM.","title":"Upgrade"},{"location":"admin/vm-ops/web-services/","tags":["administration","vm","operations"],"text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Web services"},{"location":"admin/vm-ops/web-services/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"admin/vm-ops/web-services/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"admin/vm-ops/web-services/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"agama/execution-rules/","tags":["administration","developer","agama"],"text":"Flows execution rules # This document regards flow execution details. Engines implementing the Agama framework must account these aspects fully. Important The concept of \" top-level \" flow is used in several places throughout this page. It refers to a flow which has been directly launched from the user browser and hence has no parents (no callers). Flows lifecycle # From a programming perspective, a flow is a lot like a function or subroutine in a regular program. Once a flow is triggered, it must be executed from top to bottom until a Finish statement is encountered. There are no special requirements on flow initialization or flow structure either. In some cases, the Finish instruction is not reached because the flow: has crashed has been cancelled has timed out More on these conditions below. Otherwise, the flow is said to have finished and depending on the actual arguments passed to Finish , it can be said the flow finished successfully or the flow failed . Successful flows # When a flow finishes successfully, control returns to the caller (parent flow) and execution continues. In the case of a top-level flow, it is up to the concrete engine what to do next. Normally, the arguments passed to the Finish directive will drive the specific behavior, which could for instance authenticate a person. Failed flows # When a flow fails, control returns to the caller (parent flow) and execution continues. In the case of a top-level flow, it is up to the concrete engine what to do next. Displaying an error page would be generally appropriate. The arguments passed to the Finish directive could be of use here. Crashed flows # A flow is said to have crashed if any of the below occur: Invalid code (syntactically wrong) was tried to be executed The last instruction was reached and Finish was not encountered An attempt to access a property or index of a null variable was made The invocation of a foreign routine, i.e. through Call , raised an error condition, and the error was not caught Any unexpected runtime error was raised When a flow crashes, the caller flow (if any) is said to have crashed too if it did not catch the given error. This rule applies recursively until the top-level flow is reached. When a top-level flow crashes, engines must: Show an error with a concise descriptive error description Append a fuller error message to whatever logging system is in place Terminate the flow execution to allow the user start again the flow later in a safe manner Flows timeout # The Timeout directive specifies a maximum allowable execution time for a top-level flow. When a flow exceeds this execution time, engines should display an error page accordingly. Cancelled flows # Cancellation allows a flow to early interrupt the execution of a given subflow thus enabling the implementation of alternative routing without the need of re-writing subflows. It can only take place upon the execution of a given RRF instruction part of a subflow that has been Trigger ed. This feature is better understood via examples - note the link provided is specific to the Janssen Server engine only. Other engines may implement cancellation in a different way, the only requirement is to preserve the convention that the returned value of a cancelled flow must be of the form: { aborted: true, data: ..., url: ... } . Launching flows # Engines must provide specific mechanisms to launch a given flow in the user's browser and document how to pass input parameters to it and the formats allowed. Logging # Engines must maintain at least one logging destination (file, stream, etc.) to accumulate the messages passed in Log directives. Additionally, it should advertise the logging levels supported, their abbreviations if any, and the default logging level. RFAC and Callback URL # Engines must provide and maintain a fixed single URL that \"users\" of RFAC can supply to external systems in order to implement integrations with third-party sites that employ browser redirections. This URL should only be available for a given browser session while RFAC is in execution. Once the callback is visited or the flow times out (whichever occurs first), subsequent requests will respond with an HTTP 404 error. The mechanism used by the engine to make the redirect to the external site is implementation specific. Assets management # Engines must have an internal mechanism to store assets following a hierarchical (filesystem-like) structure. Such structure must have a defined \"root\" that in conjunction with a flow Basepath will allow the engine to resolve (locate) the paths to specific flow assets. Engines may support one or more templating technologies and file formats for rendering the UI pages. Foreign calls # Languages support # At least one programming language should be supported by an engine. This feature is critical because Agama DSL was designed to force developers use a distinct, more powerful language when the task at hand cannot be implemented by simple data manipulation or comparison of values. Routines lookup # Engines should define a clear mechanism to lookup the specific routine to be invoked when using the Call directive. Actually, the syntax of Call fits well into an object-oriented style. The table bellow illustrates this fact: Example Potential semantics Call a B c d On object instance a , invoke method B passing c and d as parameters Call x.y.z#S d Invoke method S belonging to class x.y.z passing d as parameter. This variant maps to a \"static\" method invocation, where S does not require a specific instance to run on In OOP, it is not uncommon to have a method S with several different signatures. The lookup mechanism should account disambiguation techniques, if possible. Errors # In the execution of the call, if an error occurs, the engine should raise an error catchable in Agama code. The structure or data type of this error is an engine-specific detail. Ideally the error should be easily inspected in Agama code so any required further processing is feasible in a flow. Types compatibility # The arguments conversion/compatibility is also an important topic. Most likely Agama types will not match the (foreign) target language types. This means passing a \"native\" Agama value as parameter in a method Call requires some form of compatibility with the target type in the routine (method) signature. When compatibility does not make sense, seems too complex, or impossible, invocation should \"crash\" by raising some form of error. The same analysis has to be done in the other direction: from the target language to Agama. This is for the case where the Call returns a value. Such value should be \"manipulable\" in Agama code. Other considerations # Engine implementers may consider to offer the ability for developers to supply routines without the need of engine restarts. This aims for an agile development experience.","title":"Execution rules"},{"location":"agama/execution-rules/#flows-execution-rules","text":"This document regards flow execution details. Engines implementing the Agama framework must account these aspects fully. Important The concept of \" top-level \" flow is used in several places throughout this page. It refers to a flow which has been directly launched from the user browser and hence has no parents (no callers).","title":"Flows execution rules"},{"location":"agama/execution-rules/#flows-lifecycle","text":"From a programming perspective, a flow is a lot like a function or subroutine in a regular program. Once a flow is triggered, it must be executed from top to bottom until a Finish statement is encountered. There are no special requirements on flow initialization or flow structure either. In some cases, the Finish instruction is not reached because the flow: has crashed has been cancelled has timed out More on these conditions below. Otherwise, the flow is said to have finished and depending on the actual arguments passed to Finish , it can be said the flow finished successfully or the flow failed .","title":"Flows lifecycle"},{"location":"agama/execution-rules/#successful-flows","text":"When a flow finishes successfully, control returns to the caller (parent flow) and execution continues. In the case of a top-level flow, it is up to the concrete engine what to do next. Normally, the arguments passed to the Finish directive will drive the specific behavior, which could for instance authenticate a person.","title":"Successful flows"},{"location":"agama/execution-rules/#failed-flows","text":"When a flow fails, control returns to the caller (parent flow) and execution continues. In the case of a top-level flow, it is up to the concrete engine what to do next. Displaying an error page would be generally appropriate. The arguments passed to the Finish directive could be of use here.","title":"Failed flows"},{"location":"agama/execution-rules/#crashed-flows","text":"A flow is said to have crashed if any of the below occur: Invalid code (syntactically wrong) was tried to be executed The last instruction was reached and Finish was not encountered An attempt to access a property or index of a null variable was made The invocation of a foreign routine, i.e. through Call , raised an error condition, and the error was not caught Any unexpected runtime error was raised When a flow crashes, the caller flow (if any) is said to have crashed too if it did not catch the given error. This rule applies recursively until the top-level flow is reached. When a top-level flow crashes, engines must: Show an error with a concise descriptive error description Append a fuller error message to whatever logging system is in place Terminate the flow execution to allow the user start again the flow later in a safe manner","title":"Crashed flows"},{"location":"agama/execution-rules/#flows-timeout","text":"The Timeout directive specifies a maximum allowable execution time for a top-level flow. When a flow exceeds this execution time, engines should display an error page accordingly.","title":"Flows timeout"},{"location":"agama/execution-rules/#cancelled-flows","text":"Cancellation allows a flow to early interrupt the execution of a given subflow thus enabling the implementation of alternative routing without the need of re-writing subflows. It can only take place upon the execution of a given RRF instruction part of a subflow that has been Trigger ed. This feature is better understood via examples - note the link provided is specific to the Janssen Server engine only. Other engines may implement cancellation in a different way, the only requirement is to preserve the convention that the returned value of a cancelled flow must be of the form: { aborted: true, data: ..., url: ... } .","title":"Cancelled flows"},{"location":"agama/execution-rules/#launching-flows","text":"Engines must provide specific mechanisms to launch a given flow in the user's browser and document how to pass input parameters to it and the formats allowed.","title":"Launching flows"},{"location":"agama/execution-rules/#logging","text":"Engines must maintain at least one logging destination (file, stream, etc.) to accumulate the messages passed in Log directives. Additionally, it should advertise the logging levels supported, their abbreviations if any, and the default logging level.","title":"Logging"},{"location":"agama/execution-rules/#rfac-and-callback-url","text":"Engines must provide and maintain a fixed single URL that \"users\" of RFAC can supply to external systems in order to implement integrations with third-party sites that employ browser redirections. This URL should only be available for a given browser session while RFAC is in execution. Once the callback is visited or the flow times out (whichever occurs first), subsequent requests will respond with an HTTP 404 error. The mechanism used by the engine to make the redirect to the external site is implementation specific.","title":"RFAC and Callback URL"},{"location":"agama/execution-rules/#assets-management","text":"Engines must have an internal mechanism to store assets following a hierarchical (filesystem-like) structure. Such structure must have a defined \"root\" that in conjunction with a flow Basepath will allow the engine to resolve (locate) the paths to specific flow assets. Engines may support one or more templating technologies and file formats for rendering the UI pages.","title":"Assets management"},{"location":"agama/execution-rules/#foreign-calls","text":"","title":"Foreign calls"},{"location":"agama/execution-rules/#languages-support","text":"At least one programming language should be supported by an engine. This feature is critical because Agama DSL was designed to force developers use a distinct, more powerful language when the task at hand cannot be implemented by simple data manipulation or comparison of values.","title":"Languages support"},{"location":"agama/execution-rules/#routines-lookup","text":"Engines should define a clear mechanism to lookup the specific routine to be invoked when using the Call directive. Actually, the syntax of Call fits well into an object-oriented style. The table bellow illustrates this fact: Example Potential semantics Call a B c d On object instance a , invoke method B passing c and d as parameters Call x.y.z#S d Invoke method S belonging to class x.y.z passing d as parameter. This variant maps to a \"static\" method invocation, where S does not require a specific instance to run on In OOP, it is not uncommon to have a method S with several different signatures. The lookup mechanism should account disambiguation techniques, if possible.","title":"Routines lookup"},{"location":"agama/execution-rules/#errors","text":"In the execution of the call, if an error occurs, the engine should raise an error catchable in Agama code. The structure or data type of this error is an engine-specific detail. Ideally the error should be easily inspected in Agama code so any required further processing is feasible in a flow.","title":"Errors"},{"location":"agama/execution-rules/#types-compatibility","text":"The arguments conversion/compatibility is also an important topic. Most likely Agama types will not match the (foreign) target language types. This means passing a \"native\" Agama value as parameter in a method Call requires some form of compatibility with the target type in the routine (method) signature. When compatibility does not make sense, seems too complex, or impossible, invocation should \"crash\" by raising some form of error. The same analysis has to be done in the other direction: from the target language to Agama. This is for the case where the Call returns a value. Such value should be \"manipulable\" in Agama code.","title":"Types compatibility"},{"location":"agama/execution-rules/#other-considerations","text":"Engine implementers may consider to offer the ability for developers to supply routines without the need of engine restarts. This aims for an agile development experience.","title":"Other considerations"},{"location":"agama/gama-format/","tags":["administration","developer","agama"],"text":"The .gama file format # In practice, a web flow will make use of a bunch of artifacts, like UI pages, images, stylesheets, and source code. Actually, to solve a real-world problem several flows are needed to be able to keep flexibility and complexity at acceptable levels. Here is where the concept project emerges. A project can be thought of as a container to hold all flows and related assets aimed at solving a particular problem - including metadata of the project itself. The idea of defining a standard way to specify projects brings several benefits: Provide a uniform conceptual scheme for community actors to interchange flows Provide Agama engine implementors common ground for the materialization of flows deployment Serve as reference for developers interested in coding tools such as an Agama IDE Anatomy of a project # The below shows the structure of an Agama project: \u251c\u2500\u2500 code/ \u251c\u2500\u2500 lib/ \u251c\u2500\u2500 web/ \u251c\u2500\u2500 project.json \u251c\u2500\u2500 LICENSE \u2514\u2500\u2500 README.md code directory holds all flows part of the project. Every flow - implemented in Agama language - has to reside in a separate file with extension flow and with file name matching the qualified name of the flow in question. This directory can have nested folders if desired lib may contain source code files in languages other than Agama. Every engine can make use of the contents of this folder as needed web is expected to hold all UI templates plus required web assets (stylesheets, images, etc.) that all flows in this project may use project.json file contains metadata about this project. More on this later README.md file may contain extra documentation in markdown format LICENSE file may contain legal-related information Except for code and web directories, all elements in the file structure above are optional. Note that files in web must follow a directory structure that is consistent with respect to Basepath and RRF directives found in the included flows. Metadata # project.json file is expected to contain metadata about the contents of the project in JSON format. This is an example: { \"projectName\": \"A unique name that will be associated to this project\", \"author\": \"A user handle that identifies you\", \"description\": \"Other relevant data can go here\", \"type\": \"\", \"configs\": { \"com.foods.sweet\": { \"prop1\": \"secret\", \"prop2\": [1, 2, 3] } }, \"noDirectLaunch\": [ \"test\" ] } The configs section is a JSON object containing exemplifying configuration properties for flows that may need them. Note .gama files must not contain real configuration properties because these files can be freely distributed; in practice, configurations hold sensitive data that should not be exposed. The keys of object configs , if any, are qualified flow names already part of the project. The noDirectLaunch section is an array holding zero or more qualified flow names. Use this list to prevent certain flows to be launched directly from a web browser. This is a security measure to avoid end-users triggering flows at will. Other fields can be added in project.json . Sample project # As an example assume you want to deliver these two flows: Flow test Basepath \"hello\" in = { name: \"John\" } RRF \"templates/index.htm\" in Log \"Done!\" Finish \"john_doe\" Flow com.foods.sweet Basepath \"recipes/desserts\" ... choice = RRF \"selection.htm\" list = Call com.foods.RecipeUtils#retrieveIngredients choice.meal ... Here is how the project folder might look like: \u251c\u2500\u2500 code/ \u2502 \u2514\u2500\u2500 test.flow \u2502 \u2514\u2500\u2500 com.foods.sweet.flow \u251c\u2500\u2500 web/ \u2502 \u251c\u2500\u2500 hello/ | | \u2514\u2500\u2500 templates/ \u2502 | \u2514\u2500\u2500 index.htm \u2502 | \u2514\u2500\u2500 js/ \u2502 | \u2514\u2500\u2500 font-awesome.js | \u2514\u2500\u2500 recipes/ \u2502 \u2514\u2500\u2500 desserts/ \u2502 \u2514\u2500\u2500 selection.htm \u2502 \u2514\u2500\u2500 logo.png \u251c\u2500\u2500 lib/ \u2502 \u2514\u2500\u2500 com/ \u2502 \u2514\u2500\u2500 foods/ \u2502 \u2514\u2500\u2500 RecipeUtils.java \u2514\u2500\u2500 project.json .gama file # Dealing with a folder this way can be awkward for sharing and other tasks. Instead, if the project contents are compressed using the ZIP file format, we have what is known as .gama file. Thus, a .gama file is a project archive that can be shared and deployed to an Agama engine. Project deployment # The actual \"deployment\" of an Agama project is an engine-specific detail. Engines must offer mechanisms for administrators and developers to \"install\" .gama files.","title":"gama format"},{"location":"agama/gama-format/#the-gama-file-format","text":"In practice, a web flow will make use of a bunch of artifacts, like UI pages, images, stylesheets, and source code. Actually, to solve a real-world problem several flows are needed to be able to keep flexibility and complexity at acceptable levels. Here is where the concept project emerges. A project can be thought of as a container to hold all flows and related assets aimed at solving a particular problem - including metadata of the project itself. The idea of defining a standard way to specify projects brings several benefits: Provide a uniform conceptual scheme for community actors to interchange flows Provide Agama engine implementors common ground for the materialization of flows deployment Serve as reference for developers interested in coding tools such as an Agama IDE","title":"The .gama file format"},{"location":"agama/gama-format/#anatomy-of-a-project","text":"The below shows the structure of an Agama project: \u251c\u2500\u2500 code/ \u251c\u2500\u2500 lib/ \u251c\u2500\u2500 web/ \u251c\u2500\u2500 project.json \u251c\u2500\u2500 LICENSE \u2514\u2500\u2500 README.md code directory holds all flows part of the project. Every flow - implemented in Agama language - has to reside in a separate file with extension flow and with file name matching the qualified name of the flow in question. This directory can have nested folders if desired lib may contain source code files in languages other than Agama. Every engine can make use of the contents of this folder as needed web is expected to hold all UI templates plus required web assets (stylesheets, images, etc.) that all flows in this project may use project.json file contains metadata about this project. More on this later README.md file may contain extra documentation in markdown format LICENSE file may contain legal-related information Except for code and web directories, all elements in the file structure above are optional. Note that files in web must follow a directory structure that is consistent with respect to Basepath and RRF directives found in the included flows.","title":"Anatomy of a project"},{"location":"agama/gama-format/#metadata","text":"project.json file is expected to contain metadata about the contents of the project in JSON format. This is an example: { \"projectName\": \"A unique name that will be associated to this project\", \"author\": \"A user handle that identifies you\", \"description\": \"Other relevant data can go here\", \"type\": \"\", \"configs\": { \"com.foods.sweet\": { \"prop1\": \"secret\", \"prop2\": [1, 2, 3] } }, \"noDirectLaunch\": [ \"test\" ] } The configs section is a JSON object containing exemplifying configuration properties for flows that may need them. Note .gama files must not contain real configuration properties because these files can be freely distributed; in practice, configurations hold sensitive data that should not be exposed. The keys of object configs , if any, are qualified flow names already part of the project. The noDirectLaunch section is an array holding zero or more qualified flow names. Use this list to prevent certain flows to be launched directly from a web browser. This is a security measure to avoid end-users triggering flows at will. Other fields can be added in project.json .","title":"Metadata"},{"location":"agama/gama-format/#sample-project","text":"As an example assume you want to deliver these two flows: Flow test Basepath \"hello\" in = { name: \"John\" } RRF \"templates/index.htm\" in Log \"Done!\" Finish \"john_doe\" Flow com.foods.sweet Basepath \"recipes/desserts\" ... choice = RRF \"selection.htm\" list = Call com.foods.RecipeUtils#retrieveIngredients choice.meal ... Here is how the project folder might look like: \u251c\u2500\u2500 code/ \u2502 \u2514\u2500\u2500 test.flow \u2502 \u2514\u2500\u2500 com.foods.sweet.flow \u251c\u2500\u2500 web/ \u2502 \u251c\u2500\u2500 hello/ | | \u2514\u2500\u2500 templates/ \u2502 | \u2514\u2500\u2500 index.htm \u2502 | \u2514\u2500\u2500 js/ \u2502 | \u2514\u2500\u2500 font-awesome.js | \u2514\u2500\u2500 recipes/ \u2502 \u2514\u2500\u2500 desserts/ \u2502 \u2514\u2500\u2500 selection.htm \u2502 \u2514\u2500\u2500 logo.png \u251c\u2500\u2500 lib/ \u2502 \u2514\u2500\u2500 com/ \u2502 \u2514\u2500\u2500 foods/ \u2502 \u2514\u2500\u2500 RecipeUtils.java \u2514\u2500\u2500 project.json","title":"Sample project"},{"location":"agama/gama-format/#gama-file","text":"Dealing with a folder this way can be awkward for sharing and other tasks. Instead, if the project contents are compressed using the ZIP file format, we have what is known as .gama file. Thus, a .gama file is a project archive that can be shared and deployed to an Agama engine.","title":".gama file"},{"location":"agama/gama-format/#project-deployment","text":"The actual \"deployment\" of an Agama project is an engine-specific detail. Engines must offer mechanisms for administrators and developers to \"install\" .gama files.","title":"Project deployment"},{"location":"agama/introduction/","tags":["administration","developer","agama"],"text":"Agama overview # Agama is a framework that consists of: A DSL (domain-specific language) purposedly designed for writing web flows A set of rules that drive the behavior of such flows when they are executed The specification of a file format - known as .gama - useful for sharing Agama flows. Flows have the .flow file extension. Here, a web flow is understood as a process composed by one or more stages, where at each stage an actor - normally a person - provides some kind of data or response by using a web browser or similar client. Throughout the process only a single actor is involved. DSL # About the Agama language is worth to mention that: It helps depicting the structure of web flows in a natural way It is closer to human language than general-purpose programming languages It has a clean, concise, non-distracting syntax It has limited computational power by design, forcing computations to occur in a more formal, general-purpose language like Java, C++, etc. Intrinsic properties of the language include: It follows the imperative paradigm mainly and assumes a traditional sequential execution. It only makes use of a few declarative elements Flows can be treated as functions (reusable routines with well-defined inputs) It provides dedicated contructs for common patterns in web flows like: \"show a page\" and \"retrieve the data user provided in that page\" \"redirect a user to an external site\" and later \"retrieve the data provided at a callback URL\" It supports typical language elements like assignments, conditionals, loops, etc. Find the complete Agama DSL reference here . Behavioral rules of execution # These are aspects that concrete implementations of the framework must adhere to. Rules may include for instance: How and when a flow terminates If and how errors are handled in a flow How flows' assets, i.e. UI pages, images, stylesheets, etc., are organized or laid out How delegation of business logic execution occur in a language other than Agama A \"concrete implementation\" as referred above is known as an engine : a software component capable of running flows written in Agama DSL. More information on execution rules can be found here . .gama file format # Check this page for more information.","title":"Introduction"},{"location":"agama/introduction/#agama-overview","text":"Agama is a framework that consists of: A DSL (domain-specific language) purposedly designed for writing web flows A set of rules that drive the behavior of such flows when they are executed The specification of a file format - known as .gama - useful for sharing Agama flows. Flows have the .flow file extension. Here, a web flow is understood as a process composed by one or more stages, where at each stage an actor - normally a person - provides some kind of data or response by using a web browser or similar client. Throughout the process only a single actor is involved.","title":"Agama overview"},{"location":"agama/introduction/#dsl","text":"About the Agama language is worth to mention that: It helps depicting the structure of web flows in a natural way It is closer to human language than general-purpose programming languages It has a clean, concise, non-distracting syntax It has limited computational power by design, forcing computations to occur in a more formal, general-purpose language like Java, C++, etc. Intrinsic properties of the language include: It follows the imperative paradigm mainly and assumes a traditional sequential execution. It only makes use of a few declarative elements Flows can be treated as functions (reusable routines with well-defined inputs) It provides dedicated contructs for common patterns in web flows like: \"show a page\" and \"retrieve the data user provided in that page\" \"redirect a user to an external site\" and later \"retrieve the data provided at a callback URL\" It supports typical language elements like assignments, conditionals, loops, etc. Find the complete Agama DSL reference here .","title":"DSL"},{"location":"agama/introduction/#behavioral-rules-of-execution","text":"These are aspects that concrete implementations of the framework must adhere to. Rules may include for instance: How and when a flow terminates If and how errors are handled in a flow How flows' assets, i.e. UI pages, images, stylesheets, etc., are organized or laid out How delegation of business logic execution occur in a language other than Agama A \"concrete implementation\" as referred above is known as an engine : a software component capable of running flows written in Agama DSL. More information on execution rules can be found here .","title":"Behavioral rules of execution"},{"location":"agama/introduction/#gama-file-format","text":"Check this page for more information.","title":".gama file format"},{"location":"agama/language-reference/","tags":["developer","agama"],"text":"Agama DSL reference # This document surveys the different constructs of the Agama domain-specific language. Code comments # There is support for single line comments only (no block comments). Use // to start a comment. Comments can start anywhere in a line. Data types # In practice, values would fit into any of: string , boolean , number , list or map . Since routines implemented in other languages can be invoked (more on this later), returned values might not match up exactly with these categories, however this is not too relevant because there is no strict type enforcement in Agama. Literals # Strings # They are surrounded by double quotes. Examples: \"Agama\" , \"blah\" , \"\" (empty string) Backslash can be used to escape chars, like \"Hello\\nGluu\" (line feed), \"Hi\\u0040\" (unicode character) Including double quotes in strings requires unicode escaping, like \"\\u0022\" . Using \"\\\"\" won't work Booleans # Only true or false allowed (notice they are lowercased) Numbers # They are expressed in base 10 only Can be signed or unsigned, with or without decimal: 0 , -1 , 2.0 , 2.3 , -3.000001 , etc. No exponential notation allowed (e.g. 1E-05 ) The following are not valid: .1 , -.1 , +1 . These are their OK equivalents: 0.1 , -0.1 , 1 Null # The \u201cspecial\u201d value null can be used (responsibly) to represent the absence of a value. It is a direct consequence of supporting the integration of other languages in the DSL. Lists # They are finite sequences. Elements are separated by commas Examples: [ 1, 2, 3 ] , [ \"bah!\", \"humbug\" ] , [ ] (empty list) Elements of a list do not have to be of the same type: [ false, [ 0, 1], \"?\" ] is legal but generally discouraged Commas can be surrounded by any combination of spaces and new lines. This is handy when a list takes up some space. This is legal: [ \"no\", \"such\", \"thing\" , \"as\", \"a\", \"stupid\",\"question\"] Maps # They are in essence associative arrays (a.k.a. dictionaries): unordered collections of key/value pairs Example: { brand: \"Ford\", color: null, model: 1963, overhaulsIn: [ 1979, 1999 ] } . This map keys are brand , color , model , and overhaulsIn In literal notation, keys names must follow the pattern [a-zA-Z]( _ | [a-zA-Z] | [0-9] )* so these are all valid key names: a , Agama , b_a , a0_0 ; on the contrary, _a , 9 , -a , and \"aha\" are invalid key names As with lists, commas can be surrounded by any combination of spaces and new lines Variables # Variable names follow the pattern: [a-zA-Z]( _ | [a-zA-Z] | [0-9] )* camelCase naming is recommended Variables are not declared, just used freely. Variables are always global in a given flow They can be assigned a value using the equal sign. Example: colors = [ \"red\", \"blue\" ] They can be assigned several times in the same flow Accessing and mutating data in variables # Strings # Suppose x is a string. Individual characters can be accessed by zero-based indexes: x[0] , x[1] , etc. and they are themselves considered strings of size 1 x.length returns the string size (number of characters in it). Strings are not modifiable (neither size nor individual characters can be altered) Lists # Suppose x is a list. Elements can be accessed by zero-based indexes: x[0] , x[1] , etc. Elements of a list can be assigned (and re-assigned) using indexes too. Example: x[2] = false x.length returns the list size. This value can be updated in order to shrink or grow a list (e.g. x.length = 10 ). When extending a list beyond its current length, the \u201cgap\u201d created is filled with null values An attempt to access an index position greater than or equal to the list size returns null (most general-purpose languages would raise a runtime error in this situation) Using expressions for indexing is not allowed, like x[person.age] , x[y[0]] Click here to learn more about access in lists Maps # Suppose x is map. Values can be accessed by using \u201cdot notation\u201d Say x = { brand: \"Ford\", color: null, model: 1963, overhaulsIn: [ 1979, 1999 ] } , then x.model evaluates to 1963 , and x.overhaulsIn[1] evaluates to 1999 Setting the color would be like x.color = \"white\" A new key/value pair can be appended too: x.maxSpeed = 90 Access of an unknown property evaluates to null : x.owner If a key name does not follow the pattern [a-zA-Z]( _ | [a-zA-Z] | [0-9] )* an alternative notation must be employed to retrieve or modify the associated value. Click here to learn more Flow structure # A flow written in Agama consists of a header and one or more statements following. Header basics # A header is declarative by nature. It starts with the Flow keyword followed by the qualified name of the flow, e.g. Flow com.acme.FoodSurvey . A qualified name is a sequence of one or more fragments separated by dot ( . ) where a fragment follows the pattern [a-zA-Z]( _ | [a-zA-Z] | [0-9] )* . By convention, qualified names shall adhere to a reverse Internet domain name notation. In a header, at minimum, a base path literal string must be provided (in an indented block). This sets the location where flow assets will reside relative to the assets root: Flow com.acme.FoodSurvey Basepath \"mydir\" Here, assets refer to all elements required to build the end-user experience: UI pages, stylesheets, images, etc. The storage of these elements and location of the \"root\" are specific to the concrete Agama engine implementation used. Generally it will resemble a directory structure in a filesystem. Next, flow timeout may be specified. This is the maximum amount of time the end-user can take to fully complete a flow. For instance: Flow com.acme.FoodSurvey Basepath \"mydir\" Timeout 100 seconds An unsigned integer literal value must be specified after the Timeout keyword, if present. The Configs keyword may be used to designate a variable so the flow's properties can be accessed in the code. These properties are usually provided when the flow is created - normally through an administrative tool. This process varies from engine to engine. Often flow properties are used to supply configuration parameters to the flow. As an example, suppose a flow that sends a confirmation e-mail has to be implemented. Properties are a good place to hold the configuration of the outgoing mail server to employ: name, port, authentication credentials, etc. For instance, this is how the configuration properties would be bound to variable conf : Flow com.acme.FoodSurvey Basepath \"mydir\" Timeout 100 seconds Configs conf Inputs # In addition to the above, and optionally too, flows may receive inputs from their callers. Input names can be listed using the Inputs keyword: Flow com.acme.FoodSurvey Basepath \"mydir\" Inputs salutation askGender promptRealName Input names follow the same naming conventions (patterns) of variables and can be treated as such in code. Important Note the difference between properties and inputs. Properties are parameters that callers of the flow should not control or be interested in. On the other hand, inputs are parameters that callers supply explicitly to make the flow exhibit certain behaviors. To learn how callers can pass values to input parameters of a check here . Flow statements # The statements that make up a flow - body - come after the header and start at column 1, ie. aligned with the Flow keyword: Flow com.acme.FoodSurvey Basepath \"mydir\" Timeout 100 seconds Configs conf Inputs salutation askGender promptRealName x = \"Hi\" y = false ... There are several types of statements: branching, looping, web interaction, etc. They will be regarded in the subsequent sections of this document. Note Agama does not support the concept of subroutines/procedures; this is not needed because functional decomposition is carried out by calling subflows . Logging # Flows can issue small messages (normally used as a form of troubleshooting) that will be appended to a log. Every message can be associated a severity level. Both the log location and available levels are engine specific. To append data to the flows log, use the Log instruction. Examples: Code Message appended Notes Log \"Hi there\" Hi there Log \"Hello\" \"world\" Hello world Log can be passed a variable number of parameters Log \"Hello\" \"world\" 0 false Hello world 0 false Log [1, 2, 3, 4, 5] 1, 2, 3, ...more Lists and maps are not traversed wholly Log \"Hell%% 0 %\" \"o\" \" world\" false Hello world 0 false Placeholders usage Log \"% % % yes\" 1 \"two\" 1 two % yes Log \"3\" \"%\" 0 3 % 0 Log \"@warn Today is Friday %th\" 13 Today is Friday 13th Message logged as warning (if the engine features a \"warning\" level) Log \"@w Today's Armageddon \\u263A\" Today's Armageddon \u263a Message logged as warning (if the engine features a \"w\" level - shortcut method) Check your engine's documentation to learn more about how statements are logged. Conditionals and branching # Keywords When and Otherwise allow to write conditionals. With and , or , is , and is not , logical (boolean) expressions can be built. Examples: car = { brand: \"Ford\", color: null, model: 1963 } When car.color is null car.color = \"pink\" ... Nested conditionals: ... When car.color is \"pink\" When car.brand is \"Ford\" Log \"Weird-looking car\" ... Use of Otherwise : ... When car.color is not null Log \"you have a regular painted car\" ... Otherwise ... Boolean expressions can span several lines: and and or can be at the start or end of a line as long as the whole expression is left-aligned with its corresponding When . Examples: //legal: When day is cloudy When there is hope and there is mercy Log \"let's rock n' roll\" ... When day is cloudy When there is hope and // :D there is mercy or fear is null Log \"let's rock n' roll\" ... //illegal: When day is cloudy When there is hope and // :D there is mercy or fear is null Log \"let's rock n' roll\" ... When day is cloudy When there is hope and // :D there is mercy or fear is null Log \"let's rock n' roll\" ... Notes: Equality is designed to work with null , numbers, strings, and boolean values only. More exactly, a number should only be compared to a number, a string to a string, etc., otherwise the equality test evaluates to false . Comparing a value with itself evaluates to true regardless of type, i.e. car is car , null is null , false is false are all truthy Comparisons are limited to equality ( is ) or inequality ( is not ). For other forms of comparison you can resort foreign routines As expected and has higher priority than or when evaluating expressions. There is no way to group expressions to override the precedence: there are no parenthesis in Agama. Assigning the result of a boolean expression to a variable is not supported. These restrictions are important when writing conditionals Advanced matching # Agama's Match ... to is a construct similar to C/Java switch . Example: car = ... x = ... y = ... // Assume x and y hold numbers z = [ 3.1416, 2.71828 ] Match car.model to x //Code in this block will be executed if car.model is equal to the value of x ... -y //Here we use minus y ... z[0] ... 1.618 //Literal values can be used too for matching ... null ... Otherwise //optional block //Instructions here are executed if there was no match at all Flow finish # Finish is used to terminate a flow's execution. A flow can finish successfully or failed. Examples: Code Meaning Finish true Shorthand for flow finished successfully Finish false Shorthand for failed flow it = { success: true, data: { userId: \"as9233Qz\", ... }} Finish it Flow finished successfully. Some relevant data attached it = { success: false, error: \"User entered a wrong password 3 times\" } Finish it Flow failed. Error description attached Finish \"as9233Qz\" Shorthand for { success: true, data: { userId: \"as9233Qz\" } } it = { nonsense: [ null ] } Finish it.nonsense This causes the flow to crash. Note this is not equivalent to Finish false (which means the flow ended with a negative outcome). Notes: Unless otherwise stated by the concrete engine implementation, a map literal should not be passed directly as argument. This means the following is illegal: Finish { success: false, error: \"spacetime singularity\" } . The examples above list several syntactically valid usages Any statement found after Finish is not reached and thus, not executed If no Finish statement is found in a flow's execution, this will degenerate in flow crash When a flow is finished and was used as subflow (part of the execution of a bigger parent flow), the parent does not terminate. Execution continues at the following instruction that triggered the subflow. More on Trigger later Using data in the Finish directive is an effective way to communicate information to callers (parent flows) Learn more about flows lifecycle here Web interaction # Web interaction constructs bring the most value to Agama. Developers can express the concepts of \u201dredirect a user to an external site and retrieve any data later provided\u201d or \u201cshow a page and grab user data after interaction\u201d using atomic instructions. RFAC # RFAC (stands for Redirect and Fetch at callback ) abstracts the process of redirecting the user's browser to an external site and then collect the data presented later at a designated callback URL. This feature is particularly useful in inbound identity scenarios (e.g. to support social login). Example Details RFAC \"https://login.twitter.com/?blah..&boo=...\" Redirects to the given location. Once the user browser is taken to the callback URL by the external site (twitter.com), the flow continues ignoring any data included map = { twitter: { loginUrl: \"https://...\", ... }, ... } result = RFAC map.twitter.loginUrl Redirects to the given location. Once the user browser is taken to the callback URL by the external site, the data included in the query string or payload is stored in result (a map) for further processing The callback URL varies depending on the engine used. Check your engine's docs. RRF # RRF (stands for Render-Reply-Fetch ) abstracts the process of rendering a UI template, send the produced markup to the browser and grab user-provided data back at the server side. Example Details RRF \"survey.htm\" Renders the template survey.htm (located in this flow's base path) and resulting markup is replied to user's browser. Data submitted by the user is ignored obj = { salutation: \"Hey!\", ... } result = RRF \"survey.htm\" obj Renders the template survey.htm by injecting the data passed in obj and the resulting markup is replied to user's browser. Data submitted by the user is stored in variable result : a map whose keys are named according to the form fields present in survey.htm Notes: The template location must be specified with a string literal only (not a variable) Where and how to store templates is an engine-specific detail as well as the file formats supported. See Assets management . Use map variables - not literals _map_s - for the second argument of RRF Looping # There are two constructs available for looping in Agama: Repeat and Iterate over . Repeat # Repeat was designed with the concept of attempts/retries in mind: a set of statements are executed, a condition can optionally be supplied in order to abort the loop early, and (optionally too) a block of statements can be executed before the next iteration is started if the condition evaluated to false . A loop is given a maximum number of iterations. Examples: Example Notes month = \"\u2026\" Repeat 3 times max data = RRF \"guess_birthday_month.htm\" //Quit is optional in loops Quit When data.guess is month A loop that runs 3 iterations at most. A page is shown at every iteration. If the value entered by the user matches that of `month` variable, the loop is aborted earlier x = \u2026 // an integer value month = \"\u2026\" obj = { error: null } Repeat x times max data = RRF \"guess_birthday_month.htm\" obj Quit When data.guess is month obj.error = \"Wrong! try again\" Similar to previous example This time the max no. of iterations is set using a variable When there is a miss a message error is set (which the UI template may potentially use) x = \u2026 // an integer value month = \"\u2026\" obj = { error: null } y = Repeat x times max data = RRF \"guess_birthday_month.htm\" obj Quit When data.guess is month obj.error = \"Wrong! try again\" Log \"Attempt number:\" idx[0] Similar to previous example After the loop finishes, variable y will contain the total number of iterations made to completion. This excludes partial iterations aborted by Quit , thus, y < = x Note the usage of implicit variable idx which holds the current (zero-based) iteration number Iterate over # Iterate over is used to traverse the items of a string, list, or the keys of a map. At every iteration, a variable is set with the current item or key name. As with Repeat , a loop may be aborted earlier, an optional block of statements can be specified after Quit , and the total number of iterations can be stored in a variable. Example Notes seasons = [ \"spring\", \"winter\", \"fall\", \"summer\" ] Iterate over seasons using sn Log \"There is nothing like\" sn A loop running over a simple list. Every element visited is referenced with variable sn human = { weight: 100, height: 5.9, age: 26 } Iterate over human using attribute Log attribute \"is\" human.$attribute Iterates over the keys of the map printing both the key and its associated value. To learn about the .$ notation see [Maps and dot notation](#maps-and-dot-notation) seasons = [ \"spring\", \"winter\", \"fall\", \"summer\" ] sports = [ \"soccer\", \"golf\", \"tennis\" ] Iterate over seasons using sn Iterate over sports using sport Log \"There is nothing like playing % in %\" sport sn Nested loops seasons = [ \"spring\", \"winter\", \"fall\", \"summer\" ] sports = [ \"soccer,\" \"golf\", \"tenis\" ] Iterate over seasons using sn y = Iterate over sports using sport Log \"Shall we play % in % ?\" sport sn Quit When sn is \"winter\" Log \"yes!\" Log \"We played % sports in %\" y sn Similar to the previous example. The inner loop is aborted upon a given condition. Note the total number of complete iterations is recorded in y every time the inner loop finishes. seasons = [ \"spring\", \"winter\", \"fall\", \"summer\" ] sports = [ \"soccer,\" \"golf\", \"tenis\" ] Iterate over seasons using sn Iterate over sports using sport Log idx[0] idx[1] Prints iteration numbers: 0 0, 0 1, 0 2, 1 0, 1 1, 1 2, ... 3 2 The index used in idx is 0 for the outermost loop and increases by one at every level of loop nesting Subflows # A flow can Trigger another flow (a.k.a subflow) and grab its response when Finish ed. This feature materializes flow composition and re-use in Agama. Example Notes Trigger jo.jo.PersonalInfoGathering Starts the flow with qualified name jo.jo.PersonalInfoGathering . Returned data is ignored outcome = Trigger jo.jo.PersonalInfoGathering null false Log \"subflow returned with success?\" outcome.success Starts a flow passing parameters (assuming PersonalInfoGathering receives two inputs). outcome will contain the map used when the subflow ended outcome | E = Trigger jo.jo.PersonalInfoGathering null false Similar to the previous example. If for some reason PersonalInfoGathering crashes, variable E will hold a reference to the error for further processing. Otherwise E evaluates to null . The type/structure of E is an engine-specific detail. The variable on the left of the pipe ( | ) can be omitted if the outcome of the flow will not be inspected userPrefs = { otp: \"...\", ... } Match userPrefs.otp to \"e-mail\" flow = \"co.acme.EmailOTP\" \"sms\" flow = \"co.acme.SmsOTP\" Trigger $flow Starts a flow whose qualified name is determined at runtime Input parameters # The values passed after the flow name in Trigger are supplied as input parameters in the order declared by the subflow's Inputs . When not enough values are passed, the unassigned inputs will hold a null value. Unless otherwise stated by the concrete engine implementation, list and map literals should not be passed as arguments to Trigger : Illegal: Trigger subflow { key: [ 1, 2 , 3] } [ \"Yeeha!\" ] Legal: Trigger subflow x car.model list[1] null false -3 \"Sam\" Template overrides # When re-using flows, existing templates may not match the required look-and-feel or layout of the flow that is being built, or may require minor adjustments to fit better the parent's needs. These can be overcome by declaring which templates the developer would like to override for a given subflow call. Example: outcome = Trigger jo.jo.PersonalInfoGathering Override templates \"path/basic.htm\" \"\" \"path2/dir/detail.htm\" \"tmp/mydetail.htm\" Log \"subflow returned with success?\" outcome.success In an indented block using the Override templates keyword, several string literals can be provided. They specify the paths of the (subflows) templates that will be overriden by the parent and the corresponding new paths. In the example above, templates path/basic.htm and path2/dir/detail.htm rendered by flow PersonalInfoGathering (or its subflows) won't be picked from these locations but from the base path of the current (parent) flow using names basic.htm and tmp/mydetail.htm respectively. Usage of empty string denotes reusing the same file name than the original file. Alternatively, every pair of original vs. overriden path can be specified in a single line for more clarity, like this: outcome = Trigger jo.jo.PersonalInfoGathering Override templates \"path/basic.htm\" \"\" \"path2/dir/detail.htm\" \"tmp/mydetail.htm\" ... Foreign routines # Business logic implemented in languages other than Agama can be re-used by means of the Call instruction. Call plays a key role because Agama code serves fundamentally as a depiction of a flow hiding most of the internal details and low-level computations which are in turn delegated to foreign routines. The syntax of this directive is very general and actual semantics are left to the concrete engine. Roughly, here is how a Call can be structured: ( var_expr? ('|' var_name)? = )? Call alnum(.alnum)* (#alnum)? arg* where: var_name is a variable name , e.g.: x , fooBar , x_0 var_expr is a variable expression, e.g.: x , x.a , x[1].b , etc. alnum is syntactically identical to var_name but does not necessarily refer to an existing variable in the code, for instance, it may describe a path to locate a routine in a library arg is a var_expr or any string , number , boolean , null literal So the below are all syntactically valid invocations: Call apple#pear Call apple#pear \"Hi\" x 16 Call apple.banana#pear \"Hi\" abc 16 foo = Call apple.banana#pear \"Hi\" abc 16 foo | error = Call apple.banana#pear \"Hi\" abc 16 | error = Call apple.banana#pear \"Hi\" abc 16 x[0].ahoy.ahoy foo = Call street fighters true false Again, the semantics are given by the specific engine. Consult your engine documentation for examples. Unless otherwise stated by the concrete engine implementation, list and map literals should not be passed as arguments to method calls directly. This means the following is illegal: Call co.Utils#routine { key: [ 1, 2 , 3] } [ \"Yeeha!\" ] . Advanced and special cases in variable manipulation # Indexing in lists # Accessing/modifying list elements requires providing a numeric index between the brackets, e.g. x[ 0 ] . Note variables can also be used for indexing, like x[ y ] where y is a positive integer or zero. For the below table, assume x = [ \"one\", \"two\", \"three\" ] . x[1] //\"two\" y = 1 x[y] //\"two\" x[\"1\"] //illegal x[ z[0] ] //illegal: variable expressions not allowed for indexes x[obj.property] //illegal: variable expressions not allowed for indexes Maps and dot notation # The regular \u201cdot\u201d notation is limited in the sense it is fairly static: developers have to have prior knowledge about the keys' names, in other words, about the structure of maps and nested submaps, like in person.homeAddress.postalCode . Also, there might be cases where a key name does not fit the required pattern, like in person.street-address or persona.direcci\u00f3n ; even worse, there might be cases where the actual key is only known at runtime. There are ways to overcome this: Example Notes x.\"- wow!\" Access the value associated to the key named -wow! prop = ... x.$prop Access the value associated to the key whose name is contained in the variable prop (that holds a string value). Note actual value of prop may be originated from a Java call or another form of computation propA = ... propB = ... x.$propA.c.\"d\".$propB A mix of notations is valid. For example, if x= { a: { b: 0, c: { c: true, d: { e: null, f: \"hello\" } } } } , propA is equal to \"a\" , and propB to \"f\" , the expression on the left evaluates \"hello\" Usage of .$ requires to supply a variable after the dollar sign: grouped variable expressions are not supported. Thus, it is not possible to achieve something like x.a.c.($map.mykey).f in order to obtain \"hello\" if map = { mykey: \"d\" } . Indexing in maps # For convenience, when a key name \u201clooks like\u201d a positive integer (or zero), e.g. \"2\" , \"10\" , etc., numeric values can directly be used to get/set data in a map: x = { } x.\"1\" = \"golf\" x[1] //retrieves \"golf\" x[2] = \"polo\" //adds the key/value pair \"2\" / \"polo\" Language keywords # The following is a list of reserved words and as such, cannot be used as variable names or maps keys (in literal notation). Keyword Purpose/usage Basepath header declaration Call Java interaction Configs header declaration Finish termination Flow header declaration Inputs header declaration Iterate over loops Log logging Match conditionals Otherwise conditionals Override templates web interaction Quit conditionals and loops Repeat loops RFAC web interaction RRF web interaction seconds header declaration times max loops to conditionals Timeout header declaration Trigger subflow calls using loops When conditionals Operator and is is not or Special literals true false null","title":"Language reference"},{"location":"agama/language-reference/#agama-dsl-reference","text":"This document surveys the different constructs of the Agama domain-specific language.","title":"Agama DSL reference"},{"location":"agama/language-reference/#code-comments","text":"There is support for single line comments only (no block comments). Use // to start a comment. Comments can start anywhere in a line.","title":"Code comments"},{"location":"agama/language-reference/#data-types","text":"In practice, values would fit into any of: string , boolean , number , list or map . Since routines implemented in other languages can be invoked (more on this later), returned values might not match up exactly with these categories, however this is not too relevant because there is no strict type enforcement in Agama.","title":"Data types"},{"location":"agama/language-reference/#literals","text":"","title":"Literals"},{"location":"agama/language-reference/#strings","text":"They are surrounded by double quotes. Examples: \"Agama\" , \"blah\" , \"\" (empty string) Backslash can be used to escape chars, like \"Hello\\nGluu\" (line feed), \"Hi\\u0040\" (unicode character) Including double quotes in strings requires unicode escaping, like \"\\u0022\" . Using \"\\\"\" won't work","title":"Strings"},{"location":"agama/language-reference/#booleans","text":"Only true or false allowed (notice they are lowercased)","title":"Booleans"},{"location":"agama/language-reference/#numbers","text":"They are expressed in base 10 only Can be signed or unsigned, with or without decimal: 0 , -1 , 2.0 , 2.3 , -3.000001 , etc. No exponential notation allowed (e.g. 1E-05 ) The following are not valid: .1 , -.1 , +1 . These are their OK equivalents: 0.1 , -0.1 , 1","title":"Numbers"},{"location":"agama/language-reference/#null","text":"The \u201cspecial\u201d value null can be used (responsibly) to represent the absence of a value. It is a direct consequence of supporting the integration of other languages in the DSL.","title":"Null"},{"location":"agama/language-reference/#lists","text":"They are finite sequences. Elements are separated by commas Examples: [ 1, 2, 3 ] , [ \"bah!\", \"humbug\" ] , [ ] (empty list) Elements of a list do not have to be of the same type: [ false, [ 0, 1], \"?\" ] is legal but generally discouraged Commas can be surrounded by any combination of spaces and new lines. This is handy when a list takes up some space. This is legal: [ \"no\", \"such\", \"thing\" , \"as\", \"a\", \"stupid\",\"question\"]","title":"Lists"},{"location":"agama/language-reference/#maps","text":"They are in essence associative arrays (a.k.a. dictionaries): unordered collections of key/value pairs Example: { brand: \"Ford\", color: null, model: 1963, overhaulsIn: [ 1979, 1999 ] } . This map keys are brand , color , model , and overhaulsIn In literal notation, keys names must follow the pattern [a-zA-Z]( _ | [a-zA-Z] | [0-9] )* so these are all valid key names: a , Agama , b_a , a0_0 ; on the contrary, _a , 9 , -a , and \"aha\" are invalid key names As with lists, commas can be surrounded by any combination of spaces and new lines","title":"Maps"},{"location":"agama/language-reference/#variables","text":"Variable names follow the pattern: [a-zA-Z]( _ | [a-zA-Z] | [0-9] )* camelCase naming is recommended Variables are not declared, just used freely. Variables are always global in a given flow They can be assigned a value using the equal sign. Example: colors = [ \"red\", \"blue\" ] They can be assigned several times in the same flow","title":"Variables"},{"location":"agama/language-reference/#accessing-and-mutating-data-in-variables","text":"","title":"Accessing and mutating data in variables"},{"location":"agama/language-reference/#strings_1","text":"Suppose x is a string. Individual characters can be accessed by zero-based indexes: x[0] , x[1] , etc. and they are themselves considered strings of size 1 x.length returns the string size (number of characters in it). Strings are not modifiable (neither size nor individual characters can be altered)","title":"Strings"},{"location":"agama/language-reference/#lists_1","text":"Suppose x is a list. Elements can be accessed by zero-based indexes: x[0] , x[1] , etc. Elements of a list can be assigned (and re-assigned) using indexes too. Example: x[2] = false x.length returns the list size. This value can be updated in order to shrink or grow a list (e.g. x.length = 10 ). When extending a list beyond its current length, the \u201cgap\u201d created is filled with null values An attempt to access an index position greater than or equal to the list size returns null (most general-purpose languages would raise a runtime error in this situation) Using expressions for indexing is not allowed, like x[person.age] , x[y[0]] Click here to learn more about access in lists","title":"Lists"},{"location":"agama/language-reference/#maps_1","text":"Suppose x is map. Values can be accessed by using \u201cdot notation\u201d Say x = { brand: \"Ford\", color: null, model: 1963, overhaulsIn: [ 1979, 1999 ] } , then x.model evaluates to 1963 , and x.overhaulsIn[1] evaluates to 1999 Setting the color would be like x.color = \"white\" A new key/value pair can be appended too: x.maxSpeed = 90 Access of an unknown property evaluates to null : x.owner If a key name does not follow the pattern [a-zA-Z]( _ | [a-zA-Z] | [0-9] )* an alternative notation must be employed to retrieve or modify the associated value. Click here to learn more","title":"Maps"},{"location":"agama/language-reference/#flow-structure","text":"A flow written in Agama consists of a header and one or more statements following.","title":"Flow structure"},{"location":"agama/language-reference/#header-basics","text":"A header is declarative by nature. It starts with the Flow keyword followed by the qualified name of the flow, e.g. Flow com.acme.FoodSurvey . A qualified name is a sequence of one or more fragments separated by dot ( . ) where a fragment follows the pattern [a-zA-Z]( _ | [a-zA-Z] | [0-9] )* . By convention, qualified names shall adhere to a reverse Internet domain name notation. In a header, at minimum, a base path literal string must be provided (in an indented block). This sets the location where flow assets will reside relative to the assets root: Flow com.acme.FoodSurvey Basepath \"mydir\" Here, assets refer to all elements required to build the end-user experience: UI pages, stylesheets, images, etc. The storage of these elements and location of the \"root\" are specific to the concrete Agama engine implementation used. Generally it will resemble a directory structure in a filesystem. Next, flow timeout may be specified. This is the maximum amount of time the end-user can take to fully complete a flow. For instance: Flow com.acme.FoodSurvey Basepath \"mydir\" Timeout 100 seconds An unsigned integer literal value must be specified after the Timeout keyword, if present. The Configs keyword may be used to designate a variable so the flow's properties can be accessed in the code. These properties are usually provided when the flow is created - normally through an administrative tool. This process varies from engine to engine. Often flow properties are used to supply configuration parameters to the flow. As an example, suppose a flow that sends a confirmation e-mail has to be implemented. Properties are a good place to hold the configuration of the outgoing mail server to employ: name, port, authentication credentials, etc. For instance, this is how the configuration properties would be bound to variable conf : Flow com.acme.FoodSurvey Basepath \"mydir\" Timeout 100 seconds Configs conf","title":"Header basics"},{"location":"agama/language-reference/#inputs","text":"In addition to the above, and optionally too, flows may receive inputs from their callers. Input names can be listed using the Inputs keyword: Flow com.acme.FoodSurvey Basepath \"mydir\" Inputs salutation askGender promptRealName Input names follow the same naming conventions (patterns) of variables and can be treated as such in code. Important Note the difference between properties and inputs. Properties are parameters that callers of the flow should not control or be interested in. On the other hand, inputs are parameters that callers supply explicitly to make the flow exhibit certain behaviors. To learn how callers can pass values to input parameters of a check here .","title":"Inputs"},{"location":"agama/language-reference/#flow-statements","text":"The statements that make up a flow - body - come after the header and start at column 1, ie. aligned with the Flow keyword: Flow com.acme.FoodSurvey Basepath \"mydir\" Timeout 100 seconds Configs conf Inputs salutation askGender promptRealName x = \"Hi\" y = false ... There are several types of statements: branching, looping, web interaction, etc. They will be regarded in the subsequent sections of this document. Note Agama does not support the concept of subroutines/procedures; this is not needed because functional decomposition is carried out by calling subflows .","title":"Flow statements"},{"location":"agama/language-reference/#logging","text":"Flows can issue small messages (normally used as a form of troubleshooting) that will be appended to a log. Every message can be associated a severity level. Both the log location and available levels are engine specific. To append data to the flows log, use the Log instruction. Examples: Code Message appended Notes Log \"Hi there\" Hi there Log \"Hello\" \"world\" Hello world Log can be passed a variable number of parameters Log \"Hello\" \"world\" 0 false Hello world 0 false Log [1, 2, 3, 4, 5] 1, 2, 3, ...more Lists and maps are not traversed wholly Log \"Hell%% 0 %\" \"o\" \" world\" false Hello world 0 false Placeholders usage Log \"% % % yes\" 1 \"two\" 1 two % yes Log \"3\" \"%\" 0 3 % 0 Log \"@warn Today is Friday %th\" 13 Today is Friday 13th Message logged as warning (if the engine features a \"warning\" level) Log \"@w Today's Armageddon \\u263A\" Today's Armageddon \u263a Message logged as warning (if the engine features a \"w\" level - shortcut method) Check your engine's documentation to learn more about how statements are logged.","title":"Logging"},{"location":"agama/language-reference/#conditionals-and-branching","text":"Keywords When and Otherwise allow to write conditionals. With and , or , is , and is not , logical (boolean) expressions can be built. Examples: car = { brand: \"Ford\", color: null, model: 1963 } When car.color is null car.color = \"pink\" ... Nested conditionals: ... When car.color is \"pink\" When car.brand is \"Ford\" Log \"Weird-looking car\" ... Use of Otherwise : ... When car.color is not null Log \"you have a regular painted car\" ... Otherwise ... Boolean expressions can span several lines: and and or can be at the start or end of a line as long as the whole expression is left-aligned with its corresponding When . Examples: //legal: When day is cloudy When there is hope and there is mercy Log \"let's rock n' roll\" ... When day is cloudy When there is hope and // :D there is mercy or fear is null Log \"let's rock n' roll\" ... //illegal: When day is cloudy When there is hope and // :D there is mercy or fear is null Log \"let's rock n' roll\" ... When day is cloudy When there is hope and // :D there is mercy or fear is null Log \"let's rock n' roll\" ... Notes: Equality is designed to work with null , numbers, strings, and boolean values only. More exactly, a number should only be compared to a number, a string to a string, etc., otherwise the equality test evaluates to false . Comparing a value with itself evaluates to true regardless of type, i.e. car is car , null is null , false is false are all truthy Comparisons are limited to equality ( is ) or inequality ( is not ). For other forms of comparison you can resort foreign routines As expected and has higher priority than or when evaluating expressions. There is no way to group expressions to override the precedence: there are no parenthesis in Agama. Assigning the result of a boolean expression to a variable is not supported. These restrictions are important when writing conditionals","title":"Conditionals and branching"},{"location":"agama/language-reference/#advanced-matching","text":"Agama's Match ... to is a construct similar to C/Java switch . Example: car = ... x = ... y = ... // Assume x and y hold numbers z = [ 3.1416, 2.71828 ] Match car.model to x //Code in this block will be executed if car.model is equal to the value of x ... -y //Here we use minus y ... z[0] ... 1.618 //Literal values can be used too for matching ... null ... Otherwise //optional block //Instructions here are executed if there was no match at all","title":"Advanced matching"},{"location":"agama/language-reference/#flow-finish","text":"Finish is used to terminate a flow's execution. A flow can finish successfully or failed. Examples: Code Meaning Finish true Shorthand for flow finished successfully Finish false Shorthand for failed flow it = { success: true, data: { userId: \"as9233Qz\", ... }} Finish it Flow finished successfully. Some relevant data attached it = { success: false, error: \"User entered a wrong password 3 times\" } Finish it Flow failed. Error description attached Finish \"as9233Qz\" Shorthand for { success: true, data: { userId: \"as9233Qz\" } } it = { nonsense: [ null ] } Finish it.nonsense This causes the flow to crash. Note this is not equivalent to Finish false (which means the flow ended with a negative outcome). Notes: Unless otherwise stated by the concrete engine implementation, a map literal should not be passed directly as argument. This means the following is illegal: Finish { success: false, error: \"spacetime singularity\" } . The examples above list several syntactically valid usages Any statement found after Finish is not reached and thus, not executed If no Finish statement is found in a flow's execution, this will degenerate in flow crash When a flow is finished and was used as subflow (part of the execution of a bigger parent flow), the parent does not terminate. Execution continues at the following instruction that triggered the subflow. More on Trigger later Using data in the Finish directive is an effective way to communicate information to callers (parent flows) Learn more about flows lifecycle here","title":"Flow finish"},{"location":"agama/language-reference/#web-interaction","text":"Web interaction constructs bring the most value to Agama. Developers can express the concepts of \u201dredirect a user to an external site and retrieve any data later provided\u201d or \u201cshow a page and grab user data after interaction\u201d using atomic instructions.","title":"Web interaction"},{"location":"agama/language-reference/#rfac","text":"RFAC (stands for Redirect and Fetch at callback ) abstracts the process of redirecting the user's browser to an external site and then collect the data presented later at a designated callback URL. This feature is particularly useful in inbound identity scenarios (e.g. to support social login). Example Details RFAC \"https://login.twitter.com/?blah..&boo=...\" Redirects to the given location. Once the user browser is taken to the callback URL by the external site (twitter.com), the flow continues ignoring any data included map = { twitter: { loginUrl: \"https://...\", ... }, ... } result = RFAC map.twitter.loginUrl Redirects to the given location. Once the user browser is taken to the callback URL by the external site, the data included in the query string or payload is stored in result (a map) for further processing The callback URL varies depending on the engine used. Check your engine's docs.","title":"RFAC"},{"location":"agama/language-reference/#rrf","text":"RRF (stands for Render-Reply-Fetch ) abstracts the process of rendering a UI template, send the produced markup to the browser and grab user-provided data back at the server side. Example Details RRF \"survey.htm\" Renders the template survey.htm (located in this flow's base path) and resulting markup is replied to user's browser. Data submitted by the user is ignored obj = { salutation: \"Hey!\", ... } result = RRF \"survey.htm\" obj Renders the template survey.htm by injecting the data passed in obj and the resulting markup is replied to user's browser. Data submitted by the user is stored in variable result : a map whose keys are named according to the form fields present in survey.htm Notes: The template location must be specified with a string literal only (not a variable) Where and how to store templates is an engine-specific detail as well as the file formats supported. See Assets management . Use map variables - not literals _map_s - for the second argument of RRF","title":"RRF"},{"location":"agama/language-reference/#looping","text":"There are two constructs available for looping in Agama: Repeat and Iterate over .","title":"Looping"},{"location":"agama/language-reference/#repeat","text":"Repeat was designed with the concept of attempts/retries in mind: a set of statements are executed, a condition can optionally be supplied in order to abort the loop early, and (optionally too) a block of statements can be executed before the next iteration is started if the condition evaluated to false . A loop is given a maximum number of iterations. Examples: Example Notes month = \"\u2026\" Repeat 3 times max data = RRF \"guess_birthday_month.htm\" //Quit is optional in loops Quit When data.guess is month A loop that runs 3 iterations at most. A page is shown at every iteration. If the value entered by the user matches that of `month` variable, the loop is aborted earlier x = \u2026 // an integer value month = \"\u2026\" obj = { error: null } Repeat x times max data = RRF \"guess_birthday_month.htm\" obj Quit When data.guess is month obj.error = \"Wrong! try again\" Similar to previous example This time the max no. of iterations is set using a variable When there is a miss a message error is set (which the UI template may potentially use) x = \u2026 // an integer value month = \"\u2026\" obj = { error: null } y = Repeat x times max data = RRF \"guess_birthday_month.htm\" obj Quit When data.guess is month obj.error = \"Wrong! try again\" Log \"Attempt number:\" idx[0] Similar to previous example After the loop finishes, variable y will contain the total number of iterations made to completion. This excludes partial iterations aborted by Quit , thus, y < = x Note the usage of implicit variable idx which holds the current (zero-based) iteration number","title":"Repeat"},{"location":"agama/language-reference/#iterate-over","text":"Iterate over is used to traverse the items of a string, list, or the keys of a map. At every iteration, a variable is set with the current item or key name. As with Repeat , a loop may be aborted earlier, an optional block of statements can be specified after Quit , and the total number of iterations can be stored in a variable. Example Notes seasons = [ \"spring\", \"winter\", \"fall\", \"summer\" ] Iterate over seasons using sn Log \"There is nothing like\" sn A loop running over a simple list. Every element visited is referenced with variable sn human = { weight: 100, height: 5.9, age: 26 } Iterate over human using attribute Log attribute \"is\" human.$attribute Iterates over the keys of the map printing both the key and its associated value. To learn about the .$ notation see [Maps and dot notation](#maps-and-dot-notation) seasons = [ \"spring\", \"winter\", \"fall\", \"summer\" ] sports = [ \"soccer\", \"golf\", \"tennis\" ] Iterate over seasons using sn Iterate over sports using sport Log \"There is nothing like playing % in %\" sport sn Nested loops seasons = [ \"spring\", \"winter\", \"fall\", \"summer\" ] sports = [ \"soccer,\" \"golf\", \"tenis\" ] Iterate over seasons using sn y = Iterate over sports using sport Log \"Shall we play % in % ?\" sport sn Quit When sn is \"winter\" Log \"yes!\" Log \"We played % sports in %\" y sn Similar to the previous example. The inner loop is aborted upon a given condition. Note the total number of complete iterations is recorded in y every time the inner loop finishes. seasons = [ \"spring\", \"winter\", \"fall\", \"summer\" ] sports = [ \"soccer,\" \"golf\", \"tenis\" ] Iterate over seasons using sn Iterate over sports using sport Log idx[0] idx[1] Prints iteration numbers: 0 0, 0 1, 0 2, 1 0, 1 1, 1 2, ... 3 2 The index used in idx is 0 for the outermost loop and increases by one at every level of loop nesting","title":"Iterate over"},{"location":"agama/language-reference/#subflows","text":"A flow can Trigger another flow (a.k.a subflow) and grab its response when Finish ed. This feature materializes flow composition and re-use in Agama. Example Notes Trigger jo.jo.PersonalInfoGathering Starts the flow with qualified name jo.jo.PersonalInfoGathering . Returned data is ignored outcome = Trigger jo.jo.PersonalInfoGathering null false Log \"subflow returned with success?\" outcome.success Starts a flow passing parameters (assuming PersonalInfoGathering receives two inputs). outcome will contain the map used when the subflow ended outcome | E = Trigger jo.jo.PersonalInfoGathering null false Similar to the previous example. If for some reason PersonalInfoGathering crashes, variable E will hold a reference to the error for further processing. Otherwise E evaluates to null . The type/structure of E is an engine-specific detail. The variable on the left of the pipe ( | ) can be omitted if the outcome of the flow will not be inspected userPrefs = { otp: \"...\", ... } Match userPrefs.otp to \"e-mail\" flow = \"co.acme.EmailOTP\" \"sms\" flow = \"co.acme.SmsOTP\" Trigger $flow Starts a flow whose qualified name is determined at runtime","title":"Subflows"},{"location":"agama/language-reference/#input-parameters","text":"The values passed after the flow name in Trigger are supplied as input parameters in the order declared by the subflow's Inputs . When not enough values are passed, the unassigned inputs will hold a null value. Unless otherwise stated by the concrete engine implementation, list and map literals should not be passed as arguments to Trigger : Illegal: Trigger subflow { key: [ 1, 2 , 3] } [ \"Yeeha!\" ] Legal: Trigger subflow x car.model list[1] null false -3 \"Sam\"","title":"Input parameters"},{"location":"agama/language-reference/#template-overrides","text":"When re-using flows, existing templates may not match the required look-and-feel or layout of the flow that is being built, or may require minor adjustments to fit better the parent's needs. These can be overcome by declaring which templates the developer would like to override for a given subflow call. Example: outcome = Trigger jo.jo.PersonalInfoGathering Override templates \"path/basic.htm\" \"\" \"path2/dir/detail.htm\" \"tmp/mydetail.htm\" Log \"subflow returned with success?\" outcome.success In an indented block using the Override templates keyword, several string literals can be provided. They specify the paths of the (subflows) templates that will be overriden by the parent and the corresponding new paths. In the example above, templates path/basic.htm and path2/dir/detail.htm rendered by flow PersonalInfoGathering (or its subflows) won't be picked from these locations but from the base path of the current (parent) flow using names basic.htm and tmp/mydetail.htm respectively. Usage of empty string denotes reusing the same file name than the original file. Alternatively, every pair of original vs. overriden path can be specified in a single line for more clarity, like this: outcome = Trigger jo.jo.PersonalInfoGathering Override templates \"path/basic.htm\" \"\" \"path2/dir/detail.htm\" \"tmp/mydetail.htm\" ...","title":"Template overrides"},{"location":"agama/language-reference/#foreign-routines","text":"Business logic implemented in languages other than Agama can be re-used by means of the Call instruction. Call plays a key role because Agama code serves fundamentally as a depiction of a flow hiding most of the internal details and low-level computations which are in turn delegated to foreign routines. The syntax of this directive is very general and actual semantics are left to the concrete engine. Roughly, here is how a Call can be structured: ( var_expr? ('|' var_name)? = )? Call alnum(.alnum)* (#alnum)? arg* where: var_name is a variable name , e.g.: x , fooBar , x_0 var_expr is a variable expression, e.g.: x , x.a , x[1].b , etc. alnum is syntactically identical to var_name but does not necessarily refer to an existing variable in the code, for instance, it may describe a path to locate a routine in a library arg is a var_expr or any string , number , boolean , null literal So the below are all syntactically valid invocations: Call apple#pear Call apple#pear \"Hi\" x 16 Call apple.banana#pear \"Hi\" abc 16 foo = Call apple.banana#pear \"Hi\" abc 16 foo | error = Call apple.banana#pear \"Hi\" abc 16 | error = Call apple.banana#pear \"Hi\" abc 16 x[0].ahoy.ahoy foo = Call street fighters true false Again, the semantics are given by the specific engine. Consult your engine documentation for examples. Unless otherwise stated by the concrete engine implementation, list and map literals should not be passed as arguments to method calls directly. This means the following is illegal: Call co.Utils#routine { key: [ 1, 2 , 3] } [ \"Yeeha!\" ] .","title":"Foreign routines"},{"location":"agama/language-reference/#advanced-and-special-cases-in-variable-manipulation","text":"","title":"Advanced and special cases in variable manipulation"},{"location":"agama/language-reference/#indexing-in-lists","text":"Accessing/modifying list elements requires providing a numeric index between the brackets, e.g. x[ 0 ] . Note variables can also be used for indexing, like x[ y ] where y is a positive integer or zero. For the below table, assume x = [ \"one\", \"two\", \"three\" ] . x[1] //\"two\" y = 1 x[y] //\"two\" x[\"1\"] //illegal x[ z[0] ] //illegal: variable expressions not allowed for indexes x[obj.property] //illegal: variable expressions not allowed for indexes","title":"Indexing in lists"},{"location":"agama/language-reference/#maps-and-dot-notation","text":"The regular \u201cdot\u201d notation is limited in the sense it is fairly static: developers have to have prior knowledge about the keys' names, in other words, about the structure of maps and nested submaps, like in person.homeAddress.postalCode . Also, there might be cases where a key name does not fit the required pattern, like in person.street-address or persona.direcci\u00f3n ; even worse, there might be cases where the actual key is only known at runtime. There are ways to overcome this: Example Notes x.\"- wow!\" Access the value associated to the key named -wow! prop = ... x.$prop Access the value associated to the key whose name is contained in the variable prop (that holds a string value). Note actual value of prop may be originated from a Java call or another form of computation propA = ... propB = ... x.$propA.c.\"d\".$propB A mix of notations is valid. For example, if x= { a: { b: 0, c: { c: true, d: { e: null, f: \"hello\" } } } } , propA is equal to \"a\" , and propB to \"f\" , the expression on the left evaluates \"hello\" Usage of .$ requires to supply a variable after the dollar sign: grouped variable expressions are not supported. Thus, it is not possible to achieve something like x.a.c.($map.mykey).f in order to obtain \"hello\" if map = { mykey: \"d\" } .","title":"Maps and dot notation"},{"location":"agama/language-reference/#indexing-in-maps","text":"For convenience, when a key name \u201clooks like\u201d a positive integer (or zero), e.g. \"2\" , \"10\" , etc., numeric values can directly be used to get/set data in a map: x = { } x.\"1\" = \"golf\" x[1] //retrieves \"golf\" x[2] = \"polo\" //adds the key/value pair \"2\" / \"polo\"","title":"Indexing in maps"},{"location":"agama/language-reference/#language-keywords","text":"The following is a list of reserved words and as such, cannot be used as variable names or maps keys (in literal notation). Keyword Purpose/usage Basepath header declaration Call Java interaction Configs header declaration Finish termination Flow header declaration Inputs header declaration Iterate over loops Log logging Match conditionals Otherwise conditionals Override templates web interaction Quit conditionals and loops Repeat loops RFAC web interaction RRF web interaction seconds header declaration times max loops to conditionals Timeout header declaration Trigger subflow calls using loops When conditionals Operator and is is not or Special literals true false null","title":"Language keywords"},{"location":"agama-catalog/community/","tags":["administration","agama","projects","community"],"text":"Agama Community Projects # This folder contains Agama projects maintained by community developers.","title":"Agama Community Projects"},{"location":"agama-catalog/community/#agama-community-projects","text":"This folder contains Agama projects maintained by community developers.","title":"Agama Community Projects"},{"location":"agama-catalog/jans/","tags":["administration","agama","projects","core"],"text":"Agama Core Projects # This folder contains Agama projects maintained by the Jans core team.","title":"Agama Core Projects"},{"location":"agama-catalog/jans/#agama-core-projects","text":"This folder contains Agama projects maintained by the Jans core team.","title":"Agama Core Projects"},{"location":"agama-catalog/jans/inboundID/","text":"Inbound identity with Agama # Using Agama administrators can delegate authorization to external services like social sites. In a typical setting users are shown a login form with a \"Sign in with...\" button for authentication to take place at a given 3rd party in order to get access to a target application. This process is usually referred to as \"inbound identity\". In this document the steps required to setup inbound identity in your Janssen server are presented. Requisites # A Janssen server with config-api installed Starter knowledge of OAuth2 and the Java programming language Terminology # Provider: An external identity provider, often a social site. Every provider is associated with a unique identifier Provider preselection: A process that designates the provider to employ for authentication without the end-user making a explicit decision, i.e. without a \"Sign in with\" button. Here the provider may be inferred from contextual data elicited at earlier stages, for instance. Scope # There is a great amount of different mechanisms providers may employ to materialize the authentication process. The current offering in Agama is focused on OAuth2-compliant providers, more specifically those supporting the code authorization grant. This does not mean other grants or even different protocols such as SAML cannot be supported, however organizations would have to engage in extra development efforts in this case. If the providers of interest already support the code authorization grant, the amount of work is significantly reduced. Flows involved # Provider # For every provider to support there has to be an Agama flow that must: Redirect the browser to the provider's site for the user to enter his login credentials Return profile data of the given user To facilitate administrators' work, the following flows are already implemented: Apple Facebook Github Google Main flow # The actual process of inbound identity occurs here. This flow is already implemented and ready to use. The following is a summary of the steps involved: A provider selection page is displayed. The list includes all ( enabled ) providers defined in the configuration of this flow. Additionally an option to use an existing local account is displayed (i.e. no inbound identity) The flow associated to the selected provider is launched. Actually, if the main flow was passed a provider identifier as parameter, step 1 is skipped and the given flow is launched directly If the flow triggered at step 2 did not finish successfully, the main flow finishes likewise. Else, the profile data returned is transformed using the applicable attribute mapping for the provider. More on attribute mappings here If the resulting profile data lacks a value for e-mail, and the provider was configured to require it, a form is displayed where the user can enter his e-mail address User provisioning takes place, in other words, a local user entry is created in the Janssen server database. If an entry already exists, it is updated as long as the provider is configured to allow so The flow finishes successfully and the user gets access to the target application Note the above design does not involve communication protocols. It is responsability of the concrete provider flow how to implement this aspect. The main flow can remain unmodified regardless of any change in existing flows or when new ones are added. Feel free to modify this flow or create one based on it if customizations are required. Deployment # To start, ensure the Agama engine and bridge are enabled. More info here . Add agama-inbound jar # Let's add the required libraries to the authentication server: Visit this page, navigate to the folder matching your Janssen server version, and download the file suffixed with jar-with-dependencies.jar SSH to the server. Transfer the file to directory /opt/jans/jetty/jans-auth/custom/libs Navigate to /opt/jans/jetty/jans-auth/webapps and edit the file jans-auth.xml by adding <Set name=\"extraClasspath\">./custom/libs/*</Set> before the root tag closes Restart the server, e.g. systemctl restart jans-auth Make a gama archive # gama files are deployable units in the Agama engine. To create one, simply zip the contents of project subdirectory. The resulting archive must have three folders at top-level: web , lib , and code . The file extension does not matter in the end. To quickly collect the contents of project , you can download the whole Jans repository or make a shallow clone of main branch using git . Using git is probably a faster way. Deploy the archive # Transfer the archive to your server, and then run /opt/jans/jans-cli/jans_cli_tui.py . Follow the prompts and then enter the Agama menu ( Alt + m ). Using you keyboard TAB key, highlight the button \"Upload\", and press ENTER. Browse and select the file. Wait 30 seconds and press the d key. This will show the result of the deployment. Ensure no errors are reported. Configuration handling # Collect providers configurations # For every provider flow (see code/provider directory of the project folder) collect OAuth 2.0 configurations. Instructions to do this vary across different social sites. For the case of Facebook, for instance, this is approximately what needs to be done: Login to Facebook and register as developer Create an application with Facebook login capabilities In the Facebook login settings add https://<your-host>/jans-auth/fl/callback as a valid OAuth redirect URI Finally grab the app Id and secret from the app settings page For Apple, some guidelines are included at the end of this document. Supply providers flows configurations # Still in TUI, press the c key and then choose to export the sample configurations locally. Inspect the generated file. It provides \"dummy\" placeholders to supply the actual configurations. Providers flows adhere to the following structure: Name Description authzEndpoint The authorization endpoint as in section 3.1 of RFC 7649 tokenEndpoint The token endpoint as in section 3.2 of RFC 7649 userInfoEndpoint The endpoint where profile data can be retrieved. This is not part of the OAuth2 specification clientId The identifier of the client to use, see section 1.1 and 2.2 of RFC 7649 . This client is assumed to be confidential as in section 2.1 clientSecret Secret associated to the client scopes A JSON array of strings that represent the scopes of the access tokens to retrieve redirectUri Redirect URI as in section 3.1.2 of RFC 7649 clientCredsInRequestBody true indicates the client authenticates at the token endpoint by including the credentials in the body of the request, otherwise, HTTP Basic authentication is assumed. See section 2.3.1 of RFC 7649 custParamsAuthReq A JSON object (keys and values expected to be strings) with extra parameters to pass to the authorization endpoint if desired custParamsTokenReq A JSON object (keys and values expected to be strings) with extra parameters to pass to the token endpoint if desired Edit the file with the properties you consider relevant for every provider. Generally, the first six are the only needed. Supply the main flow configurations # The main flow ( io.jans.inbound.ExternalSiteLogin ) has to be parameterized as well. The configuration is held in a JSON object whose keys are the identifiers of the existing identity providers. The associated value for a key is a JSON object itself and follows the structure represented by this Java class. This is an example of a configuration for a couple of identity providers: { \"github\": { \"flowQname\": \"io.jans.inbound.Github\", \"displayName\": \"Github\", \"mappingClassField\": \"io.jans.inbound.Mappings.GITHUB\", }, \"google\": { \"flowQname\": \"io.jans.inbound.Google\", \"displayName\": \"Google\", \"mappingClassField\": \"io.jans.inbound.Mappings.GOOGLE\", \"enabled\": false, \"skipProfileUpdate\": true } } The table below explains the meaning of properties: Name Description Mandatory flowQname The qualified name of the Agama flow associated to this provider Yes displayName Short name of the provider (will be shown in the selector page) Yes mappingClassField The qualified name of the attribute mapping for this provider Yes logoImg Relative path to the logo image (will be shown in the selector page) No enabled A boolean value indicating whether this provider can be shown (and triggered) from the main flow or not. Default value is true No skipProfileUpdate Determines if profile data should not be updated for a user if an entry already exists locally for him. Default value is false No cumulativeUpdate When true , existing value(s) of an attribute are preserved when the incoming profile data already contains value(s) for such attribute, otherwise its values are replaced by the incoming ones entirely. Default value is false No requestForEmail Whether to prompt the user to enter his e-mail if the data supplied by the identity provider does not contain one. Default value is false No emailLinkingSafe Determines if an existing account with the same e-mail of the user about to be provisioned can be treated as the same person No Notes: logoImg path is relative to the base path of the main flow, i.e. inboundID Set emailLinkingSafe to true only if you trust the provider, i.e. the incoming e-mail data is securely verified. For security, never set it to true when requestForEmail is also true Attribute mappings # This is the process through which the raw user profile data received by an identity provider is transformed into an object suitable for being stored in the Janssen's user database. Here, developers have the opportunity to \"map\" or \"transform\" the incoming data to one compatible with the data types, formats, and names required by the database. As an example suppose a provider returned the following: { \"id\": dfsg2-3bui2.2.5+ld1, \"email\": \"moe@doedoe.co\", \"last_name\": \"Doe\", \"first_name\": \"Moe\" } None of this attributes exist in Janssen; database adheres to LDAP naming. Conformant names would be uid , mail , sn , and givenName . Also, let's assume you want to set displayName to a string composed by the first and last names separated by a white space. Writing a mapping is required. A mapping is implemented in Java in the form of a java.util.function.UnaryOperator<Map<String, Object>> , that is, a function that takes a Map<String, Object> as input and returns a Map<String, Object> as result. Several examples are provided here . Note property mappingClassField of every provider defined in the main flow points to the fully qualified name of a mapping. Not all mappings have to belong to the same class. Import configurations # Once the JSON file you have been editing is ready, hit c key again in TUI. This time choose to import the configuration and select the file. Test # Launch the main flow (learn about this topic here ). If everything was setup correctly, a screen with a \"Sign in using\" heading will be shown and next to it links to the providers sites. When clicking on a link, the browser will be taken to the given website for authentication. A prompt for consent of release of personal information may appear as well. Finally, the browser is returned back to your server and then to the target application as described earlier . How to add another provider? # In practice most identity providers adhere to the OAuth2 code grant and require configurations similar to the flows already bundled here like Facebook or Google. In this case, follow these steps: In your local machine, create a new project with the required layout: directories web , code and lib Add a .flow file in code . Probably you can reuse the Facebook flow as is; rename it as needed If an existing attribute mapping cannot be reused, implement one for this provider and put the class in lib directory Place the logo inside web Create the archive and deploy it in the server using TUI Set the configuration properties for this new project In the bigger project (the one containing the main flow), include the new provider, for instance: \"new-provider-ID\": { \"flowQname\": \"flow filename omitting the .flow extension)\", \"displayName\": \"...\", \"mappingClassField\": \"Qualified name of the attribute mapping\", \"logoImg\": \"path to the logo image relative to the base path of the main flow (you can use things like ../)\" } Writing your own mapping # Ensure you went through this already. Some important considerations: A mapping has to be declared as a public field in a public class Several providers can use the same mapping While working on a mapping, having to pack the class in a jar file, uploading it to the server, and then restarting every time a modification is made can be a big burden. To avoid this you can place the source (java) file in the lib directory of your project and leverage hot reloading. Ensure to create the usual directory hierarchy in lib corresponding to your class package. A \"template\" for quickly start writing a mapping is already available . Save with .java extension and edit the body of the lambda expression. Also you have to update the main flow as follows: Add an instruction like Call io.jans.inbound.CustomMappings#class at the beginning of the provider flow body ( .flow file) for the class to be effectively reloaded when the file is modified Set mappingClassField to io.jans.inbound.CustomMappings.SAMPLE_MAPPING for the provider of interest. You may like the idea of using a different name for the field - update the java file accordingly From there onwards, you only need to re-upload the file as many times as needed. If you use DEBUG level in your server, you will see in the log the result of the mapping every time it is applied. Check for a message like \"Mapped profile is\". Appendix: integrating \"Sign In With Apple\" # Integrating this provider requires a good amount of work. In the following we provide a summary. Ensure you have an Apple developer account to start. This tutorial does a great job at explaining the necessary steps. As you go with it, please collect the following elements: A service ID A team ID A key ID and a key file You will be prompted to provide a domain name and a return URL. Provide <your-jans-host> and https://<your-jans-host>/jans-auth/fl/callback respectively, ensuring the changes are effectively saved in the developer's portal. The configuration for this provider would look like: { \"authzEndpoint\": \"https://appleid.apple.com/auth/authorize\", \"tokenEndpoint\": \"https://appleid.apple.com/auth/token\", \"clientId\": \"<SERVICE ID>\", \"key\": \"<ONE-LINER CONTENTS OF KEY FILE>\", \"keyId\": \"<KEY ID>\", \"teamId\": \"<TEAM ID>\", \"scopes\": [\"email\", \"name\"], \"custParamsAuthReq\": { \"response_mode\": \"form_post\" }, \"clientCredsInRequestBody\": true } For the key , remove the lines regarding begin/end of the private key entirely. Also remove any line breaks: a one-liner is required. For the main flow configuration, this should suffice: \"apple\": { \"flowQname\": \"io.jans.inbound.Apple\", \"displayName\": \"Apple\", \"mappingClassField\": \"io.jans.inbound.Mappings.APPLE\", \"logoImg\": \"apple.png\" } Expected journey # The accompanying images illustrate the steps end-users will go through when using the inbound identity flow taking the Apple route: Initial provider selector page Prompt for credentials at Apple website Prompt for a second factor, e.g. SMS (optional) Prompt for browser trust Prompt before returning to original site Finally, the user should land at the target application.","title":"Inbound identity with Agama"},{"location":"agama-catalog/jans/inboundID/#inbound-identity-with-agama","text":"Using Agama administrators can delegate authorization to external services like social sites. In a typical setting users are shown a login form with a \"Sign in with...\" button for authentication to take place at a given 3rd party in order to get access to a target application. This process is usually referred to as \"inbound identity\". In this document the steps required to setup inbound identity in your Janssen server are presented.","title":"Inbound identity with Agama"},{"location":"agama-catalog/jans/inboundID/#requisites","text":"A Janssen server with config-api installed Starter knowledge of OAuth2 and the Java programming language","title":"Requisites"},{"location":"agama-catalog/jans/inboundID/#terminology","text":"Provider: An external identity provider, often a social site. Every provider is associated with a unique identifier Provider preselection: A process that designates the provider to employ for authentication without the end-user making a explicit decision, i.e. without a \"Sign in with\" button. Here the provider may be inferred from contextual data elicited at earlier stages, for instance.","title":"Terminology"},{"location":"agama-catalog/jans/inboundID/#scope","text":"There is a great amount of different mechanisms providers may employ to materialize the authentication process. The current offering in Agama is focused on OAuth2-compliant providers, more specifically those supporting the code authorization grant. This does not mean other grants or even different protocols such as SAML cannot be supported, however organizations would have to engage in extra development efforts in this case. If the providers of interest already support the code authorization grant, the amount of work is significantly reduced.","title":"Scope"},{"location":"agama-catalog/jans/inboundID/#flows-involved","text":"","title":"Flows involved"},{"location":"agama-catalog/jans/inboundID/#provider","text":"For every provider to support there has to be an Agama flow that must: Redirect the browser to the provider's site for the user to enter his login credentials Return profile data of the given user To facilitate administrators' work, the following flows are already implemented: Apple Facebook Github Google","title":"Provider"},{"location":"agama-catalog/jans/inboundID/#main-flow","text":"The actual process of inbound identity occurs here. This flow is already implemented and ready to use. The following is a summary of the steps involved: A provider selection page is displayed. The list includes all ( enabled ) providers defined in the configuration of this flow. Additionally an option to use an existing local account is displayed (i.e. no inbound identity) The flow associated to the selected provider is launched. Actually, if the main flow was passed a provider identifier as parameter, step 1 is skipped and the given flow is launched directly If the flow triggered at step 2 did not finish successfully, the main flow finishes likewise. Else, the profile data returned is transformed using the applicable attribute mapping for the provider. More on attribute mappings here If the resulting profile data lacks a value for e-mail, and the provider was configured to require it, a form is displayed where the user can enter his e-mail address User provisioning takes place, in other words, a local user entry is created in the Janssen server database. If an entry already exists, it is updated as long as the provider is configured to allow so The flow finishes successfully and the user gets access to the target application Note the above design does not involve communication protocols. It is responsability of the concrete provider flow how to implement this aspect. The main flow can remain unmodified regardless of any change in existing flows or when new ones are added. Feel free to modify this flow or create one based on it if customizations are required.","title":"Main flow"},{"location":"agama-catalog/jans/inboundID/#deployment","text":"To start, ensure the Agama engine and bridge are enabled. More info here .","title":"Deployment"},{"location":"agama-catalog/jans/inboundID/#add-agama-inbound-jar","text":"Let's add the required libraries to the authentication server: Visit this page, navigate to the folder matching your Janssen server version, and download the file suffixed with jar-with-dependencies.jar SSH to the server. Transfer the file to directory /opt/jans/jetty/jans-auth/custom/libs Navigate to /opt/jans/jetty/jans-auth/webapps and edit the file jans-auth.xml by adding <Set name=\"extraClasspath\">./custom/libs/*</Set> before the root tag closes Restart the server, e.g. systemctl restart jans-auth","title":"Add agama-inbound jar"},{"location":"agama-catalog/jans/inboundID/#make-a-gama-archive","text":"gama files are deployable units in the Agama engine. To create one, simply zip the contents of project subdirectory. The resulting archive must have three folders at top-level: web , lib , and code . The file extension does not matter in the end. To quickly collect the contents of project , you can download the whole Jans repository or make a shallow clone of main branch using git . Using git is probably a faster way.","title":"Make a gama archive"},{"location":"agama-catalog/jans/inboundID/#deploy-the-archive","text":"Transfer the archive to your server, and then run /opt/jans/jans-cli/jans_cli_tui.py . Follow the prompts and then enter the Agama menu ( Alt + m ). Using you keyboard TAB key, highlight the button \"Upload\", and press ENTER. Browse and select the file. Wait 30 seconds and press the d key. This will show the result of the deployment. Ensure no errors are reported.","title":"Deploy the archive"},{"location":"agama-catalog/jans/inboundID/#configuration-handling","text":"","title":"Configuration handling"},{"location":"agama-catalog/jans/inboundID/#collect-providers-configurations","text":"For every provider flow (see code/provider directory of the project folder) collect OAuth 2.0 configurations. Instructions to do this vary across different social sites. For the case of Facebook, for instance, this is approximately what needs to be done: Login to Facebook and register as developer Create an application with Facebook login capabilities In the Facebook login settings add https://<your-host>/jans-auth/fl/callback as a valid OAuth redirect URI Finally grab the app Id and secret from the app settings page For Apple, some guidelines are included at the end of this document.","title":"Collect providers configurations"},{"location":"agama-catalog/jans/inboundID/#supply-providers-flows-configurations","text":"Still in TUI, press the c key and then choose to export the sample configurations locally. Inspect the generated file. It provides \"dummy\" placeholders to supply the actual configurations. Providers flows adhere to the following structure: Name Description authzEndpoint The authorization endpoint as in section 3.1 of RFC 7649 tokenEndpoint The token endpoint as in section 3.2 of RFC 7649 userInfoEndpoint The endpoint where profile data can be retrieved. This is not part of the OAuth2 specification clientId The identifier of the client to use, see section 1.1 and 2.2 of RFC 7649 . This client is assumed to be confidential as in section 2.1 clientSecret Secret associated to the client scopes A JSON array of strings that represent the scopes of the access tokens to retrieve redirectUri Redirect URI as in section 3.1.2 of RFC 7649 clientCredsInRequestBody true indicates the client authenticates at the token endpoint by including the credentials in the body of the request, otherwise, HTTP Basic authentication is assumed. See section 2.3.1 of RFC 7649 custParamsAuthReq A JSON object (keys and values expected to be strings) with extra parameters to pass to the authorization endpoint if desired custParamsTokenReq A JSON object (keys and values expected to be strings) with extra parameters to pass to the token endpoint if desired Edit the file with the properties you consider relevant for every provider. Generally, the first six are the only needed.","title":"Supply providers flows configurations"},{"location":"agama-catalog/jans/inboundID/#supply-the-main-flow-configurations","text":"The main flow ( io.jans.inbound.ExternalSiteLogin ) has to be parameterized as well. The configuration is held in a JSON object whose keys are the identifiers of the existing identity providers. The associated value for a key is a JSON object itself and follows the structure represented by this Java class. This is an example of a configuration for a couple of identity providers: { \"github\": { \"flowQname\": \"io.jans.inbound.Github\", \"displayName\": \"Github\", \"mappingClassField\": \"io.jans.inbound.Mappings.GITHUB\", }, \"google\": { \"flowQname\": \"io.jans.inbound.Google\", \"displayName\": \"Google\", \"mappingClassField\": \"io.jans.inbound.Mappings.GOOGLE\", \"enabled\": false, \"skipProfileUpdate\": true } } The table below explains the meaning of properties: Name Description Mandatory flowQname The qualified name of the Agama flow associated to this provider Yes displayName Short name of the provider (will be shown in the selector page) Yes mappingClassField The qualified name of the attribute mapping for this provider Yes logoImg Relative path to the logo image (will be shown in the selector page) No enabled A boolean value indicating whether this provider can be shown (and triggered) from the main flow or not. Default value is true No skipProfileUpdate Determines if profile data should not be updated for a user if an entry already exists locally for him. Default value is false No cumulativeUpdate When true , existing value(s) of an attribute are preserved when the incoming profile data already contains value(s) for such attribute, otherwise its values are replaced by the incoming ones entirely. Default value is false No requestForEmail Whether to prompt the user to enter his e-mail if the data supplied by the identity provider does not contain one. Default value is false No emailLinkingSafe Determines if an existing account with the same e-mail of the user about to be provisioned can be treated as the same person No Notes: logoImg path is relative to the base path of the main flow, i.e. inboundID Set emailLinkingSafe to true only if you trust the provider, i.e. the incoming e-mail data is securely verified. For security, never set it to true when requestForEmail is also true","title":"Supply the main flow configurations"},{"location":"agama-catalog/jans/inboundID/#attribute-mappings","text":"This is the process through which the raw user profile data received by an identity provider is transformed into an object suitable for being stored in the Janssen's user database. Here, developers have the opportunity to \"map\" or \"transform\" the incoming data to one compatible with the data types, formats, and names required by the database. As an example suppose a provider returned the following: { \"id\": dfsg2-3bui2.2.5+ld1, \"email\": \"moe@doedoe.co\", \"last_name\": \"Doe\", \"first_name\": \"Moe\" } None of this attributes exist in Janssen; database adheres to LDAP naming. Conformant names would be uid , mail , sn , and givenName . Also, let's assume you want to set displayName to a string composed by the first and last names separated by a white space. Writing a mapping is required. A mapping is implemented in Java in the form of a java.util.function.UnaryOperator<Map<String, Object>> , that is, a function that takes a Map<String, Object> as input and returns a Map<String, Object> as result. Several examples are provided here . Note property mappingClassField of every provider defined in the main flow points to the fully qualified name of a mapping. Not all mappings have to belong to the same class.","title":"Attribute mappings"},{"location":"agama-catalog/jans/inboundID/#import-configurations","text":"Once the JSON file you have been editing is ready, hit c key again in TUI. This time choose to import the configuration and select the file.","title":"Import configurations"},{"location":"agama-catalog/jans/inboundID/#test","text":"Launch the main flow (learn about this topic here ). If everything was setup correctly, a screen with a \"Sign in using\" heading will be shown and next to it links to the providers sites. When clicking on a link, the browser will be taken to the given website for authentication. A prompt for consent of release of personal information may appear as well. Finally, the browser is returned back to your server and then to the target application as described earlier .","title":"Test"},{"location":"agama-catalog/jans/inboundID/#how-to-add-another-provider","text":"In practice most identity providers adhere to the OAuth2 code grant and require configurations similar to the flows already bundled here like Facebook or Google. In this case, follow these steps: In your local machine, create a new project with the required layout: directories web , code and lib Add a .flow file in code . Probably you can reuse the Facebook flow as is; rename it as needed If an existing attribute mapping cannot be reused, implement one for this provider and put the class in lib directory Place the logo inside web Create the archive and deploy it in the server using TUI Set the configuration properties for this new project In the bigger project (the one containing the main flow), include the new provider, for instance: \"new-provider-ID\": { \"flowQname\": \"flow filename omitting the .flow extension)\", \"displayName\": \"...\", \"mappingClassField\": \"Qualified name of the attribute mapping\", \"logoImg\": \"path to the logo image relative to the base path of the main flow (you can use things like ../)\" }","title":"How to add another provider?"},{"location":"agama-catalog/jans/inboundID/#writing-your-own-mapping","text":"Ensure you went through this already. Some important considerations: A mapping has to be declared as a public field in a public class Several providers can use the same mapping While working on a mapping, having to pack the class in a jar file, uploading it to the server, and then restarting every time a modification is made can be a big burden. To avoid this you can place the source (java) file in the lib directory of your project and leverage hot reloading. Ensure to create the usual directory hierarchy in lib corresponding to your class package. A \"template\" for quickly start writing a mapping is already available . Save with .java extension and edit the body of the lambda expression. Also you have to update the main flow as follows: Add an instruction like Call io.jans.inbound.CustomMappings#class at the beginning of the provider flow body ( .flow file) for the class to be effectively reloaded when the file is modified Set mappingClassField to io.jans.inbound.CustomMappings.SAMPLE_MAPPING for the provider of interest. You may like the idea of using a different name for the field - update the java file accordingly From there onwards, you only need to re-upload the file as many times as needed. If you use DEBUG level in your server, you will see in the log the result of the mapping every time it is applied. Check for a message like \"Mapped profile is\".","title":"Writing your own mapping"},{"location":"agama-catalog/jans/inboundID/#appendix-integrating-sign-in-with-apple","text":"Integrating this provider requires a good amount of work. In the following we provide a summary. Ensure you have an Apple developer account to start. This tutorial does a great job at explaining the necessary steps. As you go with it, please collect the following elements: A service ID A team ID A key ID and a key file You will be prompted to provide a domain name and a return URL. Provide <your-jans-host> and https://<your-jans-host>/jans-auth/fl/callback respectively, ensuring the changes are effectively saved in the developer's portal. The configuration for this provider would look like: { \"authzEndpoint\": \"https://appleid.apple.com/auth/authorize\", \"tokenEndpoint\": \"https://appleid.apple.com/auth/token\", \"clientId\": \"<SERVICE ID>\", \"key\": \"<ONE-LINER CONTENTS OF KEY FILE>\", \"keyId\": \"<KEY ID>\", \"teamId\": \"<TEAM ID>\", \"scopes\": [\"email\", \"name\"], \"custParamsAuthReq\": { \"response_mode\": \"form_post\" }, \"clientCredsInRequestBody\": true } For the key , remove the lines regarding begin/end of the private key entirely. Also remove any line breaks: a one-liner is required. For the main flow configuration, this should suffice: \"apple\": { \"flowQname\": \"io.jans.inbound.Apple\", \"displayName\": \"Apple\", \"mappingClassField\": \"io.jans.inbound.Mappings.APPLE\", \"logoImg\": \"apple.png\" }","title":"Appendix: integrating \"Sign In With Apple\""},{"location":"agama-catalog/jans/inboundID/#expected-journey","text":"The accompanying images illustrate the steps end-users will go through when using the inbound identity flow taking the Apple route: Initial provider selector page Prompt for credentials at Apple website Prompt for a second factor, e.g. SMS (optional) Prompt for browser trust Prompt before returning to original site Finally, the user should land at the target application.","title":"Expected journey"},{"location":"agama-catalog/vendor/","tags":["administration","agama","projects","vendor"],"text":"Agama Vendor Projects # This folder contains Agama projects maintained by third party vendors.","title":"Agama Vendor Projects"},{"location":"agama-catalog/vendor/#agama-vendor-projects","text":"This folder contains Agama projects maintained by third party vendors.","title":"Agama Vendor Projects"},{"location":"assets/","text":"Use the assets directory to store digital assets like images and diagrams that are used to support documentation for all modules. Directory Structure # logo : This directory holds logo files used for official documentation and publications. Do not change these files without consulting the CODEOWNER. Guidelines # Name the file using 4 to 5 keywords (separated by dash - ) which describes content of the file i.e diagram-user-registration-sequence.pdf Max file size 1MB each images format preferably .png diagrams format preferably .svg Preferred diagramming tool: draw.io . Upload .drawio file along with diagram pdf file with same name. This allows future updates to the diagram to keep it updated","title":"Index"},{"location":"assets/#directory-structure","text":"logo : This directory holds logo files used for official documentation and publications. Do not change these files without consulting the CODEOWNER.","title":"Directory Structure"},{"location":"assets/#guidelines","text":"Name the file using 4 to 5 keywords (separated by dash - ) which describes content of the file i.e diagram-user-registration-sequence.pdf Max file size 1MB each images format preferably .png diagrams format preferably .svg Preferred diagramming tool: draw.io . Upload .drawio file along with diagram pdf file with same name. This allows future updates to the diagram to keep it updated","title":"Guidelines"},{"location":"contribute/","text":"Overview # Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"contribute/#overview","text":"Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"contribute/developer-faq/","tags":["developer","faq"],"text":"Developer FAQs # How to enable debug logs for jans-cli and TUI configuration tools # By default, logging is not enabled for CLI or TUI tools on Janssen Server. Follow the steps below to enable and configure logging for CLI and TUI tools: Log in as root user open config file for editing ~/.config/jans-cli.ini Update value for debug to true and add new entry for log_dir key with value pointing to directory where logs need to be generated. e.g debug = true log_dir = /opt/jans Close currently open TUI session if any and open a new one Logs should get available at location configured in log_dir in files cli_debug.log and dev-tui.log How to install Janssen Server OpenBanking for testing? # Note Use this installation for testing only Good understanding of Janssen Server installation process in general is a prerequisite. Here we are just highlighting steps without a lot of details. Visit installation documentation for complete understanding. This installation uses Gluu Testing certificate. Download Installer # wget https://raw.githubusercontent.com/JanssenProject/jans/v1.0.17.nightly/jans-linux-setup/jans_setup/install.py -O install.py Execute Installer # python3 install.py --profile=openbanking --args=\"-ob-key-fn=/opt/jans/jans-setup/openbanking/static/ob-gluu-test.key -static-kid=ob-gluu-test -jwks-uri=https://ox.gluu.org/icrby8xcvbcv/ob/ob-gluu-test.jwks --disable-ob-auth-script -ob-alias=ob-gluu-test\" Please enter defaults for the following questions (press just enter key), it will download certificate from jwksUri Use external key? [Y|n] : y Openbanking Key File [/opt/jans/jans-setup/openbanking/static/ob-gluu-test.key] : Openbanking Certificate File [/root/obsigning.pem] : Openbanking Key Alias [ob-gluu-test] : Configure Certificate # /opt/jans/jans-cli/config-cli.py -CC /opt/jans/jans-setup/output/CA/client.crt -CK /opt/jans/jans-setup/output/CA/client.key Test # This test uses Gluu Testing certificate. device authentication # After installation we have to complete device authentication to use openbanking. Testing using IM mode # launch jans-cli using below command /opt/jans/jans-cli/config-cli.py -CC /opt/jans/jans-setup/output/CA/client.crt -CK /opt/jans/jans-setup/output/CA/client.key further testing is same as jans server Testing using command line mode # we can run below command at command line. for ex: /opt/jans/jans-cli/config-cli.py -CC /opt/jans/jans-setup/output/CA/client.crt -CK /opt/jans/jans-setup/output/CA/client.key \u2013operation-id get-oauth-openid-clients same way we can run other commands. rest is same for jans and openbanking","title":"Developer FAQ"},{"location":"contribute/developer-faq/#developer-faqs","text":"","title":"Developer FAQs"},{"location":"contribute/developer-faq/#how-to-enable-debug-logs-for-jans-cli-and-tui-configuration-tools","text":"By default, logging is not enabled for CLI or TUI tools on Janssen Server. Follow the steps below to enable and configure logging for CLI and TUI tools: Log in as root user open config file for editing ~/.config/jans-cli.ini Update value for debug to true and add new entry for log_dir key with value pointing to directory where logs need to be generated. e.g debug = true log_dir = /opt/jans Close currently open TUI session if any and open a new one Logs should get available at location configured in log_dir in files cli_debug.log and dev-tui.log","title":"How to enable debug logs for jans-cli and TUI configuration tools"},{"location":"contribute/developer-faq/#how-to-install-janssen-server-openbanking-for-testing","text":"Note Use this installation for testing only Good understanding of Janssen Server installation process in general is a prerequisite. Here we are just highlighting steps without a lot of details. Visit installation documentation for complete understanding. This installation uses Gluu Testing certificate.","title":"How to install Janssen Server OpenBanking for testing?"},{"location":"contribute/developer-faq/#download-installer","text":"wget https://raw.githubusercontent.com/JanssenProject/jans/v1.0.17.nightly/jans-linux-setup/jans_setup/install.py -O install.py","title":"Download Installer"},{"location":"contribute/developer-faq/#execute-installer","text":"python3 install.py --profile=openbanking --args=\"-ob-key-fn=/opt/jans/jans-setup/openbanking/static/ob-gluu-test.key -static-kid=ob-gluu-test -jwks-uri=https://ox.gluu.org/icrby8xcvbcv/ob/ob-gluu-test.jwks --disable-ob-auth-script -ob-alias=ob-gluu-test\" Please enter defaults for the following questions (press just enter key), it will download certificate from jwksUri Use external key? [Y|n] : y Openbanking Key File [/opt/jans/jans-setup/openbanking/static/ob-gluu-test.key] : Openbanking Certificate File [/root/obsigning.pem] : Openbanking Key Alias [ob-gluu-test] :","title":"Execute Installer"},{"location":"contribute/developer-faq/#configure-certificate","text":"/opt/jans/jans-cli/config-cli.py -CC /opt/jans/jans-setup/output/CA/client.crt -CK /opt/jans/jans-setup/output/CA/client.key","title":"Configure Certificate"},{"location":"contribute/developer-faq/#test","text":"This test uses Gluu Testing certificate.","title":"Test"},{"location":"contribute/developer-faq/#device-authentication","text":"After installation we have to complete device authentication to use openbanking.","title":"device authentication"},{"location":"contribute/developer-faq/#testing-using-im-mode","text":"launch jans-cli using below command /opt/jans/jans-cli/config-cli.py -CC /opt/jans/jans-setup/output/CA/client.crt -CK /opt/jans/jans-setup/output/CA/client.key further testing is same as jans server","title":"Testing using IM mode"},{"location":"contribute/developer-faq/#testing-using-command-line-mode","text":"we can run below command at command line. for ex: /opt/jans/jans-cli/config-cli.py -CC /opt/jans/jans-setup/output/CA/client.crt -CK /opt/jans/jans-setup/output/CA/client.key \u2013operation-id get-oauth-openid-clients same way we can run other commands. rest is same for jans and openbanking","title":"Testing using command line mode"},{"location":"contribute/development/","text":"Developing for Janssen Project # Remote Debugging # Janssen Server modules run as Java processes. Hence, like any other Java process the JVM running the module can be configured to open a debug port where a remote debugger can be attached. The steps below will show how to configure auth-server module for remote debugging. Pass the command-line options to the JVM On the Janssen Server host, open the service config file /etc/default/jans-auth and add the following JVM parameters to as JAVA_OPTIONS -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=6001 This will open the port 6001 for the remote debugger. Any other port can also be used based on availability. Restart jans-auth services systemctl restart jans-auth.service Check if the port is open and accessible from within the Janssen Server host Use the jdb tool from JDK to test if the JVM port has been opened ./<path-to-JDK>/bin/jdb -attach 6001 if the port is open, it'll give you output like the below: Set uncaught java.lang.Throwable Set deferred uncaught java.lang.Throwable Initializing jdb ... > press ctrl+c to come out of it. Ensure that the port is accessible from outside the host VM as well and firewalls are configured accordingly Connect to the remote port on the Janssen Server host from the developer workstation. Use any IDE (Intellij, Eclipse, etc.) to create and run a remote debugging profile. Provide IP and debug port of the Janssen Server host. For IntelliJIdea, create a debug configuration as below: Run Integration Tests with a Janssen Server VM # In this guide, we will look at steps to run the Janssen integration test suite against an installed Janssen Server. Component Setup # Instructions in this guide can be used if Janssen Server is installed on a VM. Developers can use a virtualization software (like VMWare) or use LxD containers to create VM on developer workstation or use a remote cloud VM. OS platform for Developer Workstation Steps in this guide are applicable to any OS platform a Developer workstation may have. Example commands given in this guide are for Ubuntu Linux based workstation. Install Janssen Server # Install the Janssen server using one of the methods described in the VM installation guide. Note the points below when following installation instructions. Make a note of the host name that you assign to the Janssen server during the installation. For this guide, the Janssen hostname would be janssen.op.io Choose to install with test data load. This can be achieved by using the -t switch when invoking the setup script from installation instructions. Use the VM installation guide for the complete set of instructions. Once the installation is complete, check if the .well-known end-points of the Janssen server from the browser. A successful response will ascertain that the The Janssen server running inside the local VM is healthy and also accessible from the developer's machine. Note Based on developer setup it may be necessary to add appropriate IP-HOST mapping to the developer workstation. For instance, on a Linux-based developer workstation, this means adding a mapping to /etc/hosts file. Make sure that VM's IP is mapped to a FQDN like janssen.op.io . Refering to VM with localhost or just IP will not work. URI for OpenID configuration .well-known endpoint: https://janssen.op.io/jans-auth/.well-known/openid-configuration The response received should be JSON formatted Janssen configuration details, similar to those below. { \"request_parameter_supported\" : true, \"pushed_authorization_request_endpoint\" : \"https://janssen.op.io/jans-auth/restv1/par\", \"introspection_endpoint\" : \"https://janssen.op.io/jans-auth/restv1/introspection\", \"claims_parameter_supported\" : false, \"issuer\" : \"https://janssen.op.io\", \"userinfo_encryption_enc_values_supported\" : [ \"RSA1_5\", \"RSA-OAEP\", \"A128KW\", \"A256KW\" ], \"id_token_encryption_enc_values_supported\" : [ \"A128CBC+HS256\", \"A256CBC+HS512\", \"A128GCM\", \"A256GCM\" ], \"authorization_endpoint\" : \"https://janssen.op.io/jans-auth/restv1/authorize\", \"service_documentation\" : \"http://jans.org/docs\", \"authorization_encryption_alg_values_supported\" : [ \"RSA1_5\", \"RSA-OAEP\", \"A128KW\", \"A256KW\" ], \"id_generation_endpoint\" : \"https://janssen.op.io/jans-auth/restv1/id\", \"claims_supported\" : [ \"street_address\", \"country\", \"zoneinfo\", \"birthdate\", \"role\", \"gender\", \"user_name\", \"formatted\", \"phone_mobile_number\", \"preferred_username\", \"inum\", \"locale\", \"updated_at\", \"post_office_box\", \"nickname\", \"preferred_language\", \"email\", \"website\", \"email_verified\", \"profile\", \"locality\", \"room_number\", \"phone_number_verified\", \"given_name\", \"middle_name\", \"picture\", \"name\", \"phone_number\", \"postal_code\", \"region\", \"family_name\", \"jansAdminUIRole\" ], \"scope_to_claims_mapping\" : [ { \"user_name\" : [ \"user_name\" ] }, { \"https://jans.io/scim/users.write\" : [ ] }, { \"https://jans.io/scim/groups.read\" : [ ] }, { \"https://jans.io/scim/all-resources.search\" : [ ] }, { \"https://jans.io/scim/fido.write\" : [ ] }, { \"https://jans.io/scim/groups.write\" : [ ] }, { \"https://jans.io/scim/fido2.read\" : [ ] }, { \"https://jans.io/scim/fido.read\" : [ ] }, { \"https://jans.io/scim/fido2.write\" : [ ] Setup The Certificates # To run the tests against the installed Janssen Server, the workstation JRE needs to have the appropriate certificate installed. Update cacerts using the steps below: extract certificate for Janssen server with name janssen.op.io On Developer Workstation openssl s_client -connect test.local.jans.io:443 2 > & 1 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' > /tmp/httpd.crt this command takes a few seconds to return. Update cacerts of your JRE which is being used by the code workspace. For example, /usr/lib/jvm/java-11-amazon-corretto . When running the command below, it will prompt for cert store password. Provide the correct password. The default password is changeit . keytool -import -alias janssen.op.io -keystore /usr/lib/jvm/java-11-amazon-corretto/lib/security/cacerts -file /tmp/httpd.crt Configure developer workspace # Now that we have Janssen Server running in a VM and it is accessible from the developer workstation as well, we will create and configure the code base on the developer workspace to run integration tests. Get Janssen server code from Janssen GitHub repository . Note the path to this location, we will refer to it as source-base . Janssen Server is composed of multiple modules. For example source-base/jans-auth-server , source-base/jans-link etc. Each module has its own set of tests. Below are the instructions for configuring each module for tests. What is a Profile directory? To run integration tests, the developer workspace needs to know details about he Janssen Server agaist which the tests are to be run. Janssen Server workspace holds this information in source-base/module/sub-module/profiles directory. The profiles directory can contain one or more sub-directories, each representing a profile(i.e a target Janssen Server). These profile directories are used to hold files that contain important information required to run tests. Developers can create one or more profiles and use them to run tests against different Janssen Servers. This guide uses Janssen Server hostname, janssen.op.io , as profile name. Configuring the jans-auth-server module # Configuring jans-auth-server module involves setting up profiles for client , server and agama sub-modules. Follow the steps below to configure the profile for the client and server sub-modules. Move to the module directory cd source-base/jans-auth-server As a precautionary measure, let's first remove any old profile artifacts from the jans-auth-server workspace. rm -rf ./jans-auth rm -rf ./client/profiles/janssen.op.io rm -rf ./server/profiles/janssen.op.io rm -rf ./agama/engine/profiles/janssen.op.io Since Janssen Server has been installed with test data, the installer also created the profile files required to run the test. These files are kept on the VM under /opt/jans/jans-setup/output/test/jans-auth directory. Copy over jans-auth directory from Janssen Server VM to source-base/jans-auth-server on developer workstation. Create new profile directories. mkdir -p ./client/profiles/janssen.op.io mkdir -p ./server/profiles/janssen.op.io mkdir -p ./agama/engine/profiles/janssen.op.io Copy the contents of jans-auth directory into the respective sub-module's janssen.op.io profile directory cp ./jans-auth/client/* ./client/profiles/janssen.op.io cp ./jans-auth/server/* ./server/profiles/janssen.op.io cp ./jans-auth/config-agama-test.properties ./agama/engine/profiles/janssen.op.io/config-agama-test.properties Copy keystore file profiles/default/client_keystore.p12 from default profile directory to the janssen.op.io profile directory cp -f ./client/profiles/default/client_keystore.p12 ./client/profiles/janssen.op.io cp -f ./server/profiles/default/client_keystore.p12 ./server/profiles/janssen.op.io Running The Tests # Each module in Janssen Server has its tests that have to be executed separately. For example, to run integration tests for jans-auth-server module, run the following maven command at the directory level: mvn -Dcfg=janssen.op.io test Configuring the jans-core module # This module does not require a profile setup. It can be built with below maven command. mvn clean compile install Configuring the jans-link module # This module does not require a profile setup. It can be built with the below maven command. mvn clean compile install Configuring the jans-orm module # This module does not require a profile setup. It can be built with the below maven command. mvn clean compile install Configuring the agama module # This module does not require a profile setup. It can be built with the below maven command. mvn clean compile install Configuring the SCIM module # This module does not require a profile setup. It can be built with the below maven command. Profile setup for client and server modules # Many Janssen Server modules and sub-modules use test configuration stored in a directory named profile . The profile directory contains files that hold important information required to run tests. Developers can create one or more profiles and use them to run tests against different Janssen Servers. Since Janssen Server has been installed with test data, the installer also created the profile files required to run the test. For SCIM/client module, these files are kept on the VM under /opt/jans/jans-setup/output/test/scim-client directory. Copy over this directory to any location on the developer workstation. Follow the steps below to configure the profile for the client module. The same steps should be followed for setting up a profile for the server module. Under jans-scim/client/profiles directory, create a new directory and name it janssen.op.io Copy the contents of scim-client/client directory into the newly created janssen.op.io directory Post this, remove the scim-client directory. Now as the profile is setup, to build the jans-scim module and run tests, use the command below: mvn -Dcfg=janssen.op.io test","title":"Development"},{"location":"contribute/development/#developing-for-janssen-project","text":"","title":"Developing for Janssen Project"},{"location":"contribute/development/#remote-debugging","text":"Janssen Server modules run as Java processes. Hence, like any other Java process the JVM running the module can be configured to open a debug port where a remote debugger can be attached. The steps below will show how to configure auth-server module for remote debugging. Pass the command-line options to the JVM On the Janssen Server host, open the service config file /etc/default/jans-auth and add the following JVM parameters to as JAVA_OPTIONS -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=6001 This will open the port 6001 for the remote debugger. Any other port can also be used based on availability. Restart jans-auth services systemctl restart jans-auth.service Check if the port is open and accessible from within the Janssen Server host Use the jdb tool from JDK to test if the JVM port has been opened ./<path-to-JDK>/bin/jdb -attach 6001 if the port is open, it'll give you output like the below: Set uncaught java.lang.Throwable Set deferred uncaught java.lang.Throwable Initializing jdb ... > press ctrl+c to come out of it. Ensure that the port is accessible from outside the host VM as well and firewalls are configured accordingly Connect to the remote port on the Janssen Server host from the developer workstation. Use any IDE (Intellij, Eclipse, etc.) to create and run a remote debugging profile. Provide IP and debug port of the Janssen Server host. For IntelliJIdea, create a debug configuration as below:","title":"Remote Debugging"},{"location":"contribute/development/#run-integration-tests-with-a-janssen-server-vm","text":"In this guide, we will look at steps to run the Janssen integration test suite against an installed Janssen Server.","title":"Run Integration Tests with a Janssen Server VM"},{"location":"contribute/development/#component-setup","text":"Instructions in this guide can be used if Janssen Server is installed on a VM. Developers can use a virtualization software (like VMWare) or use LxD containers to create VM on developer workstation or use a remote cloud VM. OS platform for Developer Workstation Steps in this guide are applicable to any OS platform a Developer workstation may have. Example commands given in this guide are for Ubuntu Linux based workstation.","title":"Component Setup"},{"location":"contribute/development/#install-janssen-server","text":"Install the Janssen server using one of the methods described in the VM installation guide. Note the points below when following installation instructions. Make a note of the host name that you assign to the Janssen server during the installation. For this guide, the Janssen hostname would be janssen.op.io Choose to install with test data load. This can be achieved by using the -t switch when invoking the setup script from installation instructions. Use the VM installation guide for the complete set of instructions. Once the installation is complete, check if the .well-known end-points of the Janssen server from the browser. A successful response will ascertain that the The Janssen server running inside the local VM is healthy and also accessible from the developer's machine. Note Based on developer setup it may be necessary to add appropriate IP-HOST mapping to the developer workstation. For instance, on a Linux-based developer workstation, this means adding a mapping to /etc/hosts file. Make sure that VM's IP is mapped to a FQDN like janssen.op.io . Refering to VM with localhost or just IP will not work. URI for OpenID configuration .well-known endpoint: https://janssen.op.io/jans-auth/.well-known/openid-configuration The response received should be JSON formatted Janssen configuration details, similar to those below. { \"request_parameter_supported\" : true, \"pushed_authorization_request_endpoint\" : \"https://janssen.op.io/jans-auth/restv1/par\", \"introspection_endpoint\" : \"https://janssen.op.io/jans-auth/restv1/introspection\", \"claims_parameter_supported\" : false, \"issuer\" : \"https://janssen.op.io\", \"userinfo_encryption_enc_values_supported\" : [ \"RSA1_5\", \"RSA-OAEP\", \"A128KW\", \"A256KW\" ], \"id_token_encryption_enc_values_supported\" : [ \"A128CBC+HS256\", \"A256CBC+HS512\", \"A128GCM\", \"A256GCM\" ], \"authorization_endpoint\" : \"https://janssen.op.io/jans-auth/restv1/authorize\", \"service_documentation\" : \"http://jans.org/docs\", \"authorization_encryption_alg_values_supported\" : [ \"RSA1_5\", \"RSA-OAEP\", \"A128KW\", \"A256KW\" ], \"id_generation_endpoint\" : \"https://janssen.op.io/jans-auth/restv1/id\", \"claims_supported\" : [ \"street_address\", \"country\", \"zoneinfo\", \"birthdate\", \"role\", \"gender\", \"user_name\", \"formatted\", \"phone_mobile_number\", \"preferred_username\", \"inum\", \"locale\", \"updated_at\", \"post_office_box\", \"nickname\", \"preferred_language\", \"email\", \"website\", \"email_verified\", \"profile\", \"locality\", \"room_number\", \"phone_number_verified\", \"given_name\", \"middle_name\", \"picture\", \"name\", \"phone_number\", \"postal_code\", \"region\", \"family_name\", \"jansAdminUIRole\" ], \"scope_to_claims_mapping\" : [ { \"user_name\" : [ \"user_name\" ] }, { \"https://jans.io/scim/users.write\" : [ ] }, { \"https://jans.io/scim/groups.read\" : [ ] }, { \"https://jans.io/scim/all-resources.search\" : [ ] }, { \"https://jans.io/scim/fido.write\" : [ ] }, { \"https://jans.io/scim/groups.write\" : [ ] }, { \"https://jans.io/scim/fido2.read\" : [ ] }, { \"https://jans.io/scim/fido.read\" : [ ] }, { \"https://jans.io/scim/fido2.write\" : [ ]","title":"Install Janssen Server"},{"location":"contribute/development/#setup-the-certificates","text":"To run the tests against the installed Janssen Server, the workstation JRE needs to have the appropriate certificate installed. Update cacerts using the steps below: extract certificate for Janssen server with name janssen.op.io On Developer Workstation openssl s_client -connect test.local.jans.io:443 2 > & 1 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' > /tmp/httpd.crt this command takes a few seconds to return. Update cacerts of your JRE which is being used by the code workspace. For example, /usr/lib/jvm/java-11-amazon-corretto . When running the command below, it will prompt for cert store password. Provide the correct password. The default password is changeit . keytool -import -alias janssen.op.io -keystore /usr/lib/jvm/java-11-amazon-corretto/lib/security/cacerts -file /tmp/httpd.crt","title":"Setup The Certificates"},{"location":"contribute/development/#configure-developer-workspace","text":"Now that we have Janssen Server running in a VM and it is accessible from the developer workstation as well, we will create and configure the code base on the developer workspace to run integration tests. Get Janssen server code from Janssen GitHub repository . Note the path to this location, we will refer to it as source-base . Janssen Server is composed of multiple modules. For example source-base/jans-auth-server , source-base/jans-link etc. Each module has its own set of tests. Below are the instructions for configuring each module for tests. What is a Profile directory? To run integration tests, the developer workspace needs to know details about he Janssen Server agaist which the tests are to be run. Janssen Server workspace holds this information in source-base/module/sub-module/profiles directory. The profiles directory can contain one or more sub-directories, each representing a profile(i.e a target Janssen Server). These profile directories are used to hold files that contain important information required to run tests. Developers can create one or more profiles and use them to run tests against different Janssen Servers. This guide uses Janssen Server hostname, janssen.op.io , as profile name.","title":"Configure developer workspace"},{"location":"contribute/development/#configuring-the-jans-auth-server-module","text":"Configuring jans-auth-server module involves setting up profiles for client , server and agama sub-modules. Follow the steps below to configure the profile for the client and server sub-modules. Move to the module directory cd source-base/jans-auth-server As a precautionary measure, let's first remove any old profile artifacts from the jans-auth-server workspace. rm -rf ./jans-auth rm -rf ./client/profiles/janssen.op.io rm -rf ./server/profiles/janssen.op.io rm -rf ./agama/engine/profiles/janssen.op.io Since Janssen Server has been installed with test data, the installer also created the profile files required to run the test. These files are kept on the VM under /opt/jans/jans-setup/output/test/jans-auth directory. Copy over jans-auth directory from Janssen Server VM to source-base/jans-auth-server on developer workstation. Create new profile directories. mkdir -p ./client/profiles/janssen.op.io mkdir -p ./server/profiles/janssen.op.io mkdir -p ./agama/engine/profiles/janssen.op.io Copy the contents of jans-auth directory into the respective sub-module's janssen.op.io profile directory cp ./jans-auth/client/* ./client/profiles/janssen.op.io cp ./jans-auth/server/* ./server/profiles/janssen.op.io cp ./jans-auth/config-agama-test.properties ./agama/engine/profiles/janssen.op.io/config-agama-test.properties Copy keystore file profiles/default/client_keystore.p12 from default profile directory to the janssen.op.io profile directory cp -f ./client/profiles/default/client_keystore.p12 ./client/profiles/janssen.op.io cp -f ./server/profiles/default/client_keystore.p12 ./server/profiles/janssen.op.io","title":"Configuring the jans-auth-server module"},{"location":"contribute/development/#running-the-tests","text":"Each module in Janssen Server has its tests that have to be executed separately. For example, to run integration tests for jans-auth-server module, run the following maven command at the directory level: mvn -Dcfg=janssen.op.io test","title":"Running The Tests"},{"location":"contribute/development/#configuring-the-jans-core-module","text":"This module does not require a profile setup. It can be built with below maven command. mvn clean compile install","title":"Configuring the jans-core module"},{"location":"contribute/development/#configuring-the-jans-link-module","text":"This module does not require a profile setup. It can be built with the below maven command. mvn clean compile install","title":"Configuring the jans-link module"},{"location":"contribute/development/#configuring-the-jans-orm-module","text":"This module does not require a profile setup. It can be built with the below maven command. mvn clean compile install","title":"Configuring the jans-orm module"},{"location":"contribute/development/#configuring-the-agama-module","text":"This module does not require a profile setup. It can be built with the below maven command. mvn clean compile install","title":"Configuring the agama module"},{"location":"contribute/development/#configuring-the-scim-module","text":"This module does not require a profile setup. It can be built with the below maven command.","title":"Configuring the SCIM module"},{"location":"contribute/development/#profile-setup-for-client-and-server-modules","text":"Many Janssen Server modules and sub-modules use test configuration stored in a directory named profile . The profile directory contains files that hold important information required to run tests. Developers can create one or more profiles and use them to run tests against different Janssen Servers. Since Janssen Server has been installed with test data, the installer also created the profile files required to run the test. For SCIM/client module, these files are kept on the VM under /opt/jans/jans-setup/output/test/scim-client directory. Copy over this directory to any location on the developer workstation. Follow the steps below to configure the profile for the client module. The same steps should be followed for setting up a profile for the server module. Under jans-scim/client/profiles directory, create a new directory and name it janssen.op.io Copy the contents of scim-client/client directory into the newly created janssen.op.io directory Post this, remove the scim-client directory. Now as the profile is setup, to build the jans-scim module and run tests, use the command below: mvn -Dcfg=janssen.op.io test","title":"Profile setup for client and server modules"},{"location":"contribute/testing/","tags":["administration","contribute","Testing","Quality Assurance"],"text":"Test And Quality Assurance For Janssen Project # The Janssen Project is a large, complex project with tons of inter-dependency. If we aren't test-driven, anarchy will ensue. Every line of code at Janssen Project goes through various tests at different stages of development. Most of these tests are automated and executed as part of our CI-CD pipeline, while others are executed manually. Unit testing # Do not submit any code without a corresponding unit test. Also, any bug fixes should increment unit test coverage. All unit tests are executed with any subsequent Jenkins build. Component testing # Component testing uses real world use cases to exercise a portion of the software, using typical data inputs. Developers should document component stories and submit them to the component test library for the respective repository. A tester should be able to run component tests manually. Component tests should run automatically with each Jenkins build. The OpenID Foundation certification tests supplement the component testing library, and should be run for each major release of the software for which they are available. Performance testing # Performance tests are critical to optimization of the persistence and caching implementation. All major releases of the software should be tested for performance with all supported database and cache configurations using the Cloud Native distribution. The VM distribution will not be performance tested, as the main goal for this distribution is development and small deployments. The JMeter test tool should be used to generate the load. These tests are published so community members can run their own bench-marking analysis. HA Tests # HA tests should be run against the Cloud Native distribution, which by design is active-active with no single point of failure. The HA testing should simulate taking down various pieces of infrastructure, to see if authentications can still proceed. Also, what happens to transactions that were in progress during the crash? Penetration tests # Penetration testing is highly deployment specific. Depending on different implementations of the Janssen Project software, you may achieve different levels of risk mitigation. Thus it is important that organizations that operate their own IAM platform based on Janssen perform their own penetration testing. Dependency Vulnerabilities # Dependency vulnerabilities are monitored by Gihub. In addition we plan to use the Linux Foundation Community Bridge vulnerability detection platform. Testing Documentation Changes Locally # While contributing documentation to official Janssen Project documentation it is important to make sure that documents meet style guidelines and have been proofread to remove any typographical or grammatical errors. Janssen Project uses Material for MkDocs to create the documenation site. Before new content is pushed to the repository on GitHub, it should be tested locally by the author. Author can do this by deploying Material for MkDocs locally. High-level steps involve: Install Material for MkDocs Install required plugins Preview as you write Open Banking # We are working on developing this content under issue 2548 . If you\u2019d like to contribute the content, get started with the Contribution Guide How to test OpenBanking? # This test uses a Gluu Testing Certificate. device authentication # After installation, we have to complete device authentication to use OpenBanking. Testing using commnd line mode # We can run the below command on the command line. For example: /opt/jans/jans-cli/config-cli.py -CC /opt/jans/jans-setup/output/CA/client.crt -CK /opt/jans/jans-setup/output/CA/client.key \u2013operation-id get-oauth-openid-clients in the same way we can run other commands. Rest of the testing is same for jans and openbanking. Release Quality Assurance # Once all the code changes for a particular release have been committed, we perform a set of tests and go through a list of checkpoints to make sure release candidate (RC) build is healthy and functioning well. Pre-release QA checklist # As part of pre-release QA check, we run a set of manual sanity checks on test environments with various deployment configurations. Test Environments # # OS Platform Persistance Type Deployment Type (VM/CN) Test 1 SUSE 15 Opendj VM installation and sanity testing 2 SUSE 15 Mysql VM installation and sanity testing 3 SUSE 15 Pgsql VM installation and sanity testing 4 RHEL 8 Opendj VM installation and sanity testing 5 RHEL 8 Mysql VM installation and sanity testing 6 RHEL 8 Pgsql VM installation and sanity testing 7 Ubuntu20 Opendj VM installation and sanity testing 8 Ubuntu20 Mysql VM installation and sanity testing 9 Ubuntu20 Pgsql VM installation and sanity testing 10 Ubuntu22 Opendj VM installation and sanity testing 11 Ubuntu22 Mysql VM installation and sanity testing 12 Ubuntu22 Pgsql VM installation and sanity testing Sanity checks # Review functioning of .well-known endpoints for OpenId, Fido, UMA, SCIM modules Test device authentication flow using TUI Test password authentication flow using Janssen Server Tent Test Agama project deployment and functioning Post-release QA checklist # # QA Checks 1 Package installation verification on all OS Platforms as in pre-release tests","title":"Testing"},{"location":"contribute/testing/#test-and-quality-assurance-for-janssen-project","text":"The Janssen Project is a large, complex project with tons of inter-dependency. If we aren't test-driven, anarchy will ensue. Every line of code at Janssen Project goes through various tests at different stages of development. Most of these tests are automated and executed as part of our CI-CD pipeline, while others are executed manually.","title":"Test And Quality Assurance For Janssen Project"},{"location":"contribute/testing/#unit-testing","text":"Do not submit any code without a corresponding unit test. Also, any bug fixes should increment unit test coverage. All unit tests are executed with any subsequent Jenkins build.","title":"Unit testing"},{"location":"contribute/testing/#component-testing","text":"Component testing uses real world use cases to exercise a portion of the software, using typical data inputs. Developers should document component stories and submit them to the component test library for the respective repository. A tester should be able to run component tests manually. Component tests should run automatically with each Jenkins build. The OpenID Foundation certification tests supplement the component testing library, and should be run for each major release of the software for which they are available.","title":"Component testing"},{"location":"contribute/testing/#performance-testing","text":"Performance tests are critical to optimization of the persistence and caching implementation. All major releases of the software should be tested for performance with all supported database and cache configurations using the Cloud Native distribution. The VM distribution will not be performance tested, as the main goal for this distribution is development and small deployments. The JMeter test tool should be used to generate the load. These tests are published so community members can run their own bench-marking analysis.","title":"Performance testing"},{"location":"contribute/testing/#ha-tests","text":"HA tests should be run against the Cloud Native distribution, which by design is active-active with no single point of failure. The HA testing should simulate taking down various pieces of infrastructure, to see if authentications can still proceed. Also, what happens to transactions that were in progress during the crash?","title":"HA Tests"},{"location":"contribute/testing/#penetration-tests","text":"Penetration testing is highly deployment specific. Depending on different implementations of the Janssen Project software, you may achieve different levels of risk mitigation. Thus it is important that organizations that operate their own IAM platform based on Janssen perform their own penetration testing.","title":"Penetration tests"},{"location":"contribute/testing/#dependency-vulnerabilities","text":"Dependency vulnerabilities are monitored by Gihub. In addition we plan to use the Linux Foundation Community Bridge vulnerability detection platform.","title":"Dependency Vulnerabilities"},{"location":"contribute/testing/#testing-documentation-changes-locally","text":"While contributing documentation to official Janssen Project documentation it is important to make sure that documents meet style guidelines and have been proofread to remove any typographical or grammatical errors. Janssen Project uses Material for MkDocs to create the documenation site. Before new content is pushed to the repository on GitHub, it should be tested locally by the author. Author can do this by deploying Material for MkDocs locally. High-level steps involve: Install Material for MkDocs Install required plugins Preview as you write","title":"Testing Documentation Changes Locally"},{"location":"contribute/testing/#open-banking","text":"We are working on developing this content under issue 2548 . If you\u2019d like to contribute the content, get started with the Contribution Guide","title":"Open Banking"},{"location":"contribute/testing/#how-to-test-openbanking","text":"This test uses a Gluu Testing Certificate.","title":"How to test OpenBanking?"},{"location":"contribute/testing/#device-authentication","text":"After installation, we have to complete device authentication to use OpenBanking.","title":"device authentication"},{"location":"contribute/testing/#testing-using-commnd-line-mode","text":"We can run the below command on the command line. For example: /opt/jans/jans-cli/config-cli.py -CC /opt/jans/jans-setup/output/CA/client.crt -CK /opt/jans/jans-setup/output/CA/client.key \u2013operation-id get-oauth-openid-clients in the same way we can run other commands. Rest of the testing is same for jans and openbanking.","title":"Testing using commnd line mode"},{"location":"contribute/testing/#release-quality-assurance","text":"Once all the code changes for a particular release have been committed, we perform a set of tests and go through a list of checkpoints to make sure release candidate (RC) build is healthy and functioning well.","title":"Release Quality Assurance"},{"location":"contribute/testing/#pre-release-qa-checklist","text":"As part of pre-release QA check, we run a set of manual sanity checks on test environments with various deployment configurations.","title":"Pre-release QA checklist"},{"location":"contribute/testing/#test-environments","text":"# OS Platform Persistance Type Deployment Type (VM/CN) Test 1 SUSE 15 Opendj VM installation and sanity testing 2 SUSE 15 Mysql VM installation and sanity testing 3 SUSE 15 Pgsql VM installation and sanity testing 4 RHEL 8 Opendj VM installation and sanity testing 5 RHEL 8 Mysql VM installation and sanity testing 6 RHEL 8 Pgsql VM installation and sanity testing 7 Ubuntu20 Opendj VM installation and sanity testing 8 Ubuntu20 Mysql VM installation and sanity testing 9 Ubuntu20 Pgsql VM installation and sanity testing 10 Ubuntu22 Opendj VM installation and sanity testing 11 Ubuntu22 Mysql VM installation and sanity testing 12 Ubuntu22 Pgsql VM installation and sanity testing","title":"Test Environments"},{"location":"contribute/testing/#sanity-checks","text":"Review functioning of .well-known endpoints for OpenId, Fido, UMA, SCIM modules Test device authentication flow using TUI Test password authentication flow using Janssen Server Tent Test Agama project deployment and functioning","title":"Sanity checks"},{"location":"contribute/testing/#post-release-qa-checklist","text":"# QA Checks 1 Package installation verification on all OS Platforms as in pre-release tests","title":"Post-release QA checklist"},{"location":"contribute/useful-tools/","text":"Useful tools for developers / administrators: # jsonbin.io jwt.io oidcdebugger.com keytool.online","title":"Useful tools"},{"location":"contribute/useful-tools/#useful-tools-for-developers-administrators","text":"jsonbin.io jwt.io oidcdebugger.com keytool.online","title":"Useful tools for developers / administrators:"},{"location":"contribute/ci-cd/github-ci/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"GitHub CI"},{"location":"contribute/ci-cd/github-ci/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"contribute/ci-cd/github-ci/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"contribute/ci-cd/github-ci/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"contribute/ci-cd/jenkins-ci/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Jenkins CI"},{"location":"contribute/ci-cd/jenkins-ci/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"contribute/ci-cd/jenkins-ci/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"contribute/ci-cd/jenkins-ci/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"contribute/ci-cd/release-process/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Release Process"},{"location":"contribute/ci-cd/release-process/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"contribute/ci-cd/release-process/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"contribute/ci-cd/release-process/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"contribute/implementation-design/","text":"Design And Implementation # This section documents technical design, architecture and interactions of various Janssen modules. Design Consideration and Guidelines # This section outlines high-level design principles, styles and design choices that Janssen project follow. REST API Design # Caching # Testing # Deployment # Security # Scalability and Cloud Infrastructure # Technical Documentation Guidelines # These are high-level guidelines to follow when adding or updating technical documentation for a module Detailed technical documentation for each module should be placed under directory with module's name. For example, technical documentation for jans-mod should be placed under directory docs/technical/jans-mod Each module directory should have a README file that follows Technical Overview Template . Create directories if required under module directory to further arrange documentation Place all the digital assets to support your documentation under assets following these guidelines","title":"Design And Implementation"},{"location":"contribute/implementation-design/#design-and-implementation","text":"This section documents technical design, architecture and interactions of various Janssen modules.","title":"Design And Implementation"},{"location":"contribute/implementation-design/#design-consideration-and-guidelines","text":"This section outlines high-level design principles, styles and design choices that Janssen project follow.","title":"Design Consideration and Guidelines"},{"location":"contribute/implementation-design/#rest-api-design","text":"","title":"REST API Design"},{"location":"contribute/implementation-design/#caching","text":"","title":"Caching"},{"location":"contribute/implementation-design/#testing","text":"","title":"Testing"},{"location":"contribute/implementation-design/#deployment","text":"","title":"Deployment"},{"location":"contribute/implementation-design/#security","text":"","title":"Security"},{"location":"contribute/implementation-design/#scalability-and-cloud-infrastructure","text":"","title":"Scalability and Cloud Infrastructure"},{"location":"contribute/implementation-design/#technical-documentation-guidelines","text":"These are high-level guidelines to follow when adding or updating technical documentation for a module Detailed technical documentation for each module should be placed under directory with module's name. For example, technical documentation for jans-mod should be placed under directory docs/technical/jans-mod Each module directory should have a README file that follows Technical Overview Template . Create directories if required under module directory to further arrange documentation Place all the digital assets to support your documentation under assets following these guidelines","title":"Technical Documentation Guidelines"},{"location":"contribute/implementation-design/agama/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Agama"},{"location":"contribute/implementation-design/agama/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"contribute/implementation-design/agama/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"contribute/implementation-design/agama/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"contribute/implementation-design/jans-auth-server/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"jans-auth-server"},{"location":"contribute/implementation-design/jans-auth-server/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"contribute/implementation-design/jans-auth-server/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"contribute/implementation-design/jans-auth-server/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"contribute/implementation-design/jans-cli/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"jans-cli"},{"location":"contribute/implementation-design/jans-cli/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"contribute/implementation-design/jans-cli/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"contribute/implementation-design/jans-cli/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"contribute/implementation-design/jans-config-api/","tags":["developer","config-api"],"text":"Overview # Janssen Config API # Janssen(Jans) Config API is an application programming interface (API) gateway managing configuring of various Janssen modules. Diagram reference Jans Config API features: # Jans Config API uses REST endpoints to communicate. Jans Config API endpoint are OAuth 2.0 protected. More details here Jans Config API plugin architecture can be used to add new features. More details here . Config API endpoint can be used to create new user, clients, scopes, etc. This data is stores into the same persistence store as the Jans-Auth server. Jans Config API Flow # sequenceDiagram title Jans Config API request flow autonumber participant Admin participant Admin UI participant Config API participant Auth Server participant Jans Persistence Admin->>Admin UI: Create Client note over Admin UI: Click on plus sign to Create Client and Save button to create new client Config API->>Auth Server: Introspect Token Auth Server->>Config API: Returns Introspection Response Config API->>Config API: Successful validation of token claim with Introspection Response Config API->>Jans Persistence: Validate and persist client data Config API->>Admin UI: Returns persistence status Admin : Administrator of the application. Will use Admin UI to configure application. Admin UI : Gluu graphical user interface for the administrators to manage configuration and other properties of Jans Auth Server via Jans Config API. Config API : Jans API gateway for configuring Janssen modules like Jans Auth Server, fido2, SCIM, etc. Auth Server : Janssen federated identity with comprehensive implementation of OpenID Connect. Used for introspection of access token in this flow. Jans Persistence : Jans Persistence layer to persist data in backend.","title":"jans-config-api"},{"location":"contribute/implementation-design/jans-config-api/#overview","text":"","title":"Overview"},{"location":"contribute/implementation-design/jans-config-api/#janssen-config-api","text":"Janssen(Jans) Config API is an application programming interface (API) gateway managing configuring of various Janssen modules. Diagram reference","title":"Janssen Config API"},{"location":"contribute/implementation-design/jans-config-api/#jans-config-api-features","text":"Jans Config API uses REST endpoints to communicate. Jans Config API endpoint are OAuth 2.0 protected. More details here Jans Config API plugin architecture can be used to add new features. More details here . Config API endpoint can be used to create new user, clients, scopes, etc. This data is stores into the same persistence store as the Jans-Auth server.","title":"Jans Config API features:"},{"location":"contribute/implementation-design/jans-config-api/#jans-config-api-flow","text":"sequenceDiagram title Jans Config API request flow autonumber participant Admin participant Admin UI participant Config API participant Auth Server participant Jans Persistence Admin->>Admin UI: Create Client note over Admin UI: Click on plus sign to Create Client and Save button to create new client Config API->>Auth Server: Introspect Token Auth Server->>Config API: Returns Introspection Response Config API->>Config API: Successful validation of token claim with Introspection Response Config API->>Jans Persistence: Validate and persist client data Config API->>Admin UI: Returns persistence status Admin : Administrator of the application. Will use Admin UI to configure application. Admin UI : Gluu graphical user interface for the administrators to manage configuration and other properties of Jans Auth Server via Jans Config API. Config API : Jans API gateway for configuring Janssen modules like Jans Auth Server, fido2, SCIM, etc. Auth Server : Janssen federated identity with comprehensive implementation of OpenID Connect. Used for introspection of access token in this flow. Jans Persistence : Jans Persistence layer to persist data in backend.","title":"Jans Config API Flow"},{"location":"contribute/implementation-design/jans-core/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"jans-core"},{"location":"contribute/implementation-design/jans-core/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"contribute/implementation-design/jans-core/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"contribute/implementation-design/jans-core/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"contribute/implementation-design/jans-eleven/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"jans-eleven"},{"location":"contribute/implementation-design/jans-eleven/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"contribute/implementation-design/jans-eleven/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"contribute/implementation-design/jans-eleven/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"contribute/implementation-design/jans-fido2/","tags":["developer","fido"],"text":"Overview # Janssen's FIDO2 server # FIDO2 as an open standard for authentication is based on public key cryptography. Janssen's FIDO2 server - a component inside the Janssen project enables users of RPs to enroll and authenticate themselves using U2F keys, FIDO2 keys or inbuilt platform authenticator. 1. The FIDO2 server uses REST endpoints to communicate with an RP via an https connection. 2. The FIDO2 server implements the FIDO Metadata Service (MDS3) defined by FIDO Alliance. 3. The FIDO2 server stores user data into the same persistence store as the Jans-Auth server. (LDAP, MYSQL, Couchbase etc.) Components of the FIDO2 ecosystem in Janssen # Diagram reference User : User of an application, the one who possesses the Authenticator and who's role is to pass the Test of User Presence (TUP) (touch device, look, speak etc.). WebAuthn API : A global web standard for password-less FIDO2 authentication, implemented by most browsers (Google Chrome, Mozilla Firefox, Microsoft Edge, Apple Safari, Opera, Microsoft edge). It provides clients access to the underlying capabilities of the Authenticator. WebAuthn offers a very good user experience, there is no need for any additional browser plugin to be installed. WebAuthn API: enables clients to make requests to authenticators with regards to : creation of a new key-pair provide an assertion about a key report capabilities (capability exists but not offered in Janssen's FIDO2 offering) manage a PIN. (capability exists but not offered in Janssen's FIDO2 offering) Authenticator : A device which holds the private key. It prompts the user to perform a certain gesture. It can be a platform authenticator that is built into the client device or a roaming authenticator that is connected to the client device through USB, BLE, or NFC. Relying Party : The RP ( jans-auth or casa ) implements a Javascript Client which makes a registration and authentication request to the WebAuthn API. The Relying Party ID is the DNS domain where the FIDO2 device will be registered and used. CTAP2 : Simple and lightweight hardware protocol that enables Authenticators to talk with Supported browsers. FIDO2 Server Janssen's FIDO server is a standalone server communicates with the RP using an API which can be obtained by querying the following URL : https://<myjans-server>/.well-known/fido2-configuration Response: { \"version\": \"1.1\", \"issuer\": \"https://<myjans-server>\", \"attestation\": { \"base_path\": \"https://<myjans-server>/jans-fido2/restv1/attestation\", \"options_enpoint\": \"https://<myjans-server>/jans-fido2/restv1/attestation/options\", \"result_enpoint\": \"https://<myjans-server>/jans-fido2/restv1/attestation/result\" }, \"assertion\": { \"base_path\": \"https://<myjans-server>/jans-fido2/restv1/assertion\", \"options_enpoint\": \"https://<myjans-server>/jans-fido2/restv1/assertion/options\", \"result_enpoint\": \"https://<myjans-server>/jans-fido2/restv1/assertion/result\" } } The two main functionalities are: 1. Attestation 2. Assertion The authenticator credentials obtained after querying the WebAuthn API is forwarded to the FIDO2 server for attestation or assertion. Interception script : In the Janssen ecosystem, the authentication flow that comprises of the calls to WebAuthn API and the FIDO server is achieved using an interception script, details of it can be found here . Attestation formats supported by Janssen's FIDO server # Packed (FIDO2) : The most used attestation format TPM : Attestation for Windows10 devices Android key attestation : Attestation for android devices. Android SafetyNet : Any Android devices running 7+ FIDO U2F : Legacy U2F authenticators Apple Anonymous : Apple devices do attestations differently. None Backward compatibility with U2F authenticators # The FIDO server offers registration and authentication using legacy U2F authenticators. References # https://www.w3.org/TR/webauthn-2/ http://fidoalliance.org/specs/mds/fido-metadata-statement-v3.0-ps-20210518.html Tools # https://jwt.io/ \u2013 For JWT decoding and debugging https://www.base64decode.org/ \u2013 For Decoding Base64 to UTF8 https://fidoalliance.org/certification/fido-certified-products/ - To browse authenticators listed with FIDO Alliance","title":"jans-fido2"},{"location":"contribute/implementation-design/jans-fido2/#overview","text":"","title":"Overview"},{"location":"contribute/implementation-design/jans-fido2/#janssens-fido2-server","text":"FIDO2 as an open standard for authentication is based on public key cryptography. Janssen's FIDO2 server - a component inside the Janssen project enables users of RPs to enroll and authenticate themselves using U2F keys, FIDO2 keys or inbuilt platform authenticator. 1. The FIDO2 server uses REST endpoints to communicate with an RP via an https connection. 2. The FIDO2 server implements the FIDO Metadata Service (MDS3) defined by FIDO Alliance. 3. The FIDO2 server stores user data into the same persistence store as the Jans-Auth server. (LDAP, MYSQL, Couchbase etc.)","title":"Janssen's FIDO2 server"},{"location":"contribute/implementation-design/jans-fido2/#components-of-the-fido2-ecosystem-in-janssen","text":"Diagram reference User : User of an application, the one who possesses the Authenticator and who's role is to pass the Test of User Presence (TUP) (touch device, look, speak etc.). WebAuthn API : A global web standard for password-less FIDO2 authentication, implemented by most browsers (Google Chrome, Mozilla Firefox, Microsoft Edge, Apple Safari, Opera, Microsoft edge). It provides clients access to the underlying capabilities of the Authenticator. WebAuthn offers a very good user experience, there is no need for any additional browser plugin to be installed. WebAuthn API: enables clients to make requests to authenticators with regards to : creation of a new key-pair provide an assertion about a key report capabilities (capability exists but not offered in Janssen's FIDO2 offering) manage a PIN. (capability exists but not offered in Janssen's FIDO2 offering) Authenticator : A device which holds the private key. It prompts the user to perform a certain gesture. It can be a platform authenticator that is built into the client device or a roaming authenticator that is connected to the client device through USB, BLE, or NFC. Relying Party : The RP ( jans-auth or casa ) implements a Javascript Client which makes a registration and authentication request to the WebAuthn API. The Relying Party ID is the DNS domain where the FIDO2 device will be registered and used. CTAP2 : Simple and lightweight hardware protocol that enables Authenticators to talk with Supported browsers. FIDO2 Server Janssen's FIDO server is a standalone server communicates with the RP using an API which can be obtained by querying the following URL : https://<myjans-server>/.well-known/fido2-configuration Response: { \"version\": \"1.1\", \"issuer\": \"https://<myjans-server>\", \"attestation\": { \"base_path\": \"https://<myjans-server>/jans-fido2/restv1/attestation\", \"options_enpoint\": \"https://<myjans-server>/jans-fido2/restv1/attestation/options\", \"result_enpoint\": \"https://<myjans-server>/jans-fido2/restv1/attestation/result\" }, \"assertion\": { \"base_path\": \"https://<myjans-server>/jans-fido2/restv1/assertion\", \"options_enpoint\": \"https://<myjans-server>/jans-fido2/restv1/assertion/options\", \"result_enpoint\": \"https://<myjans-server>/jans-fido2/restv1/assertion/result\" } } The two main functionalities are: 1. Attestation 2. Assertion The authenticator credentials obtained after querying the WebAuthn API is forwarded to the FIDO2 server for attestation or assertion. Interception script : In the Janssen ecosystem, the authentication flow that comprises of the calls to WebAuthn API and the FIDO server is achieved using an interception script, details of it can be found here .","title":"Components of the FIDO2 ecosystem in Janssen"},{"location":"contribute/implementation-design/jans-fido2/#attestation-formats-supported-by-janssens-fido-server","text":"Packed (FIDO2) : The most used attestation format TPM : Attestation for Windows10 devices Android key attestation : Attestation for android devices. Android SafetyNet : Any Android devices running 7+ FIDO U2F : Legacy U2F authenticators Apple Anonymous : Apple devices do attestations differently. None","title":"Attestation formats supported by Janssen's FIDO server"},{"location":"contribute/implementation-design/jans-fido2/#backward-compatibility-with-u2f-authenticators","text":"The FIDO server offers registration and authentication using legacy U2F authenticators.","title":"Backward compatibility with U2F authenticators"},{"location":"contribute/implementation-design/jans-fido2/#references","text":"https://www.w3.org/TR/webauthn-2/ http://fidoalliance.org/specs/mds/fido-metadata-statement-v3.0-ps-20210518.html","title":"References"},{"location":"contribute/implementation-design/jans-fido2/#tools","text":"https://jwt.io/ \u2013 For JWT decoding and debugging https://www.base64decode.org/ \u2013 For Decoding Base64 to UTF8 https://fidoalliance.org/certification/fido-certified-products/ - To browse authenticators listed with FIDO Alliance","title":"Tools"},{"location":"contribute/implementation-design/jans-notify/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Jans notify"},{"location":"contribute/implementation-design/jans-notify/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"contribute/implementation-design/jans-notify/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"contribute/implementation-design/jans-notify/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"contribute/implementation-design/jans-orm/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"jans-orm"},{"location":"contribute/implementation-design/jans-orm/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"contribute/implementation-design/jans-orm/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"contribute/implementation-design/jans-orm/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"contribute/implementation-design/jans-scim/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"jans-scim"},{"location":"contribute/implementation-design/jans-scim/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"contribute/implementation-design/jans-scim/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"contribute/implementation-design/jans-scim/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"contribute/implementation-design/technical-overview-template/","text":"# Contents: - Functional Overview - Design Overview - API and Code Reference - Deployment - Data Reference - How to Run Tests - Logging - Security Considerations Functional Overview # Design Overview # API and Code Reference # API Reference Code Reference Deployment # Data Reference # How to Run Tests # Logging # Security Considerations #","title":"<module name>"},{"location":"contribute/implementation-design/technical-overview-template/#_1","text":"Contents: - Functional Overview - Design Overview - API and Code Reference - Deployment - Data Reference - How to Run Tests - Logging - Security Considerations","title":""},{"location":"contribute/implementation-design/technical-overview-template/#functional-overview","text":"","title":"Functional Overview"},{"location":"contribute/implementation-design/technical-overview-template/#design-overview","text":"","title":"Design Overview"},{"location":"contribute/implementation-design/technical-overview-template/#api-and-code-reference","text":"API Reference Code Reference","title":"API and Code Reference"},{"location":"contribute/implementation-design/technical-overview-template/#deployment","text":"","title":"Deployment"},{"location":"contribute/implementation-design/technical-overview-template/#data-reference","text":"","title":"Data Reference"},{"location":"contribute/implementation-design/technical-overview-template/#how-to-run-tests","text":"","title":"How to Run Tests"},{"location":"contribute/implementation-design/technical-overview-template/#logging","text":"","title":"Logging"},{"location":"contribute/implementation-design/technical-overview-template/#security-considerations","text":"","title":"Security Considerations"},{"location":"governance/","text":"Overview # Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"governance/#overview","text":"Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"governance/charter/","tags":["governance","charter"],"text":"Agama Community Projects # Technical Charter (the \u201cCharter\u201d) for Janssen Project a Series of LF Projects, LLC # Adopted December 8, 2020 This Charter sets forth the responsibilities and procedures for technical contribution to, and oversight of, the Janssen open source project, which has been established as Janssen Project a Series of LF Projects, LLC (the \u201cProject\u201d). LF Projects, LLC (\u201cLF Projects\u201d) is a Delaware series limited liability company. All contributors (including committers, maintainers, and other technical positions) and other participants in the Project (collectively, \u201cCollaborators\u201d) must comply with the terms of this Charter. Mission and Scope of the Project The mission of the Project is to develop and maintain a cloud native identity and authorization platform that comprehensively implements OAuth, OpenID Connect and the User Managed Access protocol, while maintaining flexibility and horizontal scalability. The scope of the Project includes collaborative development under the Project License (as defined herein) supporting the mission, including documentation, testing, integration and the creation of other artifacts that aid the development, deployment, operation or adoption of the open source project. Technical Steering Committee The Technical Steering Committee (the \u201cTSC\u201d) will be responsible for all technical oversight of the open source Project. The TSC voting members are initially the Project\u2019s Committers. At the inception of the project, the Committers of the Project will be as set forth within the \u201cCONTRIBUTING\u201d file within the Project\u2019s code repository. The TSC may choose an alternative approach for determining the voting members of the TSC, and any such alternative approach will be documented in the CONTRIBUTING file. Any meetings of the Technical Steering Committee are intended to be open to the public, and can be conducted electronically, via teleconference, or in person. TSC projects generally will involve Contributors and Committers. The TSC may adopt or modify roles so long as the roles are documented in the CONTRIBUTING file. Unless otherwise documented: Contributors include anyone in the technical community that contributes code, documentation, or other technical artifacts to the Project; Committers are Contributors who have earned the ability to modify (\u201ccommit\u201d) source code, documentation or other technical artifacts in a project\u2019s repository; and A Contributor may become a Committer by a majority approval of the existing Committers. A Committer may be removed by a majority approval of the other existing Committers. Participation in the Project through becoming a Contributor and Committer is open to anyone so long as they abide by the terms of this Charter. The TSC may (1) establish work flow procedures for the submission, approval, and closure/archiving of projects, (2) set requirements for the promotion of Contributors to Committer status, as applicable, and (3) amend, adjust, refine and/or eliminate the roles of Contributors, and Committers, and create new roles, and publicly document any TSC roles, as it sees fit. The TSC may elect a TSC Chair, who will preside over meetings of the TSC and will serve until their resignation or replacement by the TSC. Responsibilities: The TSC will be responsible for all aspects of oversight relating to the Project, which may include: coordinating the technical direction of the Project; approving project or system proposals (including, but not limited to, incubation, deprecation, and changes to a sub-project\u2019s scope); organizing sub-projects and removing sub-projects; creating sub-committees or working groups to focus on cross-project technical issues and requirements; appointing representatives to work with other open source or open standards communities; establishing community norms, workflows, issuing releases, and security issue reporting policies; approving and implementing policies and processes for contributing (to be published in the CONTRIBUTING file) and coordinating with the series manager of the Project (as provided for in the Series Agreement, the \u201cSeries Manager\u201d) to resolve matters or concerns that may arise as set forth in Section 7 of this Charter; discussions, seeking consensus, and where necessary, voting on technical matters relating to the code base that affect multiple projects; and coordinating any marketing, events, or communications regarding the Project. TSC Voting While the Project aims to operate as a consensus-based community, if any TSC decision requires a vote to move the Project forward, the voting members of the TSC will vote on a one vote per voting member basis. Quorum for TSC meetings requires at least fifty percent of all voting members of the TSC to be present. The TSC may continue to meet if quorum is not met but will be prevented from making any decisions at the meeting. Except as provided in Section 7.iii. and 8.i, decisions by vote at a meeting require a majority vote of those in attendance, provided quorum is met. Decisions made by electronic vote without a meeting require a majority vote of all voting members of the TSC. In the event a vote cannot be resolved by the TSC, any voting member of the TSC may refer the matter to the Series Manager for assistance in reaching a resolution. Compliance with Policies This Charter is subject to the Series Agreement for the Project and the Operating Agreement of LF Projects. Contributors will comply with the policies of LF Projects as may be adopted and amended by LF Projects, including, without limitation the policies listed at https://lfprojects.org/policies/. The TSC may adopt a code of conduct (\u201cCoC\u201d) for the Project, which is subject to approval by the Series Manager. In the event that a Project-specific CoC has not been approved, the LF Projects Code of Conduct listed at https://lfprojects.org/policies will apply for all Collaborators in the Project. When amending or adopting any policy applicable to the Project, LF Projects will publish such policy, as to be amended or adopted, on its web site at least 30 days prior to such policy taking effect; provided, however, that in the case of any amendment of the Trademark Policy or Terms of Use of LF Projects, any such amendment is effective upon publication on LF Project\u2019s web site. All Collaborators must allow open participation from any individual or organization meeting the requirements for contributing under this Charter and any policies adopted for all Collaborators by the TSC, regardless of competitive interests. Put another way, the Project community must not seek to exclude any participant based on any criteria, requirement, or reason other than those that are reasonable and applied on a non-discriminatory basis to all Collaborators in the Project community. The Project will operate in a transparent, open, collaborative, and ethical manner at all times. The output of all Project discussions, proposals, timelines, decisions, and status should be made open and easily visible to all. Any potential violations of this requirement should be reported immediately to the Series Manager. Community Assets LF Projects will hold title to all trade or service marks used by the Project (\u201cProject Trademarks\u201d), whether based on common law or registered rights. Project Trademarks will be transferred and assigned to LF Projects to hold on behalf of the Project. Any use of any Project Trademarks by Collaborators in the Project will be in accordance with the license from LF Projects and inure to the benefit of LF Projects. The Project will, as permitted and in accordance with such license from LF Projects, develop and own all Project GitHub and social media accounts, and domain name registrations created by the Project community. Under no circumstances will LF Projects be expected or required to undertake any action on behalf of the Project that is inconsistent with the tax-exempt status or purpose, as applicable, of LFP, Inc. or LF Projects, LLC. General Rules and Operations. The Project will: engage in the work of the Project in a professional manner consistent with maintaining a cohesive community, while also maintaining the goodwill and esteem of LF Projects, LFP, Inc. and other partner organizations in the open source community; and respect the rights of all trademark owners, including any branding and trademark usage guidelines. Intellectual Property Policy Collaborators acknowledge that the copyright in all new contributions will be retained by the copyright holder as independent works of authorship and that no contributor or copyright holder will be required to assign copyrights to the Project. Except as described in Section 7.iii., all contributions to the Project are subject to the following: All new inbound code contributions to the Project must be made using the Apache License, Version 2.0, available at https://www.apache.org/licenses/LICENSE-2.0 (the \u201cProject License\u201d). All new inbound code contributions must also be accompanied by a Developer Certificate of Origin ( http://developercertificate.org ) sign-off in the source code system that is submitted through a TSC-approved contribution process which will bind the authorized contributor and, if not self-employed, their employer to the applicable license; All outbound code will be made available under the Project License. Documentation will be received and made available by the Project under the Creative Commons Attribution 4.0 International License (available at http://creativecommons.org/licenses/by/4.0/ ). The Project may seek to integrate and contribute back to other open source projects (\u201cUpstream Projects\u201d). In such cases, the Project will conform to all license requirements of the Upstream Projects, including dependencies, leveraged by the Project. Upstream Project code contributions not stored within the Project\u2019s main code repository will comply with the contribution process and license terms for the applicable Upstream Project. The TSC may approve the use of an alternative license or licenses for inbound or outbound contributions on an exception basis. To request an exception, please describe the contribution, the alternative open source license(s), and the justification for using an alternative open source license for the Project. License exceptions must be approved by a two-thirds vote of the entire TSC. Contributed files should contain license information, such as SPDX short form identifiers, indicating the open source license or licenses pertaining to the file. Amendments This charter may be amended by a two-thirds vote of the entire TSC and is subject to approval by LF Projects.","title":"Charter"},{"location":"governance/charter/#agama-community-projects","text":"","title":"Agama Community Projects"},{"location":"governance/charter/#technical-charter-the-charter-for-janssen-project-a-series-of-lf-projects-llc","text":"Adopted December 8, 2020 This Charter sets forth the responsibilities and procedures for technical contribution to, and oversight of, the Janssen open source project, which has been established as Janssen Project a Series of LF Projects, LLC (the \u201cProject\u201d). LF Projects, LLC (\u201cLF Projects\u201d) is a Delaware series limited liability company. All contributors (including committers, maintainers, and other technical positions) and other participants in the Project (collectively, \u201cCollaborators\u201d) must comply with the terms of this Charter. Mission and Scope of the Project The mission of the Project is to develop and maintain a cloud native identity and authorization platform that comprehensively implements OAuth, OpenID Connect and the User Managed Access protocol, while maintaining flexibility and horizontal scalability. The scope of the Project includes collaborative development under the Project License (as defined herein) supporting the mission, including documentation, testing, integration and the creation of other artifacts that aid the development, deployment, operation or adoption of the open source project. Technical Steering Committee The Technical Steering Committee (the \u201cTSC\u201d) will be responsible for all technical oversight of the open source Project. The TSC voting members are initially the Project\u2019s Committers. At the inception of the project, the Committers of the Project will be as set forth within the \u201cCONTRIBUTING\u201d file within the Project\u2019s code repository. The TSC may choose an alternative approach for determining the voting members of the TSC, and any such alternative approach will be documented in the CONTRIBUTING file. Any meetings of the Technical Steering Committee are intended to be open to the public, and can be conducted electronically, via teleconference, or in person. TSC projects generally will involve Contributors and Committers. The TSC may adopt or modify roles so long as the roles are documented in the CONTRIBUTING file. Unless otherwise documented: Contributors include anyone in the technical community that contributes code, documentation, or other technical artifacts to the Project; Committers are Contributors who have earned the ability to modify (\u201ccommit\u201d) source code, documentation or other technical artifacts in a project\u2019s repository; and A Contributor may become a Committer by a majority approval of the existing Committers. A Committer may be removed by a majority approval of the other existing Committers. Participation in the Project through becoming a Contributor and Committer is open to anyone so long as they abide by the terms of this Charter. The TSC may (1) establish work flow procedures for the submission, approval, and closure/archiving of projects, (2) set requirements for the promotion of Contributors to Committer status, as applicable, and (3) amend, adjust, refine and/or eliminate the roles of Contributors, and Committers, and create new roles, and publicly document any TSC roles, as it sees fit. The TSC may elect a TSC Chair, who will preside over meetings of the TSC and will serve until their resignation or replacement by the TSC. Responsibilities: The TSC will be responsible for all aspects of oversight relating to the Project, which may include: coordinating the technical direction of the Project; approving project or system proposals (including, but not limited to, incubation, deprecation, and changes to a sub-project\u2019s scope); organizing sub-projects and removing sub-projects; creating sub-committees or working groups to focus on cross-project technical issues and requirements; appointing representatives to work with other open source or open standards communities; establishing community norms, workflows, issuing releases, and security issue reporting policies; approving and implementing policies and processes for contributing (to be published in the CONTRIBUTING file) and coordinating with the series manager of the Project (as provided for in the Series Agreement, the \u201cSeries Manager\u201d) to resolve matters or concerns that may arise as set forth in Section 7 of this Charter; discussions, seeking consensus, and where necessary, voting on technical matters relating to the code base that affect multiple projects; and coordinating any marketing, events, or communications regarding the Project. TSC Voting While the Project aims to operate as a consensus-based community, if any TSC decision requires a vote to move the Project forward, the voting members of the TSC will vote on a one vote per voting member basis. Quorum for TSC meetings requires at least fifty percent of all voting members of the TSC to be present. The TSC may continue to meet if quorum is not met but will be prevented from making any decisions at the meeting. Except as provided in Section 7.iii. and 8.i, decisions by vote at a meeting require a majority vote of those in attendance, provided quorum is met. Decisions made by electronic vote without a meeting require a majority vote of all voting members of the TSC. In the event a vote cannot be resolved by the TSC, any voting member of the TSC may refer the matter to the Series Manager for assistance in reaching a resolution. Compliance with Policies This Charter is subject to the Series Agreement for the Project and the Operating Agreement of LF Projects. Contributors will comply with the policies of LF Projects as may be adopted and amended by LF Projects, including, without limitation the policies listed at https://lfprojects.org/policies/. The TSC may adopt a code of conduct (\u201cCoC\u201d) for the Project, which is subject to approval by the Series Manager. In the event that a Project-specific CoC has not been approved, the LF Projects Code of Conduct listed at https://lfprojects.org/policies will apply for all Collaborators in the Project. When amending or adopting any policy applicable to the Project, LF Projects will publish such policy, as to be amended or adopted, on its web site at least 30 days prior to such policy taking effect; provided, however, that in the case of any amendment of the Trademark Policy or Terms of Use of LF Projects, any such amendment is effective upon publication on LF Project\u2019s web site. All Collaborators must allow open participation from any individual or organization meeting the requirements for contributing under this Charter and any policies adopted for all Collaborators by the TSC, regardless of competitive interests. Put another way, the Project community must not seek to exclude any participant based on any criteria, requirement, or reason other than those that are reasonable and applied on a non-discriminatory basis to all Collaborators in the Project community. The Project will operate in a transparent, open, collaborative, and ethical manner at all times. The output of all Project discussions, proposals, timelines, decisions, and status should be made open and easily visible to all. Any potential violations of this requirement should be reported immediately to the Series Manager. Community Assets LF Projects will hold title to all trade or service marks used by the Project (\u201cProject Trademarks\u201d), whether based on common law or registered rights. Project Trademarks will be transferred and assigned to LF Projects to hold on behalf of the Project. Any use of any Project Trademarks by Collaborators in the Project will be in accordance with the license from LF Projects and inure to the benefit of LF Projects. The Project will, as permitted and in accordance with such license from LF Projects, develop and own all Project GitHub and social media accounts, and domain name registrations created by the Project community. Under no circumstances will LF Projects be expected or required to undertake any action on behalf of the Project that is inconsistent with the tax-exempt status or purpose, as applicable, of LFP, Inc. or LF Projects, LLC. General Rules and Operations. The Project will: engage in the work of the Project in a professional manner consistent with maintaining a cohesive community, while also maintaining the goodwill and esteem of LF Projects, LFP, Inc. and other partner organizations in the open source community; and respect the rights of all trademark owners, including any branding and trademark usage guidelines. Intellectual Property Policy Collaborators acknowledge that the copyright in all new contributions will be retained by the copyright holder as independent works of authorship and that no contributor or copyright holder will be required to assign copyrights to the Project. Except as described in Section 7.iii., all contributions to the Project are subject to the following: All new inbound code contributions to the Project must be made using the Apache License, Version 2.0, available at https://www.apache.org/licenses/LICENSE-2.0 (the \u201cProject License\u201d). All new inbound code contributions must also be accompanied by a Developer Certificate of Origin ( http://developercertificate.org ) sign-off in the source code system that is submitted through a TSC-approved contribution process which will bind the authorized contributor and, if not self-employed, their employer to the applicable license; All outbound code will be made available under the Project License. Documentation will be received and made available by the Project under the Creative Commons Attribution 4.0 International License (available at http://creativecommons.org/licenses/by/4.0/ ). The Project may seek to integrate and contribute back to other open source projects (\u201cUpstream Projects\u201d). In such cases, the Project will conform to all license requirements of the Upstream Projects, including dependencies, leveraged by the Project. Upstream Project code contributions not stored within the Project\u2019s main code repository will comply with the contribution process and license terms for the applicable Upstream Project. The TSC may approve the use of an alternative license or licenses for inbound or outbound contributions on an exception basis. To request an exception, please describe the contribution, the alternative open source license(s), and the justification for using an alternative open source license for the Project. License exceptions must be approved by a two-thirds vote of the entire TSC. Contributed files should contain license information, such as SPDX short form identifiers, indicating the open source license or licenses pertaining to the file. Amendments This charter may be amended by a two-thirds vote of the entire TSC and is subject to approval by LF Projects.","title":"Technical Charter (the \u201cCharter\u201d) for Janssen Project a Series of LF Projects, LLC"},{"location":"governance/copyright-notices/","tags":["governance","copyrights"],"text":"Copyrights # Ownership of Copyrights in Janssen Project Contributions # When source code, documentation and other content is contributed to the Janssen Project, the copyrights in those contributions remain owned by the original copyright holders. The copyrights are not assigned to the Janssen Project. Instead, they are licensed for distribution as part of the project. Whether a project uses a DCO or a CLA, the original copyright holders retain their copyrights. Copyright Notices # The Janssen Project does not require or recommend that every contributor include their copyright notice in contributed files. See below for more details on why not. Instead, we recommend using a more general statement in a form similar to the following: Copyright The Janssen Project Authors. Copyright The Janssen Project Contributors. Copyright Contributors to the Janssen Project. These statements are intended to communicate the following: - the work is copyrighted; - the contributors of the code licensed it, but retain ownership of their copyrights; and - it was licensed for distribution as part of the named project. By using a common format, the project avoids having to deal with names of copyright holders, years or ranges of years, and variations on the (c) symbol. This aims to minimize the burden on developers and maintainers as well as redistributors of the code. What if I want my copyright notice included? # Please note that it is not wrong , and it is acceptable, if a contributor wishes to keep their own copyright notices on their contributions. The above is a recommended format for ease of use, but is not mandated by the Janssen Project. If you are contributing on behalf of your employer, you may wish to discuss with your legal department about whether they will require you to include a copyright notice identifying them as the copyright holder in contributions. What about Third Party Code? # If a file only contains code that originates from a third party source who didn't contribute it themselves, then you would not want to add the notices above. (In a similar vein, you wouldn't add a notice identifying you as the copyright holder either, if you didn't own it.) Just preserve the existing copyright and license notices as they are. If, however, you add copyrightable content to a pre-existing file from another project, then at that point you could add a copyright notice similar to the one above. Don't Change Someone Else's Notice without their Permission # You should not change or remove someone else's copyright notice unless they have expressly permitted you to do so. This includes third parties' notices in pre-existing code. Why not list every copyright holder? # There are several reasons why the Janssen Project doesn't require or recommend trying to list every copyright holder for contributions to every file: Copyright notices are not mandatory in order for the contributor to retain ownership of their copyright. Copyright notices are rarely kept up to date as a file evolves, resulting in inaccurate statements. Trying to keep notices up to date, or to correct notices that have become inaccurate, increases the burden on developers without tangible benefit. Developers and maintainers often do not want to have to worry about e.g. whether a minor contribution (such as a typo fix) means that a new copyright notice should be added. Adding many different copyright notices may increase the burden on downstream distributors, if their license compliance processes involve reproducing notices. The specific individual or legal entity that owns the copyright might not be known to the contributor; it could be you, your employer, or some other entity.","title":"Copyright-notice"},{"location":"governance/copyright-notices/#copyrights","text":"","title":"Copyrights"},{"location":"governance/copyright-notices/#ownership-of-copyrights-in-janssen-project-contributions","text":"When source code, documentation and other content is contributed to the Janssen Project, the copyrights in those contributions remain owned by the original copyright holders. The copyrights are not assigned to the Janssen Project. Instead, they are licensed for distribution as part of the project. Whether a project uses a DCO or a CLA, the original copyright holders retain their copyrights.","title":"Ownership of Copyrights in Janssen Project Contributions"},{"location":"governance/copyright-notices/#copyright-notices","text":"The Janssen Project does not require or recommend that every contributor include their copyright notice in contributed files. See below for more details on why not. Instead, we recommend using a more general statement in a form similar to the following: Copyright The Janssen Project Authors. Copyright The Janssen Project Contributors. Copyright Contributors to the Janssen Project. These statements are intended to communicate the following: - the work is copyrighted; - the contributors of the code licensed it, but retain ownership of their copyrights; and - it was licensed for distribution as part of the named project. By using a common format, the project avoids having to deal with names of copyright holders, years or ranges of years, and variations on the (c) symbol. This aims to minimize the burden on developers and maintainers as well as redistributors of the code.","title":"Copyright Notices"},{"location":"governance/copyright-notices/#what-if-i-want-my-copyright-notice-included","text":"Please note that it is not wrong , and it is acceptable, if a contributor wishes to keep their own copyright notices on their contributions. The above is a recommended format for ease of use, but is not mandated by the Janssen Project. If you are contributing on behalf of your employer, you may wish to discuss with your legal department about whether they will require you to include a copyright notice identifying them as the copyright holder in contributions.","title":"What if I want my copyright notice included?"},{"location":"governance/copyright-notices/#what-about-third-party-code","text":"If a file only contains code that originates from a third party source who didn't contribute it themselves, then you would not want to add the notices above. (In a similar vein, you wouldn't add a notice identifying you as the copyright holder either, if you didn't own it.) Just preserve the existing copyright and license notices as they are. If, however, you add copyrightable content to a pre-existing file from another project, then at that point you could add a copyright notice similar to the one above.","title":"What about Third Party Code?"},{"location":"governance/copyright-notices/#dont-change-someone-elses-notice-without-their-permission","text":"You should not change or remove someone else's copyright notice unless they have expressly permitted you to do so. This includes third parties' notices in pre-existing code.","title":"Don't Change Someone Else's Notice without their Permission"},{"location":"governance/copyright-notices/#why-not-list-every-copyright-holder","text":"There are several reasons why the Janssen Project doesn't require or recommend trying to list every copyright holder for contributions to every file: Copyright notices are not mandatory in order for the contributor to retain ownership of their copyright. Copyright notices are rarely kept up to date as a file evolves, resulting in inaccurate statements. Trying to keep notices up to date, or to correct notices that have become inaccurate, increases the burden on developers without tangible benefit. Developers and maintainers often do not want to have to worry about e.g. whether a minor contribution (such as a typo fix) means that a new copyright notice should be added. Adding many different copyright notices may increase the burden on downstream distributors, if their license compliance processes involve reproducing notices. The specific individual or legal entity that owns the copyright might not be known to the contributor; it could be you, your employer, or some other entity.","title":"Why not list every copyright holder?"},{"location":"governance/triage/","tags":["governance","triage"],"text":"Janssen Triage Process and labels # Triage process is used to quickly screen and categorise new issues and PRs. Aim is to determine characteristics of new PRs/issues and take quick actions if possible. Triage process is a contineous process. As new issues/PRs come in, the community initiates discussions, add labels, ask for more details. This process does not wait for triage call or a meeting to be called. Community holds triage calls at a regular cadence. Triage calls are mainly utilised to discuss issue/PR where concensus is not yet reached and to pick up anything which is not yet triaged. It is encouraged to complete triage outside of triage call to improve velocity. Stages in triage process: # Name Description Needs triage When a new issue or PR is created, it is automatically labeled as needs-triage Ready for triage For all issues/PRs with needs-triage label, Maintainers/committers will assign a suitable active community member as owner to start evaluating issue/PR . Owner and community will evaluate merit and characteristics of issue/PR asynchronously and assign approapriate labels . When owner believes that sufficient details have been added and there is concensus, the owner would remove needs-triage label and apply label ready-for-triage . Triaged All issues/PRs with label ready-for-triage will be reviewed by core members of the community who have permission to add triaged label. Reviewer reviews issue/PR to check if the issue/PR is fully triaged and can be added to backlog without discussion on triage call. At this point, label triaged is added and label ready-for-triage is removed. We expect most of the isseus and PRs will be able to follow above path and quickly move out of triage process without waiting for triage call. Issues/PRs which still doesn't have triaged label, or has needs-discussion label, will be discussed during triage call. Labels # Github labels help us annotate issues/PRs with additional data. Janssen community uses labels, as detailed below, to communicate information and help making decisions about issues/PRs. Communication labels # These labels communicate status of current triage process for an issue/PR or indicate where community contribution is required. Most of communication labels would be replaced by other labels as triage process progresses and issue enters active development. For example, help wanted label would be removed once issue gets under active development and a community members takes ownership of the issue. Below is the list of labels which fall under this category: Label Indicates That needs-triage issue/PR needs triaging ready-for-triage that sufficient details has been added to the issue/PR in form of labels and is ready for triage review triaged Issue/PR is fully triaged needs-information Indicates that creator needs to add more information to issue/PR in order to be meaningfully triaged. When adding this label, also comment on the issue about what information is needed needs-discussion Indicates that issue needs discussion during triage meeting. When adding this label, also comment on the issue about what is it that demands discussion on this issue good first issue Indicates to the community that this issue suitable for first time contributor help wanted Indicates to the community that this issue has complexity which is suitable for contribution from any external contributor Metadata labels # These labels enrich issue/PR with metadata that will help during triage process and active development. These labels may not be removed from issue/PR, though value of labels may change as development progresses. For example, effort label may change from effort-3 to effort-8 as we understand issue in more detail. Below is the list of labels in this category: Label Indicates That Details comp-<module> Major Janssen components needing change in order to fix this issue/PR. For example, if this issue/PR would require change in files under fido2 module (under jans/fido2) , then apply comp-jans-fido2 label e.g comp-jans-auth-server , comp-jans-fido2 , area-<concern> Cross-cutting concerns involved in fixing this issue/PR. For example, if changes introduced by this issue/PR will need changes in documentation and need to be mentioned in release notes as well, then apply area-documentation , area-release-notes . area-CI should be applied when changes are required in artifacts relevent to automation, CI build infrastructure or release management process. An example of such artifact would be Github workflow scripts located under .github/workflows Labels available: area-documentation , area-release-notes , area-CI kind-bug Issue/PR is a bug in existing functionality kind-enhancement Issue/PR is an enhancement to an existing functionality kind-feature Issue/PR is new feature request kind-question Issue/PR is a question that can be addressed via pointers to documentation or user education kind-duplicate Issue/PR is a duplicate of existing issue/PR. Original issue should be mentioned in the comments using Duplicate of reply kind-dependencies Fix for Issue/PR pertains to external dependencies effort-1 Relative effort required for completion effort-2 Relative effort required for completion effort-3 Relative effort required for completion effort-5 Relative effort required for completion effort-8 Relative effort required for completion effort-13 Relative effort required for completion effort-21 Relative effort required for completion priority-0 An issue that causes a full outage, breakage, or major function unavailability for everyone, without any known workaround. The issue must be fixed immediately, taking precedence over all other work. Should receive updates at least once per day. priority-1 An issue that significantly impacts a large percentage of users; if there is a workaround it is partial or overly painful. The issue should be resolved before the next release. priority-2 The issue is important to a large percentage of users, with a workaround. Issues that are significantly ugly or painful (especially first-use or install-time issues). Issues with workarounds that would otherwise be P0 or P1. priority-3 An issue that is relevant to core functions, but does not impede progress. Important, but not urgent. priority-4 A relatively minor issue that is not relevant to core functions, or relates only to the attractiveness or pleasantness of use of the system. Good to have but not necessary changes/fixes. priority-5 The team acknowledges the request but (due to any number of reasons) does not plan to work on or accept contributions for this request. The issue remains open for discussion. Bot labeling methodology # The following labels are automatically assigned to Issues and PRs in GitHub following the schema provided in this file . Label Method comp-<module> The bot will detect from the title the component between the parentheses. feat(jans-auth-server): detect will result in the label comp-jans-auth-server added to the issue or PR. In a PR these labels are also detected by modified files path area-<concern> The bot will detect from the title the area appropriate. ci: adding something new to our ci will result in the label area-CI added to the issue or PR. In a PR these labels are also detected by modified files path. kind-bug The bot will detect this from the conventional commit written title kind-enhancement The bot will detect this from the conventional commit written title kind-feature The bot will detect this from the conventional commit written title kind-question Issue/PR is a question that can be addressed via pointers to documentation or user education kind-dependencies The bot will detect this from the conventional commit written title","title":"Triage"},{"location":"governance/triage/#janssen-triage-process-and-labels","text":"Triage process is used to quickly screen and categorise new issues and PRs. Aim is to determine characteristics of new PRs/issues and take quick actions if possible. Triage process is a contineous process. As new issues/PRs come in, the community initiates discussions, add labels, ask for more details. This process does not wait for triage call or a meeting to be called. Community holds triage calls at a regular cadence. Triage calls are mainly utilised to discuss issue/PR where concensus is not yet reached and to pick up anything which is not yet triaged. It is encouraged to complete triage outside of triage call to improve velocity.","title":"Janssen Triage Process and labels"},{"location":"governance/triage/#stages-in-triage-process","text":"Name Description Needs triage When a new issue or PR is created, it is automatically labeled as needs-triage Ready for triage For all issues/PRs with needs-triage label, Maintainers/committers will assign a suitable active community member as owner to start evaluating issue/PR . Owner and community will evaluate merit and characteristics of issue/PR asynchronously and assign approapriate labels . When owner believes that sufficient details have been added and there is concensus, the owner would remove needs-triage label and apply label ready-for-triage . Triaged All issues/PRs with label ready-for-triage will be reviewed by core members of the community who have permission to add triaged label. Reviewer reviews issue/PR to check if the issue/PR is fully triaged and can be added to backlog without discussion on triage call. At this point, label triaged is added and label ready-for-triage is removed. We expect most of the isseus and PRs will be able to follow above path and quickly move out of triage process without waiting for triage call. Issues/PRs which still doesn't have triaged label, or has needs-discussion label, will be discussed during triage call.","title":"Stages in triage process:"},{"location":"governance/triage/#labels","text":"Github labels help us annotate issues/PRs with additional data. Janssen community uses labels, as detailed below, to communicate information and help making decisions about issues/PRs.","title":"Labels"},{"location":"governance/triage/#communication-labels","text":"These labels communicate status of current triage process for an issue/PR or indicate where community contribution is required. Most of communication labels would be replaced by other labels as triage process progresses and issue enters active development. For example, help wanted label would be removed once issue gets under active development and a community members takes ownership of the issue. Below is the list of labels which fall under this category: Label Indicates That needs-triage issue/PR needs triaging ready-for-triage that sufficient details has been added to the issue/PR in form of labels and is ready for triage review triaged Issue/PR is fully triaged needs-information Indicates that creator needs to add more information to issue/PR in order to be meaningfully triaged. When adding this label, also comment on the issue about what information is needed needs-discussion Indicates that issue needs discussion during triage meeting. When adding this label, also comment on the issue about what is it that demands discussion on this issue good first issue Indicates to the community that this issue suitable for first time contributor help wanted Indicates to the community that this issue has complexity which is suitable for contribution from any external contributor","title":"Communication labels"},{"location":"governance/triage/#metadata-labels","text":"These labels enrich issue/PR with metadata that will help during triage process and active development. These labels may not be removed from issue/PR, though value of labels may change as development progresses. For example, effort label may change from effort-3 to effort-8 as we understand issue in more detail. Below is the list of labels in this category: Label Indicates That Details comp-<module> Major Janssen components needing change in order to fix this issue/PR. For example, if this issue/PR would require change in files under fido2 module (under jans/fido2) , then apply comp-jans-fido2 label e.g comp-jans-auth-server , comp-jans-fido2 , area-<concern> Cross-cutting concerns involved in fixing this issue/PR. For example, if changes introduced by this issue/PR will need changes in documentation and need to be mentioned in release notes as well, then apply area-documentation , area-release-notes . area-CI should be applied when changes are required in artifacts relevent to automation, CI build infrastructure or release management process. An example of such artifact would be Github workflow scripts located under .github/workflows Labels available: area-documentation , area-release-notes , area-CI kind-bug Issue/PR is a bug in existing functionality kind-enhancement Issue/PR is an enhancement to an existing functionality kind-feature Issue/PR is new feature request kind-question Issue/PR is a question that can be addressed via pointers to documentation or user education kind-duplicate Issue/PR is a duplicate of existing issue/PR. Original issue should be mentioned in the comments using Duplicate of reply kind-dependencies Fix for Issue/PR pertains to external dependencies effort-1 Relative effort required for completion effort-2 Relative effort required for completion effort-3 Relative effort required for completion effort-5 Relative effort required for completion effort-8 Relative effort required for completion effort-13 Relative effort required for completion effort-21 Relative effort required for completion priority-0 An issue that causes a full outage, breakage, or major function unavailability for everyone, without any known workaround. The issue must be fixed immediately, taking precedence over all other work. Should receive updates at least once per day. priority-1 An issue that significantly impacts a large percentage of users; if there is a workaround it is partial or overly painful. The issue should be resolved before the next release. priority-2 The issue is important to a large percentage of users, with a workaround. Issues that are significantly ugly or painful (especially first-use or install-time issues). Issues with workarounds that would otherwise be P0 or P1. priority-3 An issue that is relevant to core functions, but does not impede progress. Important, but not urgent. priority-4 A relatively minor issue that is not relevant to core functions, or relates only to the attractiveness or pleasantness of use of the system. Good to have but not necessary changes/fixes. priority-5 The team acknowledges the request but (due to any number of reasons) does not plan to work on or accept contributions for this request. The issue remains open for discussion.","title":"Metadata labels"},{"location":"governance/triage/#bot-labeling-methodology","text":"The following labels are automatically assigned to Issues and PRs in GitHub following the schema provided in this file . Label Method comp-<module> The bot will detect from the title the component between the parentheses. feat(jans-auth-server): detect will result in the label comp-jans-auth-server added to the issue or PR. In a PR these labels are also detected by modified files path area-<concern> The bot will detect from the title the area appropriate. ci: adding something new to our ci will result in the label area-CI added to the issue or PR. In a PR these labels are also detected by modified files path. kind-bug The bot will detect this from the conventional commit written title kind-enhancement The bot will detect this from the conventional commit written title kind-feature The bot will detect this from the conventional commit written title kind-question Issue/PR is a question that can be addressed via pointers to documentation or user education kind-dependencies The bot will detect this from the conventional commit written title","title":"Bot labeling methodology"},{"location":"script-catalog/","text":"Overview # Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"script-catalog/#overview","text":"Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"script-catalog/application_session/jans-session-audit/","text":"README Auditing Authentication Attempts # Name of the script in janssen (for example, using /opt/jans/jans-cli/config-cli.py or /opt/jans/jans-cli/config-cli-tui.py ): jans-session-audit . Script type: Application Sessions . The script generates audit report and creates record in DB. Also jansData field (in JSON format), that contains summary info of session audit will be generated. Following are the configuration properties for the jans-session-audit.py script ( jans-session-audit ): Parameters of the script: metric_audit_ou_name : Name of the audit OU. For example: jans_auth . metric_audit_conf_json_file_path : configuration file. For example: /etc/jans/conf/jans-session-audit.json File should contain follow properties: 1. event_types . Type of Session event(s), that will be saved in the DB: - AUTHENTICATED - UNAUTHENTICATED - UPDATED - GONE . audit_data . List of properties of Session ( SessionId ): userDn id outsideSid lastUsedAt authenticationTime state expirationDate sessionState permissionGranted permissionGrantedMap deviceSecrets . audit_cust_data . List of Extra Session Attributes ( SessionId ): auth_external_attributes opbs response_type client_id auth_step acr casa_logoUrl remote_ip scope acr_values casa_faviconUrl redirect_uri state casa_prefix casa_contextPath casa_extraCss . audit_cust_data Can contain only one attribute: sessionAttributes . The value ( sessionAttributes ) covers list of all Extra Session Attributes ( SessionId ): - auth_external_attributes - opbs - response_type - client_id - auth_step - acr - casa_logoUrl - remote_ip - scope - acr_values - casa_faviconUrl - redirect_uri - state - casa_prefix - casa_contextPath - casa_extraCss . Generated value jansData in JSON format will contain type of event (one of AUTHENTICATED , UNAUTHENTICATED , UPDATED , GONE ) and all properties/attributes defined by audit_data and audit_cust_data . Examples of /etc/jans/conf/jans-session-audit.json file: # { \"event_types\" : [ \"AUTHENTICATED\" , \"UNAUTHENTICATED\" , \"UPDATED\" , \"GONE\" ], \"audit_data\" : [ \"userDn\" , \"id\" , \"outsideSid\" , \"lastUsedAt\" , \"authenticationTime\" , \"state\" , \"expirationDate\" , \"sessionState\" , \"permissionGranted\" , \"permissionGrantedMap\" , \"deviceSecrets\" ], \"audit_cust_data\" : [ \"auth_external_attributes\" , \"opbs\" , \"response_type\" , \"client_id\" , \"auth_step\" , \"acr\" , \"casa_logoUrl\" , \"remote_ip\" , \"scope\" , \"acr_values\" , \"casa_faviconUrl\" , \"redirect_uri\" , \"state\" , \"casa_prefix\" , \"casa_contextPath\" , \"casa_extraCss\" ] } # { \"event_types\" : [ \"AUTHENTICATED\" , \"GONE\" ], \"audit_data\" : [ \"userDn\" , \"id\" , \"outsideSid\" , \"lastUsedAt\" , \"authenticationTime\" , \"state\" , \"expirationDate\" , \"sessionState\" , \"permissionGranted\" , \"permissionGrantedMap\" , \"deviceSecrets\" ], \"audit_cust_data\" : [ \"sessionAttributes\" ] } # log_level : level of log out in the file: /opt/jans/jetty/jans-auth/logs/jans-auth_script.log . Values: DEBUG INFO ERROR . Examples of generated jansData (JSON format): # /etc/jans/conf/jans-session-audit.json : { \"event_types\" : [ \"AUTHENTICATED\" , \"GONE\" ], \"audit_data\" : [ \"userDn\" , \"id\" , \"outsideSid\" , \"lastUsedAt\" , \"authenticationTime\" , \"state\" , \"expirationDate\" , \"sessionState\" , \"permissionGranted\" , \"permissionGrantedMap\" , \"deviceSecrets\" ], \"audit_cust_data\" : [ \"auth_external_attributes\" , \"opbs\" , \"response_type\" , \"client_id\" , \"auth_step\" , \"acr\" , \"casa_logoUrl\" , \"remote_ip\" , \"scope\" , \"acr_values\" , \"casa_faviconUrl\" , \"redirect_uri\" , \"state\" , \"casa_prefix\" , \"casa_contextPath\" , \"casa_extraCss\" ] } jansData : { \"type\" : \"AUTHENTICATED\" , \"authenticationTime\" : \"Sun Jul 16 10:17:48 CDT 2023\" , \"deviceSecrets\" : \"[]\" , \"permissionGranted\" : \"None\" , \"sessionState\" : \"bc85eaccff71f7145057405363f60bbc7d7d9733faed52a84ca79eaca56248c3.b8eafaa1-b08d-414c-b15d-883ca0eb363c\" , \"lastUsedAt\" : \"Sun Jul 16 10:17:48 CDT 2023\" , \"outsideSid\" : \"3f2e08a6-06c2-4444-a2dd-1368da4e22da\" , \"id\" : \"cb9a92d2-e1e7-4754-943e-354b976938bc\" , \"authState\" : \"authenticated\" , \"userDn\" : \"inum=32c32267-6f8a-4cac-88e4-643e3abcfe6c,ou=people,o=jans\" , \"expirationDate\" : \"Mon Jul 17 10:17:31 CDT 2023\" , \"permissionGrantedMap\" : { \"3000.79c97b57-0bf8-4d5b-8f9c-918eff96e8b8\" : false }, \"opbs\" : \"a8e3a9fb-f9f6-42b1-a42b-795f195407b7\" , \"responseType\" : \"code\" , \"clientId\" : \"3000.79c97b57-0bf8-4d5b-8f9c-918eff96e8b8\" , \"authStep\" : \"1\" , \"acr\" : \"casa\" , \"casaLogoUrl\" : \"/casa/images/logo.png\" , \"remoteIp\" : \"192.168.64.2\" , \"scope\" : \"openid profile user_name clientinfo\" , \"acrValues\" : \"casa\" , \"casaFaviconUrl\" : \"/casa/images/favicon.ico\" , \"redirectUri\" : \"https://gluu-1.smansoft.net/casa\" , \"state\" : \"Hr9ZeBdWVBQTyAMKna-GROKaLeqnpFkIngYImTmSIdk\" , \"casaPrefix\" : \"\" , \"casaContextPath\" : \"/casa\" , \"casaExtraCss\" : \"None\" , \"authExternalAttributes\" : [ { \"casa_logoUrl\" : \"java.lang.String\" }, { \"casa_faviconUrl\" : \"java.lang.String\" }, { \"casa_prefix\" : \"java.lang.String\" }, { \"casa_contextPath\" : \"java.lang.String\" } ] } # /etc/jans/conf/jans-session-audit.json : { \"event_types\" : [ \"AUTHENTICATED\" , \"GONE\" ], \"audit_data\" : [ ], \"audit_cust_data\" : [ ] } jansData : { \"type\" : \"GONE\" } # /etc/jans/conf/jans-session-audit.json : { \"event_types\" : [ \"AUTHENTICATED\" , \"GONE\" ], \"audit_data\" : [ \"userDn\" , \"id\" , \"state\" , \"permissionGrantedMap\" , \"deviceSecrets\" ], \"audit_cust_data\" : [ ] } jansData : { \"type\" : \"AUTHENTICATED\" , \"deviceSecrets\" : \"[]\" , \"id\" : \"8103b097-964c-4e66-8dea-c0edcfdb0438\" , \"authState\" : \"authenticated\" , \"userDn\" : \"inum=32c32267-6f8a-4cac-88e4-643e3abcfe6c,ou=people,o=jans\" , \"permissionGrantedMap\" : { \"3000.79c97b57-0bf8-4d5b-8f9c-918eff96e8b8\" : false } } # /etc/jans/conf/jans-session-audit.json : { \"event_types\" : [ \"AUTHENTICATED\" , \"GONE\" ], \"audit_data\" : [ \"userDn\" , \"id\" ], \"audit_cust_data\" : [ \"sessionAttributes\" ] } jansData : { \"type\" : \"AUTHENTICATED\" , \"id\" : \"426d82e8-3182-4f5e-9b1a-54fa1d9fc295\" , \"userDn\" : \"inum=32c32267-6f8a-4cac-88e4-643e3abcfe6c,ou=people,o=jans\" , \"opbs\" : \"c8727cf7-f136-4555-be86-5313039f874b\" , \"responseType\" : \"code\" , \"clientId\" : \"3000.79c97b57-0bf8-4d5b-8f9c-918eff96e8b8\" , \"authStep\" : \"1\" , \"acr\" : \"casa\" , \"casaLogoUrl\" : \"/casa/images/logo.png\" , \"remoteIp\" : \"192.168.64.2\" , \"scope\" : \"openid profile user_name clientinfo\" , \"acrValues\" : \"casa\" , \"casaFaviconUrl\" : \"/casa/images/favicon.ico\" , \"redirectUri\" : \"https://gluu-1.smansoft.net/casa\" , \"state\" : \"PEIbloYE4OUy4hkaT75uzDUuiRtQO0v5P_uy0q8iBss\" , \"casaPrefix\" : \"\" , \"casaContextPath\" : \"/casa\" , \"casaExtraCss\" : \"None\" , \"authExternalAttributes\" : [ { \"casa_logoUrl\" : \"java.lang.String\" }, { \"casa_faviconUrl\" : \"java.lang.String\" }, { \"casa_prefix\" : \"java.lang.String\" }, { \"casa_contextPath\" : \"java.lang.String\" } ] } #","title":"Index"},{"location":"script-catalog/application_session/jans-session-audit/#readme-auditing-authentication-attempts","text":"Name of the script in janssen (for example, using /opt/jans/jans-cli/config-cli.py or /opt/jans/jans-cli/config-cli-tui.py ): jans-session-audit . Script type: Application Sessions . The script generates audit report and creates record in DB. Also jansData field (in JSON format), that contains summary info of session audit will be generated. Following are the configuration properties for the jans-session-audit.py script ( jans-session-audit ): Parameters of the script: metric_audit_ou_name : Name of the audit OU. For example: jans_auth . metric_audit_conf_json_file_path : configuration file. For example: /etc/jans/conf/jans-session-audit.json File should contain follow properties: 1. event_types . Type of Session event(s), that will be saved in the DB: - AUTHENTICATED - UNAUTHENTICATED - UPDATED - GONE . audit_data . List of properties of Session ( SessionId ): userDn id outsideSid lastUsedAt authenticationTime state expirationDate sessionState permissionGranted permissionGrantedMap deviceSecrets . audit_cust_data . List of Extra Session Attributes ( SessionId ): auth_external_attributes opbs response_type client_id auth_step acr casa_logoUrl remote_ip scope acr_values casa_faviconUrl redirect_uri state casa_prefix casa_contextPath casa_extraCss . audit_cust_data Can contain only one attribute: sessionAttributes . The value ( sessionAttributes ) covers list of all Extra Session Attributes ( SessionId ): - auth_external_attributes - opbs - response_type - client_id - auth_step - acr - casa_logoUrl - remote_ip - scope - acr_values - casa_faviconUrl - redirect_uri - state - casa_prefix - casa_contextPath - casa_extraCss . Generated value jansData in JSON format will contain type of event (one of AUTHENTICATED , UNAUTHENTICATED , UPDATED , GONE ) and all properties/attributes defined by audit_data and audit_cust_data . Examples of /etc/jans/conf/jans-session-audit.json file:","title":"README Auditing Authentication Attempts"},{"location":"script-catalog/application_session/jans-session-audit/#_1","text":"{ \"event_types\" : [ \"AUTHENTICATED\" , \"UNAUTHENTICATED\" , \"UPDATED\" , \"GONE\" ], \"audit_data\" : [ \"userDn\" , \"id\" , \"outsideSid\" , \"lastUsedAt\" , \"authenticationTime\" , \"state\" , \"expirationDate\" , \"sessionState\" , \"permissionGranted\" , \"permissionGrantedMap\" , \"deviceSecrets\" ], \"audit_cust_data\" : [ \"auth_external_attributes\" , \"opbs\" , \"response_type\" , \"client_id\" , \"auth_step\" , \"acr\" , \"casa_logoUrl\" , \"remote_ip\" , \"scope\" , \"acr_values\" , \"casa_faviconUrl\" , \"redirect_uri\" , \"state\" , \"casa_prefix\" , \"casa_contextPath\" , \"casa_extraCss\" ] }","title":""},{"location":"script-catalog/application_session/jans-session-audit/#_2","text":"{ \"event_types\" : [ \"AUTHENTICATED\" , \"GONE\" ], \"audit_data\" : [ \"userDn\" , \"id\" , \"outsideSid\" , \"lastUsedAt\" , \"authenticationTime\" , \"state\" , \"expirationDate\" , \"sessionState\" , \"permissionGranted\" , \"permissionGrantedMap\" , \"deviceSecrets\" ], \"audit_cust_data\" : [ \"sessionAttributes\" ] }","title":""},{"location":"script-catalog/application_session/jans-session-audit/#_3","text":"log_level : level of log out in the file: /opt/jans/jetty/jans-auth/logs/jans-auth_script.log . Values: DEBUG INFO ERROR . Examples of generated jansData (JSON format):","title":""},{"location":"script-catalog/application_session/jans-session-audit/#_4","text":"/etc/jans/conf/jans-session-audit.json : { \"event_types\" : [ \"AUTHENTICATED\" , \"GONE\" ], \"audit_data\" : [ \"userDn\" , \"id\" , \"outsideSid\" , \"lastUsedAt\" , \"authenticationTime\" , \"state\" , \"expirationDate\" , \"sessionState\" , \"permissionGranted\" , \"permissionGrantedMap\" , \"deviceSecrets\" ], \"audit_cust_data\" : [ \"auth_external_attributes\" , \"opbs\" , \"response_type\" , \"client_id\" , \"auth_step\" , \"acr\" , \"casa_logoUrl\" , \"remote_ip\" , \"scope\" , \"acr_values\" , \"casa_faviconUrl\" , \"redirect_uri\" , \"state\" , \"casa_prefix\" , \"casa_contextPath\" , \"casa_extraCss\" ] } jansData : { \"type\" : \"AUTHENTICATED\" , \"authenticationTime\" : \"Sun Jul 16 10:17:48 CDT 2023\" , \"deviceSecrets\" : \"[]\" , \"permissionGranted\" : \"None\" , \"sessionState\" : \"bc85eaccff71f7145057405363f60bbc7d7d9733faed52a84ca79eaca56248c3.b8eafaa1-b08d-414c-b15d-883ca0eb363c\" , \"lastUsedAt\" : \"Sun Jul 16 10:17:48 CDT 2023\" , \"outsideSid\" : \"3f2e08a6-06c2-4444-a2dd-1368da4e22da\" , \"id\" : \"cb9a92d2-e1e7-4754-943e-354b976938bc\" , \"authState\" : \"authenticated\" , \"userDn\" : \"inum=32c32267-6f8a-4cac-88e4-643e3abcfe6c,ou=people,o=jans\" , \"expirationDate\" : \"Mon Jul 17 10:17:31 CDT 2023\" , \"permissionGrantedMap\" : { \"3000.79c97b57-0bf8-4d5b-8f9c-918eff96e8b8\" : false }, \"opbs\" : \"a8e3a9fb-f9f6-42b1-a42b-795f195407b7\" , \"responseType\" : \"code\" , \"clientId\" : \"3000.79c97b57-0bf8-4d5b-8f9c-918eff96e8b8\" , \"authStep\" : \"1\" , \"acr\" : \"casa\" , \"casaLogoUrl\" : \"/casa/images/logo.png\" , \"remoteIp\" : \"192.168.64.2\" , \"scope\" : \"openid profile user_name clientinfo\" , \"acrValues\" : \"casa\" , \"casaFaviconUrl\" : \"/casa/images/favicon.ico\" , \"redirectUri\" : \"https://gluu-1.smansoft.net/casa\" , \"state\" : \"Hr9ZeBdWVBQTyAMKna-GROKaLeqnpFkIngYImTmSIdk\" , \"casaPrefix\" : \"\" , \"casaContextPath\" : \"/casa\" , \"casaExtraCss\" : \"None\" , \"authExternalAttributes\" : [ { \"casa_logoUrl\" : \"java.lang.String\" }, { \"casa_faviconUrl\" : \"java.lang.String\" }, { \"casa_prefix\" : \"java.lang.String\" }, { \"casa_contextPath\" : \"java.lang.String\" } ] }","title":""},{"location":"script-catalog/application_session/jans-session-audit/#_5","text":"/etc/jans/conf/jans-session-audit.json : { \"event_types\" : [ \"AUTHENTICATED\" , \"GONE\" ], \"audit_data\" : [ ], \"audit_cust_data\" : [ ] } jansData : { \"type\" : \"GONE\" }","title":""},{"location":"script-catalog/application_session/jans-session-audit/#_6","text":"/etc/jans/conf/jans-session-audit.json : { \"event_types\" : [ \"AUTHENTICATED\" , \"GONE\" ], \"audit_data\" : [ \"userDn\" , \"id\" , \"state\" , \"permissionGrantedMap\" , \"deviceSecrets\" ], \"audit_cust_data\" : [ ] } jansData : { \"type\" : \"AUTHENTICATED\" , \"deviceSecrets\" : \"[]\" , \"id\" : \"8103b097-964c-4e66-8dea-c0edcfdb0438\" , \"authState\" : \"authenticated\" , \"userDn\" : \"inum=32c32267-6f8a-4cac-88e4-643e3abcfe6c,ou=people,o=jans\" , \"permissionGrantedMap\" : { \"3000.79c97b57-0bf8-4d5b-8f9c-918eff96e8b8\" : false } }","title":""},{"location":"script-catalog/application_session/jans-session-audit/#_7","text":"/etc/jans/conf/jans-session-audit.json : { \"event_types\" : [ \"AUTHENTICATED\" , \"GONE\" ], \"audit_data\" : [ \"userDn\" , \"id\" ], \"audit_cust_data\" : [ \"sessionAttributes\" ] } jansData : { \"type\" : \"AUTHENTICATED\" , \"id\" : \"426d82e8-3182-4f5e-9b1a-54fa1d9fc295\" , \"userDn\" : \"inum=32c32267-6f8a-4cac-88e4-643e3abcfe6c,ou=people,o=jans\" , \"opbs\" : \"c8727cf7-f136-4555-be86-5313039f874b\" , \"responseType\" : \"code\" , \"clientId\" : \"3000.79c97b57-0bf8-4d5b-8f9c-918eff96e8b8\" , \"authStep\" : \"1\" , \"acr\" : \"casa\" , \"casaLogoUrl\" : \"/casa/images/logo.png\" , \"remoteIp\" : \"192.168.64.2\" , \"scope\" : \"openid profile user_name clientinfo\" , \"acrValues\" : \"casa\" , \"casaFaviconUrl\" : \"/casa/images/favicon.ico\" , \"redirectUri\" : \"https://gluu-1.smansoft.net/casa\" , \"state\" : \"PEIbloYE4OUy4hkaT75uzDUuiRtQO0v5P_uy0q8iBss\" , \"casaPrefix\" : \"\" , \"casaContextPath\" : \"/casa\" , \"casaExtraCss\" : \"None\" , \"authExternalAttributes\" : [ { \"casa_logoUrl\" : \"java.lang.String\" }, { \"casa_faviconUrl\" : \"java.lang.String\" }, { \"casa_prefix\" : \"java.lang.String\" }, { \"casa_contextPath\" : \"java.lang.String\" } ] }","title":""},{"location":"script-catalog/application_session/jans-session-audit/#_8","text":"","title":""},{"location":"script-catalog/application_session/sample-script/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/application_session/sample-script/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/application_session/sample-script/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/application_session/sample-script/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/cache_refresh/sample-script/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/cache_refresh/sample-script/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/cache_refresh/sample-script/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/cache_refresh/sample-script/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/ciba/end-user-notification/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/ciba/end-user-notification/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/ciba/end-user-notification/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/ciba/end-user-notification/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/client_registration/OpenBanking/client-registration/","text":"Client Registration Interception Script # Overview # The Janssen Authorization Server uses interception scripts to enable you to customize the behavior of the OpenID Provider. During client registration, custom interception scripts can be used to implement custom business logic. For instance, data could be validated, extra client claims could be populated, scopes could be modified, or APIs could be called to determine whether the client should get registered at all. Configuration Prerequisites # A Janssen Authorization Server installation Client Registration script - included in the default Janssen OpenBanking distribution Setting configuration parameters Setting third party library (Jose4j) in classpath Adding the custom script # To add or update custom scripts, you can use either jans-cli or curl. jans-cli in interactive mode, option 13 enables you manage custom scripts. For more info, see the docs . jans-cli in command line argument mode is more conducive to scripting and automation. To display the available operations for custom scripts, use config-cli.py --info CustomScripts. See the docs for more info. To use curl see these docs Note You can normally find jans-cli.py in the /opt/jans/jans-cli/ folder. Configuring keys, certificates and SSA validation endpoints # The client registration custom script will use configuration parameters like SSA Validation endpoint, JWKS endpoints, keystores, trust stores etc which are listed in the tabular format below. Property Description Example clientScopes Used in SSA validation ASPSPReadAccess AuthoritiesReadAccess TPPReadAccess keyId Used in SSA Validation, kid used while encoding a JWT sent to token URL XkwIzWy44xWSlcWnMiEc8iq9s2G signingCert Used in SSA Validation, location of cert used for signing /etc/certs/obieDir/obsigning-axV5umCvTMBMjPwjFQgEvb_NO_UPLOAD.key signingKey Used in SSA Validation, location of key used for signing /etc/certs/obieDir/obsigning-axV5umCvTMBMjPwjFQgEvb_NO_UPLOAD.key trustKeyStore Used in SSA Validation, Trust store /etc/certs/obieDir/ob_transport_root.p12 trustKeyStorePassword Used in SSA Validation, Trust store Password, currently plaintext, but should be encrypted abcdefg transportKeyStore Used in SSA validation, a .p12 file presented by AS to the token URL /etc/certs/obieDir/axv5umcvtmbmjpwjfqgevb_openbanking_pre_production_issuing_ca_.p12 transportKeyStorePassword Used in SSA validation abcdefg tokenUrl Used in SSA validation to obtain token to query SCIM endpoint. Details here - https://openbanking.atlassian.net/wiki/spaces/DZ/pages/1150124033/Directory+2.0+Technical+Overview+v1.5#Directory2.0TechnicalOverviewv1.5-ManageDirectoryInformation https://matls-sso.openbankingtest.org.uk/as/token.oauth2 tppUrl Used in SSA validation to query SCIM endpoint. Details here - https://openbanking.atlassian.net/wiki/spaces/DZ/pages/1150124033/Directory+2.0+Technical+Overview+v1.5#Directory2.0TechnicalOverviewv1.5-ManageDirectoryInformation https://matls-api.openbankingtest.org.uk/scim/v2/OBThirdPartyProviders/ jwks_endpoint Used for signing software statement and request object for DCR https://keystore.openbankingtest.org.uk/keystore/openbanking.jwks Steps to add / edit / delete configuration parameters: Place a JSON file containing the above configuration parameters and the custom script in a folder. From this folder, run the following command: python3 jans-cli-linux-amd64.pyz --operation-id post-config-scripts --data /clientregistration.json \\ --cert-file jans_cli_client.crt --key-file jans_cli_client.key Adding Jose4j library in classpath # This script uses jose4j library for JavaScript object signing and encryption. If using the VM distribution: Download the jose4j-0.7.7.jar and Place in /opt/jans/jetty/jans-auth/custom/libs/ Change your current working directory to /opt/jans/jetty/jans-auth/webapps and edit jans-auth.xml to add this line: <Set name=\"extraClasspath\">/opt/jans/jetty/jans-auth/custom/libs/jose4j-0.7.7.jar</Set> Restart the Auth Server, systemctl restart jans-auth If using the cloud-native distribution: Download the jose4j-0.7.7.jar Create a ConfigMap containing the jar. kubectl create cm jose4j -n <gluu-namespace> --from-file = jose4j-0.7.7.jar Add the volume and volume mount to auth-server in your override.yaml helm configuration. volumes : - name : jose4j configMap : name : jose4j volumeMounts : - name : jose4j mountPath : \"/opt/jans/jetty/jans-auth/custom/libs/jose4j-0.7.7.jar\" subPath : jose4j-0.7.7.jar Run helm upgrade. helm upgrade gluu gluu/gluu -n <gluu-namespace> --version = 5 .0.0 -f override.yaml Understanding the Script # The Client Registration script is available The following are the mandatory functions which need to be implemented in order to perform registration: Create a class of the type ClientRegistrationType and initialize the script class ClientRegistration ( ClientRegistrationType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"Client registration. Initialization\" if ( not configurationAttributes . containsKey ( \"param\" )): print \"Client registration. Initialization. Property keyId is not specified\" return False else : self . param = configurationAttributes . get ( \"param\" ) . getValue2 () print \"Client registration. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"Client registration. Destroy\" print \"Client registration. Destroyed successfully\" return True The createClient method contains the main business logic, here the context refers to io.jans.as.server.service.external.context.DynamicClientRegistrationContext. It has several useful methods for SSA validations and options to create and throw custom exception (http status, error and error description): def createClient ( self , context ): # 1. obtain client id. certProperty contains the httpRequest.getHeader(\"X-ClientCert\"), inshort client certificate passed to the /register endpoint cert = CertUtils . x509CertificateFromPem ( configurationAttributes . get ( \"certProperty\" ) . getValue1 ()) cn = CertUtils . getCN ( cert ) # 2. validate SSA valid = self . validateSoftwareStatement ( cn ) if valid == False : print \"Invalid software statement\" return False print \"Client registration. cn: \" + cn client . setDn ( \"inum=\" + cn + \",ou=clients,o=jans\" ) # 3. Used to indicate that only this is a trusted client (note that consent is managed by Internal OP / consent app) client . setTrustedClient ( True ) client . setPersistClientAuthorizations ( False ) # 4. in order to run introspection script, assign it to run for this client client . setAccessTokenAsJwt ( True ) client . getAttributes () . setRunIntrospectionScriptBeforeJwtCreation ( True ) dnOfIntrospectionScript = \"inum=CABA-2222,ou=scripts,o=jans\" client . getAttributes () . getIntrospectionScripts () . add ( dnOfIntrospectionScript ) # 5. mandatory fields which should be set in the script client . setClientId ( cn ) client . setJwksUri ( Jwt . parse ( registerRequest . getSoftwareStatement ()) . getClaims () . getClaimAsString ( \"org_jwks_endpoint\" )) return True Miscellaneous mandatory functions Used for signing the software statement: def getSoftwareStatementJwks ( self , context ): return JwtUtil . getJSONWebKeys ( self . jwks_endpoint ) . toString () HMAC not applicable, return an empty string: def getDcrHmacSecret ( self , context ): return \"\" Used for signing the request object (DCR): def getDcrJwks ( self , context ): return JwtUtil . getJSONWebKeys ( self . jwks_endpoint ) . toString () An important method of DCR flow to update the client details The updateClient method This updateClient method is called when the PUT method is called on registration endpoint to update client details. This method should return True for successful update and to reject any update request this method should return False when the request fulfills the condition to reject it: def updateClient ( self , context ): print \"Client registration. UpdateClient method\" return True","title":"Client Registration Interception Script"},{"location":"script-catalog/client_registration/OpenBanking/client-registration/#client-registration-interception-script","text":"","title":"Client Registration Interception Script"},{"location":"script-catalog/client_registration/OpenBanking/client-registration/#overview","text":"The Janssen Authorization Server uses interception scripts to enable you to customize the behavior of the OpenID Provider. During client registration, custom interception scripts can be used to implement custom business logic. For instance, data could be validated, extra client claims could be populated, scopes could be modified, or APIs could be called to determine whether the client should get registered at all.","title":"Overview"},{"location":"script-catalog/client_registration/OpenBanking/client-registration/#configuration-prerequisites","text":"A Janssen Authorization Server installation Client Registration script - included in the default Janssen OpenBanking distribution Setting configuration parameters Setting third party library (Jose4j) in classpath","title":"Configuration Prerequisites"},{"location":"script-catalog/client_registration/OpenBanking/client-registration/#adding-the-custom-script","text":"To add or update custom scripts, you can use either jans-cli or curl. jans-cli in interactive mode, option 13 enables you manage custom scripts. For more info, see the docs . jans-cli in command line argument mode is more conducive to scripting and automation. To display the available operations for custom scripts, use config-cli.py --info CustomScripts. See the docs for more info. To use curl see these docs Note You can normally find jans-cli.py in the /opt/jans/jans-cli/ folder.","title":"Adding the custom script"},{"location":"script-catalog/client_registration/OpenBanking/client-registration/#configuring-keys-certificates-and-ssa-validation-endpoints","text":"The client registration custom script will use configuration parameters like SSA Validation endpoint, JWKS endpoints, keystores, trust stores etc which are listed in the tabular format below. Property Description Example clientScopes Used in SSA validation ASPSPReadAccess AuthoritiesReadAccess TPPReadAccess keyId Used in SSA Validation, kid used while encoding a JWT sent to token URL XkwIzWy44xWSlcWnMiEc8iq9s2G signingCert Used in SSA Validation, location of cert used for signing /etc/certs/obieDir/obsigning-axV5umCvTMBMjPwjFQgEvb_NO_UPLOAD.key signingKey Used in SSA Validation, location of key used for signing /etc/certs/obieDir/obsigning-axV5umCvTMBMjPwjFQgEvb_NO_UPLOAD.key trustKeyStore Used in SSA Validation, Trust store /etc/certs/obieDir/ob_transport_root.p12 trustKeyStorePassword Used in SSA Validation, Trust store Password, currently plaintext, but should be encrypted abcdefg transportKeyStore Used in SSA validation, a .p12 file presented by AS to the token URL /etc/certs/obieDir/axv5umcvtmbmjpwjfqgevb_openbanking_pre_production_issuing_ca_.p12 transportKeyStorePassword Used in SSA validation abcdefg tokenUrl Used in SSA validation to obtain token to query SCIM endpoint. Details here - https://openbanking.atlassian.net/wiki/spaces/DZ/pages/1150124033/Directory+2.0+Technical+Overview+v1.5#Directory2.0TechnicalOverviewv1.5-ManageDirectoryInformation https://matls-sso.openbankingtest.org.uk/as/token.oauth2 tppUrl Used in SSA validation to query SCIM endpoint. Details here - https://openbanking.atlassian.net/wiki/spaces/DZ/pages/1150124033/Directory+2.0+Technical+Overview+v1.5#Directory2.0TechnicalOverviewv1.5-ManageDirectoryInformation https://matls-api.openbankingtest.org.uk/scim/v2/OBThirdPartyProviders/ jwks_endpoint Used for signing software statement and request object for DCR https://keystore.openbankingtest.org.uk/keystore/openbanking.jwks Steps to add / edit / delete configuration parameters: Place a JSON file containing the above configuration parameters and the custom script in a folder. From this folder, run the following command: python3 jans-cli-linux-amd64.pyz --operation-id post-config-scripts --data /clientregistration.json \\ --cert-file jans_cli_client.crt --key-file jans_cli_client.key","title":"Configuring keys, certificates and SSA validation endpoints"},{"location":"script-catalog/client_registration/OpenBanking/client-registration/#adding-jose4j-library-in-classpath","text":"This script uses jose4j library for JavaScript object signing and encryption. If using the VM distribution: Download the jose4j-0.7.7.jar and Place in /opt/jans/jetty/jans-auth/custom/libs/ Change your current working directory to /opt/jans/jetty/jans-auth/webapps and edit jans-auth.xml to add this line: <Set name=\"extraClasspath\">/opt/jans/jetty/jans-auth/custom/libs/jose4j-0.7.7.jar</Set> Restart the Auth Server, systemctl restart jans-auth If using the cloud-native distribution: Download the jose4j-0.7.7.jar Create a ConfigMap containing the jar. kubectl create cm jose4j -n <gluu-namespace> --from-file = jose4j-0.7.7.jar Add the volume and volume mount to auth-server in your override.yaml helm configuration. volumes : - name : jose4j configMap : name : jose4j volumeMounts : - name : jose4j mountPath : \"/opt/jans/jetty/jans-auth/custom/libs/jose4j-0.7.7.jar\" subPath : jose4j-0.7.7.jar Run helm upgrade. helm upgrade gluu gluu/gluu -n <gluu-namespace> --version = 5 .0.0 -f override.yaml","title":"Adding Jose4j library in classpath"},{"location":"script-catalog/client_registration/OpenBanking/client-registration/#understanding-the-script","text":"The Client Registration script is available The following are the mandatory functions which need to be implemented in order to perform registration: Create a class of the type ClientRegistrationType and initialize the script class ClientRegistration ( ClientRegistrationType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"Client registration. Initialization\" if ( not configurationAttributes . containsKey ( \"param\" )): print \"Client registration. Initialization. Property keyId is not specified\" return False else : self . param = configurationAttributes . get ( \"param\" ) . getValue2 () print \"Client registration. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"Client registration. Destroy\" print \"Client registration. Destroyed successfully\" return True The createClient method contains the main business logic, here the context refers to io.jans.as.server.service.external.context.DynamicClientRegistrationContext. It has several useful methods for SSA validations and options to create and throw custom exception (http status, error and error description): def createClient ( self , context ): # 1. obtain client id. certProperty contains the httpRequest.getHeader(\"X-ClientCert\"), inshort client certificate passed to the /register endpoint cert = CertUtils . x509CertificateFromPem ( configurationAttributes . get ( \"certProperty\" ) . getValue1 ()) cn = CertUtils . getCN ( cert ) # 2. validate SSA valid = self . validateSoftwareStatement ( cn ) if valid == False : print \"Invalid software statement\" return False print \"Client registration. cn: \" + cn client . setDn ( \"inum=\" + cn + \",ou=clients,o=jans\" ) # 3. Used to indicate that only this is a trusted client (note that consent is managed by Internal OP / consent app) client . setTrustedClient ( True ) client . setPersistClientAuthorizations ( False ) # 4. in order to run introspection script, assign it to run for this client client . setAccessTokenAsJwt ( True ) client . getAttributes () . setRunIntrospectionScriptBeforeJwtCreation ( True ) dnOfIntrospectionScript = \"inum=CABA-2222,ou=scripts,o=jans\" client . getAttributes () . getIntrospectionScripts () . add ( dnOfIntrospectionScript ) # 5. mandatory fields which should be set in the script client . setClientId ( cn ) client . setJwksUri ( Jwt . parse ( registerRequest . getSoftwareStatement ()) . getClaims () . getClaimAsString ( \"org_jwks_endpoint\" )) return True Miscellaneous mandatory functions Used for signing the software statement: def getSoftwareStatementJwks ( self , context ): return JwtUtil . getJSONWebKeys ( self . jwks_endpoint ) . toString () HMAC not applicable, return an empty string: def getDcrHmacSecret ( self , context ): return \"\" Used for signing the request object (DCR): def getDcrJwks ( self , context ): return JwtUtil . getJSONWebKeys ( self . jwks_endpoint ) . toString () An important method of DCR flow to update the client details The updateClient method This updateClient method is called when the PUT method is called on registration endpoint to update client details. This method should return True for successful update and to reject any update request this method should return False when the request fulfills the condition to reject it: def updateClient ( self , context ): print \"Client registration. UpdateClient method\" return True","title":"Understanding the Script"},{"location":"script-catalog/client_registration/sample-script/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/client_registration/sample-script/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/client_registration/sample-script/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/client_registration/sample-script/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/config_api/config-api-interception/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/config_api/config-api-interception/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/config_api/config-api-interception/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/config_api/config-api-interception/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/consent_gathering/sample-script/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/consent_gathering/sample-script/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/consent_gathering/sample-script/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/consent_gathering/sample-script/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/discovery/discovery/","text":"Discovery Script Guide # Overview # The Authorization Server Metadata spec RFC8414 (also known as OAuth Discovery) defines a format for clients to use to look up the information needed to interact with a particular OAuth server. This includes things like:- - finding the authorization endpoint, - listing the supported scopes and client authentication mechanisms. The \"OpenID Connect Discovery 1.0\" defines the metadata in such a way that is compatible with OpenID Connect Discovery while being applicable to a wider set of OAuth 2.0 use cases. This is intentionally parallel to the way that \"OAuth 2.0 Dynamic Client Registration Protocol\" RFC7591 defines the dynamic client registration mechanisms \"OpenID Connect Dynamic Client Registration 1.0 OpenID.Registration so that is compatible with it. The metadata for an authorization server is retrieved from a know location as a JSON object RFC8259 , which defines its endpoint locations and authorization server capabilities. This metadata can be passed either:- - in a self-asserted fashion from the server origin via HTTPS - or as a set of signed metadata values represented as claims in a JSON Web Token JWT . In the JWT case, the issuer is vouching for the validity of the data coming from the authorization server. This is analogous to the role that the Software Statement plays in OAuth Dynamic Client Registration RFC7591. Note: The means by which the client chooses an authorization server is out of scope. In some cases, the issuer identifier may be manually configured into the client. In other cases, it may be dynamically discovered, for instance, through the use of WebFinger . Discovery script allows to modify response of OpenID Connect Discovery RFC8414 . Methods # The discovery interception script extends the base script type with the methods - Method Method description def init(self, customScript, configurationAttributes) Inherited Method This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) Inherited Method This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) Inherited Method The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10 def modifyResponse(self, responseAsJsonObject, context) This method is called after discovery response is ready. This method can modify discovery response. responseAsJsonObject is org.codehaus.jettison.json.JSONObject context is io.jans.as.server.model.common.ExecutionContext The configurationAttributes parameter is java.util.Map<String, SimpleCustomProperty> . configurationAttributes = new HashMap < String , SimpleCustomProperty > () ; configurationAttributes . put ( \"Location Type\" , new SimpleCustomProperty ( \"location_type\" , \"ldap\" , \"Storage Location for the script\" )) ; Snippet # # Returns boolean , true - apply discovery method , false - ignore it . # This method is called after discovery response is ready . This method can modify discovery response . # Note : # responseAsJsonObject - is org . codehaus . jettison . json . JSONObject , you can use any method to manipulate json # context is reference of io . jans . as . server . model . common . ExecutionContext ( in https : // github . com / JanssenProject project ) def modifyResponse ( self , responseAsJsonObject , context ) : responseAsJsonObject . accumulate ( \"key_from_script\" , \"value_from_script\" ) return True Common Use Cases # Script Type: Python # Add a value (Client IP Address) and Filter out a value from Discovery Response # The sample code snippet shows how to add and filter out a value from Discovery Response. Script Type: Java # Add a value (Client IP Address) and Filter out a value from Discovery Response # The sample code snippet shows how to add and filter out a value from Discovery Response.","title":"Discovery Script Guide"},{"location":"script-catalog/discovery/discovery/#discovery-script-guide","text":"","title":"Discovery Script Guide"},{"location":"script-catalog/discovery/discovery/#overview","text":"The Authorization Server Metadata spec RFC8414 (also known as OAuth Discovery) defines a format for clients to use to look up the information needed to interact with a particular OAuth server. This includes things like:- - finding the authorization endpoint, - listing the supported scopes and client authentication mechanisms. The \"OpenID Connect Discovery 1.0\" defines the metadata in such a way that is compatible with OpenID Connect Discovery while being applicable to a wider set of OAuth 2.0 use cases. This is intentionally parallel to the way that \"OAuth 2.0 Dynamic Client Registration Protocol\" RFC7591 defines the dynamic client registration mechanisms \"OpenID Connect Dynamic Client Registration 1.0 OpenID.Registration so that is compatible with it. The metadata for an authorization server is retrieved from a know location as a JSON object RFC8259 , which defines its endpoint locations and authorization server capabilities. This metadata can be passed either:- - in a self-asserted fashion from the server origin via HTTPS - or as a set of signed metadata values represented as claims in a JSON Web Token JWT . In the JWT case, the issuer is vouching for the validity of the data coming from the authorization server. This is analogous to the role that the Software Statement plays in OAuth Dynamic Client Registration RFC7591. Note: The means by which the client chooses an authorization server is out of scope. In some cases, the issuer identifier may be manually configured into the client. In other cases, it may be dynamically discovered, for instance, through the use of WebFinger . Discovery script allows to modify response of OpenID Connect Discovery RFC8414 .","title":"Overview"},{"location":"script-catalog/discovery/discovery/#methods","text":"The discovery interception script extends the base script type with the methods - Method Method description def init(self, customScript, configurationAttributes) Inherited Method This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) Inherited Method This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) Inherited Method The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10 def modifyResponse(self, responseAsJsonObject, context) This method is called after discovery response is ready. This method can modify discovery response. responseAsJsonObject is org.codehaus.jettison.json.JSONObject context is io.jans.as.server.model.common.ExecutionContext The configurationAttributes parameter is java.util.Map<String, SimpleCustomProperty> . configurationAttributes = new HashMap < String , SimpleCustomProperty > () ; configurationAttributes . put ( \"Location Type\" , new SimpleCustomProperty ( \"location_type\" , \"ldap\" , \"Storage Location for the script\" )) ;","title":"Methods"},{"location":"script-catalog/discovery/discovery/#snippet","text":"# Returns boolean , true - apply discovery method , false - ignore it . # This method is called after discovery response is ready . This method can modify discovery response . # Note : # responseAsJsonObject - is org . codehaus . jettison . json . JSONObject , you can use any method to manipulate json # context is reference of io . jans . as . server . model . common . ExecutionContext ( in https : // github . com / JanssenProject project ) def modifyResponse ( self , responseAsJsonObject , context ) : responseAsJsonObject . accumulate ( \"key_from_script\" , \"value_from_script\" ) return True","title":"Snippet"},{"location":"script-catalog/discovery/discovery/#common-use-cases","text":"","title":"Common Use Cases"},{"location":"script-catalog/discovery/discovery/#script-type-python","text":"","title":"Script Type: Python"},{"location":"script-catalog/discovery/discovery/#add-a-value-client-ip-address-and-filter-out-a-value-from-discovery-response","text":"The sample code snippet shows how to add and filter out a value from Discovery Response.","title":"Add a value (Client IP Address) and Filter out a value from Discovery Response"},{"location":"script-catalog/discovery/discovery/#script-type-java","text":"","title":"Script Type: Java"},{"location":"script-catalog/discovery/discovery/#add-a-value-client-ip-address-and-filter-out-a-value-from-discovery-response_1","text":"The sample code snippet shows how to add and filter out a value from Discovery Response.","title":"Add a value (Client IP Address) and Filter out a value from Discovery Response"},{"location":"script-catalog/dynamic_scope/","text":"Overview # Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"script-catalog/dynamic_scope/#overview","text":"Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"script-catalog/dynamic_scope/dynamic-permission/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/dynamic_scope/dynamic-permission/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/dynamic_scope/dynamic-permission/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/dynamic_scope/dynamic-permission/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/dynamic_scope/memberof-attribute/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/dynamic_scope/memberof-attribute/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/dynamic_scope/memberof-attribute/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/dynamic_scope/memberof-attribute/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/dynamic_scope/org-name/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/dynamic_scope/org-name/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/dynamic_scope/org-name/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/dynamic_scope/org-name/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/dynamic_scope/session-parameter/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/dynamic_scope/session-parameter/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/dynamic_scope/session-parameter/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/dynamic_scope/session-parameter/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/dynamic_scope/work-phone/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/dynamic_scope/work-phone/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/dynamic_scope/work-phone/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/dynamic_scope/work-phone/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/end_session/end-session/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/end_session/end-session/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/end_session/end-session/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/end_session/end-session/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/fido2_extension/","tags":["administration","developer","scripts","fido2","Fido2Interception"],"text":"Overview # FIDO2 implements attestation and assertion with next endpoints: https://<myjans-server>/jans-fido2/restv1/attestation/options (register) https://<myjans-server>/jans-fido2/restv1/attestation/result (verify registration) https://<myjans-server>/jans-fido2/restv1/assertion/options (authenticate) https://<myjans-server>/jans-fido2/restv1/assertion/result (verify authentication) each one can be customized just in the moment the endpoint is called, just before to execute the method as usual. You could execute validations, verifications, and modify the params received. Interface # The Fido2 interception script implements the Fido2Interception interface. This extends methods from the base script type in addition to adding new methods: Inherited Methods # Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10 New Methods # Method header Method description def interceptRegisterAttestation(self, paramAsJsonNode, context) This method is called in Attestation register endpoint, just before to start the registration process. Method 'throwBadRequestException' could be used to create a BadRequest Exception Response. def interceptVerifyAttestation(self, paramAsJsonNode, context) This method is called in Attestation verify enpoint, just before to start the verification process. Method 'throwBadRequestException' could be used to create a BadRequest Exception Response. def interceptAuthenticateAssertion(self, paramAsJsonNode, context) This method is called in Assertion authenticate enpoint, just before to start the authentication process. Method 'throwBadRequestException' could be used to create a BadRequest Exception Response. def interceptVerifyAssertion(self, paramAsJsonNode, context) This method is called in Assertion verify enpoint, just before to start the verification process. Method 'throwBadRequestException' could be used to create a BadRequest Exception Response. def throwBadRequestException(self, title, message, context) This method could be used to create a BadRequest Exception Response with a title and description message. Objects # Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes SimpleCustomProperty Map of configuration properties. Reference context Reference Use case: Dummy Fido2 Interception Form # This script has been adapted from the Jans Fido2 sample sample fido2 interception script . Script Type: Python # # Janssen Project software is available under the Apache 2.0 License (2004). See http://www.apache.org/licenses/ for full text. # Copyright (c) 2023, Janssen Project # from io.jans.service.cdi.util import CdiUtil from io.jans.model.custom.script.type.fido2 import Fido2InterceptionType from io.jans.fido2.service.operation import AttestationService from io.jans.fido2.service.operation import AssertionService from io.jans.util import StringHelper from org.json import JSONObject from com.fasterxml.jackson.databind import JsonNode from org.apache.logging.log4j import ThreadContext from io.jans.fido2.model.u2f.error import Fido2ErrorResponseFactory from io.jans.fido2.model.u2f.error import Fido2ErrorResponseType from io.jans.as.model.config import Constants from java.lang import String class Fido2Interception ( Fido2InterceptionType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"Fido2Interception. Initialization\" print \"Fido2Interception. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"Fido2Interception. Destroy\" print \"Fido2Interception. Destroyed successfully\" return True def getApiVersion ( self ): return 11 #To generate a bad request WebApplicationException giving a message. This method is to be called inside (interceptRegisterAttestation, interceptVerifyAttestation, interceptAuthenticateAssertion, interceptVerifyAssertion) def throwBadRequestException ( self , title , message , context ): print \"Fido2Interception. setting Bad request exception\" errorClaimException = Fido2ErrorResponseFactory . createBadRequestException ( Fido2ErrorResponseType . BAD_REQUEST_INTERCEPTION , title , message , ThreadContext . get ( Constants . CORRELATION_ID_HEADER )) context . setWebApplicationException ( errorClaimException ) #This method is called in Attestation register endpoint, just before to start the registration process def interceptRegisterAttestation ( self , paramAsJsonNode , context ): print \"Fido2Interception. interceptRegisterAttestation\" attestationService = CdiUtil . bean ( AttestationService ) return True #This method is called in Attestation verify enpoint, just before to start the verification process def interceptVerifyAttestation ( self , paramAsJsonNode , context ): print \"Fido2Interception. interceptVerifyAttestation\" attestationService = CdiUtil . bean ( AttestationService ) return True #This method is called in Assertion authenticate enpoint, just before to start the authentication process def interceptAuthenticateAssertion ( self , paramAsJsonNode , context ): print \"Fido2Interception. interceptAuthenticateAssertion\" assertionService = CdiUtil . bean ( AssertionService ) print \"Fido2Interception. printing username:\" print paramAsJsonNode . get ( \"username\" ) . asText () if paramAsJsonNode . get ( \"username\" ) . asText () == 'test_user' : self . throwBadRequestException ( \"Fido2Interception interceptAuthenticateAssertion : test_user\" , \"Description Error from script : test_user\" , context ) return True #This method is called in Assertion verify enpoint, just before to start the verification process def interceptVerifyAssertion ( self , paramAsJsonNode , context ): print \"Fido2Interception. interceptVerifyAssertion\" assertionService = CdiUtil . bean ( AssertionService ) return True Script Type: Java # import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.model.custom.script.type.auth.Fido2InterceptionType ; import io.jans.service.custom.script.CustomScriptManager ; import io.jans.fido2.service.external.context.ExternalFido2InterceptionContext ; import com.fasterxml.jackson.databind.JsonNode ; import org.apache.logging.log4j.ThreadContext ; import org.jboss.resteasy.spi.NoLogWebApplicationException ; import java.util.Map ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class Fido2Interception implements Fido2InterceptionType { private static final Logger log = LoggerFactory . getLogger ( CustomScriptManager . class ); @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Fido2Interception Script. Initializing...\" ); log . info ( \"Fido2Interception Script. Initialized\" ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Fido2Interception Script. Initializing...\" ); log . info ( \"Fido2Interception Script. Initialized\" ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Fido2Interception Script. Destroying...\" ); log . info ( \"Fido2Interception Script. Destroyed.\" ); return true ; } @Override public int getApiVersion () { return 11 ; } @Override public boolean interceptRegisterAttestation ( JsonNode paramsAsJsonNode , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception Script. Attestation Register...\" ); return true ; } @Override public boolean interceptVerifyAttestation ( JsonNode paramsAsJsonNode , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception Script. Attestation Register...\" ); return true ; } @Override public boolean interceptAuthenticateAssertion ( JsonNode paramsAsJsonNode , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception Script. Assertion Authenticate...\" ); JsonNode jsonNodeUser = paramsAsJsonNode . get ( \"username\" ); if ( jsonNodeUser != null ) { log . info ( \"Fido2Interception. printing username: {}\" , jsonNodeUser . asText ()); if ( jsonNodeUser . asText (). equals ( \"test_user\" )) { throwBadRequestException ( \"Fido2Interception interceptAuthenticateAssertion : test_user\" , \"Description Error from script : test_user\" , context ); } } return true ; } @Override public boolean interceptVerifyAssertion ( JsonNode paramsAsJsonNode , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception Script. Assertion Verify...\" ); return true ; } private void throwBadRequestException ( String title , String message , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception. setting Bad request exception\" ); WebApplicationException errorClaimException = Fido2ErrorResponseFactory . createBadRequestException ( Fido2ErrorResponseType . BAD_REQUEST_INTERCEPTION , title , message , ThreadContext . get ( Constants . CORRELATION_ID_HEADER )); context . setWebApplicationException (( NoLogWebApplicationException ) errorClaimException ); } }","title":"Index"},{"location":"script-catalog/fido2_extension/#overview","text":"FIDO2 implements attestation and assertion with next endpoints: https://<myjans-server>/jans-fido2/restv1/attestation/options (register) https://<myjans-server>/jans-fido2/restv1/attestation/result (verify registration) https://<myjans-server>/jans-fido2/restv1/assertion/options (authenticate) https://<myjans-server>/jans-fido2/restv1/assertion/result (verify authentication) each one can be customized just in the moment the endpoint is called, just before to execute the method as usual. You could execute validations, verifications, and modify the params received.","title":"Overview"},{"location":"script-catalog/fido2_extension/#interface","text":"The Fido2 interception script implements the Fido2Interception interface. This extends methods from the base script type in addition to adding new methods:","title":"Interface"},{"location":"script-catalog/fido2_extension/#inherited-methods","text":"Method header Method description def init(self, customScript, configurationAttributes) This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. Only include the customScript variable if the value for getApiVersion is greater than 10","title":"Inherited Methods"},{"location":"script-catalog/fido2_extension/#new-methods","text":"Method header Method description def interceptRegisterAttestation(self, paramAsJsonNode, context) This method is called in Attestation register endpoint, just before to start the registration process. Method 'throwBadRequestException' could be used to create a BadRequest Exception Response. def interceptVerifyAttestation(self, paramAsJsonNode, context) This method is called in Attestation verify enpoint, just before to start the verification process. Method 'throwBadRequestException' could be used to create a BadRequest Exception Response. def interceptAuthenticateAssertion(self, paramAsJsonNode, context) This method is called in Assertion authenticate enpoint, just before to start the authentication process. Method 'throwBadRequestException' could be used to create a BadRequest Exception Response. def interceptVerifyAssertion(self, paramAsJsonNode, context) This method is called in Assertion verify enpoint, just before to start the verification process. Method 'throwBadRequestException' could be used to create a BadRequest Exception Response. def throwBadRequestException(self, title, message, context) This method could be used to create a BadRequest Exception Response with a title and description message.","title":"New Methods"},{"location":"script-catalog/fido2_extension/#objects","text":"Object name Object description customScript The custom script object. Reference configurationAttributes configurationProperties passed in when adding custom script. Map<String, SimpleCustomProperty> configurationAttributes SimpleCustomProperty Map of configuration properties. Reference context Reference","title":"Objects"},{"location":"script-catalog/fido2_extension/#use-case-dummy-fido2-interception-form","text":"This script has been adapted from the Jans Fido2 sample sample fido2 interception script .","title":"Use case: Dummy Fido2 Interception Form"},{"location":"script-catalog/fido2_extension/#script-type-python","text":"# Janssen Project software is available under the Apache 2.0 License (2004). See http://www.apache.org/licenses/ for full text. # Copyright (c) 2023, Janssen Project # from io.jans.service.cdi.util import CdiUtil from io.jans.model.custom.script.type.fido2 import Fido2InterceptionType from io.jans.fido2.service.operation import AttestationService from io.jans.fido2.service.operation import AssertionService from io.jans.util import StringHelper from org.json import JSONObject from com.fasterxml.jackson.databind import JsonNode from org.apache.logging.log4j import ThreadContext from io.jans.fido2.model.u2f.error import Fido2ErrorResponseFactory from io.jans.fido2.model.u2f.error import Fido2ErrorResponseType from io.jans.as.model.config import Constants from java.lang import String class Fido2Interception ( Fido2InterceptionType ): def __init__ ( self , currentTimeMillis ): self . currentTimeMillis = currentTimeMillis def init ( self , customScript , configurationAttributes ): print \"Fido2Interception. Initialization\" print \"Fido2Interception. Initialized successfully\" return True def destroy ( self , configurationAttributes ): print \"Fido2Interception. Destroy\" print \"Fido2Interception. Destroyed successfully\" return True def getApiVersion ( self ): return 11 #To generate a bad request WebApplicationException giving a message. This method is to be called inside (interceptRegisterAttestation, interceptVerifyAttestation, interceptAuthenticateAssertion, interceptVerifyAssertion) def throwBadRequestException ( self , title , message , context ): print \"Fido2Interception. setting Bad request exception\" errorClaimException = Fido2ErrorResponseFactory . createBadRequestException ( Fido2ErrorResponseType . BAD_REQUEST_INTERCEPTION , title , message , ThreadContext . get ( Constants . CORRELATION_ID_HEADER )) context . setWebApplicationException ( errorClaimException ) #This method is called in Attestation register endpoint, just before to start the registration process def interceptRegisterAttestation ( self , paramAsJsonNode , context ): print \"Fido2Interception. interceptRegisterAttestation\" attestationService = CdiUtil . bean ( AttestationService ) return True #This method is called in Attestation verify enpoint, just before to start the verification process def interceptVerifyAttestation ( self , paramAsJsonNode , context ): print \"Fido2Interception. interceptVerifyAttestation\" attestationService = CdiUtil . bean ( AttestationService ) return True #This method is called in Assertion authenticate enpoint, just before to start the authentication process def interceptAuthenticateAssertion ( self , paramAsJsonNode , context ): print \"Fido2Interception. interceptAuthenticateAssertion\" assertionService = CdiUtil . bean ( AssertionService ) print \"Fido2Interception. printing username:\" print paramAsJsonNode . get ( \"username\" ) . asText () if paramAsJsonNode . get ( \"username\" ) . asText () == 'test_user' : self . throwBadRequestException ( \"Fido2Interception interceptAuthenticateAssertion : test_user\" , \"Description Error from script : test_user\" , context ) return True #This method is called in Assertion verify enpoint, just before to start the verification process def interceptVerifyAssertion ( self , paramAsJsonNode , context ): print \"Fido2Interception. interceptVerifyAssertion\" assertionService = CdiUtil . bean ( AssertionService ) return True","title":"Script Type: Python"},{"location":"script-catalog/fido2_extension/#script-type-java","text":"import io.jans.model.SimpleCustomProperty ; import io.jans.model.custom.script.model.CustomScript ; import io.jans.model.custom.script.type.auth.Fido2InterceptionType ; import io.jans.service.custom.script.CustomScriptManager ; import io.jans.fido2.service.external.context.ExternalFido2InterceptionContext ; import com.fasterxml.jackson.databind.JsonNode ; import org.apache.logging.log4j.ThreadContext ; import org.jboss.resteasy.spi.NoLogWebApplicationException ; import java.util.Map ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class Fido2Interception implements Fido2InterceptionType { private static final Logger log = LoggerFactory . getLogger ( CustomScriptManager . class ); @Override public boolean init ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Fido2Interception Script. Initializing...\" ); log . info ( \"Fido2Interception Script. Initialized\" ); return true ; } @Override public boolean init ( CustomScript customScript , Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Fido2Interception Script. Initializing...\" ); log . info ( \"Fido2Interception Script. Initialized\" ); return true ; } @Override public boolean destroy ( Map < String , SimpleCustomProperty > configurationAttributes ) { log . info ( \"Fido2Interception Script. Destroying...\" ); log . info ( \"Fido2Interception Script. Destroyed.\" ); return true ; } @Override public int getApiVersion () { return 11 ; } @Override public boolean interceptRegisterAttestation ( JsonNode paramsAsJsonNode , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception Script. Attestation Register...\" ); return true ; } @Override public boolean interceptVerifyAttestation ( JsonNode paramsAsJsonNode , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception Script. Attestation Register...\" ); return true ; } @Override public boolean interceptAuthenticateAssertion ( JsonNode paramsAsJsonNode , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception Script. Assertion Authenticate...\" ); JsonNode jsonNodeUser = paramsAsJsonNode . get ( \"username\" ); if ( jsonNodeUser != null ) { log . info ( \"Fido2Interception. printing username: {}\" , jsonNodeUser . asText ()); if ( jsonNodeUser . asText (). equals ( \"test_user\" )) { throwBadRequestException ( \"Fido2Interception interceptAuthenticateAssertion : test_user\" , \"Description Error from script : test_user\" , context ); } } return true ; } @Override public boolean interceptVerifyAssertion ( JsonNode paramsAsJsonNode , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception Script. Assertion Verify...\" ); return true ; } private void throwBadRequestException ( String title , String message , ExternalFido2InterceptionContext context ) { log . info ( \"Fido2Interception. setting Bad request exception\" ); WebApplicationException errorClaimException = Fido2ErrorResponseFactory . createBadRequestException ( Fido2ErrorResponseType . BAD_REQUEST_INTERCEPTION , title , message , ThreadContext . get ( Constants . CORRELATION_ID_HEADER )); context . setWebApplicationException (( NoLogWebApplicationException ) errorClaimException ); } }","title":"Script Type: Java"},{"location":"script-catalog/id_generator/sample-script/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/id_generator/sample-script/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/id_generator/sample-script/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/id_generator/sample-script/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/idp/sample-script/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/idp/sample-script/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/idp/sample-script/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/idp/sample-script/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/introspection/","text":"Introspection Script Guide # Overview # OAuth reference tokens don't convey any information. They are by their very nature, unguessable strings that meet the prescribed OAuth security guidelines for lack of order or predictability (entropy). However, there is still a large amount of data that may be attached to a token, such as:- - its current validity, - approved scopes, - information about the context in which the token was issued. Access token data is essential for the resource server to evaluate policies that determine whether or not to allow the request. Token introspection therefore enables a client to trade an OAuth reference token for its JSON equivalent by making a request per OAuth 2.0 Token Introspection Guide - (RFC 7662) . The use of Introspection scripts allows the ability to modify the response of Introspection Endpoint spec and provide additional information in the JSON response. Interface # In order to be run and Introspection script should be associated with an OpenID Client (used for obtaining the token). Another way of doing this is by setting the introspectionScriptBackwardCompatibility global Auth Server JSON Configuration Property to true. In this case the Auth Server will run all scripts and will do so by ignoring client configuration. Methods # The introspection interception script extends the base script type with the methods - Method Method description def init(self, customScript, configurationAttributes) Inherited Method This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) Inherited Method This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) Inherited Method The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. NOTE : - Only include the customScript variable if the value for getApiVersion is greater than 10 def modifyResponse(self, responseAsJsonObject, context) This method is called after the introspection response is ready. This method can modify the introspection response. responseAsJsonObject is org.codehaus.jettison.json.JSONObject context is io.jans.as.service.external.context.ExternalIntrospectionContext The configurationAttributes parameter is java.util.Map<String, SimpleCustomProperty> . configurationAttributes = new HashMap < String , SimpleCustomProperty > () ; configurationAttributes . put ( \"Location Type\" , new SimpleCustomProperty ( \"location_type\" , \"ldap\" , \"Storage Location for the script\" )) ; Snippet # # Returns boolean , true - apply introspection method , false - ignore it . # This method is called after introspection response is ready . This method can modify the introspection response . # Note : # responseAsJsonObject - is org . codehaus . jettison . json . JSONObject , you can use any method to manipulate json # context is reference of io . jans . as . server . service . external . context . ExternalIntrospectionContext ( in https : // github . com / JanssenProject project ) def modifyResponse ( self , responseAsJsonObject , context ) : responseAsJsonObject . accumulate ( \"key_from_script\" , \"value_from_script\" ) return True Note - The preferred way to modify an access token is with the Update Token script. It is also possible to run an introspection script during access_token creation as JWT. It can be controlled by run_introspection_script_before_jwt_creation OpenID Client property which is set to false by default. If OpenID Client properties run_introspection_script_before_jwt_creation and access_token_as_jwt are set to true then an introspection script will be run before JWT ( access_token ) is created and all JSON values will be transfered to JWT. Also context inside the script has additional method which allows you to cancel transfering of claims if needed context.setTranferIntrospectionPropertiesIntoJwtClaims(false) Common Use Cases # Script Type: Python # Retrieve Grant, Session and User Details from Access Token # The sample code snippet shows how to work backwards from an AccessToken to Grant, Session and User information. Script Type: Java # Retrieve Grant, Session and User Details from Access Token # The sample code snippet shows how to work backwards from an AccessToken to Grant, Session and User information.","title":"Introspection Script Guide"},{"location":"script-catalog/introspection/#introspection-script-guide","text":"","title":"Introspection Script Guide"},{"location":"script-catalog/introspection/#overview","text":"OAuth reference tokens don't convey any information. They are by their very nature, unguessable strings that meet the prescribed OAuth security guidelines for lack of order or predictability (entropy). However, there is still a large amount of data that may be attached to a token, such as:- - its current validity, - approved scopes, - information about the context in which the token was issued. Access token data is essential for the resource server to evaluate policies that determine whether or not to allow the request. Token introspection therefore enables a client to trade an OAuth reference token for its JSON equivalent by making a request per OAuth 2.0 Token Introspection Guide - (RFC 7662) . The use of Introspection scripts allows the ability to modify the response of Introspection Endpoint spec and provide additional information in the JSON response.","title":"Overview"},{"location":"script-catalog/introspection/#interface","text":"In order to be run and Introspection script should be associated with an OpenID Client (used for obtaining the token). Another way of doing this is by setting the introspectionScriptBackwardCompatibility global Auth Server JSON Configuration Property to true. In this case the Auth Server will run all scripts and will do so by ignoring client configuration.","title":"Interface"},{"location":"script-catalog/introspection/#methods","text":"The introspection interception script extends the base script type with the methods - Method Method description def init(self, customScript, configurationAttributes) Inherited Method This method is only called once during the script initialization. It can be used for global script initialization, initiate objects etc def destroy(self, configurationAttributes) Inherited Method This method is called once to destroy events. It can be used to free resource and objects created in the init() method def getApiVersion(self, configurationAttributes, customScript) Inherited Method The getApiVersion method allows API changes in order to do transparent migration from an old script to a new API. NOTE : - Only include the customScript variable if the value for getApiVersion is greater than 10 def modifyResponse(self, responseAsJsonObject, context) This method is called after the introspection response is ready. This method can modify the introspection response. responseAsJsonObject is org.codehaus.jettison.json.JSONObject context is io.jans.as.service.external.context.ExternalIntrospectionContext The configurationAttributes parameter is java.util.Map<String, SimpleCustomProperty> . configurationAttributes = new HashMap < String , SimpleCustomProperty > () ; configurationAttributes . put ( \"Location Type\" , new SimpleCustomProperty ( \"location_type\" , \"ldap\" , \"Storage Location for the script\" )) ;","title":"Methods"},{"location":"script-catalog/introspection/#snippet","text":"# Returns boolean , true - apply introspection method , false - ignore it . # This method is called after introspection response is ready . This method can modify the introspection response . # Note : # responseAsJsonObject - is org . codehaus . jettison . json . JSONObject , you can use any method to manipulate json # context is reference of io . jans . as . server . service . external . context . ExternalIntrospectionContext ( in https : // github . com / JanssenProject project ) def modifyResponse ( self , responseAsJsonObject , context ) : responseAsJsonObject . accumulate ( \"key_from_script\" , \"value_from_script\" ) return True Note - The preferred way to modify an access token is with the Update Token script. It is also possible to run an introspection script during access_token creation as JWT. It can be controlled by run_introspection_script_before_jwt_creation OpenID Client property which is set to false by default. If OpenID Client properties run_introspection_script_before_jwt_creation and access_token_as_jwt are set to true then an introspection script will be run before JWT ( access_token ) is created and all JSON values will be transfered to JWT. Also context inside the script has additional method which allows you to cancel transfering of claims if needed context.setTranferIntrospectionPropertiesIntoJwtClaims(false)","title":"Snippet"},{"location":"script-catalog/introspection/#common-use-cases","text":"","title":"Common Use Cases"},{"location":"script-catalog/introspection/#script-type-python","text":"","title":"Script Type: Python"},{"location":"script-catalog/introspection/#retrieve-grant-session-and-user-details-from-access-token","text":"The sample code snippet shows how to work backwards from an AccessToken to Grant, Session and User information.","title":"Retrieve Grant, Session and User Details from Access Token"},{"location":"script-catalog/introspection/#script-type-java","text":"","title":"Script Type: Java"},{"location":"script-catalog/introspection/#retrieve-grant-session-and-user-details-from-access-token_1","text":"The sample code snippet shows how to work backwards from an AccessToken to Grant, Session and User information.","title":"Retrieve Grant, Session and User Details from Access Token"},{"location":"script-catalog/introspection/introspection/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/introspection/introspection/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/introspection/introspection/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/introspection/introspection/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/introspection/introspection-custom-parameters/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/introspection/introspection-custom-parameters/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/introspection/introspection-custom-parameters/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/introspection/introspection-custom-parameters/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/introspection/introspection-role-based-scope/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/introspection/introspection-role-based-scope/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/introspection/introspection-role-based-scope/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/introspection/introspection-role-based-scope/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/persistence_extension/","text":"","title":"Index"},{"location":"script-catalog/person_authentication/","text":"2FA authentication scripts # Jython files contained in the top level of this folder are already added as authentication scripts in your Janssen installation. Inside other directory you may find extra information about these scripts as well as additional (non curated) scripts that you may use as a guide to integrate third party authentication services or APIs with Janssen server.","title":"2FA authentication scripts"},{"location":"script-catalog/person_authentication/#2fa-authentication-scripts","text":"Jython files contained in the top level of this folder are already added as authentication scripts in your Janssen installation. Inside other directory you may find extra information about these scripts as well as additional (non curated) scripts that you may use as a guide to integrate third party authentication services or APIs with Janssen server.","title":"2FA authentication scripts"},{"location":"script-catalog/person_authentication/agama-bridge/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/person_authentication/agama-bridge/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/person_authentication/agama-bridge/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/person_authentication/agama-bridge/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/person_authentication/apple-external-authenticator/","tags":["administration","recipes"],"text":"Social Login with Apple # An out-of-the-box feature, the Sign-in with Apple Authentication script is a PersonAuthenticationType script which enables a user to sign-in using Apple credentials. After users authenticate using their Apple credentials, their Apple credentials are provisioned into the Jans-auth server. Prerequisites # A Jans-auth Server installation The Sign-in with Apple authentication script (included in the default Jans-auth Server distribution); An Apple developer account . Configurations at Apple Identity Provider: # You will need to configure a service id, linked to your App identifier. For each website that uses Sign In with Apple, register a services identifier (Services ID) and configure your domain and return URL. 1. Under Certificates, Identifiers and Profiles --> Identifiers --> Click on the + button 2. In the Register a new identifier select Service ID 3. After filling out the description and identifier name, save the Service ID 4. Now edit the saved Service ID and enable the Sign in with Apple checkbox and click Configure button 5. Configure the Janssen's server's callback url https://<your.janssen.server>/postlogin.htm as a Website URL Configure jans-auth server # Configure the custom script: Properties # The custom script has the following properties: Property Description Input value apple_client_id Name of Service ID on developer.apple.com. com.company.name apple_jwks Apple\u2019s public JWK to validate Apple Identity Token https://appleid.apple.com/auth/keys To update this setting in Jans persistence, follow this link Enable Sign-in with Apple Authentication script # By default, users will get the default authentication mechanism as specified above. However, using the OpenID Connect acr_values parameter, web and mobile clients can request any enabled authentication mechanism. Obtain the json contents of apple custom script by using a jans-cli command like get-config-scripts-by-type, get-config-scripts-by-inum etc. e.g : /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-type --url-suffix type:PERSON_AUTHENTICATION , /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-inum --url-suffix inum:6122281b-b55d-4dd0-8115-b098eeeee2b7 Update the custom script and change the enabled attribute to true Now Sign-in with Apple is an available authentication mechanism for your Janssen Server. This means that, using OpenID Connect acr_values, applications can now request Apple authentication for users. !!! Note To make sure apple has been enabled successfully, you can check your Janssen's Auth Server OpenID Connect configuration by navigating to the following URL: https:// /.well-known/openid-configuration. Find \"acr_values_supported\": and you should see \"apple\". Make Sign-in with Apple Script as default authentication script: # Use this link as a reference. Steps: 1. Create a file say apple-auth-default.json with the following contents { \"defaultAcr\": \"apple\" } 2.Update the default authentication method to Apple Sign-in /opt/jans/jans-cli/config-cli.py --operation-id put-acrs --data /tmp/apple-auth-default.json NOTE To make sure apple has been enabled successfully as a default authentication method, you can check your Janssen Server's OpenID Connect configuration by navigating to the following URL: https://<hostname>/.well-known/openid-configuration . Find \"acr_values_supported\": and you should see \"apple\" . Test the feature - Sign-in with Apple # To test , enter the complete URL for authorization in a browser or create a simple webpage with a link that simulates the user sign-in attempt. If the server is configured properly, the first page for the selected authentication method will be displayed to the user. An example of a complete URL looks like this - https://<your.jans.server>/jans-auth/authorize.htm?response_type=code&redirect_uri=https://<your.jans.server>/admin&client_id=<replace_with_inum_client_id>&scope=openid+profile+email+user_name&state=faad2cdjfdddjfkdf&nonce=dajdffdfsdcfff","title":"Index"},{"location":"script-catalog/person_authentication/apple-external-authenticator/#social-login-with-apple","text":"An out-of-the-box feature, the Sign-in with Apple Authentication script is a PersonAuthenticationType script which enables a user to sign-in using Apple credentials. After users authenticate using their Apple credentials, their Apple credentials are provisioned into the Jans-auth server.","title":"Social Login with Apple"},{"location":"script-catalog/person_authentication/apple-external-authenticator/#prerequisites","text":"A Jans-auth Server installation The Sign-in with Apple authentication script (included in the default Jans-auth Server distribution); An Apple developer account .","title":"Prerequisites"},{"location":"script-catalog/person_authentication/apple-external-authenticator/#configurations-at-apple-identity-provider","text":"You will need to configure a service id, linked to your App identifier. For each website that uses Sign In with Apple, register a services identifier (Services ID) and configure your domain and return URL. 1. Under Certificates, Identifiers and Profiles --> Identifiers --> Click on the + button 2. In the Register a new identifier select Service ID 3. After filling out the description and identifier name, save the Service ID 4. Now edit the saved Service ID and enable the Sign in with Apple checkbox and click Configure button 5. Configure the Janssen's server's callback url https://<your.janssen.server>/postlogin.htm as a Website URL","title":"Configurations at Apple Identity Provider:"},{"location":"script-catalog/person_authentication/apple-external-authenticator/#configure-jans-auth-server","text":"Configure the custom script:","title":"Configure jans-auth server"},{"location":"script-catalog/person_authentication/apple-external-authenticator/#properties","text":"The custom script has the following properties: Property Description Input value apple_client_id Name of Service ID on developer.apple.com. com.company.name apple_jwks Apple\u2019s public JWK to validate Apple Identity Token https://appleid.apple.com/auth/keys To update this setting in Jans persistence, follow this link","title":"Properties"},{"location":"script-catalog/person_authentication/apple-external-authenticator/#enable-sign-in-with-apple-authentication-script","text":"By default, users will get the default authentication mechanism as specified above. However, using the OpenID Connect acr_values parameter, web and mobile clients can request any enabled authentication mechanism. Obtain the json contents of apple custom script by using a jans-cli command like get-config-scripts-by-type, get-config-scripts-by-inum etc. e.g : /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-type --url-suffix type:PERSON_AUTHENTICATION , /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-inum --url-suffix inum:6122281b-b55d-4dd0-8115-b098eeeee2b7 Update the custom script and change the enabled attribute to true Now Sign-in with Apple is an available authentication mechanism for your Janssen Server. This means that, using OpenID Connect acr_values, applications can now request Apple authentication for users. !!! Note To make sure apple has been enabled successfully, you can check your Janssen's Auth Server OpenID Connect configuration by navigating to the following URL: https:// /.well-known/openid-configuration. Find \"acr_values_supported\": and you should see \"apple\".","title":"Enable Sign-in with Apple Authentication script"},{"location":"script-catalog/person_authentication/apple-external-authenticator/#make-sign-in-with-apple-script-as-default-authentication-script","text":"Use this link as a reference. Steps: 1. Create a file say apple-auth-default.json with the following contents { \"defaultAcr\": \"apple\" } 2.Update the default authentication method to Apple Sign-in /opt/jans/jans-cli/config-cli.py --operation-id put-acrs --data /tmp/apple-auth-default.json NOTE To make sure apple has been enabled successfully as a default authentication method, you can check your Janssen Server's OpenID Connect configuration by navigating to the following URL: https://<hostname>/.well-known/openid-configuration . Find \"acr_values_supported\": and you should see \"apple\" .","title":"Make Sign-in with Apple Script as default authentication script:"},{"location":"script-catalog/person_authentication/apple-external-authenticator/#test-the-feature-sign-in-with-apple","text":"To test , enter the complete URL for authorization in a browser or create a simple webpage with a link that simulates the user sign-in attempt. If the server is configured properly, the first page for the selected authentication method will be displayed to the user. An example of a complete URL looks like this - https://<your.jans.server>/jans-auth/authorize.htm?response_type=code&redirect_uri=https://<your.jans.server>/admin&client_id=<replace_with_inum_client_id>&scope=openid+profile+email+user_name&state=faad2cdjfdddjfkdf&nonce=dajdffdfsdcfff","title":"Test the feature - Sign-in with Apple"},{"location":"script-catalog/person_authentication/basic-external-authenticator/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/person_authentication/basic-external-authenticator/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/person_authentication/basic-external-authenticator/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/person_authentication/basic-external-authenticator/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/person_authentication/basic-lock-account-external-authenticator/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/person_authentication/basic-lock-account-external-authenticator/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/person_authentication/basic-lock-account-external-authenticator/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/person_authentication/basic-lock-account-external-authenticator/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/person_authentication/duo-external-authenticator/","text":"Integrating DUO's Universal Prompt as an authentication method in Janssen server # Duo Security is a SaaS authentication provider. This document will explain how to use Janssen's Duo interception script to configure the Janssen Server for a two-step authentication process with username and password as the first step, and Duo as the second step. The script invokes the Universal Prompt which is a redesign of Duo\u2019s traditional authentication prompt. Authentication flow # sequenceDiagram title Integrating DUO's Universal Prompt as an authentication method in Janssen server autonumber 1 RP->>Jans AS: Invoke /authorize endpoint Jans AS->>RP: Present Username password screen RP->>Jans AS: Submit credentials Jans AS->>DUO Security Service: Redirects login request to IDP loop n times - (multistep authentication) DUO Security Service->>RP: Present universal prompt screen RP->>DUO Security Service: Present credentials end DUO Security Service->>Jans AS: return state, code(duo_code) Jans AS->>Jans AS: check state Jans AS->>DUO Security Service: send code (duo_code) in exchange for token DUO Security Service ->> Jans AS: token Jans AS->>Jans AS: inspect token if (token.getAuth_result().getStatus() == success), \\nmark user as authenticated opt if new user Jans AS->>Jans AS: 9. Dynamic enrollment or registration end Jans AS->>RP: 10. write Jans session cookie Administrator prerequisites # Duo interception script (included in the default Janssen Server distribution); An account with Duo Security . User prerequisites # Users should download the DUO mobile app Configure Duo Account # Sign up for a Duo account. Log in to the Duo Admin Panel and navigate to Applications. Click Protect an Application and locate Web SDK in the applications list. Click Protect this Application to get your client ID, secret key, and API hostname. For additional info for the steps refer to Duo's Web SDK 4, check this article . Configure Jans-auth server (AS) # 1. Add the duo-universal Dependency to your jans-auth server # The dependencies have to be added separately as mentioned in the steps below. Using a fat jar (duo-universal-sdk-1.0.3-with-dependencies.jar leads to conflicts.) [ ] Copy these jar files to the following jans-auth folder inside the Janssen Server chroot: /opt/jans/jetty/jans-auth/custom/libs Dependency jars: duo-universal-sdk-1.0.3.jar , converter-jackson-2.1.0.jar , java-jwt-3.3.0.jar , logging-interceptor-3.3.1.jar , lombok-1.18.16.jar , retrofit-2.5.0.jar , okio-2.9.0.jar , okhttp-3.12.0.jar , * kotlin-stdlib-1.4.21.jar [ ] Edit /opt/jans/jetty/jans-auth/webapps/jans-auth.xml and add the following line: <Set name=\"extraClasspath\">./custom/libs/duo-universal-sdk-1.0.3.jar,./custom/libs/converter-jackson-2.1.0.jar,./custom/libs/java-jwt-3.3.0.jar,./custom/libs/logging-interceptor-3.3.1.jar,./custom/libs/lombok-1.18.16.jar,./custom/libs/retrofit-2.5.0.jar,./custom/libs/okio-2.9.0.jar,./custom/libs/okhttp-3.12.0.jar,./custom/libs/kotlin-stdlib-1.4.21.jar</Set> [ ] Restart the jans-auth service 2. Add custom script # Create cs.json with the contents of a CUSTOM script. To do that, run the following command. /opt/jans/jans-cli/config-cli.py --schema CustomScript > /tmp/cs.json Edit the file's contents to reflect the addition of the duo custom script. Set enabled flag true Configure the api_hostname, client_id and client_secret | Property |Status | Description | Example | |-----------------------|---------------|-----------------------|-----------------------| |api_hostname |Mandatory |URL of the Duo API Server|api-random.duosecurity.com| |client_id |Mandatory |Value from the Duo application using Web SDK 4 that was registered using DUO Admin console|DI3ICTTJKLL8PPPNGH7YI| |client_secret |Mandatory|Value from the Duo application using Web SDK 4 that was registered using DUO Admin console|eEbJdi3hg42zxyFYbHArU5RuioPP| name field should reflect the use case script_type should be PERSON_AUTHENTICATION { \"dn\": null, \"inum\": null, \"name\": \"duo\", \"aliases\": [], \"description\": \"DUO's custom script\", \"script\": \"_file /root/script.py\", \"scriptType\": \"PERSON_AUTHENTICATION\", \"programmingLanguage\": \"JYTHON\", \"moduleProperties\": { \"value1\": null, \"value2\": null, \"description\": null }, \"configurationProperties\": [{ \"value1\": \"api_hostname\", \"value2\": \"api-random.duosecurity.com\", \"description\": \"URL of the Duo API Server\", \"hide\": true }, { \"value1\": \"client_id\", \"value2\": \"DI3ICTTJKLL8PPPNGH7YI\", \"description\": \"Value from the Duo application using Web SDK 4 that was registered using DUO Admin console\", \"hide\": true }, { \"value1\": \"client_secret\", \"value2\": \"eEbJdi3hg42zxyFYbHArU5RuioPP\", \"description\": \"Value from the Duo application using Web SDK 4 that was registered using DUO Admin console\", \"hide\": true } ] , \"level\": \"integer\", \"revision\": 0, \"enabled\": true, \"scriptError\": { \"raisedAt\": null, \"stackTrace\": null }, \"modified\": false, \"internal\": false } 3. Add the custom script /opt/jans/jans-cli/config-cli.py --operation-id post-config-scripts --data /tmp/cs.json Now Duo is an available authentication mechanism for your Janssen Server. This means that, using OpenID Connect acr_values , applications can now request Duo authentication for users. Note To make sure Duo has been enabled successfully, you can check your Janssen Server's OpenID Connect configuration by navigating to the following URL: https://<hostname>/.well-known/openid-configuration . Find \"acr_values_supported\": and you should see \"duo\" . Make Duo the Default Authentication Mechanism # For CURL commands, use this link as a reference. Steps: 1. Create a file say duo-auth-default.json with the following contents { \"defaultAcr\": \"duo\" } 2.Update the default authentication method to Google Sign-in /opt/jans/jans-cli/config-cli.py --operation-id put-acrs --data /tmp/duo-auth-default.json NOTE To make sure duo has been enabled successfully as a default authentication method, you can check your Janssen Server's OpenID Connect configuration by navigating to the following URL: https://<hostname>/.well-known/openid-configuration . Find \"acr_values_supported\": and you should see \"duo\" . Test the feature # To test , enter the complete URL for authorization in a browser or create a simple web page with a link that simulates the user sign-in attempt. If the server is configured properly, the first page for the selected authentication method will be displayed to the user. An example of a complete URL looks like this - https://<your.jans.server>/jans-auth/authorize.htm?response_type=code&redirect_uri=https://<your.jans.server>/admin&client_id=<replace_with_inum_client_id>&scope=openid+profile+email+user_name&state=faad2cdjfdddjfkdf&nonce=dajdffdfsdcfff","title":"Index"},{"location":"script-catalog/person_authentication/duo-external-authenticator/#integrating-duos-universal-prompt-as-an-authentication-method-in-janssen-server","text":"Duo Security is a SaaS authentication provider. This document will explain how to use Janssen's Duo interception script to configure the Janssen Server for a two-step authentication process with username and password as the first step, and Duo as the second step. The script invokes the Universal Prompt which is a redesign of Duo\u2019s traditional authentication prompt.","title":"Integrating DUO's Universal Prompt as an authentication method in Janssen server"},{"location":"script-catalog/person_authentication/duo-external-authenticator/#authentication-flow","text":"sequenceDiagram title Integrating DUO's Universal Prompt as an authentication method in Janssen server autonumber 1 RP->>Jans AS: Invoke /authorize endpoint Jans AS->>RP: Present Username password screen RP->>Jans AS: Submit credentials Jans AS->>DUO Security Service: Redirects login request to IDP loop n times - (multistep authentication) DUO Security Service->>RP: Present universal prompt screen RP->>DUO Security Service: Present credentials end DUO Security Service->>Jans AS: return state, code(duo_code) Jans AS->>Jans AS: check state Jans AS->>DUO Security Service: send code (duo_code) in exchange for token DUO Security Service ->> Jans AS: token Jans AS->>Jans AS: inspect token if (token.getAuth_result().getStatus() == success), \\nmark user as authenticated opt if new user Jans AS->>Jans AS: 9. Dynamic enrollment or registration end Jans AS->>RP: 10. write Jans session cookie","title":"Authentication flow"},{"location":"script-catalog/person_authentication/duo-external-authenticator/#administrator-prerequisites","text":"Duo interception script (included in the default Janssen Server distribution); An account with Duo Security .","title":"Administrator prerequisites"},{"location":"script-catalog/person_authentication/duo-external-authenticator/#user-prerequisites","text":"Users should download the DUO mobile app","title":"User prerequisites"},{"location":"script-catalog/person_authentication/duo-external-authenticator/#configure-duo-account","text":"Sign up for a Duo account. Log in to the Duo Admin Panel and navigate to Applications. Click Protect an Application and locate Web SDK in the applications list. Click Protect this Application to get your client ID, secret key, and API hostname. For additional info for the steps refer to Duo's Web SDK 4, check this article .","title":"Configure Duo Account"},{"location":"script-catalog/person_authentication/duo-external-authenticator/#configure-jans-auth-server-as","text":"","title":"Configure Jans-auth server (AS)"},{"location":"script-catalog/person_authentication/duo-external-authenticator/#1-add-the-duo-universal-dependency-to-your-jans-auth-server","text":"The dependencies have to be added separately as mentioned in the steps below. Using a fat jar (duo-universal-sdk-1.0.3-with-dependencies.jar leads to conflicts.) [ ] Copy these jar files to the following jans-auth folder inside the Janssen Server chroot: /opt/jans/jetty/jans-auth/custom/libs Dependency jars: duo-universal-sdk-1.0.3.jar , converter-jackson-2.1.0.jar , java-jwt-3.3.0.jar , logging-interceptor-3.3.1.jar , lombok-1.18.16.jar , retrofit-2.5.0.jar , okio-2.9.0.jar , okhttp-3.12.0.jar , * kotlin-stdlib-1.4.21.jar [ ] Edit /opt/jans/jetty/jans-auth/webapps/jans-auth.xml and add the following line: <Set name=\"extraClasspath\">./custom/libs/duo-universal-sdk-1.0.3.jar,./custom/libs/converter-jackson-2.1.0.jar,./custom/libs/java-jwt-3.3.0.jar,./custom/libs/logging-interceptor-3.3.1.jar,./custom/libs/lombok-1.18.16.jar,./custom/libs/retrofit-2.5.0.jar,./custom/libs/okio-2.9.0.jar,./custom/libs/okhttp-3.12.0.jar,./custom/libs/kotlin-stdlib-1.4.21.jar</Set> [ ] Restart the jans-auth service","title":"1. Add the duo-universal Dependency to your jans-auth server"},{"location":"script-catalog/person_authentication/duo-external-authenticator/#2-add-custom-script","text":"Create cs.json with the contents of a CUSTOM script. To do that, run the following command. /opt/jans/jans-cli/config-cli.py --schema CustomScript > /tmp/cs.json Edit the file's contents to reflect the addition of the duo custom script. Set enabled flag true Configure the api_hostname, client_id and client_secret | Property |Status | Description | Example | |-----------------------|---------------|-----------------------|-----------------------| |api_hostname |Mandatory |URL of the Duo API Server|api-random.duosecurity.com| |client_id |Mandatory |Value from the Duo application using Web SDK 4 that was registered using DUO Admin console|DI3ICTTJKLL8PPPNGH7YI| |client_secret |Mandatory|Value from the Duo application using Web SDK 4 that was registered using DUO Admin console|eEbJdi3hg42zxyFYbHArU5RuioPP| name field should reflect the use case script_type should be PERSON_AUTHENTICATION { \"dn\": null, \"inum\": null, \"name\": \"duo\", \"aliases\": [], \"description\": \"DUO's custom script\", \"script\": \"_file /root/script.py\", \"scriptType\": \"PERSON_AUTHENTICATION\", \"programmingLanguage\": \"JYTHON\", \"moduleProperties\": { \"value1\": null, \"value2\": null, \"description\": null }, \"configurationProperties\": [{ \"value1\": \"api_hostname\", \"value2\": \"api-random.duosecurity.com\", \"description\": \"URL of the Duo API Server\", \"hide\": true }, { \"value1\": \"client_id\", \"value2\": \"DI3ICTTJKLL8PPPNGH7YI\", \"description\": \"Value from the Duo application using Web SDK 4 that was registered using DUO Admin console\", \"hide\": true }, { \"value1\": \"client_secret\", \"value2\": \"eEbJdi3hg42zxyFYbHArU5RuioPP\", \"description\": \"Value from the Duo application using Web SDK 4 that was registered using DUO Admin console\", \"hide\": true } ] , \"level\": \"integer\", \"revision\": 0, \"enabled\": true, \"scriptError\": { \"raisedAt\": null, \"stackTrace\": null }, \"modified\": false, \"internal\": false } 3. Add the custom script /opt/jans/jans-cli/config-cli.py --operation-id post-config-scripts --data /tmp/cs.json Now Duo is an available authentication mechanism for your Janssen Server. This means that, using OpenID Connect acr_values , applications can now request Duo authentication for users. Note To make sure Duo has been enabled successfully, you can check your Janssen Server's OpenID Connect configuration by navigating to the following URL: https://<hostname>/.well-known/openid-configuration . Find \"acr_values_supported\": and you should see \"duo\" .","title":"2. Add custom script"},{"location":"script-catalog/person_authentication/duo-external-authenticator/#make-duo-the-default-authentication-mechanism","text":"For CURL commands, use this link as a reference. Steps: 1. Create a file say duo-auth-default.json with the following contents { \"defaultAcr\": \"duo\" } 2.Update the default authentication method to Google Sign-in /opt/jans/jans-cli/config-cli.py --operation-id put-acrs --data /tmp/duo-auth-default.json NOTE To make sure duo has been enabled successfully as a default authentication method, you can check your Janssen Server's OpenID Connect configuration by navigating to the following URL: https://<hostname>/.well-known/openid-configuration . Find \"acr_values_supported\": and you should see \"duo\" .","title":"Make Duo the Default Authentication Mechanism"},{"location":"script-catalog/person_authentication/duo-external-authenticator/#test-the-feature","text":"To test , enter the complete URL for authorization in a browser or create a simple web page with a link that simulates the user sign-in attempt. If the server is configured properly, the first page for the selected authentication method will be displayed to the user. An example of a complete URL looks like this - https://<your.jans.server>/jans-auth/authorize.htm?response_type=code&redirect_uri=https://<your.jans.server>/admin&client_id=<replace_with_inum_client_id>&scope=openid+profile+email+user_name&state=faad2cdjfdddjfkdf&nonce=dajdffdfsdcfff","title":"Test the feature"},{"location":"script-catalog/person_authentication/fido2-external-authenticator/","text":"FIDO2 # Overview # FIDO 2.0 (FIDO2) , an open authentication standard that enables people to leverage common devices to authenticate to online services in both mobile and desktop environments. The Janssen server includes a FIDO2 server implementation. This enables authentications by using platform authenticators embedded into a person's device or physical USB, NFC or Bluetooth security keys that are inserted into a USB slot of a computer. FIDO2 is comprised of the W3C\u2019s Web Authentication specification (WebAuthn) and FIDO\u2019s corresponding Client-to-Authenticator Protocol (CTAP) . WebAuthn defines a standard web API that can be built into browsers and related web platform infrastructure to enable online services to use FIDO Authentication. CTAP enables external devices such as mobile handsets or FIDO Security Keys to work with WebAuthn and serve as authenticators to desktop applications and web services. This document explains how to use the Janssen Auth Server's built-in FIDO2 interception script to implement a two-step, two-factor authentication (2FA) with username / password as the first step, and any FIDO2 device as the second step. Prerequisites # A Janssen Server ( installation instructions ) FIDO2 interception script (included in the default Janssen Server distribution); At least one FIDO2 device for testing, like one of the devices listed below . FIDO2 devices # Some well known FIDO2 devices and manufacturers include: Yubico Vasco DIGIPASS SecureClick HyperFIDO Feitian Technologies AuthenTrend Apple's built-in Touch ID Purchase FIDO2 devices on Amazon . Or, check FIDO's certified products for a comprehensive list of FIDO2 devices (sort by Specification == FIDO2 ). Properties # The script has the following properties Property Description Example fido2_server_uri URL of the Janssen's FIDO2 server https://idp.mycompany.com Enable FIDO2 script # By default, users will get the default authentication mechanism as specified above. However, using the OpenID Connect acr_values parameter, web and mobile clients can request any enabled authentication mechanism . Obtain the json contents of fido2 custom script by using a jans-cli command like get-config-scripts-by-type , get-config-scripts-by-inum etc. e.g : /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-type --url-suffix type:PERSON_AUTHENTICATION , /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-inum --url-suffix inum:6122281b-b55d-4dd0-8115-b098eeeee2b7 Update the custom script and change the enabled attribute to true Now FIDO2 is an available authentication mechanism for your Janssen Server. This means that, using OpenID Connect acr_values , applications can now request FIDO2 authentication for users. Note To make sure FIDO2 has been enabled successfully, you can check your Janssen's Auth Server OpenID Connect configuration by navigating to the following URL: https://<hostname>/.well-known/openid-configuration . Find \"acr_values_supported\": and you should see \"fido2\" . Enable FIDO2 Script as default authentication script: # Use this link as a reference. Follow the steps below to enable FIDO2 authentication: 1. Create a file say fido2-auth-default.json with the following contents { \"defaultAcr\": \"fido2\" } 2.Update the default authentication method to fido2 /opt/jans/jans-cli/config-cli.py --operation-id put-acrs --data /tmp/fido2-auth-default.json Note If FIDO2 is set as a default authentication mechanism users will not be able to access the protected resource(s) while using a mobile device or a browser that does not support FIDO2 (e.g. Internet Explorer). Test the feature # To test, enter the complete URL for authorization in a browser or create a simple webpage with a link that simulates the user sign-in attempt. If the server is configured properly, the first page for the selected authentication method will be displayed to the user. An example of a complete URL looks like this - https://<your.jans.server>/jans-auth/authorize.htm?response_type=code&redirect_uri=https://<your.jans.server>/admin&client_id=<replace_with_inum_client_id>&scope=openid+profile+email+user_name&state=faad2cdjfdddjfkdf&nonce=dajdffdfsdcfff FIDO2 login page # Below is an illustration of the Janssen Server's default FIDO2 login page: The design is being rendered from the FIDO2 xhtml page . To customize the look and feel of this page, follow the customization guide . Using FIDO2 tokens # Credential enrollment # FIDO2 device enrollment happens during the first authentication attempt. Subsequent authentications # All subsequent FIDO2 authentications for that user account will require the enrolled FIDO2 key. FIDO2 credential management # A user's FIDO2 devices can be removed by a Janssen administrator in LDAP under the user entry as shown in the below screenshot. Diagram source in mermaid.live graph TD A[ou=jans] --> K(ou=people) K --> K1[inum=....] K1 --> K11[ou=fido2_register] K11 --> K111[jansId=....] K11 --> K112[jansId=....] K11 --> K112[jansId=....] K1 --> K12[ou=fido2_auth] K12 --> K121[jansId=....] K12 --> K122[jansId=....] K12 --> K123[jansId=....] K --> K2[inum=....] K2 --> K21[ou=fido2_register] K21 --> K211[jansId=....] K21 --> K212[jansId=....] K21 --> K212[jansId=....] K2 --> K22[ou=fido2_auth] K22 --> K221[jansId=....] K22 --> K222[jansId=....] K22 --> K223[oxId=....] K --> K3[inum=....] K3 --> K31[ou=fido2_register] K31 --> K311[jansId=....] K31 --> K312[jansId=....] K31 --> K312[jansId=....] K3 --> K32[ou=fido2_auth] K32 --> K321[jansId=....] K32 --> K322[jansId=....] K32 --> K323[jansId=....] FIDO2 discovery endpoint # A discovery document for FIDO2 is published by the Janssen Server at: https://your.hostname/.well-known/fido2-configuration This document specifies the URL of the registration and authentication endpoints.","title":"FIDO2"},{"location":"script-catalog/person_authentication/fido2-external-authenticator/#fido2","text":"","title":"FIDO2"},{"location":"script-catalog/person_authentication/fido2-external-authenticator/#overview","text":"FIDO 2.0 (FIDO2) , an open authentication standard that enables people to leverage common devices to authenticate to online services in both mobile and desktop environments. The Janssen server includes a FIDO2 server implementation. This enables authentications by using platform authenticators embedded into a person's device or physical USB, NFC or Bluetooth security keys that are inserted into a USB slot of a computer. FIDO2 is comprised of the W3C\u2019s Web Authentication specification (WebAuthn) and FIDO\u2019s corresponding Client-to-Authenticator Protocol (CTAP) . WebAuthn defines a standard web API that can be built into browsers and related web platform infrastructure to enable online services to use FIDO Authentication. CTAP enables external devices such as mobile handsets or FIDO Security Keys to work with WebAuthn and serve as authenticators to desktop applications and web services. This document explains how to use the Janssen Auth Server's built-in FIDO2 interception script to implement a two-step, two-factor authentication (2FA) with username / password as the first step, and any FIDO2 device as the second step.","title":"Overview"},{"location":"script-catalog/person_authentication/fido2-external-authenticator/#prerequisites","text":"A Janssen Server ( installation instructions ) FIDO2 interception script (included in the default Janssen Server distribution); At least one FIDO2 device for testing, like one of the devices listed below .","title":"Prerequisites"},{"location":"script-catalog/person_authentication/fido2-external-authenticator/#fido2-devices","text":"Some well known FIDO2 devices and manufacturers include: Yubico Vasco DIGIPASS SecureClick HyperFIDO Feitian Technologies AuthenTrend Apple's built-in Touch ID Purchase FIDO2 devices on Amazon . Or, check FIDO's certified products for a comprehensive list of FIDO2 devices (sort by Specification == FIDO2 ).","title":"FIDO2 devices"},{"location":"script-catalog/person_authentication/fido2-external-authenticator/#properties","text":"The script has the following properties Property Description Example fido2_server_uri URL of the Janssen's FIDO2 server https://idp.mycompany.com","title":"Properties"},{"location":"script-catalog/person_authentication/fido2-external-authenticator/#enable-fido2-script","text":"By default, users will get the default authentication mechanism as specified above. However, using the OpenID Connect acr_values parameter, web and mobile clients can request any enabled authentication mechanism . Obtain the json contents of fido2 custom script by using a jans-cli command like get-config-scripts-by-type , get-config-scripts-by-inum etc. e.g : /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-type --url-suffix type:PERSON_AUTHENTICATION , /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-inum --url-suffix inum:6122281b-b55d-4dd0-8115-b098eeeee2b7 Update the custom script and change the enabled attribute to true Now FIDO2 is an available authentication mechanism for your Janssen Server. This means that, using OpenID Connect acr_values , applications can now request FIDO2 authentication for users. Note To make sure FIDO2 has been enabled successfully, you can check your Janssen's Auth Server OpenID Connect configuration by navigating to the following URL: https://<hostname>/.well-known/openid-configuration . Find \"acr_values_supported\": and you should see \"fido2\" .","title":"Enable FIDO2 script"},{"location":"script-catalog/person_authentication/fido2-external-authenticator/#enable-fido2-script-as-default-authentication-script","text":"Use this link as a reference. Follow the steps below to enable FIDO2 authentication: 1. Create a file say fido2-auth-default.json with the following contents { \"defaultAcr\": \"fido2\" } 2.Update the default authentication method to fido2 /opt/jans/jans-cli/config-cli.py --operation-id put-acrs --data /tmp/fido2-auth-default.json Note If FIDO2 is set as a default authentication mechanism users will not be able to access the protected resource(s) while using a mobile device or a browser that does not support FIDO2 (e.g. Internet Explorer).","title":"Enable FIDO2 Script as default authentication script:"},{"location":"script-catalog/person_authentication/fido2-external-authenticator/#test-the-feature","text":"To test, enter the complete URL for authorization in a browser or create a simple webpage with a link that simulates the user sign-in attempt. If the server is configured properly, the first page for the selected authentication method will be displayed to the user. An example of a complete URL looks like this - https://<your.jans.server>/jans-auth/authorize.htm?response_type=code&redirect_uri=https://<your.jans.server>/admin&client_id=<replace_with_inum_client_id>&scope=openid+profile+email+user_name&state=faad2cdjfdddjfkdf&nonce=dajdffdfsdcfff","title":"Test the feature"},{"location":"script-catalog/person_authentication/fido2-external-authenticator/#fido2-login-page","text":"Below is an illustration of the Janssen Server's default FIDO2 login page: The design is being rendered from the FIDO2 xhtml page . To customize the look and feel of this page, follow the customization guide .","title":"FIDO2 login page"},{"location":"script-catalog/person_authentication/fido2-external-authenticator/#using-fido2-tokens","text":"","title":"Using FIDO2 tokens"},{"location":"script-catalog/person_authentication/fido2-external-authenticator/#credential-enrollment","text":"FIDO2 device enrollment happens during the first authentication attempt.","title":"Credential enrollment"},{"location":"script-catalog/person_authentication/fido2-external-authenticator/#subsequent-authentications","text":"All subsequent FIDO2 authentications for that user account will require the enrolled FIDO2 key.","title":"Subsequent authentications"},{"location":"script-catalog/person_authentication/fido2-external-authenticator/#fido2-credential-management","text":"A user's FIDO2 devices can be removed by a Janssen administrator in LDAP under the user entry as shown in the below screenshot. Diagram source in mermaid.live graph TD A[ou=jans] --> K(ou=people) K --> K1[inum=....] K1 --> K11[ou=fido2_register] K11 --> K111[jansId=....] K11 --> K112[jansId=....] K11 --> K112[jansId=....] K1 --> K12[ou=fido2_auth] K12 --> K121[jansId=....] K12 --> K122[jansId=....] K12 --> K123[jansId=....] K --> K2[inum=....] K2 --> K21[ou=fido2_register] K21 --> K211[jansId=....] K21 --> K212[jansId=....] K21 --> K212[jansId=....] K2 --> K22[ou=fido2_auth] K22 --> K221[jansId=....] K22 --> K222[jansId=....] K22 --> K223[oxId=....] K --> K3[inum=....] K3 --> K31[ou=fido2_register] K31 --> K311[jansId=....] K31 --> K312[jansId=....] K31 --> K312[jansId=....] K3 --> K32[ou=fido2_auth] K32 --> K321[jansId=....] K32 --> K322[jansId=....] K32 --> K323[jansId=....]","title":"FIDO2 credential management"},{"location":"script-catalog/person_authentication/fido2-external-authenticator/#fido2-discovery-endpoint","text":"A discovery document for FIDO2 is published by the Janssen Server at: https://your.hostname/.well-known/fido2-configuration This document specifies the URL of the registration and authentication endpoints.","title":"FIDO2 discovery endpoint"},{"location":"script-catalog/person_authentication/forgot_password/","text":"Forgot Password 2FA Token Interception Script # Description # This script is a 2 in 1. It can be used to enable user to reset its password or to enable 2FA sending a token to user's email : How they work: Forgot Password # Step 1: User enters e-mail and if e-mail exists, user receive a token via email Step 2: User enters token received by e-mail Step 3: User enters new password Emai 2FA # Step 1: User enters username and password Step 2: User enters token received by e-mail Instalation # Make sure you have your SMTP settings correctly Gluu Server - Navigate to Configuration > Organization Configuration > SMTP Server Configuration Set up the script function (Forgot Password or Email 2FA) - Navigate to Configuration > Manage Custom Scripts, choose the script and set a custom attribute with key SCRIPT_FUNCTION and value forgot_password for Forgot Password mode, or email_2FA for Email 2FA mode. Enable the custom script. Please notice the xhtml files for this script are currently located at oxAuth/Server/src/main/webapp/auth/forgot_password/ Note: If you want to use both scripts, you'll need to copy it and change the custom attribute from the copied script.","title":"Forgot Password 2FA Token Interception Script"},{"location":"script-catalog/person_authentication/forgot_password/#forgot-password-2fa-token-interception-script","text":"","title":"Forgot Password 2FA Token Interception Script"},{"location":"script-catalog/person_authentication/forgot_password/#description","text":"This script is a 2 in 1. It can be used to enable user to reset its password or to enable 2FA sending a token to user's email : How they work:","title":"Description"},{"location":"script-catalog/person_authentication/forgot_password/#forgot-password","text":"Step 1: User enters e-mail and if e-mail exists, user receive a token via email Step 2: User enters token received by e-mail Step 3: User enters new password","title":"Forgot Password"},{"location":"script-catalog/person_authentication/forgot_password/#emai-2fa","text":"Step 1: User enters username and password Step 2: User enters token received by e-mail","title":"Emai 2FA"},{"location":"script-catalog/person_authentication/forgot_password/#instalation","text":"Make sure you have your SMTP settings correctly Gluu Server - Navigate to Configuration > Organization Configuration > SMTP Server Configuration Set up the script function (Forgot Password or Email 2FA) - Navigate to Configuration > Manage Custom Scripts, choose the script and set a custom attribute with key SCRIPT_FUNCTION and value forgot_password for Forgot Password mode, or email_2FA for Email 2FA mode. Enable the custom script. Please notice the xhtml files for this script are currently located at oxAuth/Server/src/main/webapp/auth/forgot_password/ Note: If you want to use both scripts, you'll need to copy it and change the custom attribute from the copied script.","title":"Instalation"},{"location":"script-catalog/person_authentication/google-external-authenticator/","tags":["administration","recipes"],"text":"Social Login with Google # An out-of-the-box feature, the Google Authentication script is a PersonAuthenticationType script which enables a user to sign-in using Google credentials. Google's OAuth 2.0 APIs are used for this. After users authenticate using their Google credentials, their Google credentials are provisioned into the Jans-auth server. Prerequisites # A Jans-auth Server (installation instructions here ) The Google authentication script (included in the default Jans-auth Server distribution); A Google account . Google API jars namely google-api-client , google-oauth-client and google-http-client-jackson2 added to jans-auth-server Configuring Google API keys: # On the Google side, you need OAuth 2.0 credentials, including a client ID and client secret, to authenticate users and gain access to Google's APIs. The following steps explain how to create credentials for your project. Your applications can then use the credentials to access APIs that you have enabled for that project. Go to the Credentials page . Click Create credentials > OAuth client ID. Select the Web application application type. Name your OAuth 2.0 client and click Create Configure Authorized redirect URIs , click ADD URI to add the Janssen's https://my.auth.server/postlogin.htm where the control returns back to the AS. Configure Authorized JavaScript origins , click ADD URI to add Janssen's FQDN https://my.auth.server because we are using Google Client JS and it needs valid JS origin. Configure jans-auth server # Download Google Client JSON file # On the following page, https://console.cloud.google.com/apis/credentials, you will see a table containing your recently created client. Click on the download button and download the JSON file containing details of the Client. Place this file in /etc/certs/google_client_secret.json Add Google libraries to jans-auth-server # Copy the library files to /opt/jans/jetty/jans-auth/custom/libs cd /opt/jans/jetty/jans-auth/custom/libs wget https://repo1.maven.org/maven2/com/google/api-client/google-api-client/1.33.2/google-api-client-1.33.2.jar -O google-api-client-1.33.2.jar wget https://repo1.maven.org/maven2/com/google/oauth-client/google-oauth-client/1.33.1/google-oauth-client-1.33.1.jar -O google-oauth-client-1.33.1.jar wget https://repo1.maven.org/maven2/com/google/http-client/google-http-client-jackson2/1.41.5/google-http-client-jackson2-1.41.5.jar -O google-http-client-jackson2-1.41.5.jar Edit /opt/jans/jetty/jans-auth/webapps/oxauth.xml and add the following line: <Set name=\"extraClasspath\">./custom/libs/google-oauth-client-1.33.1.jar,./custom/libs/google-api-client-1.33.2.jar,./custom/libs/google-http-client-jackson2-1.41.5.jar</Set></Configure> Restart the jans-auth service systemctl status jans-auth Properties # The custom script has the following properties: Property Description Input value google_creds_file Details of the client created on https://console.cloud.google.com/apis/credentials. See this step. /etc/certs/google_client_secret.json To update this setting in Jans persistence, follow this link Enable Sign-in with Google Authentication script # By default, users will get the default authentication mechanism as specified above. However, using the OpenID Connect acr_values parameter, web and mobile clients can request any enabled authentication mechanism. Obtain the json contents of google custom script by using a jans-cli command like get-config-scripts-by-type, get-config-scripts-by-inum etc. e.g : /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-type --url-suffix type:PERSON_AUTHENTICATION , /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-inum --url-suffix inum:6122281b-b55d-4dd0-8115-b098eeeee2b7 Update the custom script and change the enabled attribute to true Now Google is an available authentication mechanism for your Janssen Server. This means that, using OpenID Connect acr_values, applications can now request Google authentication for users. !!! Note To make sure google has been enabled successfully, you can check your Janssen's Auth Server OpenID Connect configuration by navigating to the following URL: https:// /.well-known/openid-configuration. Find \"acr_values_supported\": and you should see \"google\". Make Sign-in with Google Script as default authentication script: # Use this link as a reference. Steps: 1. Create a file say google-auth-default.json with the following contents { \"defaultAcr\": \"google\" } 2.Update the default authentication method to Google Sign-in /opt/jans/jans-cli/config-cli.py --operation-id put-acrs --data /tmp/google-auth-default.json NOTE To make sure google has been enabled successfully as a default authentication method, you can check your Gluu Server's OpenID Connect configuration by navigating to the following URL: https://<hostname>/.well-known/openid-configuration . Find \"acr_values_supported\": and you should see \"google\" . Test the feature - Sign-in with Google # To test , enter the complete URL for authorization in a browser or create a simple webmapage with a link that simulates the user sign-in attempt. If the server is configured properly, the first page for the selected authentication method will be displayed to the user. An example of a complete URL looks like this - https://<your.jans.server>/jans-auth/authorize.htm?response_type=code&redirect_uri=https://<your.jans.server>/admin&client_id=<replace_with_inum_client_id>&scope=openid+profile+email+user_name&state=faad2cdjfdddjfkdf&nonce=dajdffdfsdcfff","title":"Index"},{"location":"script-catalog/person_authentication/google-external-authenticator/#social-login-with-google","text":"An out-of-the-box feature, the Google Authentication script is a PersonAuthenticationType script which enables a user to sign-in using Google credentials. Google's OAuth 2.0 APIs are used for this. After users authenticate using their Google credentials, their Google credentials are provisioned into the Jans-auth server.","title":"Social Login with Google"},{"location":"script-catalog/person_authentication/google-external-authenticator/#prerequisites","text":"A Jans-auth Server (installation instructions here ) The Google authentication script (included in the default Jans-auth Server distribution); A Google account . Google API jars namely google-api-client , google-oauth-client and google-http-client-jackson2 added to jans-auth-server","title":"Prerequisites"},{"location":"script-catalog/person_authentication/google-external-authenticator/#configuring-google-api-keys","text":"On the Google side, you need OAuth 2.0 credentials, including a client ID and client secret, to authenticate users and gain access to Google's APIs. The following steps explain how to create credentials for your project. Your applications can then use the credentials to access APIs that you have enabled for that project. Go to the Credentials page . Click Create credentials > OAuth client ID. Select the Web application application type. Name your OAuth 2.0 client and click Create Configure Authorized redirect URIs , click ADD URI to add the Janssen's https://my.auth.server/postlogin.htm where the control returns back to the AS. Configure Authorized JavaScript origins , click ADD URI to add Janssen's FQDN https://my.auth.server because we are using Google Client JS and it needs valid JS origin.","title":"Configuring Google API keys:"},{"location":"script-catalog/person_authentication/google-external-authenticator/#configure-jans-auth-server","text":"","title":"Configure jans-auth server"},{"location":"script-catalog/person_authentication/google-external-authenticator/#download-google-client-json-file","text":"On the following page, https://console.cloud.google.com/apis/credentials, you will see a table containing your recently created client. Click on the download button and download the JSON file containing details of the Client. Place this file in /etc/certs/google_client_secret.json","title":"Download Google Client JSON file"},{"location":"script-catalog/person_authentication/google-external-authenticator/#add-google-libraries-to-jans-auth-server","text":"Copy the library files to /opt/jans/jetty/jans-auth/custom/libs cd /opt/jans/jetty/jans-auth/custom/libs wget https://repo1.maven.org/maven2/com/google/api-client/google-api-client/1.33.2/google-api-client-1.33.2.jar -O google-api-client-1.33.2.jar wget https://repo1.maven.org/maven2/com/google/oauth-client/google-oauth-client/1.33.1/google-oauth-client-1.33.1.jar -O google-oauth-client-1.33.1.jar wget https://repo1.maven.org/maven2/com/google/http-client/google-http-client-jackson2/1.41.5/google-http-client-jackson2-1.41.5.jar -O google-http-client-jackson2-1.41.5.jar Edit /opt/jans/jetty/jans-auth/webapps/oxauth.xml and add the following line: <Set name=\"extraClasspath\">./custom/libs/google-oauth-client-1.33.1.jar,./custom/libs/google-api-client-1.33.2.jar,./custom/libs/google-http-client-jackson2-1.41.5.jar</Set></Configure> Restart the jans-auth service systemctl status jans-auth","title":"Add Google libraries to jans-auth-server"},{"location":"script-catalog/person_authentication/google-external-authenticator/#properties","text":"The custom script has the following properties: Property Description Input value google_creds_file Details of the client created on https://console.cloud.google.com/apis/credentials. See this step. /etc/certs/google_client_secret.json To update this setting in Jans persistence, follow this link","title":"Properties"},{"location":"script-catalog/person_authentication/google-external-authenticator/#enable-sign-in-with-google-authentication-script","text":"By default, users will get the default authentication mechanism as specified above. However, using the OpenID Connect acr_values parameter, web and mobile clients can request any enabled authentication mechanism. Obtain the json contents of google custom script by using a jans-cli command like get-config-scripts-by-type, get-config-scripts-by-inum etc. e.g : /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-type --url-suffix type:PERSON_AUTHENTICATION , /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-inum --url-suffix inum:6122281b-b55d-4dd0-8115-b098eeeee2b7 Update the custom script and change the enabled attribute to true Now Google is an available authentication mechanism for your Janssen Server. This means that, using OpenID Connect acr_values, applications can now request Google authentication for users. !!! Note To make sure google has been enabled successfully, you can check your Janssen's Auth Server OpenID Connect configuration by navigating to the following URL: https:// /.well-known/openid-configuration. Find \"acr_values_supported\": and you should see \"google\".","title":"Enable Sign-in with Google Authentication script"},{"location":"script-catalog/person_authentication/google-external-authenticator/#make-sign-in-with-google-script-as-default-authentication-script","text":"Use this link as a reference. Steps: 1. Create a file say google-auth-default.json with the following contents { \"defaultAcr\": \"google\" } 2.Update the default authentication method to Google Sign-in /opt/jans/jans-cli/config-cli.py --operation-id put-acrs --data /tmp/google-auth-default.json NOTE To make sure google has been enabled successfully as a default authentication method, you can check your Gluu Server's OpenID Connect configuration by navigating to the following URL: https://<hostname>/.well-known/openid-configuration . Find \"acr_values_supported\": and you should see \"google\" .","title":"Make Sign-in with Google Script as default authentication script:"},{"location":"script-catalog/person_authentication/google-external-authenticator/#test-the-feature-sign-in-with-google","text":"To test , enter the complete URL for authorization in a browser or create a simple webmapage with a link that simulates the user sign-in attempt. If the server is configured properly, the first page for the selected authentication method will be displayed to the user. An example of a complete URL looks like this - https://<your.jans.server>/jans-auth/authorize.htm?response_type=code&redirect_uri=https://<your.jans.server>/admin&client_id=<replace_with_inum_client_id>&scope=openid+profile+email+user_name&state=faad2cdjfdddjfkdf&nonce=dajdffdfsdcfff","title":"Test the feature - Sign-in with Google"},{"location":"script-catalog/person_authentication/other/acr_router/","text":"This is a person authentication module for oxAuth that enables user to forward authorization endpoint with a different acr_values as specified in the Custom property Key. 1) new_acr_value - It's mandatory property. It's the new acr_value where user will be routed. Please make sure acr_value where user will be redirected is enabled and shown avaialble in acr_values_supported /.well-known/openid-configuration.","title":"Index"},{"location":"script-catalog/person_authentication/other/allowed_countries/","text":"This is a person authentication module for oxAuth to allow access based on the user location. 1) allowed_countries = short Country codes (eg US,UK,IN) separated by comma which will be allowed to access","title":"Index"},{"location":"script-catalog/person_authentication/other/authz/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/person_authentication/other/authz/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/person_authentication/other/authz/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/person_authentication/other/authz/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/person_authentication/other/azuread/","text":"This is a person authentication module for oxAuth that allows user to authenticate against Azure AD. Required Custom property (key/value) - 1) azure_tenant_id (Azure AD's Tenant ID) 2) azure_client_id 3) azure_client_secret 4) azure_ad_attributes_list = oid,given_name,family_name,upn 5) gluu_ldap_attributes_list = uid,givenName,sn,mail Note: An administrator of the Azure AD portal (portal.azure.com) needs to create an application for Gluu Server in the azure portal (with necessary permissions) and configure the client id and client secret in the Custom properties of this Jython script.","title":"Index"},{"location":"script-catalog/person_authentication/other/basic.change_password/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/person_authentication/other/basic.change_password/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/person_authentication/other/basic.change_password/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/person_authentication/other/basic.change_password/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/person_authentication/other/basic.client_group/","text":"This person authentication module for oxAuth allows to restrict access to RP for specific user groups. It allows to define configuration for each client. This module has one mandatory property configuration_file . It's path to JSON configuration file Example: /etc/certs/client_group.json Example content of this file: { \"client_1\":{ \"client_inum\":\"client_inum_1\", \"user_group\":[ \"group_dn_1\", \"group_dn_2\" ] }, \"client_2\":{ \"client_inum\":\"client_inum_2\", \"user_group\":[ \"group_dn_1\", \"group_dn_2\" ] } } Also it's possible to define how it should work when there is no configuration for specific client. This is controlled via property: allow_default_login : true/false","title":"Index"},{"location":"script-catalog/person_authentication/other/basic.external_logout/","text":"This is person authentication module for oxAuth which do basic authentication and at logout do redirect to external service. This module hasn't properties.","title":"Index"},{"location":"script-catalog/person_authentication/other/basic.lock.account/","text":"Script contents here This is a person authentication script for jans-auth-server which does basic authentication. It looks user account after specified number of unsuccessful login attempts. This module has 2 properties: 1) invalid_login_count_attribute - Specify attribute where script stores count of invalid number of login attemps Default value: jansCountInvalidLogin 2) maximum_invalid_login_attemps - Specify how many times user can enter invalid password before application will lock account Allowed values: integer value greater that 0 Example: 3 Default value: 3 3) lock_expiration_time - Specify the time in seconds when lock will be expired Default value: 180","title":"Index"},{"location":"script-catalog/person_authentication/other/basic.multi_auth_conf/","text":"This is person authentication module for oxAuth which allows to specify multiple authentication configurations. Installation # This list of steps needed to do to enable Basic Multi person authentication module. This module depends on python libraries. In order to use it we need to install Jython. Please use next articles to proper Jython installation: Installation notest: http://ox.gluu.org/doku.php?id=oxtauth:customauthscript#jython_installation_optional Jython integration: http://ox.gluu.org/doku.php?id=oxtauth:customauthscript#jython_python_integration Copy shared required python libraries from ../shared_libs folder to $CATALINA_HOME/conf/python folder. Prepare authentication configuration file /etc/certs/multi_auth_conf.json. There is format description and sample configuration in README.txt. Confire new custom module in oxTrust: Log into oxTrust with administrative permissions. Open \"Configuration\u2192Manage Custom Scripts\" page. Select \"Person Authentication\" tab. Click on \"Add custom script configuration\" link. Enter name = basic_multi_auth_conf Enter level = 0-100 (priority of this method). Select usage type \"Interactive\". Add custom required and optional properties which specified in README.txt Copy/paste script from BasicMultiAuthConfExternalAuthenticator.py. Activate it via \"Enabled\" checkbox. Click \"Update\" button at the bottom of this page. Configure oxAuth to use Basic Multi authentication by default: Log into oxTrust with administrative permissions. Open \"Configuration\u2192Manage Authentication\" page. Scroll to \"Default Authentication Method\" panel. Select \"basic_multi_auth_conf\" authentication mode. Click \"Update\" button at the bottom of this page. Try to log in using Basic Multi authentication method: Wait 30 seconds and try to log in again. During this time oxAuth reload list of available person authentication modules. Open second browser or second browsing session and try to log in again. It's better to try to do that from another browser session because we can return back to previous authentication method if something will go wrong. There are log messages in this custom authentication script. In order to debug this module we can use command like this: tail -f /opt/tomcat/logs/wrapper.log | grep \"Basic (multi auth conf)\" Configuration # This module has only one property: 1) auth_configuration_file - It's path to file which contains AD LDAP authentication connection details and list of attributes which user can use in order to log in. Example: /etc/certs/multi_auth_conf.json Example content of this file [ 'bindPassword' should be the base64 encoded of password text. You can take the advantage of 'encode.py' script to encode/decode your password. 'encode.py' is available inside Gluu server container ( location: /opt/gluu/bin/ ) ]: { \"ldap_configuration\": [ { \"configId\":\"ad_1\", \"servers\":[\"localhost:1389\"], \"bindDN\":\"cn=directory manager\", \"bindPassword\":\"encoded_pass\", \"useSSL\":false, \"maxConnections\":3, \"baseDNs\":[\"ou=people,o=gluu\"], \"loginAttributes\":[\"uid\"], \"localLoginAttributes\":[\"uid\"] }, { \"configId\":\"ad_2\", \"servers\":[\"localhost:2389\"], \"bindDN\":\"cn=directory manager\", \"bindPassword\":\"encoded_pass\", \"useSSL\":false, \"maxConnections\":3, \"baseDNs\":[\"ou=people,o=gluu\"], \"loginAttributes\":[\"mail\"], \"localLoginAttributes\":[\"mail\"] } ] } The names/values of properties are similar to oxAuth/oxTrust ldap configuration files.","title":"Index"},{"location":"script-catalog/person_authentication/other/basic.multi_auth_conf/#installation","text":"This list of steps needed to do to enable Basic Multi person authentication module. This module depends on python libraries. In order to use it we need to install Jython. Please use next articles to proper Jython installation: Installation notest: http://ox.gluu.org/doku.php?id=oxtauth:customauthscript#jython_installation_optional Jython integration: http://ox.gluu.org/doku.php?id=oxtauth:customauthscript#jython_python_integration Copy shared required python libraries from ../shared_libs folder to $CATALINA_HOME/conf/python folder. Prepare authentication configuration file /etc/certs/multi_auth_conf.json. There is format description and sample configuration in README.txt. Confire new custom module in oxTrust: Log into oxTrust with administrative permissions. Open \"Configuration\u2192Manage Custom Scripts\" page. Select \"Person Authentication\" tab. Click on \"Add custom script configuration\" link. Enter name = basic_multi_auth_conf Enter level = 0-100 (priority of this method). Select usage type \"Interactive\". Add custom required and optional properties which specified in README.txt Copy/paste script from BasicMultiAuthConfExternalAuthenticator.py. Activate it via \"Enabled\" checkbox. Click \"Update\" button at the bottom of this page. Configure oxAuth to use Basic Multi authentication by default: Log into oxTrust with administrative permissions. Open \"Configuration\u2192Manage Authentication\" page. Scroll to \"Default Authentication Method\" panel. Select \"basic_multi_auth_conf\" authentication mode. Click \"Update\" button at the bottom of this page. Try to log in using Basic Multi authentication method: Wait 30 seconds and try to log in again. During this time oxAuth reload list of available person authentication modules. Open second browser or second browsing session and try to log in again. It's better to try to do that from another browser session because we can return back to previous authentication method if something will go wrong. There are log messages in this custom authentication script. In order to debug this module we can use command like this: tail -f /opt/tomcat/logs/wrapper.log | grep \"Basic (multi auth conf)\"","title":"Installation"},{"location":"script-catalog/person_authentication/other/basic.multi_auth_conf/#configuration","text":"This module has only one property: 1) auth_configuration_file - It's path to file which contains AD LDAP authentication connection details and list of attributes which user can use in order to log in. Example: /etc/certs/multi_auth_conf.json Example content of this file [ 'bindPassword' should be the base64 encoded of password text. You can take the advantage of 'encode.py' script to encode/decode your password. 'encode.py' is available inside Gluu server container ( location: /opt/gluu/bin/ ) ]: { \"ldap_configuration\": [ { \"configId\":\"ad_1\", \"servers\":[\"localhost:1389\"], \"bindDN\":\"cn=directory manager\", \"bindPassword\":\"encoded_pass\", \"useSSL\":false, \"maxConnections\":3, \"baseDNs\":[\"ou=people,o=gluu\"], \"loginAttributes\":[\"uid\"], \"localLoginAttributes\":[\"uid\"] }, { \"configId\":\"ad_2\", \"servers\":[\"localhost:2389\"], \"bindDN\":\"cn=directory manager\", \"bindPassword\":\"encoded_pass\", \"useSSL\":false, \"maxConnections\":3, \"baseDNs\":[\"ou=people,o=gluu\"], \"loginAttributes\":[\"mail\"], \"localLoginAttributes\":[\"mail\"] } ] } The names/values of properties are similar to oxAuth/oxTrust ldap configuration files.","title":"Configuration"},{"location":"script-catalog/person_authentication/other/basic.multi_login/","text":"This is person authentication modules for oxAuth which allows to use several attributes as user name. Install # This list of steps needed to do to enable Basic Multi Login person authentication module. This module depends on python libraries. In order to use it we need to install Jython. Please use next articles to proper Jython installation: Installation notest: http://ox.gluu.org/doku.php?id=oxtauth:customauthscript#jython_installation_optional Jython integration: http://ox.gluu.org/doku.php?id=oxtauth:customauthscript#jython_python_integration Copy shared required python libraries from ../shared_libs folder to $CATALINA_HOME/conf/python folder. Confire new custom module in oxTrust: Log into oxTrust with administrative permissions. Open \"Configuration\u2192Manage Custom Scripts\" page. Select \"Person Authentication\" tab. Click on \"Add custom script configuration\" link. Enter name = basic_multi_login Enter level = 0-100 (priority of this method). Select usage type \"Interactive\". Add custom required and optional properties which specified in README.txt. Copy/paste script from BasicMultiLoginExternalAuthenticator.py. Activate it via \"Enabled\" checkbox. Click \"Update\" button at the bottom of this page. Configure oxAuth to use Basic Multi Login authentication by default: Log into oxTrust with administrative permissions. Open \"Configuration\u2192Manage Authentication\" page. Scroll to \"Default Authentication Method\" panel. Select \"basic_multi_login\" authentication mode. Click \"Update\" button at the bottom of this page. Try to log in using Basic Multi Login authentication method: Wait 30 seconds and try to log in again. During this time oxAuth reload list of available person authentication modules. Open second browser or second browsing session and try to log in again. It's better to try to do that from another browser session because we can return back to previous authentication method if something will go wrong. There are log messages in this custom authentication script. In order to debug this module we can use command like this: tail -f /opt/tomcat/logs/wrapper.log | grep \"Basic (multi login)\" Properties # 1) login_attributes_list - Comma separated list of attribute names. Specify list of IdP attributes which this module should use to map to local attributes. It's optional property. The count of attributes in this property should be equal to count attributes in local_login_attributes_list property. Example: uid, mail 2) local_login_attributes_list - Comma separated list of attribute names. Specify list of local attributes mapped from IdP attributes. It's optional property. The count of attributes in this property should be equal to count attributes in login_attributes_list property. Example: uid, mail","title":"Index"},{"location":"script-catalog/person_authentication/other/basic.multi_login/#install","text":"This list of steps needed to do to enable Basic Multi Login person authentication module. This module depends on python libraries. In order to use it we need to install Jython. Please use next articles to proper Jython installation: Installation notest: http://ox.gluu.org/doku.php?id=oxtauth:customauthscript#jython_installation_optional Jython integration: http://ox.gluu.org/doku.php?id=oxtauth:customauthscript#jython_python_integration Copy shared required python libraries from ../shared_libs folder to $CATALINA_HOME/conf/python folder. Confire new custom module in oxTrust: Log into oxTrust with administrative permissions. Open \"Configuration\u2192Manage Custom Scripts\" page. Select \"Person Authentication\" tab. Click on \"Add custom script configuration\" link. Enter name = basic_multi_login Enter level = 0-100 (priority of this method). Select usage type \"Interactive\". Add custom required and optional properties which specified in README.txt. Copy/paste script from BasicMultiLoginExternalAuthenticator.py. Activate it via \"Enabled\" checkbox. Click \"Update\" button at the bottom of this page. Configure oxAuth to use Basic Multi Login authentication by default: Log into oxTrust with administrative permissions. Open \"Configuration\u2192Manage Authentication\" page. Scroll to \"Default Authentication Method\" panel. Select \"basic_multi_login\" authentication mode. Click \"Update\" button at the bottom of this page. Try to log in using Basic Multi Login authentication method: Wait 30 seconds and try to log in again. During this time oxAuth reload list of available person authentication modules. Open second browser or second browsing session and try to log in again. It's better to try to do that from another browser session because we can return back to previous authentication method if something will go wrong. There are log messages in this custom authentication script. In order to debug this module we can use command like this: tail -f /opt/tomcat/logs/wrapper.log | grep \"Basic (multi login)\"","title":"Install"},{"location":"script-catalog/person_authentication/other/basic.multi_login/#properties","text":"1) login_attributes_list - Comma separated list of attribute names. Specify list of IdP attributes which this module should use to map to local attributes. It's optional property. The count of attributes in this property should be equal to count attributes in local_login_attributes_list property. Example: uid, mail 2) local_login_attributes_list - Comma separated list of attribute names. Specify list of local attributes mapped from IdP attributes. It's optional property. The count of attributes in this property should be equal to count attributes in login_attributes_list property. Example: uid, mail","title":"Properties"},{"location":"script-catalog/person_authentication/other/basic.multiple_test_email_addresses/","text":"This is person authentication modules for oxAuth which allows the use of multiple test addresses that lead to a single email account. e.g. Everything addressed to myaccount+.*@gmail.com goes to myaccount@gmail.com. They are all the same account. Read this blog for understanding the feature better - http://www.codestore.net/store.nsf/unid/BLOG-20111201-0411 oxAuth issue - https://github.com/GluuFederation/oxAuth/issues/1220","title":"Index"},{"location":"script-catalog/person_authentication/other/basic.one_session/","text":"This person authentication module for oxAuth which allows to restrict access to RP for one user session.","title":"Index"},{"location":"script-catalog/person_authentication/other/basic.password_expiration/","text":"Password Expiration # The script would ask the user to update password after 90 days.","title":"Password Expiration"},{"location":"script-catalog/person_authentication/other/basic.password_expiration/#password-expiration","text":"The script would ask the user to update password after 90 days.","title":"Password Expiration"},{"location":"script-catalog/person_authentication/other/basic.reset_to_step/","text":"This is person authentication module for oxAuth which do basic authentication. This is 3 steps authentication which supports rediect to previous authentication step. For demo purposes it asks user to pass basic authentication 3 times. After unsuccessful login attempt it forward user to previous step. This module hasn't properties.","title":"Index"},{"location":"script-catalog/person_authentication/other/bcrypt_ssha_migration/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/person_authentication/other/bcrypt_ssha_migration/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/person_authentication/other/bcrypt_ssha_migration/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/person_authentication/other/bcrypt_ssha_migration/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/person_authentication/other/bioid/","text":"BioID Web Service # Overview # BioID Web Service is a \"Biometrics as a service\" provider. This document will explain how to use Gluu's BioID interception script to configure the Gluu Server for a two-step authentication process with username and password as the first step, and BioID's biometric authentication as the second step. In order to use this authentication mechanism your organization will need to register for a BioID account. Prerequisitesm # A Gluu Server ( installation instructions ); BioID interception script (included in the default Gluu Server distribution); An account with BioID . Properties # The mandatory properties in the BioID authentication script are as follows | Property | Description | Example | |-----------------------|-------------------------------|---------------| |ENDPOINT |URL of the BioID Web Service| https://bws.bioid.com/extension/ | |APP_IDENTIFIER |API key | c20b04cc-776a-45ed-7a1f-06347f8edf6c | |APP_SECRET |API secret | sTGB4n4HAkvc2BnJp6KeNUTk | |STORAGE |The storage name assigned by BioID depending on the type of contract you have. | bws | |PARTITION |A number assigned to your company by BioID. | 12345 | Configure BioID Account # Sign up for a BioID account. Upon registration, you will recieve an email with the instance name (listed as STORAGE in Gluu's BioID authentication script), partition number(listed as PARTITION in Gluu's BioID authentication script). As the owner of this instance, you are entitled to access BWS Portal at https://bwsportal.bioid.com using the account associated with your email. With the BWS Portal, you can do the following: a. View your trial information such as your credentials (e.g. your client certificate), enrolled classes, BWS logs and more. b. Create your App ID and App secret, under \"Web API keys\". BioID Documentation # You can find all API reference at https://developer.bioid.com/bwsreference. Lots of useful information about BWS is available at https://developer.bioid.com/blog. If you intend to use liveness detection, you will find information about motion trigger helpful: https://developer.bioid.com/app-developer-guide/bioid-motion-detection Configure oxTrust # Follow the steps below to configure the BioID module in the oxTrust Admin GUI. Navigate to Configuration > Person Authentication Scripts . Scroll down to the BioID authentication script Configure the properties, all of which are mandatory, according to your API Enable the script by ticking the check box Now BioID's biometric authentication is available as an authentication mechanism for your Gluu Server. This means that, using OpenID Connect acr_values , applications can now request BioID biometric authentication for users. Note To make sure BioID has been enabled successfully, you can check your Gluu Server's OpenID Connect configuration by navigating to the following URL: https://<hostname>/.well-known/openid-configuration . Find \"acr_values_supported\": and you should see \"bioid\" . Make BioID the Default Authentication Mechanism # Now applications can request BioID's biometric authentication. To make BioID biometic authentication your default authentication mechanism, follow these instructions: Navigate to Configuration > Manage Authentication . Select the Default Authentication Method tab. In the Default Authentication Method window you will see two options: Default acr and oxTrust acr . The oxTrust acr field controls the authentication mechanism that is presented to access the oxTrust dashboard GUI (the application you are in). The Default acr field controls the default authentication mechanism that is presented to users from all applications that leverage your Gluu Server for authentication. You can change one or both fields to BioID authentication as you see fit. If you want BioID to be the default authentication mechanism for access to oxTrust and all other applications that leverage your Gluu Server, change both fields to bioid.","title":"BioID Web Service"},{"location":"script-catalog/person_authentication/other/bioid/#bioid-web-service","text":"","title":"BioID Web Service"},{"location":"script-catalog/person_authentication/other/bioid/#overview","text":"BioID Web Service is a \"Biometrics as a service\" provider. This document will explain how to use Gluu's BioID interception script to configure the Gluu Server for a two-step authentication process with username and password as the first step, and BioID's biometric authentication as the second step. In order to use this authentication mechanism your organization will need to register for a BioID account.","title":"Overview"},{"location":"script-catalog/person_authentication/other/bioid/#prerequisitesm","text":"A Gluu Server ( installation instructions ); BioID interception script (included in the default Gluu Server distribution); An account with BioID .","title":"Prerequisitesm"},{"location":"script-catalog/person_authentication/other/bioid/#properties","text":"The mandatory properties in the BioID authentication script are as follows | Property | Description | Example | |-----------------------|-------------------------------|---------------| |ENDPOINT |URL of the BioID Web Service| https://bws.bioid.com/extension/ | |APP_IDENTIFIER |API key | c20b04cc-776a-45ed-7a1f-06347f8edf6c | |APP_SECRET |API secret | sTGB4n4HAkvc2BnJp6KeNUTk | |STORAGE |The storage name assigned by BioID depending on the type of contract you have. | bws | |PARTITION |A number assigned to your company by BioID. | 12345 |","title":"Properties"},{"location":"script-catalog/person_authentication/other/bioid/#configure-bioid-account","text":"Sign up for a BioID account. Upon registration, you will recieve an email with the instance name (listed as STORAGE in Gluu's BioID authentication script), partition number(listed as PARTITION in Gluu's BioID authentication script). As the owner of this instance, you are entitled to access BWS Portal at https://bwsportal.bioid.com using the account associated with your email. With the BWS Portal, you can do the following: a. View your trial information such as your credentials (e.g. your client certificate), enrolled classes, BWS logs and more. b. Create your App ID and App secret, under \"Web API keys\".","title":"Configure BioID Account"},{"location":"script-catalog/person_authentication/other/bioid/#bioid-documentation","text":"You can find all API reference at https://developer.bioid.com/bwsreference. Lots of useful information about BWS is available at https://developer.bioid.com/blog. If you intend to use liveness detection, you will find information about motion trigger helpful: https://developer.bioid.com/app-developer-guide/bioid-motion-detection","title":"BioID Documentation"},{"location":"script-catalog/person_authentication/other/bioid/#configure-oxtrust","text":"Follow the steps below to configure the BioID module in the oxTrust Admin GUI. Navigate to Configuration > Person Authentication Scripts . Scroll down to the BioID authentication script Configure the properties, all of which are mandatory, according to your API Enable the script by ticking the check box Now BioID's biometric authentication is available as an authentication mechanism for your Gluu Server. This means that, using OpenID Connect acr_values , applications can now request BioID biometric authentication for users. Note To make sure BioID has been enabled successfully, you can check your Gluu Server's OpenID Connect configuration by navigating to the following URL: https://<hostname>/.well-known/openid-configuration . Find \"acr_values_supported\": and you should see \"bioid\" .","title":"Configure oxTrust"},{"location":"script-catalog/person_authentication/other/bioid/#make-bioid-the-default-authentication-mechanism","text":"Now applications can request BioID's biometric authentication. To make BioID biometic authentication your default authentication mechanism, follow these instructions: Navigate to Configuration > Manage Authentication . Select the Default Authentication Method tab. In the Default Authentication Method window you will see two options: Default acr and oxTrust acr . The oxTrust acr field controls the authentication mechanism that is presented to access the oxTrust dashboard GUI (the application you are in). The Default acr field controls the default authentication mechanism that is presented to users from all applications that leverage your Gluu Server for authentication. You can change one or both fields to BioID authentication as you see fit. If you want BioID to be the default authentication mechanism for access to oxTrust and all other applications that leverage your Gluu Server, change both fields to bioid.","title":"Make BioID the Default Authentication Mechanism"},{"location":"script-catalog/person_authentication/other/cas2/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/person_authentication/other/cas2/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/person_authentication/other/cas2/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/person_authentication/other/cas2/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/person_authentication/other/cas2_duo/Readme/","text":"Description # This script uses CAS2 and DUO scripts. Hence both script properties should be added. Before deploying it user should do: 1. Put Cas2ExternalAuthenticator.py and DuoExternalAuthenticator.py into /opt/gluu/python/libs . - wget -c https://raw.githubusercontent.com/GluuFederation/oxAuth/master/Server/integrations/duo/DuoExternalAuthenticator.py - wget -c https://raw.githubusercontent.com/GluuFederation/oxAuth/master/Server/integrations/cas2/Cas2ExternalAuthenticator.py chown -R root:gluu /opt/gluu/python/libs Restart oxAuth service with: service oxauth stop and service oxauth start Joining flows # This diagram illustrates how script join CAS2 and DUO scripts internally. Result authentication flow can be 2 or 3 steps. Configuration: # Name: CAS2DuoExternalAuthenticator Description: First AuthN with CAS server; 2FA with Gluu Server's Duo Programming Lanauge: Python / Level: 100 Location Type: Ldap / Usage type: Web Custom property ( key/value ): cas_map_user : false cas_review_opt : true cas_host : [hostname_of_cas_server] duo_creds_file : /etc/certs/duo_creds.json duo_host : [api-abcd.duosecurity.com] Script: Grab script and enable","title":"Description"},{"location":"script-catalog/person_authentication/other/cas2_duo/Readme/#description","text":"This script uses CAS2 and DUO scripts. Hence both script properties should be added. Before deploying it user should do: 1. Put Cas2ExternalAuthenticator.py and DuoExternalAuthenticator.py into /opt/gluu/python/libs . - wget -c https://raw.githubusercontent.com/GluuFederation/oxAuth/master/Server/integrations/duo/DuoExternalAuthenticator.py - wget -c https://raw.githubusercontent.com/GluuFederation/oxAuth/master/Server/integrations/cas2/Cas2ExternalAuthenticator.py chown -R root:gluu /opt/gluu/python/libs Restart oxAuth service with: service oxauth stop and service oxauth start","title":"Description"},{"location":"script-catalog/person_authentication/other/cas2_duo/Readme/#joining-flows","text":"This diagram illustrates how script join CAS2 and DUO scripts internally. Result authentication flow can be 2 or 3 steps.","title":"Joining flows"},{"location":"script-catalog/person_authentication/other/cas2_duo/Readme/#configuration","text":"Name: CAS2DuoExternalAuthenticator Description: First AuthN with CAS server; 2FA with Gluu Server's Duo Programming Lanauge: Python / Level: 100 Location Type: Ldap / Usage type: Web Custom property ( key/value ): cas_map_user : false cas_review_opt : true cas_host : [hostname_of_cas_server] duo_creds_file : /etc/certs/duo_creds.json duo_host : [api-abcd.duosecurity.com] Script: Grab script and enable","title":"Configuration:"},{"location":"script-catalog/person_authentication/other/cert/","text":"Script contents here This is a person authentication script for jans-auth-server that enables user Certificate Authentication. Properties # The module has a few properties: 1) chain_cert_file_path - It's mandatory property. It's path to file with cert chains in pem format. Example: '/etc/certs/chain_cert.pem' 2) map_user_cert - Specify if script should map new user to local account. If true, then on the first authentication, the script will prompt for a username/password in step 2, and then store the certificate fingerprint in the oxExternalUid attribute. Allowed values: true/false Example: true 3) use_generic_validator, use_path_validator, use_ocsp_validator, use_crl_validator - Enable/Disable specific certificate validation. Allowed values: true/false Example: true 4) crl_max_response_size - Specify maximum allowed size of CRL response Allowed values: integer value greater that 0 Example: 10485760 Default value: 5242880 5) credentials_file - Patch to file with reCAPTCHA credentials. Example: '/etc/certs/cert_credentials.json' Generating Certificates Without Configuration # 1. Generate a certificate authority (CA) cert. # 1. Generate your CA certificate using this command: # openssl req -newkey rsa:4096 -keyform PEM -keyout ca.key -x509 -days 3650 -outform PEM -out ca.cer 2. Generate a client SSL certificate # 1. Generate a private key for the SSL client. # openssl genrsa -out client.key 4096 2. Use the client's private key to generate a cert request. # openssl req -new -key client.key -out client.req 3. Issue the client certificate using the cert request and the CA cert/key. # openssl x509 -req -in client.req -CA ca.cer -CAkey ca.key -set_serial 101 -extensions client -days 365 -outform PEM -out client.cer 4. Convert the client certificate and private key to pkcs#12 format for use by browsers. # openssl pkcs12 -export -inkey client.key -in client.cer -out client.p12 5. Clean up - remove the client private key, client cert and client request files as the pkcs12 has everything needed. # rm client.key client.cer client.req Generating Certificate With Configuration # For testing purposes there is archive with CA/Intermidiate/User certs in archive . 1. Create and sign Root CA # 1.1. Generate password protected a 8192-bit long SHA-256 RSA key for root CA: # openssl genrsa -aes256 -out rootca.key 8192 Example output: Generating RSA private key, 8192 bit long modulus (2 primes) ....................+++ ........................................................................................................................................................................................................................................................................................................................................................................................+++ e is 65537 (0x010001) Enter pass phrase for rootca.key: Verifying - Enter pass phrase for rootca.key: 1.2 Create the self-signed root CA certificate ca.crt; you'll need to provide an identity for your root CA: # openssl req -sha256 -new -x509 -days 1826 -key rootca.key -out rootca.crt Example output: Enter pass phrase for rootca.key: You are about to be asked to enter information that will be incorporated into your certificate request. What you are about to enter is what is called a Distinguished Name or a DN. There are quite a few fields but you can leave some blank For some fields there will be a default value, If you enter '.', the field will be left blank. ----- Country Name (2 letter code) [AU]:US State or Province Name (full name) [Some-State]:TX Locality Name (eg, city) []:Austin Organization Name (eg, company) [Internet Widgits Pty Ltd]:Gluu, Inc. Organizational Unit Name (eg, section) []:Gluu CA Common Name (e.g. server FQDN or YOUR name) []:Gluu Root CA Email Address []: 1.3. Create root-ca.conf file: # [ ca ] default_ca = gluuca [ crl_ext ] issuerAltName=issuer:copy authorityKeyIdentifier=keyid:always [ gluuca ] dir = ./ new_certs_dir = $dir unique_subject = no certificate = $dir/rootca.crt database = $dir/certindex private_key = $dir/rootca.key serial = $dir/certserial default_days = 730 default_md = sha1 policy = gluuca_policy x509_extensions = gluuca_extensions crlnumber = $dir/crlnumber default_crl_days = 730 [ gluuca_policy ] commonName = supplied stateOrProvinceName = supplied countryName = optional emailAddress = optional organizationName = supplied organizationalUnitName = optional [ gluuca_extensions ] basicConstraints = critical,CA:TRUE,pathlen:0 keyUsage = critical,any subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always,issuer keyUsage = digitalSignature,cRLSign,keyCertSign extendedKeyUsage = serverAuth crlDistributionPoints = @crl_section subjectAltName = @alt_names authorityInfoAccess = @ocsp_section [alt_names] DNS.0 = Gluu Intermidiate CA 1 DNS.1 = Gluu CA Intermidiate 1 [crl_section] URI.0 = http://pki.gluu.org/GluuRoot.crl URI.1 = http://pki.backup.com/GluuRoot.crl [ocsp_section] caIssuers;URI.0 = http://pki.gluu.org/GluuRoot.crt caIssuers;URI.1 = http://pki.backup.com/GluuRoot.crt OCSP;URI.0 = http://pki.gluu.org/ocsp/ OCSP;URI.1 = http://pki.backup.com/ocsp/ 1.4. Create a few files where the CA will store it's serials: # touch certindex echo 1000 > certserial echo 1000 > crlnumber 1.5. If you need to set a specific certificate start / expiry date, add the following to [gluuca] # # format: YYYYMMDDHHMMSS default_enddate = 20191222035911 default_startdate = 20181222035911 2. Create and sign Intermediate 1 CA # 2.1. Generate the intermediate CA's private key: # openssl genrsa -out intermediate1.key 4096 Example output: Generating RSA private key, 4096 bit long modulus (2 primes) ........................................................++++ .........++++ e is 65537 (0x010001) 2.2. Generate the intermediate1 CA's CSR: # openssl req -new -sha256 -key intermediate1.key -out intermediate1.csr Example output: You are about to be asked to enter information that will be incorporated into your certificate request. What you are about to enter is what is called a Distinguished Name or a DN. There are quite a few fields but you can leave some blank For some fields there will be a default value, If you enter '.', the field will be left blank. ----- Country Name (2 letter code) [AU]:US State or Province Name (full name) [Some-State]:TX Locality Name (eg, city) []:Austin Organization Name (eg, company) [Internet Widgits Pty Ltd]:Gluu, Inc. Organizational Unit Name (eg, section) []:Gluu CA Common Name (e.g. server FQDN or YOUR name) []:Gluu Intermediate CA Email Address []: Please enter the following 'extra' attributes to be sent with your certificate request A challenge password []: An optional company name []: 2.3. Sign the intermediate1 CSR with the Root CA: # openssl ca -batch -config root-ca.conf -notext -in intermediate1.csr -out intermediate1.crt Example output: Using configuration from root-ca.conf Enter pass phrase for .//rootca.key: Check that the request matches the signature Signature ok The Subject's Distinguished Name is as follows countryName :PRINTABLE:'US' stateOrProvinceName :ASN.1 12:'TX' localityName :ASN.1 12:'Austin' organizationName :ASN.1 12:'Gluu, Inc.' organizationalUnitName:ASN.1 12:'Gluu CA' commonName :ASN.1 12:'Gluu Intermediate CA' Certificate is to be certified until Dec 22 07:39:24 2021 GMT (730 days) Write out database with 1 new entries Data Base Updated 2.4. Generate the CRL (both in PEM and DER): # openssl ca -config root-ca.conf -gencrl -keyfile rootca.key -cert rootca.crt -out rootca.crl.pem openssl crl -inform PEM -in rootca.crl.pem -outform DER -out rootca.crl Generate the CRL after every certificate you sign with the CA. 2.5. Configuring the Intermediate CA 1 # Create a new folder for this intermediate and move in to it: mkdir intermediate1 cd ./intermediate1 Copy the Intermediate cert and key from the Root CA: mv ../intermediate1.* ./ Create the index files: touch certindex echo 1000 > certserial echo 1000 > crlnumber 2.6. Create a new intermediate-ca.conf file: # [ ca ] default_ca = gluuca [ crl_ext ] issuerAltName=issuer:copy authorityKeyIdentifier=keyid:always [ gluuca ] dir = ./ new_certs_dir = $dir unique_subject = no certificate = $dir/intermediate1.crt database = $dir/certindex private_key = $dir/intermediate1.key serial = $dir/certserial default_days = 365 default_md = sha1 policy = gluuca_policy x509_extensions = gluuca_extensions crlnumber = $dir/crlnumber default_crl_days = 365 [ gluuca_policy ] commonName = supplied stateOrProvinceName = supplied countryName = optional emailAddress = optional organizationName = supplied organizationalUnitName = optional [ gluuca_extensions ] basicConstraints = critical,CA:FALSE keyUsage = critical,any subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always,issuer keyUsage = digitalSignature, nonRepudiation, keyEncipherment extendedKeyUsage = clientAuth crlDistributionPoints = @crl_section subjectAltName = @alt_names authorityInfoAccess = @ocsp_section [alt_names] DNS.0 = example.com DNS.1 = example.org [crl_section] URI.0 = http://pki.gluu.org/GluuIntermidiate1.crl URI.1 = http://pki.backup.com/GluuIntermidiate1.crl [ocsp_section] caIssuers;URI.0 = http://pki.gluu.org/GluuIntermediate1.crt caIssuers;URI.1 = http://pki.backup.com/GluuIntermediate1.crt OCSP;URI.0 = http://pki.gluu.org/ocsp/ OCSP;URI.1 = http://pki.backup.com/ocsp/ Change the [alt_names] section to whatever you need as Subject Alternative names. Remove it including the subjectAltName = @alt_names line if you don't want a Subject Alternative Name. If you need to set a specific certificate start / expiry date, add the following to [gluuca] # format: YYYYMMDDHHMMSS default_enddate = 20191222035911 default_startdate = 20181222035911 Generate an empty CRL (both in PEM and DER): openssl ca -config intermediate-ca.conf -gencrl -keyfile intermediate1.key -cert intermediate1.crt -out intermediate1.crl.pem openssl crl -inform PEM -in intermediate1.crl.pem -outform DER -out intermediate1.crl 2.7. This is sample to show how to revoke cert. Use it only when you need to revoke the intermediate cert: # openssl ca -config root-ca.conf -revoke intermediate1.crt -keyfile rootca.key -cert rootca.crt 3. Creating end user certificates # We use this new intermediate CA to generate an end user certificate. Repeat these steps for every end user certificate you want to sign with this CA. 3.1. Create folder for end user certs: # mkdir enduser-certs 3.2. Generate the end user's private key: # openssl genrsa -out enduser-certs/user-gluu.org.key 4096 3.3. Generate the end user's CSR: # openssl req -new -sha256 -key enduser-certs/user-gluu.org.key -out enduser-certs/user-gluu.org.csr Example output: You are about to be asked to enter information that will be incorporated into your certificate request. What you are about to enter is what is called a Distinguished Name or a DN. There are quite a few fields but you can leave some blank For some fields there will be a default value, If you enter '.', the field will be left blank. ----- Country Name (2 letter code) [AU]:US State or Province Name (full name) [Some-State]:TX Locality Name (eg, city) []:Austin Organization Name (eg, company) [Internet Widgits Pty Ltd]:Gluu, Inc. Organizational Unit Name (eg, section) []:User Common Name (e.g. server FQDN or YOUR name) []:Full User Name Email Address []: Please enter the following 'extra' attributes to be sent with your certificate request A challenge password []: An optional company name []: 3.4. Sign the end user's CSR with the Intermediate 1 CA: # openssl ca -batch -config intermediate-ca.conf -notext -in enduser-certs/user-gluu.org.csr -out enduser-certs/user-gluu.org.crt Example output: Using configuration from intermediate-ca.conf Check that the request matches the signature Signature ok The Subject's Distinguished Name is as follows countryName :PRINTABLE:'US' stateOrProvinceName :ASN.1 12:'TX' localityName :ASN.1 12:'Austin' organizationName :ASN.1 12:'Gluu, Inc.' organizationalUnitName:ASN.1 12:'User' commonName :ASN.1 12:'Full User Name' Certificate is to be certified until Dec 22 08:07:15 2020 GMT (365 days) Write out database with 1 new entries Data Base Updated 3.5. Generate the CRL (both in PEM and DER): # openssl ca -config intermediate-ca.conf -gencrl -keyfile intermediate1.key -cert intermediate1.crt -out intermediate1.crl.pem openssl crl -inform PEM -in intermediate1.crl.pem -outform DER -out intermediate1.crl Generate the CRL after every certificate you sign with the CA. 3.6. Create the certificate chain file by concatenating the Root and intermediate 1 certificates together. # cat ../rootca.crt intermediate1.crt > enduser-certs/user-gluu.org.chain Send the following files to the end user: user-gluu.org.crt user-gluu.org.key user-gluu.org.chain You can also let the end user supply their own CSR and just send them the .crt file. Do not delete that from the server, otherwise you cannot revoke it. 3.7. This is sample to show how to revoke cert. Use it only when you need to revoke the end users cert: # openssl ca -config intermediate-ca.conf -revoke enduser-certs/enduser-gluu.org.crt -keyfile intermediate1.key -cert intermediate1.crt 4. Validating the certificate # 4.1. You can validate the end user certificate against the chain using the following command: # openssl verify -CAfile enduser-certs/user-gluu.org.chain enduser-certs/user-gluu.org.crt Example output: enduser-certs/user-gluu.org.crt: OK 4.2. You can also validate it against the CRL. Concatenate the PEM CRL and the chain together first: # cat ../rootca.crt intermediate1.crt intermediate1.crl.pem > enduser-certs/user-gluu.org.crl.chain Verify the certificate: openssl verify -crl_check -CAfile enduser-certs/user-gluu.org.crl.chain enduser-certs/user-gluu.org.crt Example output: enduser-certs/user-gluu.org.crt: OK 5. Export end user certificate to PKCS#12 # Convert a PEM certificate file and a private key to PKCS#12 (.pfx .p12) openssl pkcs12 -export -out enduser-certs/user-gluu.org.pfx -inkey enduser-certs/user-gluu.org.key -in enduser-certs/user-gluu.org.crt -certfile enduser-certs/user-gluu.org.chain Quick Certificates for Testing # 1. Create a user_cert.conf file and update user_dn section: # [ req ] days = 365 prompt = no distinguished_name = user_dn x509_extensions = v3_ca [ user_dn ] countryName = US stateOrProvinceName = TX localityName = Austin organizationName = Gluu, Inc. organizationalUnitName = Gluu SSL department commonName = secure.gluu.com emailAddress = john@gluu.org [ v3_ca ] basicConstraints = CA:FALSE subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always, issuer extendedKeyUsage = clientAuth, emailProtection 2. Generate user cert # openssl req -x509 -config user_cert.conf -nodes -newkey rsa:4096 -keyout user_cert.key -out user_cert.crt 3. Export end user certificate to PKCS#12 # openssl pkcs12 -export -inkey user_cert.key -in user_cert.crt -out user_cert.p12","title":"Index"},{"location":"script-catalog/person_authentication/other/cert/#properties","text":"The module has a few properties: 1) chain_cert_file_path - It's mandatory property. It's path to file with cert chains in pem format. Example: '/etc/certs/chain_cert.pem' 2) map_user_cert - Specify if script should map new user to local account. If true, then on the first authentication, the script will prompt for a username/password in step 2, and then store the certificate fingerprint in the oxExternalUid attribute. Allowed values: true/false Example: true 3) use_generic_validator, use_path_validator, use_ocsp_validator, use_crl_validator - Enable/Disable specific certificate validation. Allowed values: true/false Example: true 4) crl_max_response_size - Specify maximum allowed size of CRL response Allowed values: integer value greater that 0 Example: 10485760 Default value: 5242880 5) credentials_file - Patch to file with reCAPTCHA credentials. Example: '/etc/certs/cert_credentials.json'","title":"Properties"},{"location":"script-catalog/person_authentication/other/cert/#generating-certificates-without-configuration","text":"","title":"Generating Certificates Without Configuration"},{"location":"script-catalog/person_authentication/other/cert/#1-generate-a-certificate-authority-ca-cert","text":"","title":"1. Generate a certificate authority (CA) cert."},{"location":"script-catalog/person_authentication/other/cert/#1-generate-your-ca-certificate-using-this-command","text":"openssl req -newkey rsa:4096 -keyform PEM -keyout ca.key -x509 -days 3650 -outform PEM -out ca.cer","title":"1. Generate your CA certificate using this command:"},{"location":"script-catalog/person_authentication/other/cert/#2-generate-a-client-ssl-certificate","text":"","title":"2. Generate a client SSL certificate"},{"location":"script-catalog/person_authentication/other/cert/#1-generate-a-private-key-for-the-ssl-client","text":"openssl genrsa -out client.key 4096","title":"1. Generate a private key for the SSL client."},{"location":"script-catalog/person_authentication/other/cert/#2-use-the-clients-private-key-to-generate-a-cert-request","text":"openssl req -new -key client.key -out client.req","title":"2. Use the client's private key to generate a cert request."},{"location":"script-catalog/person_authentication/other/cert/#3-issue-the-client-certificate-using-the-cert-request-and-the-ca-certkey","text":"openssl x509 -req -in client.req -CA ca.cer -CAkey ca.key -set_serial 101 -extensions client -days 365 -outform PEM -out client.cer","title":"3. Issue the client certificate using the cert request and the CA cert/key."},{"location":"script-catalog/person_authentication/other/cert/#4-convert-the-client-certificate-and-private-key-to-pkcs12-format-for-use-by-browsers","text":"openssl pkcs12 -export -inkey client.key -in client.cer -out client.p12","title":"4. Convert the client certificate and private key to pkcs#12 format for use by browsers."},{"location":"script-catalog/person_authentication/other/cert/#5-clean-up-remove-the-client-private-key-client-cert-and-client-request-files-as-the-pkcs12-has-everything-needed","text":"rm client.key client.cer client.req","title":"5. Clean up - remove the client private key, client cert and client request files as the pkcs12 has everything needed."},{"location":"script-catalog/person_authentication/other/cert/#generating-certificate-with-configuration","text":"For testing purposes there is archive with CA/Intermidiate/User certs in archive .","title":"Generating Certificate With Configuration"},{"location":"script-catalog/person_authentication/other/cert/#1-create-and-sign-root-ca","text":"","title":"1. Create and sign Root CA"},{"location":"script-catalog/person_authentication/other/cert/#11-generate-password-protected-a-8192-bit-long-sha-256-rsa-key-for-root-ca","text":"openssl genrsa -aes256 -out rootca.key 8192 Example output: Generating RSA private key, 8192 bit long modulus (2 primes) ....................+++ ........................................................................................................................................................................................................................................................................................................................................................................................+++ e is 65537 (0x010001) Enter pass phrase for rootca.key: Verifying - Enter pass phrase for rootca.key:","title":"1.1. Generate password protected a 8192-bit long SHA-256 RSA key for root CA:"},{"location":"script-catalog/person_authentication/other/cert/#12-create-the-self-signed-root-ca-certificate-cacrt-youll-need-to-provide-an-identity-for-your-root-ca","text":"openssl req -sha256 -new -x509 -days 1826 -key rootca.key -out rootca.crt Example output: Enter pass phrase for rootca.key: You are about to be asked to enter information that will be incorporated into your certificate request. What you are about to enter is what is called a Distinguished Name or a DN. There are quite a few fields but you can leave some blank For some fields there will be a default value, If you enter '.', the field will be left blank. ----- Country Name (2 letter code) [AU]:US State or Province Name (full name) [Some-State]:TX Locality Name (eg, city) []:Austin Organization Name (eg, company) [Internet Widgits Pty Ltd]:Gluu, Inc. Organizational Unit Name (eg, section) []:Gluu CA Common Name (e.g. server FQDN or YOUR name) []:Gluu Root CA Email Address []:","title":"1.2 Create the self-signed root CA certificate ca.crt; you'll need to provide an identity for your root CA:"},{"location":"script-catalog/person_authentication/other/cert/#13-create-root-caconf-file","text":"[ ca ] default_ca = gluuca [ crl_ext ] issuerAltName=issuer:copy authorityKeyIdentifier=keyid:always [ gluuca ] dir = ./ new_certs_dir = $dir unique_subject = no certificate = $dir/rootca.crt database = $dir/certindex private_key = $dir/rootca.key serial = $dir/certserial default_days = 730 default_md = sha1 policy = gluuca_policy x509_extensions = gluuca_extensions crlnumber = $dir/crlnumber default_crl_days = 730 [ gluuca_policy ] commonName = supplied stateOrProvinceName = supplied countryName = optional emailAddress = optional organizationName = supplied organizationalUnitName = optional [ gluuca_extensions ] basicConstraints = critical,CA:TRUE,pathlen:0 keyUsage = critical,any subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always,issuer keyUsage = digitalSignature,cRLSign,keyCertSign extendedKeyUsage = serverAuth crlDistributionPoints = @crl_section subjectAltName = @alt_names authorityInfoAccess = @ocsp_section [alt_names] DNS.0 = Gluu Intermidiate CA 1 DNS.1 = Gluu CA Intermidiate 1 [crl_section] URI.0 = http://pki.gluu.org/GluuRoot.crl URI.1 = http://pki.backup.com/GluuRoot.crl [ocsp_section] caIssuers;URI.0 = http://pki.gluu.org/GluuRoot.crt caIssuers;URI.1 = http://pki.backup.com/GluuRoot.crt OCSP;URI.0 = http://pki.gluu.org/ocsp/ OCSP;URI.1 = http://pki.backup.com/ocsp/","title":"1.3. Create root-ca.conf file:"},{"location":"script-catalog/person_authentication/other/cert/#14-create-a-few-files-where-the-ca-will-store-its-serials","text":"touch certindex echo 1000 > certserial echo 1000 > crlnumber","title":"1.4. Create a few files where the CA will store it's serials:"},{"location":"script-catalog/person_authentication/other/cert/#15-if-you-need-to-set-a-specific-certificate-start-expiry-date-add-the-following-to-gluuca","text":"# format: YYYYMMDDHHMMSS default_enddate = 20191222035911 default_startdate = 20181222035911","title":"1.5. If you need to set a specific certificate start / expiry date, add the following to [gluuca]"},{"location":"script-catalog/person_authentication/other/cert/#2-create-and-sign-intermediate-1-ca","text":"","title":"2. Create and sign Intermediate 1 CA"},{"location":"script-catalog/person_authentication/other/cert/#21-generate-the-intermediate-cas-private-key","text":"openssl genrsa -out intermediate1.key 4096 Example output: Generating RSA private key, 4096 bit long modulus (2 primes) ........................................................++++ .........++++ e is 65537 (0x010001)","title":"2.1. Generate the intermediate CA's private key:"},{"location":"script-catalog/person_authentication/other/cert/#22-generate-the-intermediate1-cas-csr","text":"openssl req -new -sha256 -key intermediate1.key -out intermediate1.csr Example output: You are about to be asked to enter information that will be incorporated into your certificate request. What you are about to enter is what is called a Distinguished Name or a DN. There are quite a few fields but you can leave some blank For some fields there will be a default value, If you enter '.', the field will be left blank. ----- Country Name (2 letter code) [AU]:US State or Province Name (full name) [Some-State]:TX Locality Name (eg, city) []:Austin Organization Name (eg, company) [Internet Widgits Pty Ltd]:Gluu, Inc. Organizational Unit Name (eg, section) []:Gluu CA Common Name (e.g. server FQDN or YOUR name) []:Gluu Intermediate CA Email Address []: Please enter the following 'extra' attributes to be sent with your certificate request A challenge password []: An optional company name []:","title":"2.2. Generate the intermediate1 CA's CSR:"},{"location":"script-catalog/person_authentication/other/cert/#23-sign-the-intermediate1-csr-with-the-root-ca","text":"openssl ca -batch -config root-ca.conf -notext -in intermediate1.csr -out intermediate1.crt Example output: Using configuration from root-ca.conf Enter pass phrase for .//rootca.key: Check that the request matches the signature Signature ok The Subject's Distinguished Name is as follows countryName :PRINTABLE:'US' stateOrProvinceName :ASN.1 12:'TX' localityName :ASN.1 12:'Austin' organizationName :ASN.1 12:'Gluu, Inc.' organizationalUnitName:ASN.1 12:'Gluu CA' commonName :ASN.1 12:'Gluu Intermediate CA' Certificate is to be certified until Dec 22 07:39:24 2021 GMT (730 days) Write out database with 1 new entries Data Base Updated","title":"2.3. Sign the intermediate1 CSR with the Root CA:"},{"location":"script-catalog/person_authentication/other/cert/#24-generate-the-crl-both-in-pem-and-der","text":"openssl ca -config root-ca.conf -gencrl -keyfile rootca.key -cert rootca.crt -out rootca.crl.pem openssl crl -inform PEM -in rootca.crl.pem -outform DER -out rootca.crl Generate the CRL after every certificate you sign with the CA.","title":"2.4. Generate the CRL (both in PEM and DER):"},{"location":"script-catalog/person_authentication/other/cert/#25-configuring-the-intermediate-ca-1","text":"Create a new folder for this intermediate and move in to it: mkdir intermediate1 cd ./intermediate1 Copy the Intermediate cert and key from the Root CA: mv ../intermediate1.* ./ Create the index files: touch certindex echo 1000 > certserial echo 1000 > crlnumber","title":"2.5. Configuring the Intermediate CA 1"},{"location":"script-catalog/person_authentication/other/cert/#26-create-a-new-intermediate-caconf-file","text":"[ ca ] default_ca = gluuca [ crl_ext ] issuerAltName=issuer:copy authorityKeyIdentifier=keyid:always [ gluuca ] dir = ./ new_certs_dir = $dir unique_subject = no certificate = $dir/intermediate1.crt database = $dir/certindex private_key = $dir/intermediate1.key serial = $dir/certserial default_days = 365 default_md = sha1 policy = gluuca_policy x509_extensions = gluuca_extensions crlnumber = $dir/crlnumber default_crl_days = 365 [ gluuca_policy ] commonName = supplied stateOrProvinceName = supplied countryName = optional emailAddress = optional organizationName = supplied organizationalUnitName = optional [ gluuca_extensions ] basicConstraints = critical,CA:FALSE keyUsage = critical,any subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always,issuer keyUsage = digitalSignature, nonRepudiation, keyEncipherment extendedKeyUsage = clientAuth crlDistributionPoints = @crl_section subjectAltName = @alt_names authorityInfoAccess = @ocsp_section [alt_names] DNS.0 = example.com DNS.1 = example.org [crl_section] URI.0 = http://pki.gluu.org/GluuIntermidiate1.crl URI.1 = http://pki.backup.com/GluuIntermidiate1.crl [ocsp_section] caIssuers;URI.0 = http://pki.gluu.org/GluuIntermediate1.crt caIssuers;URI.1 = http://pki.backup.com/GluuIntermediate1.crt OCSP;URI.0 = http://pki.gluu.org/ocsp/ OCSP;URI.1 = http://pki.backup.com/ocsp/ Change the [alt_names] section to whatever you need as Subject Alternative names. Remove it including the subjectAltName = @alt_names line if you don't want a Subject Alternative Name. If you need to set a specific certificate start / expiry date, add the following to [gluuca] # format: YYYYMMDDHHMMSS default_enddate = 20191222035911 default_startdate = 20181222035911 Generate an empty CRL (both in PEM and DER): openssl ca -config intermediate-ca.conf -gencrl -keyfile intermediate1.key -cert intermediate1.crt -out intermediate1.crl.pem openssl crl -inform PEM -in intermediate1.crl.pem -outform DER -out intermediate1.crl","title":"2.6. Create a new intermediate-ca.conf file:"},{"location":"script-catalog/person_authentication/other/cert/#27-this-is-sample-to-show-how-to-revoke-cert-use-it-only-when-you-need-to-revoke-the-intermediate-cert","text":"openssl ca -config root-ca.conf -revoke intermediate1.crt -keyfile rootca.key -cert rootca.crt","title":"2.7. This is sample to show how to revoke cert. Use it only when you need to revoke the intermediate cert:"},{"location":"script-catalog/person_authentication/other/cert/#3-creating-end-user-certificates","text":"We use this new intermediate CA to generate an end user certificate. Repeat these steps for every end user certificate you want to sign with this CA.","title":"3. Creating end user certificates"},{"location":"script-catalog/person_authentication/other/cert/#31-create-folder-for-end-user-certs","text":"mkdir enduser-certs","title":"3.1. Create folder for end user certs:"},{"location":"script-catalog/person_authentication/other/cert/#32-generate-the-end-users-private-key","text":"openssl genrsa -out enduser-certs/user-gluu.org.key 4096","title":"3.2. Generate the end user's private key:"},{"location":"script-catalog/person_authentication/other/cert/#33-generate-the-end-users-csr","text":"openssl req -new -sha256 -key enduser-certs/user-gluu.org.key -out enduser-certs/user-gluu.org.csr Example output: You are about to be asked to enter information that will be incorporated into your certificate request. What you are about to enter is what is called a Distinguished Name or a DN. There are quite a few fields but you can leave some blank For some fields there will be a default value, If you enter '.', the field will be left blank. ----- Country Name (2 letter code) [AU]:US State or Province Name (full name) [Some-State]:TX Locality Name (eg, city) []:Austin Organization Name (eg, company) [Internet Widgits Pty Ltd]:Gluu, Inc. Organizational Unit Name (eg, section) []:User Common Name (e.g. server FQDN or YOUR name) []:Full User Name Email Address []: Please enter the following 'extra' attributes to be sent with your certificate request A challenge password []: An optional company name []:","title":"3.3. Generate the end user's CSR:"},{"location":"script-catalog/person_authentication/other/cert/#34-sign-the-end-users-csr-with-the-intermediate-1-ca","text":"openssl ca -batch -config intermediate-ca.conf -notext -in enduser-certs/user-gluu.org.csr -out enduser-certs/user-gluu.org.crt Example output: Using configuration from intermediate-ca.conf Check that the request matches the signature Signature ok The Subject's Distinguished Name is as follows countryName :PRINTABLE:'US' stateOrProvinceName :ASN.1 12:'TX' localityName :ASN.1 12:'Austin' organizationName :ASN.1 12:'Gluu, Inc.' organizationalUnitName:ASN.1 12:'User' commonName :ASN.1 12:'Full User Name' Certificate is to be certified until Dec 22 08:07:15 2020 GMT (365 days) Write out database with 1 new entries Data Base Updated","title":"3.4. Sign the end user's CSR with the Intermediate 1 CA:"},{"location":"script-catalog/person_authentication/other/cert/#35-generate-the-crl-both-in-pem-and-der","text":"openssl ca -config intermediate-ca.conf -gencrl -keyfile intermediate1.key -cert intermediate1.crt -out intermediate1.crl.pem openssl crl -inform PEM -in intermediate1.crl.pem -outform DER -out intermediate1.crl Generate the CRL after every certificate you sign with the CA.","title":"3.5. Generate the CRL (both in PEM and DER):"},{"location":"script-catalog/person_authentication/other/cert/#36-create-the-certificate-chain-file-by-concatenating-the-root-and-intermediate-1-certificates-together","text":"cat ../rootca.crt intermediate1.crt > enduser-certs/user-gluu.org.chain Send the following files to the end user: user-gluu.org.crt user-gluu.org.key user-gluu.org.chain You can also let the end user supply their own CSR and just send them the .crt file. Do not delete that from the server, otherwise you cannot revoke it.","title":"3.6. Create the certificate chain file by concatenating the Root and intermediate 1 certificates together."},{"location":"script-catalog/person_authentication/other/cert/#37-this-is-sample-to-show-how-to-revoke-cert-use-it-only-when-you-need-to-revoke-the-end-users-cert","text":"openssl ca -config intermediate-ca.conf -revoke enduser-certs/enduser-gluu.org.crt -keyfile intermediate1.key -cert intermediate1.crt","title":"3.7. This is sample to show how to revoke cert. Use it only when you need to revoke the end users cert:"},{"location":"script-catalog/person_authentication/other/cert/#4-validating-the-certificate","text":"","title":"4. Validating the certificate"},{"location":"script-catalog/person_authentication/other/cert/#41-you-can-validate-the-end-user-certificate-against-the-chain-using-the-following-command","text":"openssl verify -CAfile enduser-certs/user-gluu.org.chain enduser-certs/user-gluu.org.crt Example output: enduser-certs/user-gluu.org.crt: OK","title":"4.1. You can validate the end user certificate against the chain using the following command:"},{"location":"script-catalog/person_authentication/other/cert/#42-you-can-also-validate-it-against-the-crl-concatenate-the-pem-crl-and-the-chain-together-first","text":"cat ../rootca.crt intermediate1.crt intermediate1.crl.pem > enduser-certs/user-gluu.org.crl.chain Verify the certificate: openssl verify -crl_check -CAfile enduser-certs/user-gluu.org.crl.chain enduser-certs/user-gluu.org.crt Example output: enduser-certs/user-gluu.org.crt: OK","title":"4.2. You can also validate it against the CRL. Concatenate the PEM CRL and the chain together first:"},{"location":"script-catalog/person_authentication/other/cert/#5-export-end-user-certificate-to-pkcs12","text":"Convert a PEM certificate file and a private key to PKCS#12 (.pfx .p12) openssl pkcs12 -export -out enduser-certs/user-gluu.org.pfx -inkey enduser-certs/user-gluu.org.key -in enduser-certs/user-gluu.org.crt -certfile enduser-certs/user-gluu.org.chain","title":"5. Export end user certificate to PKCS#12"},{"location":"script-catalog/person_authentication/other/cert/#quick-certificates-for-testing","text":"","title":"Quick Certificates for Testing"},{"location":"script-catalog/person_authentication/other/cert/#1-create-a-user_certconf-file-and-update-user_dn-section","text":"[ req ] days = 365 prompt = no distinguished_name = user_dn x509_extensions = v3_ca [ user_dn ] countryName = US stateOrProvinceName = TX localityName = Austin organizationName = Gluu, Inc. organizationalUnitName = Gluu SSL department commonName = secure.gluu.com emailAddress = john@gluu.org [ v3_ca ] basicConstraints = CA:FALSE subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always, issuer extendedKeyUsage = clientAuth, emailProtection","title":"1. Create a user_cert.conf file and update user_dn section:"},{"location":"script-catalog/person_authentication/other/cert/#2-generate-user-cert","text":"openssl req -x509 -config user_cert.conf -nodes -newkey rsa:4096 -keyout user_cert.key -out user_cert.crt","title":"2. Generate user cert"},{"location":"script-catalog/person_authentication/other/cert/#3-export-end-user-certificate-to-pkcs12","text":"openssl pkcs12 -export -inkey user_cert.key -in user_cert.crt -out user_cert.p12","title":"3. Export end user certificate to PKCS#12"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/","text":"For testing purpouses there is archive with CA/Intermidiate/User certs in archive . 1. Create and sign Root CA # 1.1. Generate password protected a 8192-bit long SHA-256 RSA key for root CA: # openssl genrsa -aes256 -out rootca.key 8192 Example output: Generating RSA private key, 8192 bit long modulus (2 primes) ....................+++ ........................................................................................................................................................................................................................................................................................................................................................................................+++ e is 65537 (0x010001) Enter pass phrase for rootca.key: Verifying - Enter pass phrase for rootca.key: 1.2 Create the self-signed root CA certificate ca.crt; you'll need to provide an identity for your root CA: # openssl req -sha256 -new -x509 -days 1826 -key rootca.key -out rootca.crt Example output: Enter pass phrase for rootca.key: You are about to be asked to enter information that will be incorporated into your certificate request. What you are about to enter is what is called a Distinguished Name or a DN. There are quite a few fields but you can leave some blank For some fields there will be a default value, If you enter '.', the field will be left blank. ----- Country Name (2 letter code) [AU]:US State or Province Name (full name) [Some-State]:TX Locality Name (eg, city) []:Austin Organization Name (eg, company) [Internet Widgits Pty Ltd]:Gluu, Inc. Organizational Unit Name (eg, section) []:Gluu CA Common Name (e.g. server FQDN or YOUR name) []:Gluu Root CA Email Address []: 1.3. Create root-ca.conf file: # [ ca ] default_ca = gluuca [ crl_ext ] issuerAltName=issuer:copy authorityKeyIdentifier=keyid:always [ gluuca ] dir = ./ new_certs_dir = $dir unique_subject = no certificate = $dir/rootca.crt database = $dir/certindex private_key = $dir/rootca.key serial = $dir/certserial default_days = 730 default_md = sha1 policy = gluuca_policy x509_extensions = gluuca_extensions crlnumber = $dir/crlnumber default_crl_days = 730 [ gluuca_policy ] commonName = supplied stateOrProvinceName = supplied countryName = optional emailAddress = optional organizationName = supplied organizationalUnitName = optional [ gluuca_extensions ] basicConstraints = critical,CA:TRUE,pathlen:0 keyUsage = critical,any subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always,issuer keyUsage = digitalSignature,cRLSign,keyCertSign extendedKeyUsage = serverAuth crlDistributionPoints = @crl_section subjectAltName = @alt_names authorityInfoAccess = @ocsp_section [alt_names] DNS.0 = Gluu Intermidiate CA 1 DNS.1 = Gluu CA Intermidiate 1 [crl_section] URI.0 = http://pki.gluu.org/GluuRoot.crl URI.1 = http://pki.backup.com/GluuRoot.crl [ocsp_section] caIssuers;URI.0 = http://pki.gluu.org/GluuRoot.crt caIssuers;URI.1 = http://pki.backup.com/GluuRoot.crt OCSP;URI.0 = http://pki.gluu.org/ocsp/ OCSP;URI.1 = http://pki.backup.com/ocsp/ 1.4. Create a few files where the CA will store it's serials: # touch certindex echo 1000 > certserial echo 1000 > crlnumber 1.5. If you need to set a specific certificate start / expiry date, add the following to [gluuca] # # format: YYYYMMDDHHMMSS default_enddate = 20191222035911 default_startdate = 20181222035911 2. Create and sign Intermediate 1 CA # 2.1. Generate the intermediate CA's private key: # openssl genrsa -out intermediate1.key 4096 Example output: Generating RSA private key, 4096 bit long modulus (2 primes) ........................................................++++ .........++++ e is 65537 (0x010001) 2.2. Generate the intermediate1 CA's CSR: # openssl req -new -sha256 -key intermediate1.key -out intermediate1.csr Example output: You are about to be asked to enter information that will be incorporated into your certificate request. What you are about to enter is what is called a Distinguished Name or a DN. There are quite a few fields but you can leave some blank For some fields there will be a default value, If you enter '.', the field will be left blank. ----- Country Name (2 letter code) [AU]:US State or Province Name (full name) [Some-State]:TX Locality Name (eg, city) []:Austin Organization Name (eg, company) [Internet Widgits Pty Ltd]:Gluu, Inc. Organizational Unit Name (eg, section) []:Gluu CA Common Name (e.g. server FQDN or YOUR name) []:Gluu Intermediate CA Email Address []: Please enter the following 'extra' attributes to be sent with your certificate request A challenge password []: An optional company name []: 2.3. Sign the intermediate1 CSR with the Root CA: # openssl ca -batch -config root-ca.conf -notext -in intermediate1.csr -out intermediate1.crt Example output: Using configuration from root-ca.conf Enter pass phrase for .//rootca.key: Check that the request matches the signature Signature ok The Subject's Distinguished Name is as follows countryName :PRINTABLE:'US' stateOrProvinceName :ASN.1 12:'TX' localityName :ASN.1 12:'Austin' organizationName :ASN.1 12:'Gluu, Inc.' organizationalUnitName:ASN.1 12:'Gluu CA' commonName :ASN.1 12:'Gluu Intermediate CA' Certificate is to be certified until Dec 22 07:39:24 2021 GMT (730 days) Write out database with 1 new entries Data Base Updated 2.4. Generate the CRL (both in PEM and DER): # openssl ca -config root-ca.conf -gencrl -keyfile rootca.key -cert rootca.crt -out rootca.crl.pem openssl crl -inform PEM -in rootca.crl.pem -outform DER -out rootca.crl Generate the CRL after every certificate you sign with the CA. 2.5. Configuring the Intermediate CA 1 # Create a new folder for this intermediate and move in to it: mkdir intermediate1 cd ./intermediate1 Copy the Intermediate cert and key from the Root CA: mv ../intermediate1.* ./ Create the index files: touch certindex echo 1000 > certserial echo 1000 > crlnumber 2.6. Create a new intermediate-ca.conf file: # [ ca ] default_ca = gluuca [ crl_ext ] issuerAltName=issuer:copy authorityKeyIdentifier=keyid:always [ gluuca ] dir = ./ new_certs_dir = $dir unique_subject = no certificate = $dir/intermediate1.crt database = $dir/certindex private_key = $dir/intermediate1.key serial = $dir/certserial default_days = 365 default_md = sha1 policy = gluuca_policy x509_extensions = gluuca_extensions crlnumber = $dir/crlnumber default_crl_days = 365 [ gluuca_policy ] commonName = supplied stateOrProvinceName = supplied countryName = optional emailAddress = optional organizationName = supplied organizationalUnitName = optional [ gluuca_extensions ] basicConstraints = critical,CA:FALSE keyUsage = critical,any subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always,issuer keyUsage = digitalSignature, nonRepudiation, keyEncipherment extendedKeyUsage = clientAuth crlDistributionPoints = @crl_section subjectAltName = @alt_names authorityInfoAccess = @ocsp_section [alt_names] DNS.0 = example.com DNS.1 = example.org [crl_section] URI.0 = http://pki.gluu.org/GluuIntermidiate1.crl URI.1 = http://pki.backup.com/GluuIntermidiate1.crl [ocsp_section] caIssuers;URI.0 = http://pki.gluu.org/GluuIntermediate1.crt caIssuers;URI.1 = http://pki.backup.com/GluuIntermediate1.crt OCSP;URI.0 = http://pki.gluu.org/ocsp/ OCSP;URI.1 = http://pki.backup.com/ocsp/ Change the [alt_names] section to whatever you need as Subject Alternative names. Remove it including the subjectAltName = @alt_names line if you don't want a Subject Alternative Name. If you need to set a specific certificate start / expiry date, add the following to [gluuca] # format: YYYYMMDDHHMMSS default_enddate = 20191222035911 default_startdate = 20181222035911 Generate an empty CRL (both in PEM and DER): openssl ca -config intermediate-ca.conf -gencrl -keyfile intermediate1.key -cert intermediate1.crt -out intermediate1.crl.pem openssl crl -inform PEM -in intermediate1.crl.pem -outform DER -out intermediate1.crl 2.7. This is sample to show how to revoke cert. Use it only when you need to revoke the intermediate cert: # openssl ca -config root-ca.conf -revoke intermediate1.crt -keyfile rootca.key -cert rootca.crt 3. Creating end user certificates # We use this new intermediate CA to generate an end user certificate. Repeat these steps for every end user certificate you want to sign with this CA. 3.1. Create folder for end user certs: # mkdir enduser-certs 3.2. Generate the end user's private key: # openssl genrsa -out enduser-certs/user-gluu.org.key 4096 3.3. Generate the end user's CSR: # openssl req -new -sha256 -key enduser-certs/user-gluu.org.key -out enduser-certs/user-gluu.org.csr Example output: You are about to be asked to enter information that will be incorporated into your certificate request. What you are about to enter is what is called a Distinguished Name or a DN. There are quite a few fields but you can leave some blank For some fields there will be a default value, If you enter '.', the field will be left blank. ----- Country Name (2 letter code) [AU]:US State or Province Name (full name) [Some-State]:TX Locality Name (eg, city) []:Austin Organization Name (eg, company) [Internet Widgits Pty Ltd]:Gluu, Inc. Organizational Unit Name (eg, section) []:User Common Name (e.g. server FQDN or YOUR name) []:Full User Name Email Address []: Please enter the following 'extra' attributes to be sent with your certificate request A challenge password []: An optional company name []: 3.4. Sign the end user's CSR with the Intermediate 1 CA: # openssl ca -batch -config intermediate-ca.conf -notext -in enduser-certs/user-gluu.org.csr -out enduser-certs/user-gluu.org.crt Example output: Using configuration from intermediate-ca.conf Check that the request matches the signature Signature ok The Subject's Distinguished Name is as follows countryName :PRINTABLE:'US' stateOrProvinceName :ASN.1 12:'TX' localityName :ASN.1 12:'Austin' organizationName :ASN.1 12:'Gluu, Inc.' organizationalUnitName:ASN.1 12:'User' commonName :ASN.1 12:'Full User Name' Certificate is to be certified until Dec 22 08:07:15 2020 GMT (365 days) Write out database with 1 new entries Data Base Updated 3.5. Generate the CRL (both in PEM and DER): # openssl ca -config intermediate-ca.conf -gencrl -keyfile intermediate1.key -cert intermediate1.crt -out intermediate1.crl.pem openssl crl -inform PEM -in intermediate1.crl.pem -outform DER -out intermediate1.crl Generate the CRL after every certificate you sign with the CA. 3.6. Create the certificate chain file by concatenating the Root and intermediate 1 certificates together. # cat ../rootca.crt intermediate1.crt > enduser-certs/user-gluu.org.chain Send the following files to the end user: user-gluu.org.crt user-gluu.org.key user-gluu.org.chain You can also let the end user supply their own CSR and just send them the .crt file. Do not delete that from the server, otherwise you cannot revoke it. 3.7. This is sample to show how to revoke cert. Use it only when you need to revoke the end users cert: # openssl ca -config intermediate-ca.conf -revoke enduser-certs/enduser-gluu.org.crt -keyfile intermediate1.key -cert intermediate1.crt 4. Validating the certificate # 4.1. You can validate the end user certificate against the chain using the following command: # openssl verify -CAfile enduser-certs/user-gluu.org.chain enduser-certs/user-gluu.org.crt Example output: enduser-certs/user-gluu.org.crt: OK 4.2. You can also validate it against the CRL. Concatenate the PEM CRL and the chain together first: # cat ../rootca.crt intermediate1.crt intermediate1.crl.pem > enduser-certs/user-gluu.org.crl.chain Verify the certificate: openssl verify -crl_check -CAfile enduser-certs/user-gluu.org.crl.chain enduser-certs/user-gluu.org.crt Example output: enduser-certs/user-gluu.org.crt: OK 5. Export end user certificate to PKCS#12 # Convert a PEM certificate file and a private key to PKCS#12 (.pfx .p12) openssl pkcs12 -export -out enduser-certs/user-gluu.org.pfx -inkey enduser-certs/user-gluu.org.key -in enduser-certs/user-gluu.org.crt -certfile enduser-certs/user-gluu.org.chain","title":"Generate certs guide"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#1-create-and-sign-root-ca","text":"","title":"1. Create and sign Root CA"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#11-generate-password-protected-a-8192-bit-long-sha-256-rsa-key-for-root-ca","text":"openssl genrsa -aes256 -out rootca.key 8192 Example output: Generating RSA private key, 8192 bit long modulus (2 primes) ....................+++ ........................................................................................................................................................................................................................................................................................................................................................................................+++ e is 65537 (0x010001) Enter pass phrase for rootca.key: Verifying - Enter pass phrase for rootca.key:","title":"1.1. Generate password protected a 8192-bit long SHA-256 RSA key for root CA:"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#12-create-the-self-signed-root-ca-certificate-cacrt-youll-need-to-provide-an-identity-for-your-root-ca","text":"openssl req -sha256 -new -x509 -days 1826 -key rootca.key -out rootca.crt Example output: Enter pass phrase for rootca.key: You are about to be asked to enter information that will be incorporated into your certificate request. What you are about to enter is what is called a Distinguished Name or a DN. There are quite a few fields but you can leave some blank For some fields there will be a default value, If you enter '.', the field will be left blank. ----- Country Name (2 letter code) [AU]:US State or Province Name (full name) [Some-State]:TX Locality Name (eg, city) []:Austin Organization Name (eg, company) [Internet Widgits Pty Ltd]:Gluu, Inc. Organizational Unit Name (eg, section) []:Gluu CA Common Name (e.g. server FQDN or YOUR name) []:Gluu Root CA Email Address []:","title":"1.2 Create the self-signed root CA certificate ca.crt; you'll need to provide an identity for your root CA:"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#13-create-root-caconf-file","text":"[ ca ] default_ca = gluuca [ crl_ext ] issuerAltName=issuer:copy authorityKeyIdentifier=keyid:always [ gluuca ] dir = ./ new_certs_dir = $dir unique_subject = no certificate = $dir/rootca.crt database = $dir/certindex private_key = $dir/rootca.key serial = $dir/certserial default_days = 730 default_md = sha1 policy = gluuca_policy x509_extensions = gluuca_extensions crlnumber = $dir/crlnumber default_crl_days = 730 [ gluuca_policy ] commonName = supplied stateOrProvinceName = supplied countryName = optional emailAddress = optional organizationName = supplied organizationalUnitName = optional [ gluuca_extensions ] basicConstraints = critical,CA:TRUE,pathlen:0 keyUsage = critical,any subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always,issuer keyUsage = digitalSignature,cRLSign,keyCertSign extendedKeyUsage = serverAuth crlDistributionPoints = @crl_section subjectAltName = @alt_names authorityInfoAccess = @ocsp_section [alt_names] DNS.0 = Gluu Intermidiate CA 1 DNS.1 = Gluu CA Intermidiate 1 [crl_section] URI.0 = http://pki.gluu.org/GluuRoot.crl URI.1 = http://pki.backup.com/GluuRoot.crl [ocsp_section] caIssuers;URI.0 = http://pki.gluu.org/GluuRoot.crt caIssuers;URI.1 = http://pki.backup.com/GluuRoot.crt OCSP;URI.0 = http://pki.gluu.org/ocsp/ OCSP;URI.1 = http://pki.backup.com/ocsp/","title":"1.3. Create root-ca.conf file:"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#14-create-a-few-files-where-the-ca-will-store-its-serials","text":"touch certindex echo 1000 > certserial echo 1000 > crlnumber","title":"1.4. Create a few files where the CA will store it's serials:"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#15-if-you-need-to-set-a-specific-certificate-start-expiry-date-add-the-following-to-gluuca","text":"# format: YYYYMMDDHHMMSS default_enddate = 20191222035911 default_startdate = 20181222035911","title":"1.5. If you need to set a specific certificate start / expiry date, add the following to [gluuca]"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#2-create-and-sign-intermediate-1-ca","text":"","title":"2. Create and sign Intermediate 1 CA"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#21-generate-the-intermediate-cas-private-key","text":"openssl genrsa -out intermediate1.key 4096 Example output: Generating RSA private key, 4096 bit long modulus (2 primes) ........................................................++++ .........++++ e is 65537 (0x010001)","title":"2.1. Generate the intermediate CA's private key:"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#22-generate-the-intermediate1-cas-csr","text":"openssl req -new -sha256 -key intermediate1.key -out intermediate1.csr Example output: You are about to be asked to enter information that will be incorporated into your certificate request. What you are about to enter is what is called a Distinguished Name or a DN. There are quite a few fields but you can leave some blank For some fields there will be a default value, If you enter '.', the field will be left blank. ----- Country Name (2 letter code) [AU]:US State or Province Name (full name) [Some-State]:TX Locality Name (eg, city) []:Austin Organization Name (eg, company) [Internet Widgits Pty Ltd]:Gluu, Inc. Organizational Unit Name (eg, section) []:Gluu CA Common Name (e.g. server FQDN or YOUR name) []:Gluu Intermediate CA Email Address []: Please enter the following 'extra' attributes to be sent with your certificate request A challenge password []: An optional company name []:","title":"2.2. Generate the intermediate1 CA's CSR:"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#23-sign-the-intermediate1-csr-with-the-root-ca","text":"openssl ca -batch -config root-ca.conf -notext -in intermediate1.csr -out intermediate1.crt Example output: Using configuration from root-ca.conf Enter pass phrase for .//rootca.key: Check that the request matches the signature Signature ok The Subject's Distinguished Name is as follows countryName :PRINTABLE:'US' stateOrProvinceName :ASN.1 12:'TX' localityName :ASN.1 12:'Austin' organizationName :ASN.1 12:'Gluu, Inc.' organizationalUnitName:ASN.1 12:'Gluu CA' commonName :ASN.1 12:'Gluu Intermediate CA' Certificate is to be certified until Dec 22 07:39:24 2021 GMT (730 days) Write out database with 1 new entries Data Base Updated","title":"2.3. Sign the intermediate1 CSR with the Root CA:"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#24-generate-the-crl-both-in-pem-and-der","text":"openssl ca -config root-ca.conf -gencrl -keyfile rootca.key -cert rootca.crt -out rootca.crl.pem openssl crl -inform PEM -in rootca.crl.pem -outform DER -out rootca.crl Generate the CRL after every certificate you sign with the CA.","title":"2.4. Generate the CRL (both in PEM and DER):"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#25-configuring-the-intermediate-ca-1","text":"Create a new folder for this intermediate and move in to it: mkdir intermediate1 cd ./intermediate1 Copy the Intermediate cert and key from the Root CA: mv ../intermediate1.* ./ Create the index files: touch certindex echo 1000 > certserial echo 1000 > crlnumber","title":"2.5. Configuring the Intermediate CA 1"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#26-create-a-new-intermediate-caconf-file","text":"[ ca ] default_ca = gluuca [ crl_ext ] issuerAltName=issuer:copy authorityKeyIdentifier=keyid:always [ gluuca ] dir = ./ new_certs_dir = $dir unique_subject = no certificate = $dir/intermediate1.crt database = $dir/certindex private_key = $dir/intermediate1.key serial = $dir/certserial default_days = 365 default_md = sha1 policy = gluuca_policy x509_extensions = gluuca_extensions crlnumber = $dir/crlnumber default_crl_days = 365 [ gluuca_policy ] commonName = supplied stateOrProvinceName = supplied countryName = optional emailAddress = optional organizationName = supplied organizationalUnitName = optional [ gluuca_extensions ] basicConstraints = critical,CA:FALSE keyUsage = critical,any subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always,issuer keyUsage = digitalSignature, nonRepudiation, keyEncipherment extendedKeyUsage = clientAuth crlDistributionPoints = @crl_section subjectAltName = @alt_names authorityInfoAccess = @ocsp_section [alt_names] DNS.0 = example.com DNS.1 = example.org [crl_section] URI.0 = http://pki.gluu.org/GluuIntermidiate1.crl URI.1 = http://pki.backup.com/GluuIntermidiate1.crl [ocsp_section] caIssuers;URI.0 = http://pki.gluu.org/GluuIntermediate1.crt caIssuers;URI.1 = http://pki.backup.com/GluuIntermediate1.crt OCSP;URI.0 = http://pki.gluu.org/ocsp/ OCSP;URI.1 = http://pki.backup.com/ocsp/ Change the [alt_names] section to whatever you need as Subject Alternative names. Remove it including the subjectAltName = @alt_names line if you don't want a Subject Alternative Name. If you need to set a specific certificate start / expiry date, add the following to [gluuca] # format: YYYYMMDDHHMMSS default_enddate = 20191222035911 default_startdate = 20181222035911 Generate an empty CRL (both in PEM and DER): openssl ca -config intermediate-ca.conf -gencrl -keyfile intermediate1.key -cert intermediate1.crt -out intermediate1.crl.pem openssl crl -inform PEM -in intermediate1.crl.pem -outform DER -out intermediate1.crl","title":"2.6. Create a new intermediate-ca.conf file:"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#27-this-is-sample-to-show-how-to-revoke-cert-use-it-only-when-you-need-to-revoke-the-intermediate-cert","text":"openssl ca -config root-ca.conf -revoke intermediate1.crt -keyfile rootca.key -cert rootca.crt","title":"2.7. This is sample to show how to revoke cert. Use it only when you need to revoke the intermediate cert:"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#3-creating-end-user-certificates","text":"We use this new intermediate CA to generate an end user certificate. Repeat these steps for every end user certificate you want to sign with this CA.","title":"3. Creating end user certificates"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#31-create-folder-for-end-user-certs","text":"mkdir enduser-certs","title":"3.1. Create folder for end user certs:"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#32-generate-the-end-users-private-key","text":"openssl genrsa -out enduser-certs/user-gluu.org.key 4096","title":"3.2. Generate the end user's private key:"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#33-generate-the-end-users-csr","text":"openssl req -new -sha256 -key enduser-certs/user-gluu.org.key -out enduser-certs/user-gluu.org.csr Example output: You are about to be asked to enter information that will be incorporated into your certificate request. What you are about to enter is what is called a Distinguished Name or a DN. There are quite a few fields but you can leave some blank For some fields there will be a default value, If you enter '.', the field will be left blank. ----- Country Name (2 letter code) [AU]:US State or Province Name (full name) [Some-State]:TX Locality Name (eg, city) []:Austin Organization Name (eg, company) [Internet Widgits Pty Ltd]:Gluu, Inc. Organizational Unit Name (eg, section) []:User Common Name (e.g. server FQDN or YOUR name) []:Full User Name Email Address []: Please enter the following 'extra' attributes to be sent with your certificate request A challenge password []: An optional company name []:","title":"3.3. Generate the end user's CSR:"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#34-sign-the-end-users-csr-with-the-intermediate-1-ca","text":"openssl ca -batch -config intermediate-ca.conf -notext -in enduser-certs/user-gluu.org.csr -out enduser-certs/user-gluu.org.crt Example output: Using configuration from intermediate-ca.conf Check that the request matches the signature Signature ok The Subject's Distinguished Name is as follows countryName :PRINTABLE:'US' stateOrProvinceName :ASN.1 12:'TX' localityName :ASN.1 12:'Austin' organizationName :ASN.1 12:'Gluu, Inc.' organizationalUnitName:ASN.1 12:'User' commonName :ASN.1 12:'Full User Name' Certificate is to be certified until Dec 22 08:07:15 2020 GMT (365 days) Write out database with 1 new entries Data Base Updated","title":"3.4. Sign the end user's CSR with the Intermediate 1 CA:"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#35-generate-the-crl-both-in-pem-and-der","text":"openssl ca -config intermediate-ca.conf -gencrl -keyfile intermediate1.key -cert intermediate1.crt -out intermediate1.crl.pem openssl crl -inform PEM -in intermediate1.crl.pem -outform DER -out intermediate1.crl Generate the CRL after every certificate you sign with the CA.","title":"3.5. Generate the CRL (both in PEM and DER):"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#36-create-the-certificate-chain-file-by-concatenating-the-root-and-intermediate-1-certificates-together","text":"cat ../rootca.crt intermediate1.crt > enduser-certs/user-gluu.org.chain Send the following files to the end user: user-gluu.org.crt user-gluu.org.key user-gluu.org.chain You can also let the end user supply their own CSR and just send them the .crt file. Do not delete that from the server, otherwise you cannot revoke it.","title":"3.6. Create the certificate chain file by concatenating the Root and intermediate 1 certificates together."},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#37-this-is-sample-to-show-how-to-revoke-cert-use-it-only-when-you-need-to-revoke-the-end-users-cert","text":"openssl ca -config intermediate-ca.conf -revoke enduser-certs/enduser-gluu.org.crt -keyfile intermediate1.key -cert intermediate1.crt","title":"3.7. This is sample to show how to revoke cert. Use it only when you need to revoke the end users cert:"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#4-validating-the-certificate","text":"","title":"4. Validating the certificate"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#41-you-can-validate-the-end-user-certificate-against-the-chain-using-the-following-command","text":"openssl verify -CAfile enduser-certs/user-gluu.org.chain enduser-certs/user-gluu.org.crt Example output: enduser-certs/user-gluu.org.crt: OK","title":"4.1. You can validate the end user certificate against the chain using the following command:"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#42-you-can-also-validate-it-against-the-crl-concatenate-the-pem-crl-and-the-chain-together-first","text":"cat ../rootca.crt intermediate1.crt intermediate1.crl.pem > enduser-certs/user-gluu.org.crl.chain Verify the certificate: openssl verify -crl_check -CAfile enduser-certs/user-gluu.org.crl.chain enduser-certs/user-gluu.org.crt Example output: enduser-certs/user-gluu.org.crt: OK","title":"4.2. You can also validate it against the CRL. Concatenate the PEM CRL and the chain together first:"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20guide/#5-export-end-user-certificate-to-pkcs12","text":"Convert a PEM certificate file and a private key to PKCS#12 (.pfx .p12) openssl pkcs12 -export -out enduser-certs/user-gluu.org.pfx -inkey enduser-certs/user-gluu.org.key -in enduser-certs/user-gluu.org.crt -certfile enduser-certs/user-gluu.org.chain","title":"5. Export end user certificate to PKCS#12"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20without%20configs/","text":"1. Generate a certificate authority (CA) cert. # 1. Generate your CA certificate using this command: # openssl req -newkey rsa:4096 -keyform PEM -keyout ca.key -x509 -days 3650 -outform PEM -out ca.cer 2. Generate a client SSL certificate # 1. Generate a private key for the SSL client. # openssl genrsa -out client.key 4096 2. Use the client's private key to generate a cert request. # openssl req -new -key client.key -out client.req 3. Issue the client certificate using the cert request and the CA cert/key. # openssl x509 -req -in client.req -CA ca.cer -CAkey ca.key -set_serial 101 -extensions client -days 365 -outform PEM -out client.cer 4. Convert the client certificate and private key to pkcs#12 format for use by browsers. # openssl pkcs12 -export -inkey client.key -in client.cer -out client.p12 5. Clean up - remove the client private key, client cert and client request files as the pkcs12 has everything needed. # rm client.key client.cer client.req","title":"Generate certs without configs"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20without%20configs/#1-generate-a-certificate-authority-ca-cert","text":"","title":"1. Generate a certificate authority (CA) cert."},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20without%20configs/#1-generate-your-ca-certificate-using-this-command","text":"openssl req -newkey rsa:4096 -keyform PEM -keyout ca.key -x509 -days 3650 -outform PEM -out ca.cer","title":"1. Generate your CA certificate using this command:"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20without%20configs/#2-generate-a-client-ssl-certificate","text":"","title":"2. Generate a client SSL certificate"},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20without%20configs/#1-generate-a-private-key-for-the-ssl-client","text":"openssl genrsa -out client.key 4096","title":"1. Generate a private key for the SSL client."},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20without%20configs/#2-use-the-clients-private-key-to-generate-a-cert-request","text":"openssl req -new -key client.key -out client.req","title":"2. Use the client's private key to generate a cert request."},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20without%20configs/#3-issue-the-client-certificate-using-the-cert-request-and-the-ca-certkey","text":"openssl x509 -req -in client.req -CA ca.cer -CAkey ca.key -set_serial 101 -extensions client -days 365 -outform PEM -out client.cer","title":"3. Issue the client certificate using the cert request and the CA cert/key."},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20without%20configs/#4-convert-the-client-certificate-and-private-key-to-pkcs12-format-for-use-by-browsers","text":"openssl pkcs12 -export -inkey client.key -in client.cer -out client.p12","title":"4. Convert the client certificate and private key to pkcs#12 format for use by browsers."},{"location":"script-catalog/person_authentication/other/cert/Generate%20certs%20without%20configs/#5-clean-up-remove-the-client-private-key-client-cert-and-client-request-files-as-the-pkcs12-has-everything-needed","text":"rm client.key client.cer client.req","title":"5. Clean up - remove the client private key, client cert and client request files as the pkcs12 has everything needed."},{"location":"script-catalog/person_authentication/other/cert/Quick%20certs%20guide%20for%20testing/","text":"1. Create a user_cert.conf file and update user_dn section: # [ req ] days = 365 prompt = no distinguished_name = user_dn x509_extensions = v3_ca [ user_dn ] countryName = US stateOrProvinceName = TX localityName = Austin organizationName = Gluu, Inc. organizationalUnitName = Gluu SSL department commonName = secure.gluu.com emailAddress = john@gluu.org [ v3_ca ] basicConstraints = CA:FALSE subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always, issuer extendedKeyUsage = clientAuth, emailProtection 2. Generate user cert # openssl req -x509 -config user_cert.conf -nodes -newkey rsa:4096 -keyout user_cert.key -out user_cert.crt 3. Export end user certificate to PKCS#12 # openssl pkcs12 -export -inkey user_cert.key -in user_cert.crt -out user_cert.p12","title":"Quick certs guide for testing"},{"location":"script-catalog/person_authentication/other/cert/Quick%20certs%20guide%20for%20testing/#1-create-a-user_certconf-file-and-update-user_dn-section","text":"[ req ] days = 365 prompt = no distinguished_name = user_dn x509_extensions = v3_ca [ user_dn ] countryName = US stateOrProvinceName = TX localityName = Austin organizationName = Gluu, Inc. organizationalUnitName = Gluu SSL department commonName = secure.gluu.com emailAddress = john@gluu.org [ v3_ca ] basicConstraints = CA:FALSE subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always, issuer extendedKeyUsage = clientAuth, emailProtection","title":"1. Create a user_cert.conf file and update user_dn section:"},{"location":"script-catalog/person_authentication/other/cert/Quick%20certs%20guide%20for%20testing/#2-generate-user-cert","text":"openssl req -x509 -config user_cert.conf -nodes -newkey rsa:4096 -keyout user_cert.key -out user_cert.crt","title":"2. Generate user cert"},{"location":"script-catalog/person_authentication/other/cert/Quick%20certs%20guide%20for%20testing/#3-export-end-user-certificate-to-pkcs12","text":"openssl pkcs12 -export -inkey user_cert.key -in user_cert.crt -out user_cert.p12","title":"3. Export end user certificate to PKCS#12"},{"location":"script-catalog/person_authentication/other/ciba/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/person_authentication/other/ciba/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/person_authentication/other/ciba/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/person_authentication/other/ciba/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/person_authentication/other/compromised_password/readme/","text":"This is a person authentication module for oxAuth to verify if user password has been compromised and allows user to change password immediately after providing answer to secret question set by admin. 1) credentials_file = /etc/certs/vericloud_gluu_creds.json 2) secret_question = Set this parameter for the question to be disaplayed to user 3) secret_answer = Set this parameter for the answer to be provided by user to reset password Update vericloud_gluu_creds.json file with Vericloud API username and secret","title":"Readme"},{"location":"script-catalog/person_authentication/other/custom_registration/","text":"In order to exceute the custom registration workflow, Add the following custom property(key:value) in the script properties: attributes_json_file_path: /etc/Attributes.json and place Attributes.json file in the path specified in the custom property. Place the reg.xhtml file in /opt/gluu/jetty/oxauth/custom/pages/auth/ directory. Enable the script and set it as the default authentication method.","title":"Index"},{"location":"script-catalog/person_authentication/other/duo/","text":"Script contents here This is a person authentication script for jans-auth-server which enables Duo Authentication for user authentication. The module has a few properties: 1) duo_creds_file - It's mandatory property. It's path to file which contains contains ikey, skey, akey. These keys are required for DUO authentication. Example: /etc/certs/duo_creds.json Example content of this file: {\"ikey\": \"ikey_value\", \"skey\": \"skey_value\", \"akey\": \"akey_value\"} 2) duo_host - It's mandatory property. The URL of the DUO API server. Example: api-random.duosecurity.com 3) audit_attribute - It's optional property. It allows to define an attribute which the module should check for to determine whether the user belongs to duo_group or audit_group. Person DUO authentication module uses it if there is duo_group or audit_group property. Example: memberOf 4) duo_group - It's optional property. It's an optional attribute that alows to specify if DUO should be used for specific users. i.e. use DUO only for users who have audit_attribute ( memberOf ) attribute value equal to duo_group . If there is none DUO will be enforced for all users. 5) audit_group - It's optional property. Specify if module should send an e-mail to administrator upon login of a user who has audit_attribute memberOf attribute value equal to audit_group . 6) audit_group_email - It's optional property. It's the administrator's e-mail. Person DUO authentication module uses it if there is audit_group property.","title":"Index"},{"location":"script-catalog/person_authentication/other/fortinet/","text":"Fortinet - RADIUS server Authentication # Overview # This document explains how to configure the Gluu Server so that when a user logs in, an authentication request is made to Fortinet's remote RADIUS (Remote Authentication Dial-In User Service) server which then validates the user name and password. Prerequisites # A Gluu Server (installation instructions here ) which will play the role of RADIUS client The Fortinet script (included in the default Gluu Server distribution); A Fortinet server which is the RADIUS server. The jradius-client jar library added to oxAuth Fortinet Configuration # In Authentication -> Radius Service -> Clients , create a new client (which is Gluu server). Enter the \"secret\" which will be used by the interception script to exchange RADIUS packets. Gluu Server Configuration # Add JRadius library to oxAuth # Copy the jradius-client jar file to the following oxAuth folder inside the Gluu Server chroot: /opt/gluu/jetty/oxauth/custom/libs Edit /opt/gluu/jetty/oxauth/webapps/oxauth.xml and add the following line: <Set name=\"extraClasspath\">/opt/gluu/jetty/oxauth/custom/libs/jradius-client.jar</Set> Restart the oxauth service Enable Interception Script # Follow the steps below to enable Fortinet's RADIUS authentication: Navigate to Configuration > Person Authentication Scripts Find the fortinet script. Populate the properties table with the details from your Fortinet account: Property Description Input value RADIUS_SERVER_IP IP address of Fortinet's RADIUS Server 10.10.10.1 RADIUS_SERVER_SECRET Configured when the RADIUS client is registered. spam RADIUS_SERVER_AUTH_PORT Authentication port 1812 RADIUS_SERVER_ACCT_PORT Accounting port 1813 Enable the script by checking the box Scroll to the bottom of the page and click Update Now authenticating a user against Fortinet's RADIUS server is possible from your Gluu Server. This means that, using OpenID Connect acr_values , applications can now request Fortinet authentication for users. Note To make sure this method has been enabled successfully, you can check your Gluu Server's OpenID Connect configuration by navigating to the following URL: https://<hostname>/.well-known/openid-configuration . Find \"acr_values_supported\": and you should see \"fortinet\" . Make Fortinet's user-password authentication the Default mechanism. # If fortinet should be the default authentication mechanism, follow these instructions: Navigate to Configuration > Manage Authentication . Select the Default Authentication Method tab. In the Default Authentication Method window you will see two options: Default acr and oxTrust acr . oxTrust acr sets the authentication mechanism for accessing the oxTrust dashboard GUI (only managers should have acccess to oxTrust). Default acr sets the default authentication mechanism for accessing all applications that leverage your Gluu Server for authentication (unless otherwise specified). If Fortinet should be the default authentication mechanism for all access, change both fields to fortinet. Troubleshooting # If problems are encountered, take a look at the logs, specifically /opt/gluu/jetty/oxauth/logs/oxauth_script.log . Inspect all messages related to Fortinet. For instance, the following messages show an example of correct script initialization: Fortinet. Initialization Fortinet. Initialized successfully Also make sure you are using the latest version of the script that can be found here .","title":"Fortinet - RADIUS server Authentication"},{"location":"script-catalog/person_authentication/other/fortinet/#fortinet-radius-server-authentication","text":"","title":"Fortinet - RADIUS server Authentication"},{"location":"script-catalog/person_authentication/other/fortinet/#overview","text":"This document explains how to configure the Gluu Server so that when a user logs in, an authentication request is made to Fortinet's remote RADIUS (Remote Authentication Dial-In User Service) server which then validates the user name and password.","title":"Overview"},{"location":"script-catalog/person_authentication/other/fortinet/#prerequisites","text":"A Gluu Server (installation instructions here ) which will play the role of RADIUS client The Fortinet script (included in the default Gluu Server distribution); A Fortinet server which is the RADIUS server. The jradius-client jar library added to oxAuth","title":"Prerequisites"},{"location":"script-catalog/person_authentication/other/fortinet/#fortinet-configuration","text":"In Authentication -> Radius Service -> Clients , create a new client (which is Gluu server). Enter the \"secret\" which will be used by the interception script to exchange RADIUS packets.","title":"Fortinet Configuration"},{"location":"script-catalog/person_authentication/other/fortinet/#gluu-server-configuration","text":"","title":"Gluu Server Configuration"},{"location":"script-catalog/person_authentication/other/fortinet/#add-jradius-library-to-oxauth","text":"Copy the jradius-client jar file to the following oxAuth folder inside the Gluu Server chroot: /opt/gluu/jetty/oxauth/custom/libs Edit /opt/gluu/jetty/oxauth/webapps/oxauth.xml and add the following line: <Set name=\"extraClasspath\">/opt/gluu/jetty/oxauth/custom/libs/jradius-client.jar</Set> Restart the oxauth service","title":"Add JRadius library to oxAuth"},{"location":"script-catalog/person_authentication/other/fortinet/#enable-interception-script","text":"Follow the steps below to enable Fortinet's RADIUS authentication: Navigate to Configuration > Person Authentication Scripts Find the fortinet script. Populate the properties table with the details from your Fortinet account: Property Description Input value RADIUS_SERVER_IP IP address of Fortinet's RADIUS Server 10.10.10.1 RADIUS_SERVER_SECRET Configured when the RADIUS client is registered. spam RADIUS_SERVER_AUTH_PORT Authentication port 1812 RADIUS_SERVER_ACCT_PORT Accounting port 1813 Enable the script by checking the box Scroll to the bottom of the page and click Update Now authenticating a user against Fortinet's RADIUS server is possible from your Gluu Server. This means that, using OpenID Connect acr_values , applications can now request Fortinet authentication for users. Note To make sure this method has been enabled successfully, you can check your Gluu Server's OpenID Connect configuration by navigating to the following URL: https://<hostname>/.well-known/openid-configuration . Find \"acr_values_supported\": and you should see \"fortinet\" .","title":"Enable Interception Script"},{"location":"script-catalog/person_authentication/other/fortinet/#make-fortinets-user-password-authentication-the-default-mechanism","text":"If fortinet should be the default authentication mechanism, follow these instructions: Navigate to Configuration > Manage Authentication . Select the Default Authentication Method tab. In the Default Authentication Method window you will see two options: Default acr and oxTrust acr . oxTrust acr sets the authentication mechanism for accessing the oxTrust dashboard GUI (only managers should have acccess to oxTrust). Default acr sets the default authentication mechanism for accessing all applications that leverage your Gluu Server for authentication (unless otherwise specified). If Fortinet should be the default authentication mechanism for all access, change both fields to fortinet.","title":"Make Fortinet's user-password authentication the Default mechanism."},{"location":"script-catalog/person_authentication/other/fortinet/#troubleshooting","text":"If problems are encountered, take a look at the logs, specifically /opt/gluu/jetty/oxauth/logs/oxauth_script.log . Inspect all messages related to Fortinet. For instance, the following messages show an example of correct script initialization: Fortinet. Initialization Fortinet. Initialized successfully Also make sure you are using the latest version of the script that can be found here .","title":"Troubleshooting"},{"location":"script-catalog/person_authentication/other/gplus/","text":"This is a person authentication module for oxAuth that enables Google+ Authentication for user authentication. The module has a few properties: 1) gplus_client_secrets_file - It's mandatory property. It's path to application configuration file downloaded from Google console for application. Example: /etc/certs/gplus_client_secrets.json These are steps needed to get it: a) Log into: https://console.developers.google.com/project b) Click \"Create project\" and enter project name c) Open new project \"API & auth -> Credentials\" menu item in configuration navigation tree d) Click \"Add credential\" with type \"OAuth 2.0 client ID\" e) Select \"Web application\" application type f) Enter \"Authorized JavaScript origins\". It should be CE server DNS name. Example: https://gluu.info g) Click \"Create\" and Click \"OK\" in next dialog h) Click \"Download JSON\" in order to download gplus_client_secrets.json file Also it's mandatory to enable Google+ API: a) Log into: https://console.developers.google.com/project b) Select project and enter project name c) Open new project \"API & auth -> API\" menu item in configuration navigation tree d) Click \"Google+ API\" e) Click \"Enable API\" button 2) gplus_deployment_type - Specify deployment mode. It's optional property. If this property isn't specified script tries to find user in local LDAP by 'subject_identifier' claim specified in id_token. If this property has 'map' value script allow to map 'subject_identifier' to local user account. If this property has 'enroll' value script should add new user to local LDAP with status 'acrtive'. In order to map IDP attributes to local attributes it uses properties gplus_remote_attributes_list and gplus_local_attributes_list. Allowed values: map/enroll Example: enroll 3) gplus_remote_attributes_list - Comma separated list of attribute names. Specify list of Google+ claims(attributes) which script should use to map to local attributes. It's optional property. It's mandatory only if gplus_deployment_type has value 'enroll'. The count of attributes in this property should be equal to count attributes in gplus_local_attributes_list property. Example: email, email, name, family_name, given_name, locale 4) gplus_local_attributes_list - Comma separated list of attribute names. Specify list of local attributes mapped from Google+ userInfo OpenId response. It's optional property. It's mandatory only if gplus_deployment_type has value 'enroll'. The count of attributes in this property should be equal to count attributes in gplus_remote_attributes_list property. Local attributes list should contains next mandatory attributes: uid, mail, givenName, sn, cn. Example: uid, mail, givenName, sn, cn, preferredLanguage 5) extension_module - Specify external module name. It's optional property. External module should implements 2 methods: def init(conf_attr): ... return True/False def postLogin ( conf_attr , user ) : ... return True / False Scripts calls init method at initialization . And calls postLogin after user log in order to execute additional custom workflow . 6) gplus_client_configuration_attribute - Specify client entry attribute name which can override gplus_client_secrets_file file content. It's optional property. It can be used in cases when all clients should use separate gplus_client_secrets.json configuration.","title":"Index"},{"location":"script-catalog/person_authentication/other/idfirst/","text":"Identifier-first authentication # This custom script allows administrators to implement the following workflow: User is presented with a form asking for username only User is shown a form asking for password only (username field is not editable) User is taken to a page where he is challenged to present a second factor (strong credential) for completion of authentication After form submission in step 1, the suitable user entry is looked up and an attribute is expected to contain an acr value corresponding to an already existing and enabled custom script that determines the second factor. If the attribute is not existing, the \"basic\" acr will be used. Thus, the basic script needs to be enabled as well in Gluu server. For numerals 2 and 3 to work properly, all custom scripts to be used (basic, u2f, super_gluu, ect.) should be edited so that the getPageForStep uses the custom page named \"alter_login.xhtml\". In other words, comment out the line showing ` return \"\" ` by prefixing it with a # character and add one with ` return \"/auth/idfirst/alter_login.xhtml\" ` in the subroutine \"getPageForStep\" of every script. Requirements: # To configure the user attribute to lookup for an acr (and thus a second factor), add \" acr_attribute \" as a property of the Identifier-first custom script via oxTrust. Example: name: acr_attribute value: oxPreferredMethod where oxPreferredMethod is an LDAP attribute part of GluuPerson object class. Copy the accompanying custom pages to /opt/gluu/jetty/oxauth/custom/pages/idfirst , namely alter_login.xhtml , alter_login.page.xml (3.0.2 only), and idfirst_login.xhtml . This is only required if your Gluu Server wasn't originally bundled with this script Ensure this script has a low level set in oxTrust. All other scripts to which this scripts forwards to must be greater in level than this.","title":"Identifier-first authentication"},{"location":"script-catalog/person_authentication/other/idfirst/#identifier-first-authentication","text":"This custom script allows administrators to implement the following workflow: User is presented with a form asking for username only User is shown a form asking for password only (username field is not editable) User is taken to a page where he is challenged to present a second factor (strong credential) for completion of authentication After form submission in step 1, the suitable user entry is looked up and an attribute is expected to contain an acr value corresponding to an already existing and enabled custom script that determines the second factor. If the attribute is not existing, the \"basic\" acr will be used. Thus, the basic script needs to be enabled as well in Gluu server. For numerals 2 and 3 to work properly, all custom scripts to be used (basic, u2f, super_gluu, ect.) should be edited so that the getPageForStep uses the custom page named \"alter_login.xhtml\". In other words, comment out the line showing ` return \"\" ` by prefixing it with a # character and add one with ` return \"/auth/idfirst/alter_login.xhtml\" ` in the subroutine \"getPageForStep\" of every script.","title":"Identifier-first authentication"},{"location":"script-catalog/person_authentication/other/idfirst/#requirements","text":"To configure the user attribute to lookup for an acr (and thus a second factor), add \" acr_attribute \" as a property of the Identifier-first custom script via oxTrust. Example: name: acr_attribute value: oxPreferredMethod where oxPreferredMethod is an LDAP attribute part of GluuPerson object class. Copy the accompanying custom pages to /opt/gluu/jetty/oxauth/custom/pages/idfirst , namely alter_login.xhtml , alter_login.page.xml (3.0.2 only), and idfirst_login.xhtml . This is only required if your Gluu Server wasn't originally bundled with this script Ensure this script has a low level set in oxTrust. All other scripts to which this scripts forwards to must be greater in level than this.","title":"Requirements:"},{"location":"script-catalog/person_authentication/other/idfirst/README_idfirst/","text":"Identifier-first authentication # This custom script allows administrators to implement the following workflow: User is presented with a form asking for username only User is shown a form asking for password only (username field is not editable) User is taken to a page where he is challenged to present a second factor (strong credential) for completion of authentication After form submission in step 1, the suitable user entry is looked up and an attribute is expected to contain an acr value corresponding to an already existing and enabled custom script that determines the second factor. If the attribute is not existing, the \"basic\" acr will be used. Thus, the basic script needs to be enabled as well in Gluu server. For numerals 2 and 3 to work properly, all custom scripts to be used (basic, u2f, super_gluu, ect.) should be edited so that the getPageForStep uses the custom page named \"alter_login.xhtml\". In other words, comment out the line showing ` return \"\" ` by prefixing it with a # character and add one with ` return \"/auth/idfirst/alter_login.xhtml\" ` in the subroutine \"getPageForStep\" of every script. Requirements: # To configure the user attribute to lookup for an acr (and thus a second factor), add \" acr_attribute \" as a property of the Identifier-first custom script via oxTrust. Example: name: acr_attribute value: oxPreferredMethod where oxPreferredMethod is an LDAP attribute part of GluuPerson object class. Copy the accompanying custom pages to /opt/gluu/jetty/oxauth/custom/pages/idfirst , namely alter_login.xhtml , alter_login.page.xml (3.0.2 only), and idfirst_login.xhtml . This is only required if your Gluu Server wasn't originally bundled with this script Ensure this script has a low level set in oxTrust. All other scripts to which this scripts forwards to must be greater in level than this.","title":"Identifier-first authentication"},{"location":"script-catalog/person_authentication/other/idfirst/README_idfirst/#identifier-first-authentication","text":"This custom script allows administrators to implement the following workflow: User is presented with a form asking for username only User is shown a form asking for password only (username field is not editable) User is taken to a page where he is challenged to present a second factor (strong credential) for completion of authentication After form submission in step 1, the suitable user entry is looked up and an attribute is expected to contain an acr value corresponding to an already existing and enabled custom script that determines the second factor. If the attribute is not existing, the \"basic\" acr will be used. Thus, the basic script needs to be enabled as well in Gluu server. For numerals 2 and 3 to work properly, all custom scripts to be used (basic, u2f, super_gluu, ect.) should be edited so that the getPageForStep uses the custom page named \"alter_login.xhtml\". In other words, comment out the line showing ` return \"\" ` by prefixing it with a # character and add one with ` return \"/auth/idfirst/alter_login.xhtml\" ` in the subroutine \"getPageForStep\" of every script.","title":"Identifier-first authentication"},{"location":"script-catalog/person_authentication/other/idfirst/README_idfirst/#requirements","text":"To configure the user attribute to lookup for an acr (and thus a second factor), add \" acr_attribute \" as a property of the Identifier-first custom script via oxTrust. Example: name: acr_attribute value: oxPreferredMethod where oxPreferredMethod is an LDAP attribute part of GluuPerson object class. Copy the accompanying custom pages to /opt/gluu/jetty/oxauth/custom/pages/idfirst , namely alter_login.xhtml , alter_login.page.xml (3.0.2 only), and idfirst_login.xhtml . This is only required if your Gluu Server wasn't originally bundled with this script Ensure this script has a low level set in oxTrust. All other scripts to which this scripts forwards to must be greater in level than this.","title":"Requirements:"},{"location":"script-catalog/person_authentication/other/inwebo/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/person_authentication/other/inwebo/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/person_authentication/other/inwebo/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/person_authentication/other/inwebo/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/person_authentication/other/otp/Properties%20description/","text":"Script contents here This is a person authentication script for jans-auth-server which enables one-time password for user authentication. The module has a few properties: 1) otp_type - It's mandatory property. It's specify OTP mode: HOTP/ TOTP. Allowed values: hotp/totp Example: hotp 2) issuer - It's mandatory property. It's company name. Example: Janssen Inc 3) otp_conf_file - It's mandatory property. It's specify path to OTP configuration JSON file. Example: /etc/certs/otp_configuration.json 4) label - It's label inside QR code. It's optional property. Example: Janssen OTP 5) qr_options - Specify width and height of QR image. It's optional property. Example: qr_options: { width: 400, height: 400 } 6) registration_uri - It's URL to page where user can register new account. It's optional property. Example: https://ce-dev.jans.org/identity/register","title":"Properties description"},{"location":"script-catalog/person_authentication/other/passport/","text":"Passport is a person authentication module for oxAuth that enables Google+ Authentication , Twitter Authentication , Facebook Authentication etc. for user authentication. The module has a few properties: 1) generic_remote_attributes_list - It's mandatory property. Comma separated list of attribute names. Specify list of User claims(attributes) which script should use to map to local attributes. The count of attributes in this property should be equal to count attributes in generic_local_attributes_list property. Example: username, email, name, name, givenName, familyName, provider 2) generic_local_attributes_list - It's mandatory property. Comma separated list of attribute names. Specify list of local attributes mapped from passport userInfo response. The count of attributes in this property should be equal to count attributes in generic_remote_attributes_list property. Local attributes list should contains next mandatory attributes: uid, mail, givenName, sn, cn. Example: uid, mail, cn, displayName, givenName, sn, provider","title":"Index"},{"location":"script-catalog/person_authentication/other/phonefactor/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/person_authentication/other/phonefactor/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/person_authentication/other/phonefactor/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/person_authentication/other/phonefactor/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/person_authentication/other/postauthn/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/person_authentication/other/postauthn/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/person_authentication/other/postauthn/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/person_authentication/other/postauthn/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/person_authentication/other/registration/","text":"This is a person authentication module for oxAuth that allows user to register first and login to server. Required Custom property (key/value) - 1) generic_register_attributes_list = email,fname,lname,email,phone,pwd 2) generic_local_attributes_list = uid,givenName,sn,mail,telephoneNumber,userPassword","title":"Index"},{"location":"script-catalog/person_authentication/other/saml/","text":"This authentication interception script configures oxAuth to use an external SAML identity provider. This approach enables you to dynamically enroll users in your Gluu Server after they authenticate at their home IDP--meaning you can create a local ldap entry for each new inbound SAML user. This is handy because it enables you to use either SAML or OpenID Connect API's that connect to the Gluu Server. Confusing? Yes! Handy... yes, yes! Installation # This list of steps needed to do to enable Asimba/SAML person authentication module. This module depends on python libraries. In order to use it we need to install Jython. Please use next articles to proper Jython installation: Installation notest: http://ox.gluu.org/doku.php?id=oxtauth:customauthscript#jython_installation_optional Jython integration: http://ox.gluu.org/doku.php?id=oxtauth:customauthscript#jython_python_integration Prepare file with IdP public certificate /etc/certs/saml.pem Confire new custom module in oxTrust: Log into oxTrust with administrative permissions. Open \"Configuration\u2192Manage Custom Scripts\" page. Select \"Person Authentication\" tab. Click on \"Add custom script configuration\" link. Enter name = saml Enter level = 0-100 (priority of this method). Select usage type \"Interactive\". Add custom required and optional properties which specified in README.txt. Copy/paste script from AsimbaPersonAuthentication.py. Activate it via \"Enabled\" checkbox. Click \"Update\" button at the bottom of this page. Configure oxAuth to use SAML authentication by default: Log into oxTrust with administrative permissions. Open \"Configuration\u2192Manage Authentication\" page. Scroll to \"Default Authentication Method\" panel. Select \"saml\" authentication mode. Click \"Update\" button at the bottom of this page. Try to log in using SAML authentication method: Wait 30 seconds and try to log in again. During this time oxAuth reload list of available person authentication modules. Open second browser or second browsing session and try to log in again. It's better to try to do that from another browser session because we can return back to previous authentication method if something will go wrong. There are log messages in this custom authentication script. In order to debug this module we can use command like this: tail -f /opt/tomcat/logs/wrapper.log | grep \"Saml\" Properties # This module has next properties: 1) asimba_saml_certificate_file - It's path to file which contains public IdP certificate in. Example: /etc/certs/saml.pem 2) saml_idp_sso_target_url - The URL at the Identity Provider where to the authentication request should be sent. Example: https://test.gluu.org/asimba/profiles/saml2/sso/web 3) asimba_entity_id - Set the issuer of the authentication request. This would usually be the URL of the issuing web application Example: https://test.gluu.info/saml 4) saml_use_authn_context - Specify if Saml request should contains samlp:RequestedAuthnContext section. Allowed values: true/false Example: true 5) saml_name_identifier_format - Specify in which format IdP should return a name identifier for the user. This property isn't required when saml_use_authn_context has value 'false' Example: urn:oasis:names SAML:2.0:nameid-format:persistent 6) saml_deployment_type - Specify deployment mode. It's optional property. If this property isn't specified Saml script tries to find user in local LDAP by 'Persistent Id' specified in Saml response. If this property has 'map' value Saml script map should map 'Persistent Id' to local user account. If this property has 'enroll' value Saml script should add new user to local LDAP with status 'register'. In order to map IDP attributes to local attributes it uses propertiessaml_idp_attributes_list and saml_local_attributes_list. Allowed values: map/enroll/enroll_all_attr Example: enroll 7) saml_validate_response - Specify if Saml script should valide Saml response signature. The path to IdP certificate should be specified in asimba_saml_certificate_file property. It's optional property. Default mode specify to validate Saml response. Allowed values: true/false Example: true 8) saml_client_configuration_attribute - Specify oxAuth client entry attribute name which contains Saml configuration in JSON format which allow to override next properties: asimba_saml_certificate_file, asimba_entity_id, saml_use_authn_context, saml_idp_attributes_list, saml_local_attributes_list. It's optional property. Property asimba_saml_certificate_file isn't mandatory. If the value is empty Smal script use global asimba_saml_certificate_file value. Example: oxAuthExtraConf Example content of client oxAuthExtraConf attribute: {\"saml_certificate_file\": \"\", \"asimba_entity_id\": \"https://localhost/app1\", \"saml_use_authn_context\": \"false\", \"saml_idp_attributes_list\": \"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname\", \"saml_local_attributes_list\": \"uid, mail, givenName, sn, cn\"} 9) saml_idp_attributes_list - Comma separated list of attribute names. Specify list of IdP attributes which Saml scrpt should use to map to local attributes. It's optional property. It's manadatory only if saml_deployment_type has value 'enroll'. The count of attributes in this property should be equal to count attributes in saml_local_attributes_list property. Example: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname 10) saml_local_attributes_list - Comma separated list of attribute names. Specify list of local attributes mapped from Saml response. It's optional property. It's manadatory only if saml_deployment_type has value 'enroll'. The count of attributes in this property should be equal to count attributes in saml_idp_attributes_list property. Local attributes list should contains next mandatory attributes: uid, mail, givenName, sn, cn. Example: uid, mail, givenName, sn, cn 11) user_object_classes - Specify custom list of LDAP user object classes Example: eduPerson 12) enforce_uniqueness_attr_list - Specify list of unique user attributes to validate if there is no user with simular attributes already Example: uid, mail 13) saml_extension_module - Specify external module name. It's optional property. External module should implements 2 methods: def init(conf_attr): ... return True/False def postLogin ( conf_attr , user ) : ... return True / False SAML scripts calls init method at initialization , and calls postLogin after to execute additional custom workflow . 14) saml_allow_basic_login - Specify if authentication module should allow both: basic and saml authentications Example: false","title":"Index"},{"location":"script-catalog/person_authentication/other/saml/#installation","text":"This list of steps needed to do to enable Asimba/SAML person authentication module. This module depends on python libraries. In order to use it we need to install Jython. Please use next articles to proper Jython installation: Installation notest: http://ox.gluu.org/doku.php?id=oxtauth:customauthscript#jython_installation_optional Jython integration: http://ox.gluu.org/doku.php?id=oxtauth:customauthscript#jython_python_integration Prepare file with IdP public certificate /etc/certs/saml.pem Confire new custom module in oxTrust: Log into oxTrust with administrative permissions. Open \"Configuration\u2192Manage Custom Scripts\" page. Select \"Person Authentication\" tab. Click on \"Add custom script configuration\" link. Enter name = saml Enter level = 0-100 (priority of this method). Select usage type \"Interactive\". Add custom required and optional properties which specified in README.txt. Copy/paste script from AsimbaPersonAuthentication.py. Activate it via \"Enabled\" checkbox. Click \"Update\" button at the bottom of this page. Configure oxAuth to use SAML authentication by default: Log into oxTrust with administrative permissions. Open \"Configuration\u2192Manage Authentication\" page. Scroll to \"Default Authentication Method\" panel. Select \"saml\" authentication mode. Click \"Update\" button at the bottom of this page. Try to log in using SAML authentication method: Wait 30 seconds and try to log in again. During this time oxAuth reload list of available person authentication modules. Open second browser or second browsing session and try to log in again. It's better to try to do that from another browser session because we can return back to previous authentication method if something will go wrong. There are log messages in this custom authentication script. In order to debug this module we can use command like this: tail -f /opt/tomcat/logs/wrapper.log | grep \"Saml\"","title":"Installation"},{"location":"script-catalog/person_authentication/other/saml/#properties","text":"This module has next properties: 1) asimba_saml_certificate_file - It's path to file which contains public IdP certificate in. Example: /etc/certs/saml.pem 2) saml_idp_sso_target_url - The URL at the Identity Provider where to the authentication request should be sent. Example: https://test.gluu.org/asimba/profiles/saml2/sso/web 3) asimba_entity_id - Set the issuer of the authentication request. This would usually be the URL of the issuing web application Example: https://test.gluu.info/saml 4) saml_use_authn_context - Specify if Saml request should contains samlp:RequestedAuthnContext section. Allowed values: true/false Example: true 5) saml_name_identifier_format - Specify in which format IdP should return a name identifier for the user. This property isn't required when saml_use_authn_context has value 'false' Example: urn:oasis:names SAML:2.0:nameid-format:persistent 6) saml_deployment_type - Specify deployment mode. It's optional property. If this property isn't specified Saml script tries to find user in local LDAP by 'Persistent Id' specified in Saml response. If this property has 'map' value Saml script map should map 'Persistent Id' to local user account. If this property has 'enroll' value Saml script should add new user to local LDAP with status 'register'. In order to map IDP attributes to local attributes it uses propertiessaml_idp_attributes_list and saml_local_attributes_list. Allowed values: map/enroll/enroll_all_attr Example: enroll 7) saml_validate_response - Specify if Saml script should valide Saml response signature. The path to IdP certificate should be specified in asimba_saml_certificate_file property. It's optional property. Default mode specify to validate Saml response. Allowed values: true/false Example: true 8) saml_client_configuration_attribute - Specify oxAuth client entry attribute name which contains Saml configuration in JSON format which allow to override next properties: asimba_saml_certificate_file, asimba_entity_id, saml_use_authn_context, saml_idp_attributes_list, saml_local_attributes_list. It's optional property. Property asimba_saml_certificate_file isn't mandatory. If the value is empty Smal script use global asimba_saml_certificate_file value. Example: oxAuthExtraConf Example content of client oxAuthExtraConf attribute: {\"saml_certificate_file\": \"\", \"asimba_entity_id\": \"https://localhost/app1\", \"saml_use_authn_context\": \"false\", \"saml_idp_attributes_list\": \"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname\", \"saml_local_attributes_list\": \"uid, mail, givenName, sn, cn\"} 9) saml_idp_attributes_list - Comma separated list of attribute names. Specify list of IdP attributes which Saml scrpt should use to map to local attributes. It's optional property. It's manadatory only if saml_deployment_type has value 'enroll'. The count of attributes in this property should be equal to count attributes in saml_local_attributes_list property. Example: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname 10) saml_local_attributes_list - Comma separated list of attribute names. Specify list of local attributes mapped from Saml response. It's optional property. It's manadatory only if saml_deployment_type has value 'enroll'. The count of attributes in this property should be equal to count attributes in saml_idp_attributes_list property. Local attributes list should contains next mandatory attributes: uid, mail, givenName, sn, cn. Example: uid, mail, givenName, sn, cn 11) user_object_classes - Specify custom list of LDAP user object classes Example: eduPerson 12) enforce_uniqueness_attr_list - Specify list of unique user attributes to validate if there is no user with simular attributes already Example: uid, mail 13) saml_extension_module - Specify external module name. It's optional property. External module should implements 2 methods: def init(conf_attr): ... return True/False def postLogin ( conf_attr , user ) : ... return True / False SAML scripts calls init method at initialization , and calls postLogin after to execute additional custom workflow . 14) saml_allow_basic_login - Specify if authentication module should allow both: basic and saml authentications Example: false","title":"Properties"},{"location":"script-catalog/person_authentication/other/saml-passport/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/person_authentication/other/saml-passport/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/person_authentication/other/saml-passport/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/person_authentication/other/saml-passport/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/person_authentication/other/toopher/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/person_authentication/other/toopher/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/person_authentication/other/toopher/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/person_authentication/other/toopher/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/person_authentication/other/twilio_sms/","text":"Twilio SMS Authentication Script This is a two step authentication workflow. The first step is standard username password authentication against the local Gluu Server LDAP. The second step requires the person to enter a code that is sent via SMS to the person's mobile number. Script contents here","title":"Index"},{"location":"script-catalog/person_authentication/other/uaf/","text":"Script contents here This is a person authentication script for jans-auth-server that enables UAF for user authentication. The module has a few properties: 1) uaf_server_uri - It's mandatory property. It's URL to UAF server. Example: https://ce-dev.jans.org 2) uaf_policy_name - Specify UAF policy name. It's optional property. Example: default 3) send_push_notifaction - Specify if UAF server should send push notifications to person mobile phone. It's optional property. Allowed values: true/false Example: false 4) registration_uri - It's URL to page where user can register new account. It's optional property. Example: https://ce-dev.jans.org/identity/register 5) qr_options - Specify width and height of QR image. It's optional property. Example: qr_options: { width: 400, height: 400 }","title":"Index"},{"location":"script-catalog/person_authentication/other/uaf/Properties%20description/","text":"Script contents here This is a person authentication script for jans-auth-server that enables UAF for user authentication. The module has a few properties: 1) uaf_server_uri - It's mandatory property. It's URL to UAF server. Example: https://ce-dev.jans.org 2) uaf_policy_name - Specify UAF policy name. It's optional property. Example: default 3) send_push_notifaction - Specify if UAF server should send push notifications to person mobile phone. It's optional property. Allowed values: true/false Example: false 4) registration_uri - It's URL to page where user can register new account. It's optional property. Example: https://ce-dev.jans.org/identity/register 5) qr_options - Specify width and height of QR image. It's optional property. Example: qr_options: { width: 400, height: 400 }","title":"Properties description"},{"location":"script-catalog/person_authentication/other/wikid/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/person_authentication/other/wikid/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/person_authentication/other/wikid/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/person_authentication/other/wikid/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/person_authentication/other/wwpass/","text":"WWPass integration for Gluu # WWPass replaces the traditional username and password login with a more advanced multi-factor authentication solution. WWPass employs strong cryptography and robust combination of authentication factors to deliver a secure and user-friendly authentication experience. WWPass authentication starts with a smartphone app or a hardware token as the first authentication factor. Then additional authentication factors such as PIN or biometrics can be added to verify the user identity further. Installation # To install WWPass support in Gluu server refer to INSTALLATION.md . To install additional components refer to main wwpass-gluu repository at https://github.com/wwpass/gluu Contacts # Feel free to contact WWPass at support@wwpass.com if you have trouble integrating WWPass in your Gluu setup","title":"WWPass integration for Gluu"},{"location":"script-catalog/person_authentication/other/wwpass/#wwpass-integration-for-gluu","text":"WWPass replaces the traditional username and password login with a more advanced multi-factor authentication solution. WWPass employs strong cryptography and robust combination of authentication factors to deliver a secure and user-friendly authentication experience. WWPass authentication starts with a smartphone app or a hardware token as the first authentication factor. Then additional authentication factors such as PIN or biometrics can be added to verify the user identity further.","title":"WWPass integration for Gluu"},{"location":"script-catalog/person_authentication/other/wwpass/#installation","text":"To install WWPass support in Gluu server refer to INSTALLATION.md . To install additional components refer to main wwpass-gluu repository at https://github.com/wwpass/gluu","title":"Installation"},{"location":"script-catalog/person_authentication/other/wwpass/#contacts","text":"Feel free to contact WWPass at support@wwpass.com if you have trouble integrating WWPass in your Gluu setup","title":"Contacts"},{"location":"script-catalog/person_authentication/other/wwpass/INSTALLATION/","text":"Setting Up WWPass Authentication in Gluu Server # Introduction # WWPass replaces the traditional username and password login with a more advanced multi-factor authentication solution. WWPass employs strong cryptography and robust combination of authentication factors to deliver a secure and user-friendly authentication experience. WWPass authentication starts with a smartphone app or a hardware token as the first authentication factor. Then additional authentication factors such as PIN or biometrics can be added to verify the user identity further. Gluu Server is a container distribution of free open source software (FOSS) for identity and access management (IAM). Gluu Server combines SAML 2.0, LDAP, OpenID Connect, and other authentication and authorization protocol implementations to create a platform for user authentication, identity information, and policy decisions. Combining WWPass strong multi-factor authentication with the versatility of Gluu Server helps to build secure IAM solutions that can be used for single sign-on (SSO), customer identity and access management (CIAM), and identity federation. Prerequisites # This tutorial assumes that you have the following: Gluu Server 4.1.1 installed on Ubuntu Server 18.04 or 16.04; An administrative account on this Ubuntu Server; An application certificate and private key for WWPass authentication; WWPass Key app or hardware token; Obtain Application Certificate and Private Key From WWPass # To obtain an application certificate and private key go to wwpass.com , click Sign Up to create a developer account or Log In if you already have an account. Then follow the website instructions to register your application domain and issue the application certificate. Prepare WWPass Integration Files # Copy this directory to your Gluu server and make it current cd wwpass Files in pages directory should be deployed to /opt/gluu-server/opt/gluu/jetty/oxauth/custom/pages/ sudo cp -rL pages/* /opt/gluu-server/opt/gluu/jetty/oxauth/custom/pages/ Files in static directory should be deployed to /opt/gluu-server/opt/gluu/jetty/oxauth/custom/static/ sudo cp -rL pages/* /opt/gluu-server/opt/gluu/jetty/oxauth/custom/static/ Copy wwpass.py to /opt/gluu-server/opt/gluu/python/libs/ sudo cp wwpass.py /opt/gluu-server/opt/gluu/python/libs/ Copy ticket.json to /opt/gluu-server/opt/wwpass_gluu/cgi sudo mkdir -p /opt/gluu-server/opt/wwpass_gluu/cgi sudo cp ticket.json /opt/gluu-server/opt/wwpass_gluu/cgi Make sure ticket.json is executable sudo chmod 755 /opt/gluu-server/opt/wwpass_gluu/cgi/ticket.json Copy WWPass application certificate and private key to /opt/gluu-server/opt/wwpass_gluu/ (assuming the certificate and key files are in your home directory) sudo cp ~/gluu_client.crt /opt/gluu-server/opt/wwpass_gluu/gluu_client.crt sudo cp ~/gluu_client.key /opt/gluu-server/opt/wwpass_gluu/gluu_client.key Replace ~/gluu_client.crt and ~/gluu_client.key with the names and location of your certificate and key files. Copy WWPass CA certificate wwpass.ca.crt to /opt/gluu-server/opt/wwpass_gluu/ sudo cp wwpass.ca.crt /opt/gluu-server/opt/wwpass_gluu Log in to the Gluu Server container sudo /sbin/gluu-serverd login Change ownership of files and directories just copied chown -R jetty:jetty /opt/jetty chown root:gluu /opt/gluu/python/libs/wwpass.py Configure Apache # Use your favorite console text editor to change Apache configuration [vi|nano|joe|...] /opt/gluu-server/etc/apache2/sites-available/https_gluu.conf Scroll down the file until you find the last <Location>...</Location> tag and insert the following snippet below it: <Location /wwpass > require all granted </Location> ScriptAlias \"/wwpass/\" \"/opt/wwpass_gluu/cgi/\" <Directory /opt/wwpass_gluu/cgi/ > SetHandler cgi-script Options +ExecCGI Order deny,allow Allow from all </Directory> Save the file and exit the editor. Enable mod_cgi and restart apache: a2enmod cgi systemctl restart apache2 Check that ticket.json is working. Go to https://<your_gluu_host>/wwpass/ticket.json . If your setup is correct, you will see output like this: { \"result\" : true , \"data\" : \"SPNAME:07629a1963c5e4f4f339ecb852b7a0bf10a90c62@p-sp-05-50:16033\" , \"ttl\" : 600 , \"encoding\" : \"plain\" } Configure Gluu Server # Log in as administrator and go to \"Configuration -> Manage Custom scripts\". In Person Authentication tab, click Add custom script configuration at the bottom of the page Create custom script wwpass with Location Type set to Database . Add the following to Custom Property fields by clicking on Add new property button: wwpass_crt_file: /opt/wwpass_gluu/gluu_client.crt wwpass_key_file: /opt/wwpass_gluu/gluu_client.key registration_url: URL of the registration web application, if you have one. Do not add this property otherwise recovery_url: URL for account recovery, if you have one. Do not add this property otherwise. To require PIN or biometrics during login, add: use_pin: True To enable binding WWPass keys with email, add: allow_email_bind: True Note, your Gluu server should be able to send emails, see Configuration -> Organization configuration -> SMTP Server Configuration . To enable binding WWPass keys with existing usernames and passwords, add: allow_password_bind: True To enable binding WWPass keys with another WWPass key, add: allow_passkey_bind: True Replace the content of Script textbox with the content of wwpassauth.py from gluu-master Set Enabled checkbox to enable the custom script: Click the Update button. It's also recommended to increase the unauthenticated session lifetime to give users more time to bind their WWPass keys. Go to Configuration -> JSON configuration -> OxAuth Configuration , find sessionIdUnauthenticatedUnusedLifetime setting and set it to 600 or more. Click Update to save settings. Set up Authentication Method # Before switching to WWPass authentication, make sure you have opened an administrator session in a different browser (not in a different window, but a completely different browser). Do not close that browser window and reload it from time to time to make sure your session does not expire. Keep the backup session opened until you are sure that WWPass authentication works properly or you might lock yourself out of Gluu. If that happens, refer to: Gluu FAQ In the Gluu Admin interface, navigate to Configuration -> Manage Authentication -> Default Authentication Method . Set both options to \"wwpass\". Click Update to save settings. Test Your Setup # Open \"https:// /\" in a different browser (not the one you used to configure Gluu). Try to sign in to your Gluu server with WWPass and bind your key using either email or username and password. If something does not work as expected, return to your main browser and revert Configuration -> Manage Authentication -> Default Authentication Method back to auth_ldap_server while you troubleshoot the problem. Troubleshooting # Relevant Gluu log files are: /opt/gluu-server/opt/gluu/jetty/oxauth/logs/oxauth.log /opt/gluu-server/opt/gluu/jetty/oxauth/logs/oxauth_script.log Check the files above for any errors. Errors in wwpass interception script are also displayed in Gluu web interface at 'Configuration -> Manage Custom scripts'. If there are any errors in the script, its name will be in red and the script editor will display the red button named \"Show Error\". Feel free to contact WWPass at support@wwpass.com if you have troubles integrating WWPass in your Gluu Server.","title":"Setting Up WWPass Authentication in Gluu Server"},{"location":"script-catalog/person_authentication/other/wwpass/INSTALLATION/#setting-up-wwpass-authentication-in-gluu-server","text":"","title":"Setting Up WWPass Authentication in Gluu Server"},{"location":"script-catalog/person_authentication/other/wwpass/INSTALLATION/#introduction","text":"WWPass replaces the traditional username and password login with a more advanced multi-factor authentication solution. WWPass employs strong cryptography and robust combination of authentication factors to deliver a secure and user-friendly authentication experience. WWPass authentication starts with a smartphone app or a hardware token as the first authentication factor. Then additional authentication factors such as PIN or biometrics can be added to verify the user identity further. Gluu Server is a container distribution of free open source software (FOSS) for identity and access management (IAM). Gluu Server combines SAML 2.0, LDAP, OpenID Connect, and other authentication and authorization protocol implementations to create a platform for user authentication, identity information, and policy decisions. Combining WWPass strong multi-factor authentication with the versatility of Gluu Server helps to build secure IAM solutions that can be used for single sign-on (SSO), customer identity and access management (CIAM), and identity federation.","title":"Introduction"},{"location":"script-catalog/person_authentication/other/wwpass/INSTALLATION/#prerequisites","text":"This tutorial assumes that you have the following: Gluu Server 4.1.1 installed on Ubuntu Server 18.04 or 16.04; An administrative account on this Ubuntu Server; An application certificate and private key for WWPass authentication; WWPass Key app or hardware token;","title":"Prerequisites"},{"location":"script-catalog/person_authentication/other/wwpass/INSTALLATION/#obtain-application-certificate-and-private-key-from-wwpass","text":"To obtain an application certificate and private key go to wwpass.com , click Sign Up to create a developer account or Log In if you already have an account. Then follow the website instructions to register your application domain and issue the application certificate.","title":"Obtain Application Certificate and Private Key From WWPass"},{"location":"script-catalog/person_authentication/other/wwpass/INSTALLATION/#prepare-wwpass-integration-files","text":"Copy this directory to your Gluu server and make it current cd wwpass Files in pages directory should be deployed to /opt/gluu-server/opt/gluu/jetty/oxauth/custom/pages/ sudo cp -rL pages/* /opt/gluu-server/opt/gluu/jetty/oxauth/custom/pages/ Files in static directory should be deployed to /opt/gluu-server/opt/gluu/jetty/oxauth/custom/static/ sudo cp -rL pages/* /opt/gluu-server/opt/gluu/jetty/oxauth/custom/static/ Copy wwpass.py to /opt/gluu-server/opt/gluu/python/libs/ sudo cp wwpass.py /opt/gluu-server/opt/gluu/python/libs/ Copy ticket.json to /opt/gluu-server/opt/wwpass_gluu/cgi sudo mkdir -p /opt/gluu-server/opt/wwpass_gluu/cgi sudo cp ticket.json /opt/gluu-server/opt/wwpass_gluu/cgi Make sure ticket.json is executable sudo chmod 755 /opt/gluu-server/opt/wwpass_gluu/cgi/ticket.json Copy WWPass application certificate and private key to /opt/gluu-server/opt/wwpass_gluu/ (assuming the certificate and key files are in your home directory) sudo cp ~/gluu_client.crt /opt/gluu-server/opt/wwpass_gluu/gluu_client.crt sudo cp ~/gluu_client.key /opt/gluu-server/opt/wwpass_gluu/gluu_client.key Replace ~/gluu_client.crt and ~/gluu_client.key with the names and location of your certificate and key files. Copy WWPass CA certificate wwpass.ca.crt to /opt/gluu-server/opt/wwpass_gluu/ sudo cp wwpass.ca.crt /opt/gluu-server/opt/wwpass_gluu Log in to the Gluu Server container sudo /sbin/gluu-serverd login Change ownership of files and directories just copied chown -R jetty:jetty /opt/jetty chown root:gluu /opt/gluu/python/libs/wwpass.py","title":"Prepare WWPass Integration Files"},{"location":"script-catalog/person_authentication/other/wwpass/INSTALLATION/#configure-apache","text":"Use your favorite console text editor to change Apache configuration [vi|nano|joe|...] /opt/gluu-server/etc/apache2/sites-available/https_gluu.conf Scroll down the file until you find the last <Location>...</Location> tag and insert the following snippet below it: <Location /wwpass > require all granted </Location> ScriptAlias \"/wwpass/\" \"/opt/wwpass_gluu/cgi/\" <Directory /opt/wwpass_gluu/cgi/ > SetHandler cgi-script Options +ExecCGI Order deny,allow Allow from all </Directory> Save the file and exit the editor. Enable mod_cgi and restart apache: a2enmod cgi systemctl restart apache2 Check that ticket.json is working. Go to https://<your_gluu_host>/wwpass/ticket.json . If your setup is correct, you will see output like this: { \"result\" : true , \"data\" : \"SPNAME:07629a1963c5e4f4f339ecb852b7a0bf10a90c62@p-sp-05-50:16033\" , \"ttl\" : 600 , \"encoding\" : \"plain\" }","title":"Configure Apache"},{"location":"script-catalog/person_authentication/other/wwpass/INSTALLATION/#configure-gluu-server","text":"Log in as administrator and go to \"Configuration -> Manage Custom scripts\". In Person Authentication tab, click Add custom script configuration at the bottom of the page Create custom script wwpass with Location Type set to Database . Add the following to Custom Property fields by clicking on Add new property button: wwpass_crt_file: /opt/wwpass_gluu/gluu_client.crt wwpass_key_file: /opt/wwpass_gluu/gluu_client.key registration_url: URL of the registration web application, if you have one. Do not add this property otherwise recovery_url: URL for account recovery, if you have one. Do not add this property otherwise. To require PIN or biometrics during login, add: use_pin: True To enable binding WWPass keys with email, add: allow_email_bind: True Note, your Gluu server should be able to send emails, see Configuration -> Organization configuration -> SMTP Server Configuration . To enable binding WWPass keys with existing usernames and passwords, add: allow_password_bind: True To enable binding WWPass keys with another WWPass key, add: allow_passkey_bind: True Replace the content of Script textbox with the content of wwpassauth.py from gluu-master Set Enabled checkbox to enable the custom script: Click the Update button. It's also recommended to increase the unauthenticated session lifetime to give users more time to bind their WWPass keys. Go to Configuration -> JSON configuration -> OxAuth Configuration , find sessionIdUnauthenticatedUnusedLifetime setting and set it to 600 or more. Click Update to save settings.","title":"Configure Gluu Server"},{"location":"script-catalog/person_authentication/other/wwpass/INSTALLATION/#set-up-authentication-method","text":"Before switching to WWPass authentication, make sure you have opened an administrator session in a different browser (not in a different window, but a completely different browser). Do not close that browser window and reload it from time to time to make sure your session does not expire. Keep the backup session opened until you are sure that WWPass authentication works properly or you might lock yourself out of Gluu. If that happens, refer to: Gluu FAQ In the Gluu Admin interface, navigate to Configuration -> Manage Authentication -> Default Authentication Method . Set both options to \"wwpass\". Click Update to save settings.","title":"Set up Authentication Method"},{"location":"script-catalog/person_authentication/other/wwpass/INSTALLATION/#test-your-setup","text":"Open \"https:// /\" in a different browser (not the one you used to configure Gluu). Try to sign in to your Gluu server with WWPass and bind your key using either email or username and password. If something does not work as expected, return to your main browser and revert Configuration -> Manage Authentication -> Default Authentication Method back to auth_ldap_server while you troubleshoot the problem.","title":"Test Your Setup"},{"location":"script-catalog/person_authentication/other/wwpass/INSTALLATION/#troubleshooting","text":"Relevant Gluu log files are: /opt/gluu-server/opt/gluu/jetty/oxauth/logs/oxauth.log /opt/gluu-server/opt/gluu/jetty/oxauth/logs/oxauth_script.log Check the files above for any errors. Errors in wwpass interception script are also displayed in Gluu web interface at 'Configuration -> Manage Custom scripts'. If there are any errors in the script, its name will be in red and the script editor will display the red button named \"Show Error\". Feel free to contact WWPass at support@wwpass.com if you have troubles integrating WWPass in your Gluu Server.","title":"Troubleshooting"},{"location":"script-catalog/person_authentication/other/yubicloud/","text":"Yubicloud OTP Validataion # Script contents here This is a single step authentication workflow. Instead of a human entering a password, Yubico's Yubikey OTP will be taken in as password. This script uses the Yubicloud Service by Yubico for validation of the OTP. Here are the steps required to setup the Yubico OTP as password. 1. Set up a custom attribute named the `yubikeyId` . Add this attribute the users who have to be authenticated via this method . Store the public part of the Yubikey Idendity ( usually the first 12 chars of OTP ) in this attribute against each user . This matches the user against the key . Set ting up Custom Attributes : https :// www . gluu . org / docs / customize / attributes / Find the Yubikey Idendity : https :// demo . yubico . com 2. Register for a Yubicloud API Key and get client ID and client Secret . https :// upgrade . yubico . com / getapikey / 3. Configure the custom script : i ) Enter the value for `yubicloud_uri` as any one of the following : api . yubico . com api2 . yubico . com api3 . yubico . com api4 . yubico . com api5 . yubico . com ii ) Enter the client secret as `yubicloud_api_key` iii ) Enter the client ID as `yubicloud_id` Now the method yubicloud can be set as the authentication mechanism and Yubikey can be used in place of the password of the users for authentication.","title":"Index"},{"location":"script-catalog/person_authentication/other/yubicloud/#yubicloud-otp-validataion","text":"Script contents here This is a single step authentication workflow. Instead of a human entering a password, Yubico's Yubikey OTP will be taken in as password. This script uses the Yubicloud Service by Yubico for validation of the OTP. Here are the steps required to setup the Yubico OTP as password. 1. Set up a custom attribute named the `yubikeyId` . Add this attribute the users who have to be authenticated via this method . Store the public part of the Yubikey Idendity ( usually the first 12 chars of OTP ) in this attribute against each user . This matches the user against the key . Set ting up Custom Attributes : https :// www . gluu . org / docs / customize / attributes / Find the Yubikey Idendity : https :// demo . yubico . com 2. Register for a Yubicloud API Key and get client ID and client Secret . https :// upgrade . yubico . com / getapikey / 3. Configure the custom script : i ) Enter the value for `yubicloud_uri` as any one of the following : api . yubico . com api2 . yubico . com api3 . yubico . com api4 . yubico . com api5 . yubico . com ii ) Enter the client secret as `yubicloud_api_key` iii ) Enter the client ID as `yubicloud_id` Now the method yubicloud can be set as the authentication mechanism and Yubikey can be used in place of the password of the users for authentication.","title":"Yubicloud OTP Validataion"},{"location":"script-catalog/person_authentication/otp-external-authenticator/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/person_authentication/otp-external-authenticator/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/person_authentication/otp-external-authenticator/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/person_authentication/otp-external-authenticator/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/person_authentication/smpp-2fa/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/person_authentication/smpp-2fa/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/person_authentication/smpp-2fa/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/person_authentication/smpp-2fa/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/","text":"Super Gluu is an open source, push-notification two-factor authentication (2FA) mobile app which can be integrated to work with the Janssen Server. Super Gluu uses public-key encryption as specified in the FIDO U2F authentication standard . Upon device enrollment, Super Gluu registers its public key against the Janssen's FIDO Server's super_gluu_registration_endpoint endpoint. Authentication takes place at super_gluu_authentication_endpoint where a challenge response ensures that the device has the corresponding private key. Janssen's Super Gluu endpoint # The fido2 server serves the registration and authentication of Super Gluu credentials, the URI of which can be found at https://<my.jans.server>/.well-known/fido2-configuration . However, this feature has to be enabled first, else the endpoints super_gluu_registration_endpoint and super_gluu_authentication_endpoint will not show up by default. Prerequisites: # A. Install the FIDO2 server: # The Fido2 server would have been installed during the initial server setup. If not installed, follow these steps to install the FIDO2 server. 1. setup.py was already run during installation. Run setup.py once again. python3 /opt/jans/jans-setup/setup.py 2. The script will detect that you already have a jans installation and you will be prompted to install the uninstalled components. 3. Select the FIDO2 server and complete the post install process. B. Enable the Super Gluu endpoint: # Use the TUI to enable \"Super Gluu\" feature C. Mobile device with Super Gluu installed # Super Gluu for iOS Super Gluu for Android D. Publicly Discoverable DNS : # An Internet accessible (non-internal or localhost) Janssen Server with DNS pointing at the public Internet address of the server If the Jannsen Server is using a self-signed certificate, Trust All must be enabled in Super Gluu (open the app, navigate to Menu > Trust all (SSL) and enable) Note The Janssen Server and Super Gluu can work in the same network, without a DNS server hostname and with a self-signed certificate. There is only one limitation: both components should belong to the same network. Instead of assigning a hostname during Janssen Server installation, an IP address can be specified. In the Super Gluu mobile app, enable Trust all (SSL) . E. Push Notification Server hosted by Gluu : # The Notification server should be configured to recieve push notifications on registered mobile devices. Configure /etc/certs/super_gluu_creds.json . For each Mobile app (Android, iOS); place the Access key / Secret key of Push Notification server. { \"android\":{ \"gluu\":{ \"enabled\":true, \"access_key\":\"36W......BP\", \"secret_access_key\":\"ueq.....fek\" } }, \"ios\":{ \"gluu\":{ \"enabled\":true, \"access_key\":\"auO......6V\", \"secret_access_key\":\"f0......oei\" } }, \"gluu\":{ \"server_uri\":\"https://api.gluu.org\" } } User and Developer Guides # User and Developer Guides can be found on the Super Gluu docs site . Interception script # Super Gluu interception script is included in the default Janssen Server distribution The Super Gluu Interception script can be configured to work in 2 modes: A. Two step Flow (Default mode) B. One step Flow A. Two step flow (Default mode): # Enrollment: # By default, users are put through a two-step, two-factor authentication process with username and password in the first step, and then push notification via Super Gluu in the second step. sequenceDiagram title SuperGluu Flow Enrollment \"Two step\" autonumber 1 participant User participant Mobile App participant Browser participant Notification server participant Jans AS User->> Browser: Log in step1 (userid , pwd) Browser ->>Jans AS: send userid ,pwd Jans AS->>Browser: validate, present enrollment (QR code) of SG User->>Mobile App: Scans the QR code Mobile App->> Mobile App: Enrollment saved on app \\n (username, appId, keyHandle, date) Mobile App->>Jans AS : Enrollment completed, <br/>enrollment data (registrationData, clientData, deviceData ) sent to Jans AS Jans AS->>Jans AS: Enrollment entry stored in Database Jans AS->>Browser: Enrollment completed. A. Client data # An example of the contents of client data are as follows: { \"typ\": \"navigator.id.finishEnrollment\", \"challenge\": \"Bkpin2iUSEQrkuSC_wDlPwzLfVwRGxLbySpVm8jwkuk\", \"origin\": \"https://my.jans.server\" } B. Device data # An example of the contents of client data are as follows: { \"uuid\": \"BBA72798-9A1C-4866-819F-819C011ED129\", \"type\": \"iPhone\", \"platform\": \"ios\", \"name\": \"ABC\u2019s iPhone\", \"os_name\": \"iOS\", \"os_version\": \"15.4\", \"custom_data\": null, \"push_token\": \"8fc4bd31e2ddbc5c5d83e4955cfd36f663ab37b426d0a4ec5c685c3a6335dd2c\" } The push_token is used by the Push Notification server . C. Registration data # This data contains following information: counter, status, rp-application, userInum, keyHandle, Public Key, attestation certificates { \"createdDate\": 1678374227774, \"updatedDate\": 1678374228300, \"createdBy\": \"johndoe\", \"updatedBy\": \"johndoe\", \"username\": \"johndoe\", \"domain\": \"/my.jans.server\", \"userId\": \"DAY7UJzdHaIXuEbQlNwBomQEPmqjsKbN4lblYqfbCZo\", \"challenge\": \"jr2LtLFRF2YG65pyo__gaKoiyP9oQbPyW6hGxdZBAS8\", \"attenstationRequest\": \"{\\\"super_gluu_request\\\":true,\\\"super_gluu_request_mode\\\":\\\"two_step\\\",\\\"super_gluu_app_id\\\":\\\"https:///my.jans.server/.well-known/openid-configuration\\\",\\\"username\\\":\\\"madhu1\\\",\\\"displayName\\\":\\\"madhu1\\\",\\\"session_id\\\":\\\"3d3f7560-8d83-4770-a6fb-cc83c787a511\\\",\\\"attestation\\\":\\\"direct\\\"}\", \"attenstationResponse\": \"{\\\"super_gluu_request\\\":true,\\\"super_gluu_request_mode\\\":\\\"two_step\\\",\\\"type\\\":\\\"public-key\\\",\\\"response\\\":{\\\"deviceData\\\":\\\"eyJuYW1lIjoiTmV4dXMgN......lLWU2ZjMtMzRlNC1hYWMxLTlhYTViOGI3MTUyOCJ9\\\",\\\"clientDataJSON\\\":\\\"eyJjaGFsbGVuZ2UiOiJqcjJM....QuZmluaXNoRW5yb2xsbWVudCJ9\\\",\\\"super_gluu_request_cancel\\\":false,\\\"attestationObject\\\":\\\"v2NmbXRzZmlkby11MmYtc3VwZXItZ2x1....gC5NYTNE-GAS3AUoD-DI9R__8\\\"},\\\"id\\\":\\\"-G1Bpm_7j0A2UIciKSPz7ku7pA2d9azzJyFQCd4Xh67Hh0gBDXAH9B--IX3hZYxtGEmY7nM01PV5Gq53O5FSsg\\\"}\", \"uncompressedECPoint\": \"v2ExAmEzJmItMQFiLTJYINmwCcnnXf6CxMCOG6bjAT5aXHCqIhgYDrBvEuKW6bWuYi0zWCARbzLZN8ytE1JiVAs0UMLoAuTWEzRPhgEtwFKA_gyPUf8\", \"publicKeyId\": \"-G1Bpm_7j0A2UIciKSPz7ku7pA2d9azzJyFQCd4Xh67Hh0gBDXAH9B--IX3hZYxtGEmY7nM01PV5Gq53O5FSsg\", \"type\": \"public-key\", \"status\": \"registered\", \"counter\": 0, \"attestationType\": \"fido-u2f-super-gluu\", \"signatureAlgorithm\": -7, \"applicationId\": \"https:///my.jans.server/.well-known/openid-configuration\" } Authentication: # sequenceDiagram title Super Gluu Authentication flow \"Two step\" autonumber 1 User->>Browser: Login Browser->>Jans AS: username and pwd Jans AS->>Jans AS: Authenticate Jans AS->>Notification server:call push API, use push token from device entry Notification server->>Mobile App: Sends push to mobile device Jans AS->>Browser: Present option of authenticating with QR code User->>Mobile App: Approve / Reject Push Mobile App->>Jans AS: Complete (finish) authentication process, send push_token for storing in Device entry of Gluu server Jans AS->Jans AS: validate response, If successful, update device entry, B. One step flow # An alternative authentication workflow, password-less authentication, can be configured by adjusting the script property authentication_mode . sequenceDiagram title SuperGluu Flow Enrollment \"One step\" autonumber 1 participant User participant Mobile App participant Browser participant Notification server participant Jans AS User->> Browser: RP page which invokes /authorize call Jans AS->>Browser: validate, present enrollment (QR code) of SG User->>Mobile App: Scans the QR code Mobile App->> Mobile App: Enrollment saved on app \\n ( appId, keyHandle, date) Mobile App->>Jans AS : Enrollment completed, <br/>enrollment data (registrationData, clientData, deviceData ) sent to Jans AS Jans AS->>Jans AS: Enrollment entry stored temp entry in database under ou=fido2_register,ou=fido2,o=jans Jans AS->>Browser: Prompt user to username-password page, inorder to link the enrollment to a user Browser->>Jans AS: send user creds Jans AS->>Jans AS: create enrollment entry attached to the user and delete temp entry under ou=fido2_register,ou=fido2,o=jans Jans AS->>Browser: enrollment completed sequenceDiagram title Super Gluu Authentication flow \"One step\" autonumber 1 participant User participant Mobile App participant Browser Browser->>Jans AS: /authorize request Jans AS->>Browser: Present QR code for scanning Mobile App->>Browser: Code is scanned User->>Mobile App: Approve / Reject Mobile App->> Jans AS:Send authentication request Jans AS->> Jans AS: no username, search by keyhandle Jans AS->> Jans AS: verify Super Gluu credentials, If successful, update device entry Jans AS->>Browser: Authentication completed Custom script Properties # The Super Gluu authentication script has the following properties: Property Description Example authentication_mode Determine factor of authentication - two_step or one_step two_step credentials_file JSON file for SuperGluu /etc/certs/super_gluu_creds.json label The name of the application Super Gluu notification_service_mode Service used to enable push notifications gluu qr_options Size of the QR code that is used for enrollment and/or authentication { size: 500, mSize: 0.05 } registration_uri Registration endpoint of the IDP https://idp.example.com/identity/register supergluu_android_download_url Android app download link, used in the login page https://play.google.com/store/apps/details?id=gluu.super.gluu supergluu_ios_download_url iOS app download link, used in the login page https://itunes.apple.com/us/app/super-gluu/id1093479646 Notes for administrator: # Configure /etc/certs/super_gluu_creds.json : For each Android and apple app, configure Access key / Secret key of oxNotify server Enable Sign-in with Super-Gluu Authentication script # Using the OpenID Connect acr_values parameter, web and mobile clients can request any enabled authentication mechanism. To enable Super Gluu as an authentication method, follow the steps below: Obtain the json contents of super_gluu custom script by using a jans-cli command like get-config-scripts-by-type , get-config-scripts-by-inum etc. e.g : /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-type --url-suffix type:PERSON_AUTHENTICATION , /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-inum --url-suffix inum:6122281b-b55d-4dd0-8115-b098eeeee2b7 Update the custom script and change the enabled attribute to true Now Sign-in with Super-Gluu is an available authentication mechanism for your Janssen Server. This means that, using OpenID Connect acr_values, applications can now request Super-Gluu authentication for users. !!! Note To make sure super_gluu has been enabled successfully, you can check your Janssen's Auth Server OpenID Connect configuration by navigating to the following URL: https:// /.well-known/openid-configuration. Find \"acr_values_supported\": and you should see \"super_gluu\". Make Sign-in with Super-Gluu Script as default authentication script: # Use this link as a reference. Steps: 1. Create a file say sg-auth-default.json with the following contents { \"defaultAcr\": \"super_gluu\" } 2.Update the default authentication method to super_gluu /opt/jans/jans-cli/config-cli.py --operation-id put-acrs --data /tmp/sg-auth-default.json Test the feature # To test, enter the complete URL for authorization in a browser or create a simple webpage with a link that simulates the user sign-in attempt. If the server is configured properly, the first page for the selected authentication method will be displayed to the user. An example of a complete URL looks like this - https://<your.jans.server>/jans-auth/authorize.htm?response_type=code&redirect_uri=https://<your.jans.server>/admin&client_id=<replace_with_inum_client_id>&scope=openid+profile+email+user_name&state=faad2cdjfdddjfkdf&nonce=dajdffdfsdcfff Customizations to Super Gluu Login Pages # The Gluu Server includes a default public-facing pages for Super Gluu for enrollment and authentication. To customize the look and feel of the pages, follow the customization guide . Self-service # To offer end-users a portal where they can manage their own account security preferences, including two-factor authentication credentials like Super Gluu, check out our new app, Gluu Casa . Manual Device Management # A user's Super Gluu device(s) can be removed by a Janssen administrator by directly locating the user entry in LDAP. For example, let's say user abc loses their device and wants to enroll a new device to use Super Gluu. Find the DN of the user in LDAP Find the registation under ou=fido2_register for associated with the user Remove the jansId DN Now the old device is gone and the user can enroll a new device Device management using SCIM # See the SCIM documentation on how to manage Super Gluu devices, using the SCIM protocol.","title":"Index"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#janssens-super-gluu-endpoint","text":"The fido2 server serves the registration and authentication of Super Gluu credentials, the URI of which can be found at https://<my.jans.server>/.well-known/fido2-configuration . However, this feature has to be enabled first, else the endpoints super_gluu_registration_endpoint and super_gluu_authentication_endpoint will not show up by default.","title":"Janssen's Super Gluu endpoint"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#prerequisites","text":"","title":"Prerequisites:"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#a-install-the-fido2-server","text":"The Fido2 server would have been installed during the initial server setup. If not installed, follow these steps to install the FIDO2 server. 1. setup.py was already run during installation. Run setup.py once again. python3 /opt/jans/jans-setup/setup.py 2. The script will detect that you already have a jans installation and you will be prompted to install the uninstalled components. 3. Select the FIDO2 server and complete the post install process.","title":"A. Install the FIDO2 server:"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#b-enable-the-super-gluu-endpoint","text":"Use the TUI to enable \"Super Gluu\" feature","title":"B. Enable the Super Gluu endpoint:"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#c-mobile-device-with-super-gluu-installed","text":"Super Gluu for iOS Super Gluu for Android","title":"C. Mobile device with Super Gluu installed"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#d-publicly-discoverable-dns","text":"An Internet accessible (non-internal or localhost) Janssen Server with DNS pointing at the public Internet address of the server If the Jannsen Server is using a self-signed certificate, Trust All must be enabled in Super Gluu (open the app, navigate to Menu > Trust all (SSL) and enable) Note The Janssen Server and Super Gluu can work in the same network, without a DNS server hostname and with a self-signed certificate. There is only one limitation: both components should belong to the same network. Instead of assigning a hostname during Janssen Server installation, an IP address can be specified. In the Super Gluu mobile app, enable Trust all (SSL) .","title":"D. Publicly Discoverable DNS :"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#e-push-notification-server-hosted-by-gluu","text":"The Notification server should be configured to recieve push notifications on registered mobile devices. Configure /etc/certs/super_gluu_creds.json . For each Mobile app (Android, iOS); place the Access key / Secret key of Push Notification server. { \"android\":{ \"gluu\":{ \"enabled\":true, \"access_key\":\"36W......BP\", \"secret_access_key\":\"ueq.....fek\" } }, \"ios\":{ \"gluu\":{ \"enabled\":true, \"access_key\":\"auO......6V\", \"secret_access_key\":\"f0......oei\" } }, \"gluu\":{ \"server_uri\":\"https://api.gluu.org\" } }","title":"E. Push Notification Server hosted by Gluu:"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#user-and-developer-guides","text":"User and Developer Guides can be found on the Super Gluu docs site .","title":"User and Developer Guides"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#interception-script","text":"Super Gluu interception script is included in the default Janssen Server distribution The Super Gluu Interception script can be configured to work in 2 modes: A. Two step Flow (Default mode) B. One step Flow","title":"Interception script"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#a-two-step-flow-default-mode","text":"","title":"A. Two step flow (Default mode):"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#enrollment","text":"By default, users are put through a two-step, two-factor authentication process with username and password in the first step, and then push notification via Super Gluu in the second step. sequenceDiagram title SuperGluu Flow Enrollment \"Two step\" autonumber 1 participant User participant Mobile App participant Browser participant Notification server participant Jans AS User->> Browser: Log in step1 (userid , pwd) Browser ->>Jans AS: send userid ,pwd Jans AS->>Browser: validate, present enrollment (QR code) of SG User->>Mobile App: Scans the QR code Mobile App->> Mobile App: Enrollment saved on app \\n (username, appId, keyHandle, date) Mobile App->>Jans AS : Enrollment completed, <br/>enrollment data (registrationData, clientData, deviceData ) sent to Jans AS Jans AS->>Jans AS: Enrollment entry stored in Database Jans AS->>Browser: Enrollment completed.","title":"Enrollment:"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#a-client-data","text":"An example of the contents of client data are as follows: { \"typ\": \"navigator.id.finishEnrollment\", \"challenge\": \"Bkpin2iUSEQrkuSC_wDlPwzLfVwRGxLbySpVm8jwkuk\", \"origin\": \"https://my.jans.server\" }","title":"A. Client data"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#b-device-data","text":"An example of the contents of client data are as follows: { \"uuid\": \"BBA72798-9A1C-4866-819F-819C011ED129\", \"type\": \"iPhone\", \"platform\": \"ios\", \"name\": \"ABC\u2019s iPhone\", \"os_name\": \"iOS\", \"os_version\": \"15.4\", \"custom_data\": null, \"push_token\": \"8fc4bd31e2ddbc5c5d83e4955cfd36f663ab37b426d0a4ec5c685c3a6335dd2c\" } The push_token is used by the Push Notification server .","title":"B. Device data"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#c-registration-data","text":"This data contains following information: counter, status, rp-application, userInum, keyHandle, Public Key, attestation certificates { \"createdDate\": 1678374227774, \"updatedDate\": 1678374228300, \"createdBy\": \"johndoe\", \"updatedBy\": \"johndoe\", \"username\": \"johndoe\", \"domain\": \"/my.jans.server\", \"userId\": \"DAY7UJzdHaIXuEbQlNwBomQEPmqjsKbN4lblYqfbCZo\", \"challenge\": \"jr2LtLFRF2YG65pyo__gaKoiyP9oQbPyW6hGxdZBAS8\", \"attenstationRequest\": \"{\\\"super_gluu_request\\\":true,\\\"super_gluu_request_mode\\\":\\\"two_step\\\",\\\"super_gluu_app_id\\\":\\\"https:///my.jans.server/.well-known/openid-configuration\\\",\\\"username\\\":\\\"madhu1\\\",\\\"displayName\\\":\\\"madhu1\\\",\\\"session_id\\\":\\\"3d3f7560-8d83-4770-a6fb-cc83c787a511\\\",\\\"attestation\\\":\\\"direct\\\"}\", \"attenstationResponse\": \"{\\\"super_gluu_request\\\":true,\\\"super_gluu_request_mode\\\":\\\"two_step\\\",\\\"type\\\":\\\"public-key\\\",\\\"response\\\":{\\\"deviceData\\\":\\\"eyJuYW1lIjoiTmV4dXMgN......lLWU2ZjMtMzRlNC1hYWMxLTlhYTViOGI3MTUyOCJ9\\\",\\\"clientDataJSON\\\":\\\"eyJjaGFsbGVuZ2UiOiJqcjJM....QuZmluaXNoRW5yb2xsbWVudCJ9\\\",\\\"super_gluu_request_cancel\\\":false,\\\"attestationObject\\\":\\\"v2NmbXRzZmlkby11MmYtc3VwZXItZ2x1....gC5NYTNE-GAS3AUoD-DI9R__8\\\"},\\\"id\\\":\\\"-G1Bpm_7j0A2UIciKSPz7ku7pA2d9azzJyFQCd4Xh67Hh0gBDXAH9B--IX3hZYxtGEmY7nM01PV5Gq53O5FSsg\\\"}\", \"uncompressedECPoint\": \"v2ExAmEzJmItMQFiLTJYINmwCcnnXf6CxMCOG6bjAT5aXHCqIhgYDrBvEuKW6bWuYi0zWCARbzLZN8ytE1JiVAs0UMLoAuTWEzRPhgEtwFKA_gyPUf8\", \"publicKeyId\": \"-G1Bpm_7j0A2UIciKSPz7ku7pA2d9azzJyFQCd4Xh67Hh0gBDXAH9B--IX3hZYxtGEmY7nM01PV5Gq53O5FSsg\", \"type\": \"public-key\", \"status\": \"registered\", \"counter\": 0, \"attestationType\": \"fido-u2f-super-gluu\", \"signatureAlgorithm\": -7, \"applicationId\": \"https:///my.jans.server/.well-known/openid-configuration\" }","title":"C. Registration data"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#authentication","text":"sequenceDiagram title Super Gluu Authentication flow \"Two step\" autonumber 1 User->>Browser: Login Browser->>Jans AS: username and pwd Jans AS->>Jans AS: Authenticate Jans AS->>Notification server:call push API, use push token from device entry Notification server->>Mobile App: Sends push to mobile device Jans AS->>Browser: Present option of authenticating with QR code User->>Mobile App: Approve / Reject Push Mobile App->>Jans AS: Complete (finish) authentication process, send push_token for storing in Device entry of Gluu server Jans AS->Jans AS: validate response, If successful, update device entry,","title":"Authentication:"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#b-one-step-flow","text":"An alternative authentication workflow, password-less authentication, can be configured by adjusting the script property authentication_mode . sequenceDiagram title SuperGluu Flow Enrollment \"One step\" autonumber 1 participant User participant Mobile App participant Browser participant Notification server participant Jans AS User->> Browser: RP page which invokes /authorize call Jans AS->>Browser: validate, present enrollment (QR code) of SG User->>Mobile App: Scans the QR code Mobile App->> Mobile App: Enrollment saved on app \\n ( appId, keyHandle, date) Mobile App->>Jans AS : Enrollment completed, <br/>enrollment data (registrationData, clientData, deviceData ) sent to Jans AS Jans AS->>Jans AS: Enrollment entry stored temp entry in database under ou=fido2_register,ou=fido2,o=jans Jans AS->>Browser: Prompt user to username-password page, inorder to link the enrollment to a user Browser->>Jans AS: send user creds Jans AS->>Jans AS: create enrollment entry attached to the user and delete temp entry under ou=fido2_register,ou=fido2,o=jans Jans AS->>Browser: enrollment completed sequenceDiagram title Super Gluu Authentication flow \"One step\" autonumber 1 participant User participant Mobile App participant Browser Browser->>Jans AS: /authorize request Jans AS->>Browser: Present QR code for scanning Mobile App->>Browser: Code is scanned User->>Mobile App: Approve / Reject Mobile App->> Jans AS:Send authentication request Jans AS->> Jans AS: no username, search by keyhandle Jans AS->> Jans AS: verify Super Gluu credentials, If successful, update device entry Jans AS->>Browser: Authentication completed","title":"B. One step flow"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#custom-script-properties","text":"The Super Gluu authentication script has the following properties: Property Description Example authentication_mode Determine factor of authentication - two_step or one_step two_step credentials_file JSON file for SuperGluu /etc/certs/super_gluu_creds.json label The name of the application Super Gluu notification_service_mode Service used to enable push notifications gluu qr_options Size of the QR code that is used for enrollment and/or authentication { size: 500, mSize: 0.05 } registration_uri Registration endpoint of the IDP https://idp.example.com/identity/register supergluu_android_download_url Android app download link, used in the login page https://play.google.com/store/apps/details?id=gluu.super.gluu supergluu_ios_download_url iOS app download link, used in the login page https://itunes.apple.com/us/app/super-gluu/id1093479646","title":"Custom script Properties"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#notes-for-administrator","text":"Configure /etc/certs/super_gluu_creds.json : For each Android and apple app, configure Access key / Secret key of oxNotify server","title":"Notes for administrator:"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#enable-sign-in-with-super-gluu-authentication-script","text":"Using the OpenID Connect acr_values parameter, web and mobile clients can request any enabled authentication mechanism. To enable Super Gluu as an authentication method, follow the steps below: Obtain the json contents of super_gluu custom script by using a jans-cli command like get-config-scripts-by-type , get-config-scripts-by-inum etc. e.g : /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-type --url-suffix type:PERSON_AUTHENTICATION , /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-inum --url-suffix inum:6122281b-b55d-4dd0-8115-b098eeeee2b7 Update the custom script and change the enabled attribute to true Now Sign-in with Super-Gluu is an available authentication mechanism for your Janssen Server. This means that, using OpenID Connect acr_values, applications can now request Super-Gluu authentication for users. !!! Note To make sure super_gluu has been enabled successfully, you can check your Janssen's Auth Server OpenID Connect configuration by navigating to the following URL: https:// /.well-known/openid-configuration. Find \"acr_values_supported\": and you should see \"super_gluu\".","title":"Enable Sign-in with Super-Gluu Authentication script"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#make-sign-in-with-super-gluu-script-as-default-authentication-script","text":"Use this link as a reference. Steps: 1. Create a file say sg-auth-default.json with the following contents { \"defaultAcr\": \"super_gluu\" } 2.Update the default authentication method to super_gluu /opt/jans/jans-cli/config-cli.py --operation-id put-acrs --data /tmp/sg-auth-default.json","title":"Make Sign-in with Super-Gluu Script as default authentication script:"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#test-the-feature","text":"To test, enter the complete URL for authorization in a browser or create a simple webpage with a link that simulates the user sign-in attempt. If the server is configured properly, the first page for the selected authentication method will be displayed to the user. An example of a complete URL looks like this - https://<your.jans.server>/jans-auth/authorize.htm?response_type=code&redirect_uri=https://<your.jans.server>/admin&client_id=<replace_with_inum_client_id>&scope=openid+profile+email+user_name&state=faad2cdjfdddjfkdf&nonce=dajdffdfsdcfff","title":"Test the feature"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#customizations-to-super-gluu-login-pages","text":"The Gluu Server includes a default public-facing pages for Super Gluu for enrollment and authentication. To customize the look and feel of the pages, follow the customization guide .","title":"Customizations to Super Gluu Login Pages"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#self-service","text":"To offer end-users a portal where they can manage their own account security preferences, including two-factor authentication credentials like Super Gluu, check out our new app, Gluu Casa .","title":"Self-service"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#manual-device-management","text":"A user's Super Gluu device(s) can be removed by a Janssen administrator by directly locating the user entry in LDAP. For example, let's say user abc loses their device and wants to enroll a new device to use Super Gluu. Find the DN of the user in LDAP Find the registation under ou=fido2_register for associated with the user Remove the jansId DN Now the old device is gone and the user can enroll a new device","title":"Manual Device Management"},{"location":"script-catalog/person_authentication/super-gluu-external-authenticator/#device-management-using-scim","text":"See the SCIM documentation on how to manage Super Gluu devices, using the SCIM protocol.","title":"Device management using SCIM"},{"location":"script-catalog/person_authentication/twilio-2fa/","text":"SMS One-Time Password (OTP) Authentication # Overview # SMS is a common technology used for the delivery of OTPs. Text messages provide a ubiquitous communication channel, and are directly available in nearly all mobile handsets and, through text-to-speech conversion, any mobile or landline telephone. This document explains how to configure the Gluu Server for two-step, two-factor authentication (2FA) with username / password as the first step, and an OTP sent via text message as the second step. Note As indicated, this script uses the Twilio cloud communications platform to deliver SMS messages. Prerequisites # The Twilio SMS OTP script (included in the default Janssen Server distribution); A Twilio account . The twilio jar library added to jans-auth A mobile device and phone number that can receive SMS text messages Twilio as a 2FA method # Twilio offers Voice, SMS, and MMS capabilities, but we will only need SMS for the purpose of this document. When registering for a Twilio account, you will be asked to verify your personal phone number, and then will be given a Twilio phone number. Ensure the number given is SMS enabled and supports sending messages to the countries you are targeting. You may need to enable countries manually (see the Geo permissions page ). Twilio trial accounts only allow sending messages to mobile numbers already linked to the account, so for testing you will want to add (and verify) some additional numbers besides your personal one to make sure the integration is working as expected. When you are ready to move to production, you will want to purchase a Twilio plan. Add Twilio library to jans-auth # Copy the Twilio jar file to the following jans-auth folder inside the Gluu Server chroot: /opt/jans/jetty/jans-auth/custom/libs Edit /opt/jans/jetty/jans-auth/webapps/jans-auth.xml and add the following line: <Set name=\"extraClasspath\">/opt/jans/jetty/jans-auth/custom/libs/twilio.jar</Set> Restart the jans-auth service Properties # The custom script has the following properties: Property Description Input value twilio_sid Twilio account SID Obtain from your Twilio account twilio_token Access token associated to Twilio account Obtain from your Twilio account from_number Twilio phone number assigned to the account Obtain from your Twilio account Enable twilio_sms script # By default, users will get the default authentication mechanism as specified above. However, using the OpenID Connect acr_values parameter, web and mobile clients can request any enabled authentication mechanism . Obtain the json contents of twilio_sms custom script by using a jans-cli command like get-config-scripts-by-type , get-config-scripts-by-inum etc. e.g : /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-type --url-suffix type:PERSON_AUTHENTICATION , /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-inum --url-suffix inum:6122281b-b55d-4dd0-8115-b098eeeee2b7 Update the custom script and change the enabled attribute to true Now twilio_sms is an available authentication mechanism for your Janssen Server. This means that, using OpenID Connect acr_values , applications can now request twilio_sms authentication for users. Note To make sure twilio_sms has been enabled successfully, you can check your Janssen's Auth Server OpenID Connect configuration by navigating to the following URL: https://<hostname>/.well-known/openid-configuration . Find \"acr_values_supported\": and you should see twilio_sms . Enable twilio_sms Script as default authentication script: # Use this link as a reference. Follow the steps below to enable twilio_sms authentication: 1. Create a file say twilio_sms -auth-default.json with the following contents { \"defaultAcr\": \"`twilio_sms` \" } 2.Update the default authentication method to ``twilio_sms ` /opt/jans/jans-cli/config-cli.py --operation-id put-acrs --data /tmp/twilio_sms-auth-default.json Test the feature # To test, enter the complete URL for authorization in a browser or create a simple webpage with a link that simulates the user sign-in attempt. If the server is configured properly, the first page for the selected authentication method will be displayed to the user. An example of a complete URL looks like this - https://<your.jans.server>/jans-auth/authorize.htm?response_type=code&redirect_uri=https://<your.jans.server>/admin&client_id=<replace_with_inum_client_id>&scope=openid+profile+email+user_name&state=faad2cdjfdddjfkdf&nonce=dajdffdfsdcfff SMS OTP Login Pages # The Jans Server includes one page for SMS OTP: A login page that is displayed for all SMS OTP authentications. The designs are being rendered from the SMS xhtml page . To customize the look and feel of the pages, follow the customization guide . Using SMS OTP # Phone Number Enrollment # The script assumes the user phone number is already stored in his corresponding LDAP entry (attribute phoneNumberVerified ). You can change the attribute by altering the script directly (see authenticate routine). Subsequent Logins # All authentications will trigger an SMS with an OTP to the registered phone number. Enter the OTP to pass authentication. Credential Management # A user's registered phone number can be removed by a Gluu administrator either via the jans TUI, or in LDAP under the user entry. Once the phone number has been removed from the user's account, the user can re-enroll a new phone number following the phone number enrollment instructions above. Troubleshooting # If problems are encountered, take a look at the logs, specifically /opt/jans/jetty/jans-auth/logs/jans-auth_script.log . Inspect all messages related to Twilio. For instance, the following messages show an example of correct script initialization: Twilio SMS. Initialization Twilio SMS. Initialized successfully Also make sure you are using the latest version of the script that can be found here . Self-service account security # To offer end-users a portal where they can manage their own account security preferences, including two-factor authentication credentials like phone numbers for SMS OTP, check out our new app, Gluu Casa .","title":"SMS One-Time Password (OTP) Authentication"},{"location":"script-catalog/person_authentication/twilio-2fa/#sms-one-time-password-otp-authentication","text":"","title":"SMS One-Time Password (OTP) Authentication"},{"location":"script-catalog/person_authentication/twilio-2fa/#overview","text":"SMS is a common technology used for the delivery of OTPs. Text messages provide a ubiquitous communication channel, and are directly available in nearly all mobile handsets and, through text-to-speech conversion, any mobile or landline telephone. This document explains how to configure the Gluu Server for two-step, two-factor authentication (2FA) with username / password as the first step, and an OTP sent via text message as the second step. Note As indicated, this script uses the Twilio cloud communications platform to deliver SMS messages.","title":"Overview"},{"location":"script-catalog/person_authentication/twilio-2fa/#prerequisites","text":"The Twilio SMS OTP script (included in the default Janssen Server distribution); A Twilio account . The twilio jar library added to jans-auth A mobile device and phone number that can receive SMS text messages","title":"Prerequisites"},{"location":"script-catalog/person_authentication/twilio-2fa/#twilio-as-a-2fa-method","text":"Twilio offers Voice, SMS, and MMS capabilities, but we will only need SMS for the purpose of this document. When registering for a Twilio account, you will be asked to verify your personal phone number, and then will be given a Twilio phone number. Ensure the number given is SMS enabled and supports sending messages to the countries you are targeting. You may need to enable countries manually (see the Geo permissions page ). Twilio trial accounts only allow sending messages to mobile numbers already linked to the account, so for testing you will want to add (and verify) some additional numbers besides your personal one to make sure the integration is working as expected. When you are ready to move to production, you will want to purchase a Twilio plan.","title":"Twilio as a 2FA method"},{"location":"script-catalog/person_authentication/twilio-2fa/#add-twilio-library-to-jans-auth","text":"Copy the Twilio jar file to the following jans-auth folder inside the Gluu Server chroot: /opt/jans/jetty/jans-auth/custom/libs Edit /opt/jans/jetty/jans-auth/webapps/jans-auth.xml and add the following line: <Set name=\"extraClasspath\">/opt/jans/jetty/jans-auth/custom/libs/twilio.jar</Set> Restart the jans-auth service","title":"Add Twilio library to jans-auth"},{"location":"script-catalog/person_authentication/twilio-2fa/#properties","text":"The custom script has the following properties: Property Description Input value twilio_sid Twilio account SID Obtain from your Twilio account twilio_token Access token associated to Twilio account Obtain from your Twilio account from_number Twilio phone number assigned to the account Obtain from your Twilio account","title":"Properties"},{"location":"script-catalog/person_authentication/twilio-2fa/#enable-twilio_sms-script","text":"By default, users will get the default authentication mechanism as specified above. However, using the OpenID Connect acr_values parameter, web and mobile clients can request any enabled authentication mechanism . Obtain the json contents of twilio_sms custom script by using a jans-cli command like get-config-scripts-by-type , get-config-scripts-by-inum etc. e.g : /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-type --url-suffix type:PERSON_AUTHENTICATION , /opt/jans/jans-cli/config-cli.py --operation-id get-config-scripts-by-inum --url-suffix inum:6122281b-b55d-4dd0-8115-b098eeeee2b7 Update the custom script and change the enabled attribute to true Now twilio_sms is an available authentication mechanism for your Janssen Server. This means that, using OpenID Connect acr_values , applications can now request twilio_sms authentication for users. Note To make sure twilio_sms has been enabled successfully, you can check your Janssen's Auth Server OpenID Connect configuration by navigating to the following URL: https://<hostname>/.well-known/openid-configuration . Find \"acr_values_supported\": and you should see twilio_sms .","title":"Enable twilio_sms script"},{"location":"script-catalog/person_authentication/twilio-2fa/#enable-twilio_sms-script-as-default-authentication-script","text":"Use this link as a reference. Follow the steps below to enable twilio_sms authentication: 1. Create a file say twilio_sms -auth-default.json with the following contents { \"defaultAcr\": \"`twilio_sms` \" } 2.Update the default authentication method to ``twilio_sms ` /opt/jans/jans-cli/config-cli.py --operation-id put-acrs --data /tmp/twilio_sms-auth-default.json","title":"Enable twilio_sms Script as default authentication script:"},{"location":"script-catalog/person_authentication/twilio-2fa/#test-the-feature","text":"To test, enter the complete URL for authorization in a browser or create a simple webpage with a link that simulates the user sign-in attempt. If the server is configured properly, the first page for the selected authentication method will be displayed to the user. An example of a complete URL looks like this - https://<your.jans.server>/jans-auth/authorize.htm?response_type=code&redirect_uri=https://<your.jans.server>/admin&client_id=<replace_with_inum_client_id>&scope=openid+profile+email+user_name&state=faad2cdjfdddjfkdf&nonce=dajdffdfsdcfff","title":"Test the feature"},{"location":"script-catalog/person_authentication/twilio-2fa/#sms-otp-login-pages","text":"The Jans Server includes one page for SMS OTP: A login page that is displayed for all SMS OTP authentications. The designs are being rendered from the SMS xhtml page . To customize the look and feel of the pages, follow the customization guide .","title":"SMS OTP Login Pages"},{"location":"script-catalog/person_authentication/twilio-2fa/#using-sms-otp","text":"","title":"Using SMS OTP"},{"location":"script-catalog/person_authentication/twilio-2fa/#phone-number-enrollment","text":"The script assumes the user phone number is already stored in his corresponding LDAP entry (attribute phoneNumberVerified ). You can change the attribute by altering the script directly (see authenticate routine).","title":"Phone Number Enrollment"},{"location":"script-catalog/person_authentication/twilio-2fa/#subsequent-logins","text":"All authentications will trigger an SMS with an OTP to the registered phone number. Enter the OTP to pass authentication.","title":"Subsequent Logins"},{"location":"script-catalog/person_authentication/twilio-2fa/#credential-management","text":"A user's registered phone number can be removed by a Gluu administrator either via the jans TUI, or in LDAP under the user entry. Once the phone number has been removed from the user's account, the user can re-enroll a new phone number following the phone number enrollment instructions above.","title":"Credential Management"},{"location":"script-catalog/person_authentication/twilio-2fa/#troubleshooting","text":"If problems are encountered, take a look at the logs, specifically /opt/jans/jetty/jans-auth/logs/jans-auth_script.log . Inspect all messages related to Twilio. For instance, the following messages show an example of correct script initialization: Twilio SMS. Initialization Twilio SMS. Initialized successfully Also make sure you are using the latest version of the script that can be found here .","title":"Troubleshooting"},{"location":"script-catalog/person_authentication/twilio-2fa/#self-service-account-security","text":"To offer end-users a portal where they can manage their own account security preferences, including two-factor authentication credentials like phone numbers for SMS OTP, check out our new app, Gluu Casa .","title":"Self-service account security"},{"location":"script-catalog/person_authentication/user-cert-external-authenticator/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/person_authentication/user-cert-external-authenticator/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/person_authentication/user-cert-external-authenticator/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/person_authentication/user-cert-external-authenticator/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/person_authentication/yubicloud-external-authenticator/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/person_authentication/yubicloud-external-authenticator/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/person_authentication/yubicloud-external-authenticator/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/person_authentication/yubicloud-external-authenticator/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/post_authn/post-authn/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/post_authn/post-authn/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/post_authn/post-authn/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/post_authn/post-authn/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/resource_owner_password_credentials/","text":"Overview # Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"script-catalog/resource_owner_password_credentials/#overview","text":"Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"script-catalog/resource_owner_password_credentials/resource-owner-password-credentials/","text":"This is a placeholder","title":"Index"},{"location":"script-catalog/resource_owner_password_credentials/resource-owner-password-credentials-2fa/","text":"2FA Resource Owner Password Script Using Twilio # Overview # This resource owner password script implements two factor authentication using twilio. This could easily be adjusted for other 2FA use cases (e.g. using a Yubikey or a magic link). Requirements # The script is written for jans , meaning it will only work on a Janssen or a Gluu Flex installation. An additional requirement is a twilio account with twilio API credentials. Application Flow and Sequence Diagram # The application flow is described below, alongside a sequence diagram In the first step, the user provides only his username or email (through the RP). The script then checks the username against the backend database. If the user is found, and has a phone number associated with his account, an OTP code is sent to the associated number. The user (through the RP) is prompted for the OTP code and the RP sends another authentication request to the script to validate the OTP code. If the OTP code is valid, the user provides his password which is then validated by the script. Only then is the access token issued and authentication succeed. Flex Server Configuration # Open your Flex UI and go to Admin > Scripts > and add a new custom script. Make sure the script type is RESOURCE_OWNER_PASSWORD_CREDENTIALS . The script contents should be this script . Add the following custom properties to the new script twilio_account_sid containing your twilio SID twilio_auth_token containing your twilio authentication token twilio_from_number containing the \"from\" twilio number Save your changes. Go to Auth Server > Clients and add a new client (click on the + sign in the top left) Create a new client , making sure it has the password grant and the token response types. In the Client Scripts tab , make sure to add the script you created above to the Password Grant list of scripts. Step (7) can be skipped if this is to be used with an existing OpenID client.","title":"2FA Resource Owner Password Script Using Twilio"},{"location":"script-catalog/resource_owner_password_credentials/resource-owner-password-credentials-2fa/#2fa-resource-owner-password-script-using-twilio","text":"","title":"2FA Resource Owner Password Script Using Twilio"},{"location":"script-catalog/resource_owner_password_credentials/resource-owner-password-credentials-2fa/#overview","text":"This resource owner password script implements two factor authentication using twilio. This could easily be adjusted for other 2FA use cases (e.g. using a Yubikey or a magic link).","title":"Overview"},{"location":"script-catalog/resource_owner_password_credentials/resource-owner-password-credentials-2fa/#requirements","text":"The script is written for jans , meaning it will only work on a Janssen or a Gluu Flex installation. An additional requirement is a twilio account with twilio API credentials.","title":"Requirements"},{"location":"script-catalog/resource_owner_password_credentials/resource-owner-password-credentials-2fa/#application-flow-and-sequence-diagram","text":"The application flow is described below, alongside a sequence diagram In the first step, the user provides only his username or email (through the RP). The script then checks the username against the backend database. If the user is found, and has a phone number associated with his account, an OTP code is sent to the associated number. The user (through the RP) is prompted for the OTP code and the RP sends another authentication request to the script to validate the OTP code. If the OTP code is valid, the user provides his password which is then validated by the script. Only then is the access token issued and authentication succeed.","title":"Application Flow and Sequence Diagram"},{"location":"script-catalog/resource_owner_password_credentials/resource-owner-password-credentials-2fa/#flex-server-configuration","text":"Open your Flex UI and go to Admin > Scripts > and add a new custom script. Make sure the script type is RESOURCE_OWNER_PASSWORD_CREDENTIALS . The script contents should be this script . Add the following custom properties to the new script twilio_account_sid containing your twilio SID twilio_auth_token containing your twilio authentication token twilio_from_number containing the \"from\" twilio number Save your changes. Go to Auth Server > Clients and add a new client (click on the + sign in the top left) Create a new client , making sure it has the password grant and the token response types. In the Client Scripts tab , make sure to add the script you created above to the Password Grant list of scripts. Step (7) can be skipped if this is to be used with an existing OpenID client.","title":"Flex Server Configuration"},{"location":"script-catalog/resource_owner_password_credentials/resource-owner-password-credentials-custom-params/","text":"This is a placeholder","title":"Index"},{"location":"script-catalog/revoke_token/revoke-token/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/revoke_token/revoke-token/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/revoke_token/revoke-token/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/revoke_token/revoke-token/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/scim/","text":"SCIM Guide # Overview # SCIM script allows you to execute custom logic when certain SCIM API operations are invoked. With SCIM scripts, custom business logic can be executed when several of the SCIM API operations are invoked. This is useful in many situations, for example: Trigger notifications to external systems when certain resources are deleted Alter the actual responses the service produces Attach additional information to resources when they are created or updated Implement a fine-grained level of access to resources so different callers have permission to handle only a restricted number of resources Notes: # In this document, the term resources refer to those \"entities\" the service can manage, for instance, users or groups The term operation refers to any SCIM functionality accessible through its HTTP endpoints Basic development skills are assumed. Some grasp of Java and Python are required as well as understanding of the SCIM protocol. Interface # Methods # API Overview Custom scripts adhere to a simple API (ie. a well-defined collection of methods/routines) that is described in the following. It is advised to check the dummy script provided here as you read this section. Scripts' config properties All methods contain a configurationAttributes parameter, this gives access to the configuration properties of the script itself. This is a relevant aspect of Gluu scripts: they are all parameterizable!. configurationAttributes is a java.util.Map<String, SimpleCustomProperty> and here is how SimpleCustomProperty looks. Basic Methods These are methods not related to SCIM operations but still play key roles: |Method Name|Description|Return Value| |:---|:---|:---| | init |Called when the (SCIM) service starts and every time the script properties or code changes|A boolean value describing success or failure| | destroy |Called every time the script properties or code changes (called before init )|A boolean value describing success or failure| | getApiVersion |Determines what methods are effectively called when SCIM endpoints are invoked|A positive integer| Pre-resource Modification They are called when the resource is about to be persisted. The second parameter in these methods hold the object that will be persisted to permanent storage, thus any change or manipulation upon the object will be reflected in the underlying database (as well as in the output of the SCIM operation call itself). These methods are called regardless of the API version used. Names are self explanatory: Methods 2nd param 2nd param Class/Link createUser , updateUser , deleteUser user ScimCustomPerson createGroup , updateGroup , deleteGroup group GluuGroup Pre-resource modification methods return a boolean. A False value aborts the corresponding SCIM operation and a 500 error is returned. The same applies if the method execution crashes at runtime. Note that update* methods are called for both SCIM PUT and PATCH operations. Post-resource Modification They are called after the resource is persisted. The second parameter in these methods hold the object that was saved. Any change or manipulation upon the object will not be reflected in the underlying database, but may still modify the service response. These methods are called if getApiVersion returns a number >= 2. Methods 2nd param 2nd param Class/Link postCreateUser , postUpdateUser , postDeleteUser user ScimCustomPerson postCreateGroup , postUpdateGroup , postDeleteGroup group GluuGroup Post-resource modification methods return a boolean. A False value aborts the corresponding SCIM operation and a 500 error is returned. The same applies if the method execution crashes at runtime. Note that postUpdate* methods are called for both SCIM PUT and PATCH operations. Single Resource Retrieval These apply for SCIM operations that retrieve a resource by ID. They are called after the resource has been obtained from the database. The second parameter in these methods hold a reference to such object. Any change or manipulation upon the object will not be reflected in the underlying database, but may still modify the service response. These methods are called if getApiVersion returns a number >= 3. Methods 2nd param 2nd param Class/Link getUser user ScimCustomPerson getGroup group GluuGroup Single resource retrieval methods return a boolean. A False value aborts the whole SCIM operation and a 500 error is returned. The same applies if the method execution crashes at runtime. Multiple Resources Retrieval These apply for SCIM search operations. They are called after the results have been obtained from the database. The second parameter in these methods hold a reference to such result set. Any change or manipulation upon the object will not be reflected in the underlying database, but may still modify the service response. These methods are called if getApiVersion returns a number >= 4. Methods 2nd param 2nd param Class/Link postSearchUsers results PagedResult postSearchGroups results PagedResult Multiple resources retrieval methods return a boolean. A False value aborts the whole SCIM operation and a 500 error is returned. The same applies if the method execution crashes at runtime. Note that searching using the root .search SCIM endpoint will trigger calls to both of the methods listed. Advanced control These are alternative methods that allow to tweak the response the service produces. They can be employed to introduce complex business rules when operations are executed. These methods are called if getApiVersion returns a number >= 5. Methods manageResourceOperation manageSearchOperation Example: Modifying Search Results # SCIM spec defines the concept of attribute returnability where some attributes should never be part of a response (like passwords), always be returned (like resource identifiers), or be returned by default unless otherwise stated by the excludedAttributes parameter. Assume you are maintaining a user base of secret agents that work for your company and need to avoid exposing information such as their physical addresses for safety reasons. To keep it simple let's restrict the scope to user searches only. In practice you should take steps to hide this data on user retrieval and update. Let's alter postSearchUsers 's second parameter ( results ) to ensure addresses are not leaked: for user in results . getEntries () : user . setAttribute ( \"jansAddres\" , None ) This is very straightforward code except for the usage of jansAddres . Shouldn't it be simply addresses as the known SCIM attribute? Scripts work with entities that are about to be persisted or have already been saved so they kind of resemble the database structure (schema in LDAP terms). It turns out that database attribute names rarely match with SCIM names. While it is easy to know the SCIM name of a database attribute, the converse requires checking the code, however since you already have the skill this shouldn't be a problem: in this Java class you'll find the representation of a user resource in SCIM spec terms. Pay attention to the addresses field and its associated StoreReference annotation that contains the attribute where addresses are actually stored. With that said, save your modifications. You may like the idea of adding some prints for enlightment like: print \"%d entries returned of %d\" % ( results . getEntriesCount () , results . getTotalEntriesCount ()) for user in results . getEntries () : print \"Flushing addresses for user %s\" % user . getUid () user . setAttribute ( \"jansAddres\" , None ) Ensure no addresses are returned anymore in your SCIM user searches. Happy testing! Controlling execution of SCIM operations # With the manageResourceOperation and manageSearchOperation methods you can make complex decisions on how processing should take place based on contextual data and the incoming payload. manageResourceOperation This method is invoked when any following operations are executed: resource creation, modification, removal and retrieval by ID. In case of bulks, the method is called for every operation that fits into these categories. Parameters are described in the table below: Name Description Class/Link context Provides contextual information about the SCIM operation being called such as type of resource involved, HTTP verb, request headers, query params, etc. OperationContext entity A non-null object representing the resource involved A descendant of Entry . If the resource is a user, it will be an instance of ScimCustomPerson . In case of a group, it will be a GluuGroup payload The payload sent in the invocation; null when the operation is removal or retrieval by ID The datatype depends on the operation called. Check the interface that suits best and inspect the first parameter's datatype. The class will belong to some subpackage inside io.jans.scim.model.scim2 This method is expected to return an instance of javax.ws.rs.core.Response that supersedes the output of the operation itself. In other words, the actual processing of the operation is skipped in favor of the code supplied here. However note that minor validations may take place in the payload before your code is actually called. Returning None transfers the control of the operation for normal processing (default Jans implementation). If the method execution crashes at runtime, a 500 HTTP error is sent. Notes: Possible values for context.getResourceType() are: User, Group, FidoDevice, Fido2Device context.getTokenDetails().getValue() is a shortcut that will give you the access token the caller employed to issue the service call Both context.getTokenDetails().getTokenType() and context.getTokenDetails().getScope() return non null values when the protection mechanism of the API is OAuth or test mode Note that for resource creation operation, entity basically contains the same data supplied in the POST payload . In this case, entity has not originated from the database and has not been persisted either For the case of modification, retrieval and removal, entity contains the data currently stored in the database for the resource in question Since many values come from Java code, you can always do getClass().getName() to get an idea of what type of variables you are dealing with To build custom error responses your can reuse some of the getErrorResponse methods of class BaseScimWebService This method offers a high degree of flexibility. Perform careful testing of your code and account all potential scenarios. manageSearchOperation This method is invoked when resource searches are performed. Parameters are described in the table below: name Description Class/Link context Provides contextual information about the SCIM operation being called such as type of resource involved, HTTP verb, request headers, query params, etc. OperationContext searchRequest An object representing the search parameters provided in the call (applies for both GET and POST) SearchRequest Unlike manageResourceOperation , no entity parameter is passed. This is so because making decisions based on already executed searches would have a performance impact. Instead you can use context.setFilterPrepend(...) to help restrict the search against the database: here you can pass a String value that will be interpreted as an SCIM filter expression (see section 3.4.2.2 of RFC 7644). When the search being performed already contains a search filter (i.e. searchRequest.getFilter() is non-empty), a new filter is created by appending both \"subfilters\" with an and operator. As in the case of manageResourceOperation this method is expected to return an instance of javax.ws.rs.core.Response . Returning None transfers the control of the operation for normal processing (the Jans implementation). If the method execution crashes at runtime, a 500 HTTP error is sent. The same recommendations given for manageResourceOperation apply here. If you build filter expressions in your method, ensure they are syntactically valid to avoid your callers getting unexpected \"invalidFilter\" 400 errors. Example: segmenting the user base Let's assume you make use of the SCIM attribute userType so that your user base is partitioned into three disjoint segments according to such attribute and you have designated its possible values to be: Contractor, Employee, or Intern. Suppose your company has three different applications that make management of users in every category, that is, only one application is devoted to manage contractors, another employees, and other interns. You are interested in consistently granting access so that no application can create, query or modify users that don't belong to its focus. To properly handle this multi-tenancy scenario, you decide to use the contextual information coming from every request to determine if the operation should be allowed or not. For this purpose you communicate every application developer to send an additional HTTP header in their call with a value that only you (the administrator) and the developer knows. Let's call it the \"secret\". For the sake of simplicity let's assume developers are external to the company and only you know their identities. They don't know each other so they cannot exchange secrets. The strategy to implement segmentation is rather simple: Alter the default SCIM script by supplying a custom implementation for the methods that control execution Make the HTTP header name be a configuration property of the script so that it is not hard-coded Add a configuration property that contains the mapping of userType value vs. expected header value in JSON format Adding and parsing config properties Using Jans Config CLI update the SCIM script and add properties: custom_header with value USER-SEGMENT-SECRET access_map with value { \"<random_string>\":\"Contractor\", \"<random_string>\":\"Employee\", \"<random_string>\":\"Intern\" } Save the changes. In the init method this properties should be parsed. To start, let's add some imports: from io.jans.scim.ws.rs.scim2 import BaseScimWebService import json Here is how init would look like: def init ( self , configurationAttributes ): self . custom_header = configurationAttributes . get ( \"custom_header\" ) . getValue2 () access_map_json = configurationAttributes . get ( \"access_map\" ) . getValue2 () self . access_map = json . loads ( access_map_json ) print \"ScimEventHandler (init): Initialized successfully\" return True Note no validations took place here: we assumed the script contains the properties, that they are non empty and have sensible values. Allow/Deny resource operations The first step is to know the kind of application that is calling our service. For this purpose let's create a method that given incoming request headers returns the matching userType # headers params is an instance of javax . ws . rs . core . MultivaluedMap < String , String > def getUserType ( self , headers ) : secret = headers . getFirst ( self . custom_header ) if secret in self . access_map : return self . access_map [ secret ] else : return None Now let's code manageResourceOperation . We should allow access only under the following conditions: The getUserType method does not return None The entity object ( ScimCustomPerson instance) has a proper userType value. This means that for user creation, the incoming payload comes with a matching userType and for the other cases, the already stored attribute matches as well Assume that if the operation invoked is not user-related, we should allow access freely. Here is how the implementation might look: def manageResourceOperation ( self , context , entity , payload , configurationAttributes ): print \"manageResourceOperation. SCIM endpoint invoked is %s (HTTP %s )\" % ( context . getPath (), context . getMethod ()) if context . getResourceType () != \"User\" : return None expected_user_type = self . getUserType ( context . getRequestHeaders ()) if expected_user_type != None and entity . getAttribute ( \"jansUsrTyp\" ) == expected_user_type : return None else : return BaseScimWebService . getErrorResponse ( 403 , None , \"Attempt to handle a not allowed user type\" ) Note no usage of the payload took place. A case you may like to evaluate is where mistakenly using an update operation, the userType is set to an unexpected value. Allow/Deny searches This time instead of inspecting an entity, we ought to make a filter expression to restrict the search when the database is queried. For your reference, a valid filter expression is for instance userType eq \"Contractor\" . def manageSearchOperation ( self , context , searchRequest , configurationAttributes ) : print \"manageSearchOperation. SCIM endpoint invoked is %s (HTTP %s)\" % ( context . getPath () , context . getMethod ()) resource_type = context . getResourceType () print \"manageSearchOperation. This is a search over %s resources\" % resource_type if resource_type != \"User\" : return None expected_user_type = self . getUserType ( context . getRequestHeaders ()) if expected_user_type != None : context . setFilterPrepend ( \"userType eq \\\" % s \\ \"\" % expected_user_type ) return None else : return BaseScimWebService . getErrorResponse ( 403 , None , \"Attempt to handle a not allowed user type\" ) The manageSearchOperation must return a javax.ws.rs.core.Response . A None value makes continue the operation processing normally. Working with more than one script # You may have already noticed that it is possible to have several scripts under the SCIM type. This is how execution takes place when there are several scripts enabled: The applicable method is called in the first script. If the return value was True , the method is called again but this time in the subsequent script. If at any point a False return value is encountered, the SCIM operation is aborted with error 500. This means that a normal operation execution requires all involved methods across different scripts to be successful. There is an important exception to the above and is related to the manage* methods. In this case, only one script takes effect (the first script found). Note that in most cases having a single SCIM script suffices for all needs. Common Use Cases # Script Type: Python # Custom SCIM Event Handler # The sample code snippet shows how to - 1. Modify Search Results 2. Segment the user base 3. Allow/Deny resource operations 4. Allow/Deny searches Script Type: Java # Custom SCIM Event Handler # The sample code snippet shows how to - 1. Modify Search Results 2. Segment the user base 3. Allow/Deny resource operations 4. Allow/Deny searches","title":"SCIM Guide"},{"location":"script-catalog/scim/#scim-guide","text":"","title":"SCIM Guide"},{"location":"script-catalog/scim/#overview","text":"SCIM script allows you to execute custom logic when certain SCIM API operations are invoked. With SCIM scripts, custom business logic can be executed when several of the SCIM API operations are invoked. This is useful in many situations, for example: Trigger notifications to external systems when certain resources are deleted Alter the actual responses the service produces Attach additional information to resources when they are created or updated Implement a fine-grained level of access to resources so different callers have permission to handle only a restricted number of resources","title":"Overview"},{"location":"script-catalog/scim/#notes","text":"In this document, the term resources refer to those \"entities\" the service can manage, for instance, users or groups The term operation refers to any SCIM functionality accessible through its HTTP endpoints Basic development skills are assumed. Some grasp of Java and Python are required as well as understanding of the SCIM protocol.","title":"Notes:"},{"location":"script-catalog/scim/#interface","text":"","title":"Interface"},{"location":"script-catalog/scim/#methods","text":"API Overview Custom scripts adhere to a simple API (ie. a well-defined collection of methods/routines) that is described in the following. It is advised to check the dummy script provided here as you read this section. Scripts' config properties All methods contain a configurationAttributes parameter, this gives access to the configuration properties of the script itself. This is a relevant aspect of Gluu scripts: they are all parameterizable!. configurationAttributes is a java.util.Map<String, SimpleCustomProperty> and here is how SimpleCustomProperty looks. Basic Methods These are methods not related to SCIM operations but still play key roles: |Method Name|Description|Return Value| |:---|:---|:---| | init |Called when the (SCIM) service starts and every time the script properties or code changes|A boolean value describing success or failure| | destroy |Called every time the script properties or code changes (called before init )|A boolean value describing success or failure| | getApiVersion |Determines what methods are effectively called when SCIM endpoints are invoked|A positive integer| Pre-resource Modification They are called when the resource is about to be persisted. The second parameter in these methods hold the object that will be persisted to permanent storage, thus any change or manipulation upon the object will be reflected in the underlying database (as well as in the output of the SCIM operation call itself). These methods are called regardless of the API version used. Names are self explanatory: Methods 2nd param 2nd param Class/Link createUser , updateUser , deleteUser user ScimCustomPerson createGroup , updateGroup , deleteGroup group GluuGroup Pre-resource modification methods return a boolean. A False value aborts the corresponding SCIM operation and a 500 error is returned. The same applies if the method execution crashes at runtime. Note that update* methods are called for both SCIM PUT and PATCH operations. Post-resource Modification They are called after the resource is persisted. The second parameter in these methods hold the object that was saved. Any change or manipulation upon the object will not be reflected in the underlying database, but may still modify the service response. These methods are called if getApiVersion returns a number >= 2. Methods 2nd param 2nd param Class/Link postCreateUser , postUpdateUser , postDeleteUser user ScimCustomPerson postCreateGroup , postUpdateGroup , postDeleteGroup group GluuGroup Post-resource modification methods return a boolean. A False value aborts the corresponding SCIM operation and a 500 error is returned. The same applies if the method execution crashes at runtime. Note that postUpdate* methods are called for both SCIM PUT and PATCH operations. Single Resource Retrieval These apply for SCIM operations that retrieve a resource by ID. They are called after the resource has been obtained from the database. The second parameter in these methods hold a reference to such object. Any change or manipulation upon the object will not be reflected in the underlying database, but may still modify the service response. These methods are called if getApiVersion returns a number >= 3. Methods 2nd param 2nd param Class/Link getUser user ScimCustomPerson getGroup group GluuGroup Single resource retrieval methods return a boolean. A False value aborts the whole SCIM operation and a 500 error is returned. The same applies if the method execution crashes at runtime. Multiple Resources Retrieval These apply for SCIM search operations. They are called after the results have been obtained from the database. The second parameter in these methods hold a reference to such result set. Any change or manipulation upon the object will not be reflected in the underlying database, but may still modify the service response. These methods are called if getApiVersion returns a number >= 4. Methods 2nd param 2nd param Class/Link postSearchUsers results PagedResult postSearchGroups results PagedResult Multiple resources retrieval methods return a boolean. A False value aborts the whole SCIM operation and a 500 error is returned. The same applies if the method execution crashes at runtime. Note that searching using the root .search SCIM endpoint will trigger calls to both of the methods listed. Advanced control These are alternative methods that allow to tweak the response the service produces. They can be employed to introduce complex business rules when operations are executed. These methods are called if getApiVersion returns a number >= 5. Methods manageResourceOperation manageSearchOperation","title":"Methods"},{"location":"script-catalog/scim/#example-modifying-search-results","text":"SCIM spec defines the concept of attribute returnability where some attributes should never be part of a response (like passwords), always be returned (like resource identifiers), or be returned by default unless otherwise stated by the excludedAttributes parameter. Assume you are maintaining a user base of secret agents that work for your company and need to avoid exposing information such as their physical addresses for safety reasons. To keep it simple let's restrict the scope to user searches only. In practice you should take steps to hide this data on user retrieval and update. Let's alter postSearchUsers 's second parameter ( results ) to ensure addresses are not leaked: for user in results . getEntries () : user . setAttribute ( \"jansAddres\" , None ) This is very straightforward code except for the usage of jansAddres . Shouldn't it be simply addresses as the known SCIM attribute? Scripts work with entities that are about to be persisted or have already been saved so they kind of resemble the database structure (schema in LDAP terms). It turns out that database attribute names rarely match with SCIM names. While it is easy to know the SCIM name of a database attribute, the converse requires checking the code, however since you already have the skill this shouldn't be a problem: in this Java class you'll find the representation of a user resource in SCIM spec terms. Pay attention to the addresses field and its associated StoreReference annotation that contains the attribute where addresses are actually stored. With that said, save your modifications. You may like the idea of adding some prints for enlightment like: print \"%d entries returned of %d\" % ( results . getEntriesCount () , results . getTotalEntriesCount ()) for user in results . getEntries () : print \"Flushing addresses for user %s\" % user . getUid () user . setAttribute ( \"jansAddres\" , None ) Ensure no addresses are returned anymore in your SCIM user searches. Happy testing!","title":"Example: Modifying Search Results"},{"location":"script-catalog/scim/#controlling-execution-of-scim-operations","text":"With the manageResourceOperation and manageSearchOperation methods you can make complex decisions on how processing should take place based on contextual data and the incoming payload. manageResourceOperation This method is invoked when any following operations are executed: resource creation, modification, removal and retrieval by ID. In case of bulks, the method is called for every operation that fits into these categories. Parameters are described in the table below: Name Description Class/Link context Provides contextual information about the SCIM operation being called such as type of resource involved, HTTP verb, request headers, query params, etc. OperationContext entity A non-null object representing the resource involved A descendant of Entry . If the resource is a user, it will be an instance of ScimCustomPerson . In case of a group, it will be a GluuGroup payload The payload sent in the invocation; null when the operation is removal or retrieval by ID The datatype depends on the operation called. Check the interface that suits best and inspect the first parameter's datatype. The class will belong to some subpackage inside io.jans.scim.model.scim2 This method is expected to return an instance of javax.ws.rs.core.Response that supersedes the output of the operation itself. In other words, the actual processing of the operation is skipped in favor of the code supplied here. However note that minor validations may take place in the payload before your code is actually called. Returning None transfers the control of the operation for normal processing (default Jans implementation). If the method execution crashes at runtime, a 500 HTTP error is sent. Notes: Possible values for context.getResourceType() are: User, Group, FidoDevice, Fido2Device context.getTokenDetails().getValue() is a shortcut that will give you the access token the caller employed to issue the service call Both context.getTokenDetails().getTokenType() and context.getTokenDetails().getScope() return non null values when the protection mechanism of the API is OAuth or test mode Note that for resource creation operation, entity basically contains the same data supplied in the POST payload . In this case, entity has not originated from the database and has not been persisted either For the case of modification, retrieval and removal, entity contains the data currently stored in the database for the resource in question Since many values come from Java code, you can always do getClass().getName() to get an idea of what type of variables you are dealing with To build custom error responses your can reuse some of the getErrorResponse methods of class BaseScimWebService This method offers a high degree of flexibility. Perform careful testing of your code and account all potential scenarios. manageSearchOperation This method is invoked when resource searches are performed. Parameters are described in the table below: name Description Class/Link context Provides contextual information about the SCIM operation being called such as type of resource involved, HTTP verb, request headers, query params, etc. OperationContext searchRequest An object representing the search parameters provided in the call (applies for both GET and POST) SearchRequest Unlike manageResourceOperation , no entity parameter is passed. This is so because making decisions based on already executed searches would have a performance impact. Instead you can use context.setFilterPrepend(...) to help restrict the search against the database: here you can pass a String value that will be interpreted as an SCIM filter expression (see section 3.4.2.2 of RFC 7644). When the search being performed already contains a search filter (i.e. searchRequest.getFilter() is non-empty), a new filter is created by appending both \"subfilters\" with an and operator. As in the case of manageResourceOperation this method is expected to return an instance of javax.ws.rs.core.Response . Returning None transfers the control of the operation for normal processing (the Jans implementation). If the method execution crashes at runtime, a 500 HTTP error is sent. The same recommendations given for manageResourceOperation apply here. If you build filter expressions in your method, ensure they are syntactically valid to avoid your callers getting unexpected \"invalidFilter\" 400 errors. Example: segmenting the user base Let's assume you make use of the SCIM attribute userType so that your user base is partitioned into three disjoint segments according to such attribute and you have designated its possible values to be: Contractor, Employee, or Intern. Suppose your company has three different applications that make management of users in every category, that is, only one application is devoted to manage contractors, another employees, and other interns. You are interested in consistently granting access so that no application can create, query or modify users that don't belong to its focus. To properly handle this multi-tenancy scenario, you decide to use the contextual information coming from every request to determine if the operation should be allowed or not. For this purpose you communicate every application developer to send an additional HTTP header in their call with a value that only you (the administrator) and the developer knows. Let's call it the \"secret\". For the sake of simplicity let's assume developers are external to the company and only you know their identities. They don't know each other so they cannot exchange secrets. The strategy to implement segmentation is rather simple: Alter the default SCIM script by supplying a custom implementation for the methods that control execution Make the HTTP header name be a configuration property of the script so that it is not hard-coded Add a configuration property that contains the mapping of userType value vs. expected header value in JSON format Adding and parsing config properties Using Jans Config CLI update the SCIM script and add properties: custom_header with value USER-SEGMENT-SECRET access_map with value { \"<random_string>\":\"Contractor\", \"<random_string>\":\"Employee\", \"<random_string>\":\"Intern\" } Save the changes. In the init method this properties should be parsed. To start, let's add some imports: from io.jans.scim.ws.rs.scim2 import BaseScimWebService import json Here is how init would look like: def init ( self , configurationAttributes ): self . custom_header = configurationAttributes . get ( \"custom_header\" ) . getValue2 () access_map_json = configurationAttributes . get ( \"access_map\" ) . getValue2 () self . access_map = json . loads ( access_map_json ) print \"ScimEventHandler (init): Initialized successfully\" return True Note no validations took place here: we assumed the script contains the properties, that they are non empty and have sensible values. Allow/Deny resource operations The first step is to know the kind of application that is calling our service. For this purpose let's create a method that given incoming request headers returns the matching userType # headers params is an instance of javax . ws . rs . core . MultivaluedMap < String , String > def getUserType ( self , headers ) : secret = headers . getFirst ( self . custom_header ) if secret in self . access_map : return self . access_map [ secret ] else : return None Now let's code manageResourceOperation . We should allow access only under the following conditions: The getUserType method does not return None The entity object ( ScimCustomPerson instance) has a proper userType value. This means that for user creation, the incoming payload comes with a matching userType and for the other cases, the already stored attribute matches as well Assume that if the operation invoked is not user-related, we should allow access freely. Here is how the implementation might look: def manageResourceOperation ( self , context , entity , payload , configurationAttributes ): print \"manageResourceOperation. SCIM endpoint invoked is %s (HTTP %s )\" % ( context . getPath (), context . getMethod ()) if context . getResourceType () != \"User\" : return None expected_user_type = self . getUserType ( context . getRequestHeaders ()) if expected_user_type != None and entity . getAttribute ( \"jansUsrTyp\" ) == expected_user_type : return None else : return BaseScimWebService . getErrorResponse ( 403 , None , \"Attempt to handle a not allowed user type\" ) Note no usage of the payload took place. A case you may like to evaluate is where mistakenly using an update operation, the userType is set to an unexpected value. Allow/Deny searches This time instead of inspecting an entity, we ought to make a filter expression to restrict the search when the database is queried. For your reference, a valid filter expression is for instance userType eq \"Contractor\" . def manageSearchOperation ( self , context , searchRequest , configurationAttributes ) : print \"manageSearchOperation. SCIM endpoint invoked is %s (HTTP %s)\" % ( context . getPath () , context . getMethod ()) resource_type = context . getResourceType () print \"manageSearchOperation. This is a search over %s resources\" % resource_type if resource_type != \"User\" : return None expected_user_type = self . getUserType ( context . getRequestHeaders ()) if expected_user_type != None : context . setFilterPrepend ( \"userType eq \\\" % s \\ \"\" % expected_user_type ) return None else : return BaseScimWebService . getErrorResponse ( 403 , None , \"Attempt to handle a not allowed user type\" ) The manageSearchOperation must return a javax.ws.rs.core.Response . A None value makes continue the operation processing normally.","title":"Controlling execution of SCIM operations"},{"location":"script-catalog/scim/#working-with-more-than-one-script","text":"You may have already noticed that it is possible to have several scripts under the SCIM type. This is how execution takes place when there are several scripts enabled: The applicable method is called in the first script. If the return value was True , the method is called again but this time in the subsequent script. If at any point a False return value is encountered, the SCIM operation is aborted with error 500. This means that a normal operation execution requires all involved methods across different scripts to be successful. There is an important exception to the above and is related to the manage* methods. In this case, only one script takes effect (the first script found). Note that in most cases having a single SCIM script suffices for all needs.","title":"Working with more than one script"},{"location":"script-catalog/scim/#common-use-cases","text":"","title":"Common Use Cases"},{"location":"script-catalog/scim/#script-type-python","text":"","title":"Script Type: Python"},{"location":"script-catalog/scim/#custom-scim-event-handler","text":"The sample code snippet shows how to - 1. Modify Search Results 2. Segment the user base 3. Allow/Deny resource operations 4. Allow/Deny searches","title":"Custom SCIM Event Handler"},{"location":"script-catalog/scim/#script-type-java","text":"","title":"Script Type: Java"},{"location":"script-catalog/scim/#custom-scim-event-handler_1","text":"The sample code snippet shows how to - 1. Modify Search Results 2. Segment the user base 3. Allow/Deny resource operations 4. Allow/Deny searches","title":"Custom SCIM Event Handler"},{"location":"script-catalog/scim/sample-script/","text":"This is a placeholder","title":"Index"},{"location":"script-catalog/spontaneous_scope/spontaneous-scope/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/spontaneous_scope/spontaneous-scope/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/spontaneous_scope/spontaneous-scope/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/spontaneous_scope/spontaneous-scope/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/uma_claims_gathering/uma-claims-gathering/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/uma_claims_gathering/uma-claims-gathering/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/uma_claims_gathering/uma-claims-gathering/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/uma_claims_gathering/uma-claims-gathering/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/uma_rpt_claims/uma-rpt-claims/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/uma_rpt_claims/uma-rpt-claims/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/uma_rpt_claims/uma-rpt-claims/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/uma_rpt_claims/uma-rpt-claims/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/uma_rpt_policy/","text":"Overview # Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"script-catalog/uma_rpt_policy/#overview","text":"Please use the left navigation menu to browse the content of this section while we are still working on developing content for Overview page. Contribute If you\u2019d like to contribute to this document, get started with the Contribution Guide","title":"Overview"},{"location":"script-catalog/uma_rpt_policy/uma-client-authz-rpt-policy/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/uma_rpt_policy/uma-client-authz-rpt-policy/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/uma_rpt_policy/uma-client-authz-rpt-policy/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/uma_rpt_policy/uma-client-authz-rpt-policy/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/uma_rpt_policy/uma-rpt-policy/","text":"This content is in progress # The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future. Have questions in the meantime? # While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover. Want to contribute? # If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Index"},{"location":"script-catalog/uma_rpt_policy/uma-rpt-policy/#this-content-is-in-progress","text":"The Janssen Project documentation is currently in development. Topic pages are being created in order of broadest relevance, and this page is coming in the near future.","title":"This content is in progress"},{"location":"script-catalog/uma_rpt_policy/uma-rpt-policy/#have-questions-in-the-meantime","text":"While this documentation is in progress, you can ask questions through GitHub Discussions or the community chat on Gitter . Any questions you have will help determine what information our documentation should cover.","title":"Have questions in the meantime?"},{"location":"script-catalog/uma_rpt_policy/uma-rpt-policy/#want-to-contribute","text":"If you have content you'd like to contribute to this page in the meantime, you can get started with our Contribution guide .","title":"Want to contribute?"},{"location":"script-catalog/update_token/","text":"Overview # By overriding the interface methods in UpdateTokenType inside a custom script you can Enable transformation of claims and values in id_token and Access token e.g. add a custom claim to an id_token , change a token expiry, change the sub value, or remove the nonce . Example use-case: As per the open banking standard, the id_token should contain claim openbanking_intent_id and the same value should also reflect in the sub claim. As specified in the FAPI Baseline Specification the sub claim should have the user id. Set a specific token lifetime Perform extra business logic like adding or removing scopes. Add an extra audit log for each token response. Flow # sequenceDiagram title UpdateToken script autonumber 1 RP->>Jans AS: Request token Jans AS->>Jans AS: Is UpdateToken script is associated with client? <br/>(or is there a script that applies to all clients? ) Jans AS->>Jans AS: do stuff note right of Jans AS: do stuff<br/>1. Enable transformation of claims and values in id_token <br/> OR 2. set token expiry <br/> or 3. add / remove scopes. <br/> or 4. perform audit logs Jans AS->>RP: return token(s) (Access token, ID token or Refresh Token) reflecting step 3 Adding the custom script to Jans server # Create cs.json with the contents of a CUSTOM script. To do that, run the following command. /opt/jans/jans-cli/config-cli.py --schema CustomScript > /tmp/cs.json Edit the file's contents to reflect the addition of the UpdateToken custom script. Set enabled flag true Configure any parameters that the script may use. name field should reflect the use case script_type should be UPDATE_TOKEN script.py can have contents similar to Sample Script ) and is present in jans-cli's host machine. { \"dn\": null, \"inum\": null, \"name\": \"update_token\", \"aliases\": [], \"description\": \"Update token custom script\", \"script\": \"_file /root/script.py\", \"scriptType\": \"UPDATE_TOKEN\", \"programmingLanguage\": \"JYTHON\", \"moduleProperties\": { \"value1\": null, \"value2\": null, \"description\": null }, \"configurationProperties\": [ { \"value1\": \"param_name\", \"value2\": \"DI3ICTTJKLL8PPPNGH7YI\", \"description\": \"This is just an example\", \"hide\": true }, { \"value1\": \"param_name_2\", \"value2\": \"eEbJdi3hg42zxyFYbHArU5RuioPP\", \"description\": \"yet another example\", \"hide\": true } ] , \"level\": \"integer\", \"revision\": 0, \"enabled\": true, \"scriptError\": { \"raisedAt\": null, \"stackTrace\": null }, \"modified\": false, \"internal\": false } - Add the custom script. Save the response, it will contain the inum of the newly added script. /opt/jans/jans-cli/config-cli.py --operation-id post-config-scripts --data /tmp/cs.json Associate an Update Token script to a client (RP) [optional step] # \ud83d\udcdd Note: If the Update token script is not associated with a client, then it will be applicable to all clients registered in the Jans Server. Which implies that all tokens obtained using the Jans server will reflect modifications as per the script. To Associate an Update Token script to a client (RP), execute the command below with appropriate values for: - inum of the client - inum of the update_token script /opt/jans/jans-cli/config-cli.py --operation-id patch-oauth-openid-clients-by-inum --url-suffix inum:inum_of_client --data '[ { \"op\": \"add\", \"path\": \"updateTokenScriptDns\", \"value\": [\"inum={SCRIPT_ID},ou=scripts,o=jans\"] } ]' Writing an Update token script (Pseudo code for potential usecases) # 1. Mandatory methods: # class UpdateToken(UpdateTokenType): def __init__(self, currentTimeMillis): self.currentTimeMillis = currentTimeMillis def init(self, customScript, configurationAttributes): return True def destroy(self, configurationAttributes): return True def getApiVersion(self): return 11 ```` ### 2. modifyIdToken () : Used to modify claims in an ID token Pseudocode and example : # Returns boolean, true - indicates that script applied changes # jsonWebResponse - is JwtHeader, you can use any method to manipulate JWT # context is reference of io.jans.oxauth.service.external.context.ExternalUpdateTokenContext def modifyIdToken(self, jsonWebResponse, context): # header claims jsonWebResponse . getHeader (). setClaim ( \"header_name\" , \"header_value\" ) # custom claims jsonWebResponse . getClaims (). setClaim ( \"openbanking_intent_id\" , openbanking_intent_id_value ) # regular claims jsonWebResponse . getClaims (). setClaim ( \"sub\" , claimValue ) return True ![Inspecting a modified ID token](https://github.com/JanssenProject/jans/blob/main/docs/assets/update-id-token.png) ### 3. modifyAccessToken(): #### a. Granularity of access control: An UpdateTokenType script is great for adding scopes or removing scopes to/from the Access token. By doing so you can tailor build the granularity of access control according to business need. [`context.overwriteAccessTokenScopes`](https://github.com/JanssenProject/jans/blob/v1.0.17.nightly/jans-auth-server/server/src/main/java/io/jans/as/server/service/external/context/ExternalUpdateTokenContext.java) is ready to use method of the `context` variable def modifyAccessToken(self, accessToken, context): context.overwriteAccessTokenScopes(accessToken, Sets.newHashSet(\"openid\", \"mynewscope\")) #### b. Perform business check before returning AT Pseudo code and example - Issue Access token only if account balance is greater than 0 # Returns boolean, true - indicates that script applied changes # accessToken - is JwtHeader, you can use any method to manipulate JWT # context is reference of io.jans.oxauth.service.external.context.ExternalUpdateTokenContext def modifyAccessToken(self, accessToken, context): # read from session sessionIdService = CdiUtil . bean ( SessionIdService ) sessionId = sessionIdService . getSessionByDn ( context . getGrant () . getSessionDn ()) # fetch from persistence org_id = sessionId . getSessionAttributes () . get ( \"org_id\" ) balance = thirdPartyApi . checkBalance ( org_id ) if balance > 0 : return True else : return False # forbid the creation of AT ``` c. Modify claims in an access token: # ``` # Returns boolean, true - indicates that script applied changes. If false is returned token will not be created. # accessToken is reference of io.jans.as.server.model.common.AccessToken (note authorization grant can be taken as context.getGrant()) # context is reference of io.jans.oxauth.service.external.context.ExternalUpdateTokenContext def modifyAccessToken(self, accessToken, context): # header claims accessToken . getHeader (). setClaim ( \"header_name\" , \"header_value\" ) # custom claims accessToken . getClaims (). setClaim ( \"claim_name\" , \"claimValue\" ) # regular claims accessToken . getClaims (). setClaim ( \"sub\" , claimValue ) return True ### 5. Modify a specific token lifetime based on the context: 1. Refresh token lifetime: def getRefreshTokenLifetimeInSeconds(self, context): return 24 * 60 * 60 # one day 2. ID token lifetime: def getIdTokenLifetimeInSeconds(self, context): return 10 * 60 * 60 # 10 hours 3. Access token lifetime: def getAccessTokenLifetimeInSeconds(self, context): return 10 * 60 * 60 # 10 hours ### 6. modifyRefreshToken() : Used to modify claims in a Refresh Token # Returns boolean, true - indicates that script applied changes. If false is returned token will not be created. # refreshToken is reference of io.jans.as.server.model.common.RefreshToken (note authorization grant can be taken as context.getGrant()) # context is reference of io.jans.as.server.service.external.context.ExternalUpdateTokenContext (in https://github.com/JanssenProject/jans-auth-server project, ) def modifyRefreshToken(self, refreshToken, context): return True ## IntrospectionType script vs UpdateTokenType script | | [`IntrospectionType`](https://github.com/JanssenProject/jans/blob/v1.0.17.nightly/jans-core/script/src/main/java/io/jans/model/custom/script/type/introspection/IntrospectionType.java)| [`UpdateTokenType`](https://github.com/JanssenProject/jans/blob/v1.0.17.nightly/jans-core/script/src/main/java/io/jans/model/custom/script/type/token/UpdateTokenType.java) | |---|---|---| | Client configuration parameter |Introspection script is invoked only when **`accessTokenAsJwt`=`true`** | Update token script is invoked irrespective of whether `accessTokenAsJwt` is `true` or `false` | | Core Purpose | Used to return access token meta information like current validity, approved scopes, and information about the context in which the token was issued when a Resource Server which queries the [Introspection endpoint](https://datatracker.ietf.org/doc/html/rfc7662) | used to enable transformation of claims and values in id_token and Access token, set a specific token lifetime, change granularity of access control (up-scoping, down-scoping), audit logging for each token response, forbid the creation of AT based on a criteria. | | Functionality | 1. Can be used to modify claims of an Access token as JWT, however this it is recommended to use UpdateToken script instead. |1. Used to modify id_token, refresh token and access token | | |2. Introspection script cannot change scope of AT | 2. UpdateToken can change scope of AT and modify AT object in persistence irrespective of the value of `accessTokenAsJwt` as `true` or `false` | | Script Invocation sequence |2. **After** an Access token is generated | 2. **Before** the creation of AT, id_token and refresh_token | ## Testing 1. Use this: [Reference for testing](https://github.com/JanssenProject/jans/blob/v1.0.17.nightly/jans-auth-server/client/src/test/java/io/jans/as/client/ws/rs/AuthorizationCodeFlowHttpTest.java) 2. Inspect the tokens. Use [jwt.io](https://jwt.io) to inspect the contents of a JWT. ## FAQ 1. How can I add a `dict` type object as a claim value? from io.jans.as.model.uti import JwtUtil from org.json import JSONObject; def modifyIdToken ( self , jsonWebResponse , context ) : datas = { 'country' : 'ID' , 'sponsor' : '7022952467' , 'role' : 'BusinessOwner' , 'salesplanaff' : '220' , 'acctsubtype' : 'BusinessOwner' , 'accttype' : 'AmBCBusiness' , 'abo' : '7022953754' , 'aboname' : 'NEW' , 'lclpartyid' : '119700175' , 'email' : None , 'status' : 'Active' } string_rep = json . dumps ( datas ) jsonObject = JwtUtil . fromJson ( string_rep ) jsonWebResponse . getClaims () . setClaim ( \"test\" , jsonObject ) print \"Update token script. Modify idToken: %s\" % jsonWebResponse return True ```","title":"Index"},{"location":"script-catalog/update_token/#overview","text":"By overriding the interface methods in UpdateTokenType inside a custom script you can Enable transformation of claims and values in id_token and Access token e.g. add a custom claim to an id_token , change a token expiry, change the sub value, or remove the nonce . Example use-case: As per the open banking standard, the id_token should contain claim openbanking_intent_id and the same value should also reflect in the sub claim. As specified in the FAPI Baseline Specification the sub claim should have the user id. Set a specific token lifetime Perform extra business logic like adding or removing scopes. Add an extra audit log for each token response.","title":"Overview"},{"location":"script-catalog/update_token/#flow","text":"sequenceDiagram title UpdateToken script autonumber 1 RP->>Jans AS: Request token Jans AS->>Jans AS: Is UpdateToken script is associated with client? <br/>(or is there a script that applies to all clients? ) Jans AS->>Jans AS: do stuff note right of Jans AS: do stuff<br/>1. Enable transformation of claims and values in id_token <br/> OR 2. set token expiry <br/> or 3. add / remove scopes. <br/> or 4. perform audit logs Jans AS->>RP: return token(s) (Access token, ID token or Refresh Token) reflecting step 3","title":"Flow"},{"location":"script-catalog/update_token/#adding-the-custom-script-to-jans-server","text":"Create cs.json with the contents of a CUSTOM script. To do that, run the following command. /opt/jans/jans-cli/config-cli.py --schema CustomScript > /tmp/cs.json Edit the file's contents to reflect the addition of the UpdateToken custom script. Set enabled flag true Configure any parameters that the script may use. name field should reflect the use case script_type should be UPDATE_TOKEN script.py can have contents similar to Sample Script ) and is present in jans-cli's host machine. { \"dn\": null, \"inum\": null, \"name\": \"update_token\", \"aliases\": [], \"description\": \"Update token custom script\", \"script\": \"_file /root/script.py\", \"scriptType\": \"UPDATE_TOKEN\", \"programmingLanguage\": \"JYTHON\", \"moduleProperties\": { \"value1\": null, \"value2\": null, \"description\": null }, \"configurationProperties\": [ { \"value1\": \"param_name\", \"value2\": \"DI3ICTTJKLL8PPPNGH7YI\", \"description\": \"This is just an example\", \"hide\": true }, { \"value1\": \"param_name_2\", \"value2\": \"eEbJdi3hg42zxyFYbHArU5RuioPP\", \"description\": \"yet another example\", \"hide\": true } ] , \"level\": \"integer\", \"revision\": 0, \"enabled\": true, \"scriptError\": { \"raisedAt\": null, \"stackTrace\": null }, \"modified\": false, \"internal\": false } - Add the custom script. Save the response, it will contain the inum of the newly added script. /opt/jans/jans-cli/config-cli.py --operation-id post-config-scripts --data /tmp/cs.json","title":"Adding the custom script to Jans server"},{"location":"script-catalog/update_token/#associate-an-update-token-script-to-a-client-rp-optional-step","text":"\ud83d\udcdd Note: If the Update token script is not associated with a client, then it will be applicable to all clients registered in the Jans Server. Which implies that all tokens obtained using the Jans server will reflect modifications as per the script. To Associate an Update Token script to a client (RP), execute the command below with appropriate values for: - inum of the client - inum of the update_token script /opt/jans/jans-cli/config-cli.py --operation-id patch-oauth-openid-clients-by-inum --url-suffix inum:inum_of_client --data '[ { \"op\": \"add\", \"path\": \"updateTokenScriptDns\", \"value\": [\"inum={SCRIPT_ID},ou=scripts,o=jans\"] } ]'","title":"Associate an Update Token script to a client (RP) [optional step]"},{"location":"script-catalog/update_token/#writing-an-update-token-script-pseudo-code-for-potential-usecases","text":"","title":"Writing an Update token script (Pseudo code for potential usecases)"},{"location":"script-catalog/update_token/#1-mandatory-methods","text":"class UpdateToken(UpdateTokenType): def __init__(self, currentTimeMillis): self.currentTimeMillis = currentTimeMillis def init(self, customScript, configurationAttributes): return True def destroy(self, configurationAttributes): return True def getApiVersion(self): return 11 ```` ### 2. modifyIdToken () : Used to modify claims in an ID token Pseudocode and example : # Returns boolean, true - indicates that script applied changes # jsonWebResponse - is JwtHeader, you can use any method to manipulate JWT # context is reference of io.jans.oxauth.service.external.context.ExternalUpdateTokenContext def modifyIdToken(self, jsonWebResponse, context): # header claims jsonWebResponse . getHeader (). setClaim ( \"header_name\" , \"header_value\" ) # custom claims jsonWebResponse . getClaims (). setClaim ( \"openbanking_intent_id\" , openbanking_intent_id_value ) # regular claims jsonWebResponse . getClaims (). setClaim ( \"sub\" , claimValue ) return True ![Inspecting a modified ID token](https://github.com/JanssenProject/jans/blob/main/docs/assets/update-id-token.png) ### 3. modifyAccessToken(): #### a. Granularity of access control: An UpdateTokenType script is great for adding scopes or removing scopes to/from the Access token. By doing so you can tailor build the granularity of access control according to business need. [`context.overwriteAccessTokenScopes`](https://github.com/JanssenProject/jans/blob/v1.0.17.nightly/jans-auth-server/server/src/main/java/io/jans/as/server/service/external/context/ExternalUpdateTokenContext.java) is ready to use method of the `context` variable def modifyAccessToken(self, accessToken, context): context.overwriteAccessTokenScopes(accessToken, Sets.newHashSet(\"openid\", \"mynewscope\")) #### b. Perform business check before returning AT Pseudo code and example - Issue Access token only if account balance is greater than 0 # Returns boolean, true - indicates that script applied changes # accessToken - is JwtHeader, you can use any method to manipulate JWT # context is reference of io.jans.oxauth.service.external.context.ExternalUpdateTokenContext def modifyAccessToken(self, accessToken, context): # read from session sessionIdService = CdiUtil . bean ( SessionIdService ) sessionId = sessionIdService . getSessionByDn ( context . getGrant () . getSessionDn ()) # fetch from persistence org_id = sessionId . getSessionAttributes () . get ( \"org_id\" ) balance = thirdPartyApi . checkBalance ( org_id ) if balance > 0 : return True else : return False # forbid the creation of AT ```","title":"1. Mandatory methods:"},{"location":"script-catalog/update_token/#c-modify-claims-in-an-access-token","text":"``` # Returns boolean, true - indicates that script applied changes. If false is returned token will not be created. # accessToken is reference of io.jans.as.server.model.common.AccessToken (note authorization grant can be taken as context.getGrant()) # context is reference of io.jans.oxauth.service.external.context.ExternalUpdateTokenContext def modifyAccessToken(self, accessToken, context): # header claims accessToken . getHeader (). setClaim ( \"header_name\" , \"header_value\" ) # custom claims accessToken . getClaims (). setClaim ( \"claim_name\" , \"claimValue\" ) # regular claims accessToken . getClaims (). setClaim ( \"sub\" , claimValue ) return True ### 5. Modify a specific token lifetime based on the context: 1. Refresh token lifetime: def getRefreshTokenLifetimeInSeconds(self, context): return 24 * 60 * 60 # one day 2. ID token lifetime: def getIdTokenLifetimeInSeconds(self, context): return 10 * 60 * 60 # 10 hours 3. Access token lifetime: def getAccessTokenLifetimeInSeconds(self, context): return 10 * 60 * 60 # 10 hours ### 6. modifyRefreshToken() : Used to modify claims in a Refresh Token # Returns boolean, true - indicates that script applied changes. If false is returned token will not be created. # refreshToken is reference of io.jans.as.server.model.common.RefreshToken (note authorization grant can be taken as context.getGrant()) # context is reference of io.jans.as.server.service.external.context.ExternalUpdateTokenContext (in https://github.com/JanssenProject/jans-auth-server project, ) def modifyRefreshToken(self, refreshToken, context): return True ## IntrospectionType script vs UpdateTokenType script | | [`IntrospectionType`](https://github.com/JanssenProject/jans/blob/v1.0.17.nightly/jans-core/script/src/main/java/io/jans/model/custom/script/type/introspection/IntrospectionType.java)| [`UpdateTokenType`](https://github.com/JanssenProject/jans/blob/v1.0.17.nightly/jans-core/script/src/main/java/io/jans/model/custom/script/type/token/UpdateTokenType.java) | |---|---|---| | Client configuration parameter |Introspection script is invoked only when **`accessTokenAsJwt`=`true`** | Update token script is invoked irrespective of whether `accessTokenAsJwt` is `true` or `false` | | Core Purpose | Used to return access token meta information like current validity, approved scopes, and information about the context in which the token was issued when a Resource Server which queries the [Introspection endpoint](https://datatracker.ietf.org/doc/html/rfc7662) | used to enable transformation of claims and values in id_token and Access token, set a specific token lifetime, change granularity of access control (up-scoping, down-scoping), audit logging for each token response, forbid the creation of AT based on a criteria. | | Functionality | 1. Can be used to modify claims of an Access token as JWT, however this it is recommended to use UpdateToken script instead. |1. Used to modify id_token, refresh token and access token | | |2. Introspection script cannot change scope of AT | 2. UpdateToken can change scope of AT and modify AT object in persistence irrespective of the value of `accessTokenAsJwt` as `true` or `false` | | Script Invocation sequence |2. **After** an Access token is generated | 2. **Before** the creation of AT, id_token and refresh_token | ## Testing 1. Use this: [Reference for testing](https://github.com/JanssenProject/jans/blob/v1.0.17.nightly/jans-auth-server/client/src/test/java/io/jans/as/client/ws/rs/AuthorizationCodeFlowHttpTest.java) 2. Inspect the tokens. Use [jwt.io](https://jwt.io) to inspect the contents of a JWT. ## FAQ 1. How can I add a `dict` type object as a claim value? from io.jans.as.model.uti import JwtUtil from org.json import JSONObject; def modifyIdToken ( self , jsonWebResponse , context ) : datas = { 'country' : 'ID' , 'sponsor' : '7022952467' , 'role' : 'BusinessOwner' , 'salesplanaff' : '220' , 'acctsubtype' : 'BusinessOwner' , 'accttype' : 'AmBCBusiness' , 'abo' : '7022953754' , 'aboname' : 'NEW' , 'lclpartyid' : '119700175' , 'email' : None , 'status' : 'Active' } string_rep = json . dumps ( datas ) jsonObject = JwtUtil . fromJson ( string_rep ) jsonWebResponse . getClaims () . setClaim ( \"test\" , jsonObject ) print \"Update token script. Modify idToken: %s\" % jsonWebResponse return True ```","title":"c. Modify claims in an access token:"}]}